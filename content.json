{"meta":{"title":"Jon's Blog","subtitle":"Cease to struggle and you cease to live. - Thomas Carlyle","description":"","author":"Jon","url":"https://noteforme.github.io","root":"/"},"pages":[{"title":"categories","date":"2017-08-01T05:08:13.000Z","updated":"2021-08-19T11:11:44.326Z","comments":false,"path":"categories/index.html","permalink":"https://noteforme.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2017-08-08T02:14:45.000Z","updated":"2021-08-19T11:11:44.326Z","comments":false,"path":"tags/index.html","permalink":"https://noteforme.github.io/tags/index.html","excerpt":"","text":""},{"title":"about","date":"2024-10-01T12:10:00.000Z","updated":"2024-10-01T12:11:12.633Z","comments":false,"path":"about/index.html","permalink":"https://noteforme.github.io/about/index.html","excerpt":"","text":"title: aboutlayout: aboutè¿™é‡Œå†™å…³äºŽé¡µçš„æ­£æ–‡ï¼Œæ”¯æŒ Markdown, HTML"}],"posts":[{"title":"C-Stream","slug":"C-Stream","date":"2025-05-06T13:57:48.000Z","updated":"2025-06-29T11:59:06.884Z","comments":true,"path":"2025/05/06/C-Stream/","link":"","permalink":"https://noteforme.github.io/2025/05/06/C-Stream/","excerpt":"","text":"# helpman -S3 getopt https://www.coursera.org/learn/interacting-system-managing-memory/supplement/IP2c9/complex-option-processing Opening a File Mode Read and&#x2F;or write Does not exist? Truncate? Position r read only fails no beginning r+ read&#x2F;write fails no beginning w write only created yes beginning w+ read&#x2F;write created yes beginning a writing created no end a+ read&#x2F;write created no end https://www.coursera.org/learn/interacting-system-managing-memory/supplement/Aj8DG/opening-a-file read file12345678910111213141516#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(int argc, char ** argv)&#123; if (argc !=2) &#123; printf(&quot;arg error&quot;); &#125; FILE * f = fopen(argv[1],&quot;r&quot;); if (f==NULL) &#123; printf(&quot;file open failed&quot;); &#125; int c; while ((c=fgetc(f))!=EOF) &#123; printf(&quot;%c&quot;,c); &#125;&#125; output fjeijfi jfief .&#x2F;file test.txt fgets123456789101112131415161718192021222324252627#include &lt;stdlib.h&gt;# define LINE_SIZE 5#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main(int argc, char ** argv)&#123; if (argc !=2) &#123; printf(&quot;arg error&quot;); &#125; FILE * f = fopen(argv[1],&quot;r&quot;); if (f==NULL) &#123; printf(&quot;file open failed&quot;); &#125; int c; long total = 0; char line[LINE_SIZE]; while (fgets(line,LINE_SIZE,f)!=NULL) &#123; if (strchr(line,&#x27;\\n&#x27;)==NULL) &#123; printf(&quot;Line is too long!\\n&quot;); return EXIT_FAILURE; &#125; total += atoi(line); &#125; printf(&quot;The total is %ld\\n&quot;,total); return EXIT_SUCCESS; &#125; .&#x2F;fgets num.txt output : Line is too long! Ã¥ 123456712314-5678977 Writing to FilesYou can also use fputc to write a single character at a time, or fputs to write a string without any format conversions. That is, if you do fputs(â€œ%dâ€) it will just print â€œ%dâ€to the file directly rather than attempting to convert an integer and print the result. C library functions may buffer the data, and not immediately request that the OS write it. Even once the application makes the requisite system calls to write the data, the OS may buffer it internally for a while before actually writing it out to the underlying hardware device. https://www.coursera.org/learn/interacting-system-managing-memory/supplement/OFKPW/writing-to-files Closing FilesWe will not concern ourselves with complex corrective actions when fclose failsâ€”printing an error message suffices. However, you should get in the habit of checking its return value. This way, when you are working on real programs, you will check the return value by habit, and at least think about what you should do if it fails. https://www.coursera.org/learn/interacting-system-managing-memory/supplement/DveF8/closing-files","categories":[{"name":"CPP","slug":"CPP","permalink":"https://noteforme.github.io/categories/CPP/"}],"tags":[]},{"title":"os_mit","slug":"os-mit","date":"2025-03-22T12:25:52.000Z","updated":"2025-10-03T07:44:16.729Z","comments":true,"path":"2025/03/22/os-mit/","link":"","permalink":"https://noteforme.github.io/2025/03/22/os-mit/","excerpt":"","text":"MIT6.S081GitHub - YukunJ&#x2F;xv6-operating-system: XV6 - MIT 6.s081 operating system Fall 2020 version https://zhuanlan.zhihu.com/p/449687883 https://zhuanlan.zhihu.com/p/442656932 MIT 6.S081: Operating System Engineering - CSè‡ªå­¦æŒ‡å— è¿™å‡ ä½æ•™æŽˆè¿˜ä¸“é—¨å†™äº†ä¸€æœ¬æ•™ç¨‹ï¼Œè¯¦ç»†è®²è§£äº† xv6 çš„è®¾è®¡æ€æƒ³å’Œå®žçŽ°ç»†èŠ‚ã€‚ è¿™é—¨è¯¾çš„è®²æŽˆä¹Ÿå¾ˆæœ‰æ„æ€ï¼Œè€å¸ˆä¼šå¸¦ç€å­¦ç”Ÿä¾ç…§ xv6 çš„æºä»£ç åŽ»ç†è§£æ“ä½œç³»ç»Ÿçš„ä¼—å¤šæœºåˆ¶å’Œè®¾è®¡ç»†èŠ‚ï¼Œè€Œä¸æ˜¯åœç•™äºŽç†è®ºçŸ¥è¯†ã€‚æ¯å‘¨éƒ½ä¼šæœ‰ä¸€ä¸ª labï¼Œè®©ä½ åœ¨ xv6 ä¸Šå¢žåŠ ä¸€äº›æ–°çš„æœºåˆ¶å’Œç‰¹æ€§ï¼Œéžå¸¸æ³¨é‡å­¦ç”ŸåŠ¨æ‰‹èƒ½åŠ›çš„åŸ¹å…»ã€‚æ•´ä¸ªå­¦æœŸä¸€å…±æœ‰ 11 ä¸ª labï¼Œè®©ä½ å…¨æ–¹ä½åœ°æ·±åˆ»ç†è§£æ“ä½œç³»ç»Ÿçš„æ¯ä¸ªéƒ¨åˆ†ï¼Œéžå¸¸æœ‰æˆå°±æ„Ÿã€‚è€Œä¸”æ‰€æœ‰çš„labéƒ½æœ‰ç€éžå¸¸å®Œå–„çš„æµ‹è¯•æ¡†æž¶ï¼Œæœ‰çš„æµ‹è¯•ä»£ç ç”šè‡³ä¸Šåƒè¡Œï¼Œè®©äººä¸å¾—ä¸ä½©æœ MIT çš„å‡ ä½æ•™æŽˆä¸ºäº†æ•™å¥½è¿™é—¨è¯¾æ‰€ä»˜å‡ºçš„å¿ƒè¡€ã€‚ è¿™é—¨è¯¾çš„åŽåŠç¨‹ä¼šè®²æŽˆæ“ä½œç³»ç»Ÿé¢†åŸŸçš„å¤šç¯‡ç»å…¸è®ºæ–‡ï¼Œæ¶‰åŠæ–‡ä»¶ç³»ç»Ÿã€ç³»ç»Ÿå®‰å…¨ã€ç½‘ç»œã€è™šæ‹ŸåŒ–ç­‰ç­‰å¤šä¸ªä¸»é¢˜ï¼Œè®©ä½ æœ‰æœºä¼šæŽ¥è§¦åˆ°å­¦ç•Œæœ€å‰æ²¿çš„ç ”ç©¶æ–¹å‘ã€‚ è¯¾ç¨‹èµ„æº è¯¾ç¨‹ç½‘ç«™ï¼šhttps://pdos.csail.mit.edu/6.828/2021/schedule.html è¯¾ç¨‹è§†é¢‘ï¼š - YouTubeï¼Œæ¯èŠ‚è¯¾çš„é“¾æŽ¥è¯¦è§è¯¾ç¨‹ç½‘ç«™ è¯¾ç¨‹è§†é¢‘ç¿»è¯‘æ–‡æ¡£ï¼šç®€ä»‹ | MIT6.S081 è¯¾ç¨‹æ•™æï¼šhttps://pdos.csail.mit.edu/6.828/2021/xv6/book-riscv-rev2.pdf è¯¾ç¨‹ä½œä¸šï¼šhttps://pdos.csail.mit.edu/6.828/2021/schedule.htmlï¼Œ11ä¸ªlabï¼Œå…·ä½“è¦æ±‚è¯¦è§è¯¾ç¨‹ç½‘ç«™ 6.S081 Fall 2020 Lecture 1: Introduction and Examples - YouTube If you want to know more about page tables, and how the OS handles memory, we encourage you to take a computer organization course after completing this specialization. https://www.coursera.org/learn/pointers-arrays-recursion/supplement/QuCc7/string-literals MIT OS environmenthttps://hub.docker.com/r/calvinhaynes412/mit6.s081 config dockerhttps://docs.docker.com/reference/cli/docker/container/ 1234567891011docker pull calvinhaynes412/mit6.s081:v1.3.1git clone git@github.com:BlogForMe/20labs.gitdocker run -p 8848:8848 --name=mit6.s081 -u 0:0 -v &quot;/home/m/20labs:/mit6.s081&quot; calvinhaynes412/mit6.s081:v1.3.1//home mac config docker docker run -p 8848:8848 --name=mit6.s081 -u 0:0 -v &quot;/Users/m/Documents/MIT6S081/20labs:/mit6.s081&quot; calvinhaynes412/mit6.s081:v1.3.1sudo docker container start 2d078986b704 â€œ&#x2F;Users&#x2F;m&#x2F;Documents&#x2F;MIT6S081&#x2F;20labsâ€ is local directory in mac æœ¬åœ°ç”¨æˆ·æµè§ˆå™¨è®¿é—® http://localhost:8848/ å¯†ç ï¼š mit6s081. æœåŠ¡å™¨ç«¯ç”¨æˆ·æµè§ˆå™¨è®¿é—®http:&#x2F;&#x2F;&lt;æœåŠ¡å™¨å…¬ç½‘ip&gt;:8848&#x2F; å¯†ç ï¼š mit6s081. https://docs.docker.com/reference/cli/docker/container/ Docker containerrun home1234567sudo docker container ls -a//home macsudo docker container start 2d078986b704//ho ubunsudo docker container start cf5ce745d947 https://hub.docker.com/search?q=s081&amp;architecture=amd64 run office1234sudo docker container ls -a//hosudo docker container start 1edd7b96390b https://hub.docker.com/r/calvinhaynes412/mit6.s081 https://hub.docker.com/search?q=s081&amp;architecture=amd64 123docker container exec -it b66e8a0c279a /bin/bashdocker run --rm -it -v /home/m/aosp8:/aosp sabdelkader/aosp å½“å‰ä¸»æœº &#x2F; dockerå®¹å™¨å†…çš„ç›®å½• lab noteæŽ’ç‰ˆå·®ä½†æ˜¯å‡†ç¡® https://th0ar.gitbooks.io/xv6-chinese/content/content/chapter0.html æŽ’ç‰ˆå¥½ä½†æ˜¯ä»£ç æ˜¾ç¤ºæœ‰è¯¯ MIT 6.S081 Lecture Notes - Xiao Fanâ€™s Personal Page codeGitHub - ZachVec&#x2F;MIT-6.S081: 6.S081 is an intermediate course in MIT for undergraduate CS students. This course involves some of the most important ideas in operating systems and provides some practice to get students familiar with those ideas. å¯ä»¥çœ‹çœ‹berkeleyçš„cs61cè¯¾ç¨‹ï¼Œåšå®Œä¸Žriscvç›¸å…³çš„ä¸¤ä¸ªlabå’Œä¸€ä¸ªprojectï¼Œä½ å°±ä¼šå¯¹riscvéžå¸¸äº†è§£äº† debug MIT 6.S081 xv6è°ƒè¯•ä¸å®Œå…¨æŒ‡åŒ— - KatyuMarisa - åšå®¢å›­ [6.S081çš„è°ƒè¯•å’ŒVSCodeçŽ¯å¢ƒé…ç½® | æ­¢æ¯â€™å¹»æƒ³ä¹¡ (https://zhangjk98.xyz/6.S081-VSCode-prepare-and-kernel-debugging/) Video é˜¿è‹EEer https://www.bilibili.com/video/BV1VZ4y197uk?spm_id_from=333.788.videopod.sections&amp;vd_source=d4c5260002405798a57476b318eccac9 process 123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdlib.h&gt;int main() &#123; printf(&quot;execute: before\\n&quot;); int pid = fork(); printf(&quot;execute: order =%d\\n&quot;, pid); if (pid &gt; 0) &#123; // Parent process printf(&quot;parent: child=%d\\n&quot;, pid); pid = wait((int *) 0); printf(&quot;child %d is done\\n&quot;, pid); &#125; else if (pid == 0) &#123; // Child process printf(&quot;child: exiting\\n&quot;); exit(0); // â† CHILD TERMINATES HERE! &#125; else &#123; // Fork failed printf(&quot;fork error\\n&quot;); return 1; &#125; printf(&quot;execute: after\\n&quot;); // â† Only parent reaches this return 0;&#125; why child cannot reach printf(â€œexecute: after\\nâ€) pipeä¸€ä¸ªç®¡é“ï¼Œparent å’Œchild å¯ä»¥æ“ä½œã€‚ å¦‚æžœparent ï¼Œ child éƒ½è¦å†™å…¥å’Œè¯»å– ï¼Œé‚£ä¹ˆå°±å»ºç«‹ ä¸¤ä¸ªç®¡é“ï¼Œä¸€ä¸ªè¯»å–ï¼Œä¸€ä¸ªå†™å…¥ã€‚ OS24 - Pipes | Interprocess Communication - YouTube Day 1ï¼šè¿›ç¨‹éš”ç¦» ä¸Šåˆï¼ˆOSï¼‰ MIT 6.S081 Lecture 2-3ï¼šè¿›ç¨‹ &amp; ç³»ç»Ÿè°ƒç”¨ Lab1: Shell â†’ ç”¨ fork/exec/wait å®žçŽ°ç®€æ˜“ Shell ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å­¦ä¹  Linux namespaceï¼ˆutsã€ipcã€netã€pidï¼‰ å®žè·µï¼š sudo unshare --uts --ipc --net --pid --fork bash è¿›å…¥éš”ç¦»çŽ¯å¢ƒï¼Œä¿®æ”¹ä¸»æœºåã€æŸ¥çœ‹ PID æ”¶èŽ·ï¼šç†è§£å®¹å™¨ &#x3D; è¢«éš”ç¦»çš„è¿›ç¨‹ ðŸ”¹ ä½ åˆšåˆšå®Œæˆäº† Day1 äº‘åŽŸç”Ÿå®žéªŒçš„å…³é”®ç»“è®º å®¹å™¨ä¸æ˜¯è™šæ‹Ÿæœºï¼Œè€Œæ˜¯ Linux è¿›ç¨‹åœ¨æ–°çš„ namespace é‡Œçš„è§†å›¾ã€‚ åœ¨ namespace é‡Œï¼Œå®ƒâ€œä»¥ä¸ºâ€è‡ªå·±æ˜¯ ç³»ç»Ÿçš„ PID&#x3D;1ï¼Œä½†å®¿ä¸»æœºä¸Šå®ƒå…¶å®žåªæ˜¯ä¸ªæ™®é€šè¿›ç¨‹ï¼ˆæ¯”å¦‚ PID&#x3D;2365ï¼‰ã€‚ è¿™æ­£æ˜¯ Docker&#x2F;Kubernetes çš„åº•å±‚æœºåˆ¶ã€‚ ðŸ”¹ å»ºè®®ä½ è®°å½•åœ¨å®žéªŒæŠ¥å‘Šé‡Œå†™ä¸Šï¼š è¿›å…¥ namespace çš„å‘½ä»¤ï¼š sudo unshare --uts --ipc --net --pid --mount-proc --fork bash è¾“å‡ºç»“æžœï¼š ps -ef â†’ bash PID&#x3D;1 /proc/1/cmdline â†’ bash å®žéªŒç»“è®ºï¼šå®¹å™¨ &#x3D; è¢« namespace éš”ç¦»çš„è¿›ç¨‹ã€‚ Day 2ï¼šè°ƒåº¦åŽŸç† ä¸Šåˆï¼ˆOSï¼‰ MIT 6.S081 Lecture 9ï¼šè°ƒåº¦ç®—æ³• Lab3: Scheduler â†’ ç»™ xv6 åŠ è°ƒåº¦ç­–ç•¥ ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å­¦ Kubernetes è°ƒåº¦æµç¨‹ï¼ˆFilter â†’ Score â†’ Bindï¼‰ kubectl get events è§‚å¯Ÿ Pod è°ƒåº¦ æ”¶èŽ·ï¼šK8s è°ƒåº¦å™¨ â‰ˆ æ“ä½œç³»ç»Ÿè°ƒåº¦å™¨ Day 3ï¼šèµ„æºæŽ§åˆ¶ ä¸Šåˆï¼ˆOSï¼‰ å­¦ä¹  cgroupsï¼ˆCPU&#x2F;å†…å­˜&#x2F;IO æŽ§åˆ¶ï¼‰ å®žéªŒï¼š cgcreate -g memory:/mygroup cgexec -g memory:/mygroup stress --vm 1 --vm-bytes 200M ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ Docker èµ„æºé™åˆ¶ï¼š docker run -d -m 100m --cpus=0.5 busybox top K8s Pod é™åˆ¶ï¼šresources.requests/limits æ”¶èŽ·ï¼šå®¹å™¨èµ„æºé™åˆ¶å°±æ˜¯ OS cgroups çš„å°è£… Day 4ï¼šæ–‡ä»¶ç³»ç»Ÿ ä¸Šåˆï¼ˆOSï¼‰ MIT 6.S081 Lecture 7-8ï¼šæ–‡ä»¶ç³»ç»Ÿ Lab5: File System â†’ æ–‡ä»¶æŒ‚è½½å®žéªŒ ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å­¦ OverlayFSï¼ˆDocker é•œåƒåŽŸç†ï¼‰ K8s Volume å®žéªŒï¼šæŒ‚è½½ ConfigMap&#x2F;HostPath æ”¶èŽ·ï¼šå®¹å™¨é•œåƒå’Œ Volume â‰ˆ æ–‡ä»¶ç³»ç»Ÿéš”ç¦» Day 5ï¼šå¹¶å‘ä¸ŽæŽ§åˆ¶å™¨ ä¸Šåˆï¼ˆOSï¼‰ MIT 6.S081 Lecture 10-11ï¼šå¹¶å‘ã€é” Lab4: Thread â†’ å¤šçº¿ç¨‹ä¸ŽåŒæ­¥ ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å­¦ Go å¹¶å‘ï¼ˆgoroutine + channelï¼‰ å†™ä¸ª Client-Go å°ç¨‹åºï¼šå®šæ—¶åˆ—å‡ºé›†ç¾¤ Pod æ”¶èŽ·ï¼šK8s æŽ§åˆ¶å™¨æœ¬è´¨æ˜¯â€œå¹¶å‘å¾ªçŽ¯ + çŠ¶æ€ä¿®å¤â€ Day 6ï¼šKubernetes æž¶æž„ ä¸Šåˆï¼ˆOSï¼‰ æ€»ç»“ OS ä¸‰å¤§æ”¯æŸ±ï¼šè¿›ç¨‹ã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿ ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å­¦ Kubernetes æ ¸å¿ƒç»„ä»¶ï¼šAPI Serverã€etcdã€Schedulerã€Controllerã€Kubelet ç”¨ Minikube éƒ¨ç½²ä¸‰å±‚åº”ç”¨ï¼ˆå‰ç«¯+åŽç«¯+DBï¼‰ æ”¶èŽ·ï¼šK8s â‰ˆ åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿ Day 7ï¼šç»¼åˆå®žæˆ˜ ä¸Šåˆï¼ˆOSï¼‰ å¿«é€Ÿå¤ç›˜ Lab1 &#x2F; Lab3 &#x2F; Lab5 æ”¶èŽ· ä¸‹åˆï¼ˆäº‘åŽŸç”Ÿï¼‰ å†™ä¸€ä¸ªç®€å•çš„ K8s æŽ§åˆ¶å™¨ï¼ˆGo + client-goï¼‰ç¤ºä¾‹ï¼šè‡ªåŠ¨æ¸…ç†è¿è¡Œè¶…è¿‡ 1 å°æ—¶çš„ Pod æ”¶èŽ·ï¼šæ‰“é€š OS åŽŸç† â†’ å®¹å™¨ â†’ Kubernetes â†’ å¹³å°ç ”å‘çš„é—­çŽ¯ âœ… æœ€ç»ˆä½ ä¼šæ”¶èŽ·ï¼š MIT 6.S081 çš„æ ¸å¿ƒå®žéªŒç»éªŒ Linux namespace + cgroups å®žæ“ Docker &amp; Kubernetes å®žæˆ˜éƒ¨ç½² ä¸€ä¸ª è‡ªå®šä¹‰æŽ§åˆ¶å™¨ demo é¡¹ç›®ï¼ˆèƒ½æ”¾ GitHub&#x2F;ç®€åŽ†ï¼‰","categories":[{"name":"OS","slug":"OS","permalink":"https://noteforme.github.io/categories/OS/"}],"tags":[]},{"title":"C-Pointer","slug":"C-Pointer","date":"2025-03-09T14:01:06.000Z","updated":"2025-06-28T01:04:32.299Z","comments":true,"path":"2025/03/09/C-Pointer/","link":"","permalink":"https://noteforme.github.io/2025/03/09/C-Pointer/","excerpt":"","text":"helpman -S3 getopt https://www.coursera.org/learn/interacting-system-managing-memory/supplement/IP2c9/complex-option-processing Pointers, Arrays, and Recursionlabé—®é¢˜å¤„ç† https://www.coursera.org/learn/writing-running-fixing-code/supplement/qPvk4/solutions-to-a-few-common-problems On a 32-bit machine, where addresses are 32 bits in size, the entire memory space begins at 0x00000000 (in hex, each 0 represents 4 bits of 0) and ends at 0xFFFFFFFF (recall that 0x indicates hexadecimal, and that each F represents four binary 1â€™s). https://www.coursera.org/learn/pointers-arrays-recursion/supplement/sVQ8O/a-programs-view-of-memory https://github.com/sinlatansen/Linux-C-Notes/blob/main/C07-%E5%87%BD%E6%95%B0/C7-%E5%87%BD%E6%95%B0.md#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88 the flow of building a C program Cæºæ–‡ä»¶ - é¢„å¤„ç† - ç¼–è¯‘ - æ±‡ç¼– - é“¾æŽ¥ - å¯æ‰§è¡Œæ–‡ä»¶ https://www.bilibili.com/video/BV18p4y167Md man 3 exit Pointer12345678910111213141516171819202122#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main() &#123; char buf[512]; // Buffer to hold our modified path. char *p; // Pointer used to manipulate buf. char path[] = &quot;folder&quot;; // Original path. // Copy the string &quot;folder&quot; into buf. strcpy(buf, path); // Set pointer p to the end of the string in buf. p = buf + strlen(buf); // Append a &#x27;/&#x27; character at the current position and then increment p. *p++ = &#x27;/&#x27;; // Append the null terminator to complete the string. *p = &#x27;\\0&#x27;; // Output the modified string. printf(&quot;Modified path: %s\\n&quot;, buf); return 0;&#125; output: Modified path: folder/ pointer ox4000 -&gt; ox3000 -&gt; ox2000 -&gt; value q p i logic12345q = &amp;p&amp;q = ox4000*q = *(&amp;p) = p = &amp;i**q = *(*q) = &amp;(&amp;i) = 1 array1234567891011// a[i] : a[i] = *(a+i) = *(p+i) = p[i]// &amp;a[i] : a[i] = a+i = p+i = &amp;p[i] int a[3] = &#123;1,2,3&#125;; int *p =a;// for (int i = 0; i &lt; sizeof(a)/ sizeof(*(a+0)); ++i) &#123;// for (int i = 0; i &lt; sizeof(a)/ sizeof(*a); ++i) &#123; for (int i = 0; i &lt; sizeof(a)/ sizeof(a[0]); ++i) &#123;// printf(&quot;%p -&gt; %d\\n&quot;,p+i,a[i]); printf(&quot;%p -&gt; %d\\n&quot;,p+i,*(p+1)); &#125; https://www.bilibili.com/video/BV18p4y167Md/?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=45 two-dimensional arrayTwo-dimensional array chart is shown 00 01 02 10 11 12 Two-dimensional array used in memory 00 01 01 10 11 12 123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;stdio.h&gt;int main() &#123; // Initialize 2D array with given values int a[2][3] = &#123; &#123;1, 2, 3&#125;, &#123;3, 5, 6&#125; &#125;; printf(&quot;Array values and pointers:\\n\\n&quot;); // Print array values and addresses for (int i = 0; i &lt; 2; i++) &#123; for (int j = 0; j &lt; 3; j++) &#123; // Print the value printf(&quot;a[%d][%d] = %d\\n&quot;, i, j, a[i][j]); // Print the memory address (pointer) printf(&quot;Address of a[%d][%d]: %p\\n&quot;, i, j, &amp;a[i][j]); printf(&quot;\\n&quot;); &#125; &#125; // Additional information about the array and pointers printf(&quot;Base address of array a: %p\\n&quot;, a); printf(&quot;Address of first row (a[0]): %p\\n&quot;, a[0]); printf(&quot;Address of second row (a[1]): %p\\n&quot;, a[1]); // Show how array can be accessed using pointer arithmetic printf(&quot;\\nAccessing using pointer arithmetic:\\n&quot;); for (int i = 0; i &lt; 2; i++) &#123; for (int j = 0; j &lt; 3; j++) &#123; printf(&quot;a+%d = %p\\n&quot;, i, a+i); printf(&quot;*(a+%d) = %p\\n&quot;, i, *(a+i)); printf(&quot;*(a+%d)+%d = %p\\n&quot;, i, j,*(a+i)+j); printf(&quot;(a+%d+%d) = %p\\n&quot;, i, j, (a+i+j)); printf(&quot;*(*(a+%d)+%d) = %d\\n&quot;, i, j, *(*(a+i)+j)); printf(&quot;\\n&quot;); &#125; &#125; return 0;&#125; https://www.youtube.com/watch?v=sHcnvZA2u88 *(a+i) èŽ·å–çš„ä¸æ˜¯ä¸€ä¸ªvalueå€¼ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚ å¯ä»¥ç†è§£æˆè¡ŒæŒ‡é’ˆå’Œåˆ—æŒ‡é’ˆã€‚ è¡ŒæŒ‡é’ˆï¼š int[3] , æ¯æ¬¡ç§»åŠ¨è·³è¿‡3ä¸ªä½ç½®ã€‚ åˆ—æŒ‡é’ˆ ï¼š åœ¨åˆ—ä¸Šè¿›è¡Œç§»åŠ¨ï¼Œæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚ 1*(a+i) åŠ * ç›¸å½“äºŽæŠŠè¡ŒæŒ‡é’ˆ å˜æˆ åˆ—æŒ‡é’ˆ https://www.bilibili.com/video/BV18p4y167Md?spm_id_from=333.788.videopod.episodes&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=46 6:00 12345678910111213141516171819202122232425262728293031323334353637383940Base address of array a: 0x7ffcb71b0280Address of first row (a[0]): 0x7ffcb71b0280Address of second row (a[1]): 0x7ffcb71b028cAccessing using pointer arithmetic:a+0 = 0x7ffcb71b0280*(a+0) = 0x7ffcb71b0280*(a+0)+0 = 0x7ffcb71b0280(a+0+0) = 0x7ffcb71b0280*(*(a+0)+0) = 1a+0 = 0x7ffcb71b0280*(a+0) = 0x7ffcb71b0280*(a+0)+1 = 0x7ffcb71b0284 // è¿™ä¸ªå’Œä¸Šé¢ä¸‹é¢çš„å¼€å§‹ä¸ä¸€æ ·(a+0+1) = 0x7ffcb71b028c*(*(a+0)+1) = 2a+0 = 0x7ffcb71b0280*(a+0) = 0x7ffcb71b0280*(a+0)+2 = 0x7ffcb71b0288(a+0+2) = 0x7ffcb71b0298*(*(a+0)+2) = 3a+1 = 0x7ffcb71b028c*(a+1) = 0x7ffcb71b028c*(a+1)+0 = 0x7ffcb71b028c(a+1+0) = 0x7ffcb71b028c*(*(a+1)+0) = 4a+1 = 0x7ffcb71b028c*(a+1) = 0x7ffcb71b028c*(a+1)+1 = 0x7ffcb71b0290(a+1+1) = 0x7ffcb71b0298*(*(a+1)+1) = 5a+1 = 0x7ffcb71b028c*(a+1) = 0x7ffcb71b028c*(a+1)+2 = 0x7ffcb71b0294(a+1+2) = 0x7ffcb71b02a4*(*(a+1)+2) = 6*(*(a+i)+j) why a+i and *(a+i) have same pointer , but (a+i)+j and (a+i+j) have different pointer address result This is a great question that gets to the heart of how 2D arrays and pointers work in C! Let me explain the key difference: a+i vs *(a+i): a+i is a pointer to the entire row i (a pointer to an array of 3 integers) *(a+i) dereferences that pointer, giving you a pointer to the first element of row i They appear to have the same address value when printed because they both point to the same memory location (the start of row i), but they have different types: a+i is of type int (*)[3] (pointer to an array of 3 integers) *(a+i) is of type int* (pointer to an integer) (a+i)+j vs (a+i+j): (a+i)+j is invalid - itâ€™s trying to add j to a pointer to a row, which would skip j rows *(a+i)+j is correct - itâ€™s adding j to a pointer to the first element of row i (a+i+j) is adding j to a pointer to row i, which is interpreted as jumping j rows ahead The difference in addresses occurs because: When you add j to a+i, youâ€™re moving j rows forward (each row is 3 integers Ã— sizeof(int) bytes) When you add j to *(a+i), youâ€™re moving j integers forward (each integer is sizeof(int) bytes) This is why (a+i+j) and *(a+i)+j point to completely different memory locations. The first is jumping multiple rows ahead, while the second is moving within the same row. For a 2D array access, the correct pointer arithmetic is *(*(a+i)+j), which corresponds to a[i][j]. StringThe compiler puts the string literals into a read only region of memory because the literal may get reused, and thus should not be changed. Consider the following code: 12char * str1 = &quot;Hello&quot;;str1[0] = &#x27;J&#x27;; // this would crash, but suppose it did not Mutable StringsWhen we want to modify a string, we need the string to reside in writeable memory, such as the frame of a function or memory that is dynamically allocated by malloc (which you will learn about in Course 4). 1234char str[] = &quot;Hello World\\n&quot;;This code behaves exactly as if we wrote:char str[] = &#123;&#x27;H&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;, &#x27; &#x27;, &#x27;W&#x27;, &#x27;o&#x27;, &#x27;r&#x27;, &#x27;l&#x27; &#x27;d&#x27;, &#x27;\\n&#x27;, &#x27;\\0&#x27;&#125;; æ•°ç»„æŒ‡é’ˆhttps://www.bilibili.com/video/BV18p4y167Md?spm_id_from=333.788.videopod.episodes&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=46 12int(*q)[3] = a; // ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†æ•°ç»„*p æŒ‡é’ˆ æŒ‡å‘ int[3], æ¯æ¬¡ç§»åŠ¨3ä¸ªint a å’Œqæœ‰åŒæ ·çš„æ•ˆæžœ 123456789101112131415161718192021222324#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main( )&#123; int a[2][3] = &#123;[0][0]=1, [0][1]=2, [0][2]=3, [1][0]=4, [1][1]=5, [1][2]=6&#125;; int i, j; int *p = *a; int(*q)[3] = a; printf(format: &quot;a %p %p\\n&quot;, a, a + 1); printf(format: &quot;q %p %p\\n\\n&quot;, q, q + 1); for (i = 0; i &lt; 2; i++) &#123; for (j = 0; j &lt; 3; j++) &#123; // printf(&quot;%p --&gt; %d &quot;, &amp;a[i][j], a[i][j]); printf(format: &quot;%p --&gt; %d &quot;, *(a + i) + j, *(*(a + i) + j)); //printf(&quot;%p --&gt; %d &quot;, *(q + i) + j, *(*(q + i) + j)); &#125; printf(format: &quot;\\n&quot;); &#125;&#125; a 0x7ffd1d88e4c0 0x7ffd1d88e4ccp 0x7ffd1d88e4c0 0x7ffd1d88e4cc 0x7ffd1d88e4c0 â€“&gt; 1 0x7ffd1d88e4c4 â€“&gt; 2 0x7ffd1d88e4c8 â€“&gt; 30x7ffd1d88e4cc â€“&gt; 4 0x7ffd1d88e4d0 â€“&gt; 5 0x7ffd1d88e4d4 â€“&gt; 6 ä»Žç»“æžœå¯ä»¥çœ‹åˆ°a å’Œqè¾“å‡ºåŒæ ·çš„ç»“æžœï¼Œ+1åŽç§»åŠ¨ä¸€ä¸ªè¡ŒæŒ‡é’ˆã€‚ æŒ‡é’ˆä¸Žå­—ç¬¦æ•°ç»„123456789#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;int main( )&#123; char str[] = &quot;I love china!&quot;; char *p = str + 7; puts(str);&#125; I love china!china! p æ‰€æŒ‡å‘çš„èµ·å§‹ä½ç½®æ‹¿è¿›æ¥ï¼Œä¾æ¬¡å‘åŽè¾“å‡ºï¼Œç›´åˆ°ç¢°åˆ°å°¾0ä¸ºæ­¢ã€‚ 1234567char str[] = &quot;hello&quot;;// str[6]//(F) str = &quot;world&quot;; stræ•°ç»„åæ˜¯ä¸€ä¸ªåœ°å€å¸¸é‡strcpy(str, &quot;world&quot;); // hè¢«wè¦†ç›–ï¼Œeè¢«o,ç›´åˆ°å°¾0.puts(str); 123456 int main( ) &#123; char *str = &quot;hello&quot;;âš  printf(format: &quot;%d %d\\n&quot;, sizeof(str), strlen(s: str)); &#125; out: 8 5 64ä½ç³»ç»Ÿï¼Œä¸€ä¸ªæŒ‡é’ˆ8ä¸ªå­—èŠ‚ï¼Œheooloä¸åŒ…æ‹¬0,5ä¸ªå­—èŠ‚ã€‚ ä¸²å¸¸é‡ä¸èƒ½è¢«è¦†ç›–ï¼Œåªéœ€è¦ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘ã€‚ 12345678 char str[] = &quot;hello&quot;; //ä¸²å¸¸é‡ // str[6]// strcpy(str, &quot;world&quot;); str = &quot;world&quot;; puts(str); https://www.bilibili.com/video/BV18p4y167Md?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=47 Constä¸ŽæŒ‡é’ˆ1234const int * const * på¯ä»¥ç†è§£ constä¿®é¥° * p é‚£ä¹ˆpçš„æŒ‡å‘ä¸èƒ½æ”¹ constä¿®é¥° int * é‚£ä¹ˆ *pçš„å€¼ ä¸èƒ½æ”¹ã€‚ We have declared p as a pointer to a const intâ€”that is, p points at a int, and we are not allowed to change that int. We can change where p points (e.g., p &#x3D; &amp;y; is legalâ€”if y is an int). However, changing the value in the box that p points at (*e.g., p &#x3D; 4;) is illegalâ€”we have said that the int which p points at is const. If we do try to write something like *p &#x3D; 4;, we will get a compiler error like this: https://www.coursera.org/learn/pointers-arrays-recursion/supplement/CG1qU/const å¸¸é‡ const float pi &#x3D; 3.14 &#x2F;&#x2F; piè¿™ä¸ªå€¼ä¸èƒ½å˜ï¼Œç±»ä¼¼final in java 12345678910111213/** * const int a; * int const a; * * å¸¸é‡æŒ‡é’ˆ * const int *p; * int const *p; * * æŒ‡é’ˆå¸¸é‡ * int *const p; * * const int *const p */ å¸¸é‡æŒ‡é’ˆï¼šæŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ constä¿®é¥°*pï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸èƒ½å˜ æŒ‡é’ˆå¸¸é‡ï¼šè¿™ä¸ªæŒ‡é’ˆæ˜¯ä¸€ä¸ªå¸¸é‡ constä¿®é¥°æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸èƒ½å˜ 12345678int i = 1;int j = 100;const int *const p = &amp;i;//(F) p = &amp;j; //ä¸èƒ½æ”¹//(F) *p = 10; å¸¸é‡æŒ‡é’ˆ&#x2F;&#x2F;æŒ‡é’ˆæŒ‡å‘å¯ä»¥æ”¹ 12345678910111213141516 #include &lt;stdio.h&gt;âš  #include &lt;stdlib.h&gt; #define PI 3.14 int main() &#123; int i = 1; int j = 100; // å¸¸é‡æŒ‡é’ˆ const int *p = &amp;i; p = &amp;j; //æŒ‡é’ˆæŒ‡å‘å¯ä»¥æ”¹ printf(format: &quot;%d\\n&quot;,*p); // printf(&quot;i = %d\\n&quot;, i); &#125; æŒ‡é’ˆå¸¸é‡æŒ‡é’ˆæŒ‡å‘ä¸èƒ½å˜ 12345678int i = 1;int j = 100;const int *const p = &amp;i;//(F) p = &amp;j; //(F) *p = 10; æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¸èƒ½å˜.æŒ‡é’ˆæŒ‡å‘ä¹Ÿä¸èƒ½å˜ æŒ‡é’ˆæ•°ç»„ä¸Žæ•°ç»„æŒ‡é’ˆæ•°ç»„æŒ‡é’ˆ12int(*q)[3] = a; -&gt; type name; -&gt; int[3] *p; // ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†æ•°ç»„*p æŒ‡é’ˆ æŒ‡å‘ int[3], æ¯æ¬¡ç§»åŠ¨3ä¸ªint array of pointers æŒ‡é’ˆæ•°ç»„æ•°ç»„é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯æŒ‡é’ˆã€‚ 1int * arr[3]; -&gt; TYPE Name -&gt; int *[3] arr; First, we are not constrained to having each row be the same size as the other rows. Second, in the array of pointers representation, myMatrix [i] is an lvalue (recall that it is not if we just declare an array with multiple dimensions). Third, we can have two rows point at the exact same array (aliasing each other) 123456789101112131415161718192021222324252627282930int main()&#123; char *name[5] = &#123;&quot;Follow me&quot;, &quot;Basic&quot;, &quot;Great&quot;, &quot;Fortran&quot;, &quot;Computer&quot;&#125;; // æŒ‡é’ˆæ•°ç»„ int i, j, k; char *tmp; for (i = 0; i &lt; 5 - 1; i++) &#123; k = i; for (j = i + 1; j &lt; 5; j++) &#123; if (strcmp(name[k], name[j]) &gt; 0) k = j; &#125; if (k != j) &#123; tmp = name[i]; name[i] = name[k]; name[k] = tmp; &#125; &#125; for (int i = 0; i &lt; 5; i++) &#123; puts(name[i]); &#125; exit(0);&#125; å¤šçº§æŒ‡é’ˆFunctionä¸€ç»´æ•°ç»„int a[N] &#x3D; {1,2,3,4,5,6};int *p &#x3D; a; ä¼ å‚ å½¢å‚æŽ¥æ”¶ç±»åž‹ a int * *a int a[0] int &amp;a[3] int * p[i] int p int * *p int p+1 int* 123456789101112131415161718192021222324 #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; //void print_arr(int *p, int size) void print_arr(int p[], int size) // å’Œint *pä¸€æ ·çš„æ•ˆæžœ &#123; int i;âš  printf(format: &quot;%s:%d\\n&quot;, __FUNCTION__, sizeof(p)); // out: 8 æŒ‡é’ˆ for (i = 0; i &lt; size; i++) printf(format: &quot;%d &quot;, *(p + i)); printf(format: &quot;\\n&quot;); &#125;int main( )&#123; int a[] = &#123;[0]=1, [1]=3, [2]=5, [3]=7, [4]=9&#125;;âš  printf(format: &quot;%s:%d\\n&quot;, __FUNCTION__, sizeof(a)); // out: 20 5*4 print_arr(p: a, size: sizeof(a) / sizeof(*a));&#125; äºŒç»´æ•°ç»„ ä¼ å‚ ç±»åž‹ a[i][j] int *(a+i)+j int * a[i]+j ç­‰åŒäºŽ*(a+i)+j int æ­£ç¡®ç­”æ¡ˆï¼š int * p[i] int [N] * æ­£ç¡®ç­”æ¡ˆï¼š int *p int [N] * æ­£ç¡®ç­”æ¡ˆï¼š int q[i][j] int *q int [N] * æ­£ç¡®ç­”æ¡ˆï¼š int* q int (*) [N] p+3 int [N] * æ­£ç¡®ç­”æ¡ˆï¼š int* q+2 int [N] * æ­£ç¡®ç­”æ¡ˆï¼š int (*) [N] int (*p)[N] æ•°ç»„æŒ‡é’ˆ ï¼š æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ 1234567891011121314151617// void print_douarr1(int (*p)[N], int m, int n) æ•°ç»„æŒ‡é’ˆvoid print_douarr1(int (*p)[N], int m, int n)&#123; printf(&quot;sizeof(p)=%d\\n&quot;, sizeof(p)); int i, j; for (i = 0; i &lt; m; i++) &#123; for (j = 0; j &lt; n; j++) &#123; // printf(&quot;%4d&quot;, *(*(p + i) + j)); printf(&quot;%4d&quot;, p[i][j]); &#125; printf(&quot;\\n&quot;); &#125;&#125; &#x2F;&#x2F; ä¸ºä»€ä¹ˆå½¢å‚ä¼ çš„å€¼ä¸ä¸€æ ·ã€‚ 1234567891011121314151617181920212223242526272829303132333435float average_score(int *p, int n)&#123; float sum = 0; for (int i = 0; i &lt; n; i++) &#123; sum += *(p + i); &#125; return sum / n;&#125;void find_num(int (*p)[N], int num)&#123; for (int i = 0; i &lt; N; i++) &#123; printf(&quot;%d &quot;, *(*(p + num) + i)); // å…ˆè¡ŒæŒ‡é’ˆå˜åˆ—æŒ‡é’ˆ &#125; printf(&quot;\\n&quot;);&#125;int main()&#123; int i, j; int a[M][N] = &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12&#125;; float ave; // ave = average_score(*a, M * N); // printf(&quot;ave = %f\\n&quot;, ave); find_num(a, 2);&#125; I can explain the differences between these two parameter declarations in C. In the function average_score(int *p, int n), the parameter *p is a pointer to an integer. This means: It points to a single integer value It can also point to the first element of a 1D array of integers You can traverse through consecutive memory locations using pointer arithmetic (as done with *(p + i)) In the function find_num(int (*p)[N], int num), the parameter int (*p)[N] is a pointer to an array of N integers. This means: It points to a row of a 2D array Each â€œstepâ€ when using p + 1 advances by N integers (a whole row), not just one integer To access individual elements, you need double dereferencing as seen in *(*(p + num) + i) The main practical difference is how you navigate through memory: With int *p, adding 1 to the pointer moves to the next integer (4 bytes typically) With int (*p)[N], adding 1 to the pointer moves N integers forward (N*4 bytes typically) This is why in your find_num function, *(p + num) gives you a pointer to the beginning of row num, and then *(*(p + num) + i) accesses the individual elements in that row. assigementhttps://www.coursera.org/learn/interacting-system-managing-memory/programming/SuwHD/assignment-24-read-arr3 At first, I thought *q = &amp;p[1]; would change the value, but it just changes the address, not the value 123456789101112131415161718192021222324252627282930313233#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int* aFunction(int x, int *p, int ** q) &#123; printf(format: &quot;x = %d\\n&quot;, x); printf(format: &quot;*p = %d\\n&quot;, *p); printf(format: &quot;**q= %d\\n&quot;, **q); *p = 42; **q = 99; *q = &amp;p[1]; printf(format: &quot;&amp;p[1] = %d\\n&quot;, **q); return &amp;p[2];&#125;int main (void) &#123; int anArray[3][3] = &#123; [0]=&#123;[0]=1,[1]=2,[2]=3&#125;, [1]=&#123;[0]=4,[1]=5,[2]=6&#125;, [2]=&#123;[0]=7,[1]=8,[2]=9&#125; &#125;; int * p = anArray[1]; int * q = aFunction(x: anArray[0][0], p: anArray[2], q: &amp;p); for (int i =0; i &lt; 3; i++) &#123; for (int j = 0; j &lt; 3; j++) &#123; printf(format: &quot;%d\\n&quot;, anArray[i][j]); &#125; &#125; printf(format: &quot;*q=%d\\n&quot;, *q); return EXIT_SUCCESS;&#125;~ In aFunction: *p = 42; â†’ anArray[2][0] = 42 (p points to anArray[2]) **q = 99; â†’ anArray[1][0] = 99 (q points to p, which points to anArray[1]) *q = &amp;p[1]; â†’ q now points to anArray[2][1] return &amp;p[2]; â†’ returns address of anArray[2][2] This means: Weâ€™re changing the value of the pointer p in main Weâ€™re not changing the value at the memory location that p points to Weâ€™re making p point to a different memory address (anArray[2][1]) Step by step: Before: p in main points to anArray[1][0] *q = &amp;p[1]; changes where p points to After: p in main now points to anArray[2][1] å‡½æ•°ä¸ŽæŒ‡é’ˆæŒ‡é’ˆå‡½æ•° æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›žå€¼æ˜¯æŒ‡é’ˆã€‚ è¿”å›žå€¼ * å‡½æ•°å ï¼ˆå½¢å‚ï¼‰ å¦‚ï¼šint * fun(int); Function Pointeå‡½æ•°æŒ‡é’ˆ æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å‡½æ•°ã€‚ ç±»åž‹ ï¼ˆ* æŒ‡é’ˆåï¼‰ ï¼ˆå½¢å‚ï¼‰ å¦‚ï¼š int (*p)(int); this syntax makes sense, as it looks a lot like the normal declaration of a functionâ€”the return type comes first, followed by the name, followed by the parameters in parenthesis . 12345678910111213141516171819int * find_num(int (*p)[N], int num) // å­¦ç”Ÿçš„æˆç»©ï¼Œæ¯è¡Œå¼€å¤´æŒ‡è¿™ä¸ªå­¦ç”Ÿï¼ŒåŽç»­çš„åˆ—æ˜¯ä»–çš„æˆç»©&#123; if(num&gt;M-1) return NULL; return *(p+num);&#125; int main()&#123; int i, j; int a[M][N] = &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12&#125;; float ave; // ave = average_score(*a, M * N); // printf(&quot;ave = %f\\n&quot;, ave); find_num(a, 2);&#125; https://www.bilibili.com/video/BV18p4y167Md?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=59 123456789101112131415161718192021222324252627282930313233343536373839#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int add(int a, int b)&#123; return a + b;&#125;int sub(int a, int b)&#123; return a - b;&#125;int main()&#123; int a = 3, b = 5; int ret; // int (*p)(int, int); // int (*q)(int, int); int (*funcp[2])(int, int); // p = add; // q = sub; funcp[0] = add; funcp[1] = sub; // ret = p(a, b); // ret = q(a, b); for (int i = 0; i &lt; 2; i++) &#123; ret = funcp[i](a, b); // ä½œç”¨ä¸Žå‡½æ•° * å¯ä»¥çœç•¥ printf(&quot;ret = %d\\n&quot;, ret); &#125; exit(0);&#125; As with other types, we can use typedef with function pointers. The syntax is again more similar to function declarations than to other forms of typedef. We might re-write our previous example to use typedef, so that it is easier to read: 1234567typedef int (*int_function_t) (int);void doToAll(int * data, int n, int_function_t f) &#123; for (int i = 0; i &lt; n; i++) &#123; data[i] = f(data[i]); &#125;&#125; å‡½æ•°æŒ‡é’ˆæ•°ç»„https://www.bilibili.com/video/BV18p4y167Md?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=59 ç”±å‡½æ•°æŒ‡é’ˆç»„æˆçš„æ•°ç»„ã€‚ ç±»åž‹ ï¼ˆ*æ•°ç»„åã€ä¸‹æ ‡ã€‘ï¼‰ ï¼ˆå½¢å‚ï¼‰ å¦‚ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647int (*arr[N])(int)int (*funcp[2])(int,int);arræ•°ç»„æ€»æœ‰Nä¸ªå…ƒç´ ,è¿™Nä¸ªå…ƒç´ éƒ½æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œ### æŒ‡å‘æŒ‡é’ˆå‡½æ•°çš„å‡½æ•°æŒ‡é’ˆæ•°ç»„```c#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int add(int a, int b)&#123; return a + b;&#125;int sub(int a, int b)&#123; return a - b;&#125;int main()&#123; int a = 3, b = 5; int ret; // int (*p)(int, int); // int (*q)(int, int); int (*funcp[2])(int, int); // p = add; // q = sub; funcp[0] = add; funcp[1] = sub; // ret = p(a, b); // ret = q(a, b); for (int i = 0; i &lt; 2; i++) &#123; ret = funcp[i](a, b); printf(&quot;ret = %d\\n&quot;, ret); &#125; exit(0);&#125; https://github.com/sinlatansen/Linux-C-Notes/blob/main/ Dukefast-forward 04_compile 12345678910111213141516171819emacs README// open a fileCtrl + xCtrl + f// type the file// save the fileCtrl + xCtrl + s//suspend emacsCtrl + zgcc -o hello -Wall -pedantic -std=gnu99 hello.cgit add hello.cgit commit","categories":[{"name":"CPP","slug":"CPP","permalink":"https://noteforme.github.io/categories/CPP/"}],"tags":[]},{"title":"Docker_Config","slug":"Docker-Config","date":"2025-02-16T14:33:52.000Z","updated":"2025-07-15T14:55:02.309Z","comments":true,"path":"2025/02/16/Docker-Config/","link":"","permalink":"https://noteforme.github.io/2025/02/16/Docker-Config/","excerpt":"","text":"PROXYImage proxyhttps://docs.docker.com/engine/daemon/proxy/ vim &#x2F;etc&#x2F;docker&#x2F;daemon.json 1234567&#123; &quot;proxies&quot;: &#123; &quot;http-proxy&quot;: &quot;http://127.0.0.1:13658&quot;, &quot;https-proxy&quot;: &quot;http://127.0.0.1:13658&quot;, &quot;no-proxy&quot;: &quot;*.test.example.com,.example.org,127.0.0.0/8&quot; &#125;&#125; sudo mkdir -p &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;http-proxy.conf 1234[Service]Environment=&quot;HTTP_PROXY=http://127.0.0.1:7897&quot;Environment=&quot;HTTPS_PROXY=http://127.0.0.1:7897&quot;Environment=&quot;NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp&quot; setting this proxy , can pull image 1docker pull calvinhaynes412/mit6.s081:v1.3.1 IMAGE1docker images traefik v2.11 d7d7095a482f 2 weeks ago 178MBphpmyadmin latest 834a66ad6967 3 weeks ago 570MBhello-world latest 74cc54e27dc4 3 weeks ago 10.1kBmysql 8.0 6616596982ed 3 weeks ago 764MBdocker&#x2F;welcome-to-docker latest c1f619b6477e 15 months ago 18.6MB 1docker rmi traefik:v2.11 Untagged: traefik:v2.11Deleted: sha256:d7d7095a482f62a90d32807bd051fbd28763eaf0085ebe210dd2d4b3bf3e9660 IMAGE ID 1docker rmi 834a66ad6967 Untagged: phpmyadmin:latestUntagged: phpmyadmin@sha256:b8e9de0186fe7e12e3a9565432c9faf6e8f0ec0f78f07bc3625910fd130afb99 Containerhttps://docs.docker.com/reference/cli/docker/container/ 1docker run -p 8848:8848 --name=mit6.s081 -u 0:0 -v &quot;/home/m/20labs:/mit6.s081&quot; calvinhaynes412/mit6.s081:v1.3.1 https://docs.docker.com/reference/cli/docker/container/ run docker 1234docker container ls -a//hodocker container start cf5ce745d947 https://hub.docker.com/r/calvinhaynes412/mit6.s081 https://hub.docker.com/search?q=s081&amp;architecture=amd64 12345docker run --rm -it -v /home/m/aosp8:/aosp sabdelkader/aospdocker container start 4269513e4289docker container exec -it 4269513e4289 /bin/bash å½“å‰ä¸»æœº &#x2F; dockerå®¹å™¨å†…çš„ç›®å½• https://www.bilibili.com/video/BV1BE6PYUESb/","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"C_MAKEFILE","slug":"C-MAKEFILE","date":"2025-02-04T13:57:48.000Z","updated":"2025-05-18T14:52:54.150Z","comments":true,"path":"2025/02/04/C-MAKEFILE/","link":"","permalink":"https://noteforme.github.io/2025/02/04/C-MAKEFILE/","excerpt":"","text":"GCCgcc hello.c -o hello Course resources 12. Compilation and Makefiles https://cse.msu.edu/~cse251/ code.c 1234567891011#include &lt;stdio.h&gt; #include &lt;math.h&gt;#define NumIter 5int main() &#123;int i;for (i=1; i&lt;=NumIter; i++) printf(&quot;PI^%d is %f\\n&quot;, i,i);return 0;&#125; Preprocessing Removes preprocessor directives (commands that start with #) Producescode.i Donâ€™tusedirectly 1gcc -E code.c &gt; code.i output: code.i Compiling Convertssourcecodetomachinelanguagewithunresolveddirectives Producesthecode.obinary 1gcc -o code.o -c code.i output: code.o Linking Createsmachinelanguageexectutable Producesthecodebinarybylinkingwiththemathlibrary(â€lm) 1gcc -lm -o code code.o output: code -c (Compile only) i think it equals gcc -E and gcc - o Purpose: Tells GCC to compile the source code into an object file (.o or .obj), but not to link it. Usage: This is used when you want to compile source files without producing an executable, typically to be linked later in a separate step. Example : 1bash Copygcc -c myfile.c 1This will produce an object file myfile.o 1without linking. Makefilehttps://www.gnu.org/software/make/manual/make.html Make&#x2F;make.md Â· æ— é™åä¸‰å¹´&#x2F;CPP - Gitee.com https://www.bilibili.com/video/BV1Bv4y1J7QT hello.cpp 1234567#include &lt;stdio.h&gt;int main() &#123; // Print &quot;Hello, World!&quot; to the console printf(&quot;Hello, World!\\n&quot;); return 0;&#125; MakeFile 12hello: hello.cpp g++ hello.cpp -o hello make","categories":[{"name":"CPP","slug":"CPP","permalink":"https://noteforme.github.io/categories/CPP/"}],"tags":[]},{"title":"AOSP_LOG","slug":"AOSP-LOG","date":"2025-01-12T03:12:40.000Z","updated":"2025-01-27T00:00:36.929Z","comments":true,"path":"2025/01/12/AOSP-LOG/","link":"","permalink":"https://noteforme.github.io/2025/01/12/AOSP-LOG/","excerpt":"","text":"è€Œå¦‚æžœé€‰æ‹©å­¦ä¹ C++ï¼Œåˆ™éžå¸¸æŽ¨èä½ å­¦ä¹ Standfordçš„CS106B&#x2F;CS106X. https://hackway.org/docs/cs/map/#-c%E6%88%96java å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶åå…«-ä¿®æ”¹ç³»ç»ŸAPPåŽè¿›è¡Œç¼–è¯‘-ç§‘æŠ€-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶åä¹-Dalvik&amp;ARTçš„åŒºåˆ«åŠODEXæ–‡ä»¶ä»‹ç»-æ•™è‚²-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶äºŒå-ç¼–è¯‘æ—¶odexåŒ–çš„åŽŸå› -æ•™è‚²-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶äºŒåä¸€-ä¿®æ”¹Calclator.apkä»£ç å¹¶è¿è¡Œ-æ•™è‚²-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶äºŒåäºŒ-Frameworkå®šåˆ¶åŠMacçŽ¯å¢ƒä»‹ç»-æ•™è‚²-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· å®‰å“å·´å£«Androidç³»ç»Ÿå®šåˆ¶äºŒåäº”-liblog.so(nativeå±‚ï¼‰çš„ä¿®æ”¹ä¸Žç¼–è¯‘-ç§‘æŠ€-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· time: 8:00 123456789source build/envsetup.shmake systemimagemm -B // clean firstly then build /home/m/ANDROID12/out/target/product/generic/system/app/ FILE Permission å®‰å“å·´å£«androidç³»ç»Ÿå®šåˆ¶å››å¸¸è§Linuxå‘½ä»¤ä»‹ç»-ä¸‹-æ•™è‚²-é«˜æ¸…å®Œæ•´æ­£ç‰ˆè§†é¢‘åœ¨çº¿è§‚çœ‹-ä¼˜é…· start flow å¯åŠ¨æµç¨‹ AOSPä¸‹çš„ç³»ç»Ÿå¼€å‘ç¬¬ä¸€ä¸ªæ–¹å‘ï¼šä»¥å‰æ˜¯æžandroidåº”ç”¨å¼€å‘ï¼ŒçŽ°åœ¨è´Ÿè´£ç³»ç»Ÿapplicationå¼€å‘ï¼Œè¿™æ ·å°±ä¼šä¸Šæ‰‹éžå¸¸ - æŽ˜é‡‘ åœ¨packages&#x2F;appsæ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„ç›¸åº”appã€‚åœ¨è¯¥appç›®å½•ä¸­æ˜¯å±žäºŽjavaçš„éƒ¨åˆ†ï¼Œä¸Žandroidåº”ç”¨çš„å¼€å‘è¯­è¨€ç›¸åŒã€‚ä½†æ˜¯ä¸Žå¹³å¸¸çš„appåœ¨androidstudioç¼–å†™ä¸åŒï¼Œåœ¨æºç çŽ¯å¢ƒä¸­ï¼Œéœ€è¦åˆ©ç”¨ç¼–è¾‘å™¨æ¥è¿›è¡Œç¼–è¾‘ã€‚å¹¶ä¸”åœ¨æºç ä¸­çš„ç¼–è¯‘å°±éœ€è¦åˆ©ç”¨makeç¼–è¯‘ç³»ç»Ÿè¿›è¡Œç¼–è¯‘ã€‚æºç çš„ç¼–è¯‘æ˜¯ä»¥æ¨¡å—è¿›è¡Œã€‚åˆ©ç”¨mmå‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚ç¼–è¯‘å®Œæˆä¹‹åŽï¼Œä¼šç”Ÿæˆodexä»¥åŠapkã€‚ä¸Žæ™®é€šçš„apkçš„ç»“æž„ä¸åŒï¼Œç³»ç»Ÿç¼–è¯‘ç”Ÿæˆçš„applicationåˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼š apkåŒ…æ‹¬äº†ç­¾åï¼Œèµ„æºï¼ŒAndroidMannifestæ¸…å•æ–‡ä»¶,èµ„æºçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ è€ŒåŽŸæœ¬çš„classes.dexåˆ™è¢«æ”¾åœ¨äº†odexè¿™ä¸€éƒ¨åˆ†ä¸­ã€‚ ä¸ºä»€ä¹ˆapkåˆ†æˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™å°±æ˜¯Dalvikä¸Žartè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼šDalvikï¼šJIT(just in time)å®žæ—¶ç¼–è¯‘,è¿è¡Œçš„æ—¶å€™å°†å­—èŠ‚ç ç¿»è¯‘æˆæœºå™¨ç ,æ‰€è¿è¡Œçš„ç›®æ ‡æ–‡ä»¶ä¸Žç¡¬ä»¶å¹³å°æ— å…³,appè¿è¡Œæ•ˆçŽ‡ä½ŽART:AOT(Ahead of time)é¢„å…ˆç¼–è¯‘,è¿è¡Œå‰å°†å­—èŠ‚ç ç¿»è¯‘æˆæœºå™¨ç ,æ‰€è¿è¡Œçš„ç›®æ ‡æ–‡ä»¶(oat)ä¸Žç¡¬ä»¶å¹³å°ç›¸å…³.appè¿è¡Œæ•ˆçŽ‡é«˜ã€‚ä½†ä¼šå ç”¨ç©ºé—´ã€‚APKå®‰è£…æ‰€éœ€æ—¶é—´å¢žåŠ  2.1 odexæ˜¯å¹²ä»€ä¹ˆçš„ Dalvikæ—¶ä»£ï¼šapkè¿è¡Œçš„æ—¶å€™ï¼Œä¼šæŠŠapkçš„classes.dexè§£åŽ‹å‡ºæ¥å¹¶é€šè¿‡dexoptä¼˜åŒ–ä¸º.odexæ–‡ä»¶,ç¼“å­˜åœ¨&#x2F;data&#x2F;dalvik-cacheç›®å½•ä¸‹,æé«˜åŽç»­æ‰§è¡Œçš„æ•ˆçŽ‡ã€‚è¿™ä¹Ÿæ˜¯androidè¢«è¯Ÿç—…çš„æ¯”è¾ƒå¡ã€‚ ARTæ—¶ä»£ï¼šapkå®‰è£…çš„æ—¶å€™ï¼Œä¼šæŠŠapkçš„classes.dexè§£åŽ‹åŽ,é€šè¿‡dex2oatå·¥å…·è½¬åŒ–ä¸º.odexæ–‡ä»¶(ELFæ ¼å¼ï¼Œä¸ŽDalvikæ—¶ä»£çš„.odexæ–‡ä»¶å®Œå…¨ä¸åŒï¼Œåªæ˜¯ä¸ºäº†å’Œä»¥å‰çš„Dalvikæ—¶ä»£çš„å‘½åç›¸åŒï¼Œå†…å®¹å®Œå…¨ä¸åŒ),å­˜å‚¨åœ¨apkæ‰€åœ¨ç›®å½•çš„oatç›®å½•ä¸‹ã€‚ç”¨ç©ºé—´æ¢æ—¶é—´ 2.2 ä¸ºä»€ä¹ˆåœ¨æºç çŽ¯å¢ƒç¼–è¯‘ç”Ÿæˆäº†odexæ–‡ä»¶ROMï¼šapkï¼Œjarï¼Œbinï¼Œsoç­‰ç»„æˆä¼˜ç‚¹: é™ä½Žç³»ç»Ÿæ›´æ–°åŽå¯åŠ¨çš„æ—¶é—´ï¼šæœªåšodexçš„Romï¼Œé¦–æ¬¡å¼€æœºçš„è¿‡ç¨‹ä¼šæ‰§è¡Œodexæ“ä½œã€‚ç¼–è¯‘æ—¶åšï¼Œå¼€æœºæ—¶å€™å°±ä¸ç”¨åšäº† å‡å°‘åœ¨è®¾å¤‡ä¸Šè¿›è¡Œodexæ“ä½œæ‰€é€ æˆçš„ç©ºé—´æµªè´¹ï¼šç¼–è¯‘æ—¶è¿›è¡Œdexopt&#x2F;dex2oatï¼Œä¼šç›´æŽ¥å°†apkèµ„æºä¸Žä»£ç æ‹†å¼€ã€‚å¦‚æžœåœ¨è®¾å¤‡ä¸Šå®‰è£…æ—¶è¿›è¡Œdexopt&#x2F;dex2oat,apkçš„å¤§å°ä¸ä¼šå‡å°‘,ä½†åˆä¼šå¤šä¸€ä¸ªodexæ–‡ä»¶å æ®ç£ç›˜ç©ºé—´ ç¼ºç‚¹: å¢žåŠ å¼€å‘çš„ç¼–è¯‘æ—¶é—´ ä¸èƒ½ç›´æŽ¥æ‰§è¡Œapkçš„installæ“ä½œ,éœ€è¦å°†apkå’Œodexéƒ½syncåˆ°è®¾å¤‡ä¸Š 2.2.1 å¦‚ä½•åœ¨å¼€å‘é˜¶æ®µå…³é—­dex2oat åœ¨å½“å‰moduleçš„Android.mké‡Œå¢žåŠ : LOCAL_DEX_PREOAT = false åœ¨build&#x2F;core&#x2F;main.mkä¸­å…³é—­æ‰€æœ‰moduleçš„dexä¼˜åŒ–: é“¾æŽ¥ï¼šhttps://juejin.cn/post/6872647317393145864 Application changechange App CalenderAllInOneActivity 12345@Overrideprotected void onCreate(Bundle icicle) &#123; super.onCreate(icicle); Log.wtf(TAG, &quot;jon app developer&quot;);&#125; replace app1adb install -r &#x27;/home/m/ANDROID12/out/target/product/emulator_x86_64/product/app/Calendar/Calendar.apk&#x27; check logs1234adb shellemulator_x86_64:/ # logcat -s &quot;AllInOneActivity&quot;--------- beginning of main01-21 21:22:29.426 1914 1914 E AllInOneActivity: jon app develope Framework change","categories":[],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"English-Grammar","slug":"English-Grammar","date":"2024-11-17T13:45:28.000Z","updated":"2024-11-17T13:48:09.274Z","comments":true,"path":"2024/11/17/English-Grammar/","link":"","permalink":"https://noteforme.github.io/2024/11/17/English-Grammar/","excerpt":"","text":"will vs be going toè¯¾ç¨‹è€å¸ˆè¯´ be going to è¡¨ç¤ºçŽ°åœ¨å‘ç”Ÿçš„äº‹æƒ… arrangement : use present continuous for prediction : use will&#x2F;wonâ€™t for intention : use going to","categories":[],"tags":[]},{"title":"Deutsch","slug":"Deutsch","date":"2024-11-16T00:49:30.000Z","updated":"2024-11-16T15:06:57.409Z","comments":true,"path":"2024/11/16/Deutsch/","link":"","permalink":"https://noteforme.github.io/2024/11/16/Deutsch/","excerpt":"","text":"RESOURCES &amp; LINKS MENTIONED IN THIS VIDEO: èŒåœºç¤¾äº¤å¹³å°&#x2F;Professionals online platformXingLinkedin åœ¨çº¿æ±‚èŒå¹³å°&#x2F;Online job platformindeed.comstepstone.demonster.destellenanzeigen.dejobware.dejobboerse.arbeitsagentur.degehalt.deglassdoor.commake-it-in-germany.com&#x2F;de&#x2F;jobs.dejobs.meinestadt.deyourfirm.dejobvector.deæ›´é’ˆå¯¹åœ¨æ ¡ç”Ÿã€åº”å±Šç”Ÿ&#x2F;Target group: students, fresh graduates:connecticum.dekarriere.unicum.destudentenjobs24.deberufsstart.destudentjob.deabsolventa.deabsolventen.jobs å¾·åœ‹æ‰¾å·¥ä½œå¯¦ç¿’10å¤§æ¸ é“è¿‘30å€‹å¹³å°ç„¡ä¿ç•™åˆ†äº«|How to find a job in Germany+10channels+30platforms - YouTube","categories":[],"tags":[]},{"title":"sprintboot","slug":"sprintboot","date":"2024-11-02T07:50:50.000Z","updated":"2024-11-03T14:25:39.992Z","comments":true,"path":"2024/11/02/sprintboot/","link":"","permalink":"https://noteforme.github.io/2024/11/02/sprintboot/","excerpt":"","text":"é»‘é©¬ç¨‹åºå‘˜SpringBootæ•™ç¨‹https://www.bilibili.com/video/BV1Lq4y1J77x å…¥é—¨ pomä¾èµ– 12345678910111213141516171819&lt;!--SpringBootå·¥ç¨‹éœ€è¦ç»§æ‰¿çš„çˆ¶å·¥ç¨‹--&gt;&lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.5.4&lt;/version&gt;&lt;/parent&gt;&lt;dependencies&gt; &lt;!--webå¼€å‘çš„èµ·æ­¥ä¾èµ–--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç‰ˆæƒå£°æ˜Žï¼šæœ¬æ–‡ä¸ºåšä¸»åŽŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŽŸæ–‡å‡ºå¤„é“¾æŽ¥å’Œæœ¬å£°æ˜Žã€‚ åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/qq_45966440/article/details/120450302 ide è‡ªåŠ¨å¯¼å…¥ä¾èµ–ä¸æ˜¯ä¸Šé¢çš„ï¼Œä¼šæœ‰é—®é¢˜.","categories":[],"tags":[{"name":"BE","slug":"BE","permalink":"https://noteforme.github.io/tags/BE/"}]},{"title":"BEACKEND","slug":"BEACKEND","date":"2024-10-01T10:08:19.000Z","updated":"2024-10-07T15:05:49.556Z","comments":true,"path":"2024/10/01/BEACKEND/","link":"","permalink":"https://noteforme.github.io/2024/10/01/BEACKEND/","excerpt":"","text":"GitHub - chaofengdev&#x2F;shangting-lease: å°šåº­å…¬å¯“å®Œæ•´æºç  https://gitee.com/tglx/hello-mp.git hong é¡¹ç›®ç»éªŒï¼Œå¼€æºé¡¹ç›® https://www.bilibili.com/video/BV1yJ411S7Wu root pwd : 12345678 MYBATIS PLUS CREATE project æ•°æ®åº“ https://www.bilibili.com/video/BV1At421K7gP MyBatisX plugin https://www.bilibili.com/video/BV1At421K7gP?p=65 é€šç”¨map è‡ªå®šä¹‰map mapping xml config https://www.bilibili.com/video/BV1At421K7gP redis https://www.bilibili.com/video/BV1At421K7gP?p=78 åŽå°ç®¡ç†ç³»ç»Ÿå¼€å‘ https://www.bilibili.com/video/BV1At421K7gP?p=85 maven ä¾èµ–å’Œç»§æ‰¿ https://www.bilibili.com/video/BV1At421K7gP?p=85","categories":[],"tags":[]},{"title":"DesignPatterns_State","slug":"DesignPatterns-State","date":"2024-07-04T07:57:26.000Z","updated":"2024-09-15T12:50:36.981Z","comments":true,"path":"2024/07/04/DesignPatterns-State/","link":"","permalink":"https://noteforme.github.io/2024/07/04/DesignPatterns-State/","excerpt":"","text":"This structure may look similar to the Strategy pattern, but thereâ€™s one key difference. In the State pattern, the particular states may be aware of each other and initiate transitions from one state to another, whereas strategies almost never know about each other. 1.","categories":[],"tags":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/tags/DesignPattern/"}]},{"title":"glide","slug":"glide","date":"2024-07-03T05:51:25.000Z","updated":"2024-09-15T09:30:38.862Z","comments":true,"path":"2024/07/03/glide/","link":"","permalink":"https://noteforme.github.io/2024/07/03/glide/","excerpt":"","text":"QuestionThis article has many flowcharts to introduce the principleshttps://mp.weixin.qq.com/s/ZjKkTJ5GpP8e2BnttiJEiAhttps://juejin.cn/post/6882536990400020494 Glideä½¿ç”¨ä»€ä¹ˆç¼“å­˜æœºåˆ¶LRUcacheåº•å±‚å®žçŽ° glideå’ŒOkHttpçš„ä»»åŠ¡è°ƒåº¦æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼ˆæ¯”å¦‚åŒæ—¶å‘èµ·å¾ˆå¤šè¯·æ±‚ï¼‰è‡ªå·±åŽ»å®žçŽ°å›¾ç‰‡åº“ï¼Œæ€Žä¹ˆåšï¼ŸGlideå†…å­˜ç¼“å­˜å¦‚ä½•æŽ§åˆ¶å¤§å°ï¼Ÿ https://juejin.cn/post/6956090846470995975 bitmap decodehttps://juejin.cn/post/6844904161327185927https://juejin.cn/post/6994669144490639368#heading-4 Glide Flowhttps://mp.weixin.qq.com/s/oSXDYhc_t4xhAVCfADxXfghttps://juejin.cn/post/7083367492810686472https://blog.csdn.net/weixin_43298955/article/details/118661784https://www.bilibili.com/video/BV1gq4y1n7wq?p=4https://www.jianshu.com/p/48d9e4d5d75d According to this picture, the image acquisition process is first from Active Resource, then from Memory cache, and then from Disk cache. sequenceDiagram Status.WAITING_FOR_SIZELoading an image flow for the first time from the network sequenceDiagram RequestBuilder ->> RequestManager : track() RequestBuilder ->> RequestTracker : runRequest() RequestBuilder ->> SingleRequest : begin() alt status.WAITING_FOR_SIZE SingleRequest ->> SingleRequest : onSizeReady() SingleRequest ->> Engine : load() alt no memoryResource Engine ->> Engine : waitForExistingOrStartNewJob() Engine ->> Engine : build() Engine ->> DecodeJob : run() DecodeJob ->> DecodeJob : runWrapped() INITIALIZE DecodeJob ->> DecodeJob : getNextStage(INITIALIZE) DecodeJob ->> DecodeJob : getNextGenerator(),runGenerators() DecodeJob ->> ResourceCacheGenerator : startNext() loop stage == Stage.SOURCE DecodeJob ->> DecodeJob : reschedule(SWITCH_TO_SOURCE_SERVICE) end DecodeJob ->> DecodeJob : run() DecodeJob ->> DecodeJob : runWrapped(),runGenerators() DecodeJob ->> SourceGenerator : startNext() SourceGenerator ->> SourceGenerator : startNextLoad(loadData) SourceGenerator ->> MultiModelLoader : loadData(loadData) MultiModelLoader ->> HttpUrlFetcher : loadData(loadData) HttpUrlFetcher -->> MultiModelLoader : callback.onDataReady(data) MultiModelLoader -->> SourceGenerator : callback.onDataReady(data) SourceGenerator -->> SourceGenerator : onDataReadyInternal() SourceGenerator -->> DecodeJob : reschedule(SWITCH_TO_SOURCE_SERVICE) DecodeJob ->> DecodeJob : run() DecodeJob ->> DecodeJob : runWrapped(),runGenerators() DecodeJob ->> DecodeJob : startNext() DecodeJob ->> SourceGenerator : startNext() SourceGenerator ->> SourceGenerator : startNextLoad(loadData) SourceGenerator ->> DataCacheGenerator : sourceCacheGenerator.startNext() DataCacheGenerator ->> ByteBufferFileLoader : loadData(helper.getPriority(), this) ByteBufferFileLoader -->> DataCacheGenerator : onDataReady(result) DataCacheGenerator -->> SourceGenerator : onDataFetcherReady() SourceGenerator -->> DecodeJob : onDataFetcherReady() DecodeJob ->> DecodeJob : decodeFromRetrievedData() DecodeJob ->> DecodeJob : decodeFromData(),notifyEncodeAndRelease() DecodeJob ->> DecodeJob : notifyComplete() DecodeJob ->> EngineJob : onResourceReady(),notifyCallbacksOfResult() EngineJob ->> CallResourceReady : run(),notifyCallbacksOfResult(cb) CallResourceReady -->> EngineJob : callCallbackOnResourceReady(cb) EngineJob -->> SingleRequest : onResourceReady(cb) SingleRequest ->> ImageViewTarget : target.onResourceReady(result) ImageViewTarget ->> ImageViewTarget : setResourceInternal() ImageViewTarget ->> DrawableImageViewTarget : setResource() end end What should be noted here is that I looked at the source code. After getting the image from the Internet, it will not go directly to the active resource, nor will it be displayed directly on the ImageView. Instead, it will be saved to the disk and then read from the disk. I saw this Bind lifecycleOld lifecycle architecture new lifecycle architectureThe Glide library for Android indeed underwent significant changes in its architecture. As of Glide version 4.x, Glide has moved away from using RequestManagerFragment for lifecycle management. Instead, Glide now uses LifecycleListener interfaces and RequestManagerRetriever to more efficiently manage the lifecycle of requests. Here is a brief overview of the changes: Glide 4.x and Lifecycle Management Lifecycle Integration:Glide now directly integrates with Androidâ€™s lifecycle components (Activity, Fragment, Application), which simplifies the lifecycle management of requests. Glide automatically pauses and resumes requests based on the lifecycle events. LifecycleListeners:Glide uses LifecycleListener interfaces to handle lifecycle events. These listeners are registered with the Android components (Activities and Fragments), and they notify Glide when to start, stop, or recycle requests. Advantages of the New Approach Improved Lifecycle Handling: Glide now more accurately handles the lifecycle of requests, reducing the chances of memory leaks or unnecessary work. Simplified API: The new API is more intuitive and easier to use, thanks to the integration with Androidâ€™s lifecycle components. https://www.bilibili.com/video/BV1Qy4y1s7Gh?p=15 LifeCycle flow UML sequenceDiagram autonumber Glide ->> RequestManagerRetriever : get(FragmentActivity) RequestManagerRetriever ->> LifecycleRequestManagerRetriever : getOrCreate(getLifecycle()) LifecycleRequestManagerRetriever ->> LifecycleLifecycle: constructor(lifecycle) LifecycleLifecycle ->> LifecycleRegistry : lifecycle.addObserver(this) LifecycleRequestManagerRetriever ->> RequestManager : build(getLifecycle) RequestManager ->> DefaultConnectivityMonitor : ConnectivityMonitor Note over RequestManager , DefaultConnectivityMonitor : network connection monitor LifecycleRegistry -->> LifecycleLifecycle : onStart() LifecycleRegistry -->> LifecycleLifecycle : onStop() LifecycleRegistry -->> LifecycleLifecycle : onDestroy() LifecycleLifecycle ->> RequestManager : onStart() Note right of RequestManager : resumeRequests() LifecycleLifecycle ->> RequestManager : onStop() Note right of RequestManager : pauseRequests() LifecycleLifecycle ->> RequestManager : onDestroy() connective lifecycle UML classDiagram %% Creator class ConnectivityMonitorFactory { + someOperation() + factoryMethod(): ConnectivityMonitor } %% concreate factory class DefaultConnectivityMonitorFactory { +createProduct(): Product } class ConnectivityMonitor { interface +operation(): void } %% concreate product class DefaultConnectivityMonitor %% concreate product class NullConnectivityMonitor ConnectivityMonitor RequestBuilder : into() RequestBuilder ->> RequestManager : track() RequestBuilder ->> RequestTracker : runRequest() RequestTracker ->> SingleRequest : begin() SingleRequest ->> SingleRequest : onSizeReady(overrideWidth, overrideHeight) SingleRequest ->> Engine : load() Engine ->> Engine : loadFromMemory() Engine ->> Engine : loadFromActiveResources(key) Note right of Engine : Active Resource Engine ->> Engine : loadFromCache(key) Note right of Engine : Memory Cache Engine ->> DecodeJob : runWrapped(),runGenerators() Engine ->> DataCacheGenerator : currentGenerator.startNext() DataCacheGenerator ->> ByteBufferFileLoader : loadData(helper.getPriority(), this) ByteBufferFileLoader -->> DataCacheGenerator : onDataReady(result) DataCacheGenerator -->> SourceGenerator : onDataFetcherReady() SourceGenerator -->> DecodeJob : onDataFetcherReady() DecodeJob ->> DecodeJob : decodeFromRetrievedData() DecodeJob ->> DecodeJob : decodeFromData(),notifyEncodeAndRelease() DecodeJob ->> DecodeJob : notifyComplete() DecodeJob ->> EngineJob : onResourceReady(),notifyCallbacksOfResult() EngineJob -->> Engine : onEngineJobComplete() Note right of Engine : activeResources.activate() EngineJob ->> CallResourceReady : run(),notifyCallbacksOfResult(cb) CallResourceReady -->> EngineJob : callCallbackOnResourceReady(cb) EngineJob -->> SingleRequest : onResourceReady(cb) SingleRequest ->> ImageViewTarget : target.onResourceReady(result) ImageViewTarget ->> ImageViewTarget : setResourceInternal() ImageViewTarget ->> DrawableImageViewTarget : setResource() step8 : get Active Resourcesstep9 : get Memery Cachestep20 : Read from disk cache and then put into active resources. KEYIn Java, the equals and hashCode methods are used to compare objects and manage how objects are stored in certain collections like HashMap and HashSet. equals MethodThe equals method determines whether two objects are equal. By default, the equals method in the Object class compares the memory addresses of the objects (i.e., whether they are the same instance). However, it is common to override this method to provide a meaningful equality check based on the objectâ€™s state (i.e., its fields). hashCode MethodThe hashCode method returns an integer hash code representation of the object. The contract between equals and hashCode is that if two objects are equal according to the equals method, they must have the same hash code. However, two objects with the same hash code do not necessarily have to be equal. Identifying an ObjectWhen you override the equals and hashCode methods properly, they can be used to uniquely identify an object in certain collections. Hereâ€™s how: Equality Check: When you use collections like HashSet or keys in HashMap, the equals method is used to check if an object already exists in the collection. Hash Code: The hashCode method is used by hash-based collections (like HashMap and HashSet) to efficiently locate a bucket in which the object might be stored. Proper implementation of hashCode ensures that objects are distributed evenly across the buckets, reducing the number of collisions and improving performance. Example Implementation12345678910111213141516171819public class Person &#123; private String name; private int age; // Constructor, getters, and setters @Override public boolean equals(Object obj) &#123; if (this == obj) return true; if (obj == null || getClass() != obj.getClass()) return false; Person person = (Person) obj; return age == person.age &amp;&amp; Objects.equals(name, person.name); &#125; @Override public int hashCode() &#123; return Objects.hash(name, age); &#125;&#125; Key Points Consistency: Ensure that equals and hashCode are consistent. If equals returns true for two objects, hashCode must return the same value for both. Non-Equal Objects: It is acceptable for non-equal objects to have the same hash code, though this can degrade the performance of hash-based collections. equal objects cannot have different hash codes Consistent with equals: If two objects are equal according to the equals method, they must have the same hash code. Self-Consistency: If an object is compared to itself, the equals method must return true, and the hashCode method must consistently return the same integer, provided no information used in equals comparisons on the object is modified. Non-Equal Objects: If two objects are not equal according to the equals method, it is not required that they have different hash codes. However, different hash codes for non-equal objects can improve the performance of hash-based collections. if two Person objects have the same name and age, they are considered equal. Consequently, their hash codes will also be the same because the hashCode method uses these fields to compute the hash code. Key Points Consistency Requirement: Equal objects must have the same hash code to ensure that hash-based collections (like HashMap and HashSet) function correctly. Implementation: The hashCode method should use the same fields that are used in the equals method to ensure consistency. Efficiency: While it is not required for unequal objects to have different hash codes, it is beneficial for the performance of hash-based collections. Violating this contract by allowing equal objects to have different hash codes can lead to unexpected behavior in collections like HashMap and HashSet, resulting in problems such as missing entries or increased lookup times. Active recyleAfter onDestroy() or recycling the bitmap, the active resource is put into memory cache. ActiveResources.java 1234567891011121314151617181920212223242526272829 void cleanupActiveReference(@NonNull ResourceWeakReference ref) &#123; synchronized (this) &#123; activeEngineResources.remove(ref.key); if (!ref.isCacheable || ref.resource == null) &#123; return; &#125; &#125; EngineResource&lt;?&gt; newResource = new EngineResource&lt;&gt;( ref.resource, /* isMemoryCacheable= */ true, /* isRecyclable= */ false, ref.key, listener); listener.onResourceReleased(ref.key, newResource); // è¿™é‡Œå­˜å‚¨è¿›å†…å­˜ç¼“å­˜ &#125;Engine.java @Override public void onResourceReleased(Key cacheKey, EngineResource&lt;?&gt; resource) &#123; activeResources.deactivate(cacheKey); if (resource.isMemoryCacheable()) &#123; cache.put(cacheKey, resource); &#125; else &#123; resourceRecycler.recycle(resource, /* forceNextFrame= */ false); &#125; &#125; LruCacheLruCache stands for Least Recently Used Cache. Itâ€™s a cache mechanism that keeps track of the most recently used items and evicts the least recently used items when the cache reaches its maximum size. This helps in maintaining a balance between memory usage and access speed. How Glide Uses LruCacheGlide uses LruCache to store decoded images (Bitmap objects) in memory. When an image is requested: Check Cache: Glide first checks the memory cache for the image. Load from Cache: If the image is found in the cache, it is loaded from there, making the process very fast. Fetch and Decode: If the image is not in the cache, Glide fetches it from the source (e.g., network, disk), decodes it, and adds it to the cache. LinkedHashMapå‚æ•°å«ä¹‰ initialCapacity : æœ€å¤§å®¹é‡ loadFactor : è´Ÿè½½å› å­ accessOrder : æŽ’åºæ–¹å¼, true æŒ‰ç…§è®¿é—®é¡ºåºæŽ’åºï¼Œ false æŒ‰ç…§æ’å…¥é¡ºåºæŽ’åº è®¿é—®é¡ºåºæŽ’åº accessOrder : true 1234567891011121314LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;(0, 0.75f, true);map.put(&quot;a&quot;, &quot;A&quot;);map.put(&quot;b&quot;, &quot;B&quot;);map.put(&quot;c&quot;, &quot;C&quot;);map.put(&quot;d&quot;, &quot;D&quot;);map.put(&quot;e&quot;, &quot;E&quot;);map.put(&quot;f&quot;, &quot;F&quot;);map.get(&quot;a&quot;);map.put(&quot;n&quot;,&quot;N&quot;);for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) &#123; Log.d(&quot;LruCacheTest&quot;, &quot;testLinkedHashMap : &quot;+ entry.getKey()+&quot; : &quot; + entry.getValue());&#125; ç»“æžœ D LruCacheTest: testLinkedHashMap : b : B D LruCacheTest: testLinkedHashMap : c : C D LruCacheTest: testLinkedHashMap : d : D D LruCacheTest: testLinkedHashMap : e : E D LruCacheTest: testLinkedHashMap : f : F D LruCacheTest: testLinkedHashMap : a : A D LruCacheTest: testLinkedHashMap : n : N å¯ä»¥çœ‹åˆ° å…ˆè®¿é—®a ,åœ¨æ’å…¥n,æŠŠæœ€æ–°æœ€è¿‘ä½¿ç”¨å’Œè®¿é—®çš„ A N,æ”¾åˆ°é“¾è¡¨åŽé¢ 1LinkedHashMap&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;(100, 0.75f, true); D LruCacheTest: testLinkedHashMap : a : AD LruCacheTest: testLinkedHashMap : b : BD LruCacheTest: testLinkedHashMap : c : CD LruCacheTest: testLinkedHashMap : d : DD LruCacheTest: testLinkedHashMap : e : ED LruCacheTest: testLinkedHashMap : f : FD LruCacheTest: testLinkedHashMap : n : N https://github.com/JakeWharton/DiskLruCache Bitmap Reusebotain bitmap sequenceDiagram LruBitmapPool ->> LruBitmapPool : get() LruBitmapPool ->> LruBitmapPool : getDirtyOrNull() LruBitmapPool ->> SizeStrategy : strategy.get() Note right of SizeStrategy : possibleSize > LruBitmapPool : put(bitmap) LruBitmapPool ->> SizeConfigStrategy : strategy.put(bitmap) SizeConfigStrategy ->> KeyPool : get(size, bitmap.getConfig()) Note over SizeConfigStrategy, KeyPool : groupedMap.put(key, bitmap); bitmap save condition is mutable less than maxSize allowedConfigs LruBitmapPool.java 123456789101112131415public synchronized void put(Bitmap bitmap) &#123; if (!bitmap.isMutable() || strategy.getSize(bitmap) &gt; maxSize || !allowedConfigs.contains(bitmap.getConfig())) &#123; bitmap.recycle(); return; &#125; final int size = strategy.getSize(bitmap); strategy.put(bitmap); tracker.add(bitmap); puts++; currentSize += size; &#125; SizeConfigStrategy.java 123456789101112131415161718static final class Key implements Poolable &#123; @Override public boolean equals(Object o) &#123; if (o instanceof Key) &#123; Key other = (Key) o; return size == other.size &amp;&amp; Util.bothNullOrEqual(config, other.config); &#125; return false; &#125; @Override public int hashCode() &#123; int result = size; result = 31 * result + (config != null ? config.hashCode() : 0); return result; &#125;&#125; The key is judged based on bitmap size and Config format. decoded VS without decodeIn the context of using the Glide library in Android for image loading, the terms â€œdecoded cacheâ€ and â€œwithout decodeâ€ refer to different stages and aspects of the image loading process. Hereâ€™s a detailed explanation: Decoded CacheDecoded Cache refers to the cache that stores images that have already been decoded into Bitmap objects. This means the images are stored in a format that can be directly used by the UI without needing further decoding. The benefits of using the decoded cache include: Faster Loading: Since the images are already decoded, they can be quickly retrieved and displayed, reducing the load time and improving the user experience. Reduced CPU Usage: Decoding an image is a CPU-intensive process. By caching decoded images, you avoid repeatedly decoding the same image, which saves CPU resources. Efficient Memory Usage: Decoded images are stored in memory, which allows for quick access, but this also means that the memory usage can be higher, especially if you are caching many large images. Without Decode (Encoded Cache)Without Decode or Encoded Cache refers to the cache that stores the raw, compressed image files (such as JPEG, PNG, or WebP) without decoding them into Bitmap objects. This cache stores the images in their original, encoded format. The benefits of using the encoded cache include: BUILD PROJECT ç›‘æŽ§å¤§å›¾https://juejin.im/post/6844904136266219534 https://bumptech.github.io/glide/ https://github.com/xfhy/Android-Notes/blob/master/Blogs/Android/%E4%B8%89%E6%96%B9%E5%BA%93%E5%8E%9F%E7%90%86/Glide%E4%B8%BB%E6%B5%81%E7%A8%8B%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md https://mp.weixin.qq.com/s/pAazRD9NaLPvBseG51ZOLw","categories":[],"tags":[{"name":"Library","slug":"Library","permalink":"https://noteforme.github.io/tags/Library/"}]},{"title":"Bitmap","slug":"bitmap","date":"2024-06-28T09:37:49.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/06/28/bitmap/","link":"","permalink":"https://noteforme.github.io/2024/06/28/bitmap/","excerpt":"","text":"Studying bitmap involves understanding how bitmap images are represented, stored, and manipulated. Hereâ€™s a guide to help you get started: Understanding Bitmap Basics Definition: A bitmap (or raster graphic) is a type of digital image composed of a matrix of dots (pixels). Each pixel represents a single point in the image and has its own color value. Resolution: Bitmap images have a resolution defined by the number of pixels horizontally and vertically. Higher resolution means more detail. Color Depth: This indicates the number of bits used to represent the color of each pixel. Common color depths are 8-bit (256 colors), 16-bit, 24-bit (true color), and 32-bit (true color with alpha channel for transparency). Steps to Study Bitmap Learn the File Formats: â€¢ Study different bitmap file formats such as BMP, GIF, JPEG, PNG, and TIFF. â€¢ Understand how these formats store pixel data, color information, and metadata. Get Familiar with Bitmap Data Structure: â€¢ Learn how bitmap images are stored in memory or files. For example, a BMP file typically starts with a header that contains information about the imageâ€™s size, color depth, and compression method. Programming with Bitmaps: â€¢ Practice reading and writing bitmap files using a programming language like Python, C++, or Java. â€¢ Use libraries such as PIL&#x2F;Pillow in Python or OpenCV to manipulate bitmap images. Manipulating Bitmap Images: â€¢ Learn common image processing techniques such as resizing, cropping, rotating, and color adjustments. â€¢ Explore algorithms for more advanced processing like filtering, edge detection, and transformations. Study Compression Techniques: â€¢ Understand lossless (e.g., PNG) and lossy (e.g., JPEG) compression methods and how they affect image quality and file size. Use Image Editing Software: â€¢ Experiment with bitmap images using tools lik Bitmap file formats differBitmap file formats differ in how they store image data, their support for transparency, compression methods, and intended use cases. Hereâ€™s an overview of the most common bitmap file formats: BMP (Bitmap) 1234567â€¢ File Extension: .bmpâ€¢ Compression: None or optional lossless compression (RLE)â€¢ Color Depth: 1-bit to 24-bitâ€¢ Transparency: No native supportâ€¢ Usage: Basic and uncompressed image storage, often used in Windows environmentsâ€¢ Pros: Simple, widely supportedâ€¢ Cons: Large file sizes due to lack of compression GIF (Graphics Interchange Format) 12345678â€¢ File Extension: .gifâ€¢ Compression: Lossless (LZW compression)â€¢ Color Depth: 8-bit (256 colors)â€¢ Transparency: Supports transparencyâ€¢ Animation: Supports simple animationsâ€¢ Usage: Web graphics, simple animationsâ€¢ Pros: Small file sizes, supports animations and transparencyâ€¢ Cons: Limited to 256 colors, not suitable for high-quality photographs JPEG (Joint Photographic Experts Group) 1234567â€¢ File Extension: .jpg, .jpegâ€¢ Compression: Lossyâ€¢ Color Depth: 24-bit (16.7 million colors)â€¢ Transparency: No native supportâ€¢ Usage: Photographs, web imagesâ€¢ Pros: High compression ratio, small file sizes, good for photographsâ€¢ Cons: Lossy compression can result in quality loss, no transparency support PNG (Portable Network Graphics) 1234567â€¢ File Extension: .pngâ€¢ Compression: Losslessâ€¢ Color Depth: 24-bit (16.7 million colors) and 32-bit (with alpha channel for transparency)â€¢ Transparency: Supports transparencyâ€¢ Usage: Web graphics, images requiring transparencyâ€¢ Pros: Lossless compression, supports transparency, good for graphics and images with textâ€¢ Cons: Larger file sizes compared to JPEG TIFF (Tagged Image File Format) 1234567â€¢ File Extension: .tif, .tiffâ€¢ Compression: None, lossless (LZW), or lossy (JPEG)â€¢ Color Depth: 1-bit to 32-bitâ€¢ Transparency: Supports transparencyâ€¢ Usage: Professional image editing, printing, archivingâ€¢ Pros: Flexible, high-quality images, supports multiple pages and layersâ€¢ Cons: Large file sizes, not as widely supported on the web","categories":[{"name":"Computer Composition principles","slug":"Computer-Composition-principles","permalink":"https://noteforme.github.io/categories/Computer-Composition-principles/"}],"tags":[],"author":"Jon"},{"title":"Bits and Bytes","slug":"bits-and-bytes","date":"2024-06-28T08:04:14.000Z","updated":"2024-09-15T09:28:40.055Z","comments":true,"path":"/2024/06/28/bits-and-bytes/","link":"","permalink":"https://noteforme.github.io/2024/06/28/bits-and-bytes/","excerpt":"","text":"https://web.stanford.edu/class/cs101/bits-bytes.html Bit a â€œbitâ€ is atomic: the smallest unit of storage A bit stores just a 0 or 1 ByteGroup 8 bits together to make 1 byte e.g. 0 1 0 1 1 0 1 0 One byte can store one character, e.g. â€˜Aâ€™ or â€˜xâ€™ or â€˜$â€™ Bytes and Characters - ASCII Code ASCII is an encoding representing each typed character by a number Each number is stored in one byte (so the number is in 0..255) A is 65 B is 66 a is 96 space is 32 â€œUnicodeâ€ is an encoding for mandarin, greek, arabic, etc. languages, typically 2-bytes per â€œcharacterâ€ https://www.asciitable.com/ Typing, Bytes, and You Each letter is stored in a byte, as below 100 typed letters takes up 100 bytes When you send, say, a text message, the numbers are sent Text is quite compact, using few bytes, compared to images etc. Numeral systems conversion table Decimal Binary Octal Hexadecimal 0 0000 0 0 1 0001 1 1 2 0010 2 2 3 0011 3 3 4 0100 4 4 5 0101 5 5 6 0110 6 6 7 0111 7 7 8 1000 10 8 9 1001 11 9 10 1010 12 A 11 1011 13 B 12 1100 14 C 13 1101 15 D 14 1110 16 E 15 1111 17 F HEXï¼Œè‹±æ–‡å…¨ç§° Hexadecimal systemï¼Œè¡¨ç¤ºåå…­è¿›åˆ¶ã€‚ DECï¼Œè‹±æ–‡å…¨ç§° Decimal systemï¼Œè¡¨ç¤ºåè¿›åˆ¶ã€‚ OCTï¼Œè‹±æ–‡å…¨ç§° Octal systemï¼Œè¡¨ç¤ºå…«è¿›åˆ¶ã€‚ BINï¼Œè‹±æ–‡å…¨ç§° Binary systemï¼Œè¡¨ç¤ºäºŒè¿›åˆ¶ã€‚","categories":[{"name":"Computer Composition principles","slug":"Computer-Composition-principles","permalink":"https://noteforme.github.io/categories/Computer-Composition-principles/"}],"tags":[]},{"title":"LifeCycle","slug":"lifecycle","date":"2024-06-26T06:45:50.000Z","updated":"2024-09-15T09:29:19.990Z","comments":true,"path":"/2024/06/26/lifecycle/","link":"","permalink":"https://noteforme.github.io/2024/06/26/lifecycle/","excerpt":"","text":"https://developer.android.google.cn/topic/libraries/architecture/lifecycle è§£è—•é¡µé¢ä¸Žç»„ä»¶ è§£è—•Serviceä¸Žç»„ä»¶ ProcessLifecycleOwnerç›‘å¬åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ è§£è—•é¡µé¢ä¸Žç»„ä»¶12chronometer = (MyChronometer)findViewById(R.id.chronometer);getLifecycle().addObserver(chronometer); è§£è—•Serviceä¸Žç»„ä»¶https://blog.csdn.net/vitaviva/article/details/121224946 SavedStateHandleç›´æŽ¥ç»™viewmodelä¼ å€¼ https://medium.com/mobile-app-development-publication/passing-intent-data-to-viewmodel-711d72db20ad CodeLabhttps://developer.android.com/codelabs/android-lifecycles#4 OnLifecycleEventdeprecated&#x2F;&#x2F;è¿è¡Œæ—¶implementation â€œandroid.arch.lifecycle:runtime:1.1.1â€ ä½¿ç”¨åå°„ &#x2F;&#x2F; ç¼–è¯‘æœŸannotationProcessor â€œandroid.arch.lifecycle:compiler:1.1.1â€è§£æžæ³¨è§£ï¼Œç”Ÿæˆå¤„ç†å™¨ç±»,é¿å…åå°„è€—è´¹æ€§èƒ½ https://juejin.cn/post/6844903800088559623","categories":[{"name":"JETPACK","slug":"JETPACK","permalink":"https://noteforme.github.io/categories/JETPACK/"}],"tags":[],"author":"Jon"},{"title":"Android Safe","slug":"android-safe","date":"2024-06-19T08:09:45.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/06/19/android-safe/","link":"","permalink":"https://noteforme.github.io/2024/06/19/android-safe/","excerpt":"","text":"Androidéšç§æ­£åˆ™åº”ç”¨å¸‚åœº https://juejin.cn/post/7113767096579784734 proguard https://juejin.cn/post/7104539442739838983","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[],"author":"Jon"},{"title":"Design Pattern Strategy","slug":"DesignPattern-strategy","date":"2024-06-18T03:24:51.000Z","updated":"2024-09-15T12:47:55.039Z","comments":true,"path":"/2024/06/18/design-pattern-strategy/","link":"","permalink":"https://noteforme.github.io/2024/06/18/design-pattern-strategy/","excerpt":"","text":"https://refactoring.guru/design-patterns/strategy https://design-patterns.readthedocs.io/zh-cn/latest/behavioral_patterns/strategy.html Class UML behavioral design patterns The Strategy design pattern is one of the behavioral design patterns used to define a family of algorithms, encapsulate each one, and make them interchangeable. The strategy pattern lets the algorithm vary independently from the clients that use it. This pattern is particularly useful for situations where a class needs to perform a specific behavior or service in different ways based on the context or data it is working with. Key Concepts Context: The class that uses a Strategy. It is configured with a Strategy object and maintains a reference to the current Strategy object. It may define an interface for setting the strategy. Strategy: The interface that is common to all concrete strategies. This interface is used by the context to call the strategy defined algorithms. Concrete Strategies: Implementations of the Strategy interface. Each concrete strategy implements the algorithm using a different approach. Example ScenarioImagine you have a Payment class that can process payments in different ways (e.g., credit card, PayPal, Bitcoin). Using the Strategy pattern, you can define a common interface for all payment methods and create separate classes for each payment method. 123456789101112131415161718192021222324252627282930313233343536373839404142// Strategy interfaceinterface PaymentStrategy &#123; fun pay(amount: Double)&#125;// Concrete Strategy for Credit Card paymentclass CreditCardPayment(private val cardNumber: String) : PaymentStrategy &#123; override fun pay(amount: Double) &#123; println(&quot;Paying $amount using credit card $cardNumber&quot;) &#125;&#125;// Concrete Strategy for PayPal paymentclass PayPalPayment(private val email: String) : PaymentStrategy &#123; override fun pay(amount: Double) &#123; println(&quot;Paying $amount using PayPal account $email&quot;) &#125;&#125;// Context classclass Payment(private var strategy: PaymentStrategy) &#123; // å¯¹åº”Context fun setStrategy(strategy: PaymentStrategy) &#123; this.strategy = strategy &#125; fun processPayment(amount: Double) &#123; strategy.pay(amount) &#125;&#125;// Usagefun main() &#123; // Using Credit Card payment strategy val creditCardPayment = CreditCardPayment(&quot;1234-5678-9876-5432&quot;) val payment = Payment(creditCardPayment) payment.processPayment(100.0) // Changing strategy to PayPal val paypalPayment = PayPalPayment(&quot;user@example.com&quot;) payment.setStrategy(paypalPayment) payment.processPayment(200.0)&#125;","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[],"author":"Jon"},{"title":"DesignPatterns Adatper","slug":"designpatterns-adatper","date":"2024-06-13T01:36:16.000Z","updated":"2024-09-15T09:32:14.687Z","comments":true,"path":"/2024/06/13/designpatterns-adatper/","link":"","permalink":"https://noteforme.github.io/2024/06/13/designpatterns-adatper/","excerpt":"","text":"The Adapter Pattern can be implemented in two main ways: Class Adapter and Object Adapter. Both serve the purpose of adapting one interface to another, but they do so using different approaches. Object AdapterAn Object Adapter uses composition to adapt one interface to another. This approach involves holding an instance of the Adaptee within the Adapter and delegating calls to it. Example of Object Adapter in Kotlin: Target Interface: Defines the expected interface. Adaptee: The existing class with an incompatible interface. Object Adapter: Uses composition to delegate calls to the Adaptee. 12345678910111213141516171819202122232425262728293031323334// Target interfacepublic interface Target &#123; void request();&#125;// Adaptee classpublic class Adaptee &#123; public void specificRequest() &#123; System.out.println(&quot;Called specificRequest()&quot;); &#125;&#125;// Object Adapterpublic class ObjectAdapter implements Target &#123; private Adaptee adaptee; public ObjectAdapter(Adaptee adaptee) &#123; this.adaptee = adaptee; &#125; @Override public void request() &#123; adaptee.specificRequest(); &#125;&#125;// Client codepublic class Main &#123; public static void main(String[] args) &#123; Adaptee adaptee = new Adaptee(); Target target = new ObjectAdapter(adaptee); target.request(); // Output: Called specificRequest() &#125;&#125; Class AdapterA Class Adapter uses inheritance to adapt one interface to another. This approach requires multiple inheritance (which Kotlin supports through interfaces). Example of Class Adapter in Kotlin: Target Interface: Defines the expected interface. Adaptee: The existing class with an incompatible interface. Class Adapter: Inherits from both the Target Interface and the Adaptee. 123456789101112131415161718192021222324// Target Interfaceinterface NewPaymentSystem &#123; fun pay(amount: Double)&#125;// Adapteeclass OldPaymentSystem &#123; fun makePayment(amount: Double) &#123; println(&quot;Payment of \\$$amount made using Old Payment System&quot;) &#125;&#125;// Class Adapterclass PaymentClassAdapter : OldPaymentSystem(), NewPaymentSystem &#123; override fun pay(amount: Double) &#123; makePayment(amount) &#125;&#125;// Client Codefun main() &#123; val adapter = PaymentClassAdapter() adapter.pay(100.0) // Outputs: Payment of $100.0 made using Old Payment System&#125; Differences Between Class Adapter and Object Adapter:Inheritance vs. Composition: Class Adapter uses inheritance to adapt the Adaptee to the Target Interface.Object Adapter uses composition to hold an instance of the Adaptee and delegate calls to it.Flexibility: Class Adapter is less flexible because it requires multiple inheritance, which can lead to complications if the Adaptee class changes or if you need to adapt multiple classes.Object Adapter is more flexible as it uses composition, making it easier to adapt multiple classes and change the Adaptee without affecting the Adapter.Reuse: Class Adapter reuses the Adaptee class directly through inheritance.Object Adapter reuses the Adaptee class indirectly through composition, which can be more reusable in different contexts. ç±»é€‚é…å™¨ä½¿ç”¨å¯¹è±¡ç»§æ‰¿çš„æ–¹å¼ï¼Œæ˜¯é™æ€çš„å®šä¹‰æ–¹å¼ï¼› å¯¹è±¡é€‚é…å™¨ä½¿ç”¨å¯¹è±¡ç»„åˆçš„æ–¹å¼ï¼Œæ˜¯åŠ¨æ€ç»„åˆçš„æ–¹å¼ã€‚ å¯¹äºŽç±»é€‚é…å™¨ï¼Œç”±äºŽé€‚é…å™¨ç›´æŽ¥ç»§æ‰¿äº†Adapteeï¼Œä½¿å¾—é€‚é…å™¨ä¸èƒ½å’ŒAdapteeçš„å­ç±»ä¸€èµ·å·¥ä½œï¼Œå› ä¸ºç»§æ‰¿æ˜¯é™æ€çš„å…³ç³»ï¼Œå½“é€‚é…å™¨ç»§æ‰¿äº†AdapteeåŽï¼Œå°±ä¸å¯èƒ½å†åŽ»å¤„ç† Adapteeçš„å­ç±»äº†ã€‚ å¯¹äºŽå¯¹è±¡é€‚é…å™¨ï¼Œä¸€ä¸ªé€‚é…å™¨å¯ä»¥æŠŠå¤šç§ä¸åŒçš„æºé€‚é…åˆ°åŒä¸€ä¸ªç›®æ ‡ã€‚æ¢è¨€ä¹‹ï¼ŒåŒä¸€ä¸ªé€‚é…å™¨å¯ä»¥æŠŠæºç±»å’Œå®ƒçš„å­ç±»éƒ½é€‚é…åˆ°ç›®æ ‡æŽ¥å£ã€‚å› ä¸ºå¯¹è±¡é€‚é…å™¨é‡‡ç”¨çš„æ˜¯å¯¹è±¡ç»„åˆçš„å…³ç³»ï¼Œåªè¦å¯¹è±¡ç±»åž‹æ­£ç¡®ï¼Œæ˜¯ä¸æ˜¯å­ç±»éƒ½æ— æ‰€è°“ã€‚ å¯¹äºŽç±»é€‚é…å™¨ï¼Œé€‚é…å™¨å¯ä»¥é‡å®šä¹‰Adapteeçš„éƒ¨åˆ†è¡Œä¸ºï¼Œç›¸å½“äºŽå­ç±»è¦†ç›–çˆ¶ç±»çš„éƒ¨åˆ†å®žçŽ°æ–¹æ³•ã€‚ å¯¹äºŽå¯¹è±¡é€‚é…å™¨ï¼Œè¦é‡å®šä¹‰Adapteeçš„è¡Œä¸ºæ¯”è¾ƒå›°éš¾ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å®šä¹‰Adapteeçš„å­ç±»æ¥å®žçŽ°é‡å®šä¹‰ï¼Œç„¶åŽè®©é€‚é…å™¨ç»„åˆå­ç±»ã€‚è™½ç„¶é‡å®šä¹‰Adapteeçš„è¡Œä¸ºæ¯”è¾ƒå›°éš¾ï¼Œä½†æ˜¯æƒ³è¦å¢žåŠ ä¸€äº›æ–°çš„è¡Œä¸ºåˆ™æ–¹ä¾¿çš„å¾ˆï¼Œè€Œä¸”æ–°å¢žåŠ çš„è¡Œä¸ºå¯åŒæ—¶é€‚ç”¨äºŽæ‰€æœ‰çš„æºã€‚ å¯¹äºŽç±»é€‚é…å™¨ï¼Œä»…ä»…å¼•å…¥äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸éœ€è¦é¢å¤–çš„å¼•ç”¨æ¥é—´æŽ¥å¾—åˆ°Adapteeã€‚ å¯¹äºŽå¯¹è±¡é€‚é…å™¨ï¼Œéœ€è¦é¢å¤–çš„å¼•ç”¨æ¥é—´æŽ¥å¾—åˆ°Adapteeã€‚ å»ºè®®å°½é‡ä½¿ç”¨å¯¹è±¡é€‚é…å™¨çš„å®žçŽ°æ–¹å¼ï¼Œå¤šç”¨åˆæˆ&#x2F;èšåˆã€å°‘ç”¨ç»§æ‰¿ã€‚å½“ç„¶ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æžï¼Œæ ¹æ®éœ€è¦æ¥é€‰ç”¨å®žçŽ°æ–¹å¼ï¼Œæœ€é€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„ã€‚ å‚è€ƒ ï¼šhttps://github.com/stven0king/designmode?tab=readme-ov-file https://github.com/helen-x/AndroidInterview/blob/master/android/Android%20%E6%BA%90%E7%A0%81%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F(%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%A8%E5%9C%A8%E8%BF%99%E9%87%8C).md","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[],"author":"Jon"},{"title":"DesignPatterns  Factory","slug":"designpatterns-factory","date":"2024-06-12T08:48:40.000Z","updated":"2024-09-15T09:33:05.581Z","comments":true,"path":"/2024/06/12/designpatterns-factory/","link":"","permalink":"https://noteforme.github.io/2024/06/12/designpatterns-factory/","excerpt":"","text":"https://www.youtube.com/watch?v=EdFq_JIThqM origin donnot have a common base class 12345678910111213public class Restuarant&#123; public ???? orderBuger(String request)&#123; if(&quot;BEEF&quot;.equals(request))&#123; BeefBurger burger = new BeefBurger(); burget.prepare(); return burger; &#125;else if(&quot;VEGGIE&quot;.equals(request))&#123; VeggieBurger burger = new VeggieBurger(); burget.prepare(); return burger; &#125; &#125;&#125; We can extract common foods then have a standard factory below.It extracts common methods from the BeefBurger and VeggieBurger classes, reducing duplicated methods. Static Factory Method (Simple Factory)is not a full-fledged offical pattern Implementation Uses a single class with a static method to create different types of objects based on input parameters. Use Case Use the Simple Factory pattern when you have a limited number of classes to instantiate and do not expect the set of classes to change frequently. UML classDiagram class Restaurant{ + Burger orderBurger() } class SimpleBurgetFactory{ + Burger createBurget() } class Burger { + int productId + String addOns + prepare() } class BeefBurger { + boolean angus + prepare() } class VeggieBurger { + boolean combo + prepare() } Burger","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[],"author":"Jon"},{"title":"UML Relation","slug":"uml-relation","date":"2024-06-12T07:58:02.000Z","updated":"2024-12-12T13:55:31.687Z","comments":true,"path":"/2024/06/12/uml-relation/","link":"","permalink":"https://noteforme.github.io/2024/06/12/uml-relation/","excerpt":"","text":"å·¥å…·Android Studioæ’ä»¶ UML.xmind UMLæ ‡å‡†å»ºæ¨¡è¯­è¨€ä¸­5ç§ä¸»è¦çš„ç±»åž‹å›¾https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html https://www.visual-paradigm.com/tw/guide/uml-unified-modeling-language/what-is-uml/ class relationship https://www.cnblogs.com/shindo/p/5579191.html https://juejin.im/post/5e96b1cae51d4546e41beeb3https://design-patterns.readthedocs.io/zh-cn/latest/read_uml.html ç±»å›¾1234567891011121314151617181920public class Person &#123; private Integer age; private String name; public Integer getAge() &#123; return age; &#125; public void setAge(Integer age) &#123; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125; dependency ä¾èµ–å…³ç³» ç±»ä¸­ç”¨åˆ°äº†å¯¹æ–¹ã€‚ å¦‚æžœæ˜¯ç±»çš„æˆå‘˜å±žæ€§ã€‚ å¦‚æžœæ˜¯æ–¹æ³•çš„è¿”å›žç±»åž‹ã€‚ æ˜¯æ–¹æ³•æŽ¥æ”¶çš„å‚æ•°ç±»åž‹ã€‚ æ–¹æ³•ä¸­ä½¿ç”¨åˆ°ã€‚ 12345678910111213141516171819202122public class PersonServiceBean &#123; private PersonDao personDao; public void save(Person person) &#123; &#125; public void modify() &#123; Department department = new Department(); &#125;&#125;class PersonDao &#123;&#125;class IdCard &#123;&#125;class Person &#123;&#125;class Department &#123;&#125; generalization æ³›åŒ–å…³ç³»æ³›åŒ–å…³ç³»å®žé™…ä¸Šå°±æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä»–æ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚ 12345678910111213abstract class DataSupport &#123; public void save(Object entity) &#123; &#125; public void delete(Object id) &#123; &#125;&#125;public class PersonServiceBean extends DataSupport &#123;&#125; realization å®žçŽ°å…³ç³»Aå®žçŽ°Bç±»ï¼Œå°±æ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚ 1234567891011//Aå®žçŽ°Bç±»ï¼Œå°±æ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚public class PersonServiceBean implements PersonService &#123; @Override public void delete(Integer id) &#123; System.out.println(&quot;delte..&quot;); &#125;&#125;interface PersonService&#123; public void delete(Integer id);&#125; Association å…³è”å…³ç³»å…³è”å…³ç³»å®žé™…ä¸Šæ˜¯ ç±»ä¸Žç±»ä¹‹é—´çš„è”ç³»ï¼Œä»–æ˜¯ä¾èµ–å…³ç³»çš„ç‰¹ä¾‹ã€‚ å…³è”å…·æœ‰å¯¼èˆªæ€§ï¼ˆç†è§£æˆå±žæ€§ï¼‰ï¼š å³åŒå‘å…³ç³»æˆ–å•å‘å…³ç³» å…³ç³»å…·æœ‰å¤šé‡æ€§ï¼š â€œ1â€ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼Œâ€œ0â€è¡¨ç¤º0ä¸ªæˆ–è€…å¤šä¸ªï¼Œâ€nâ€¦mâ€è¡¨ç¤ºnåˆ°mä¸ª å•å‘ä¸€å¯¹ä¸€å…³ç³» 12345Public class Person&#123; private IDCard card;&#125;public class IDCard&#123;&#125; åŒå‘ä¸€å¯¹ä¸€å…³ç³» 1234567Public class Person&#123; private IDCard card;&#125;public class IDCard&#123; private Person person;&#125; Aggregation èšåˆå…³ç³» ä¸Šå›¾ä¸­çš„Carç±»ä¸ŽEngineç±»å°±æ˜¯èšåˆå…³ç³»ï¼ˆCarç±»ä¸­åŒ…å«ä¸€ä¸ªEngineç±»åž‹çš„æˆå‘˜å˜é‡ï¼‰ã€‚ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒUMLä¸­èšåˆå…³ç³»ç”¨å¸¦ç©ºå¿ƒè±å½¢å’Œç®­å¤´çš„ç›´çº¿è¡¨ç¤ºã€‚èšåˆå…³ç³»å¼ºè°ƒæ˜¯â€œæ•´ä½“â€åŒ…å«â€œéƒ¨åˆ†â€ï¼Œä½†æ˜¯â€œéƒ¨åˆ†â€å¯ä»¥è„±ç¦»â€œæ•´ä½“â€è€Œå•ç‹¬å­˜åœ¨ã€‚æ¯”å¦‚ä¸Šå›¾ä¸­æ±½è½¦åŒ…å«äº†å‘åŠ¨æœºï¼Œè€Œå‘åŠ¨æœºè„±ç¦»äº†æ±½è½¦ä¹Ÿèƒ½å•ç‹¬å­˜åœ¨ã€‚ è¡¨ç¤ºæ•´ä½“å’Œéƒ¨åˆ†çš„å…³ç³»ï¼Œæ•´ä½“ä¸Žéƒ¨åˆ†å¯ä»¥åˆ†å¼€ã€‚èšåˆå…³ç³»æ˜¯å…³è”å…³ç³»çš„ç‰¹ä¾‹ï¼Œæ‰€æœ‰ä»–å…·æœ‰å…³è”çš„å¯¼èˆªæ€§ä¸Žå¤šé‡æ€§ã€‚ å¦‚:ä¸€å°ç”µè„‘ç”±keyboard ,monitor mouseç»„æˆï¼Œç»„æˆç”µè„‘çš„å„ä¸ªé…ä»¶æ˜¯å¯ä»¥ä»Žç”µè„‘ä¸Šåˆ†ç¦»å¤„ç†çš„ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒè±å½¢çš„å®žçº¿è¡¨ç¤ºã€‚ 123456789101112public class Computer &#123; private Moniter moniter; //moniterå¯ä»¥å’Œcomputeråˆ†ç¦» private Mouse mouse;//mouseå¯ä»¥å’Œcomputeråˆ†ç¦»&#125;class Mouse &#123;&#125;class Moniter &#123;&#125; ä¸‹é¢æ˜¯ç»„åˆå…³ç³» 12345678910111213// computerå¯¹è±¡åˆ›å»ºmoniter,mouseåˆ›å»ºï¼Œ computeré”€æ¯ä¹Ÿè·Ÿç€é”€æ¯ã€‚public class Computer &#123; private Moniter moniter = new Moniter(); //moniterå¯ä»¥å’Œcomputerä¸èƒ½åˆ†ç¦» private Mouse mouse = new Mouse();//mouseå¯ä»¥å’Œcomputerä¸èƒ½åˆ†ç¦»&#125;class Mouse &#123;&#125;class Moniter &#123;&#125; ç»„åˆå…³ç³»-Compositionä¹Ÿæ˜¯æ•´ä½“ä¸Žéƒ¨åˆ†çš„å…³ç³»ï¼Œæ•´ä½“ä¸Žéƒ¨åˆ†ä¸å¯ä»¥åˆ†å¼€ã€‚ Personä¸ŽIDCard Headï¼ŒHeadä¸ŽPersonå°±æ˜¯ç»„åˆå…³ç³»ï¼ŒIDCardä¸ŽPersonå°±æ˜¯èšåˆå…³ç³»ã€‚ ä½†æ˜¯å¦‚æžœåœ¨ç¨‹åºä¸­Personå®žä½“ä¸­å®šä¹‰äº†å¯¹ IDCardè¿›è¡Œ çº§è”åˆ é™¤ï¼Œå³åˆ é™¤Personæ—¶è¿žåŒIDCardä¸€èµ·åˆ é™¤ï¼Œé‚£ä¹ˆIDCardå’ŒPersonå°±æ˜¯ç»„åˆäº†ã€‚ 1234567public class Person &#123; private IDCard card; private Head head = new Head();&#125;class IDCard&#123;&#125;class Head&#123;&#125; https://www.bilibili.com/video/BV1W4411c77E?p=28&amp;spm_id_from=pageDriver drawioéƒ¨ç½²â€‹ https://zhangzw.com/posts/20200107.html tomacat ä¸‹è½½,ä¸‹è½½ Coreä¸‹çš„æ–‡ä»¶,è§£åŽ‹ Drawä¸‹è½½ï¼Œè§£åŽ‹æ”¾åˆ°&#x2F;apache-tomcat-8.5.65&#x2F;webapps å¯åŠ¨tomcat chomd +x ./startup.sh , sudo ./statup.sh PlantUmlhttps://plantuml.com/zh/ æ—¶åºå›¾éƒ½æ˜¯plantuml,ç‚¹ç¼–è¾‘æ‰èƒ½çœ‹åˆ°code","categories":[{"name":"Architecture","slug":"Architecture","permalink":"https://noteforme.github.io/categories/Architecture/"},{"name":"test","slug":"Architecture/test","permalink":"https://noteforme.github.io/categories/Architecture/test/"}],"tags":[],"author":"Jon"},{"title":"viewmodel","slug":"viewmodel","date":"2024-06-11T08:50:10.000Z","updated":"2024-09-15T09:35:05.244Z","comments":true,"path":"/2024/06/11/viewmodel/","link":"","permalink":"https://noteforme.github.io/2024/06/11/viewmodel/","excerpt":"","text":"é—®é¢˜, ä¸ºä»€ä¹ˆï¼Œè¿™ç§æ–¹å¼ï¼Œå¯ä»¥èŽ·å–applicationå¯¹è±¡ private val myViewModel: MyViewModel by viewModels() class MyViewModel(application: Application) : AndroidViewModel(application) { https://developer.android.com/topic/libraries/architecture/viewmodel Share data between fragments livedataå’Œviewmodelå…³ç³»viewmodelä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥é¡µé¢ ViewModelå‡ºçŽ°å‰ çž¬é—´æ•°æ®ä¸¢å¤± å¼‚æ­¥è°ƒç”¨çš„å†…å­˜æ³„æ¼ ç±»è†¨èƒ€æé«˜ç»´æŠ¤éš¾åº¦å’Œæµ‹è¯•éš¾åº¦ Share data between fragments Itâ€™s very common that two or more fragments in an activity need to communicate with each other 12345678910111213141516171819202122232425262728293031323334353637class SharedViewModel : ViewModel() &#123; val selected = MutableLiveData&lt;Item&gt;() fun select(item: Item) &#123; selected.value = item &#125;&#125;class MasterFragment : Fragment() &#123; private lateinit var itemSelector: Selector // Use the &#x27;by activityViewModels()&#x27; Kotlin property delegate // from the fragment-ktx artifact private val model: SharedViewModel by activityViewModels() override fun onViewCreated(view: View, savedInstanceState: Bundle?) &#123; super.onViewCreated(view, savedInstanceState) itemSelector.setOnClickListener &#123; item -&gt; // Update the UI &#125; &#125;&#125;class DetailFragment : Fragment() &#123; // Use the &#x27;by activityViewModels()&#x27; Kotlin property delegate // from the fragment-ktx artifact private val model: SharedViewModel by activityViewModels() override fun onViewCreated(view: View, savedInstanceState: Bundle?) &#123; super.onViewCreated(view, savedInstanceState) model.selected.observe(viewLifecycleOwner, Observer&lt;Item&gt; &#123; item -&gt; // Update the UI &#125;) &#125;&#125; https://codelabs.developers.google.com/codelabs/android-lifecycles/#0 ä½¿ç”¨12345678910111213141516public class MyViewModel extends ViewModel &#123; public MyViewModel(Application application)&#123; super(); &#125; public int number;&#125;public class MyViewModel extends AndroidViewModel &#123; //éœ€è¦ç”¨åˆ°applicationå°±ç”¨AndroidViewModel public MyViewModel(Application application) &#123; super(application); &#125; public int number;&#125; ViewModelä¿æŒæ•°æ®åŽŸç† ä½¿ç”¨ 1viewModel = new ViewModelProvider(this, new ViewModelProvider.AndroidViewModelFactory(getApplication())).get(MyViewModel.class); owner.getViewModelStore() 123public ViewModelProvider(@NonNull ViewModelStoreOwner owner, @NonNull Factory factory) &#123; this(owner.getViewModelStore(), factory);&#125; ComponentActivity 12345678910111213141516171819@Overridepublic ViewModelStore getViewModelStore() &#123; if (getApplication() == null) &#123; throw new IllegalStateException(&quot;Your activity is not yet attached to the &quot; + &quot;Application instance. You can&#x27;t request ViewModel before onCreate call.&quot;); &#125; if (mViewModelStore == null) &#123; NonConfigurationInstances nc = (NonConfigurationInstances) getLastNonConfigurationInstance(); //æ‹¿åˆ°ä¸Šæ¬¡å±å¹•çš„çŠ¶æ€ if (nc != null) &#123; // Restore the ViewModelStore from NonConfigurationInstances mViewModelStore = nc.viewModelStore; // èŽ·å–ä¸Šæ¬¡çš„mViewModelStoreï¼Œé‡Œé¢ä¿å­˜æœ‰HashMap&lt;String, ViewModel&gt; mMap &#125; if (mViewModelStore == null) &#123; mViewModelStore = new ViewModelStore(); &#125; &#125; return mViewModelStore;&#125; æ‰€ä»¥ViewModelæ¨ªç«–å±åˆ‡æ¢ä¿å­˜æ•°æ®çš„ç§˜è¯€å°±æ˜¯ &#x2F;&#x2F;æ‹¿åˆ°ä¸Šæ¬¡å±å¹•çš„çŠ¶æ€,èŽ·å–ä¸Šæ¬¡çš„mViewModelStoreï¼Œé‡Œé¢ä¿å­˜æœ‰HashMap&lt;String, ViewModel&gt; mMap,æŽ¥ç€é€šè¿‡.get(MyViewModel.class);èŽ·å–ViewModel,å¦‚æžœèŽ·å–ä¸åˆ°å°±åå°„newInstance()ä¸€ä¸ªã€‚ https://www.bilibili.com/video/BV1Hh411a7LX?p=6&amp;spm_id_from=pageDriver Unit testhttps://simplifiedcoding.in/all-courses https://simplifiedcoding.in/course/android-testing-tutorial-from-junit-to-espresso/start/1 ç‚¹ DOWNLOAD CODE OF SPENDS TRACKER è·³è½¬åŽå°±æœ‰ä¸‹è½½åœ°å€ spend-tracker https://www.youtube.com/watch?v=B-dJTFeOAqw https://www.youtube.com/watch?v=uH6-HNxK32E SavedStateHandlehttps://www.kodeco.com/5212210-jetpack-saved-state-for-viewmodel-getting-started https://juejin.cn/post/6907121847024746503 VisibleForTestingé€šè¿‡ä¸Šé¢çš„ä»£ç çœ‹å‡ºï¼Œ è¢«æµ‹è¯•çš„testPrivateæ–¹æ³•çš„å¯è§æ€§è¿˜æ˜¯è¢«æ”¹æˆProtectedã€‚ä¹Ÿå°±æ˜¯,VisibleForTestingåªæ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œä¸€ä¸ªå…ƒæ•°æ®metadataï¼Œå®ƒå¹¶æ²¡æœ‰è¿›å…¥ç¨‹åºé€»è¾‘ï¼Œä¹Ÿæ²¡æœ‰è¢«è½¬åŒ–æˆå­—èŠ‚ç byte code ä»Žè€Œè¢«JVMæ‰§è¡Œã€‚ ç¬”è€…çŒœæµ‹å¯èƒ½æ˜¯Guava çš„ ç¨‹åºå‘˜çŠ¯æ‡’äº†, å³ä¸æ„¿æ„åœ¨unit testé‡Œç›´æŽ¥åˆ©ç”¨Reflectionæ¥æµ‹è¯•ç§æœ‰æ–¹æ³•ã€‚ä¹Ÿæ²¡æœ‰æŠŠç§æœ‰æ–¹æ³•å†™å…¥å¦ä¸€ä¸ªç±»ä¸­ã€‚æ‰€ä»¥è®¾è®¡äº†VisibleForTestingçš„æ³¨è§£æ¥æé†’å…¶ä»–ç¨‹åºå‘˜: è¿™é‡Œä¸ºäº†æµ‹è¯•ç§æœ‰æ–¹æ³•æŠŠç§æœ‰æ–¹æ³•æ”¹æˆäº†Protected(å—ä¿æŠ¤çš„)å¹¶æ”¾å®½äº†è®¿é—®é™åˆ¶ã€‚ å¯æ˜¯å°±JAVAæœ¬èº«è€Œè¨€ï¼Œåªæœ‰é€šè¿‡Reflectionæ‰èƒ½çœŸæ­£æµ‹è¯•ç§æœ‰æ–¹æ³•ã€‚ https://www.cnblogs.com/yanlongpankow/p/6240563.html https://jefflin1982.medium.com/android-visiblefortesting%E7%9A%84%E7%94%A8%E9%80%94-5a666a17ba95 viewmodel sharehttps://github.com/google-developer-training/android-basics-kotlin-cupcake-app/tree/starter","categories":[{"name":"JETPACK","slug":"JETPACK","permalink":"https://noteforme.github.io/categories/JETPACK/"}],"tags":[],"author":"Jon"},{"title":"CPLUS","slug":"C-Plus","date":"2024-06-08T12:35:00.000Z","updated":"2025-03-09T14:02:38.523Z","comments":true,"path":"/2024/06/08/cplus/","link":"","permalink":"https://noteforme.github.io/2024/06/08/cplus/","excerpt":"","text":"https://en.cppreference.com/w/ https://www.youtube.com/watch?v=H4s55GgAg0I&amp;list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb&amp;index=7 https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#main C++ Linker WorksC++ä¸­ #includeå°±ä»£è¡¨æŠŠæ–‡ä»¶ï¼Œcopyåˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œå¦‚æžœä¸ç”¨ä¸‹é¢çš„å†…è”ï¼Œå°±ä¼šçˆ†å‡ºé‡å¤çš„Logæ–¹æ³•ã€‚ inline,åªcopyæ–¹æ³•çš„å†…å®¹ï¼Œä¸ä¼šcopyæ–¹æ³•ä½“ï¼Œåƒè¿™æ ·çš„ 123456void initLog()&#123; Log(&quot;Init log&quot;); å†…è”åŽè¢« std::cout &lt;&lt; message &lt;&lt; std::endl; æ›¿æ¢ &#125; Log.h 1inline void Log(const char * message); Log.cpp 123456789#include &lt;iostream&gt;#include &quot;Log.h&quot;void initLog()&#123; Log(&quot;Init log&quot;);&#125;void Log(const char *message) &#123; // æˆ–è€…åœ¨è¿™ä¸ªæ–¹æ³•åŠ ä¸Šï¼Œinlineå¤„ç†ä¹Ÿå¯ä»¥ std::cout &lt;&lt; message &lt;&lt; std::endl;&#125; Math.cpp 1234567891011#include &lt;iostream&gt;#include &quot;Log.h&quot;static int multiply(int a, int b)&#123; Log(&quot;multiply&quot;); return a * b;&#125;int main()&#123; std::cout &lt;&lt; multiply(5,8) &lt;&lt;std::endl;&#125; headercopy all contents and paste it into that c++ file. pragma oncehttps://www.youtube.com/watch?v=9RJTQmK0YPI&amp;list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb&amp;index=11 Log.h 12void Log(const char * message);void initLog(); // å¤´æ–‡ä»¶å£°æ˜ŽåŽï¼Œå…¶ä»–åœ°æ–¹å¯ä»¥ç›´æŽ¥è°ƒç”¨äº† Math.cpp 123int main()&#123; initLog();&#125; Pointer1234567 int a = 5;// void* pStr = &amp;a; // æ‹¿åˆ°å˜é‡çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆä¸éœ€è¦ç±»åž‹ int* pStr = &amp;a; *pStr = 10 ;//å¦‚æžœç»™æŒ‡é’ˆæŒ‡å‘å¯¹è±¡èµ‹å€¼ï¼Œå°±éœ€è¦ç±»åž‹ LOG(a) output : 10 REFERENCES123456789void increment(int value)&#123; // åªæ˜¯copyçš„å€¼è¿‡æ¥ï¼ŒåŽŸæ¥çš„æ•°å€¼æ²¡æœ‰å˜åŒ– value ++;&#125;int main()&#123; int a = 5; increment(a); LOG(a);&#125; output: 5å¯ä»¥çœ‹åˆ°ï¼Œaæ•°å€¼æ²¡æœ‰å¢žåŠ  æŒ‡é’ˆä¼ å€¼123456789void increment(int* value)&#123; (*value) ++;&#125;int main()&#123; int a = 5; increment(&amp;a); LOG(a)&#125; output : 6 referencedemo1 123456789void increment(int&amp; value)&#123; value ++;&#125;int main()&#123; int a = 5; increment(a); LOG(a)&#125; output : 6å¯ä»¥çœ‹åˆ°ï¼Œä¼ é€’å¼•ç”¨ï¼Œæ“ä½œçš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ demo2 123456int a = 5;int b = 8;int &amp; ref = a; //å®šä¹‰ref aref = b; // æ“ä½œå¼•ç”¨ref,ç±»ä¼¼äºŽæ“ä½œaLOG(a)LOG(b) output: 8 8 æ“ä½œæŒ‡é’ˆ 1234567891011int main()&#123; int a = 5; int b = 8; int * ref = &amp;a; // æ‹¿åˆ°açš„æŒ‡é’ˆï¼Œèµ‹å€¼ç»™ref *ref = 2; // æ“ä½œrefæŒ‡å‘çš„å€¼ ref = &amp;b; *ref = 1; LOG(a) LOG(b)&#125; output , 2 , 1 CLASSESmove() outside class1234567891011121314151617181920class Player &#123;public: int x, y; int speed;&#125;;void move(Player&amp; player,int xa ,int ya)&#123; player.x += xa * player.speed; player.y += ya * player.speed;&#125;int main() &#123; Player player; player.x = 5; player.speed = 10; move(player,1,-1); LOG(player.x)&#125; move() inside classå¯ä»¥çœ‹åˆ°playerä¸éœ€è¦å†ä¼ å…¥äº† 123456789101112131415161718class Player &#123;public: int x, y; int speed; void move(int xa, int ya) &#123; x += xa * speed; y += ya * speed; &#125;&#125;;int main() &#123; Player player; player.x = 5; player.speed = 10; player.move(1, -1); LOG(player.x)&#125; CLASSES vs STRUCTSæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œ c++ä¸ºäº†å…¼å®¹cstruct is publicly defaultlyclass is private defaultly Write a C++ Class1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;iostream&gt;class Log &#123;public: const int LogLevelError = 0; const int LogLevelWarning = 1; const int LogLevelInfo = 2;private: int m_LogLevel = LogLevelInfo;public: void setLevel(int level) &#123; m_LogLevel = level; &#125; void error(const char *message) &#123; if (m_LogLevel &gt;= LogLevelError) &#123; std::cout &lt;&lt; &quot;[error]:&quot; &lt;&lt; message &lt;&lt; std::endl; &#125; &#125; void warn(const char *message) &#123; if (m_LogLevel &gt;= LogLevelWarning)&#123; std::cout &lt;&lt; &quot;[WARNING]:&quot; &lt;&lt; message &lt;&lt; std::endl; &#125; &#125; void info(const char *message) &#123; if (m_LogLevel &gt;= LogLevelInfo)&#123; std::cout &lt;&lt; &quot;[info]:&quot; &lt;&lt; message &lt;&lt; std::endl; &#125; &#125;&#125;;int main()&#123; Log log; log.setLevel(log.LogLevelWarning); log.warn(&quot;Hello!&quot;); log.error(&quot;Hello!&quot;); log.info(&quot;Hello!&quot;);&#125; staticstatic variable is onnly going to visible to that c++file that you have declared in . ä¸ºäº†é¿å…global variable äº§ç”Ÿçš„é—®é¢˜ã€‚static.cpp 1static int s_Variable = 10; //åŽ»æŽ‰staticå°±ä¼šæŠ¥é”™,é»˜è®¤private main.cpp 1234int s_Variable = 5;int main()&#123; std::cout&lt;&lt;s_Variable &lt;&lt;std::endl;&#125; output 5 æˆ–è€… extern static.cpp 1static int s_Variable = 10; main.cpp 1234extern int s_Variable;int main()&#123; std::cout&lt;&lt;s_Variable &lt;&lt;std::endl;&#125; output : 10 Static for Classes and Structsglobal instance for that classdont have class instance 1234567891011121314151617struct Entity &#123; int x, y; // public void print() &#123; std::cout &lt;&lt; x &lt;&lt; &quot; , &quot; &lt;&lt; y &lt;&lt; std::endl; &#125;&#125;;int main() &#123; Entity e; e.x = 2; e.y = 3; Entity e1 = &#123;5, 8&#125;; e.print(); e1.print();&#125; output :2 , 35 , 8 1234567891011121314151617181920212223struct Entity &#123; static int x, y; // setting static void print() &#123; std::cout &lt;&lt; x &lt;&lt; &quot; , &quot; &lt;&lt; y &lt;&lt; std::endl; &#125;&#125;;int Entity::x;int Entity::y;int main() &#123; Entity e; e.x = 2; e.y = 3; Entity e1; e1.x = 5; e1.y = 8; e.print(); e1.print();&#125; output:5 , 85 , 8 å½“æˆ‘ä»¬è®¾ç½® static int x, y; &#x2F;&#x2F; setting staticonly one instance of those tow vairables acrossall instances of classed which meanswhen we changed second entityâ€™s x ,y ;e and e1 pointing to the same memory so we can refer to them like below 1234567891011121314151617181920212223struct Entity &#123; static int x, y; // public void print() &#123; std::cout &lt;&lt; x &lt;&lt; &quot; , &quot; &lt;&lt; y &lt;&lt; std::endl; &#125;&#125;;int Entity::x;int Entity::y;int main() &#123; Entity e; Entity::x = 2; Entity::y = 3; Entity e1; Entity::x = 5; Entity::y = 8; e.print(); e1.print();&#125; output:5 , 85 , 8 class static method1234567891011121314151617181920212223struct Entity &#123; static int x, y; // public static void print() &#123; std::cout &lt;&lt; x &lt;&lt; &quot; , &quot; &lt;&lt; y &lt;&lt; std::endl; &#125;&#125;;int Entity::x;int Entity::y;int main() &#123; Entity e; Entity::x = 2; Entity::y = 3; Entity e1; Entity::x = 5; Entity::y = 8; Entity::print(); Entity::print();&#125; output:5 , 85 , 8 static method cannot access non static variables.casue static method doens have a class instance. and it works like this , it knows which entitiy is. 1234567891011121314151617struct Entity &#123; static int x, y;&#125;;static void print(Entity e) &#123; std::cout &lt;&lt; e.x &lt;&lt; &quot; , &quot; &lt;&lt; e.y &lt;&lt; std::endl;&#125;int Entity::x;int Entity::y;int main() &#123; Entity e; e.x = 2; e.y = 3; print(e);&#125; ENUMS123456789101112131415161718192021class Log &#123;public: enum Level &#123; ERROR = 0, WARNING, INFO &#125;; const int LogLevelError = 0; const int LogLevelWarning = 1; const int LogLevelInfo = 2;private: int m_LogLevel = LogLevelInfo;public: void setLevel(int level) &#123; m_LogLevel = level; &#125;&#125;int main() &#123; Log log; std::cout &lt;&lt; log.INFO &lt;&lt; std::endl;&#125; output: 2so we can see the value increasly itself. Constructors1234567891011class Entity &#123; int x, y; Entity(int _x, int _y) &#123; x = _x; y = _y; &#125;&#125;;int main() &#123; Entity e(10, 20);&#125; delete default construcator 12345678class Log &#123;public: Log() = delete;&#125;int main() &#123;// Log log; //Call to deleted constructor of &#x27;Log&#x27;&#125; Destructors12345678910111213141516171819class Entity &#123; int x, y; Entity(int _x, int _y) &#123; x = _x; y = _y; std::cout &lt;&lt; &quot;Created Entity!&quot;&lt;&lt; std::endl; &#125; ~Entity()&#123; std::cout &lt;&lt; &quot;Destroyed Entity!&quot;&lt;&lt; std::endl; &#125;&#125;;int main() &#123; Entity e(10, 20); e.~Entity();&#125; Inheritance123456789101112131415161718192021class Player : Entity&#123;&#125;# Virtual Functions```cppclass Player : public Entity &#123;private: std::string m_Name;public: Player(const std::string &amp;mName) : m_Name(mName) &#123;&#125; std::string getName() &#123; return m_Name; &#125;&#125;;int main() &#123; Entity *e = new Entity(); std::cout &lt;&lt; e-&gt;getName() &lt;&lt; std::endl; Player *p = new Player(&quot;john&quot;); std::cout &lt;&lt; p-&gt;getName() &lt;&lt; std::endl;&#125; output :Entityjohnç¬¦åˆé¢„æœŸ æ·»åŠ  Entity* entity &#x3D; p; 123456789int main() &#123; Entity *e = new Entity(); std::cout &lt;&lt; e-&gt;getName() &lt;&lt; std::endl; Player *p = new Player(&quot;john&quot;); std::cout &lt;&lt; p-&gt;getName() &lt;&lt; std::endl; Entity* entity = p; std::cout &lt;&lt; entity-&gt;getName() &lt;&lt; std::endl;&#125; output:EntityjohnEntity å’Œjava ç±»ä¼¼ï¼Œé¢„æœŸè¾“å‡º john,ä½†æ˜¯å®žé™…è¾“å‡º Entity. å†çœ‹ä¸€ä¸ªæ–¹æ³•çš„è¾“å‡º 12345678910111213141516171819202122232425262728class Entity &#123;public: std::string getName() &#123; return &quot;Entity&quot;; &#125; Entity() &#123;&#125;&#125;;class Player : public Entity &#123;private: std::string m_Name;public: Player(const std::string &amp;mName) : m_Name(mName) &#123;&#125; std::string getName() &#123; return m_Name; &#125;&#125;;void printName(Entity* entity)&#123; std::cout &lt;&lt; entity-&gt;getName() &lt;&lt; std::endl;&#125;int main() &#123; Entity *e = new Entity(); printName(e); Player *p = new Player(&quot;john&quot;); printName(p);&#125; output:EntityEntityå’Œé¢„æœŸä¹Ÿæ˜¯ä¸ä¸€è‡´ virtualæ–°å¢ž 12345678910111213141516class Entity &#123;public: virtual std::string getName() &#123; return &quot;Entity&quot;; &#125; //virtual Entity() &#123;&#125;&#125;;class Player : public Entity &#123;private: std::string m_Name;public: Player(const std::string &amp;mName) : m_Name(mName) &#123;&#125; std::string getName() override&#123; return m_Name; &#125; //override option add&#125;; æ–°å¢žvirtualåŽoutput:Entityjohnå’Œé¢„æœŸä¸€è‡´ï¼Œç±»ä¼¼äºŽjavaå¤šæ€ã€‚ Interfacesclass é‡Œåªæœ‰virtual,è¯´æ˜Žè¿™ä¸ªclasså°±æ˜¯ä¸€ä¸ªInterfaces 123456789101112131415161718192021222324252627282930class Printable &#123;public: virtual std::string getClassName() = 0;&#125;;class Entity : public Printable &#123;public: virtual std::string getName() &#123; return &quot;Entity&quot;; &#125; //virtual virtual std::string getClassName() override &#123; return &quot;Entity&quot;; &#125;&#125;;class Player : public Entity &#123;private: std::string m_Name;public: Player(const std::string &amp;mName) : m_Name(mName) &#123;&#125; std::string getClassName() override &#123; return &quot;Player&quot;; &#125;&#125;;void print(Printable *obj) &#123; std::cout &lt;&lt; obj-&gt;getClassName() &lt;&lt; std::endl;&#125;int main() &#123; Entity *e = new Entity(); Player *p = new Player(&quot;john&quot;); print(e); print(p);&#125; output :EntityPlayer Array12345678910111213int example[5];int* ptr = example;for (int i = 0; i &lt; 5; ++i) &#123; example[i] = 2;&#125;example[2] = 5;*(ptr + 2) = 6;int* another = new int[5];for (int i = 0; i &lt; 5; ++i) &#123; another[i] = 2;&#125; Stringsconst 12const char *name = &quot;Cherno&quot;; // will change the charactername[2] = &#x27;a&#x27;; //Read-only variable is not assignable 12345678910void printString(std::string string) &#123; string += &quot;h&quot;; std::cout &lt;&lt; string &lt;&lt; std::endl;&#125;int main() &#123; std::string name = std::string(&quot;john&quot;) + &quot; hello&quot;; printString(name); std::cout &lt;&lt; name &lt;&lt; std::endl;&#125; output:john hellohjohn hello &#x2F;&#x2F; nameçš„hæ²¡æœ‰ï¼Œæ•°æ®æ²¡å˜åŒ– reference12345678910void printString(std::string &amp;string) &#123; string += &quot;h&quot;; std::cout &lt;&lt; string &lt;&lt; std::endl;&#125;int main() &#123; std::string name = std::string(&quot;john&quot;) + &quot; hello&quot;; printString(name); std::cout &lt;&lt; name &lt;&lt; std::endl;&#125; output:john hellohjohn hellohå€¼å‘ç”Ÿçš„å˜åŒ– constä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å€¼ *aä½†æ˜¯æŒ‡é’ˆaå¯ä»¥ä¿®æ”¹ 1234567891011121314151617181920int main() &#123; const int MAX_AGE = 90; const int *a = new int; // ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å€¼,æŒ‡é’ˆçš„å€¼å¯ä»¥ä¿®æ”¹ int const* a = new int; // å’Œä¸Šé¢å†™æ³•ä¸€æ · const int* a = new int; //å’Œä¸Šé¢å†™æ³•ä¸€æ · int* const a = new int; //ç›¸å: å¯ä»¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å€¼ ,ä½†æ˜¯ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„å€¼ const int *const a = new int; //ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å€¼,ä¹Ÿä¸èƒ½ä¿®æ”¹æŒ‡é’ˆçš„å€¼ std::cout &lt;&lt; &quot;a point change before &quot; &lt;&lt; a &lt;&lt; std::endl; a = (int *) &amp;MAX_AGE; std::cout &lt;&lt; *a &lt;&lt; std::endl; std::cout &lt;&lt; &quot;a point change after &quot; &lt;&lt; a &lt;&lt; std::endl;&#125; const int *a &#x3D; new int; &#x2F;&#x2F; ä¸èƒ½ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘å†…å®¹çš„å€¼,æŒ‡é’ˆçš„å€¼å¯ä»¥ä¿®æ”¹ output:a point change before 0x60000262003090a point change after 0x16b886f5c not pointer member1234567891011121314class Entity &#123;private: int m_X, m_Y;public: int getX() const &#123;// m_X = 2; // const : cannot modify class member variables return m_X; &#125; void setX(int x) &#123; m_X = x; &#125;&#125;; pointer member12345678910111213class Entity &#123;private: int *m_X, *m_Y;public: const int *const getX() const &#123; return m_X; // the pointer cannot be modified and the content m_X,m_Y &#125; void setX(int x) &#123; m_X = x; &#125;&#125;; ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œç±»ä¼¼äºŽjava. get. set Member Initializer Lists12345678910111213141516171819202122232425class Entity &#123;private: std::string m_Name;public: Entity() &#123; m_Name = &quot;UnKnown&quot;; &#125; Entity(const std::string &amp;name) &#123; m_Name = name; &#125; const std::string &amp;getName() const &#123; return m_Name; &#125;;&#125;;int main() &#123; Entity e0; std::cout&lt;&lt;e0.getName() &lt;&lt;std::endl; Entity e1(&quot;john&quot;); std::cout&lt;&lt;e1.getName() &lt;&lt;std::endl;&#125; output:UnKnownjohn å¦ä¸€ç§å†™æ³• 1234567891011121314151617181920212223class Entity &#123;private: std::string m_Name; int m_Score;public: Entity() : m_Name(&quot;UnKnown&quot;), m_Score(0) &#123;&#125; Entity(const std::string &amp;name) : m_Name(name) &#123;&#125; const std::string &amp;getName() const &#123; return m_Name; &#125;;&#125;;int main() &#123; Entity e0; std::cout &lt;&lt; e0.getName() &lt;&lt; std::endl; Entity e1(&quot;john&quot;); std::cout &lt;&lt; e1.getName() &lt;&lt; std::endl;&#125; å¯ä»¥çœ‹å‡ºè¿™ç§å†™æ³•æ›´ç®€å•.è€Œä¸”è¿˜æœ‰å¦ä¸€ä¸ªå¥½å¤„ï¼Œä¸‹é¢æ¥ä»‹ç». 1234567891011121314151617181920212223242526272829class Example &#123;public: Example() &#123; std::cout &lt;&lt; &quot;Created Example Entity!&quot; &lt;&lt; std::endl; &#125; Example(int x) &#123; std::cout &lt;&lt; &quot;Created Example Entity!&quot; &lt;&lt; x &lt;&lt; &quot;!&quot; &lt;&lt; std::endl; &#125;&#125;;class Entity &#123;private: std::string m_Name; Example m_Example; // 1. Created Example Entity! // execute firstlypublic: Entity() &#123; m_Name = std::string(&quot;UnKnown&quot;); m_Example = Example(8); //2. execute secondly &#125; const std::string &amp;getName() const &#123; return m_Name; &#125;;&#125;;int main() &#123; Entity e0;&#125; output:Created Example Entity!Created Example Entity!8! å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºäº† 2ä¸ªå¯¹è±¡ã€‚ 1234567891011121314151617class Entity &#123;private: std::string m_Name; Example m_Example;public: Entity() : m_Example(8) &#123; m_Name = std::string(&quot;UnKnown&quot;); &#125; const std::string &amp;getName() const &#123; return m_Name; &#125;;&#125;;int main() &#123; Entity e0;&#125; output:Created Example Entity!8!è¿™æ ·åªåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ã€‚ CREATE&#x2F;INSTANTIATE OBJECTSstackæ ˆå†…å­˜ ä¼šè‡ªåŠ¨å›žæ”¶ 123456789101112131415161718192021class Entity &#123;private: std::string m_Name;public: Entity() : m_Name(&quot;UnKnown&quot;) &#123;&#125; Entity(const std::string &amp;name) : m_Name(name) &#123;&#125; const std::string &amp;getName() const &#123; return m_Name; &#125;;&#125;;int main() &#123; Entity *e; &#123; Entity entity(&quot;john&quot;); e = &amp;entity; std::cout &lt;&lt; (*e).getName() &lt;&lt; std::endl; &#125;&#125; IDEä¸ä¸€æ ·,è§†é¢‘ä¸­entity ä¸ºç©ºçš„æƒ…å†µï¼Œä¸çŸ¥é“æ€Žä¹ˆæ¨¡æ‹Ÿå‡ºæ¥, Heapallocated on the heap requires you to manually called delete 123456Entity *e;&#123; Entity *entity = new Entity(&quot;john&quot;); e = entity; std::cout &lt;&lt; (*e).getName() &lt;&lt; std::endl;&#125; The NEW Keyword new Entity(â€œjohnâ€); The Arrow Operator1234567891011121314151617181920212223242526272829303132333435class Entity &#123;public: void print() const &#123; std::cout &lt;&lt; &quot;hello&quot; &lt;&lt; std::endl; &#125;&#125;;class ScopedPtr &#123;private: Entity *m_Obj;public: ScopedPtr(Entity *entity) : m_Obj(entity) &#123; &#125; ~ScopedPtr() &#123; delete m_Obj; &#125;// Entity *getObject() &#123;// return m_Obj;// &#125; Entity* operator-&gt;() &#123; return m_Obj; &#125;&#125;;int main() &#123;// ScopedPtr entity = new Entity(); // chatgptä¹Ÿè¯´è¿™ä¸ªä¼šç¼–è¯‘é”™è¯¯,å¾ˆå¥‡æ€ªï¼Ÿ// entity.getObject()-&gt;print(); ScopedPtr entity = new Entity(); entity-&gt;print();&#125; chatgptä¹Ÿè¯´è¿™ä¸ªä¼šç¼–è¯‘é”™è¯¯è¿™ä¸€é›†è§†é¢‘ï¼Œæ²¡çœ‹æ˜Žç™½ï¼ŒåŒ…æ‹¬ä¸Šé¢çš„é—®é¢˜ã€‚","categories":[{"name":"CPP","slug":"CPP","permalink":"https://noteforme.github.io/categories/CPP/"}],"tags":[],"author":"Jon"},{"title":"Netowork Lab0","slug":"netowork-lab0","date":"2024-06-08T01:36:41.000Z","updated":"2024-09-15T09:43:04.333Z","comments":true,"path":"/2024/06/08/netowork-lab0/","link":"","permalink":"https://noteforme.github.io/2024/06/08/netowork-lab0/","excerpt":"","text":"environmenthttps://web.stanford.edu/class/cs144/vm_howto/username , pwdcs144, cs144 virtualbox m1 downloadhttps://www.virtualbox.org/wiki/Download_Old_Builds_7_0 visual studioCheckpoint 0: networking warmup (intro video) connect to VMssh connect server 12ip -assh cs144@192.168.64.2 LAB0Fetch a Web pagehelloIn a Web browser,visit http://cs144.keithw.org/hello and observe the result. do the same thing the browser does, by hand. On your VM, run telnet cs144.keithw.org http . This tells the telnetprogram to open a reliable byte stream between your computer and anothercomputer (named cs144.keithw.org), and with a particular service running onthat computer: the â€œhttpâ€ service, for the Hyper-Text Transfer Protocol, used bythe World Wide Web.1If your computer has been set up properly and is on the Internet, you will see:user@computer:~$ telnet cs144.keithw.org httpTrying 104.196.238.229â€¦Connected to cs144.keithw.org.Escape character is â€˜^]â€™.If you need to quit, hold down ctrl and press ] , and then type close . Type GET &#x2F;hello HTTP&#x2F;1.1 . This tells the server the path part of the URL.(The part starting with the third slash.) Type Host: cs144.keithw.org . This tells the server the host part of theURL. (The part between http:&#x2F;&#x2F; and the third slash.) Type Connection: close . This tells the server that you are finishedmaking requests, and it should close the connection as soon as it finishes replying. Hit the Enter key one more time: . This sends an empty line and tells theserver that you are done with your HTTP request. If all went well, you will see the same response that your browser saw, precededby HTTP headers that tell the browser how to interpret the response my lab1Notice, donâ€™t wait for a timeout when you input â€˜telnet cs144.keithw.org httpâ€™. 1234567891011121314151617181920cs144@vm:~$ telnet cs144.keithw.org http Trying 104.196.238.229...Connected to cs144.keithw.org.Escape character is &#x27;^]&#x27;.GET /hello HTTP/1.1Host: cs144.keithw.orgConnection: close //after inputing all the above commandsHTTP/1.1 200 OKDate: Mon, 10 Jun 2024 03:18:22 GMTServer: ApacheLast-Modified: Thu, 13 Dec 2018 15:45:29 GMTETag: &quot;e-57ce93446cb64&quot;Accept-Ranges: bytesContent-Length: 14Connection: closeContent-Type: text/plainHello, CS144!Connection closed by foreign host. Assignmenthttp://cs144.keithw.org/lab0/sunjohn 123456789101112131415cs144@vm:~$ telnet cs144.keithw.org httpGET /lab0/sunjohn HTTP/1.1Host: cs144.keithw.orgConnection: close //after inputing all the above commandsHTTP/1.1 200 OKDate: Mon, 10 Jun 2024 03:59:20 GMTServer: ApacheX-You-Said-Your-SunetID-Was: sunjohnX-Your-Code-Is: 174534Content-length: 111Vary: Accept-EncodingContent-Type: text/plainHello! You told us that your SUNet ID was &quot;sunjohn&quot;. Please see the HTTP headers (above) for your secret code. Send yourself an emailè¿™ä¸ªåº”è¯¥éœ€è¦stanfordå†…ç½‘,åº”è¯¥ä¸ç”¨åš ç›®å‰è¯¾ç¨‹å­¦åˆ°lab03.2 Modern C++: mostly safe but still fast and low-leveléƒ¨åˆ†ï¼Œè¿˜æ˜¯å¾ˆæœ‰æ„æ€,åŽé¢æœ‰æ—¶é—´ç»§ç»­åŽç»­çš„å­¦ä¹ .","categories":[{"name":"NETWORK","slug":"NETWORK","permalink":"https://noteforme.github.io/categories/NETWORK/"}],"tags":[],"author":"Jon"},{"title":"GSON","slug":"gson","date":"2024-06-07T03:40:36.000Z","updated":"2024-09-15T09:43:57.848Z","comments":true,"path":"/2024/06/07/gson/","link":"","permalink":"https://noteforme.github.io/2024/06/07/gson/","excerpt":"","text":"Running Gson source Codewæ³¨é‡Š ç»™GitHub PR https://www.bilibili.com/video/BV1JJ41197UK?spm_id_from=333.337.search-card.all.click jsonæ ¼å¼ æ•°ç»„ [1,2,3] å¯¹è±¡æ ¼å¼ {â€œkeyâ€:â€valueâ€} $Gson$Typesç†è§£å®˜æ–¹æ•™ç¨‹ https://github.com/google/gson/blob/master/UserGuide.md æºç åˆ†æžhttp://www.jianshu.com/p/89c314ae8c0b Gsonè½¬mapGsonå¯ä»¥ç›´æŽ¥æŠŠjsonè½¬ä¸ºmap,ä½†æ˜¯åœ¨è½¬æˆmapæ—¶ï¼Œé»˜è®¤å°‡int longåž‹çš„æ•°å­—,è½¬æ¢æˆdoublelç±»åž‹ 12String sms = &quot;&#123;\\&quot;Code\\&quot;:200,\\&quot;Data\\&quot;:&#123;\\&quot;Code\\&quot;:\\&quot;\\&quot;&#125;,\\&quot;Message\\&quot;:\\&quot;å‘é€æˆåŠŸ\\&quot;&#125;&quot;;Map&lt;String, Object&gt; map = new Gson().fromJson(sms, HashMap.class); è¿™é‡Œè£…æˆmapåŽï¼ŒCodeå€¼å°¾ 200.0 ,è§£æžæ–¹æ³• 123456789101112131415Gson gson = new GsonBuilder() .registerTypeAdapter(new TypeToken&lt;TreeMap&lt;String, Object&gt;&gt;() &#123; &#125;.getType(), new JsonDeserializer&lt;TreeMap&lt;String, Object&gt;&gt;() &#123; @Override public TreeMap&lt;String, Object&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException &#123; TreeMap&lt;String, Object&gt; treeMap = new TreeMap&lt;&gt;(); JsonObject jsonObject = json.getAsJsonObject(); Set&lt;Map.Entry&lt;String, JsonElement&gt;&gt; entrySet = jsonObject.entrySet(); for (Map.Entry&lt;String, JsonElement&gt; entry : entrySet) &#123; treeMap.put(entry.getKey(), entry.getValue()); &#125; return treeMap; &#125; &#125;).create(); å‚è€ƒ map to json(ç”Ÿæˆjsonæ•°æ®) HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(&quot;key&quot;, &quot;real_name&quot;); map.put(&quot;value&quot;, userName); list.add(map); map = new HashMap&lt;&gt;(); map.put(&quot;key&quot;, &quot;mobile_phone&quot;); map.put(&quot;value&quot;, userPhone); map.put(&quot;hidden&quot;, false); list.add(map); userInfo.data = new Gson().toJson(list); kotlin json to object 12val type = object : TypeToken&lt;BaseCount&lt;List&lt;Site&gt;&gt;&gt;() &#123;&#125;.typevar response = gson.fromJson&lt;BaseCount&lt;List&lt;Site&gt;&gt;&gt;(json, type) https://ask.helplib.com/java/post_498433 java parse1234567891011121314151617181920212223242526272829303132333435 public static List&lt;RecipeBean&gt; analysisChild(String receps) throws JSONException &#123; List&lt;RecipeBean&gt; list = new ArrayList&lt;&gt;();// JSONObject jsonObject = new JSONObject(); JSONArray jsonArray = new JSONArray(receps); for (int i = 0; i &lt; jsonArray.length(); i++) &#123; JSONObject object = jsonArray.getJSONObject(i); RecipeBean mPatient = new RecipeBean(TYPE_ITEM); if (object.has(&quot;drug_name&quot;))&#123; mPatient.setDrug_name(object.getString(&quot;drug_name&quot;)); &#125; if (object.has(&quot;drug_num&quot;))&#123; mPatient.setDrug_num(object.getString(&quot;drug_num&quot;)); &#125; if (object.has(&quot;frequency&quot;))&#123; mPatient.setFrequency(object.getString(&quot;frequency&quot;)); &#125; if (object.has(&quot;num&quot;))&#123; mPatient.setNum(object.getString(&quot;num&quot;)); &#125; if (object.has(&quot;drug_num&quot;))&#123; mPatient.setDrug_num(object.getString(&quot;drug_num&quot;)); &#125; if (object.has(&quot;pharmacy_type&quot;))&#123; mPatient.setPharmacy_type(object.getString(&quot;pharmacy_type&quot;)); &#125; if (object.has(&quot;medicine_num&quot;))&#123; mPatient.setMedicine_num(object.getString(&quot;medicine_num&quot;)); &#125; if (object.has(&quot;medicine_unit&quot;))&#123; mPatient.setMedicine_unit(object.getString(&quot;medicine_unit&quot;)); &#125; list.add(mPatient); &#125; return list; &#125;","categories":[{"name":"Library","slug":"Library","permalink":"https://noteforme.github.io/categories/Library/"}],"tags":[],"author":"Jon"},{"title":"Annotation","slug":"annotation","date":"2024-06-06T02:13:46.000Z","updated":"2024-09-15T09:44:45.329Z","comments":true,"path":"/2024/06/06/annotation/","link":"","permalink":"https://noteforme.github.io/2024/06/06/annotation/","excerpt":"","text":"Annotations are used to provide supplementary information about a program and can be used for a variety of purposes, such as: Information for the compiler: Annotations can be used by the compiler to detect errors or suppress warnings. Compile-time processing: Software tools can process annotation information to generate code, XML files, etc. Runtime processing: Some annotations are available to be examined at runtime via reflection.https://docs.oracle.com/javase%2Ftutorial%2F/java/annotations/index.html æ³¨è§£æ³¨è§£çš„ä½œç”¨ æä¾›ä¿¡æ¯ç»™ç¼–è¯‘å™¨ï¼š ç¼–è¯‘å™¨å¯ä»¥åˆ©ç”¨æ³¨è§£æ¥æŽ¢æµ‹é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯. ç¼–è¯‘é˜¶æ®µæ—¶çš„å¤„ç†ï¼š è½¯ä»¶å·¥å…·å¯ä»¥ç”¨æ¥åˆ©ç”¨æ³¨è§£ä¿¡æ¯æ¥ç”Ÿæˆä»£ç ã€Htmlæ–‡æ¡£æˆ–è€…åšå…¶å®ƒç›¸åº”å¤„ç†ã€‚ è¿è¡Œæ—¶çš„å¤„ç†ï¼š æŸäº›æ³¨è§£å¯ä»¥åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æŽ¥å—ä»£ç çš„æå–. å…ƒæ³¨è§£ ï¼š ä¸å¯ä»¥å†åˆ†çš„æ³¨è§£ï¼Œ è´Ÿè´£æ³¨è§£å…¶ä»–æ³¨è§£ã€‚javaå®šä¹‰äº†4ä¸ªæ ‡å‡†çš„meta-annotationç±»åž‹,å®ƒä»¬è¢«ç”¨æ¥æä¾›å¯¹å…¶å®ƒannotationç±»åž‹ä½œè¯´æ˜Žã€‚Target Retention Documented Inherited å¦‚ä¸Šå›¾çš„ Overideè¢«@Targetå’Œ@Retentionä¿®é¥°ï¼Œä»–ä»¬ç”¨æ¥è¯´æ˜Žè§£é‡Šå…¶ä»–æ³¨è§£ï¼Œä½äºŽ java.lang.annotationä¸‹ Annotations That Apply to Other AnnotationsAnnotations that apply to other annotations are called meta-annotations. There are several meta-annotation types defined in java.lang.annotation. @Retention @Retention annotation specifies how the marked annotation is stored: éœ€è¦ä»€ä¹ˆçº§åˆ«ä¿å­˜è¯¥æ³¨é‡Šä¿¡æ¯ï¼Œç”¨äºŽä¿ç•™æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸ RetentionPolicy.SOURCE The marked annotation is retained only in the source level and is ignored by the compiler. RetentionPolicy.CLASS â€“ The marked annotation is retained by the compiler at compile time, but is ignored by the Java Virtual Machine (JVM). RetentionPolicy.RUNTIME â€“ The marked annotation is retained by the JVM so it can be used by the runtime environment. RetentionPolicy.RUNTIME The marked annotation is retained by the JVM so it can be used by the runtime environment. ç¼–è¯‘å’Œè¿è¡Œæ—¶æ³¨è§£åŒºåˆ«è¿è¡Œæ—¶æ³¨è§£è¿è¡Œæ—¶æ³¨è§£çš„å®žè´¨æ˜¯ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡æ³¨è§£è¿›è¡Œæ ‡è®°ï¼Œè¿è¡Œæ—¶é€šè¿‡åå°„å¯»æ‰¾æ ‡è®°è¿›è¡ŒæŸç§å¤„ç†ã€‚è€Œè¿è¡Œæ—¶æ³¨è§£ä¸€ç›´ä»¥æ¥è¢«å‘•ç—…çš„åŽŸå› ä¾¿æ˜¯åå°„çš„ä½Žæ•ˆã€‚https://juejin.cn/post/6925283352698159117#heading-4 æ³¨è§£è®¾ç½® SxtStudentä¿¡æ¯ï¼Œæ˜ å°„æ•°æ®åº“ 12345@Target(value = &#123;ElementType.TYPE&#125;)@Retention(RetentionPolicy.RUNTIME)public @interface SxtTable &#123; String value();&#125; 1234567@Target(value = &#123;ElementType.FIELD&#125;)@Retention(RetentionPolicy.RUNTIME)public @interface SxtField &#123; String columnName(); String type(); int length();&#125; 1234567891011@SxtTable(&quot;tb_student&quot;)public class SxtStudent &#123; @SxtField(columnName = &quot;id&quot;,type = &quot;int&quot;,length = 10) private int id; @SxtField(columnName = &quot;sname&quot;,type = &quot;varchar&quot;,length = 10) private String studentName; @SxtField(columnName = &quot;age&quot;,type = &quot;int&quot;,length = 3) private int age;&#125; é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·èŽ·å–æ³¨è§£ä¿¡æ¯ 12345678910111213141516171819202122try &#123; Class clazz = Class.forName(&quot;annotation.SxtStudent&quot;); //èŽ·å¾—ç±»çš„æ‰€æœ‰æœ‰æ•ˆæ³¨è§£ Annotation[] annotations = clazz.getAnnotations(); for (Annotation a:annotations)&#123; System.out.println(a); &#125; //èŽ·å¾—ç±»çš„æŒ‡å®šæ³¨è§£ SxtTable st = (SxtTable)clazz.getAnnotation(SxtTable.class); System.out.println(st.value()); //èŽ·å¾—ç±»çš„å±žæ€§çš„æ³¨è§£ Field f = clazz.getDeclaredField(&quot;studentName&quot;); SxtField sxtField = f.getAnnotation(SxtField.class); System.out.println(sxtField.columnName()+&quot;--&quot; + sxtField.type()+&quot;---&quot; + sxtField.length());&#125; catch (ClassNotFoundException e) &#123; e.printStackTrace();&#125; catch (NoSuchFieldException e) &#123; e.printStackTrace();&#125; è¿è¡Œç»“æžœ @annotation.SxtTable(value&#x3D;tb_student)tb_studentsnameâ€“varcharâ€”10 è¿è¡Œæ—¶æ³¨è§£å¾ˆå¥½ç†è§£ï¼Œä»£ç è¿è¡Œçš„æ—¶å€™é€šè¿‡åå°„æŠ€æœ¯å°±å¯ä»¥èŽ·å–ä¸Šé¢çš„æ³¨è§£ä¿¡æ¯ã€‚ä»Žä¸Šé¢å¯ä»¥çœ‹åˆ°,åå°„å¢žåŠ äº†ç‚¹æ€§èƒ½é—®é¢˜ åå°„å®žä¾‹1234567891011121314151617181920String path = &quot;reflection.User&quot;;try &#123; Class&lt;?&gt; clazz = Class.forName(path); //å¯¹è±¡æ˜¯è¡¨ç¤ºæˆ–å°è£…ä¸€äº›æ•°æ®ã€‚ä¸€ä¸ªç±»è¢«åŠ è½½åŽï¼ŒJVMä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”è¯¥ç±»çš„Classå¯¹è±¡ï¼Œç±»çš„æ•´ä¸ªç»“æž„ä¿¡æ¯ä¼šæ”¾åˆ°å¯¹åº”çš„CLasså¯¹è±¡ä¸­ã€‚ //è¿™ä¸ªClasså¯¹è±¡å°±åƒä¸€é¢é•œå­ä¸€æ ·ï¼Œé€šè¿‡è¿™é¢é•œå­æˆ‘å¯å·²çœ‹åˆ°å¯¹åº”ç±»çš„å…¨éƒ¨ä¿¡æ¯ã€‚ System.out.println(clazz.hashCode()); Class clazz2 = Class.forName(path); // ä¸€ä¸ªç±»å¯¹åº”çš„ä¸€ä¸ªclasså¯¹è±¡ System.out.println(clazz2.hashCode()); Class intCLazz = int.class; int[] arr01 = new int[10]; int[][] arr02 = new int[30][3]; int[]arr03 = new int[30]; double[] arr04 = new double[10]; System.out.println(arr01.getClass().hashCode()); System.out.println(arr02.getClass().hashCode()); System.out.println(arr03.getClass().hashCode()); System.out.println(arr04.getClass().hashCode()); https://www.youtube.com/watch?v=vZe5zG0vh3U&amp;list=PLC664nq_h8b9Jzh-qYJ_AeOpmSoBLC_tg&amp;index=1 ç¼–è¯‘æ—¶æ³¨è§£APT(Annotation Processing Tool)å³æ³¨è§£å¤„ç†å™¨ï¼ˆé€šå¸¸ä¹Ÿå«åšç¼–è¯‘æ—¶æ³¨è§£ã€ç¼–è¯‘æ—¶ä»£ç è‡ªåŠ¨ç”Ÿæˆï¼‰ï¼Œæ˜¯ä¸€ç§å¤„ç†æ³¨è§£çš„å·¥å…·ï¼Œç¡®åˆ‡çš„è¯´å®ƒæ˜¯javacçš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒç”¨æ¥åœ¨ç¼–è¯‘æ—¶æ‰«æå’Œå¤„ç†æ³¨è§£ã€‚æ³¨è§£å¤„ç†å™¨ä»¥Javaä»£ç (æˆ–è€…ç¼–è¯‘è¿‡çš„å­—èŠ‚ç )ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆ.javaæ–‡ä»¶ä½œä¸ºè¾“å‡ºã€‚ç®€å•æ¥è¯´å°±æ˜¯åœ¨ç¼–è¯‘æœŸï¼Œé€šè¿‡æ³¨è§£ç”Ÿæˆ.javaæ–‡ä»¶ã€‚é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼šé€šå¸¸ç¼–è¯‘æ—¶æ³¨è§£è¦ç»“åˆæ³¨è§£å¤„ç†å™¨ä¸€èµ·ä½¿ç”¨çš„ï¼Œé€šè¿‡è§£æžæ³¨è§£ï¼ŒèŽ·å–æ³¨è§£ä¸Šé¢çš„ä¿¡æ¯ï¼Œç„¶åŽç”Ÿæˆä»£ç ï¼Œä»Žè€Œç”Ÿæˆä¸€ä¸‹è¾…åŠ©æˆ‘ä»¬è‡ªå·±æ‰‹å†™çš„ä»£ç ã€‚è¯´å¾—æœ‰ç‚¹æŠ½è±¡ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªç®€å•ç¤ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ã€‚ æˆ‘ä»¬åšå¾®ä¿¡ç›¸å…³apiï¼Œä¼šæœ‰ä¸‹é¢æ“ä½œ ç¤ºä¾‹æœ€ç»ˆæ•ˆæžœå¦‚ä¸‹ï¼š 12345678910@SubTypeAutoGenerate(&quot;com.flyme.videoclips.wxapi.WXEntryActivity&quot;)public class BaseWXEntryActivity extends Activity implements IWXAPIEventHandler &#123;&#125;// è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ,è¯·ä¸è¦æ”¹åŠ¨package com.flyme.videoclips.wxapi;import com.flyme.videoclips.util.wxapi.BaseWXEntryActivity;public class WXEntryActivity extends BaseWXEntryActivity &#123;&#125; æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª@SubTypeAutoGenerateæ³¨è§£å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”ŸæˆWXEntryActivityå•¦ï¼Œå…¶ä¸­@SubTypeAutoGenerateæ³¨è§£çš„å‚æ•°å°±æ˜¯ç”Ÿæˆçš„å…¨ç±»åã€‚reference: https://juejin.cn/post/6925283352698159117 æ ¹æ®å‰é¢æ³¨è§£åˆ†ç±»ï¼Œç¼–è¯‘æ—¶æ³¨è§£æ˜¯ä¿ç•™åˆ°ç¼–è¯‘é˜¶æ®µçš„ï¼Œå³.classæ–‡ä»¶ï¼Œä¸ä¼šä¿ç•™åˆ°dexé‡Œé¢ï¼Œå³è¿è¡Œæ—¶æ ¹æœ¬èŽ·å–ä¸åˆ°è¿™ä¸ªæ³¨è§£äº†ï¼Œé‚£ä¹ˆè¿™ç§ç¼–è¯‘æ—¶æ³¨è§£åˆæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ æ³¨è§£å¤„ç†å™¨æ˜¯javacå¤„ç†æ³¨è§£çš„ä¸€ç§å·¥å…·ï¼Œå®ƒç”¨æ¥åœ¨ç¼–è¯‘æ—¶æ‰«æå’Œå¤„ç†æ³¨è§£ã€‚ç®€å•æ¥è¯´å°±æ˜¯åœ¨ç¼–è¯‘å™¨ï¼Œé€šè¿‡æ³¨è§£é‡‡é›†ä¿¡æ¯ï¼Œç”Ÿæˆ.javaæ–‡ä»¶ã€‚å‡å°‘é‡å¤ä»£ç çš„ç¼–å†™ã€‚ APTåŽŸç† æ­¥éª¤ é—®é¢˜APTå°±è¿™å›ºå®šçš„å‡ æ­¥ï¼Œç½‘ä¸Šdemoå¯ä»¥ç”Ÿæˆï¼Œæˆ‘çš„å°±æ˜¯æ²¡æ³•ç”Ÿæˆï¼ŒåŽŸæ¥æ˜¯å› ä¸º,@DIActivityç±»çš„å¤´éƒ¨æ²¡æœ‰è®¾ç½® 123@DIActivitypublic class MainActivity extends AppCompatActivity &#123;&#125; é¡¹ç›® MRouter ArouteråŽŸç†èŽ·å¾—å½“å‰ç¨‹åºåœ¨æ‰‹æœºä¸­å¯¹åº”çš„apkæ–‡ä»¶,ä½¿ç”¨classsloader:dexfile(PMS)ï¼Œåå°„èŽ·å–apkæ‰€æœ‰çš„ç±»ï¼Œç­›é€‰å‡ºæ³¨å†Œactivityçš„ç±»ã€‚åˆå§‹åŒ– æ ¸å¿ƒå®žçŽ° https://www.bilibili.com/video/BV1Ly4y1W7f5?p=6&amp;spm_id_from=pageDriver https://www.bilibili.com/video/BV1nU4y1a79o?from=search&amp;seid=3188418579827888379 https://juejin.cn/post/6925283352698159117#heading-14 https://juejin.cn/post/6947992544252788767 https://blog.csdn.net/xx326664162/article/details/68490059 https://hanshuliang.blog.csdn.net/article/details/117072224 https://github.com/han1202012/APT @Target@Target annotation marks another annotation to restrict what kind of Java elements the annotation can be applied to. A target annotation specifies one of the following element types as its value: ElementType.ANNOTATION_TYPE can be applied to an annotation type.ElementType.CONSTRUCTOR can be applied to a constructor.ElementType.FIELD can be applied to a field or property.ElementType.LOCAL_VARIABLE can be applied to a local variable.ElementType.METHOD can be applied to a method-level annotation.ElementType.PACKAGE can be applied to a package declaration.ElementType.PARAMETER can be applied to the parameters of a method.ElementType.TYPE can be applied to any element of a class. ç”¨äºŽæè¿°æ³¨è§£çš„ä½¿ç”¨èŒƒå›´(æ³¨è§£å¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹)å¦‚ ç±» å±žæ€§ æ–¹æ³•ç­‰ @Inherited@Inherited annotation indicates that the annotation type can be inherited from the super class. (This is not true by default.) When the user queries the annotation type and the class has no annotation for this type, the classâ€™ superclass is queried for the annotation type. This annotation applies only to class declarations. æ ‡æ˜Žæ‰€ä¿®é¥°çš„æ³¨è§£ï¼Œåœ¨æ‰€ä½œç”¨çš„ç±»ä¸Šï¼Œæ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ã€‚ 12345678910111213141516171819202122@InheritedAnnotation(value = &quot;Applied to SuperClass&quot;)class SuperClass &#123; // Superclass implementation&#125;class SubClass extends SuperClass &#123; // Subclass implementation&#125;public class InheritedTest &#123; public static void main(String[] args) &#123; Class&lt;SubClass&gt; subClass = SubClass.class; // Check if the subclass inherits the annotation if (subClass.isAnnotationPresent(InheritedAnnotation.class)) &#123; Annotation annotation = subClass.getAnnotation(InheritedAnnotation.class); InheritedAnnotation inheritedAnnotation = (InheritedAnnotation) annotation; System.out.println(&quot;SubClass inherits annotation: &quot; + inheritedAnnotation.value()); &#125; else &#123; System.out.println(&quot;SubClass does not inherit the annotation.&quot;); &#125; &#125;&#125; output:SubClass inherits annotation: Applied to SuperClas , æ‰€ä»¥å¯ä»¥æ‹¿åˆ°çˆ¶ç±»çš„æ³¨è§£ä¿¡æ¯ã€‚ @Repeatable@Repeatable annotation, introduced in Java SE 8, indicates that the marked annotation can be applied more than once to the same declaration or type use. For more information, see Repeating Annotations. 12345678910111213141516171819202122@Repeatable(ReviewTags.class)@Retention(RetentionPolicy.RUNTIME)@interface ReviewTag &#123; String value();&#125;@Retention(RetentionPolicy.RUNTIME)@interface ReviewTags &#123; ReviewTag[] value();&#125; public static void main(String[] args) &#123; try &#123; // Accessing annotations ReviewTag[] tags = ReviewTagsTest.class.getMethod(&quot;review&quot;).getAnnotationsByType(ReviewTag.class); System.out.println(&quot;Review Tags:&quot;); for (ReviewTag tag : tags) &#123; System.out.println(tag.value()); &#125; &#125; catch (NoSuchMethodException e) &#123; &#125; &#125; output : 12PositiveDetailed @Documented@Documented annotation indicates that whenever the specified annotation is used those elements should be documented using the Javadoc tool. (By default, annotations are not included in Javadoc.) For more information, see the Javadoc tools page.javadocçš„å·¥å…·æ–‡æ¡£åŒ– Declaring an Annotation Type ,Generate DocumentClassPreamble.java 12345678910111213141516171819package annotation.doc;import java.lang.annotation.Documented;import java.lang.annotation.Retention;import java.lang.annotation.RetentionPolicy;import java.lang.annotation.Target;import java.lang.annotation.ElementType;@Documented@Retention(RetentionPolicy.RUNTIME)@Target(ElementType.TYPE)public @interface ClassPreamble &#123; String author(); String date(); int currentRevision() default 1; String lastModified() default &quot;N/A&quot;; String lastModifiedBy() default &quot;N/A&quot;; String[] reviewers();&#125; MyClass.java 12345678910111213141516package annotation.doc;@ClassPreamble( author = &quot;John Doe&quot;, date = &quot;06/06/2024&quot;, currentRevision = 2, lastModified = &quot;06/06/2024&quot;, lastModifiedBy = &quot;Jane Doe&quot;, reviewers = &#123;&quot;Alice&quot;, &quot;Bob&quot;&#125;)public class MyClass &#123; // Class implementation void print()&#123; // the function will not generate doc System.out.println(&quot;print&quot;); &#125;&#125; command steps 1234$ pwd/Users/m/Documents/workpersonal/THINKKOTLIN/src/main/java$ javac annotation/doc/ClassPreamble.java annotation/doc/MyClass.java$ javadoc -d doc annotation/doc/MyClass.java è¿™ç§æ–¹å¼å¯ä»¥ç”Ÿæˆæ–‡æ¡£","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[],"author":"Jon"},{"title":"Music","slug":"music1","date":"2024-06-05T07:26:44.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/06/05/music/","link":"","permalink":"https://noteforme.github.io/2024/06/05/music/","excerpt":"","text":"Memories TOP 40 Songs of 2021 2022 (Best Hit Music Playlist) on Spotifyhttps://www.youtube.com/watch?v=99XF71Fpjl8 MARINA - To Be Human (Official Music Video)https://www.youtube.com/watch?v=DM8Tm9ycGz4 Nothing gonna change my love for you","categories":[{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/categories/LIFE/"}],"tags":[],"author":"Jon"},{"title":"reflection","slug":"reflection","date":"2024-05-31T07:56:18.000Z","updated":"2024-09-15T09:46:29.318Z","comments":true,"path":"/2024/05/31/reflection/","link":"","permalink":"https://noteforme.github.io/2024/05/31/reflection/","excerpt":"","text":"https://jonblog.site/2024/05/28/designpattern-proxy/https://jonblog.site/2024/06/06/annotation/ https://www.oracle.com/technical-resources/articles/java/javareflection.htmlhttps://www.bilibili.com/video/BV1tY411Z799 reflect demoå¸¸ç”¨åå°„ç”¨æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279/** * @author xiaoyaomeng */class Person &#123; private int age; private String name; public Person() &#123; &#125; public Person(int age, String name) &#123; this.age = age; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125;class SuperMan extends Person implements ActionInterface &#123; private boolean BlueBriefs; public void fly() &#123; System.out.println(&quot;è¶…äººä¼šé£žè€¶ï½žï½ž&quot;); &#125; public boolean isBlueBriefs() &#123; return BlueBriefs; &#125; public void setBlueBriefs(boolean blueBriefs) &#123; BlueBriefs = blueBriefs; &#125; @Override public void walk(int m) &#123; // TODO Auto-generated method stub System.out.println(&quot;è¶…äººä¼šèµ°è€¶ï½žï½žèµ°äº†&quot; + m + &quot;ç±³å°±èµ°ä¸åŠ¨äº†ï¼&quot;); &#125;&#125;interface ActionInterface &#123; public void walk(int m);&#125;public class ReflectMethod &#123; /** * Demo1: é€šè¿‡Javaåå°„æœºåˆ¶å¾—åˆ°ç±»çš„åŒ…åå’Œç±»å */ public static void Demo1() &#123; Person person = new Person(); System.out.println(&quot;Demo1: åŒ…å: &quot; + person.getClass().getPackage().getName() + &quot;ï¼Œ&quot; + &quot;å®Œæ•´ç±»å: &quot; + person.getClass().getName()); &#125; /** * Demo2: éªŒè¯æ‰€æœ‰çš„ç±»éƒ½æ˜¯Classç±»çš„å®žä¾‹å¯¹è±¡ * * @throws ClassNotFoundException */ public static void Demo2() throws ClassNotFoundException &#123; //å®šä¹‰ä¸¤ä¸ªç±»åž‹éƒ½æœªçŸ¥çš„Class , è®¾ç½®åˆå€¼ä¸ºnull, çœ‹çœ‹å¦‚ä½•ç»™å®ƒä»¬èµ‹å€¼æˆPersonç±» Class&lt;?&gt; class1 = null; Class&lt;?&gt; class2 = null; //å†™æ³•1, å¯èƒ½æŠ›å‡º ClassNotFoundException [å¤šç”¨è¿™ä¸ªå†™æ³•] class1 = Class.forName(&quot;reflection.Person&quot;); System.out.println(&quot;Demo2:(å†™æ³•1) åŒ…å: &quot; + class1.getPackage().getName() + &quot;ï¼Œ&quot; + &quot;å®Œæ•´ç±»å: &quot; + class1.getName()); //å†™æ³•2 class2 = Person.class; System.out.println(&quot;Demo2:(å†™æ³•2) åŒ…å: &quot; + class2.getPackage().getName() + &quot;ï¼Œ&quot; + &quot;å®Œæ•´ç±»å: &quot; + class2.getName()); &#125; /** * Demo3: é€šè¿‡Javaåå°„æœºåˆ¶ï¼Œç”¨Class åˆ›å»ºç±»å¯¹è±¡[è¿™ä¹Ÿå°±æ˜¯åå°„å­˜åœ¨çš„æ„ä¹‰æ‰€åœ¨] */ public static void Demo3() throws ClassNotFoundException, InstantiationException, IllegalAccessException &#123; Class&lt;?&gt; class1 = null; class1 = Class.forName(&quot;reflection.Person&quot;); //ç”±äºŽè¿™é‡Œä¸èƒ½å¸¦å‚æ•°ï¼Œæ‰€ä»¥ä½ è¦å®žä¾‹åŒ–çš„è¿™ä¸ªç±»Personï¼Œä¸€å®šè¦æœ‰æ— å‚æž„é€ å‡½æ•°å“ˆï½ž Person person = (Person) class1.newInstance(); person.setAge(20); person.setName(&quot;LeeFeng&quot;); System.out.println(&quot;Demo3: &quot; + person.getName() + &quot; : &quot; + person.getAge()); &#125; /** * Demo4: é€šè¿‡Javaåå°„æœºåˆ¶å¾—åˆ°ä¸€ä¸ªç±»çš„æž„é€ å‡½æ•°ï¼Œå¹¶å®žçŽ°åˆ›å»ºå¸¦å‚å®žä¾‹å¯¹è±¡ */ public static void Demo4() throws ClassNotFoundException, IllegalArgumentException, InstantiationException, IllegalAccessException, InvocationTargetException &#123; // Get the class object Class&lt;?&gt; clazz = Person.class; // Get the constructors of the class Constructor&lt;?&gt;[] constructors = clazz.getConstructors(); // all constructor methods // Iterate over constructors and print parameter types for (Constructor&lt;?&gt; constructor : constructors) &#123; System.out.println(&quot;Constructor: &quot; + constructor); // Get parameter types Class&lt;?&gt;[] parameterTypes = constructor.getParameterTypes(); for (Class&lt;?&gt; paramType : parameterTypes) &#123; System.out.println(&quot;Parameter type: &quot; + paramType.getName()); &#125; // Alternatively, you can use Parameter class to get more details Parameter[] parameters = constructor.getParameters(); for (Parameter parameter : parameters) &#123; System.out.println(&quot;Parameter: &quot; + parameter.getName() + &quot;, Type: &quot; + parameter.getType()); &#125; System.out.println(); &#125; try &#123; /** * public Person(String name) æž„é€ æ–¹æ³• Create å¯¹è±¡ */ final Class&lt;?&gt;[] stringParam = &#123;String.class&#125;; final Constructor&lt;?&gt; consString = Person.class.getConstructor(stringParam); Person personString = (Person) consString.newInstance(new Object[]&#123;99&#125;); System.out.println(&quot;stringParam &quot; + personString); /** * public Person(int age, String name) æž„é€ æ–¹æ³• Create å¯¹è±¡ */ final Class&lt;?&gt;[] stringIntParam = &#123;int.class, String.class&#125;; final Constructor&lt;?&gt; consStringInt = Person.class.getConstructor(stringIntParam); Person person1 = (Person) consStringInt.newInstance(new Object[]&#123;99, &quot;john&quot;&#125;); System.out.println(&quot;stringIntParam &quot; + person1); &#125; catch (NoSuchMethodException e) &#123; throw new RuntimeException(e); &#125; Class&lt;?&gt; class1 = null; Person person1 = null; Person person2 = null; class1 = Class.forName(&quot;reflection.Person&quot;); //å¾—åˆ°ä¸€ç³»åˆ—æž„é€ å‡½æ•°é›†åˆ Constructor&lt;?&gt;[] constructors1 = class1.getConstructors(); person1 = (Person) constructors1[0].newInstance(); person1.setAge(30); person1.setName(&quot;leeFeng&quot;); //constructor onject that have two params: age and name person2 = (Person) constructors1[1].newInstance(20, &quot;leeFeng&quot;); System.out.println(&quot;Demo4: &quot; + person1.getName() + &quot; : &quot; + person1.getAge() + &quot; , &quot; + person2.getName() + &quot; : &quot; + person2.getAge() ); /** * Demo5: é€šè¿‡Javaåå°„æœºåˆ¶æ“ä½œæˆå‘˜å˜é‡, set å’Œ get */ public static void Demo5() throws IllegalArgumentException, IllegalAccessException, SecurityException, NoSuchFieldException, InstantiationException, ClassNotFoundException &#123; Class&lt;?&gt; class1 = null; class1 = Class.forName(&quot;reflection.Person&quot;); Object obj = class1.newInstance(); Field personNameField = class1.getDeclaredField(&quot;name&quot;); personNameField.setAccessible(true); personNameField.set(obj, &quot;èƒ–è™Žå…ˆæ£®&quot;); System.out.println(&quot;Demo5: ä¿®æ”¹å±žæ€§ä¹‹åŽå¾—åˆ°å±žæ€§å˜é‡çš„å€¼ï¼š&quot; + personNameField.get(obj)); &#125; /** * Demo6: é€šè¿‡Javaåå°„æœºåˆ¶å¾—åˆ°ç±»çš„ä¸€äº›å±žæ€§ï¼š ç»§æ‰¿çš„æŽ¥å£ï¼Œçˆ¶ç±»ï¼Œå‡½æ•°ä¿¡æ¯ï¼Œæˆå‘˜ä¿¡æ¯ï¼Œç±»åž‹ç­‰ * * @throws ClassNotFoundException */ public static void Demo6() throws ClassNotFoundException &#123; Class&lt;?&gt; class1 = null; class1 = Class.forName(&quot;reflection.SuperMan&quot;); //å–å¾—çˆ¶ç±»åç§° Class&lt;?&gt; superClass = class1.getSuperclass(); System.out.println(&quot;Demo6: SuperManç±»çš„çˆ¶ç±»å: &quot; + superClass.getName()); System.out.println(&quot;===============================================&quot;); Field[] fields = class1.getDeclaredFields(); for (int i = 0; i &lt; fields.length; i++) &#123; System.out.println(&quot;ç±»ä¸­çš„æˆå‘˜: &quot; + fields[i]); &#125; System.out.println(&quot;===============================================&quot;); //å–å¾—ç±»æ–¹æ³• Method[] methods = class1.getDeclaredMethods(); for (int i = 0; i &lt; methods.length; i++) &#123; System.out.println(&quot;Demo6,å–å¾—SuperManç±»çš„æ–¹æ³•ï¼š&quot;); System.out.println(&quot;å‡½æ•°åï¼š&quot; + methods[i].getName()); System.out.println(&quot;å‡½æ•°è¿”å›žç±»åž‹ï¼š&quot; + methods[i].getReturnType()); System.out.println(&quot;å‡½æ•°è®¿é—®ä¿®é¥°ç¬¦ï¼š&quot; + Modifier.toString(methods[i].getModifiers())); System.out.println(&quot;å‡½æ•°ä»£ç å†™æ³•ï¼š &quot; + methods[i]); &#125; System.out.println(&quot;===============================================&quot;); //å–å¾—ç±»å®žçŽ°çš„æŽ¥å£,å› ä¸ºæŽ¥å£ç±»ä¹Ÿå±žäºŽClass,æ‰€ä»¥å¾—åˆ°æŽ¥å£ä¸­çš„æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„æ–¹æ³•å¾—åˆ°å“ˆ Class&lt;?&gt; interfaces[] = class1.getInterfaces(); for (int i = 0; i &lt; interfaces.length; i++) &#123; System.out.println(&quot;å®žçŽ°çš„æŽ¥å£ç±»å: &quot; + interfaces[i].getName()); &#125; &#125; /** * Demo7: é€šè¿‡Javaåå°„æœºåˆ¶è°ƒç”¨ç±»æ–¹æ³• */ public static void Demo7() throws ClassNotFoundException, SecurityException, NoSuchMethodException, IllegalArgumentException, IllegalAccessException, InvocationTargetException, InstantiationException &#123; Class&lt;?&gt; class1 = null; class1 = Class.forName(&quot;reflection.SuperMan&quot;); System.out.println(&quot;Demo7: \\nè°ƒç”¨æ— å‚æ–¹æ³•fly()ï¼š&quot;); Method method = class1.getMethod(&quot;fly&quot;); method.invoke(class1.newInstance()); System.out.println(&quot;è°ƒç”¨æœ‰å‚æ–¹æ³•walk(int m)ï¼š&quot;); method = class1.getMethod(&quot;walk&quot;, int.class); method.invoke(class1.newInstance(), 100); method.invoke(new SuperMan(), 666); // è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„ä¸€æ · &#125; /** * Demo8: é€šè¿‡Javaåå°„æœºåˆ¶å¾—åˆ°ç±»åŠ è½½å™¨ä¿¡æ¯ * &lt;p&gt; * åœ¨javaä¸­æœ‰ä¸‰ç§ç±»ç±»åŠ è½½å™¨ã€‚[è¿™æ®µèµ„æ–™ç½‘ä¸Šæˆªå–] * &lt;p&gt; * 1ï¼‰Bootstrap ClassLoader æ­¤åŠ è½½å™¨é‡‡ç”¨c++ç¼–å†™ï¼Œä¸€èˆ¬å¼€å‘ä¸­å¾ˆå°‘è§ã€‚ * &lt;p&gt; * 2ï¼‰Extension ClassLoader ç”¨æ¥è¿›è¡Œæ‰©å±•ç±»çš„åŠ è½½ï¼Œä¸€èˆ¬å¯¹åº”çš„æ˜¯jre\\lib\\extç›®å½•ä¸­çš„ç±» * &lt;p&gt; * 3ï¼‰AppClassLoader åŠ è½½classpathæŒ‡å®šçš„ç±»ï¼Œæ˜¯æœ€å¸¸ç”¨çš„åŠ è½½å™¨ã€‚åŒæ—¶ä¹Ÿæ˜¯javaä¸­é»˜è®¤çš„åŠ è½½å™¨ã€‚ * * @throws ClassNotFoundException */ public static void Demo8() throws ClassNotFoundException &#123; Class&lt;?&gt; class1 = null; class1 = Class.forName(&quot;reflection.SuperMan&quot;); String nameString = class1.getClassLoader().getClass().getName(); System.out.println(&quot;Demo8: ç±»åŠ è½½å™¨ç±»å: &quot; + nameString); &#125;&#125; classç±»æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œæ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼Œæ¯å½“ç¼–å†™å¹¶ç¼–è¯‘äº†ä¸€ä¸ªæ–°ç±»å°±ä¼šäº§ç”Ÿä¸€ä¸ªClasså¯¹è±¡ï¼ˆä¿å­˜åœ¨ä¸€ä¸ªåŒåçš„.classæ–‡ä»¶ä¸­ï¼‰ã€‚ä¸ºäº†ç”Ÿæˆè¿™ä¸ªå¯¹è±¡å°±è¦ç”¨åˆ°JVMåˆ†æžä¸»è¦çš„ç±»å’Œæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253interface HasBatteries &#123;&#125;interface Waterproof &#123;&#125;interface Shoots &#123;&#125;class Toy &#123; //Comment out the following default constructor //to see NoSuchMethodError from(*1*) Toy() &#123; &#125; Toy(int i) &#123; &#125;&#125;class FancyToy extends Toy implements HasBatteries, Waterproof, Shoots &#123; FancyToy() &#123; super(1); &#125;&#125;public class ToyTest &#123; static void printInfo(Class cc) &#123; Print.print(&quot;Class name: &quot; + cc.getName() + &quot; is Interface ? [&quot; + cc.isInterface() + &quot;]&quot;); //æ˜¯å¦æ˜¯æŽ¥å£ Print.print(&quot;Simple name: &quot; + cc.getSimpleName()); //ä¸å¥½å«åŒ…åçš„ç±»å Print.print(&quot;Canonical name : &quot; + cc.getCanonicalName()); //å…¨é™å®šçš„ç±»å &#125; public static void main(String[] args) &#123; Class c = null; try &#123; c = Class.forName(&quot;TypeInfomation.Demo.FancyToy&quot;); &#125; catch (ClassNotFoundException e) &#123; Print.print(&quot;Can&#x27;t find FancyToy&quot;); System.exit(1); &#125; Print.print(c); printInfo(c); Print.print(); for (Class face : c.getInterfaces()) &#123; printInfo(face); Print.print(); &#125; Class up = c.getSuperclass(); Object obj = null; try &#123; //Requires default constructor: obj = up.newInstance(); &#125; catch (InstantiationException e) &#123; Print.print(&quot;Cannot instantiate&quot;); System.exit(1); &#125; catch (IllegalAccessException e) &#123; Print.print(&quot;Cannot access&quot;); System.exit(1); &#125; printInfo(obj.getClass()); &#125;&#125; Classç±»æ‰€æœ‰çš„Classå¯¹è±¡éƒ½å±žäºŽè¿™ä¸ª ç±»çš„ä¸€ä¸ªstaticæˆå‘˜ï¼ŒClasså¯¹è±¡å’Œå…¶ä»–å¯¹è±¡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Class.forName(&quot;Gum&quot;) èŽ·å–å¹¶æ“ä½œå®ƒçš„å¼•ç”¨ï¼ˆè¿™å°±æ˜¯ç±»åŠ è½½å™¨çš„å·¥ä½œï¼‰ï¼Œ ä»Žä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒgetSuperclass()æ–¹æ³•æŸ¥è¯¢å…¶ç›´æŽ¥åŸºç±»ï¼Œè¿™å°†è¿”å›žç”¨æ¥è¿›ä¸€æ­¥æŸ¥è¯¢çš„Classå¯¹è±¡ã€‚ç”±æ­¤ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å‘çŽ°ä¸€ä¸ªå¯¹è±¡å®Œæ•´çš„ç±»ç»§æ‰¿ç»“æž„ newInstanceæ–¹æ³•Classçš„newInstance()å®žçŽ°â€œè™šæ‹Ÿæž„é€ å™¨â€çš„ä¸€ç§é€”å¾„ï¼Œè™šæ‹Ÿæž„é€ å™¨å¯»ä½ ç”Ÿå‘½â€æˆ‘ä¸çŸ¥é“ä½ çš„ç¡®åˆ‡ç±»åž‹ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•è¦æ­£ç¡®åœ°åˆ›å»ºè‡ªå·±â€ï¼Œä»£ç ä¸­çš„ up åªæ˜¯ä¸€ä¸ªClasså¼•ç”¨ï¼Œåœ¨ç¼–è¯‘æœŸä¸å…·å¤‡ä»»ä½•æ›´è¿›ä¸€æ­¥çš„ç±»åž‹ä¿¡æ¯ï¼Œåˆ›å»ºæ–°å®žä¾‹æ—¶ï¼Œä¼šå¾—åˆ°æŒ‡å‘Toyå¯¹è±¡çš„Objectå¼•ç”¨ï¼Œå¯ä»¥è½¬åž‹æ“ä½œå®ƒã€‚ åŠ¨æ€ä»£ç†12345678910111213141516171819202122232425262728293031class DynamicProxyHandler implements InvocationHandler&#123; private Object proxied; public DynamicProxyHandler(Object proxied) &#123; this.proxied = proxied; &#125; //proxy:å¯¹è±¡çš„å¼•ç”¨ ,method :è¢«è°ƒç”¨çš„æ–¹æ³• ï¼Œargs:æ–¹æ³•é‡Œé¢çš„å‚æ•° @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println(&quot;**** proxy: &quot; + proxy.getClass() + &quot;. method: &quot; +method + &quot;, args &quot; + args); if (args !=null) for (Object arg : args) //æ–¹æ³•é‡Œé¢çš„å‚æ•° System.out.println(&quot; &quot; + arg); return method.invoke(proxied,args); //é€šè¿‡æ–¹æ³•è°ƒç”¨ å¼•ç”¨å’Œå‚æ•°,è½¬å‘è°ƒç”¨ &#125;&#125;public class SimpleDynamicProxy &#123; public static void consumer(Interface iface)&#123; iface.doSomething(); iface.somethingElse(&quot;bonobo&quot;); &#125; public static void main(String[] args) &#123; RealObject real = new RealObject();// consumer(real); //å¸¸ç”¨è°ƒç”¨ //Insert a proxy and cal again: Interface proxy = (Interface) Proxy.newProxyInstance(Interface.class.getClassLoader(), new Class[]&#123;Interface.class&#125;,new DynamicProxyHandler(real)); consumer(proxy); &#125;&#125; more demo about dynamic proxy in this article https://jonblog.site/2024/05/28/designpattern-proxy/ 2ã€javap ä¸€ä¸ªéšJDKå‘å¸ƒçš„åç¼–è¯‘å·¥å…· å‘½ä»¤è¡Œ åˆ°Cat.javaæ‰€å¯¹åº”çš„Cat.classæ–‡ä»¶çš„ä½ç½® è¿è¡Œ javap -private Cat.class å¯ä»¥åç¼–è¯‘æºç¨‹åº 3ã€æ²¡æœ‰ä»»ä½•æ–¹å¼å¯ä»¥é˜»æ­¢åå°„åˆ°è¾¾å¹¶è°ƒç”¨é‚£äº›éžå…¬å…±è®¿é—®æƒé™çš„æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637public class ModifyingPrivateFields &#123; public static void main(String[] args) throws Exception &#123; WithPrivateFinalField pf = new WithPrivateFinalField(); System.out.println(pf); Field f = pf.getClass().getDeclaredField(&quot;i&quot;); f.setAccessible(true); System.out.println(&quot;f.getInt(pf): &quot; + f.getInt(pf)); f.setInt(pf,47); System.out.println(pf); Print.print(); f =pf.getClass().getDeclaredField(&quot;s&quot;); f.setAccessible(true); System.out.println(&quot;f.get(pf): &quot;+f.get(pf)); f.set(pf,&quot;you are totally safe&quot;); System.out.println(pf); Print.print(); f = pf.getClass().getDeclaredField(&quot;s2&quot;); f.setAccessible(true); System.out.println(&quot;f.get(pf): &quot;+f.get(pf)); f.set(pf,&quot;No,you&#x27;re not!&quot;); System.out.println(pf); &#125;&#125;class WithPrivateFinalField &#123; private int i = 1; private final String s = &quot; I&#x27;m totally safe&quot;; private String s2 = &quot;Am I safe?&quot;; public String toString() &#123; return &quot;i = &quot; + i + &quot;, &quot; + s + &quot;, &quot; + s2; &#125;&#125; https://github.com/hengzhou/Rejectionhttp://blog.csdn.net/ljphhj/article/details/12858767 this video write code simulate JDK dynamic proxy https://www.bilibili.com/video/BV1Ve411o7WM åå°„æœºåˆ¶Javaåå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºŽä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•ï¼›å¯¹äºŽä»»æ„ä¸€ä¸ªå¯¹è±¡éƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•ï¼›è¿™ç§åŠ¨æ€èŽ·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºjavaçš„åå°„æœºåˆ¶ã€‚ åŸºæœ¬ä½¿ç”¨123456package reflection;public class MethodReflect &#123; public int addResult(int addNum) &#123; return addNum; &#125;&#125; 1234567891011121314151617181920212223242526//ä½¿ç”¨åå°„ç¬¬ä¸€æ­¥:èŽ·å–æ“ä½œç±»MethodDemoFieldDemoæ‰€å¯¹åº”çš„Classå¯¹è±¡Class &lt; ?&gt;cls = Class.forName(&quot;reflection.MethodReflect&quot;);//ä½¿ç”¨MethodDemoç±»çš„classå¯¹è±¡ç”Ÿæˆ å®žä¾‹Object obj = cls.newInstance();//èŽ·å–public int addResult(int addNum)æ–¹æ³•Method addMethod = cls.getMethod(&quot;addResult&quot;, new Class[] &#123; int.class&#125;);System.out.println(&quot;ä¿®é¥°ç¬¦: &quot; + Modifier.toString(addMethod.getModifiers()));System.out.println(&quot;è¿”å›žå€¼: &quot; + addMethod.getReturnType());System.out.println(&quot;æ–¹æ³•åç§°: &quot; + addMethod.getName());System.out.println(&quot;å‚æ•°åˆ—è¡¨: &quot; + addMethod.getParameterTypes());int result = (int) addMethod.invoke(obj, 2);System.out.println(&quot;è°ƒç”¨addResultåŽçš„è¿è¡Œç»“æžœ:&quot; + result);System.out.println(&quot;--------------------------------&quot;);//èŽ·å–public String toString() æ–¹æ³•Method toStringMethod = cls.getMethod(&quot;toString&quot;, new Class[] &#123;&#125;);System.out.println(&quot;ä¿®é¥°ç¬¦: &quot; + Modifier.toString(toStringMethod.getModifiers()));System.out.println(&quot;è¿”å›žå€¼: &quot; + toStringMethod.getReturnType());System.out.println(&quot;æ–¹æ³•åç§°: &quot; + toStringMethod.getName());System.out.println(&quot;å‚æ•°åˆ—è¡¨: &quot; + toStringMethod.getParameterTypes());String msg = (String) toStringMethod.invoke(obj);System.out.println(&quot;è°ƒç”¨toStringåŽçš„è¿è¡Œç»“æžœ:&quot; + msg); Methodç±»çš„invoke(Object obj,Object args[])æ–¹æ³•æŽ¥æ”¶çš„å‚æ•°å¿…é¡»ä¸ºå¯¹è±¡,å¦‚æžœå‚æ•°ä¸ºåŸºæœ¬ç±»åž‹æ•°æ®,å¿…é¡»è½¬æ¢ä¸ºç›¸åº”çš„åŒ…è£…ç±»åž‹çš„å¯¹è±¡ã€‚invoke()æ–¹æ³•çš„è¿”å›žå€¼æ€»æ˜¯å¯¹è±¡,å¦‚æžœå®žé™…è¢«è°ƒç”¨çš„æ–¹æ³•çš„è¿”å›žç±»åž‹æ˜¯åŸºæœ¬ç±»åž‹æ•°æ®,é‚£ä¹ˆinvoke()æ–¹æ³•ä¼šæŠŠå®ƒè½¬æ¢ä¸ºç›¸åº”çš„åŒ…è£…ç±»åž‹çš„å¯¹è±¡,å†å°†å…¶è¿”å›ž. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public class InvokeTester &#123; private String name; public void setName(String name) &#123; this.name = name; &#125; public String getName() &#123; return name; &#125; public InvokeTester() &#123; &#125; public int add(int param1, int param2) &#123; return param1 + param2; &#125; public String echo(String mesg) &#123; return &quot;echo&quot; + mesg; &#125; public static void main(String[] args) throws Exception &#123; Class classType = InvokeTester.class; Object invokertester = classType.newInstance(); //1 Method addMethod = classType.getMethod(&quot;add&quot;, new Class[]&#123; //2 int.class, int.class &#125;); Object result = addMethod.invoke(invokertester, new Object[]&#123; //3 new Integer(100), new Integer(200) &#125;); System.out.println(result); Method echo = classType.getMethod(&quot;echo&quot;, new Class[]&#123; String.class &#125;); Object obj = echo.invoke(invokertester, new Object[]&#123; new String(&quot;Jon is very good!!!&quot;) &#125;); System.out.println(obj.toString()); InvokeTester test = new InvokeTester(); //1 test.setName(&quot;é»„ç¿Š&quot;); //2 //Method[] methods; Method[] methods = test.getClass().getDeclaredMethods(); //3 //å¾ªçŽ¯æŸ¥æ‰¾èŽ·å–idæ–¹æ³•ï¼Œå¹¶æ‰§è¡ŒæŸ¥çœ‹æ˜¯å¦æœ‰è¿”å›žå€¼ for (int i = 0; i &lt; methods.length; i++) &#123; //å¦‚æžœæ­¤æ–¹æ³•æœ‰getå’ŒIdå…³é”®å­—åˆ™æ‰§è¡Œ if (methods[i].getName().indexOf(&quot;get&quot;) != -1 &amp;&amp; methods[i].getName().indexOf(&quot;Name&quot;) != -1) &#123; // èŽ·å–æ­¤getæ–¹æ³•è¿”å›žå€¼,åˆ¤æ–­æ˜¯å¦æœ‰å€¼,å¦‚æžœæ²¡æœ‰å€¼è¯´æ˜Žå³å°†æ‰§è¡Œçš„æ“ä½œæ–°å¢ž if (methods[i].invoke(test, null) == null) &#123; //4 System.out.println(&quot;æ­¤å¯¹è±¡æ²¡æœ‰å€¼ï¼ï¼ï¼&quot;); &#125; else &#123; Object strName = methods[i].invoke(test, null); System.out.println(strName); &#125; &#125; &#125; &#125;&#125; invokeæ–¹æ³•çš„ä½¿ç”¨å®žé™…ä¸Šinvokeæ–¹æ³•çš„ä½¿ç”¨ï¼Œå’Œæˆ‘ä»¬å¸¸è§çš„æœ‰æ‰€åŒºåˆ«ã€‚ æˆ‘ä»¬ç»å¸¸åˆ›å»ºä¸€ä¸ªå¯¹è±¡Aï¼ŒAå¯¹è±¡é‡Œé¢çš„æ–¹æ³•getA()æ–¹æ³•ï¼Œç„¶åŽA.getA() æˆ‘ä»¬é‡‡ç”¨æ–°çš„æ–¹å¼è°ƒç”¨ï¼ˆ1ï¼‰å¼„ä¸€ä¸ªæ–¹æ³•çš„â€œæ›¿èº«â€ï¼ˆå…¶å®žå°±æ˜¯æž„å»ºä¸€ä¸ªMethodå¯¹è±¡ï¼Œè®©è¿™ä¸ªMethodå¯¹è±¡æ¥ä»£æ›¿ä½ çŽ°åœ¨è¦ç”¨çš„æ–¹æ³•ï¼‰ï¼ˆ2ï¼‰ç„¶åŽç»™æ›¿èº«éœ€è¦çš„å¯¹è±¡å’Œå‚æ•°ï¼Œè®©æ›¿èº«åŽ»æ›¿ä½ è°ƒç”¨ï¼ˆåƒæ›¿èº«æ›¿ä½ åŽ»æˆ˜æ–—ï¼‰ 12345678910111213141516171819202122232425262728package reflection;import org.junit.jupiter.api.Test;import java.lang.reflect.Method;public class InvokeTest &#123; public void test(String[] arg)&#123; for (String string : arg) &#123; System.out.println(&quot;zp is &quot; + string); &#125; &#125; @Test public void invokeDemo() throws Exception &#123; //èŽ·å–å­—èŠ‚ç å¯¹è±¡,è¿™é‡Œè¦å¡«å¥½ä½ å¯¹åº”å¯¹è±¡çš„åŒ…çš„è·¯å¾„ Class&lt;InvokeTest&gt; clazz = (Class&lt;InvokeTest&gt;) Class.forName(&quot;reflection.InvokeTest&quot;); //å½¢å¼ä¸€ï¼šèŽ·å–ä¸€ä¸ªå¯¹è±¡// Constructor con = clazz.getConstructor();// InvokeTest m = (InvokeTest) con.newInstance(); //å½¢å¼äºŒï¼šç›´æŽ¥newå¯¹è±¡ï¼Œå®žé™…ä¸Šä¸æ˜¯æ¡†æž¶çš„è¯ï¼Œè‡ªå·±å†™ä»£ç ç›´æŽ¥æŒ‡å®šæŸä¸ªå¯¹è±¡åˆ›å»ºå¹¶è°ƒç”¨ä¹Ÿå¯ä»¥ InvokeTest m = new InvokeTest(); String[] s = new String[]&#123;&quot;handsome&quot;,&quot;smart&quot;&#125;; //èŽ·å–Methodå¯¹è±¡ Method method = clazz.getMethod(&quot;test&quot;, String[].class); //invokeæ–¹æ³•è¦æ¯”åˆ«çš„æ–¹æ³•å¤šåšä¸€æ­¥ //è°ƒç”¨invokeæ–¹æ³•æ¥è°ƒç”¨ method.invoke(m, (Object) s); &#125;&#125; è¾“å‡ºç»“æžœ zp is handsomezp is smart æ‰€ä»¥ä½¿ç”¨invokeæ–¹æ³•è¦æ¯”åˆ«çš„æ–¹æ³•å¤šåšä¸€æ­¥ï¼Œå°±æ˜¯æž„å»ºä¸€ä¸ªMethodå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ›¿ä»£çš„æ˜¯çŽ°åœ¨ç¨‹åºè¦è°ƒç”¨æ–¹æ³•çš„æ›¿ä»£å“ã€‚ è€Œä¸”é™¤äº†å‚æ•°ä»¥å¤–ï¼Œinvokeè¿˜ä¼šå¤šè¦ä¸€ä¸ªå¯¹è±¡ï¼Œå› ä¸ºæ–¹æ³•è°ƒç”¨éœ€è¦å¯¹è±¡ï¼Œæ‰€ä»¥invokeè¦æƒ³è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•ï¼Œå°±éœ€è¦ç›®æ ‡æ–¹æ³•çš„éœ€è¦çš„å¯¹è±¡ã€‚ çœ‹èµ·æ¥invokeæ–¹æ³•ä¸ä»…æ¯”å¹³å¸¸æ–¹æ³•ç›´æŽ¥è°ƒç”¨è¦éº»çƒ¦å¾ˆå¤šï¼Œä½†æ˜¯ä½ æœ‰æƒ³è¿‡å—ï¼Œæˆ‘åªéœ€è¦è¾“å…¥å‚æ•°ï¼Œæˆ‘å¯ä»¥è°ƒç”¨æ›¿ä»£å„ç§æ–¹æ³•ï¼Œåœ¨æœªçŸ¥çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®æ¡ä»¶å†³å®šåŽ»è°ƒç”¨ä»€ä¹ˆå¯¹è±¡ï¼Œä»€ä¹ˆæ–¹æ³•ï¼Œä¸€ä¸‹å­å°±è®©ä»£ç å˜å¾—çµæ´»ï¼Œè¿™ä¸ä»…æ˜¯invokeçš„å¦™å¤„ï¼Œä¹Ÿæ˜¯æ•´ä¸ªåå°„çš„å¦™å¤„ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®æ¡ä»¶çµæ´»ä½¿ç”¨ã€‚ https://zhuanlan.zhihu.com/p/350058223 Methodä¿¡æ¯æˆ‘ä»¬å·²ç»èƒ½é€šè¿‡Classå®žä¾‹èŽ·å–æ‰€æœ‰Fieldå¯¹è±¡ï¼ŒåŒæ ·çš„ï¼Œå¯ä»¥é€šè¿‡Classå®žä¾‹èŽ·å–æ‰€æœ‰Methodä¿¡æ¯ã€‚Classç±»æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•æ¥èŽ·å–Methodï¼š Method getMethod(name, Class...)ï¼šèŽ·å–æŸä¸ªpublicçš„Methodï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰ Method getDeclaredMethod(name, Class...)ï¼šèŽ·å–å½“å‰ç±»çš„æŸä¸ªMethodï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰ Method[] getMethods()ï¼šèŽ·å–æ‰€æœ‰publicçš„Methodï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰ Method[] getDeclaredMethods()ï¼šèŽ·å–å½“å‰ç±»çš„æ‰€æœ‰Methodï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰ 123456789101112131415161718192021222324class Student extends Person &#123; public int getScore(String type) &#123; return 99; &#125; private int getGrade(int year) &#123; return 1; &#125;// @Override// public void hello() &#123;// System.out.println(&quot;Student:hello&quot;);// &#125;&#125;class Person &#123; public String getName() &#123; return &quot;Person&quot;; &#125; public void hello() &#123; System.out.println(&quot;Person:hello&quot;); &#125;&#125; 12Class&lt;Student&gt; methodClass = Student.class;Arrays.stream(methodClass.getMethods()).forEach(method -&gt; System.out.println(&quot;methodæ–¹æ³•: &quot; + method)); æ‰“å°å‡º methodæ–¹æ³•: public int reflection.liao.Student.getScore(java.lang.String)methodæ–¹æ³•: public void reflection.liao.Person.hello()methodæ–¹æ³•: public java.lang.String reflection.liao.Person.getName() 12Class&lt;Person&gt; methodClass = Person.class;Arrays.stream(methodClass.getMethods()).forEach(method -&gt; System.out.println(&quot;methodæ–¹æ³•: &quot; + method)); æ‰“å°å‡º methodæ–¹æ³•: public void reflection.liao.Person.hello()methodæ–¹æ³•: public java.lang.String reflection.liao.Person.getName() â€¦objectæ–¹æ³• getMethods()å¯ä»¥ èŽ·å–æ‰€æœ‰publicçš„Methodï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰ï¼Œ ä¸èƒ½èŽ·å–åˆ°å­ç±»çš„æ–¹æ³•,é™¤éžæ˜¯æ˜¯å¤šè‚½å®žçŽ° getDeclaredMethodèŽ·å–çš„Methodèƒ½å¦è°ƒç”¨å­ç±»?çˆ¶ç±»classé€šè¿‡getDeclaredMethodèŽ·å–çš„Methodèƒ½å¦è°ƒç”¨å­ç±»çš„å¯¹è±¡ éªŒè¯æ˜¯ä¸å¯ä»¥ 1234567891011Class&lt;?&gt; clz = Class.forName(&quot;reflection.liao.Person&quot;);Object o = clz.newInstance();Method methodGetName = clz.getMethod(&quot;getName&quot;);Object noParams = methodGetName.invoke(o);System.out.println(noParams);Method methodHello = clz.getMethod(&quot;hello&quot;);System.out.println(methodHello.invoke(o));Method methodGetGrade = clz.getMethod(&quot;getGrade&quot;);System.out.println(methodGetGrade.invoke(o)); A PersonPerson:hellonull &#x2F;&#x2F; è¿™ä¸ªnullæ˜¯å“ªé‡Œæ¥çš„ æç¤º java.lang.NoSuchMethodException: reflection.liao.Person.getGrade() æ‰€ä»¥æ˜¯è°ƒç”¨ä¸äº†çš„ã€‚ https://www.liaoxuefeng.com/wiki/1252599548343744/1264803678201760 http://www.51gjie.com/java/796.html https://www.cnblogs.com/onlywujun/p/3519037.html&gt;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[],"author":"Jon"},{"title":"TOOL IDEA ERROR","slug":"TOOL-idea-error","date":"2024-05-30T07:50:12.000Z","updated":"2024-09-15T12:52:11.529Z","comments":true,"path":"/2024/05/30/idea-error/","link":"","permalink":"https://noteforme.github.io/2024/05/30/idea-error/","excerpt":"","text":"No tests found for given includes Errorwhen running Parameterized Unit test in Android Studio","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[],"author":"Jon"},{"title":"Ready Interview this time","slug":"interview-ready-this-time","date":"2024-05-30T02:03:52.000Z","updated":"2024-09-15T09:47:46.005Z","comments":true,"path":"/2024/05/30/ready-interview-this-time/","link":"","permalink":"https://noteforme.github.io/2024/05/30/ready-interview-this-time/","excerpt":"","text":"ArchtechtrueAndroid MVP MVVM,çŽ°åœ¨ç»„ä»¶æ¼”è¿›æˆMVVMï¼Œæœ€ä¸»è¦çš„åŽŸå› æ˜¯ä»€ä¹ˆã€‚æ•°æ®ç»‘å®šï¼ˆData Bindingï¼‰ï¼š MVVM é€šè¿‡æ•°æ®ç»‘å®šåº“ï¼ˆå¦‚ Android çš„ Data Binding Library å’Œ Jetpack Composeï¼‰å®žçŽ°äº†è§†å›¾å’Œæ•°æ®ä¹‹é—´çš„ç›´æŽ¥ç»‘å®šï¼Œå‡å°‘äº†æ ·æ¿ä»£ç ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºŽç»´æŠ¤ã€‚è§£è€¦æ€§ï¼š MVVM æ¨¡å¼é€šè¿‡ ViewModel å°†è§†å›¾é€»è¾‘ä¸Žä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œä½¿å¾—è§†å›¾å’Œæ¨¡åž‹ä¹‹é—´çš„è€¦åˆåº¦æ›´ä½Žã€‚è¿™ä½¿å¾—ä»£ç æ›´æ˜“äºŽæµ‹è¯•å’Œå¤ç”¨ã€‚å“åº”å¼ç¼–ç¨‹ï¼š MVVM å€ŸåŠ© LiveData æˆ– RxJava ç­‰å“åº”å¼ç¼–ç¨‹å·¥å…·ï¼Œä½¿å¾—è§†å›¾èƒ½å¤Ÿè‡ªåŠ¨è§‚å¯Ÿæ•°æ®å˜åŒ–å¹¶è¿›è¡Œæ›´æ–°ï¼Œä»Žè€Œç®€åŒ–äº†æ›´æ–° UI çš„è¿‡ç¨‹ã€‚ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ï¼š MVVM ä¸­çš„ ViewModel æ˜¯ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨é…ç½®æ›´æ”¹ï¼ˆå¦‚è®¾å¤‡æ—‹è½¬ï¼‰æ—¶ä¸ä¼šè¢«é”€æ¯ï¼Œé¿å…äº†å†…å­˜æ³„æ¼å’Œä¸å¿…è¦çš„èµ„æºé‡å»ºé—®é¢˜ã€‚é€‚åº”çŽ°ä»£æž¶æž„ç»„ä»¶ï¼š MVVM æ›´åŠ é€‚åˆä¸ŽçŽ°ä»£ Android æž¶æž„ç»„ä»¶ï¼ˆå¦‚ Roomã€ViewModelã€LiveData ç­‰ï¼‰ä¸€èµ·ä½¿ç”¨ï¼Œè¿™äº›ç»„ä»¶è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸ºäº†ä¸Ž MVVM æ¨¡å¼æ— ç¼é›†æˆï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚è¿™äº›ä¼˜åŠ¿ä½¿å¾— MVVM æˆä¸º Android å¼€å‘ä¸­è¶Šæ¥è¶Šæµè¡Œçš„æž¶æž„é€‰æ‹©ï¼Œå¸®åŠ©å¼€å‘è€…æ›´é«˜æ•ˆåœ°æž„å»ºå’Œç»´æŠ¤åº”ç”¨ã€‚","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"Architecture","slug":"architecture","date":"2024-05-30T02:01:47.000Z","updated":"2024-10-02T01:35:02.773Z","comments":true,"path":"/2024/05/30/architecture/","link":"","permalink":"https://noteforme.github.io/2024/05/30/architecture/","excerpt":"","text":"Archtechtruehttps://juejin.im/post/5e801a49e51d45470e2bc8bf https://wanandroid.com/blog/show/2754 https://mp.weixin.qq.com/s/AJ4QUqdYMeQWgWEQAFPsww https://juejin.im/post/6876968255597051917 APPæ¨¡å¼ MVC MVP. MVVM:é¢è¯•é¢˜ mvpä¸Žmvvmçš„åŒºåˆ«ï¼Œmvvmæ€Žä¹ˆæ›´æ–°UI è®²è®²mvc,mvpæ¨¡å¼ï¼Œpresenterå†…å­˜æ³„æ¼çš„é—®é¢˜ ä»£ç†æ¨¡å¼ä¸Žè£…é¥°æ¨¡å¼çš„åŒºåˆ«ï¼Œæ‰‹å†™ä¸€ä¸ªé™æ€ä»£ç†ï¼Œä¸€ä¸ªåŠ¨æ€ä»£ç† MVPæ€Žä¹ˆå¤„ç†å†…å­˜æ³„æ¼ Mvpä¸ŽMvvmæœ‰ä»€ä¹ˆåŒºåˆ«? mvvmåŒå‘æ•°æ®ç»‘å®šçš„åŽŸç†æ˜¯æ€Žæ ·çš„ï¼ŸViewModel ä½ åœ¨é¡¹ç›®ä¸­æœ‰ç”¨åˆ°ä»€ä¹ˆè®¾è®¡æ¨¡å¼å—ï¼Ÿ å•ä¾‹æ¨¡å¼æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ åŠ¨ç”»é‡Œé¢ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ OkHttpé‡Œé¢ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ è°ˆè°ˆè®¾è®¡æ¨¡å¼ï¼Œä½ äº†è§£å¤šå°‘ï¼Œè¿ç”¨äº†å¤šå°‘ï¼Ÿ MVP Presenter çš„ä½œç”¨ç±»ä¼¼äºŽMVCä¸­çš„Controller,ä½†æ˜¯å…¶ä¼šåä½œç”¨ä¸ŽViewå±‚ï¼ŒModelå±‚çš„æ•°æ®æ›´æ–°ä¼šè¢«é¦–å…ˆåé¦ˆåˆ° Presenter,ç”±Presenterä¼˜å…ˆå¤„ç†å¹¶å†³å®šæ˜¯å¦åˆ·æ–°ä»¥åŠåˆ·æ–°å“ªä¸ªView,ä¹Ÿå°±æ˜¯è¯´Presenterå®Œå…¨å°†Viewå±‚ä¸ŽModelå±‚ éš”ç¦»å¼€ï¼Œå……å½“ä¸€ä¸ªåå‰¯å…¶å®žçš„ä¸­é—´äººè§’è‰². MVVM MVVMåˆ™æ˜¯æ€æƒ³çš„å®Œå…¨å˜é©ã€‚å®ƒæ˜¯å°†â€œæ•°æ®æ¨¡åž‹æ•°æ®åŒå‘ç»‘å®šâ€çš„æ€æƒ³ä½œä¸ºæ ¸å¿ƒï¼Œå› æ­¤åœ¨Viewå’ŒModelä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œé€šè¿‡ViewModelè¿›è¡Œäº¤äº’ï¼Œè€Œä¸”Modelå’ŒViewModelä¹‹é—´çš„äº¤äº’æ˜¯åŒå‘çš„ï¼Œå› æ­¤è§†å›¾çš„æ•°æ®çš„å˜åŒ–ä¼šåŒæ—¶ä¿®æ”¹æ•°æ®æºï¼Œè€Œæ•°æ®æºæ•°æ®çš„å˜åŒ–ä¹Ÿä¼šç«‹å³ååº”åˆ°Viewä¸Š ç¼ºç‚¹ 1ã€è¿‡äºŽç®€å•çš„å›¾å½¢ç•Œé¢ä¸é€‚ç”¨ï¼Œæˆ–è¯´ç‰›åˆ€æ€é¸¡ã€‚2ã€å¯¹äºŽå¤§åž‹çš„å›¾å½¢åº”ç”¨ç¨‹åºï¼Œè§†å›¾çŠ¶æ€è¾ƒå¤šï¼ŒViewModelçš„æž„å»ºå’Œç»´æŠ¤çš„æˆæœ¬éƒ½ä¼šæ¯”è¾ƒé«˜ã€‚3ã€æ•°æ®ç»‘å®šçš„å£°æ˜Žæ˜¯æŒ‡ä»¤å¼åœ°å†™åœ¨Viewçš„æ¨¡ç‰ˆå½“ä¸­çš„ï¼Œè¿™äº›å†…å®¹æ˜¯æ²¡åŠžæ³•åŽ»æ‰“æ–­ç‚¹debugçš„ã€‚ Jetpack It helps to be familiar with software architectural patterns that separate data from the user interface, such as MVP or MVC https://developer.android.com/jetpack/docs/getting-started modules should interact NetworkBoundResource It starts by observing the database for the resource. When the entry is loaded from the database for the first time, NetworkBoundResource checks whether the result is good enough to be dispatched or that it should be re-fetched from the network. Note that both of these situations can happen at the same time, given that you probably want to show cached data while updating it from the network. https://developer.android.com/topic/libraries/architecture æž¶æž„å­¦ä¹ ä»Žcodelabå¼€å§‹å§! https://www.jianshu.com/p/19f97654c451 https://github.com/qingmei2/MVVM-Architecture https://juejin.im/post/5dafc49b6fb9a04e17209922 https://juejin.im/post/5d2be05ff265da1bd605d49a LifecycleOwnerLifecycleOwner is an interface implemented by the AppCompatActivity and Fragment classes. You can subscribe other components to owner objects which implement this interface, to observe changes to the lifecycle of the owner. To read an introductory guide to this topic, see Handling Lifecycles. https://codelabs.developers.google.com/codelabs/android-lifecycles/#1 https://mp.weixin.qq.com/s/gQhBeKA2vGAkh3Tbqn0tEA ViewModelhttps://noteforme.github.io/2020/04/06/viewmodel/ https://www.jianshu.com/p/731ca42823ee viewmodelstoreowner navigationhttps://developer.android.com/guide/navigation/ https://developer.android.com/guide/navigation/navigation-getting-started https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=..%2F..%2Findex#0 Codelab æŠ½å±‰å›¾æ ‡ä¸æ˜¾ç¤º BottomNavigationView å¯¼èˆªæ ä¼˜åŒ– recarete fragment https://medium.com/@freedom.chuks7/how-to-use-jet-pack-components-bottomnavigationview-with-navigation-ui-19fb120e3fb9 NOTICE : NavigationView each item ID is matching with fragment ID in navigation https://jiangjiwei.site/post/navigation-zhi-fragment-qie-huan/ https://github.com/lwj1994/navigation-keep-state-fragment https://github.com/STAR-ZERO/navigation-keep-fragment-sample Bottom tabå®šä½ https://stackoverflow.com/questions/50577356/android-jetpack-navigation-bottomnavigationview-with-youtube-or-instagram-like å…¨å±€å…±äº« googlesamples previously architectureMVC MVP. MVVMä¸‰ç§æž¶æž„ä»‹ç» http://www.jcodecraeer.com/a/anzhuokaifa/2017/1024/8636.html https://mp.weixin.qq.com/s/Kc1826MQ3ReMkoIWlsQGVw https://juejin.im/post/5dafc49b6fb9a04e17209922 https://juejin.im/post/5dafc49b6fb9a04e17209922#heading-13 MVP https://juejin.im/entry/5955e7166fb9a06bc23a8598 https://github.com/yaozs/YzsBaseActivity å¤šä¸ªactivityå¯¹pçš„å¤ç”¨ https://juejin.im/post/599ce8016fb9a0247e4255f4 Component https://mp.weixin.qq.com/s/8_8gGpkpO2QFNkWgSRBwIg https://www.jianshu.com/p/6a50ef1ef45c https://developer.android.com/studio/build/dependencies#duplicate_classes https://developer.android.com/studio/build/manifest-merge?hl=zh-cn merge androidmanifest åˆå¹¶ &lt;https://developer.android.com/studio/build/manifest-merge https://www.jianshu.com/p/14a822e42151 compose https://mp.weixin.qq.com/s/0mAbKEuBH5HHYa23EcWalg lifecycle https://juejin.im/post/6847902220755992589 ç»„ä»¶åŒ– æœåŠ¡ https://juejin.im/post/6884492604370026503","categories":[{"name":"Architecture","slug":"Architecture","permalink":"https://noteforme.github.io/categories/Architecture/"},{"name":"test","slug":"Architecture/test","permalink":"https://noteforme.github.io/categories/Architecture/test/"}],"tags":[],"author":"Jon"},{"title":"DesignPattern Proxy","slug":"designpattern-proxy","date":"2024-05-28T07:32:07.000Z","updated":"2024-09-15T09:49:47.777Z","comments":true,"path":"/2024/05/28/designpattern-proxy/","link":"","permalink":"https://noteforme.github.io/2024/05/28/designpattern-proxy/","excerpt":"","text":"ä¹Ÿå¯ä»¥å‚è€ƒä¸€èµ·https://jonblog.site/2024/05/31/reflection/https://jonblog.site/2024/05/28/designpattern-proxy/https://jonblog.site/2024/06/06/annotation/ Static Proxyç¼–è¯‘çš„æ—¶å€™å°±å·²ç»å­˜åœ¨Static proxies are created at compile time. You need to write the proxy class manually, and it will contain references to the methods of the original class.Key Characteristics: Compile-Time Creation: Static proxies are created at compile time, meaning you need to write the proxy class manually. Tight Coupling: Since you need to write the proxy class, thereâ€™s a tighter coupling between the proxy and the original class. Use Cases: Often used for simple scenarios where you need to add a specific behavior to a method call. Separate Proxy Class: You have to create a separate class for the proxy which implements the same interface as the target class. Java implement12345678910public interface ZyxInterface &#123; void sayHello(String name);&#125;public class ZhangYuXin implements ZyxInterface &#123; @Override public void sayHello(String name) &#123; System.out.println(&quot;Hello from zyx &quot;+ name); &#125;&#125; ä»£ç†ç±» 1234567891011121314public class ZhangYuXinProxy implements ZyxInterface &#123; private ZhangYuXin zhangYuXin; public ZhangYuXinProxy(ZhangYuXin zhangYuXin) &#123; this.zhangYuXin = zhangYuXin; &#125; @Override public void sayHello(String name) &#123; System.out.println(&quot;æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œ&quot;); zhangYuXin.sayHello(name); System.out.println(&quot;æ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ&quot;); &#125;&#125; 123ZhangYuXin zyxHello = new ZhangYuXin();ZhangYuXinProxy zhangYuXin = new ZhangYuXinProxy(zyxHello);zhangYuXin.sayHello(&quot;hello&quot;); è¿è¡Œç»“æžœ æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œHello from zyxæ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ UML ä»£ç†æ¨¡å¼ ä»£ç†ç±»ä¸Žå§”æ‰˜ç±»æœ‰åŒæ ·çš„æŽ¥å£ ä»£ç†ç±»ä¸»è¦è´Ÿè´£ä¸ºå§”æ‰˜ç±»é¢„å¤„ç†æ¶ˆæ¯ã€è¿‡æ»¤æ¶ˆæ¯ã€æŠŠæ¶ˆæ¯è½¬å‘ç»™å§”æ‰˜ç±»ï¼Œä»¥åŠäº‹åŽå¤„ç†æ¶ˆæ¯ç­‰ã€‚ ä¸€ä¸ªä»£ç†ç±»çš„å¯¹è±¡ä¸Žä¸€ä¸ªå§”æ‰˜ç±»çš„å¯¹è±¡å…³è”ï¼Œä»£ç†ç±»çš„å¯¹è±¡æœ¬èº«å¹¶ä¸çœŸæ­£å®žçŽ°æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨å§”æ‰˜ç±»çš„å¯¹è±¡çš„ç›¸å…³æ–¹æ³•ï¼Œæ¥æä¾›ç‰¹å®šçš„æœåŠ¡ã€‚ Dynamic Proxyé€šè¿‡åå°„æœºåˆ¶ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ Dynamic proxies in Java are created at runtime. They use reflection and the java.lang.reflect.Proxy class along with the InvocationHandler interface to handle method invocations. Key Characteristics: Runtime Creation: Dynamic proxies are created at runtime, which means you donâ€™t need to write separate classes for proxies. Flexibility: Since they are created at runtime, they can be more flexible and can easily adapt to changes. Use Cases: Commonly used in frameworks like Spring AOP for cross-cutting concerns (e.g., logging, transaction management). No Implementation Class Needed: You donâ€™t need to create a separate class for the proxy; you just need to provide an implementation for the InvocationHandler. Summary Dynamic Proxy: Created at runtime using java.lang.reflect.Proxy. More flexible and decoupled. No need for separate proxy classes. Static Proxy: Created at compile time by manually writing the proxy class. Tighter coupling with the target class. Requires a separate proxy class. Dynamic proxy implementationç”Ÿæˆçš„åŠ¨æ€ä»£ç†Classæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243public class DoSomeThingDynamic &#123; Object object; public DoSomeThingDynamic(Object object) &#123; this.object = object; &#125; /** * @param say éœ€è¦ä»£ç†æ‰§è¡Œçš„æŽ¥å£ç±» * @param &lt;T&gt; * @return åŠ¨æ€ä»£ç† è¿è¡Œæ—¶ç”Ÿæˆçš„ä¸€ä¸ªsayå¯¹åº”ç±»åž‹çš„ç±»ï¼Œç”¨äºŽè°ƒç”¨sayæŽ¥å£çš„æ—¶å€™ è¿è¡Œ */ public &lt;T&gt; T create(final Class&lt;T&gt; say) &#123; return (T) Proxy.newProxyInstance(say.getClassLoader(), new Class&lt;?&gt;[]&#123;say&#125;, new InvocationHandler() &#123; /** * invokeæ–¹æ³•: ä»£ç†ç±» BinInterface$0 è°ƒç”¨super.h.invoke(this, m3, new Object[]&#123;var1&#125;);å°±ä¼šè°ƒç”¨åˆ° * Object o : ä»£è¡¨ç”Ÿæˆçš„new BinInterface$0()å¯¹è±¡ï¼Œ * Method method : ä»£ç†ç±»è°ƒç”¨çš„æ–¹æ³•ï¼ŒæŠŠæ–¹æ³•ä¼ è¿›æ¥ã€‚ * Object[] args ï¼š æ–¹æ³•çš„å‚æ•° */ @Override public Object invoke(Object o, Method method, Object[] args) throws Throwable &#123; System.out.println(&quot;æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œ&quot;); /** * methodè¿™ä¸ªå‡½æ•°æ˜¯ åå°„çš„å‡½æ•° * * ç­‰ä»·äºŽ zhangYuXin.sayHello(); * similar to * object.method(arg) * * object æ˜¯ç›®æ ‡ç±»ï¼Œä¹Ÿå°±æ˜¯ new zhangYuXin() * ä¸‹é¢object ä¸èƒ½ç”¨invoke(Object o)ä¸­çš„å‚æ•°oæ›¿ä»£ã€‚ */ Object result = method.invoke(object, args); System.out.println(&quot;æ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ&quot;); return result; &#125; &#125; ); &#125;&#125; call from client12345678910111213141516171819202122232425DoSomeThingDynamic say1 = new DoSomeThingDynamic(zyxHello);ZyxInterface zyxProxy = say1.create(ZyxInterface.class);zyxProxy.sayHello(&quot;John&quot;);System.out.println(&quot;---------------------\\n&quot;);BinBin binBye = new BinBin();DoSomeThingDynamic say2 = new DoSomeThingDynamic(binBye);BinInterface bbProxy = say2.create(BinInterface.class);bbProxy.sayBye();/** * ç”Ÿæˆä»£ç†ç±»çš„ï¼Œå¹¶ä¸”è¾“å‡ºå­—èŠ‚ç  */byte[] classFile = ProxyGenerator.generateProxyClass(&quot;BinInterface$0&quot;, new Class[]&#123;ZyxInterface.class&#125;);try &#123; FileOutputStream out = new FileOutputStream( &quot;BinInterface$0.class&quot;); out.write(classFile); out.flush();&#125; catch (FileNotFoundException e) &#123; e.printStackTrace();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; BinInterface$0.class 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public final class BinInterface$1 extends Proxy implements ZyxInterface &#123; private static Method m1; private static Method m3; private static Method m2; private static Method m0; public BinInterface$1(InvocationHandler var1) throws &#123; super(var1); &#125; public final boolean equals(Object var1) throws &#123; try &#123; return (Boolean)super.h.invoke(this, m1, new Object[]&#123;var1&#125;); &#125; catch (RuntimeException | Error var3) &#123; throw var3; &#125; catch (Throwable var4) &#123; throw new UndeclaredThrowableException(var4); &#125; &#125; public final void sayHello(String var1) throws &#123; try &#123; super.h.invoke(this, m3, new Object[]&#123;var1&#125;); &#125; catch (RuntimeException | Error var3) &#123; throw var3; &#125; catch (Throwable var4) &#123; throw new UndeclaredThrowableException(var4); &#125; &#125; public final String toString() throws &#123; try &#123; return (String)super.h.invoke(this, m2, (Object[])null); &#125; catch (RuntimeException | Error var2) &#123; throw var2; &#125; catch (Throwable var3) &#123; throw new UndeclaredThrowableException(var3); &#125; &#125; public final int hashCode() throws &#123; try &#123; return (Integer)super.h.invoke(this, m0, (Object[])null); &#125; catch (RuntimeException | Error var2) &#123; throw var2; &#125; catch (Throwable var3) &#123; throw new UndeclaredThrowableException(var3); &#125; &#125; static &#123; try &#123; m1 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;equals&quot;, Class.forName(&quot;java.lang.Object&quot;)); m3 = Class.forName(&quot;pattern.proxy.xiangxue.ZyxInterface&quot;).getMethod(&quot;sayHello&quot;, Class.forName(&quot;java.lang.String&quot;)); m2 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;toString&quot;); m0 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;hashCode&quot;); &#125; catch (NoSuchMethodException var2) &#123; throw new NoSuchMethodError(var2.getMessage()); &#125; catch (ClassNotFoundException var3) &#123; throw new NoClassDefFoundError(var3.getMessage()); &#125; &#125;&#125; è¿è¡Œç»“æžœ æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œHello from zyx Johnæ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œBye Bye from BinBinæ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ https://www.bilibili.com/video/BV1ib4y1f7S1?p=10&amp;spm_id_from=pageDriverhttps://www.bilibili.com/video/BV1uQ4y1Z7gA?p=23https://juejin.cn/post/6844903520919879694https://juejin.cn/post/6844903978342301709https://time.geekbang.org/column/article/201823 Dynamic proxy principle sequenceDiagram DynamicProxyTest->>BinInterface$0 : invoke sayHello(\"hello\") BinInterface$0 ->> InvocationHandler : h.invoke(this, m3, new Object[]{var1}) Note right of InvocationHandler : ä¼ å‚è°ƒç”¨åˆ°InvocationHandlerçš„invoke InvocationHandler ->> ZhangYuXin: method.invoke(object, args) Note right of ZhangYuXin : ç±»ä¼¼äºŽ object.method(arg) or ZhangYuXin.sayHello(\"arg\") æˆ‘ä»¬ä¸‹é¢ bbProxy.sayBye(); è°ƒç”¨å¼€å§‹åˆ†æžæ•´ä¸ªæµç¨‹ bbProxy æ˜¯ç”Ÿæˆçš„ä»£ç†ç±»å¯¹è±¡,è°ƒç”¨åŽè¿›å…¥åˆ°ä»£ç†ç±»æ–¹æ³• 123456789public final void sayHello(String var1) throws &#123; try &#123; super.h.invoke(this, m3, new Object[]&#123;var1&#125;); //è¿™ä¸ªæ˜¯æ–¹æ³•çš„ä¼ å‚ï¼Œä¸æ˜¯åå°„ &#125; catch (RuntimeException | Error var3) &#123; throw var3; &#125; catch (Throwable var4) &#123; throw new UndeclaredThrowableException(var4); &#125;&#125; è°ƒç”¨ super.h.invoke(this, m3, new Object[]{var1}); super.h æ˜¯è°ƒç”¨public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)ä¼ è¿›æ¥çš„new InvocationHandler() æœ€ç»ˆè°ƒç”¨åˆ°cons.newInstance(new Object[]{h}); InvocationHandler()ä¼ å…¥æž„é€ æ–¹æ³•,ç„¶åŽè°ƒç”¨ protected Proxy(InvocationHandler h) cons.newInstance(new Object[]{h}12345678private static final Class&lt;?&gt;[] constructorParams = &#123; InvocationHandler.class &#125;;public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) &#123; final Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams); return cons.newInstance(new Object[]&#123;h&#125;); &#125; cl.getConstructor(constructorParams) æŒ‡å®šçš„æ˜¯ InvocationHandlerç±»åž‹çš„æž„é€ æ–¹æ³•, ä¹Ÿå°±æ˜¯ 1234protected Proxy(InvocationHandler h) &#123; Objects.requireNonNull(h); this.h = h;&#125; æ­£å¸¸æµç¨‹ 123456789101112131415161718@Overridepublic Object invoke(Object o, Method method, Object[] args) throws Throwable &#123; System.out.println(&quot;æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œ&quot;); /** * methodè¿™ä¸ªå‡½æ•°æ˜¯ åå°„çš„å‡½æ•° * * ç­‰ä»·äºŽ zhangYuXin.sayHello(); * similar to * object.method(arg) * * object æ˜¯ç›®æ ‡ç±»ï¼Œä¹Ÿå°±æ˜¯ new zhangYuXin() * ä¸‹é¢object ä¸èƒ½ç”¨invoke(Object o)ä¸­çš„å‚æ•°oæ›¿ä»£ã€‚ */ Object result = method.invoke(object, args); System.out.println(&quot;æ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ&quot;); return result;&#125; Object result &#x3D; method.invoke(object, args); å¼€å§‹è°ƒç”¨ä»£ç†ç±»çš„æ–¹æ³•ã€‚ 123456@Overridepublic void sayHello(String name) &#123; System.out.println(&quot;æ‹ç”µå½±å‰çš„å‡†å¤‡å·¥ä½œ&quot;); zhangYuXin.sayHello(name); System.out.println(&quot;æ‹ç”µå½±åŽçš„æ”¶å°¾å·¥ä½œ&quot;);&#125; Simulate Jdkthis video write code simulate JDK dynamic proxy https://www.bilibili.com/video/BV1Ve411o7WM simple123456789101112131415161718192021222324252627282930313233public class ProxyDog implements Target&#123; InvocationHandler h; public ProxyDog(InvocationHandler h) &#123; this.h = h; &#125; @Override public void eat() &#123; h.invoke(); &#125; @Override public void drink() &#123; h.invoke(); &#125;&#125; /** * stimulate Jdk dynamic proxy æ–¹å¼1 */ ProxyDog proxyDog = new ProxyDog(new InvocationHandler() &#123; @Override public void invoke() &#123; //enhancement feature System.out.println(&quot;before&quot;); new TargetDog().eat(); &#125; &#125;); proxyDog.eat(); proxyDog.drink(); //ä»Žè¿™é‡Œçœ‹ï¼Œ è°ƒç”¨ drink()åŽï¼Œè¿˜æ˜¯è°ƒç”¨äº†eat() è¿™ç§æ–¹å¼ è°ƒç”¨ drink()åŽï¼Œæ²¡æ³•åŒºåˆ†ï¼Œè°ƒç”¨drink()ï¼Œ è¿˜æ˜¯è°ƒç”¨äº†eat() simulate jdkæ¨¡æ‹ŸjdkåŠ¨æ€ä»£ç†ï¼ŒInvocationHandleræ–¹æ³•æ˜¯è‡ªå·±çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354interface InvocationHandler &#123; void invoke(Method method,Object[] args);&#125;public class ProxyDog implements Target &#123; InvocationHandler h; public ProxyDog(InvocationHandler h) &#123; this.h = h; &#125; static Method eat; static Method drink; static &#123; try &#123; eat = Target.class.getMethod(&quot;eat&quot;); drink = Target.class.getMethod(&quot;drink&quot;); &#125; catch (NoSuchMethodException e) &#123; throw new RuntimeException(e); &#125; &#125; @Override public void eat() &#123; h.invoke(eat, new Object[0]); &#125; @Override public void drink() &#123; h.invoke(drink, new Object[0]); &#125;&#125; ProxyDog proxyDog = new ProxyDog(new InvocationHandler() &#123; @Override public void invoke(Method method, Object[] args) &#123; //enhancement feature System.out.println(&quot;before&quot;);// new TargetDog().eat(); try &#123; method.invoke(new TargetDog(),args); &#125; catch (IllegalAccessException e) &#123; throw new RuntimeException(e); &#125; catch (InvocationTargetException e) &#123; throw new RuntimeException(e); &#125; &#125; &#125;); proxyDog.eat(); proxyDog.drink(); simulate with jdk InvocationHandlerä¸‹é¢çš„åšæ³•ä½¿ç”¨Jdkè‡ªå¸¦çš„InvocationHandler 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class ProxyDog implements Target &#123; InvocationHandler h; public ProxyDog(InvocationHandler h) &#123; this.h = h; &#125; static Method eat; static Method drink; static &#123; try &#123; eat = Target.class.getMethod(&quot;eat&quot;); drink = Target.class.getMethod(&quot;drink&quot;); &#125; catch (NoSuchMethodException e) &#123; throw new RuntimeException(e); &#125; &#125; @Override public void eat() &#123; try &#123; h.invoke(this,eat, new Object[0]); &#125; catch (Throwable e) &#123; throw new RuntimeException(e); &#125; &#125; @Override public void drink() &#123; try &#123; h.invoke(this,drink, new Object[0]); &#125; catch (Throwable e) &#123; throw new RuntimeException(e); &#125; &#125;&#125; ProxyDog proxyDog = new ProxyDog(new InvocationHandler() &#123; @Override public Object invoke(Object proxy, Method method, Object[] args) &#123; //enhancement feature System.out.println(&quot;before&quot;);// new TargetDog().eat(); try &#123; return method.invoke(new TargetDog(), args); &#125; catch (IllegalAccessException e) &#123; throw new RuntimeException(e); &#125; catch (InvocationTargetException e) &#123; throw new RuntimeException(e); &#125; &#125; &#125;); proxyDog.eat(); proxyDog.drink(); ä»Žä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼ŒMethod eat &#x3D; Target.class.getMethod(â€œeatâ€); classä¸­çš„Method,å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ Dynamic Constructor analysisfinal Constructor&lt;?&gt; cons &#x3D; cl.getConstructor(constructorParams); kotlin å§”æ‰˜çš„ä½œç”¨1234567891011121314interface Base &#123; fun print()&#125;class BaseImpl(val x: Int) : Base &#123; override fun print() &#123; print(x) &#125;&#125;class Derived(b: Base) : Base by b // kotlinè¿™é‡Œè‡ªåŠ¨ç”Ÿæˆäº†javaä»£ç†ç±»fun main() &#123; val b = BaseImpl(10) Derived(b).print()&#125; åç¼–è¯‘åŽçš„ä»£ç  1234567891011121314151617181920212223242526272829303132// BaseImpl.javapackage test;public final class BaseImpl implements Base &#123; private final int x; public void print() &#123; int var1 = this.x; System.out.print(var1); &#125; public final int getX() &#123; return this.x; &#125; public BaseImpl(int x) &#123; this.x = x; &#125;&#125;public final class Derived implements Base &#123; // ç”Ÿæˆçš„ä»£ç†ç±» private final Base $$delegate_0; public Derived(@NotNull Base b) &#123; Intrinsics.checkNotNullParameter(b, &quot;b&quot;); super(); this.$$delegate_0 = b; &#125; public void print() &#123; this.$$delegate_0.print(); &#125;&#125;","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW CONCURRENCY","slug":"interview-concurrency","date":"2024-05-27T06:37:22.000Z","updated":"2024-09-15T09:52:07.305Z","comments":true,"path":"/2024/05/27/interview-concurrency/","link":"","permalink":"https://noteforme.github.io/2024/05/27/interview-concurrency/","excerpt":"","text":"https://noteforme.github.io/tags/concurrency/ çº¿ç¨‹åŸºç¡€Javaçº¿ç¨‹æ¨¡åž‹ ç”¨æˆ·çº¿ç¨‹ä¸Žå†…æ ¸çº§çº¿ç¨‹ å¹¶å‘ä¸Žå¹¶è¡Œ å¤šçº¿ç¨‹æ¨¡åž‹ https://crazyfzw.github.io/2018/06/19/thred-model/ è°ˆè°ˆå¯¹å¤šçº¿ç¨‹çš„ç†è§£ åœ¨Androidä¸­ä¸€ä¸ªåº”ç”¨ç¨‹åºå°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ªåº”ç”¨ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸”ä¸ºè¿™ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ªä¸»çº¿ç¨‹â€“UIçº¿ç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥è¿è¡ŒMainActivityã€‚ çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„å­é›†ï¼Œçº¿ç¨‹å¯ä»¥å¹¶è¡Œçš„æ‰§è¡Œä¸åŒä»»åŠ¡ï¼Œæ‰€æœ‰çš„çº¿ç¨‹å…±äº«åŒä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œè¿™å°±ä¸ºçº¿ç¨‹é—´é€šä¿¡æä¾›äº†åŸºç¡€ï¼Œçº¿ç¨‹æœ‰äº”ç§çŠ¶æ€ï¼šåˆ›å»ºï¼Œå°±ç»ªï¼Œè¿è¡Œï¼Œé˜»å¡žï¼Œæ­»äº¡ã€‚ å¤šçº¿ç¨‹æœ‰ä»€ä¹ˆè¦æ³¨æ„çš„é—®é¢˜ï¼Ÿå¹¶å‘é—®é¢˜ï¼Œå®‰å…¨é—®é¢˜ï¼Œæ•ˆçŽ‡é—®é¢˜ã€‚ è°ˆè°ˆä½ å¯¹å¹¶å‘ç¼–ç¨‹çš„ç†è§£å¹¶ä¸¾ä¾‹è¯´æ˜Ž è°ˆè°ˆä½ å¯¹å¤šçº¿ç¨‹åŒæ­¥æœºåˆ¶çš„ç†è§£ï¼Ÿ ? è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« åç¨‹å‘¢ è¿›ç¨‹ â€‹ æ˜¯ç³»ç»Ÿç»™ç¨‹åºåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰å”¯ä¸€çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹. çº¿ç¨‹ çº¿ç¨‹æ˜¯æ‰§è¡Œæ“ä½œçš„åŸºæœ¬å•ä½ï¼ŒJVMç»“æž„ä¸­å…±äº« Method Area ,Heap Area â€‹ https://blog.csdn.net/mxsgoden/article/details/8821936 â€‹ https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html è¿›ç¨‹ : æœ‰å¾ˆå¤§çš„ç‹¬ç«‹æ€§ çº¿ç¨‹ : æ‰€æœ‰çº¿ç¨‹éƒ½æœ‰å®Œå…¨ä¸€æ ·çš„åœ°å€ç©ºé—´,æ„å‘³ç€å®ƒä»¬ä¹Ÿå…±äº«åŒæ ·çš„å…¨å±€å˜é‡ã€‚ç”±äºŽçº¿ç¨‹å¯ä»¥è®¿é—®è¿›ç¨‹åœ°å€ç©ºé—´çš„æ¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¯»ã€å†™ç”šè‡³æ¸…é™¤å¦ä¸€ä¸ªçº¿ç¨‹çš„å †æ ˆã€‚ æ¯ä¸ªè¿›ç¨‹ä¸­çš„å†…å®¹ : åœ°å€ç©ºé—´ å…¨å±€å˜é‡ æ‰“å¼€æ–‡ä»¶ å­è¿›ç¨‹ å³å°†å‘ç”Ÿçš„å®šæ—¶å™¨ ä¿¡å·ä¸Žä¿¡å·å¤„ç†ç¨‹åº æ¯ä¸ªçº¿ç¨‹ä¸­çš„å†…å®¹ï¼šç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨ã€å †æ ˆã€çŠ¶æ€. åç¨‹? â€‹ åç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œåç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›žæ¥çš„ æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œå³æ‰€æœ‰å±€éƒ¨çŠ¶æ€çš„ä¸€ä¸ªç‰¹å®šç»„åˆï¼‰ï¼Œæ¯æ¬¡è¿‡ç¨‹é‡å…¥æ—¶ï¼Œå°±ç›¸å½“äºŽè¿›å…¥ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€ï¼Œæ¢ç§è¯´æ³•ï¼šè¿›å…¥ä¸Šä¸€æ¬¡ç¦»å¼€æ—¶æ‰€å¤„é€»è¾‘æµçš„ä½ç½®ã€‚ åç¨‹çš„å¥½å¤„: æ— éœ€çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ æ— éœ€åŽŸå­æ“ä½œé”å®šåŠåŒæ­¥çš„å¼€é”€ æ–¹ä¾¿åˆ‡æ¢æŽ§åˆ¶æµï¼Œç®€åŒ–ç¼–ç¨‹æ¨¡åž‹ â€‹ ä¸ºä»€ä¹ˆè¦æœ‰çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ä»…ä»…ç”¨è¿›ç¨‹ï¼Ÿ æ€Žä¹ˆåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ ç»§æ‰¿Threadç±»åˆ›å»ºçº¿ç¨‹ç±». é€šè¿‡RunnableæŽ¥å£åˆ›å»ºçº¿ç¨‹ç±» é€šè¿‡Callableå’ŒFutureTaskåˆ›å»ºçº¿ç¨‹ 1234567891011121314151617181920212223242526272829public class CallableThreadTest implements Callable&lt;Integer&gt; &#123; public static void main(String[] args) &#123; CallableThreadTest ctt = new CallableThreadTest(); FutureTask&lt;Integer&gt; ft = new FutureTask&lt;&gt;(ctt); for (int i = 0; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + &quot; çš„å¾ªçŽ¯å˜é‡içš„å€¼&quot; + i); if (i == 20) &#123; new Thread(ft, &quot;æœ‰è¿”å›žå€¼çš„çº¿ç¨‹&quot;).start(); &#125; &#125; try &#123; System.out.println(&quot;å­çº¿ç¨‹çš„è¿”å›žå€¼ï¼š&quot; + ft.get()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125; @Override public Integer call() throws Exception &#123; int i = 0; for (; i &lt; 100; i++) &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + i); &#125; return i; &#125;&#125; çº¿ç¨‹å¦‚ä½•å…³é—­ï¼Ÿâ€‹ æœ€æ­£ç¡®çš„åœæ­¢çº¿ç¨‹çš„æ–¹å¼æ˜¯ä½¿ç”¨ interrupt,å’Œæ¡ä»¶æ»¡è¶³. 123while (!Thread.currentThread().isInterrupted() &amp;&amp; cout&lt;1000) &#123; do more work&#125; åœ¨Javaä¸­waitå’Œsleepæ–¹æ³•çš„ä¸åŒ1231. sleepä½œç”¨Threadä¸Šï¼Œwaitä½œç”¨objectä¸Š2. sleepä¸ä¼šé‡Šæ”¾é”3. sleepå¯ä»¥åœ¨ä»»ä½•ä»£ç å—ã€‚waitå¿…é¡»åœ¨åŒæ­¥æ–¹æ³•ï¼ŒæŒæœ‰é”ä¸­è¿è¡Œã€‚ â€‹ è°ˆè°ˆwait&#x2F;notifyå…³é”®å­—çš„ç†è§£ è°ƒç”¨ä¹‹å‰æŒæœ‰å¯¹è±¡é” wait ,çº¿ç¨‹è¿›å…¥ waitingçŠ¶æ€ï¼Œé‡Šæ”¾å¯¹è±¡é” notify,å”¤é†’å¤„äºŽwaitingçŠ¶æ€çš„çº¿ç¨‹ã€‚ https://howtodoinjava.com/java/multi-threading/wait-notify-and-notifyall-methods/ å¦‚ä½•æŽ§åˆ¶æŸä¸ªæ–¹æ³•å…è®¸å¹¶å‘è®¿é—®çº¿ç¨‹çš„ä¸ªæ•°ï¼Ÿâ€‹ ä¿¡å·é‡ ä»€ä¹ˆå¯¼è‡´çº¿ç¨‹é˜»å¡žï¼Ÿ é˜»å¡žæŒ‡çš„æ˜¯æš‚åœä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œä»¥ç­‰å¾…æŸä¸ªæ¡ä»¶å‘ç”Ÿã€‚ Thread.sleep t.join ç­‰å¾…è¾“å…¥ çº¿ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªå¯¹è±¡çš„wait()æ–¹æ³•ï¼Œç›´æŽ¥è¿›å…¥é˜»å¡žçŠ¶æ€ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œnotify()æˆ–è€…notifyAll()æ–¹æ³•ã€‚ å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ121. ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ç±»ã€‚2. ä½¿ç”¨synchronizedåŒæ­¥ä»£ç å—ï¼Œæˆ–è€…ç”¨Locké”ã€‚ å¦‚ä½•å®žçŽ°çº¿ç¨‹åŒæ­¥ï¼Ÿ121. Synchronizedä¿®é¥°æ•´ä¸ªæ–¹æ³•æˆ–ä»£ç å—ã€‚2. Lock ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¦æ±‚å†™æˆ–è€…è¯»ï¼Œèƒ½ä¸èƒ½å®žçŽ°ï¼Ÿå¦‚ä½•é˜²æ­¢è¿›ç¨‹çš„åŒæ­¥ï¼Ÿâ€‹ å¯ä»¥è¿›è¡ŒåŒæ—¶è¯»å†™ï¼Œä½†ä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼Œå¿…é¡»è¦é’ˆå¯¹è¿›ç¨‹è®¿é—®çš„å…±äº«ä¸´ç•ŒåŒºè¿›è¡Œå¤„ç†ï¼›ä¸¤ä¸ªè¿›ç¨‹ä¸èƒ½åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒºï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®é”™ä¹±ã€‚å¸¸è§çš„å¤„ç†æ–¹å¼æœ‰ï¼šä¿¡å·é‡ã€ç®¡ç¨‹ã€ä¼šåˆã€åˆ†å¸ƒå¼ç³»ç»Ÿ ä¿¡å·é‡ ä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå®ƒåªæ”¯æŒ2ç§æ“ä½œï¼šPæ“ä½œï¼ˆè¿›å…¥ä¸´ç•ŒåŒºï¼‰å’ŒVæ“ä½œï¼ˆé€€å‡ºä¸´ç•ŒåŒºï¼‰ã€‚å‡è®¾æœ‰ä¿¡å·é‡SVï¼Œåˆ™å¯¹å®ƒçš„Pã€Væ“ä½œå«ä¹‰å¦‚ä¸‹ï¼š P(SV)ï¼Œå¦‚æžœSVçš„å€¼å¤§äºŽ0ï¼Œæ„å‘³ç€å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºï¼Œå°±å°†å®ƒå‡1ï¼›å¦‚æžœSVçš„å€¼ä¸º0ï¼Œæ„å‘³ç€åˆ«çš„è¿›ç¨‹æ­£åœ¨è®¿é—®ä¸´ç•ŒåŒºï¼Œåˆ™æŒ‚èµ·å½“å‰è¿›ç¨‹çš„æ‰§è¡Œï¼› V(SV)ï¼Œå½“å‰è¿›ç¨‹é€€å‡ºä¸´ç•ŒåŒºæ—¶ï¼Œå¦‚æžœæœ‰å…¶ä»–è¿›ç¨‹å› ä¸ºç­‰å¾…SVè€ŒæŒ‚èµ·ï¼Œåˆ™å”¤é†’ä¹‹ï¼›å¦‚æžœæ²¡æœ‰ï¼Œåˆ™å°†SVåŠ 1ï¼Œä¹‹åŽå†é€€å‡ºä¸´ç•ŒåŒºã€‚ ç®¡ç¨‹ æå‡ºåŽŸå› ï¼šä¿¡å·é‡æœºåˆ¶ä¸è¶³ï¼Œç¨‹åºç¼–å†™å›°éš¾ã€æ˜“å‡ºé”™ 12 æ–¹æ¡ˆï¼šåœ¨ç¨‹åºè®¾è®¡è¯­è¨€ä¸­å¼•å…¥ä¸€ç§é«˜çº§ç»´æŠ¤æœºåˆ¶ å®šä¹‰ï¼šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å—ï¼›æœ‰ä¸€ä¸ªåå­—ï¼›ç”±å…³äºŽå…±äº«èµ„æºçš„æ•°æ®ç»“æž„åŠåœ¨å…¶ä¸Šæ“ä½œä¸Šçš„ä¸€ç»„è¿‡ç¨‹ç»„æˆã€‚è¿›ç¨‹åªèƒ½é€šè¿‡è°ƒç”¨ç®¡ç¨‹ä¸­çš„è¿‡ç¨‹é—´æŽ¥è®¿é—®ç®¡ç¨‹ä¸­çš„æ•°æ®ç»“æž„ 1ï¼‰äº’æ–¥ï¼šç®¡ç¨‹æ˜¯äº’æ–¥è¿›å…¥çš„ ä¸ºäº†ä¿è¯æ•°æ®ç»“æž„çš„æ•°æ®å®Œæ•´æ€§ç®¡ç¨‹çš„äº’æ–¥ç”±ç¼–è¯‘å™¨è´Ÿè´£ä¿è¯çš„ï¼Œæ˜¯ä¸€ç§è¯­è¨€æœºåˆ¶ 2ï¼‰åŒæ­¥ï¼šè®¾ç½®æ¡ä»¶å˜é‡åŠç­‰å¾…å”¤é†’æ“ä½œä»¥è§£å†³åŒæ­¥é—®é¢˜å¯ä»¥è®©ä¸€ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹åœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…ï¼ˆå…ˆé‡Šæ”¾ç®¡ç¨‹çš„ç®¡ç†æƒï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘é€ä¿¡å·å°†ç­‰å¾…åœ¨æ¡ä»¶å˜é‡ä¸Šçš„è¿›ç¨‹çº¿ç¨‹å”¤é†’ é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/72f5017c6649 çº¿ç¨‹é—´æ“ä½œListâ€‹ æ€Žä¹ˆä¸­æ­¢ä¸€ä¸ªçº¿ç¨‹ï¼ŒThread.Interuptä¸€å®šæœ‰æ•ˆå—ï¼Ÿä¸ä¸€å®š https://juejin.cn/post/6844903896339447815#heading-6 çº¿ç¨‹å®‰å…¨ é”è®²ä¸€ä¸‹javaä¸­çš„åŒæ­¥çš„æ–¹æ³• ç»“æžœé”ä¸€èµ· synchronized waitå’Œnotify volatile a. volatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶b.ä½¿ç”¨volatileä¿®é¥°åŸŸç›¸å½“äºŽå‘Šè¯‰è™šæ‹Ÿæœºè¯¥åŸŸå¯èƒ½ä¼šè¢«å…¶ä»–çº¿ç¨‹æ›´æ–°c.å› æ­¤æ¯æ¬¡ä½¿ç”¨è¯¥åŸŸå°±è¦é‡æ–°è®¡ç®—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼d.volatileä¸ä¼šæä¾›ä»»ä½•åŽŸå­æ“ä½œï¼Œå®ƒä¹Ÿä¸èƒ½ç”¨æ¥ä¿®é¥°finalç±»åž‹çš„å˜é‡ synchronizeçš„åŽŸç† åŽŸå­æ€§ï¼šç¡®ä¿çº¿ç¨‹äº’æ–¥çš„è®¿é—®åŒæ­¥ä»£ç ï¼› å¯è§æ€§ï¼šä¿è¯å…±äº«å˜é‡çš„ä¿®æ”¹èƒ½å¤ŸåŠæ—¶å¯è§ï¼Œå…¶å®žæ˜¯é€šè¿‡Javaå†…å­˜æ¨¡åž‹ä¸­çš„ â€œå¯¹ä¸€ä¸ªå˜é‡unlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»è¦åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼›å¦‚æžœå¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œlockæ“ä½œï¼Œåˆ™å°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“Žä½¿ç”¨æ­¤å˜é‡å‰ï¼Œéœ€è¦é‡æ–°ä»Žä¸»å†…å­˜ä¸­loadæ“ä½œæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡å€¼â€ æ¥ä¿è¯çš„ï¼› æœ‰åºæ€§ï¼šæœ‰æ•ˆè§£å†³é‡æŽ’åºé—®é¢˜ï¼Œå³ â€œä¸€ä¸ªunlockæ“ä½œå…ˆè¡Œå‘ç”Ÿ(happen-before)äºŽåŽé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œâ€ï¼› è°ˆè°ˆå¯¹Synchronizedå…³é”®å­—ï¼Œç±»é”ï¼Œæ–¹æ³•é”ï¼Œé‡å…¥é”çš„ç†è§£ å½“synchronizedä½œç”¨äºŽæ™®é€šæ–¹æ³•æ˜¯ï¼Œé”å¯¹è±¡æ˜¯thisï¼› å½“synchronizedä½œç”¨äºŽé™æ€æ–¹æ³•æ˜¯ï¼Œé”å¯¹è±¡æ˜¯å½“å‰ç±»çš„Classå¯¹è±¡ï¼› å½“synchronizedä½œç”¨äºŽä»£ç å—æ—¶ï¼Œé”å¯¹è±¡æ˜¯synchronized(obj)ä¸­çš„è¿™ä¸ªobjã€‚ static synchronized æ–¹æ³•çš„å¤šçº¿ç¨‹è®¿é—®å’Œä½œç”¨ä¹Ÿå°±æ˜¯ä¸¤ä¸ªçš„åŒºåˆ«äº†,ä¹Ÿå°±æ˜¯synchronizedç›¸å½“äºŽthis.synchronizedï¼Œè€Œstatic synchronizedç›¸å½“äºŽSomething.synchronizedï¼Œå®ƒå¯ä»¥å¯¹ç±»çš„æ‰€æœ‰å¯¹è±¡å®žä¾‹èµ·ä½œç”¨ synchronizedä¸ŽLockçš„åŒºåˆ«Lockæ”¯æŒçš„åŠŸèƒ½: å…¬å¹³é”ï¼šSynchronizedæ˜¯éžå…¬å¹³é”ï¼ŒReentrantLockæ”¯æŒå…¬å¹³é”ï¼Œé»˜è®¤éžå…¬å¹³é” å¯ä¸­æ–­é”ï¼šReentrantLockæä¾›äº†lockInterruptiblyï¼ˆï¼‰çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸­æ–­äº‰å¤ºé”çš„æ“ä½œï¼ŒæŠ¢é”çš„æ—¶å€™ä¼šcheckæ˜¯å¦è¢«ä¸­æ–­ï¼Œä¸­æ–­ç›´æŽ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé€€å‡ºæŠ¢é”ã€‚è€ŒSynchronizedåªæœ‰æŠ¢é”çš„è¿‡ç¨‹ï¼Œä¸å¯å¹²é¢„ï¼Œç›´åˆ°æŠ¢åˆ°é”ä»¥åŽï¼Œæ‰å¯ä»¥ç¼–ç æŽ§åˆ¶é”çš„é‡Šæ”¾ã€‚ å¿«é€Ÿåé¦ˆé”ï¼šReentrantLockæä¾›äº†trylockï¼ˆï¼‰ å’Œ trylockï¼ˆtryTimesï¼‰çš„åŠŸèƒ½ï¼Œä¸ç­‰å¾…æˆ–è€…é™å®šæ—¶é—´ç­‰å¾…èŽ·å–é”ï¼Œæ›´çµæ´»ã€‚å¯ä»¥é¿å…æ­»é”çš„å‘ç”Ÿã€‚ è¯»å†™é”ï¼šReentrantReadWriteLockç±»å®žçŽ°äº†è¯»å†™é”çš„åŠŸèƒ½ï¼Œç±»ä¼¼äºŽMysqlï¼Œé”è‡ªèº«ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¯»é”å¯ä»¥å¹¶å‘çš„èŽ·å–ï¼Œå†™é”åªèƒ½ç‹¬å ã€‚è€Œsynchronizedå…¨æ˜¯ç‹¬å é” Conditionï¼šReentrantLockæä¾›äº†æ¯”Syncæ›´ç²¾å‡†çš„çº¿ç¨‹è°ƒåº¦å·¥å…·ï¼ŒConditionï¼Œä¸€ä¸ªlockå¯ä»¥æœ‰å¤šä¸ªConditionï¼Œæ¯”å¦‚åœ¨ç”Ÿäº§æ¶ˆè´¹çš„ä¸šåŠ¡ä¸‹ï¼Œä¸€ä¸ªé”é€šè¿‡æŽ§åˆ¶ç”Ÿäº§Conditionå’Œæ¶ˆè´¹Conditionç²¾å‡†æŽ§åˆ¶ã€‚ https://www.jianshu.com/p/09d5ba4bfb7a ReentrantLockçš„å†…éƒ¨å®žçŽ°æ˜¾å¼é”ReentrantLockå’ŒåŒæ­¥å·¥å…·ç±»çš„å®žçŽ°åŸºç¡€éƒ½æ˜¯AQS (AbstractQueuedSynchronizer).AQSå†…éƒ¨æœ‰ä¸€æ¡åŒå‘çš„é˜Ÿåˆ—å­˜æ”¾ç­‰å¾…çº¿ç¨‹ï¼ŒèŠ‚ç‚¹æ˜¯Nodeå¯¹è±¡ã€‚æ¯ä¸ªNodeç»´æŠ¤äº†çº¿ç¨‹ã€å‰åŽNodeçš„æŒ‡é’ˆå’Œç­‰å¾…çŠ¶æ€ç­‰å‚æ•°ã€‚ ReentrantLockæ˜¯å¯é‡å…¥é”ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤šæ¬¡èŽ·å–é”ï¼Œæ¯èŽ·å–ä¸€æ¬¡å°±ä¼šè¿›è¡Œä¸€æ¬¡è®¡æ•°ï¼Œè§£é”çš„æ—¶å€™å°±ä¼šé€’å‡è¿™ä¸ªè®¡æ•°ï¼Œç›´åˆ°è®¡æ•°å˜ä¸º0ã€‚ å®ƒæœ‰ä¸¤ç§å®žçŽ°ï¼Œä¸€ç§æ˜¯å…¬å¹³é”ï¼Œä¸€ç§æ˜¯éžå…¬å¹³é”ï¼Œ lockåŽŸç†æ•´ä½“æ¥çœ‹Lockä¸»è¦æ˜¯é€šè¿‡ä¸¤ä¸ªä¸œè¥¿æ¥å®žçŽ°çš„åˆ†åˆ«æ˜¯CASå’ŒAQS(AbstractQueuedSynchronizer)ã€‚é€šè¿‡åŠ é”å’Œè§£é”çš„è¿‡ç¨‹æ¥åˆ†æžé”çš„å®žçŽ°ã€‚ ä¸€ã€æ•´ä½“æ¦‚è¿°æµç¨‹ è¯»å–è¡¨ç¤ºé”çŠ¶æ€çš„å˜é‡ å¦‚æžœè¡¨ç¤ºçŠ¶æ€çš„å˜é‡çš„å€¼ä¸º0ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å°è¯•å°†å˜é‡å€¼è®¾ç½®ä¸º1ï¼ˆé€šè¿‡CASæ“ä½œå®Œæˆï¼‰ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å°†è¡¨ç¤ºçŠ¶æ€çš„å˜é‡å€¼ç”±0è®¾ç½®æˆ1æ—¶ï¼Œä»…ä¸€ä¸ªçº¿ç¨‹èƒ½æˆåŠŸï¼Œå…¶å®ƒçº¿ç¨‹éƒ½ä¼šå¤±è´¥ã€‚å¤±è´¥åŽè¿›å…¥é˜Ÿåˆ—è‡ªæ—‹è½¬å¹¶é˜»å¡žå½“å‰çº¿ç¨‹ã€‚ 2.1 è‹¥æˆåŠŸï¼Œè¡¨ç¤ºèŽ·å–äº†é”ï¼Œ 2.1.1 å¦‚æžœè¯¥çº¿ç¨‹ï¼ˆæˆ–è€…è¯´èŠ‚ç‚¹ï¼‰å·²ä½äºŽåœ¨é˜Ÿåˆ—ä¸­ï¼Œåˆ™å°†å…¶å‡ºåˆ—ï¼ˆå¹¶å°†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åˆ™å˜æˆäº†é˜Ÿåˆ—çš„å¤´èŠ‚ç‚¹ï¼‰ 2.1.2 å¦‚æžœè¯¥çº¿ç¨‹æœªå…¥åˆ—ï¼Œåˆ™ä¸ç”¨å¯¹é˜Ÿåˆ—è¿›è¡Œç»´æŠ¤ 2.1.3 ç„¶åŽå½“å‰çº¿ç¨‹ä»Žlockæ–¹æ³•ä¸­è¿”å›žï¼Œå¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ã€‚ 2.2 è‹¥å¤±è´¥ï¼Œåˆ™å½“å‰çº¿ç¨‹å°†è‡ªèº«æ”¾å…¥ç­‰å¾…ï¼ˆé”çš„ï¼‰é˜Ÿåˆ—ä¸­å¹¶é˜»å¡žè‡ªèº«ï¼Œæ­¤æ—¶çº¿ç¨‹ä¸€ç›´è¢«é˜»å¡žåœ¨lockæ–¹æ³•ä¸­ï¼Œæ²¡æœ‰ä»Žè¯¥æ–¹æ³•ä¸­è¿”å›žï¼ˆè¢«å”¤é†’åŽä»ç„¶åœ¨lockæ–¹æ³•ä¸­ï¼Œå¹¶ä»Žä¸‹ä¸€æ¡è¯­å¥ç»§ç»­æ‰§è¡Œï¼Œè¿™é‡Œåˆä¼šå›žåˆ°ç¬¬1æ­¥é‡æ–°å¼€å§‹ï¼‰ã€‚ å¦‚æžœè¡¨ç¤ºçŠ¶æ€çš„å˜é‡çš„å€¼ä¸º1ï¼Œé‚£ä¹ˆå°†å½“å‰çº¿ç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œç„¶åŽå°†è‡ªèº«é˜»å¡žhttps://blog.csdn.net/liyantianmin/article/details/54673109 æ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ï¼Ÿ äº’æ–¥æ¡ä»¶: æŒ‡çº¿ç¨‹å¯¹å·±ç»èŽ·å–åˆ°çš„èµ„æºè¿›è¡ŒæŽ’å®ƒæ€§ä½¿ç”¨ ï¼Œå³è¯¥èµ„æºåŒæ—¶åªç”± ä¸€ä¸ªçº¿ç¨‹å ç”¨ã€‚å¦‚æžœ æ­¤æ—¶ è¿˜æœ‰å…¶ ä»– çº¿ç¨‹è¯·æ±‚èŽ·å–è¯¥èµ„æº ï¼Œåˆ™ è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æº çš„ çº¿ç¨‹é‡Šæ”¾è¯¥èµ„æºã€‚ è¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶ : æŒ‡ä¸€ä¸ªçº¿ç¨‹å·±ç»æŒæœ‰äº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œæ–°èµ„æºå·±è¢«å…¶ ä»– çº¿ç¨‹å æœ‰ï¼Œæ‰€ ä»¥ å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ž ï¼Œä½† é˜»å¡ž çš„åŒæ—¶ å¹¶ä¸é‡Šæ”¾è‡ª å·±å·±ç»èŽ·å–çš„èµ„æºã€‚ ä¸å¯å‰¥å¤ºæ¡ä»¶ : æŒ‡çº¿ç¨‹èŽ·å–åˆ°çš„èµ„æºåœ¨è‡ªå·±ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹æŠ¢å  ï¼Œ åªæœ‰åœ¨è‡ªå·±ä½¿ç”¨å®Œ æ¯•åŽæ‰ ç”± è‡ª å·±é‡Šæ”¾è¯¥èµ„æºã€‚ çŽ¯è·¯ç­‰å¾…æ¡ä»¶ : æŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹â†’èµ„æºçš„çŽ¯å½¢é“¾ ï¼Œå³çº¿ç¨‹é›†åˆ æ€Žä¹ˆé¿å…æ­»é”ï¼Ÿè¯·æ±‚å¹¶æŒæœ‰å’ŒçŽ¯è·¯ç­‰å¾…æ¡ä»¶æ˜¯å¯ ä»¥è¢«ç ´å. synchronizedæ˜¯å…¬å¹³é”è¿˜æ˜¯éžå…¬å¹³é”,ReteranLockæ˜¯å…¬å¹³é”å—ï¼Ÿæ˜¯æ€Žä¹ˆå®žçŽ°çš„ synchronizedåªèƒ½æ˜¯éžå…¬å¹³é”ã€‚ è€ŒReentrantLockå¯ä»¥å®žçŽ°å…¬å¹³é”å’Œéžå…¬å¹³é”ä¸¤ç§ã€‚ å…¬å¹³é”çš„å…¬å¹³çš„å«ä¹‰åœ¨äºŽå¦‚æžœçº¿ç¨‹çŽ°åœ¨æ‹¿ä¸åˆ°è¿™æŠŠé”ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±éƒ½ä¼šè¿›å…¥ç­‰å¾…ï¼Œå¼€å§‹æŽ’é˜Ÿï¼Œåœ¨ç­‰å¾…é˜Ÿåˆ—é‡Œç­‰å¾…æ—¶é—´é•¿çš„çº¿ç¨‹ä¼šä¼˜å…ˆæ‹¿åˆ°è¿™æŠŠé”ï¼Œæœ‰å…ˆæ¥å…ˆå¾—çš„æ„æ€ã€‚è€Œéžå…¬å¹³é”å°±ä¸é‚£ä¹ˆâ€œå®Œç¾Žâ€äº†ï¼Œå®ƒä¼šåœ¨ä¸€å®šæƒ…å†µä¸‹ï¼Œå¿½ç•¥æŽ‰å·²ç»åœ¨æŽ’é˜Ÿçš„çº¿ç¨‹ï¼Œå‘ç”Ÿæ’é˜ŸçŽ°è±¡ synchronizedè·ŸReentranLockæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿéƒ½æ˜¯åŠ é”æ–¹å¼åŒæ­¥ï¼Œè€Œä¸”éƒ½æ˜¯é˜»å¡žå¼çš„åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å¦‚æžœä¸€ä¸ªçº¿ç¨‹èŽ·å¾—äº†å¯¹è±¡é”ï¼Œè¿›å…¥äº†åŒæ­¥å—ï¼Œå…¶ä»–è®¿é—®è¯¥åŒæ­¥å—çš„çº¿ç¨‹éƒ½å¿…é¡»é˜»å¡žåœ¨åŒæ­¥å—å¤–é¢ç­‰å¾… synchronized è‡ªåŠ¨é‡Šæ”¾é”,åªæœ‰éžå…¬å¹³é”ã€‚éƒ½æ˜¯å¯é‡å…¥çš„ ReentrantLock æ‰‹åŠ¨é‡Šæ”¾é” å¯¹è±¡é”å’Œç±»é”æ˜¯å¦ä¼šäº’ç›¸å½±å“ï¼Ÿä¸ä¼šç›¸äº’å½±å“ ç±»é” åœ¨ä»£ç ä¸­çš„æ–¹æ³•ä¸ŠåŠ äº†staticå’Œsynchronizedçš„é”ï¼Œæˆ–è€…synchronized(xxx.classï¼‰çš„ä»£ç æ®µ å¯¹è±¡é” åœ¨ä»£ç ä¸­çš„æ–¹æ³•ä¸ŠåŠ äº†synchronizedçš„é”ï¼Œæˆ–è€…synchronized(thisï¼‰çš„ä»£ç æ®µ ç§æœ‰é” åœ¨ç±»å†…éƒ¨å£°æ˜Žä¸€ä¸ªç§æœ‰å±žæ€§å¦‚private Object lockï¼Œåœ¨éœ€è¦åŠ é”çš„ä»£ç æ®µsynchronized(lockï¼‰ ç®¡ç†çº¿ç¨‹ æé«˜æ•ˆçŽ‡volatileçš„åŽŸç†æœ‰åºæ€§. å¯è§æ€§ : ï¼ˆ1ï¼‰ä¿®æ”¹volatileå˜é‡æ—¶ä¼šå¼ºåˆ¶å°†ä¿®æ”¹åŽçš„å€¼åˆ·æ–°çš„ä¸»å†…å­˜ä¸­ã€‚ ï¼ˆ2ï¼‰ä¿®æ”¹volatileå˜é‡åŽä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­å¯¹åº”çš„å˜é‡å€¼å¤±æ•ˆã€‚å› æ­¤ï¼Œå†è¯»å–è¯¥å˜é‡å€¼çš„æ—¶å€™å°±éœ€è¦é‡æ–°ä»Žè¯»å–ä¸»å†…å­˜ä¸­çš„å€¼ã€‚ https://www.cnblogs.com/paddix/p/5428507.html https://www.bilibili.com/video/BV1NT4y1G7WE?p=8 synchronized å’Œvolatile å…³é”®å­—çš„åŒºåˆ« volatileä»…èƒ½å®žçŽ°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŽŸå­æ€§ï¼›è€Œsynchronizedåˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŽŸå­æ€§ volatileæ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronizedæ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ–. å¤šçº¿ç¨‹æ–­ç‚¹ç»­ä¼ åŽŸç† å…¶å®žåŽŸç†å¾ˆç®€å•ï¼Œåªéœ€è¦ä¿è¯æ¯ä¸ªå­ä»»åŠ¡çš„ä¸‹è½½è¿›åº¦èƒ½å¤Ÿè¢«å³æ—¶åœ°è®°å½•å³å¯ã€‚è¿™æ ·ç»§ç»­ä¸‹è½½æ—¶åªéœ€è¦è¯»å–è¿™äº›ä¸‹è½½è®°å½•ï¼Œä»Žä¸Šæ¬¡ä¸‹è½½ç»“æŸçš„ä½ç½®å¼€å§‹ä¸‹è½½å³å¯ã€‚ https://juejin.cn/post/6844904013440221198 çº¿ç¨‹æ± JavaAPIçº¿ç¨‹æ± æœ‰å“ªäº›å‚æ•° ä¸ºä»€ä¹ˆè¦ç”¨çº¿ç¨‹æ±  é™ä½Žèµ„æºæ¶ˆè€—2. æé«˜å“åº”é€Ÿåº¦3. æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Œå¦‚ä½•ä½¿ç”¨?å¾ˆå¤šå°ä»»åŠ¡è®©ä¸€ç»„çº¿ç¨‹æ¥æ‰§è¡Œï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä»»åŠ¡å¯¹åº”ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚è¿™ç§èƒ½æŽ¥æ”¶å¤§é‡å°ä»»åŠ¡å¹¶è¿›è¡Œåˆ†å‘å¤„ç†çš„å°±æ˜¯çº¿ç¨‹æ±  ä»€ä¹ˆæ˜¯æ ¸å¿ƒçº¿ç¨‹â€‹ å¸¸é©»çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡ æ€Žä¹ˆé”€æ¯æ ¸å¿ƒçº¿ç¨‹â€‹ allowCoreThreadTimeOut â€‹ https://objcoding.com/2019/04/14/threadpool-some-settings/ ä¸ºä»€ä¹ˆDCL DOUBLE CHECK LOCKè¦é‚£ä¹ˆå†™ï¼Œç›´æŽ¥åœ¨æ–¹æ³•å‰åŠ synchronizedä¸è¡Œå—â€‹ ä¸DCL è¿™æ ·å†™ï¼Œå°±ä¼šåˆ›å»ºå¤šä¸ªå®žä¾‹ â€‹ synchronizedå¯ä»¥ï¼Œè¿™æ ·ç²’åº¦å¤ªå¤§äº†. â€‹ https://blog.csdn.net/zhaoyajie1011/article/details/106812327 å¦‚ä½•è®©ä¸¤ä¸ªçº¿ç¨‹å¾ªçŽ¯äº¤æ›¿æ‰“å°LockSupport_1A2B.java 12345678910111213141516171819202122232425 char[] aI = &quot;1234567&quot;.toCharArray(); char[] aC = &quot;ABCDEFG&quot;.toCharArray(); t1 = new Thread(() -&gt; &#123; for (char c : aI) &#123; System.out.print(c); LockSupport.unpark(t2); LockSupport.park(); &#125; LockSupport.unpark(t2); &#125;); t2 = new Thread(() -&gt; &#123; for (char c : aC) &#123; System.out.print(c); LockSupport.unpark(t1); LockSupport.park(); &#125; LockSupport.unpark(t1); &#125;); t1.start(); t2.start();// System.out.println(&quot;t1 &quot; + t1.getState());// System.out.println(&quot;t2 &quot; + t2.getState()); t1.join(); t2.join(); Notify_1A2B.java 12345678910111213141516171819202122232425262728293031323334Notify_1A2B o = new Notify_1A2B();char[] aI = &quot;1234567&quot;.toCharArray();char[] aC = &quot;ABCDEFG&quot;.toCharArray();t1 = new Thread(() -&gt; &#123; synchronized (o) &#123; for (char c : aI) &#123; System.out.print(c); o.notify(); try &#123; o.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;);t2 = new Thread(() -&gt; &#123; try &#123; synchronized (o) &#123; for (char c : aC) &#123; System.out.print(c); o.notify(); o.wait(); &#125; &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;&#125;);t1.start();t2.start();t1.join();t2.join(); åç¨‹å¯ä»¥åœ¨Javaé¡¹ç›®ä¸­ä½¿ç”¨å—ï¼Ÿ çº¿ç¨‹æ± äº†è§£å¤šå°‘ï¼Ÿæ‹’ç»ç­–ç•¥æœ‰å‡ ç§,ä¸ºä»€ä¹ˆæœ‰newSingleThread è·¨è¿›ç¨‹é€šä¿¡äº†è§£å¤šå°‘ï¼Ÿç®¡é“äº†è§£å—ï¼Ÿ123456789101112æ–‡ä»¶AIDL ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ AIDL çš„ä½¿ç”¨ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ AIDL è§£æžBinder Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Binder æœºåˆ¶æµ…æžMessenger ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Messenger ä½¿ç”¨ä¸Žè§£æž ContentProvider ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ ContentProvider å†…å®¹æä¾›è€… Socket Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Socket ï¼ˆé¡ºä¾¿å›žé¡¾ TCP UDPï¼‰ åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/u011240877/article/details/72863432 åº•å±‚åŽŸç† RXJavaæ€Žä¹ˆåˆ‡æ¢çº¿ç¨‹ binderè¿›ç¨‹é—´é€šä¿¡å¯ä»¥è°ƒç”¨åŽŸè¿›ç¨‹æ–¹æ³•å—ï¼Ÿ SharedPreferenceåŽŸç†ï¼Ÿè¯»å–xmlæ˜¯åœ¨å“ªä¸ªçº¿ç¨‹? AQSäº†è§£å—ï¼Ÿ ConcurrentHashMapï¼Œçº¿ç¨‹å®‰å…¨ï¼Œä¸ºä½•å®‰å…¨ã€‚åº•å±‚å®žçŽ°æ˜¯æ€Žä¹ˆæ ·çš„ã€‚ https://www.zhihu.com/question/63859501 AQShttp://gee.cs.oswego.edu/dl/papers/aqs.pdf https://www.bilibili.com/video/BV11Q4y1M7K2?from=search&amp;seid=12598203519866117819 https://javadoop.com/post/AbstractQueuedSynchronizer https://www.bilibili.com/video/BV1yJ411v7er?from=search&amp;seid=12598203519866117819 é˜»å¡žé˜Ÿåˆ—åŽŸç† é˜»å¡žåŠŸèƒ½:é˜»å¡žåŠŸèƒ½ä½¿å¾—ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸¤ç«¯çš„èƒ½åŠ›å¾—ä»¥å¹³è¡¡ï¼Œå½“æœ‰ä»»ä½•ä¸€ç«¯é€Ÿåº¦è¿‡å¿«æ—¶ï¼Œé˜»å¡žé˜Ÿåˆ—ä¾¿ä¼šæŠŠè¿‡å¿«çš„é€Ÿåº¦ç»™é™ä¸‹æ¥ æ˜¯å¦æœ‰ç•Œ LinkedBlockingQueue çš„ä¸Šé™æ˜¯ Integer.MAX_VALUEï¼Œçº¦ä¸º 2 çš„ 31 æ¬¡æ–¹, ArrayBlockingQueue å¦‚æžœå®¹é‡æ»¡äº†ï¼Œä¹Ÿä¸ä¼šæ‰©å®¹ï¼Œæ‰€ä»¥ä¸€æ—¦æ»¡äº†å°±æ— æ³•å†å¾€é‡Œæ”¾æ•°æ®äº†ã€‚","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW NETWORK","slug":"interview-network","date":"2024-05-27T06:33:00.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/05/27/interview-network/","link":"","permalink":"https://noteforme.github.io/2024/05/27/interview-network/","excerpt":"","text":"1.ARPåè®®:åœ¨IPä»¥å¤ªç½‘ä¸­ï¼Œå½“ä¸€ä¸ªä¸Šå±‚åè®®è¦å‘åŒ…æ—¶ï¼Œæœ‰äº†è¯¥èŠ‚ç‚¹çš„IPåœ°å€ï¼ŒARPå°±èƒ½æä¾›è¯¥èŠ‚ç‚¹çš„MACåœ°å€ã€‚ 2.HTTP HTTPSçš„åŒºåˆ«: 1.HTTPSä½¿ç”¨TLS(SSL)è¿›è¡ŒåŠ å¯† 2.HTTPSç¼ºçœå·¥ä½œåœ¨TCPåè®®443ç«¯å£ 3.å®ƒçš„å·¥ä½œæµç¨‹ä¸€èˆ¬å¦‚ä»¥ä¸‹æ–¹å¼: 1.å®ŒæˆTCPä¸‰æ¬¡åŒæ­¥æ¡æ‰‹ 2.å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨æ•°å­—è¯ä¹¦ï¼Œé€šè¿‡ï¼Œè¿›å…¥æ­¥éª¤3 3.DHç®—æ³•åå•†å¯¹ç§°åŠ å¯†ç®—æ³•çš„å¯†é’¥ã€hashç®—æ³•çš„å¯†é’¥ 4.SSLå®‰å…¨åŠ å¯†éš§é“åå•†å®Œæˆ 5.ç½‘é¡µä»¥åŠ å¯†çš„æ–¹å¼ä¼ è¾“ï¼Œç”¨åå•†çš„å¯¹ç§°åŠ å¯†ç®—æ³•å’Œå¯†é’¥åŠ å¯†ï¼Œä¿è¯æ•°æ®æœºå¯†æ€§ï¼›ç”¨åå•†çš„hashç®—æ³•è¿›è¡Œæ•°æ®å®Œæ•´æ€§ä¿æŠ¤ï¼Œä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹ 3.httpè¯·æ±‚åŒ…ç»“æž„ï¼Œhttpè¿”å›žç çš„åˆ†ç±»ï¼Œ400å’Œ500çš„åŒºåˆ« 1.åŒ…ç»“æž„ï¼š 1.è¯·æ±‚ï¼šè¯·æ±‚è¡Œã€å¤´éƒ¨ã€æ•°æ® 2.è¿”å›žï¼šçŠ¶æ€è¡Œã€å¤´éƒ¨ã€æ•°æ® 2.httpè¿”å›žç åˆ†ç±»ï¼š1åˆ°5åˆ†åˆ«æ˜¯ï¼Œæ¶ˆæ¯ã€æˆåŠŸã€é‡å®šå‘ã€å®¢æˆ·ç«¯é”™è¯¯ã€æœåŠ¡ç«¯é”™è¯¯ 4.Tcp 1.å¯é è¿žæŽ¥ï¼Œä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ 1.ä¸‰æ¬¡æ¡æ‰‹ï¼šé˜²æ­¢äº†æœåŠ¡å™¨ç«¯çš„ä¸€ç›´ç­‰å¾…è€Œæµªè´¹èµ„æºï¼Œä¾‹å¦‚åªæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œå¦‚æžœsç¡®è®¤ä¹‹åŽcå°±æŽ‰çº¿äº†ï¼Œé‚£ä¹ˆså°±ä¼šæµªè´¹èµ„æº 1.syn-c &#x3D; xï¼Œè¡¨ç¤ºè¿™æ¶ˆæ¯æ˜¯xåºå· 2.ack-s &#x3D; x + 1ï¼Œè¡¨ç¤ºsyn-cè¿™ä¸ªæ¶ˆæ¯æŽ¥æ”¶æˆåŠŸã€‚syn-s &#x3D; yï¼Œè¡¨ç¤ºè¿™æ¶ˆæ¯æ˜¯yåºå·ã€‚ 3.ack-c &#x3D; y + 1ï¼Œè¡¨ç¤ºsyn-sè¿™æ¡æ¶ˆæ¯æŽ¥æ”¶æˆåŠŸ 2.å››æ¬¡æŒ¥æ‰‹ï¼šTCPæ˜¯å…¨åŒå·¥æ¨¡å¼ 1.fin-c &#x3D; x , è¡¨ç¤ºçŽ°åœ¨éœ€è¦å…³é—­cåˆ°säº†ã€‚ack-c &#x3D; y,è¡¨ç¤ºä¸Šä¸€æ¡sçš„æ¶ˆæ¯å·²ç»æŽ¥æ”¶å®Œæ¯• 2.ack-s &#x3D; x + 1ï¼Œè¡¨ç¤ºéœ€è¦å…³é—­çš„fin-cæ¶ˆæ¯å·²ç»æŽ¥æ”¶åˆ°äº†ï¼ŒåŒæ„å…³é—­ 3.fin-s &#x3D; y + 1ï¼Œè¡¨ç¤ºså·²ç»å‡†å¤‡å¥½å…³é—­äº†ï¼Œå°±ç­‰cçš„æœ€åŽä¸€æ¡å‘½ä»¤ 4.ack-c &#x3D; y + 1ï¼Œè¡¨ç¤ºcå·²ç»å…³é—­ï¼Œè®©sä¹Ÿå…³é—­ 3.æ»‘åŠ¨çª—å£ï¼Œåœæ­¢ç­‰å¾…ã€åŽé€€Nã€é€‰æ‹©é‡ä¼  4.æ‹¥å¡žæŽ§åˆ¶ï¼Œæ…¢å¯åŠ¨ã€æ‹¥å¡žé¿å…ã€åŠ é€Ÿé€’å‡ã€å¿«é‡ä¼ å¿«æ¢å¤","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"},{"name":"NETWORK","slug":"INTERVIEW/NETWORK","permalink":"https://noteforme.github.io/categories/INTERVIEW/NETWORK/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW MINE experience","slug":"interview-mine","date":"2024-05-27T06:19:54.000Z","updated":"2025-09-28T13:30:13.251Z","comments":true,"path":"/2024/05/27/interview-mine/","link":"","permalink":"https://noteforme.github.io/2024/05/27/interview-mine/","excerpt":"","text":"My Interview question new security guard å…¼å®¹é—®é¢˜æ–¹æ¡ˆ ç±³å°˜ç»„ä»¶åŒ–ç”¨è¿‡æ²¡ï¼Œç»„ä»¶åŒ–ç”¨ä»€ä¹ˆé€šä¿¡ï¼Œarouteråº•å±‚æºç  Arouterè®²çš„ä¸æ¸…æ¥š Androidç”¨äº†å“ªäº›ç¬¬ä¸‰æ–¹åº“ Retrofitåº•å±‚å®žçŽ°ï¼Œåœ¨okhttpçš„åŸºç¡€ä¸‹åšäº†å“ªäº›å°è£… Okhttp Resonseä¹‹åŽæ€Žä¹ˆäº¤ç»™Rxjavaå¤„ç† è‡ªå®šä¹‰viewç»˜åˆ¶æµç¨‹ æž„é€ æ–¹æ³• - onsizechange - onmeasre - ondraw è¯´ä¸‹Onmeasrstate ä¸‰ä¸ªå¸¸é‡ atmostä½œç”¨ ä¸ºä»€ä¹ˆonMeasrue onlayout ç»˜åˆ¶çš„è¿‡ç¨‹æ‰§è¡Œå¤šéï¼Œondrawä¸ä¼š è‡ªå®šä¹‰viewå®½é«˜å†™æ­»ï¼Œä¸ç®¡ä»€ä¹ˆåœ°æ–¹å®½é«˜ä¸€æ ·çš„ï¼Œxmlä½¿ç”¨ Glideä½¿ç”¨ä»€ä¹ˆç¼“å­˜æœºåˆ¶ LRUcacheåº•å±‚å®žçŽ° è®²ä¸‹äº‹ä»¶åˆ†å‘æœºåˆ¶ äº‹ä»¶åˆ†å‘éƒ½æ²¡æ‹¦æˆªï¼Œæœ€ç»ˆè¢«è°æ¶ˆè´¹hashmap hashtableåŒºåˆ«Hashmapæ‰©å®¹æœºåˆ¶ è´Ÿè½½å› å­Activityå¯åŠ¨è¿‡ç¨‹Awsä½œç”¨å±žæ€§åŠ¨ç”»å’Œå…¶ä»–åŠ¨ç”»çš„åŒºåˆ«ä¸ºä»€ä¹ˆä¸ç”¨ç³»ç»Ÿè¿›ç¨‹é€šä¿¡ç”¨Binderå†…å­˜æ³„æ¼æ–¹å¼ æ¯æ—¥äº’åŠ¨ä¸€é¢kotlinç‰¹ç‚¹æœ‰ä»€ä¹ˆä¸ä¹ æƒ¯çš„åœ°æ–¹ ï¼Œ æˆ‘è¯´äº†å¹¶å‘ flutteråŒ…ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤§ fultteræœ‰ä»€ä¹ˆç‰¹ç‚¹ æ•°å­—ç­¾åï¼Ÿ è°é€šçŸ¥zygoteè¿›ç¨‹ï¼Œforkæ–°è¿›ç¨‹ã€‚ ç‚¹å‡»æ¡Œé¢å›¾æ ‡ï¼Œåº”ç”¨å¯åŠ¨æµç¨‹ å±å¹•ä¸Šæœ‰ä¸ªbutton,ä¸ºä»€ä¹ˆbuttonèƒ½æ¶ˆè´¹äº‹ä»¶ httpsæµç¨‹ï¼Œ ç­¾åæ˜¯ä»€ä¹ˆ,æ€Žä¹ˆçŸ¥é“æœåŠ¡ç«¯æ˜¯è°ã€‚ å®¢æˆ·ç«¯è¾“å…¥ä¸€ä¸ªåœ°å€åˆ°æœåŠ¡ç«¯ï¼Œä¸­é—´ç»åŽ†äº†å“ªäº›æµç¨‹ã€‚ è·¯ç”±å™¨æ˜¯æ€Žä¹ˆæ‰¾æœåŠ¡å™¨çš„ã€‚ TCPå¯¹åŒ…å¤„ç†åšäº†ä»€ä¹ˆã€‚ äºŒé¢å®¢æˆ·æŠ•è¯‰ï¼Œåé¦ˆçš„é—®é¢˜æ˜¯æ€Žä¹ˆè§£å†³ï¼Œå‘ç‰ˆæœ¬ã€‚ Intentæœºåˆ¶ä»€ä¹ˆæ ·çš„ å‘èµ·ä¸€ä¸ªBinderè¯·æ±‚ï¼Œä¸­é—´æœ‰ä¸€ä¸ªæ€Žä¹ˆæ ·çš„æµç¨‹ã€‚ å¤šçº¿ç¨‹æ˜¯æ€Žä¹ˆæ”¹é€ çš„ã€‚ çº¿ç¨‹æ± é‡Œé¢çš„å†…éƒ¨è°ƒåº¦æœºåˆ¶æ˜¯æ€Žä¹ˆæ ·çš„ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è®©å‡ºï¼Œä»€ä¹ˆæ—¶å€™æŠ“ä½é”ã€‚æˆ–è€…è¯´çº¿ç¨‹ä¹‹é—´çš„çŠ¶æ€æ˜¯æ€Žä¹ˆåˆ‡æ¢çš„ã€‚ åŠ å¯†å¹³æ—¶æœ‰äº†è§£å— å¿«é€ŸæŽ’åºã€‚ æ¾³æ¶¦æ¿€MVC MVP MVVMåŒºåˆ« mvvmè¯´å¾—ä¸æ¸…æ¥š MVPé‡Œé¢pæŒæœ‰activityå¼•ç”¨ï¼Œæ€Žä¹ˆæŒæœ‰æ¯”è¾ƒå¥½ã€‚ MVP Presenterå¤ç”¨ï¼Œæ€Žä¹ˆå¤„ç†æ¯”è¾ƒå¥½ã€‚ é¡¹ç›®ä¸­ç”¨åˆ°æµ‹é‡æ¨¡å¼ï¼Œè¯­éŸ³é¡¹ç›®ä»£ç ç»“æž„æ€Žä¹ˆæ ·ã€‚ Okhttp retrofit Rxjavaæœ‰æ²¡æœ‰çœ‹è¿‡æºç ã€‚ OkHttpæ‹¦æˆªå™¨æœ‰æ²¡æœ‰ç”¨è¿‡ï¼Œæ‹¦æˆªå™¨æ€Žä¹ˆå®žçŽ°æ•´ä½“çš„æ‹¦æˆªçš„ã€‚ è®²ä¸‹Retrofit åŠ¨æ€ä»£ç†ç±»å…·ä½“çš„æ–¹æ³•å®žçŽ°ã€‚è‡ªå·±åœ¨é¡¹ç›®é‡Œé¢æœ‰æ²¡æœ‰ç”¨è¿‡åŠ¨æ€ä»£ç†ã€‚ åŠ¨æ€ä»£ç†ç”¨åˆ°å“ªäº›åœºæ™¯ã€‚ Retrofité‡Œé¢ç”¨Rxjavaè¿”å›žä¸€ä¸ªObservableï¼Œè¿™ä¸ªæ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚ Retrofitè¿˜æœ‰convertï¼Œè¿™ä¸ªconvertå’ŒCallAdabterçš„åŒºåˆ«ã€‚ æœ‰æ²¡æœ‰è‡ªå®šä¹‰convertæ²¡ onMeasureçš„æ—¶å€™ï¼Œæ€Žä¹ˆç¡®å®šviewçš„å¤§å°ã€‚ Xml layout_width layout_heightå¯¹åº”ä»£ç é‡Œé¢æ€Žä¹ˆå¯¹åº”ã€‚ Httpsæ€Žä¹ˆé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚Serverçš„å…¬é’¥ä¸€å®šè¦å’Œæœ¬åœ°ä¸€æ ·çš„æ˜¯å§ã€‚ æ€§èƒ½ä¼˜åŒ–ä½ åšè¿‡å“ªäº›æ–¹é¢çš„ã€‚ å†…å­˜æ³„æ¼æ˜¯æ€Žä¹ˆå‘ç”Ÿçš„ã€‚ å†…å­˜æŠ–åŠ¨æ˜¯ç”¨ä»€ä¹ˆå·¥å…·è¿›è¡Œæ£€æµ‹çš„ã€‚å†…å­˜æŠ–åŠ¨å¾ˆé¢‘ç¹çš„è¯ï¼Œæœ‰æ²¡æœ‰é’ˆå¯¹æ€§çš„åšä¸€äº›ä¼˜åŒ–.(è¿™ä¸ªæœ€å¥½å®žè·µä¸‹) Androidè¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„æ€§èƒ½é—®é¢˜ï¼ŒANRä½ èƒ½è¯´ä¸€ä¸‹å—ã€‚ çº¿ä¸Šçš„ANRæœ‰æ²¡æœ‰æŽ’æŸ¥çš„ç»éªŒã€‚æ€Žä¹ˆå¤„ç†çš„ã€‚ kotlinåœ¨é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡ã€‚Kotlinç›¸æ¯”javaæœ‰å“ªäº›ä¼˜åŠ¿ã€‚ Kotlin ? !!éƒ½å¯ä»¥è®©ç¼–è¯‘é€šè¿‡ï¼Œå®žé™…ä¸Šæœ‰åŒºåˆ«å—ã€‚itå¯¹è±¡æ˜¯æ€Žä¹ˆæ¥çš„ Findviewbyid kotlinæ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚findviewbyidé€šè¿‡Map ç¼“å­˜,åœ¨é¡¹ç›®é‡Œé¢æœ‰ä½¿ç”¨è¿‡ç¼“å­˜å—ã€‚ Repriceä¸‰ä¸ªå•å…ƒæµ‹è¯•æ­¥éª¤. å•å…ƒæµ‹è¯•è¦†ç›–çŽ‡æœ‰æ²¡æœ‰çœ‹ã€‚ ç»„ä»¶åŒ–æ¡†æž¶ï¼Œå…±äº«æ•°æ®æ€Žä¹ˆå¤„ç†ã€‚æ”¾å…¬å…±é‡Œé¢å°±å¤ªå¤šäº†ã€‚ç”¨æˆ·modeléœ€è¦å…¶ä»–ç»„ä»¶ä½¿ç”¨ã€‚è¿™ä¸ªæ€Žä¹ˆå¤„ç† ã€‚ è‡ªå®šä¹‰viewè§¦æ‘¸äº‹ä»¶åˆ†å‘ï¼Œèƒ½è¯´ä¸€ä¸‹å—ã€‚ ViewGroupæ‹¦æˆªäº†viewçš„äº‹ä»¶ï¼Œæ€Žä¹ˆè®©viewä¸æ‹¦æˆªï¼Œå†…éƒ¨æ‹¦æˆªæ³•ã€‚ ScrollView æ”¾äº† ç«–çš„viewpager æ€Žä¹ˆå¤„ç†æ»‘åŠ¨å†²çªã€‚ Gradleæ’ä»¶ï¼Œè‡ªåŠ¨åŒ–çš„ä»»åŠ¡ã€‚ æ­å·žæ©™é¹°MVP MVVM,çŽ°åœ¨ç»„ä»¶æ¼”è¿›æˆMVVMï¼Œæœ€ä¸»è¦çš„åŽŸå› æ˜¯ä»€ä¹ˆã€‚ è®²ä¸‹viewmodel,livedata ViewModelä¸ºä»€ä¹ˆä¸ä¼šä¸¢å¤± Livedataç‰ˆæœ¬ç®¡ç†ï¼Œè¿™å—æœ‰æ²¡æœ‰äº†è§£.(ä¹Ÿå°±æ˜¯ç²˜æ€§äº‹ä»¶) kotlinåç¨‹æœ‰æ²¡æœ‰äº†è§£è¿‡ã€‚ï¼ˆåç¨‹æ˜¯kotlin è¯­è¨€å¯¹çº¿ç¨‹çš„å°è£…ï¼‰ è®²ä¸‹javaåŒ¿åå†…éƒ¨ç±», æˆ‘è¯´ ï¼ŒåŒ¿åå†…éƒ¨ç±»ä¼šåˆ›å»ºç±»çš„å¯¹è±¡ï¼Œlambdaä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œï¼ˆé¢è¯•å®˜è®²:lambdaä¼šæ€Žä¹ˆæ ·ï¼‰ Kotlin å†…éƒ¨ç±»çš„å®žçŽ°æ–¹å¼ã€‚ kotlinæ‹“å±•å‡½æ•°æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚ ä¸ºä»€ä¹ˆhttpsè¦è¿™ä¹ˆéº»çƒ¦å‘¢ã€‚ Https æœåŠ¡ç«¯å…¬é’¥å®¢æˆ·ç«¯è®¤å¯ï¼Œå¦‚ä½•åšåˆ°çš„ ä¸­é—´äººæ€Žä¹ˆæ”»å‡»æ€Žä¹ˆåšã€‚ åå°„çš„åŽŸç†ï¼Œä¸ºä»€ä¹ˆèƒ½èŽ·å–æ–¹æ³•ã€‚ è®²ä¸‹é˜»å¡žé˜Ÿåˆ—ï¼Œæ€Žä¹ˆå®žçŽ°ã€‚ å¯¹flutteræ€Žä¹ˆçœ‹. é˜»å¡žé˜Ÿåˆ—åŽŸç† èš‚èšé¢è¯•çº¢åŒ…é¡¹ç›®é€šç”¨ç»„ä»¶æ˜¯ æ€Žä¹ˆè·¨æ¨¡å—è°ƒç”¨çš„ï¼Œ applinkæ˜¯æ€Žä¹ˆæ¶ˆè´¹çš„ï¼ŒActivityé€æ˜Žå¼¹çª—çš„é€»è¾‘ã€‚å¤šè¯­è¨€å’Œå­—ä½“ã€‚ä»€ä¹ˆæ˜¯æ³›åž‹æœ‰æ²¡æœ‰ç”¨è¿‡æ³¨è§£ï¼Œæ³¨è§£æ˜¯æ€Žä¹ˆæ¶ˆè´¹çš„ã€‚å­—èŠ‚ç æ€Žä¹ˆåŠ è½½åˆ°jvmä¸­ å…¶ä»–æ€»ç»“é¡¹ç›®ä¸­é‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œåº”ç”¨åœºæ™¯ Android MVC MVP,çŽ°åœ¨ç»„ä»¶æ¼”è¿›æˆMVVMï¼Œæœ€ä¸»è¦çš„åŽŸå› æ˜¯ä»€ä¹ˆã€‚ è®²ä¸‹viewmodel,livedata ViewModelä¸ºä»€ä¹ˆä¸ä¼šä¸¢å¤± Livedataç‰ˆæœ¬ç®¡ç†ï¼Œè¿™å—æœ‰æ²¡æœ‰äº†è§£.(ä¹Ÿå°±æ˜¯ç²˜æ€§äº‹ä»¶) kotlinåç¨‹æœ‰æ²¡æœ‰äº†è§£è¿‡ã€‚ï¼ˆåç¨‹æ˜¯kotlin è¯­è¨€å¯¹çº¿ç¨‹çš„å°è£…ï¼‰ è®²ä¸‹javaåŒ¿åå†…éƒ¨ç±» Kotlin å†…éƒ¨ç±»çš„å®žçŽ°æ–¹å¼ã€‚ kotlinæ‹“å±•å‡½æ•°æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚ ä¸ºä»€ä¹ˆhttpsè¦è¿™ä¹ˆéº»çƒ¦å‘¢ã€‚ Https æœåŠ¡ç«¯å…¬é’¥å®¢æˆ·ç«¯è®¤å¯ï¼Œå¦‚ä½•åšåˆ°çš„ ä¸­é—´äººæ€Žä¹ˆæ”»å‡»æ€Žä¹ˆåšã€‚ åå°„çš„åŽŸç†ï¼Œä¸ºä»€ä¹ˆèƒ½èŽ·å–æ–¹æ³•ã€‚ è®²ä¸‹é˜»å¡žé˜Ÿåˆ—ï¼Œæ€Žä¹ˆå®žçŽ°ã€‚ å¯¹flutteræ€Žä¹ˆçœ‹. é˜»å¡žé˜Ÿåˆ—åŽŸç† ç»„ä»¶åŒ–ç”¨è¿‡æ²¡ï¼Œç»„ä»¶åŒ–ç”¨ä»€ä¹ˆé€šä¿¡ï¼Œarouteråº•å±‚æºç  Arouterè®²çš„ä¸æ¸…æ¥š Androidç”¨äº†å“ªäº›ç¬¬ä¸‰æ–¹åº“ Retrofitåº•å±‚å®žçŽ°ï¼Œåœ¨okhttpçš„åŸºç¡€ä¸‹åšäº†å“ªäº›å°è£… Okhttp Resonseä¹‹åŽæ€Žä¹ˆäº¤ç»™Rxjavaå¤„ç† è‡ªå®šä¹‰viewç»˜åˆ¶æµç¨‹ æž„é€ æ–¹æ³• - onsizechange - onmeasre - ondraw è¯´ä¸‹Onmeasrstate ä¸‰ä¸ªå¸¸é‡ atmostä½œç”¨ ä¸ºä»€ä¹ˆonMeasrue onlayout ç»˜åˆ¶çš„è¿‡ç¨‹æ‰§è¡Œå¤šéï¼Œondrawä¸ä¼š è‡ªå®šä¹‰viewå®½é«˜å†™æ­»ï¼Œä¸ç®¡ä»€ä¹ˆåœ°æ–¹å®½é«˜ä¸€æ ·çš„ï¼Œxmlä½¿ç”¨ Glideä½¿ç”¨ä»€ä¹ˆç¼“å­˜æœºåˆ¶ LRUcacheåº•å±‚å®žçŽ° è®²ä¸‹äº‹ä»¶åˆ†å‘æœºåˆ¶ äº‹ä»¶åˆ†å‘éƒ½æ²¡æ‹¦æˆªï¼Œæœ€ç»ˆè¢«è°æ¶ˆè´¹ hashmap hashtableåŒºåˆ« Hashmapæ‰©å®¹æœºåˆ¶ è´Ÿè½½å› å­ Activityå¯åŠ¨è¿‡ç¨‹ Awsä½œç”¨ å±žæ€§åŠ¨ç”»å’Œå…¶ä»–åŠ¨ç”»çš„åŒºåˆ« ä¸ºä»€ä¹ˆä¸ç”¨ç³»ç»Ÿè¿›ç¨‹é€šä¿¡ç”¨Binder å†…å­˜æ³„æ¼æ–¹å¼ kotlinç‰¹ç‚¹æœ‰ä»€ä¹ˆä¸ä¹ æƒ¯çš„åœ°æ–¹ ï¼Œ æˆ‘è¯´äº†å¹¶å‘ flutteråŒ…ä¸ºä»€ä¹ˆé‚£ä¹ˆå¤§ fultteræœ‰ä»€ä¹ˆç‰¹ç‚¹ æ•°å­—ç­¾åï¼Ÿ è°é€šçŸ¥zygoteè¿›ç¨‹ï¼Œforkæ–°è¿›ç¨‹ã€‚ ç‚¹å‡»æ¡Œé¢å›¾æ ‡ï¼Œåº”ç”¨å¯åŠ¨æµç¨‹ å±å¹•ä¸Šæœ‰ä¸ªbutton,ä¸ºä»€ä¹ˆbuttonèƒ½æ¶ˆè´¹äº‹ä»¶ httpsæµç¨‹ï¼Œ ç­¾åæ˜¯ä»€ä¹ˆ,æ€Žä¹ˆçŸ¥é“æœåŠ¡ç«¯æ˜¯è°ã€‚ å®¢æˆ·ç«¯è¾“å…¥ä¸€ä¸ªåœ°å€åˆ°æœåŠ¡ç«¯ï¼Œä¸­é—´ç»åŽ†äº†å“ªäº›æµç¨‹ã€‚ è·¯ç”±å™¨æ˜¯æ€Žä¹ˆæ‰¾æœåŠ¡å™¨çš„ã€‚ TCPå¯¹åŒ…å¤„ç†åšäº†ä»€ä¹ˆã€‚ å®¢æˆ·æŠ•è¯‰ï¼Œåé¦ˆçš„é—®é¢˜æ˜¯æ€Žä¹ˆè§£å†³ï¼Œå‘ç‰ˆæœ¬ã€‚ Intentæœºåˆ¶ä»€ä¹ˆæ ·çš„ å‘èµ·ä¸€ä¸ªBinderè¯·æ±‚ï¼Œä¸­é—´æœ‰ä¸€ä¸ªæ€Žä¹ˆæ ·çš„æµç¨‹ã€‚ å¤šçº¿ç¨‹æ˜¯æ€Žä¹ˆæ”¹é€ çš„ã€‚ çº¿ç¨‹æ± é‡Œé¢çš„å†…éƒ¨è°ƒåº¦æœºåˆ¶æ˜¯æ€Žä¹ˆæ ·çš„ï¼Œä»€ä¹ˆæƒ…å†µä¸‹è®©å‡ºï¼Œä»€ä¹ˆæ—¶å€™æŠ“ä½é”ã€‚æˆ–è€…è¯´çº¿ç¨‹ä¹‹é—´çš„çŠ¶æ€æ˜¯æ€Žä¹ˆåˆ‡æ¢çš„ã€‚ åŠ å¯†å¹³æ—¶æœ‰äº†è§£å— å¿«é€ŸæŽ’åºã€‚ MVC MVP MVVMåŒºåˆ« mvvmè¯´å¾—ä¸æ¸…æ¥š MVPé‡Œé¢pæŒæœ‰activityå¼•ç”¨ï¼Œæ€Žä¹ˆæŒæœ‰æ¯”è¾ƒå¥½ã€‚ MVP Presenterå¤ç”¨ï¼Œæ€Žä¹ˆå¤„ç†æ¯”è¾ƒå¥½ã€‚ é¡¹ç›®ä¸­ç”¨åˆ°æµ‹é‡æ¨¡å¼ï¼Œè¯­éŸ³é¡¹ç›®ä»£ç ç»“æž„æ€Žä¹ˆæ ·ã€‚ Okhttp retrofit Rxjavaæœ‰æ²¡æœ‰çœ‹è¿‡æºç ã€‚ OkHttpæ‹¦æˆªå™¨æœ‰æ²¡æœ‰ç”¨è¿‡ï¼Œæ‹¦æˆªå™¨æ€Žä¹ˆå®žçŽ°æ•´ä½“çš„æ‹¦æˆªçš„ã€‚ è®²ä¸‹Retrofit åŠ¨æ€ä»£ç†ç±»å…·ä½“çš„æ–¹æ³•å®žçŽ°ã€‚è‡ªå·±åœ¨é¡¹ç›®é‡Œé¢æœ‰æ²¡æœ‰ç”¨è¿‡åŠ¨æ€ä»£ç†ã€‚ åŠ¨æ€ä»£ç†ç”¨åˆ°å“ªäº›åœºæ™¯ã€‚ Retrofité‡Œé¢ç”¨Rxjavaè¿”å›žä¸€ä¸ªObservableï¼Œè¿™ä¸ªæ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚ Retrofitè¿˜æœ‰convertï¼Œè¿™ä¸ªconvertå’ŒCallAdabterçš„åŒºåˆ«ã€‚ æœ‰æ²¡æœ‰è‡ªå®šä¹‰convertæ²¡ onMeasureçš„æ—¶å€™ï¼Œæ€Žä¹ˆç¡®å®šviewçš„å¤§å°ã€‚ Xml layout_width layout_heightå¯¹åº”ä»£ç é‡Œé¢æ€Žä¹ˆå¯¹åº”ã€‚ Httpsæ€Žä¹ˆé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚Serverçš„å…¬é’¥ä¸€å®šè¦å’Œæœ¬åœ°ä¸€æ ·çš„æ˜¯å§ã€‚ æ€§èƒ½ä¼˜åŒ–ä½ åšè¿‡å“ªäº›æ–¹é¢çš„ã€‚ å†…å­˜æ³„æ¼æ˜¯æ€Žä¹ˆå‘ç”Ÿçš„ã€‚ å†…å­˜æŠ–åŠ¨æ˜¯ç”¨ä»€ä¹ˆå·¥å…·è¿›è¡Œæ£€æµ‹çš„ã€‚å†…å­˜æŠ–åŠ¨å¾ˆé¢‘ç¹çš„è¯ï¼Œæœ‰æ²¡æœ‰é’ˆå¯¹æ€§çš„åšä¸€äº›ä¼˜åŒ–**.(è¿™ä¸ªæœ€å¥½å®žè·µä¸‹)** Androidè¿˜æœ‰ä¸€ä¸ªå¸¸è§çš„æ€§èƒ½é—®é¢˜ï¼ŒANRä½ èƒ½è¯´ä¸€ä¸‹å—ã€‚ çº¿ä¸Šçš„ANRæœ‰æ²¡æœ‰æŽ’æŸ¥çš„ç»éªŒã€‚æ€Žä¹ˆå¤„ç†çš„ã€‚ kotlinåœ¨é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡ã€‚Kotlinç›¸æ¯”javaæœ‰å“ªäº›ä¼˜åŠ¿ã€‚ Kotlin ? !!éƒ½å¯ä»¥è®©ç¼–è¯‘é€šè¿‡ï¼Œå®žé™…ä¸Šæœ‰åŒºåˆ«å—ã€‚itå¯¹è±¡æ˜¯æ€Žä¹ˆæ¥çš„ Findviewbyid kotlinæ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚findviewbyidé€šè¿‡Map ç¼“å­˜,åœ¨é¡¹ç›®é‡Œé¢æœ‰ä½¿ç”¨è¿‡ç¼“å­˜å—ã€‚ Repriceä¸‰ä¸ªå•å…ƒæµ‹è¯•æ­¥éª¤. å•å…ƒæµ‹è¯•è¦†ç›–çŽ‡æœ‰æ²¡æœ‰çœ‹ã€‚ ç»„ä»¶åŒ–æ¡†æž¶ï¼Œå…±äº«æ•°æ®æ€Žä¹ˆå¤„ç†ã€‚æ”¾å…¬å…±é‡Œé¢å°±å¤ªå¤šäº†ã€‚ç”¨æˆ·modeléœ€è¦å…¶ä»–ç»„ä»¶ä½¿ç”¨ã€‚è¿™ä¸ªæ€Žä¹ˆå¤„ç† ã€‚ è‡ªå®šä¹‰viewè§¦æ‘¸äº‹ä»¶åˆ†å‘ï¼Œèƒ½è¯´ä¸€ä¸‹å—ã€‚ ViewGroupæ‹¦æˆªäº†viewçš„äº‹ä»¶ï¼Œæ€Žä¹ˆè®©viewä¸æ‹¦æˆªï¼Œå†…éƒ¨æ‹¦æˆªæ³•ã€‚ ScrollView æ”¾äº† ç«–çš„viewpager æ€Žä¹ˆå¤„ç†æ»‘åŠ¨å†²çªã€‚ Gradleæ’ä»¶ï¼Œè‡ªåŠ¨åŒ–çš„ä»»åŠ¡ã€‚ HTTPä»‹ç»RPCï¼ŒRPCå’Œå…¶ä»–åè®®HTTPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç„¶åŽæ‰£é¡¹ç›®ç»†èŠ‚ã€‚ã€‚ã€‚ï¼ˆå½•åƒéƒ½ä¸æ•¢çœ‹ï¼Œä¸æƒ³å†™äº†ï¼‰ å®¢æˆ·ç«¯ç½‘ç»œå®‰å…¨å®žçŽ° HTTP1.0ã€HTTP1.1ã€HTTP2.0çŸ¥é“å—ï¼Ÿä»–ä»¬ç›¸æ¯”ä¹‹å‰çš„ç‰ˆæœ¬æœ‰å“ªäº›ä¼˜åŒ–ï¼Ÿ è¾“å…¥ä¸€ä¸ªURLåˆ°ç½‘é¡µæ˜¾ç¤ºçš„è¿‡ç¨‹ 3 (è¾“å…¥å®Œäº†ç›´æŽ¥å¼¹å‡ºä¸€ä¸ªå¹¿å‘Šå¯èƒ½æ˜¯å“ªä¸ªçŽ¯èŠ‚å‡ºäº†é—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³æˆ‘çŒœæ˜¯DNSè§£æžå‡ºäº†é—®é¢˜ï¼Œä¸çŸ¥é“æ€Žä¹ˆè§£å†³ é¢å®Œä¹‹åŽæƒ³åˆ°æ¸…æµè§ˆå™¨ç¼“å­˜ã€åŠ å¼ºå‰ç«¯æ ¡éªŒä¹‹ç±»çš„) localhost ä¸Ž127.0.0.1çš„åŒºåˆ« HTTP1ï¼ŒHTTP2ï¼ŒHTTP3çš„åè®® getä¸ŽpoståŒºåˆ« HTTPSçš„åŠ å¯†è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡å‘é€å…¬é’¥ä¸éœ€è¦åŠ å¯†HTTPçŠ¶æ€ç åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€ HTTPSæ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ HTTPSæ˜¯æ€Žä¹ˆä¿è¯å®‰å…¨çš„ httpsè¯·æ±‚æµç¨‹ 3 HTTP3 httpçš„æµç¨‹ä»¥åŠå’Œhttpsçš„åŒºåˆ« HTTPæ”¯æŒé•¿é“¾æŽ¥å—ï¼Ÿä»€ä¹ˆæ—¶å€™å¼€å§‹æ”¯æŒçš„ï¼Ÿ HTTPSçš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿ httpçŠ¶æ€ç  httpsè¯·æ±‚åˆ°å“åº”çš„è¿‡ç¨‹ï¼ˆåŠ å¯†è¿‡ç¨‹ï¼‰ æ€Žä¹ˆåŠ é€Ÿhttpè¿žæŽ¥ httpåŸºäºŽtcpè¿˜æ˜¯udp httpåè®®æœ‰å“ªäº›è·Ÿç¼“å­˜ç›¸å…³çš„å±žæ€§ï¼Ÿ httpå¯ä»¥ç”¨UDPå— OSIä¸ƒå±‚æ¨¡åž‹ä»‹ç»ä¸€ä¸‹ï¼Ÿåº”ç”¨å±‚æœ‰ä»€ä¹ˆåè®®ï¼Ÿ OSIä¸ƒå±‚ç½‘ç»œæ¨¡åž‹ ç½‘ç»œä¼ è¾“å±‚çš„åè®® ä¼ è¾“å±‚çš„ä¸»è¦åè®®æœ‰å“ªäº› å¾®ä¿¡è§†é¢‘æ˜¯ç”¨äº†tcpè¿˜æ˜¯udp UDPå’ŒTCPçš„åŒºåˆ«ï¼ŒUDPçš„ä½¿ç”¨ä¾‹å­ï¼ŒTCPæ€Žä¹ˆä¿è¯è¿žæŽ¥å¯é  TCPä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ï¼Œå¦‚æžœä¸­é—´ä¿¡æ¯ä¸¢å¤±äº†æ€Žä¹ˆåŠžï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´é‚£è¿™ä¸ªæ—¶é—´å…·ä½“åº”è¯¥è®¾ç½®å¤šå°‘ OSIä¸ƒå±‚æœ‰å“ªäº› TCP UDPåœ¨å“ªäº›å±‚ äº¤æ¢å™¨è·¯ç”±å™¨åœ¨å“ªäº›å±‚ TCPæ‹¥å¡žæŽ§åˆ¶ å››æ¬¡æŒ¥æ‰‹è¯¦è§£ TCPæ€Žä¹ˆä¿è¯å¯é ä¼ è¾“ DNSè§£æžè¿‡ç¨‹ TCPæŠ¥æ–‡é‡Œçš„å­—æ®µ TCPæŠ¥å¤´ UDP STL å’ŒTCPåŒºåˆ« 2 TCPä¸ŽUDPåŒºåˆ«ï¼Œä¼˜ç¼ºç‚¹ TCPä¼ è¾“ä¸­headeré‡Œçš„å­—æ®µ TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå¦‚ä½•ä¿è¯å®‰å…¨ä¼ è¾“çš„ TCPä¸‰æ¬¡æ¡æ‰‹ï¼ŒTCPä¸‰æ¬¡æ¡æ‰‹çš„æ­¥éª¤ï¼Ÿä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ 3 tcpæ»‘åŠ¨çª—å£ï¼ŒTCPä¸‰æ¬¡æ¡æ‰‹ 2 TCPæ‹¥å¡žæŽ§åˆ¶ DNSåè®® 2 5å±‚ç»“æž„ä»¥åŠç›¸åº”çš„ä½œç”¨ é•¿è¿žæŽ¥ä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾ï¼Ÿ æœåŠ¡ç«¯é€šè¿‡timeoutè¿˜æ˜¯æŽ¢æµ‹å†³å®šæ˜¯å¦å…³é—­é•¿è¿žæŽ¥ï¼Ÿ TCPæœ‰æ²¡æœ‰è¿™ç§å…³é—­è¿žæŽ¥çš„æ–¹å¼ï¼Ÿ å¯¹ç§°åŠ å¯†å’Œéžå¯¹ç§°åŠ å¯†æœ‰å“ªäº›ç®—æ³• ä»€ä¹ˆåŒºåˆ« ANDROIDhandlerçš„ä½œç”¨ æ·±å…¥é—®handlerï¼ˆæ¯”å¦‚messagequeueä¸ºç©ºæ—¶å€™ï¼Œlooperåœ¨åšä»€ä¹ˆï¼‰ handleå’ŒActivityåœ¨é“¾è¡¨ä¸­çš„é¡ºåºæ˜¯æ€Žä¹ˆæ ·çš„ï¼Ÿ Handlerä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ looperé˜»å¡žä¸ºä»€ä¹ˆä¸ä¼šé€ æˆANR looperæ­»å¾ªçŽ¯ä¼šä¸ä¼šå¡æ­»ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ handlerè¯¦è§£ï¼Œæ˜¯å¦ä¼šå†…å­˜æ³„æ¼ï¼Œæ³„éœ²çš„åŽŸç† handlerå¤„ç†æµç¨‹ï¼Œlooperå’Œhandleræ˜¯ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤šï¼Œä¸ºä»€ä¹ˆä¸»çº¿ç¨‹loopä¸ä¼šANRï¼Ÿ å¹¿æ’­çš„ä¸¤ç§å¯åŠ¨æ–¹å¼ å®‰å“ä¸­çš„æ¶ˆæ¯æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ æ¶ˆæ¯æœºåˆ¶ä¸­ï¼Œå¦‚ä½•æ›´æ–°UI å®‰å“æœ‰å“ªå‡ ç§é¡µé¢é€šè®¯çš„æ–¹å¼ è‡ªå®šä¹‰viewçš„åŸºæœ¬æµç¨‹ 3 æåˆ°äº†æ»‘åŠ¨å†²çªæ€Žä¹ˆè§£å†³çš„ Androidäº‹ä»¶ä¼ é€’æµç¨‹å’ŒOnTouchListenerçš„å…³ç³» touchäº‹ä»¶çš„ä¼ é€’æœºåˆ¶ å®‰å“çš„viewäº‹ä»¶åˆ†å‘æœºåˆ¶ 3 ä»‹ç»ä¸€ä¸‹viewæ¸²æŸ“æµç¨‹ Android Viewç»˜åˆ¶æµç¨‹ï¼Œå½“ä¸€ä¸ªTextViewçš„å®žä¾‹è°ƒç”¨setText()æ–¹æ³•åŽæ‰§è¡Œäº†ä»€ä¹ˆ viewç»˜åˆ¶æµç¨‹ 2 viewæ€Žä¹ˆç¡®è®¤ä½ç½®ä¸Žå¤§å°ï¼Œæµ‹é‡æ¨¡å¼ å¸¸ç”¨çš„viewgroupï¼Œä¸ŽviewåŒºåˆ«ï¼Œåœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆåŒºåˆ« å®‰å“ç‚¹å‡»äº‹ä»¶çš„å¤„ç† lifecycleä»‹ç» jetpackå…¨å®¶æ¡¶ç”¨è¿‡å“ªäº› livedataæœ‰ä»€ä¹ˆèƒ½åŠ› åŒæŒ‡ç¼©æ”¾æ‹–åŠ¨å¤§å›¾ Androidå±å¹•æ¸²æŸ“æœºåˆ¶ RecyclerViewç»˜åˆ¶æ­¥éª¤å’Œå¤ç”¨æœºåˆ¶ Recyclerviewçš„å¤ç”¨æœºåˆ¶ recyclerviewçš„ç¼“å­˜æœºåˆ¶ï¼ˆçŸ¥é“ä½†ä¸æ‡‚ï¼Œæˆ‘è¯´åšé¡¹ç›®ç”¨list viewå‡ºçŽ°äº†é‡å¤åˆ·æ˜¾ç¤ºçš„é—®é¢˜ï¼Œæ‰€ä»¥æ¢äº†recyclerviewè§£å†³ retrofitçš„å…·ä½“å®žçŽ°ï¼Œå…¶ä¸­æŽ¥å£çš„ä½œç”¨ï¼Œæ³¨è§£çš„ä½œç”¨ æ€Žä¹ˆåœ¨å­çº¿ç¨‹ä¸­æ›´æ–°UIï¼Ÿ å®‰å“å­˜å‚¨æ–¹å¼ contentproviderä»‹ç»ï¼Œèƒ½å®žçŽ°è€—æ—¶æ“ä½œå— serviceä»‹ç»ï¼Œç”Ÿå‘½å‘¨æœŸä¸Ž contentprovideråŒºåˆ« ä»‹ç»å¯¹å®‰å“ä¸­intentçš„ç†è§£ serviceä¸Žactivityé€šä¿¡ Kotlinæœ‰æ²¡æœ‰static å…³é”®å­—ï¼Ÿé‚£åˆ›å»ºé™æ€å‡½æ•°æ€Žä¹ˆåŠž åç¨‹Flowæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ å†…å­˜æ³„æ¼çš„æƒ…å†µæœ‰å“ªäº›ï¼Œè®²ä¸€ç§æ£€æµ‹æ–¹æ³• gradleæ‰“åŒ…æµç¨‹ Androidç­¾åæµç¨‹ å¯¹AMSçš„äº†è§£ content providerçš„ä½œç”¨ã€‚ sqliteçš„åº•å±‚åŽŸç†(ä¸äº†è§£) ç´¢å¼•çš„åŽŸç†åŠå®žçŽ°ã€‚ å¦‚ä½•å®šä½ANRå’Œå´©æºƒé—®é¢˜çš„åŽŸå› ã€‚ composeå’Œviewå†™æ³•çš„ä¼˜ç¼ºç‚¹ ä½¿ç”¨recycleviewç¢°åˆ°çš„é—®é¢˜ composeå®žçŽ°éŸ³ä¹æ’­æ”¾æ å›ºå®š activity a -&gt; b çš„ç”Ÿå‘½å‘¨æœŸ ï¼ˆå“ªä¸ªé˜¶æ®µç•Œé¢ä¸å¯è§ï¼‰ fragmentçš„æž„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œnavigateçš„è·³è½¬ã€‚ä¸¤ç§æ–¹å¼ç†è§£ å¯ä»¥å¼‚æ­¥åŠ è½½fragmentå—ï¼Œç­”æ¡ˆï¼šå¯ä»¥ã€‚ serialVersionUIDæ˜¯å¦äº†è§£ handlerMessageä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼ˆè¦æ€Žä¹ˆé¢„é˜²ï¼‰ å›¾ç‰‡æœ‰å“ªäº›æ ¼å¼ï¼Œä»–ä»¬çš„åŒºåˆ« Fragmentçš„replace,hide,add,showçš„åŒºåˆ« Retrofitä¸­çš„Callå¯¹è±¡å¦‚ä½•è½¬æ¢æˆokhttpçš„callå¯¹è±¡(è¿™ä¸ªé¢˜ç›®æ˜¯åŸ‹å‘çš„) Retrofitè®¾è®¡æ¨¡å¼ åŠ è½½soæœ‰å‡ ç§æ–¹æ³• Handlerå·¥ä½œæœºåˆ¶Looperå¦‚ä½•è¯†åˆ«Handler LIBRARYOkHttpçš„åŽŸç† okhttpçš„è¯·æ±‚æœºåˆ¶ okhttpå¦‚ä½•å¤„ç†ç½‘ç»œç¼“å­˜çš„ okhttpæ‹¦æˆªå™¨ okhttpè´£ä»»é“¾è®¾è®¡æ¨¡å¼ okhttpå‘é€è¯·æ±‚çš„æ‹¦æˆªæ–¹å¼okhttpçš„æ‹¦æˆªå™¨è®¾è®¡æ¨¡å¼ retrofitæ€Žä¹ˆå®žçŽ°å¤šçº¿ç¨‹ 2 Retrofitçš„è°ƒç”¨è¿‡ç¨‹ï¼ˆæˆ‘ç»™ä½ ç‚¹æç¤ºï¼Œä½ è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼‰ viewmodelçš„å®žçŽ°åŽŸç† 2 viewmodelæ€Žä¹ˆæ›´æ–°æ•°æ®çš„ viewmodelå®žçŽ°åŽŸç† LeakCanaryçš„ä½¿ç”¨å’Œå®žçŽ°åŽŸç† å®‰å“å›¾ç‰‡ç¼“å­˜ï¼ŒåŠ è½½ åç¨‹å®žçŽ°åŽŸç† Glideçš„ç¼“å­˜æœºåˆ¶ 2 å®‰å“glideä¸­ä¸Žç”Ÿå‘½å‘¨æœŸçš„å…³ç³» glideçš„ç¼“å­˜åŠ è½½æœºåˆ¶ glideå’ŒOkHttpçš„ä»»åŠ¡è°ƒåº¦æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼ˆæ¯”å¦‚åŒæ—¶å‘èµ·å¾ˆå¤šè¯·æ±‚ï¼‰ okhttpã€picassoç­‰åº•å±‚åŽŸç†å¦‚ç¼“å­˜æœºåˆ¶ç­‰ï¼ˆä¸€ä¸ªä¹Ÿæ²¡ç­”ä¸Šæ¥ï¼Œliterally ACTIVITYActivityéµå¾ªä»€ä¹ˆè®¾è®¡æ¨¡å¼ Activityå¯åŠ¨æ¨¡å¼ï¼ŒallowReparentçš„ç‰¹ç‚¹å’Œæ ˆäº²å’Œæ€§ ä»Žç‚¹å‡»åº”ç”¨å›¾æ ‡åˆ°è¿›å…¥åº”ç”¨ï¼ŒAndroidç³»ç»Ÿéƒ½åšäº†å“ªäº›å·¥ä½œï¼ŒæœŸé—´æ¶‰åŠåˆ°çš„è¿›ç¨‹åˆ‡æ¢æœ‰å“ªäº›ï¼Ÿ å†™ä¸ªå•ä¾‹æ¨¡å¼ -Activityå¯åŠ¨æ¨¡å¼ Activityçš„å¯åŠ¨æµç¨‹,ä»ŽLauncheråˆ°AMSâ€”â€”ä»ŽAMSåˆ°ApplicationThreadâ€”â€”ä»ŽApplicationThreadåˆ°Activity activityç”Ÿå‘½å‘¨æœŸ onStartä¸ŽonResumeè§£é‡Š activityå››å¤§å¯åŠ¨æ¨¡å¼ è¯´ä¸‹ Activity çš„å››ç§å¯åŠ¨æ¨¡å¼ã€åº”ç”¨åœºæ™¯ ï¼Ÿ â€”â€”standardæ ‡å‡†æ¨¡å¼ï¼›singleTop æ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼›singleTask æ ˆå†…å¤ç”¨æ¨¡å¼ï¼›singleInstance å•å®žä¾‹æ¨¡å¼ æ¨ªç«–å±åˆ‡æ¢çš„ Activity ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Ÿ fragmentçš„ç”Ÿå‘½å‘¨æœŸ viewmodelè®¾è®¡æ¨¡å¼ï¼Œmvc,mvp,mvvmä»‹ç» å¹¿æ’­é‡Œæ€Žä¹ˆæ‰§è¡Œè€—æ—¶æ“ä½œ é˜»å¡žå¤šä¹…ä¼šå‡ºçŽ°ANR Android intentå¦‚ä½•ä¼ é€’æ•°æ®Androidå¹¿æ’­è°ˆè°ˆAndroidæ€§èƒ½ä¼˜åŒ– Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»ŽActivity Aå¯åŠ¨Activity Bç”Ÿå‘½å‘¨æœŸçš„å˜åŒ– Activityç”Ÿå‘½å‘¨æœŸï¼Œæ¨ªç«–å±åˆ‡æ¢çš„ Activity ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Ÿ SharedPreference è·¨è¿›ç¨‹ä½¿ç”¨ä¼šæ€Žä¹ˆæ ·ï¼Ÿå¦‚ä½•ä¿è¯è·¨è¿›ç¨‹ ä½¿ç”¨å®‰å…¨ï¼Ÿ activityï¼Œfragment ä¼ å€¼é—®é¢˜ activity ä¸Ž fragment åŒºåˆ« Fragment ä¸­ add ä¸Ž replace çš„åŒºåˆ«ï¼Ÿ FragmentManagerçš„Addå’ŒReplaceåŒºåˆ« Activityå› ä¸ºå†…å­˜ä¸è¶³é”€æ¯äº†å¦‚ä½•æ¢å¤æ•°æ® ç‚¹å‡»é”å±åŽActivityä¼šæ‰§è¡ŒonPauseå’ŒonStopå— Activityçš„onDestoryå›žè°ƒæ—¶æœº Activityè°ƒç”¨finishåŽæ˜¯å¦ç«‹å³onDestory Activityè°ƒç”¨finishåŽæ˜¯å¦ç«‹å³onDestoryActivity A å¯åŠ¨ Activity B,Activity A çš„onDestoryå’ŒActivity B çš„onCreateæ‰§è¡Œé¡ºåºActivity A å¯åŠ¨ Activity B,ç„¶åŽè°ƒç”¨finish,Activity A çš„onDestoryå’ŒActivity B çš„onCreateæ‰§è¡Œé¡ºåºActivityçš„singleTopå’ŒsingleTaskçš„åŒºåˆ« binderåŽŸç† KOTLINkotlinçš„letï¼Œapplyï¼Œalsoæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚kotlinçš„inlineï¼Œnonlineå…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨ã€‚ å¼‚æ­¥è°ƒç”¨æœ‰å‡ ç§æ–¹å¼ï¼Œä»Žç®€å•åˆ°å¤æ‚ã€‚ é€†å˜ä¸Žåå˜ã€‚ ä½œç”¨åŸŸå‡½æ•°ï¼ˆåº”ç”¨åœºæ™¯ï¼‰ é«˜é˜¶å‡½æ•°ï¼ˆæ¦‚å¿µï¼‰ kotlinå’Œjavaä¸€å—ç¼–è¯‘ç¢°åˆ°å•¥é—®é¢˜ ::funName åŒå†’å·çš„å†™æ³•çš„ç†è§£ æ³›åž‹ out in ä¸ŽJavaæ³›åž‹ä¸­çš„è”ç³»å’ŒåŒºåˆ« çŸ¥é“å“ªäº›é«˜é˜¶å‡½æ•° åç¨‹çš„ç†è§£åç¨‹ç›¸å¯¹äºŽçº¿ç¨‹çš„åŒºåˆ« Kotlin é—­åŒ…Kotlin é™æ€æ–¹æ³• é“¾è¡¨é€†åºHandlerçš„postDelayåŽŸç†P2Pç½‘ç»œ THREADè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„è”ç³»ä¸ŽåŒºåˆ« 2 Javaåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ çº¿ç¨‹å¹¶å‘ä¼šé‡åˆ°å“ªäº›é—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³ çº¿ç¨‹çš„ wait å’Œ block æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå’Œ sleep æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ sychronizedå’Œlockçš„åŒºåˆ« volatileè¯¦è§£ã€synchronizedè¯¦è§£ï¼Œä¸¤è€…åŒºåˆ« Javaçº¿ç¨‹é—´é€šä¿¡ï¼Œ volatileè¯¦è§£ã€synchronizedè¯¦è§£ çº¿ç¨‹çš„çŠ¶æ€ çº¿ç¨‹æ± è¯¦è§£ çº¿ç¨‹æ± æ€Žä¹ˆåšåˆ°çº¿ç¨‹å¤ç”¨ å®‰å“ä¸­æŒ‚èµ·å‡½æ•°æ€Žä¹ˆå®žçŽ°çš„ å®‰å“ä¸­å®žçŽ°å¤šçº¿ç¨‹çš„æ–¹æ³• çº¿ç¨‹æ± è®¾è®¡æ¨¡å¼ï¼Œæ€Žä¹ˆè‡ªå·±è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ±  å®‰å“é‡Œè§£å†³å¤šçº¿ç¨‹å†²çªçš„æ–¹æ³• Androidçº¿ç¨‹æ± è®¾è®¡åŽŸç† è¿›ç¨‹çº¿ç¨‹åŒºåˆ« è¿›ç¨‹é€šä¿¡æ–¹å¼æœ‰å“ªäº›çº¿ç¨‹é€šä¿¡æ–¹å¼æœ‰å“ªäº› å®‰å“çš„çº¿ç¨‹é€šä¿¡ JAVAGCå¦‚ä½•åˆ¤æ–­æ˜¯å¦å›žæ”¶ä»¥åŠåƒµå°¸çº¿ç¨‹ åŒçº¿ç¨‹é€šè¿‡çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æ‰“å°12121212â€¦â€¦. ä¸ºä»€ä¹ˆå®‰å“ç”¨BINDER æœ‰å•¥ä¼˜ç‚¹ å®‰å“ä¸­è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æµ‹ï¼‰ï¼Œä¸ºä»€ä¹ˆè¦ä¸¤æ¬¡åˆ¤æ–­ï¼Œvolatileä½œç”¨ å¤šçº¿ç¨‹å¦‚ä½•è§£å†³çº¿ç¨‹å†²çªï¼Ÿ JavaåŠ é”æ–¹å¼ æ­»é”çš„å¿…è¦æ¡ä»¶ 2 æ­»é”æ€Žä¹ˆé€ æˆçš„ å¤šçº¿ç¨‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ æ­»é”çš„æ¡ä»¶ï¼Œæ‰‹å†™ä¸€ä¸ªæ­»é”ä»£ç å¹¶è¿è¡Œå‡ºæ¥ æ€Žä¹ˆé¿å…æ­»é”é—®é¢˜ å¯é‡å…¥é” å¯¹è±¡ã€é”ã€å¯¹è±¡ç›‘è§†å™¨ç›¸äº’ä¹‹é—´çš„å…³ç³»ï¼Ÿ ä¹è§‚é”å¦‚ä½•å®žçŽ°ï¼Ÿç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ volatile å’Œ synchronized æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ synchronized å’Œ lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ synchronized åº•å±‚æ˜¯å¦‚ä½•å®žçŽ°åŠ é”æ“ä½œçš„ï¼Ÿ ThreadLocal æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ ThreadLocaläº†è§£ä¹ˆï¼Œä»–æœ‰ä»€ä¹ˆé—®é¢˜ ThreadLocalMapä¸­é‡åˆ°å†²çªæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ threadlocalï¼ŒåŠ¨æ€ä»£ç†ï¼Œè¿™ä¿©æˆ‘è¯´æ²¡ç”¨è¿‡ä¸äº†è§£ synchronized åº•å±‚æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Ÿ ReentrantLock å¦‚ä½•å®žçŽ°å…¬å¹³é”ä¸Žéžå…¬å¹³é”ï¼Ÿ å…¬å¹³é”ä¸Žéžå…¬å¹³é”çš„é‡Šæ”¾æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ¶ˆè´¹è€…ä¸Žç”Ÿäº§è€…æ¨¡åž‹ å®žçŽ°å¤šçº¿ç¨‹çš„å‡ ç§æ–¹å¼ ä¹è§‚é”å’Œæ‚²è§‚é” wait å’Œ sleep çš„åŒºåˆ« Android çº¿ç¨‹é—´é€šä¿¡æœ‰å“ªå‡ ç§æ–¹å¼ â€”â€”1. å…±äº«å†…å­˜ï¼ˆå˜é‡ï¼‰ï¼›2.æ–‡ä»¶ï¼Œæ•°æ®åº“ï¼›3.Handlerï¼›4.Java é‡Œçš„ wait()ï¼Œnotify()ï¼ŒnotifyAll() synchronized åŽŸç† é”çš„å‡çº§ JVMå†…å­˜æ¨¡åž‹ ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹ï¼Œåº”ç”¨ï¼ˆçº¿ç¨‹æ± ï¼‰ ç”¨è¿‡çº¿ç¨‹æ± å—ï¼Œçº¿ç¨‹æ± å¦‚ä½•å®žçŽ° å¦‚ä½•å…¨å±€ç®¡ç†å¼‚æ­¥ä»»åŠ¡(ä¸çŸ¥é“) å¤šçº¿ç¨‹ä¸‹å¦‚ä½•ä¿è¯ç±»çš„çº¿ç¨‹å®‰å…¨ï¼Ÿ CopyOnWriteArrayListåº•å±‚å®žçŽ°ï¼Ÿå¦‚ä½•å®žçŽ°çº¿ç¨‹å®‰å…¨ï¼Ÿ çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ•°é‡çš„è®¾è®¡è€ƒè™‘å› ç´  MAPHashMapHashMapçš„å®žçŽ°æœºåˆ¶ï¼Œæ€Žä¹ˆæ ·HashMapçº¿ç¨‹å®‰å…¨ 1.HashMapåŽŸç†åˆ›å»ºHashMapè¦æ”¾å…¥1000ä¸ªä¸åŒhashCodeçš„é”®å€¼å¯¹,åˆå§‹æœ€å¤§å€¼å¤šå°‘HashMapå¦‚æžœHashå†²çªäº†æ€Žä¹ˆè§£å†³ï¼Ÿ 2 HashMapçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ concurrenthashmapè¯¦è§£ hashtable,hashmapä¸Ž concurrenthashmapè¯¦è§£ ConcurrentHashMap æ˜¯å¦‚ä½•å®žçŽ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿå¦‚æžœè®©ä½ è®¾è®¡é”çš„æ•°é‡ä½ ä¼šæ€Žä¹ˆè®¾è®¡æ¥æé«˜æ•ˆçŽ‡ï¼Ÿ HashMapçš„æ‰©å®¹æœºåˆ¶ï¼Œå®ƒçº¿ç¨‹å®‰å…¨å—ï¼Ÿ å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼Œ hashmapæ’å…¥æ•°æ®çš„æµç¨‹ï¼Ÿ å¦‚ä½•è®¡ç®—hashmapæ•°æ®æ’å…¥çš„ä½ç½®ï¼Ÿ å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ æœ‰ä¸€åƒä¸ªé”®å€¼å¯¹çš„æ•°æ®ï¼Œå¦‚ä½•è®¾è®¡HashMapçš„åˆå§‹å®¹é‡å¤§å°ï¼ŸHashMapçš„å®žçŽ°åŽŸç† 2 å’ŒHashTableåŒºåˆ«ï¼Œçº¿ç¨‹ä¸å®‰å…¨çš„åŽŸå›  å“ˆå¸Œè¡¨è§£å†³å†²çªçš„æ–¹æ³• ArrayListçº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—æœ‰å“ªäº› ArrayListçš„æ‰©å®¹æœºåˆ¶ï¼Ÿ åº•å±‚å®žçŽ°ï¼Ÿæ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿ ArrayListçš„removeæ–¹æ³•åŽŸç† ArrayListå’ŒLinkedListåŒºåˆ« 2 é¢è¯•å®˜ç»™äº†ä¸€æ®µä»£ç ï¼Œé—®è¿è¡Œç»“æžœï¼šä»£ç æ˜¯newäº†ä¸ªç©ºarraylistï¼ˆstringï¼Œintegerï¼‰é—®è¿™æ—¶å€™int i&#x3D;arraylist.getï¼ˆâ€œkeyâ€ï¼‰ç„¶åŽprintä¼šè¾“å‡ºå•¥ å¦‚æžœæ˜¯Integer iå‘¢ï¼Œä¼šæ˜¯å•¥ï¼ˆå¥½å®¶ä¼™ä¸¤ä¸ªå…¨ç­”é”™ï¼‰ DESIGN MODELmvpæ˜¯ä»€ä¹ˆï¼Ÿ2 MVVMä¸Žmvcã€mvpæž¶æž„çš„åŒºåˆ«ä¸Žè”ç³» MVVMã€MVCã€MVPçš„åŒºåˆ«ä¸Žè”ç³»ï¼Œå„è‡ªä¼˜ç¼ºç‚¹ mvvmç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ ä»‹ç»ä¸€ä¸‹ä¸­ä»‹è€…æ¨¡å¼å§ é—®è®¾è®¡æ¨¡å¼ï¼Œè¦æ±‚æŒ‘ä¸€ä¸ªæ·±å…¥åˆ†æžï¼Œé—®ä½ å¯¹è¿™äº›æ¨¡å¼çš„ç†è§£ é™¤äº†ä¸­ä»‹è€…æ¨¡å¼ä½ è¿˜äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ é¢å‘å¯¹è±¡çš„åŽŸåˆ™æœ‰å“ªäº› AOPäº†è§£å— è¯´è¯´ä½ å¯¹è®¾è®¡æ¨¡å¼çš„ç†è§£ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä¸»è¦ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ ä»‹ç»ä¸€ä¸‹ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ ä½ éƒ½ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ Androidä¸­çš„ClassLoader é¢å‘åˆ‡é¢ç¼–ç¨‹ä½ çŸ¥é“ä¹ˆï¼Œå’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«å’Œç»†èŠ‚ è®¾è®¡æ¨¡å¼ä½œç”¨ åŠ¨æ€ä»£ç†ä¸Žé™æ€ä»£ç†","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW JAVA","slug":"interview-java","date":"2024-05-27T06:17:54.000Z","updated":"2024-09-15T09:53:31.965Z","comments":true,"path":"/2024/05/27/interview-java/","link":"","permalink":"https://noteforme.github.io/2024/05/27/interview-java/","excerpt":"","text":"JAVA å¤šå®žçŽ°æŽ¥å£ï¼Œå¦‚æžœæŽ¥å£é‡Œé¢æœ‰å…¥å‚å‡ºå‚ä¸€æ ·çš„åŒåæ–¹æ³•ï¼Œä¼šå®žçŽ°å‡ ä¸ª è¯´ä¸€ä¸‹finalï¼Œstatic . finalçš„arraylistï¼Œå¾€é‡Œé¢addä¸œè¥¿ä¼šå’‹æ · staticæ–¹æ³•èƒ½è°ƒç”¨éžé™æ€å—ï¼Œéžé™æ€èƒ½è°ƒç”¨staticå— é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼Œå¤šæ€æ€Žä¹ˆå®žçŽ° é™æ€æ–¹æ³•ä¸Žå˜é‡æ˜¯å¦å¯ä»¥ç»§æ‰¿ï¼ŒåŽŸå›  Javaå†…å­˜æ¨¡å—åˆ†åŒºå’ŒGCæœºåˆ¶ï¼Œ GCç®—æ³•æœ‰å“ªäº› Finalizeæœºåˆ¶ å¼ºå¼•ç”¨ å¼±å¼•ç”¨ è½¯å¼•ç”¨ è™šå¼•ç”¨çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ ClassLoaderçš„åŒäº²å§”æ‰˜æœºåˆ¶ 2 .Javaä»£ç†æ˜¯å¦ç”¨è¿‡ï¼Œæ€Žä¹ˆå®žçŽ° ç±»åŠ è½½çš„è¿‡ç¨‹ ç±»åŠ è½½å™¨ï¼ŒåŒäº²å§”æ´¾æ¨¡åž‹ å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥å›žæ”¶çš„æ–¹æ³• æœ‰å“ªäº›GC roots Javaå¼•ç”¨ç±»åž‹ æŠ½è±¡ç±»ä¸ŽæŽ¥å£åŒºåˆ«ï¼Œå„è‡ªä¼˜ç¼ºç‚¹ Javaæ³›åž‹ï¼Œæ³›åž‹æ“¦é™¤æœºåˆ¶ åŒ¿åå†…éƒ¨ç±»ï¼ŒåŽŸç†æ˜¯ä»€ä¹ˆ Javaå¼•ç”¨ç±»åž‹ï¼Œå¼±å¼•ç”¨çš„ä½œç”¨ï¼Œå¼•ç”¨é˜Ÿåˆ—ã€‚ Javaå†…å­˜å›žæ”¶ GC roots åžƒåœ¾æ ‡è®°æ–¹æ³•(æ‹“å±•äº†å¾ˆå¤š) Javaå…¥å£å‡½æ•° Javaå¼‚å¸¸ä»‹ç»ï¼Œæ˜¯å¦æ‰€æœ‰å¼‚å¸¸éƒ½éœ€è¦æ•èŽ· ç±»ç¼–è¯‘è¿‡ç¨‹ JVM ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ JVM å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡éœ€è¦è¢«å›žæ”¶? å¦‚æžœç”µè„‘å†…å­˜æ˜¯4Gï¼Œå·²ç»ä½¿ç”¨äº†3Gï¼ŒçŽ°åœ¨å¯åŠ¨ä¸€ä¸ªç¨‹åºéœ€è¦è¶…è¿‡1Gçš„å†…å­˜ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ(å†…å­˜å›žæ”¶) ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ åŒäº²å§”æ´¾æ¨¡åž‹æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ &#x3D;&#x3D;å’Œequalsçš„åŒºåˆ« é‡è½½å’Œé‡å†™çš„åŒºåˆ« å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ staticã€finalä½œç”¨ æ‰€æœ‰ç±»çš„çˆ¶ç±» this()å’Œsuper() intå’ŒIntegerçš„åŒºåˆ« çº¿ç¨‹æ± å’Œçº¿ç¨‹ é”äº†è§£å“ªäº›ï¼ˆè¯´äº†åˆ†å¸ƒå¼é”ï¼Œåˆé—®æˆ‘åˆ†å¸ƒå¼é”æ˜¯ä»€ä¹ˆï¼‰ Javaåå°„åŽŸç†Javaé¢å‘å¯¹è±¡çš„ç†è§£ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ Javaå››æ¬¡å¼•ç”¨ åžƒåœ¾å›žæ”¶æœºåˆ¶ çº¿ç¨‹å®‰å…¨çš„é›†åˆæœ‰å“ªäº›ï¼ˆé—®å¾—æ¯”è¾ƒç»†ï¼‰ è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ HashMapçš„åº•å±‚å®žçŽ° Viewçš„ç»˜åˆ¶è¿‡ç¨‹ Stringã€StringBufferã€StringBuidlerçš„åŒºåˆ« æ³¨è§£çš„ç±»åž‹æœ‰å“ªäº›ï¼Ÿ JVMçš„å†…å­˜æ¨¡åž‹ ä»€ä¹ˆæ˜¯å¤šæ€ï¼Œæ€Žä¹ˆåŽ»å®žçŽ°å‘¢ æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Œå®ƒä»¬å„è‡ªçš„ä½¿ç”¨åœºæ™¯å‘¢ javaå››ç§å¼•ç”¨JVMå†…å­˜åŒºåŸŸ OOMèƒ½æ•èŽ·å— è¿è¡Œæ—¶å¼‚å¸¸ä¸Žç¼–è¯‘æ—¶å¼‚å¸¸ äº†è§£ç½‘ç»œå­—èŠ‚åºå— åŒäº²å§”æ´¾(å†™ä¸€ä¸ªè·¯å¾„åå­—ä¸€æ ·çš„Stringï¼Œnew Stringï¼ˆï¼‰ä¼šåˆ›å»ºè‡ªå·±å†™çš„è¿˜æ˜¯ç³»ç»Ÿçš„) å—æ£€å¼‚å¸¸å’Œéžå—æ£€å¼‚å¸¸ æŠ½è±¡ç±»å’ŒæŽ¥å£çš„åŒºåˆ« javaé‡Œå¼±å¼•ç”¨å’Œå¼ºå¼•ç”¨åˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ æ·±æ‹·è´ã€æµ…æ‹·è´ OSè¿›ç¨‹çº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­çš„å®žçŽ° å†…æ ¸æ€ä¸Žç”¨æˆ·æ€ linuxå†…å­˜ç®¡ç†æœºåˆ¶ è™šæ‹Ÿå†…å­˜ä¸Žç‰©ç†å†…å­˜ è¿›ç¨‹é—´èƒ½å…±äº«å†…å­˜å— è™šæ‹Ÿå†…å­˜ è·¨è¿›ç¨‹é€šä¿¡çš„å‡ ç§æ–¹å¼ çº¿ç¨‹ä¸Žè¿›ç¨‹çš„ä½¿ç”¨åœºæ™¯ çº¿ç¨‹å®‰å…¨ä¸Žä¸å®‰å…¨çš„ä¾‹å­ Bç«™çš„è™šæ‹Ÿäººç‰©ä¹ˆï¼Œä½ è§‰å¾—å½“å‰çš„æŠ€æœ¯æ–¹é¢æ˜¯æ€Žä¹ˆæ¥è¿›è¡Œå®žçŽ°çš„ https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Java/HashMap%E5%8E%9F%E7%90%86-%E7%BE%8E%E5%9B%A2.html é¢è¯•é¢˜å«ç­”æ¡ˆ javaåŸºç¡€é¢è¯•çŸ¥è¯†ç‚¹javaä¸­&#x3D;&#x3D;å’Œequalså’ŒhashCodeçš„åŒºåˆ«ç±»åž‹ åŸºæœ¬ç±»åž‹ï¼šæ¯”è¾ƒçš„æ˜¯å€¼æ˜¯å¦ç›¸åŒï¼› å¼•ç”¨ç±»åž‹ï¼šå¦‚æžœæ˜¯ ç±»ã€æŽ¥å£ã€æ•°ç»„çš„è¯,å½“ä»–ä»¬ç”¨åŒç­‰å·ï¼ˆ&#x3D;&#x3D;ï¼‰è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œæ¯”è¾ƒçš„æ˜¯ä»–ä»¬çš„å¼•ç”¨ï¼Œå¦‚æžœè¦æ¯”è¾ƒå †ä¸­å¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œé‚£ä¹ˆå°±è¦é‡å†™equalsæ–¹æ³•äº†ï¼› é»˜è®¤æƒ…å†µä¸‹ï¼ˆæ²¡æœ‰è¦†å†™equalsæ–¹æ³•ï¼‰çš„equalsæ–¹æ³•éƒ½æ˜¯è°ƒç”¨Objectç±»çš„equalsæ–¹æ³•ï¼Œè€ŒObjectçš„equalsæ–¹æ³•ä¸»è¦æ˜¯ç”¨äºŽåˆ¤æ–­å¯¹è±¡çš„å†…å­˜åœ°å€å¼•ç”¨æ˜¯ä¸æ˜¯åŒä¸€ä¸ªåœ°å€ï¼ˆæ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚ intã€charã€longå„å å¤šå°‘å­—èŠ‚æ•°byte 1å­—èŠ‚ short 2å­—èŠ‚ int 4å­—èŠ‚ long 8å­—èŠ‚ char 2å­—èŠ‚ float 4å­—èŠ‚ double 8å­—èŠ‚ boolean false&#x2F;true(ç†è®ºä¸Šå ç”¨1bit,1&#x2F;8å­—èŠ‚ï¼Œå®žé™…å¤„ç†æŒ‰1byteå¤„ç†) intä¸Žintegerçš„åŒºåˆ«â€‹ Integer æ˜¯intçš„åŒ…è£…ç±»ï¼›intæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹; â€‹ Integerå®žé™…æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œintæ˜¯ç›´æŽ¥å­˜å‚¨æ•°æ®å€¼ è°ˆè°ˆå¯¹javaå¤šæ€(polymorphism)çš„ç†è§£,Javaä¸­å®žçŽ°å¤šæ€çš„æœºåˆ¶æ˜¯ä»€ä¹ˆå®žçŽ°çš„æœºåˆ¶æ˜¯ï¼Œçˆ¶ç±»æˆ–è€…æŽ¥å£å®šä¹‰çš„å¼•ç”¨å˜é‡æŒ‡å‘å­ç±»æˆ–è€…å­ç±»çš„å®žçŽ°ï¼Œ æ‰§è¡ŒæœŸé—´åˆ¤æ–­æ‰€å¼•ç”¨å¯¹è±¡çš„å®žé™…ç±»åž‹ï¼Œæ ¹æ®å…¶å®žé™…çš„ç±»åž‹è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚ ç¼–è¯‘æ—¶å¤šæ€(é™æ€å¤šæ€)&#x3D;&#x3D;é‡è½½ è¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ æ— è®ºå“ªç§æ–¹æ³•ï¼Œæ ¸å¿ƒä¹‹å¤„åœ¨å¯¹çˆ¶ç±»æ–¹æ³•çš„æ”¹å†™æˆ–å¯¹æŽ¥å£æ–¹æ³•çš„å®žçŽ°ï¼Œä»¥å–å¾—è¿è¡Œæ—¶ä¸åŒçš„æ‰§è¡Œæ•ˆæžœ. https://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html https://cloud.tencent.com/developer/article/1447574 Stringã€StringBufferã€StringBuilderåŒºåˆ« éƒ½æ˜¯fianlç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿,åº•å±‚éƒ½æ˜¯ char[] valueå®žçŽ° Stringç±»é•¿åº¦æ˜¯ä¸å¯å˜çš„ï¼Œsubstring()ã€ concat(),æœ€ç»ˆå®žçŽ°éƒ½æ˜¯é€šè¿‡ new String(buf, true)å®žçŽ°çš„,StringBuffer,StringBuilderæ˜¯é€šè¿‡æ“ä½œæœ¬ç±»çš„valueå®žçŽ°çš„ StringBufferç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒStringBuilderä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ Stringï¼šå­—ç¬¦ä¸²å¸¸é‡ã€‚ â€‹ ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿå†…éƒ¨ç±»çš„ä½œç”¨â€‹ å†…éƒ¨ç±»: ä¸€ä¸ªç±»å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œå°±å«å†…éƒ¨ç±» â€‹ ä½œç”¨: å†…éƒ¨ç±» æ‹¥æœ‰å¤–éƒ¨ç±»çš„æ‰€æœ‰è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬è¢«privateä¿®é¥°çš„ç§æœ‰æ•°æ® å†…éƒ¨ç±»å¯ä»¥å¾ˆå¥½çš„éšè—å®žçŽ° å†…éƒ¨ç±»å¯ä»¥å®žçŽ°å¤šé‡ç»§æ‰¿ 12345678910111213141516171819202122232425262728293031323334353637383940//ç±»ä¸€public class ClassA &#123; public String name()&#123; return &quot;liutao&quot;; &#125; public String doSomeThing()&#123; // doSomeThing &#125;&#125;//ç±»äºŒpublic class ClassB &#123; public int age()&#123; return 25; &#125;&#125;//ç±»ä¸‰public class MainExample&#123; private class Test1 extends ClassA&#123; public String name()&#123; return super.name(); &#125; &#125; private class Test2 extends ClassB&#123; public int age()&#123; return super.age(); &#125; &#125; public String name()&#123; return new Test1().name(); &#125; public int age()&#123; return new Test2().age(); &#125; public static void main(String args[])&#123; MainExample mi=new MainExample(); System.out.println(&quot;å§“å:&quot;+mi.name()); System.out.println(&quot;å¹´é¾„:&quot;+mi.age()); &#125;&#125; MainExample ç±»é€šè¿‡å†…éƒ¨ç±»æ‹¥æœ‰äº† ClassA å’Œ ClassB çš„ä¸¤ä¸ªç±»çš„ç»§æ‰¿å…³ç³»ã€‚ è€Œæ— éœ€å…³æ³¨ ClassA ä¸­çš„ doSomeThing æ–¹æ³•çš„å®žçŽ°ã€‚è¿™å°±æ˜¯æ¯”æŽ¥å£å®žçŽ°æ›´æœ‰æˆçš„åœ°æ–¹ https://juejin.cn/post/6844903566293860366 æŠ½è±¡ç±»å’ŒæŽ¥å£åŒºåˆ« Abstract class Interface 1) Abstract class can have abstract and non-abstract methods. Interface can have only abstract methods. Since Java 8, it can have default and static methods also. 2) Abstract class doesnâ€™t support multiple inheritance. Interface supports multiple inheritance. 3) Abstract class can have final, non-final, static and non-static variables. Interface has only static and final variables. 4) Abstract class can provide the implementation of interface. Interface canâ€™t provide the implementation of abstract class. 5) The abstract keyword is used to declare abstract class. The interface keyword is used to declare interface. 6) An abstract class can extend another Java class and implement multiple Java interfaces. An interface can extend another Java interface only. 7) An abstract class can be extended using keyword â€œextendsâ€. An interface can be implemented using keyword â€œimplementsâ€. 8) A Java abstract class can have class members like private, protected, etc. Members of a Java interface are public by default. 9)Example: public abstract class Shape{ public abstract void draw(); } Example: public interface Drawable{ void draw(); } https://www.javatpoint.com/difference-between-abstract-class-and-interface ? æ³›åž‹ä¸­extendså’Œsuperçš„åŒºåˆ« ä¸Šç•Œ&lt;? extends T&gt;ä¸èƒ½å¾€é‡Œå­˜ï¼Œåªèƒ½å¾€å¤–å–ï¼Œé€‚åˆé¢‘ç¹å¾€å¤–é¢è¯»å–å†…å®¹çš„åœºæ™¯ã€‚ ä¸‹ç•Œ&lt;? super T&gt;ä¸å½±å“å¾€é‡Œå­˜ï¼Œä½†å¾€å¤–å–åªèƒ½æ”¾åœ¨Objectå¯¹è±¡é‡Œï¼Œé€‚åˆç»å¸¸å¾€é‡Œé¢æ’å…¥æ•°æ®çš„åœºæ™¯ https://noteforme.github.io/2018/04/16/Generics/ string è½¬æ¢æˆ integerçš„æ–¹å¼åŠåŽŸç† åˆ¤æ–­æ˜¯å¦nullæˆ–â€â€ åˆ¤æ–­ç¬¬ä¸€ä½æ­£è´Ÿæ•°ï¼Œé€ä½èŽ·å–å€¼ ? https://blog.csdn.net/nobody_1/article/details/91488686 é™æ€å†…éƒ¨ç±»çš„è®¾è®¡æ„å›¾â€‹ éžé™æ€å†…éƒ¨ç±»ç¼–è¯‘åŽä¼šéšå«çš„ä¿å­˜ç€ä¸€ä¸ªå¼•ç”¨ï¼Œæ”¹å¼•ç”¨æŒ‡å‘åˆ›å»ºå®ƒçš„å¤–å›´ç±»ï¼Œé™æ€å†…éƒ¨ç±»æ²¡æœ‰ï¼Œ â€‹ å®ƒä¸èƒ½ä½¿ç”¨ä»»ä½•å¤–å›´ç±»çš„éžstaticæˆå‘˜å˜é‡å’Œæ–¹æ³•. finalï¼Œfinallyï¼Œfinalizeçš„åŒºåˆ«Final : ç”¨äºŽç”³æ˜Žå±žæ€§ï¼Œæ–¹æ³•ï¼Œç±»ï¼Œè¡¨ç¤ºå±žæ€§ä¸å¯å˜ï¼Œæ–¹æ³•ä¸å¯ä»¥è¦†ç›–ï¼Œç±»ä¸èƒ½ç»§æ‰¿ finalæ•°ç»„ Java ä¸­æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ 12345final int arr[] = &#123;1, 2, 3, 4, 5&#125;; // æ³¨æ„ï¼Œæ•°ç»„ arr æ˜¯ final çš„ for (int i = 0; i &lt; arr.length; i++) &#123; arr[i] = arr[i]*10; System.out.println(arr[i]); &#125; æ•°ç»„æ˜¯å¯¹è±¡çš„ä¸€ç§ï¼ŒçŽ°åœ¨æ•°ç»„æ˜¯è¢« final ä¿®é¥°çš„ï¼Œæ‰€ä»¥å®ƒçš„æ„æ€æ˜¯ä¸€æ—¦è¢«èµ‹å€¼ä¹‹åŽï¼Œå˜é‡çš„å¼•ç”¨ä¸èƒ½ä¿®æ”¹ã€‚ä½†æ˜¯æˆ‘ä»¬çŽ°åœ¨æƒ³è¯æ˜Žçš„æ˜¯ï¼Œæ•°ç»„å¯¹è±¡é‡Œé¢çš„å†…å®¹å¯ä»¥ä¿®æ”¹ éžæ•°ç»„å¯¹è±¡ 12345678class Test &#123; int p = 20; public static void main(String args[])&#123; final Test t = new Test(); t.p = 30; System.out.println(t.p); &#125;&#125; æŠŠå®ƒç”¨ final ä¿®é¥°ï¼Œç„¶åŽåŽ»å°è¯•æ”¹å®ƒé‡Œé¢æˆå‘˜å˜é‡ p çš„å€¼ï¼Œå¹¶æ‰“å°å‡ºç»“æžœï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œ30â€ã€‚ä¸€å¼€å§‹ p çš„å€¼æ˜¯ 20ï¼Œä½†æ˜¯æœ€åŽä¿®æ”¹å®Œæ¯•å˜æˆäº† 30ï¼Œè¯´æ˜Žè¿™æ¬¡ä¿®æ”¹æ˜¯æˆåŠŸçš„ã€‚ ä»¥ä¸Šæˆ‘ä»¬å°±å¾—å‡ºäº†ä¸€ä¸ªç»“è®ºï¼Œfinal ä¿®é¥°ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å˜é‡çš„æ—¶å€™ï¼Œå¯¹è±¡æœ¬èº«çš„å†…å®¹ä¾ç„¶æ˜¯å¯ä»¥å˜åŒ–çš„ã€‚ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=311 Finally: å¼‚å¸¸è¯­å¥å¤„ç†æœºæž„ä¸­ï¼Œä¸Žtry{}è¿›è¡Œé…åˆä½¿ç”¨ï¼Œä¸è®ºtryä¸­çš„ä»£ç æ˜¯å¦æ‰§è¡Œå®Œï¼Œè¡¨ç¤ºæ€»æ˜¯æ‰§è¡Œçš„éƒ¨åˆ† Finalize: Objectç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºŽå¯¹è±¡â€æ¶ˆå¤±â€æ—¶ï¼Œç”±JVMè¿›è¡Œè°ƒç”¨ç”¨äºŽå¯¹å¯¹è±¡è¿›è¡Œåžƒåœ¾å›žæ”¶ï¼Œé‡Šæ”¾å¯¹è±¡å ç”¨çš„èµ„æº. Serializable å’ŒParcelable çš„åŒºåˆ«ï¼Œå¦‚ä½•å°†ä¸€ä¸ªJavaå¯¹è±¡åºåˆ—åŒ–åˆ°æ–‡ä»¶é‡Œï¼Ÿ ä¸¤è€…æœ€å¤§çš„åŒºåˆ«åœ¨äºŽ å­˜å‚¨åª’ä»‹çš„ä¸åŒï¼ŒSerializable ä½¿ç”¨ I&#x2F;O è¯»å†™å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œè€Œ Parcelable æ˜¯ç›´æŽ¥ åœ¨å†…å­˜ä¸­è¯»å†™ã€‚å¾ˆæ˜Žæ˜¾ï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦é€šå¸¸å¤§äºŽ IO è¯»å†™ï¼Œæ‰€ä»¥åœ¨ Android ä¸­ä¼ é€’æ•°æ®ä¼˜å…ˆé€‰æ‹© Parcelableã€‚ Serializable ä¼šä½¿ç”¨åå°„ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹éœ€è¦å¤§é‡ I&#x2F;O æ“ä½œï¼Œä¹Ÿä¼šåˆ›å»ºå¾ˆå¤šä¸´æ—¶å¯¹è±¡ï¼Œ Parcelable è‡ªå·²å®žçŽ°å°é€å’Œè§£å°ï¼ˆmarshalled &amp;unmarshalledï¼‰æ“ä½œä¸éœ€è¦ç”¨åå°„ï¼Œæ•°æ®ä¹Ÿå­˜æ”¾åœ¨ Native å†…å­˜ä¸­ï¼Œæ•ˆçŽ‡è¦å¿«å¾ˆå¤šã€‚ https://juejin.cn/post/6844903518826921991 çˆ¶ç±»çš„é™æ€æ–¹æ³•èƒ½å¦è¢«å­ç±»é‡å†™ ä¸èƒ½ï¼Œé™æ€æ–¹æ³•åªå’Œç±»æœ‰å…³,JVMåŠ è½½åŽå…ˆåˆå§‹åŒ–staticç›¸å…³å±žæ€§æ–¹æ³•,é‡å†™ä¾èµ–äºŽç±»çš„å®žä¾‹. æˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ä»¥åŠé¡¹ç›®ä¸­çš„åº”ç”¨æˆå‘˜å†…éƒ¨ç±» : æ™®é€šçš„å†…éƒ¨ç±»ï¼Œä¸å­˜åœ¨ä»»ä½•staticçš„å˜é‡å’Œæ–¹æ³•ï¼› å±€éƒ¨å†…éƒ¨ç±»ï¼š åµŒå¥—äºŽæ–¹æ³•å’Œä½œç”¨åŸŸå†… 12345678910111213141516171819public class Parcel5 &#123; public Destionation destionation(String str)&#123; class PDestionation implements Destionation&#123; private String label; private PDestionation(String whereTo)&#123; label = whereTo; &#125; public String readLabel()&#123; return label; &#125; &#125; return new PDestionation(str); &#125; public static void main(String[] args) &#123; Parcel5 parcel5 = new Parcel5(); Destionation d = parcel5.destionation(&quot;chenssy&quot;); &#125;&#125; é—­åŒ…å’Œå±€éƒ¨å†…éƒ¨ç±»çš„åŒºåˆ« Javaä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸâ€‹ 1ã€åˆ›å»ºé˜¶æ®µ(Created) æ£€æµ‹ç±»æ˜¯å¦è¢«åŠ è½½æ²¡æœ‰åŠ è½½çš„å…ˆåŠ è½½â†’ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜â†’å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼â†’å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®â†’æ‰§è¡Œ&lt;init&gt;æ–¹æ³•æŠŠå¯¹è±¡è¿›è¡Œåˆå§‹åŒ– å¯¹è±¡çš„åŠ è½½å¤§å°æ˜¯ç±»åŠ è½½ä¸­å°±å·²ç»ç¡®å®šå¥½äº†çš„ï¼Œç±»åŠ è½½è¿‡ç¨‹å°±ç›¸å½“å¤æ‚äº†ï¼Œå¦‚ä¸‹å›¾ï¼š ç±»åŠ è½½è¿‡ç¨‹.png 2ã€åº”ç”¨é˜¶æ®µ(In Use) è‡³å°‘æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨ä½¿ç”¨ç€ 3ã€ä¸å¯è§é˜¶æ®µ(Invisible) ç¨‹åºçš„æ‰§è¡Œå·²ç»è¶…å‡ºäº†è¯¥å¯¹è±¡çš„ä½œç”¨åŸŸäº† 4ã€ä¸å¯è¾¾é˜¶æ®µ(Unreachable) ç¨‹åºä¸å†æŒæœ‰è¯¥å¯¹è±¡çš„ä»»ä½•å¼ºå¼•ç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥å¯¹è±¡ä»å¯èƒ½è¢«JVMç­‰ç³»ç»Ÿä¸‹çš„æŸäº›å·²è£…è½½çš„é™æ€å˜é‡æˆ–çº¿ç¨‹æˆ–JNIç­‰å¼ºå¼•ç”¨æŒæœ‰ç€ï¼Œè¿™äº›ç‰¹æ®Šçš„å¼ºå¼•ç”¨è¢«ç§°ä¸ºâ€GC rootâ€ 5ã€æ”¶é›†é˜¶æ®µ(Collected) åžƒåœ¾å›žæ”¶å™¨å‘çŽ°è¯¥å¯¹è±¡å·²ç»å¤„äºŽâ€œä¸å¯è¾¾é˜¶æ®µâ€å¹¶ä¸”åžƒåœ¾å›žæ”¶å™¨å·²ç»å¯¹è¯¥å¯¹è±¡çš„å†…å­˜ç©ºé—´é‡æ–°åˆ†é…åšå¥½å‡†å¤‡æ—¶ï¼Œåˆ™å¯¹è±¡è¿›å…¥äº†â€œæ”¶é›†é˜¶æ®µâ€ã€‚å¦‚æžœè¯¥å¯¹è±¡å·²ç»é‡å†™äº†finalize()æ–¹æ³•ï¼Œåˆ™ä¼šåŽ»æ‰§è¡Œè¯¥æ–¹æ³•çš„ç»ˆç«¯æ“ä½œã€‚ 6ã€ç»ˆç»“é˜¶æ®µ(Finalized) å½“å¯¹è±¡æ‰§è¡Œå®Œfinalize()æ–¹æ³•åŽä»ç„¶å¤„äºŽä¸å¯è¾¾çŠ¶æ€æ—¶ï¼Œåˆ™è¯¥å¯¹è±¡è¿›å…¥ç»ˆç»“é˜¶æ®µã€‚åœ¨è¯¥é˜¶æ®µæ˜¯ç­‰å¾…åžƒåœ¾å›žæ”¶å™¨å¯¹è¯¥å¯¹è±¡ç©ºé—´è¿›è¡Œå›žæ”¶ã€‚ 7ã€å¯¹è±¡ç©ºé—´é‡åˆ†é…é˜¶æ®µ(De-allocated) åžƒåœ¾å›žæ”¶å™¨å¯¹è¯¥å¯¹è±¡çš„æ‰€å ç”¨çš„å†…å­˜ç©ºé—´è¿›è¡Œå›žæ”¶æˆ–è€…å†åˆ†é…äº†ï¼Œåˆ™è¯¥å¯¹è±¡å½»åº•æ¶ˆå¤±äº†ï¼Œç§°ä¹‹ä¸ºâ€œå¯¹è±¡ç©ºé—´é‡æ–°åˆ†é…é˜¶æ®µâ€ã€‚ é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/72f5017c6649 JVMStringç‰¹æ€§Javaè™šæ‹Ÿæœºåœ¨å†…å­˜ä¸­å¼€è¾Ÿå‡ºä¸€å—å•ç‹¬çš„åŒºåŸŸ https://zhuanlan.zhihu.com/p/60643031 https://www.bilibili.com/video/BV1PJ411n7xZ?p=118 å‡ ä¸ªè§†é¢‘è®²åˆ°ç”¨æ³•ï¼Œæœ€å¥½èƒ½ç”¨å›¾ç”»å‡ºæ¥ https://www.iteye.com/blog/rednaxelafx-774673 å“ªäº›æƒ…å†µä¸‹çš„å¯¹è±¡ä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å¤„ç†æŽ‰ï¼Ÿ å¯è¾¾æ€§åˆ†æž,GC Rootå‘ä¸‹æœç´¢ï¼Œäº§ç”Ÿä¸€ä¸ªreference chain ã€‚å½“ä¸€ä¸ªå¯¹è±¡ä¸èƒ½å’Œä»»ä½•GC Rootäº§ç”Ÿå…³ç³»æ—¶å°±è¢«å›žæ”¶. å¼ºå¼•ç”¨ ï¼šé‚£åžƒåœ¾å›žæ”¶å™¨ç»ä¸ä¼šå›žæ”¶ è½¯å¼•ç”¨: å†…å­˜æº¢å‡ºæ—¶å€™å¯¹è±¡å›žæ”¶ å¼±å¼•ç”¨:ä¸‹ä¸€æ¬¡GCæ—¶å€™å¯¹è±¡å›žæ”¶ è™šå¼•ç”¨ï¼šéšæ—¶å¯èƒ½è¢«å›žæ”¶ å½“å‰å•†ä¸šè™šæ‹Ÿæœºçš„åžƒåœ¾å›žæ”¶éƒ½é‡‡ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œè¿™ç§ç®—æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆæ–°çš„æ€æƒ³ï¼Œåªæ˜¯æ ¹æ®å¯¹è±¡çš„å­˜æ´»å‘¨æœŸå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚ä¸€èˆ¬æ˜¯æŠŠJavaå †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€é€‚å½“çš„æ”¶é›†ç®—æ³•ã€‚åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œæ¯æ¬¡åžƒåœ¾å›žæ”¶éƒ½æœ‰å¤§æ‰¹å¯¹è±¡æ­»åŽ»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œé‚£å°±é€‰ç”¨å¤åˆ¶ç®—æ³•ï¼Œåªè¦ä»˜å‡ºå°‘é‡å­˜æ´»å¯¹è±¡çš„å¤åˆ¶æˆæœ¬å°±å¯ä»¥å®Œæˆæ”¶é›†ã€‚è€Œè€å¹´ä»£ä¸­å› ä¸ºå¯¹è±¡å­˜æ´»çŽ‡é«˜ï¼Œæ²¡æœ‰é¢å¤–çš„ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œé‚£å°±ä½¿ç”¨æ ‡è®°æ¸…ç†æˆ–è€…æ ‡è®°æ•´ç†ç®—æ³•æ¥è¿›è¡Œå›žæ”¶ã€‚ https://noteforme.github.io/2021/01/05/JVM-GC/ https://noteforme.github.io/2020/04/18/JVM/ Stringä¸ºä»€ä¹ˆè¦è®¾è®¡æˆä¸å¯å˜çš„ï¼Ÿ ä¾¿äºŽå®žçŽ°å­—ç¬¦ä¸²æ±  ç”±äºŽä¼šå¤§é‡çš„ä½¿ç”¨Stringå¸¸é‡ï¼Œå¦‚æžœæ¯ä¸€æ¬¡å£°æ˜Žä¸€ä¸ªStringéƒ½åˆ›å»ºä¸€ä¸ªStringå¯¹è±¡ï¼Œé‚£å°†ä¼šé€ æˆæžå¤§çš„ç©ºé—´èµ„æºçš„æµªè´¹ã€‚Javaæå‡ºäº†String poolçš„æ¦‚å¿µï¼Œåœ¨å †ä¸­å¼€è¾Ÿä¸€å—å­˜å‚¨ç©ºé—´String poolï¼Œå½“åˆå§‹åŒ–ä¸€ä¸ªStringå˜é‡æ—¶ï¼Œå¦‚æžœè¯¥å­—ç¬¦ä¸²å·²ç»å­˜åœ¨äº†ï¼Œå°±ä¸ä¼šåŽ»åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å˜é‡ï¼Œè€Œæ˜¯ä¼šè¿”å›žå·²ç»å­˜åœ¨äº†çš„å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚ å¦‚æžœå­—ç¬¦ä¸²æ˜¯å¯å˜çš„ï¼ŒæŸä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡æ”¹å˜äº†å…¶å€¼ï¼Œé‚£ä¹ˆå…¶æŒ‡å‘çš„å˜é‡çš„å€¼ä¹Ÿä¼šæ”¹å˜ï¼ŒString poolå°†ä¸èƒ½å¤Ÿå®žçŽ°ï¼ https://www.cnblogs.com/wkfvawl/p/11693260.html javaæ·±å…¥æºç çº§çš„é¢è¯•é¢˜è®²ä¸€ä¸‹å¸¸è§ç¼–ç æ–¹å¼ï¼Ÿ ASCIIç : ç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½Ž7ä½è¡¨ç¤ºï¼Œæ€»å…±128ä¸ª,031 æ˜¯æŽ§åˆ¶å­—ç¬¦å¦‚æ¢è¡Œå›žè½¦åˆ é™¤ç­‰ï¼›32126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ UTF-16: å›ºå®šä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼šè¯´åˆ° UTF å¿…é¡»è¦æåˆ° Unicodeï¼ˆUniversal Code ç»Ÿä¸€ç ï¼‰ï¼ŒISO è¯•å›¾æƒ³åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¶…è¯­è¨€å­—å…¸ï¼Œä¸–ç•Œä¸Šæ‰€æœ‰çš„è¯­è¨€éƒ½å¯ä»¥é€šè¿‡è¿™æœ¬å­—å…¸æ¥ç›¸äº’ç¿»è¯‘ã€‚å¯æƒ³è€ŒçŸ¥è¿™ä¸ªå­—å…¸æ˜¯å¤šä¹ˆçš„å¤æ‚ï¼Œå…³äºŽ Unicode çš„è¯¦ç»†è§„èŒƒå¯ä»¥å‚è€ƒç›¸åº”æ–‡æ¡£ã€‚Unicode æ˜¯ Java å’Œ XML çš„åŸºç¡€ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç» Unicode åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨å½¢å¼ã€‚UTF-16 å…·ä½“å®šä¹‰äº† Unicode å­—ç¬¦åœ¨è®¡ç®—æœºä¸­å­˜å–æ–¹æ³•ã€‚UTF-16 ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode è½¬åŒ–æ ¼å¼ï¼Œè¿™ä¸ªæ˜¯å®šé•¿çš„è¡¨ç¤ºæ–¹æ³•ï¼Œä¸è®ºä»€ä¹ˆå­—ç¬¦éƒ½å¯ä»¥ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸¤ä¸ªå­—èŠ‚æ˜¯ 16 ä¸ª bitï¼Œæ‰€ä»¥å« UTF-16ã€‚UTF-16 è¡¨ç¤ºå­—ç¬¦éžå¸¸æ–¹ä¾¿ï¼Œæ¯ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªåœ¨å­—ç¬¦ä¸²æ“ä½œæ—¶å°±å¤§å¤§ç®€åŒ–äº†æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ Java ä»¥ UTF-16 ä½œä¸ºå†…å­˜çš„å­—ç¬¦å­˜å‚¨æ ¼å¼çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŽŸå› ã€‚ UTF-8: ä¼˜åŒ–UTF-16,UTF-16 ç»Ÿä¸€é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè™½ç„¶åœ¨è¡¨ç¤ºä¸Šéžå¸¸ç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼Œæœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºçš„çŽ°åœ¨è¦ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨ç©ºé—´æ”¾å¤§äº†ä¸€å€ï¼Œåœ¨çŽ°åœ¨çš„ç½‘ç»œå¸¦å®½è¿˜éžå¸¸æœ‰é™çš„ä»Šå¤©ï¼Œè¿™æ ·ä¼šå¢žå¤§ç½‘ç»œä¼ è¾“çš„æµé‡ï¼Œè€Œä¸”ä¹Ÿæ²¡å¿…è¦ã€‚è€Œ UTF-8 é‡‡ç”¨äº†ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ã€‚ä¸åŒç±»åž‹çš„å­—ç¬¦å¯ä»¥æ˜¯ç”± 1~6 ä¸ªå­—èŠ‚ç»„æˆã€‚UTF-8 æœ‰ä»¥ä¸‹ç¼–ç è§„åˆ™ï¼šå¦‚æžœä¸€ä¸ªå­—èŠ‚ï¼Œæœ€é«˜ä½ï¼ˆç¬¬ 8 ä½ï¼‰ä¸º 0ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª ASCII å­—ç¬¦ï¼ˆ00 - 7Fï¼‰ã€‚å¯è§ï¼Œæ‰€æœ‰ ASCII ç¼–ç å·²ç»æ˜¯ UTF-8 äº†ã€‚å¦‚æžœä¸€ä¸ªå­—èŠ‚ï¼Œä»¥ 11 å¼€å¤´ï¼Œè¿žç»­çš„ 1 çš„ä¸ªæ•°æš—ç¤ºè¿™ä¸ªå­—ç¬¦çš„å­—èŠ‚æ•°ï¼Œä¾‹å¦‚ï¼š110xxxxx ä»£è¡¨å®ƒæ˜¯åŒå­—èŠ‚ UTF-8 å­—ç¬¦çš„é¦–å­—èŠ‚ã€‚å¦‚æžœä¸€ä¸ªå­—èŠ‚ï¼Œä»¥ 10 å¼€å§‹ï¼Œè¡¨ç¤ºå®ƒä¸æ˜¯é¦–å­—èŠ‚ï¼Œéœ€è¦å‘å‰æŸ¥æ‰¾æ‰èƒ½å¾—åˆ°å½“å‰å­—ç¬¦çš„é¦–å­—èŠ‚ GBK ã€ISO-8859-1ã€GB2312 https://www.cnblogs.com/mlan/p/7823375.html https://www.cnblogs.com/mlan/p/7823375.html utf-8ç¼–ç ä¸­çš„ä¸­æ–‡å å‡ ä¸ªå­—èŠ‚ï¼›intåž‹å‡ ä¸ªå­—èŠ‚ï¼Ÿâ€‹ å°‘æ•°æ˜¯æ±‰å­—æ¯ä¸ªå ç”¨3ä¸ªå­—èŠ‚ï¼Œå¤šæ•°å ç”¨4ä¸ªå­—èŠ‚ã€‚ â€‹ https://blog.csdn.net/hellokatewj/article/details/24325653 â€‹ intç±»åž‹ 4ä¸ªå­—èŠ‚ é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†çš„åŒºåˆ«ï¼Œä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿâ€‹ é™æ€ä»£ç† : ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»å­˜åœ¨ï¼Œ â€‹ åŠ¨æ€ä»£ç† ï¼š é€šè¿‡åå°„æœºåˆ¶ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ â€‹ https://noteforme.github.io/2021/01/14/DesignPattern-Proxy/ â€‹ https://www.jianshu.com/p/2f518a4a4c2b Javaçš„å¼‚å¸¸ä½“ç³»éžè¿è¡Œæ—¶å¼‚å¸¸ :ç¼–è¯‘æœŸé—´å¯ä»¥æ£€æŸ¥åˆ°çš„å¼‚å¸¸, åƒIoException,DataFormatException,CertificateException è¿è¡Œæ—¶å¼‚å¸¸ : NullPointerException, ClassCastException,IndexOutOfBoundsException ? è°ˆè°ˆä½ å¯¹è§£æžä¸Žåˆ†æ´¾çš„è®¤è¯†ã€‚è¯´è¯´ä½ å¯¹Javaåå°„çš„ç†è§£â€‹ å¯¹äºŽä»»ä½•ä¸€ä¸ªç±»éƒ½å¯ä»¥é€šè¿‡åå°„çŸ¥é“çš„å®ƒçš„å±žæ€§å’Œæ–¹æ³•ã€‚ è¯´è¯´ä½ å¯¹Javaæ³¨è§£çš„ç†è§£â€‹ æ³¨è§£ï¼Œå¯¹ä»£ç è¿›è¡Œæ³¨æ˜Žã€‚ä½¿å¾—ç¨‹åºåœ¨ç¼–è¯‘æˆ–è€…è¿è¡Œæ—¶ï¼Œè¯»å–åˆ°æ³¨è§£å¹¶åŠ ä»¥å¤„ç†ï¼Œä»¥é—´æŽ¥çš„æ”¹å˜ç¨‹åºçš„è¿è¡Œã€‚ ä¸ºä»€ä¹ˆJavaé‡Œçš„åŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ï¼Ÿâ€‹ å› ä¸ºåŒ¿åå†…éƒ¨ç±»æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå•ç‹¬çš„ç±»ï¼Œè€Œè¢«è¯¥ç±»ä½¿ç”¨çš„å˜é‡ä¼šä»¥æž„é€ å‡½æ•°å‚æ•°çš„å½¢å¼ä¼ é€’ç»™è¯¥ç±»ã€‚å¦‚æžœå˜é‡ä¸å®šä¹‰ä¸ºfinalçš„ï¼Œå‚æ•°åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿›è€Œé€ æˆå’Œå¤–éƒ¨çš„å˜é‡ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¿™ç§ä¸ä¸€è‡´çš„æƒ…å†µï¼Œè§„å®šåŒ¿åå†…éƒ¨ç±»åªèƒ½è®¿é—®finalä¿®é¥°çš„å¤–éƒ¨å˜é‡ã€‚ è¯´è¯´ä½ å¯¹ä¾èµ–æ³¨å…¥çš„ç†è§£?â€‹ ç»™äºˆè°ƒç”¨æ–¹å®ƒæ‰€éœ€è¦çš„å¯¹è±¡ æ³›åž‹è¯´ä¸€ä¸‹æ³›åž‹åŽŸç†ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žâ€‹ æ³›åž‹å®žçŽ°äº†å‚æ•°åŒ–ç±»åž‹çš„æ¦‚å¿µï¼Œä½¿ä»£ç å¯ä»¥åº”ç”¨äºŽå¤šç§ç±»åž‹ã€‚ â€‹ åœ¨æ³›åž‹ä»£ç å†…éƒ¨ï¼Œæ— æ³•èŽ·å¾—ä»»ä½•æœ‰å…³æ³›åž‹å‚æ•°ç±»åž‹çš„ä¿¡æ¯ã€‚ å®¹å™¨å¸¸ç”¨æ•°æ®ç»“æž„ç®€ä»‹æ•°ç»„ æ ˆ é˜Ÿåˆ— é“¾è¡¨ å›¾ æ ‘ å“ˆå¸Œè¡¨ å¹¶å‘é›†åˆäº†è§£å“ªäº›ï¼ŸConcurrentHashMap CopyOnWriteArrayList CopyOnWriteArraySet ArrayBlockingQueue LinkedBlockingQueue https://blog.csdn.net/u010942020/article/details/73610121 åˆ—ä¸¾javaçš„é›†åˆä»¥åŠé›†åˆä¹‹é—´çš„ç»§æ‰¿å…³ç³» List,Set,Mapçš„åŒºåˆ«å®¹å™¨ç±»ä»‹ç»ä»¥åŠä¹‹é—´çš„åŒºåˆ«ï¼ˆå®¹å™¨ç±»ä¼°è®¡å¾ˆå¤šäººæ²¡å¬è¿™ä¸ªè¯ï¼ŒJavaå®¹å™¨ä¸»è¦å¯ä»¥åˆ’åˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼šListåˆ—è¡¨ã€Seté›†åˆã€Mapæ˜ å°„ã€å·¥å…·ç±»ï¼ˆIteratorè¿­ä»£å™¨ã€Enumerationæžšä¸¾ç±»ã€Arrayså’ŒCollectionsï¼‰ï¼Œå…·ä½“çš„å¯ä»¥çœ‹çœ‹è¿™ç¯‡åšæ–‡ Javaå®¹å™¨ç±»ï¼‰ Listæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰å®ƒçš„ç´¢å¼•ã€‚Setæ˜¯ä¸€ä¸ªä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆã€‚ Mapæ˜¯ä¸€ä¸ªæ˜ å°„æŽ¥å£ï¼Œå³key-valueé”®å€¼å¯¹ã€‚ Listå’ŒMapçš„å®žçŽ°æ–¹å¼ä»¥åŠå­˜å‚¨æ–¹å¼ list ArrayList æŸ¥è¯¢å¿« . LinkedList æ’å…¥åˆ é™¤å¿« ä¿®æ”¹å¯¹è±¡Açš„equalsæ–¹æ³•çš„ç­¾åï¼Œé‚£ä¹ˆä½¿ç”¨HashMapå­˜æ”¾è¿™ä¸ªå¯¹è±¡å®žä¾‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å“ªä¸ªequalsæ–¹æ³•ï¼Ÿ é›†åˆSetå®žçŽ°Hashæ€Žä¹ˆé˜²æ­¢ç¢°æ’ž1ï¼Œå¦‚æžœhashç å€¼ä¸ç›¸åŒï¼Œè¯´æ˜Žæ˜¯ä¸€ä¸ªæ–°å…ƒç´ ï¼Œå­˜å‚¨ï¼› å¦‚æžœæ²¡æœ‰å…ƒç´ å’Œä¼ å…¥å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯addçš„å…ƒç´ ï¼‰çš„hashå€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå…ƒç´ åœ¨tableä¸­ä¸å­˜åœ¨ï¼Œå°†å…¶æ·»åŠ è¿›tableï¼› 2.1ï¼Œå¦‚æžœhashç å€¼ç›¸åŒï¼Œä¸”equlesåˆ¤æ–­ç›¸ç­‰ï¼Œè¯´æ˜Žå…ƒç´ å·²ç»å­˜åœ¨ï¼Œä¸å­˜ï¼› 2.2ï¼Œå¦‚æžœhashç å€¼ç›¸åŒï¼Œä¸”equlesåˆ¤æ–­ä¸ç›¸ç­‰ï¼Œè¯´æ˜Žå…ƒç´ ä¸å­˜åœ¨ï¼Œå­˜ï¼› åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/github_37130188/article/details/96508272 â€‹ https://noteforme.github.io/2018/05/31/HashMap/ HashMap å¯¹keyçš„Dashcode()åšhashè¿ç®—ï¼Œè®¡ç®—index. å¦‚æžœæ²¡ç¢°æ’žç›´æŽ¥æ”¾åˆ°bucketâ¾¥ å¦‚æžœç¢°æ’žäº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåŽ å¦‚æžœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯â¼€æ€§) å¦‚æžœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resize getæ•°æ® å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æžœåœ¨bucketâ¾¥çš„ç¬¬â¼€ä¸ªèŠ‚ç‚¹â¾¥ç›´æŽ¥å‘½ä¸­ï¼Œåˆ™ç›´æŽ¥è¿”å›žï¼› å¦‚æžœæœ‰å†²çªï¼Œåˆ™é€šè¿‡key.equals(k)åŽ»æŸ¥æ‰¾å¯¹åº”çš„Entry;åˆ†ä¸ºä¸‹é¢ä¸¤ç§æ–¹å¼. è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(logn)ï¼› è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(n)ã€‚ ArrayMapArrayMapç›¸æ¯”ä¼ ç»Ÿçš„HashMapé€Ÿåº¦æ›´æ…¢ï¼Œå› ä¸ºå…¶æŸ¥æ‰¾æ–¹æ³•æ˜¯äºŒåˆ†æ³•ï¼Œå¹¶ä¸”å½“åˆ é™¤æˆ–æ·»åŠ æ•°æ®æ—¶ï¼Œä¼šå¯¹ç©ºé—´é‡æ–°è°ƒæ•´ï¼Œå¯ä»¥è¯´ArrayMapæ˜¯ç‰ºç‰²äº†æ—¶é—´æ¥æ¢ç©ºé—´ï¼ŒArrayMapä¸ŽHashMapçš„åŒºåˆ«ä¸»è¦åœ¨ï¼š å­˜å‚¨æ–¹å¼ä¸åŒï¼šHashMapå†…éƒ¨æœ‰ä¸€ä¸ªHashMapEntry&lt;K,V&gt;[ ]å¯¹è±¡ï¼Œè€ŒArrayMapæ˜¯ä¸€ä¸ª&lt;key,value&gt;æ˜ å°„çš„æ•°æ®ç»“æž„ï¼Œå†…éƒ¨ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œä¸€ä¸ªæ•°ç»„è®°å½•keyçš„hashå€¼ï¼Œå¦ä¸€ä¸ªæ•°ç»„è®°å½•valueå€¼ã€‚ æ·»åŠ æ•°æ®æ—¶æ‰©å®¹çš„å¤„ç†ä¸ä¸€æ ·ï¼šHashMapè¿›è¡Œäº†newæ“ä½œï¼Œé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œå¼€é”€å¾ˆå¤§ï¼Œè€ŒArrayMapç”¨çš„æ˜¯copyæ•°æ®ï¼Œæ•ˆçŽ‡ç›¸å¯¹é«˜å¾ˆå¤šã€‚ ArrayMapæä¾›äº†æ•°ç»„æ”¶ç¼©çš„åŠŸèƒ½ï¼Œåœ¨clearæˆ–removeä¹‹åŽï¼Œä¼šé‡æ–°æ”¶ç¼©æ•°ç»„ï¼Œé‡Šæ”¾ç©ºé—´ã€‚ ArrayMapé‡‡ç”¨çš„æ˜¯äºŒåˆ†æ³•æŸ¥æ‰¾ã€‚ hashmap hashtableåŒºåˆ«å †çš„ç»“æž„ â€‹ å †åˆ†ä¸ºä¸¤ç§ï¼šæœ€å¤§å †å’Œæœ€å°å †ï¼Œä¸¤è€…çš„å·®åˆ«åœ¨äºŽèŠ‚ç‚¹çš„æŽ’åºæ–¹å¼ã€‚ åœ¨æœ€å¤§å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„å€¼æ¯”æ¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½è¦å¤§ã€‚åœ¨æœ€å°å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„å€¼æ¯”æ¯ä¸€ä¸ªå­èŠ‚ç‚¹çš„å€¼éƒ½è¦å°ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå †å±žæ€§â€ï¼Œå¹¶ä¸”è¿™ä¸ªå±žæ€§å¯¹å †ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æˆç«‹ã€‚https://www.jianshu.com/p/6b526aa481b1 å †å’Œæ ‘çš„åŒºåˆ«â€‹ å·¦å­èŠ‚ç‚¹å¿…é¡»æ¯”çˆ¶èŠ‚ç‚¹å°ï¼Œå³å­èŠ‚ç‚¹å¿…é¡»å¿…æ¯”çˆ¶èŠ‚ç‚¹å¤§ã€‚ä½†æ˜¯åœ¨å †ä¸­å¹¶éžå¦‚æ­¤ã€‚åœ¨æœ€å¤§å †ä¸­ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½å¿…é¡»æ¯”çˆ¶èŠ‚ç‚¹å°ï¼Œè€Œåœ¨æœ€å°å †ä¸­ï¼Œå®ƒä»¬éƒ½å¿…é¡»æ¯”çˆ¶èŠ‚ç‚¹å¤§ã€‚ å †å’Œæ ˆåœ¨å†…å­˜ä¸­çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ(è§£ç­”æç¤ºï¼šå¯ä»¥ä»Žæ•°æ®ç»“æž„æ–¹é¢ä»¥åŠå®žé™…å®žçŽ°æ–¹é¢ä¸¤ä¸ªæ–¹é¢åŽ»å›žç­”)ï¼Ÿ ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´ æµ…æ‹·è´ æ˜¯ä¸€ä¸ªä¼ å€,ä¹Ÿå°±æ˜¯æŠŠaçš„å€¼èµ‹ç»™bçš„æ—¶å€™åŒæ—¶ä¹ŸæŠŠaçš„åœ°å€èµ‹ç»™äº†bï¼Œå½“bï¼ˆaï¼‰çš„å€¼æ”¹å˜çš„æ—¶å€™ï¼Œaï¼ˆbï¼‰çš„å€¼åŒæ—¶ä¹Ÿä¼šæ”¹å˜ æ·±æ‹·è´ â€‹ æ·±æ‹·è´æ˜¯æŒ‡ï¼Œæ‹·è´å¯¹è±¡çš„å…·ä½“å†…å®¹ï¼ŒäºŒå†…å­˜åœ°å€æ˜¯è‡ªä¸»åˆ†é…çš„ï¼Œæ‹·è´ç»“æŸä¹‹åŽä¿©ä¸ªå¯¹è±¡è™½ç„¶å­˜çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œä¿©ä¸ªå¯¹è±¡é¡µäº’ç›¸ä¸å½±å“ï¼Œäº’ä¸å¹²æ¶‰ æ‰‹å†™é“¾è¡¨é€†åºä»£ç  è®²ä¸€ä¸‹å¯¹æ ‘ï¼ŒB+æ ‘çš„ç†è§£ è®²ä¸€ä¸‹å¯¹å›¾çš„ç†è§£ åˆ¤æ–­å•é“¾è¡¨æˆçŽ¯ä¸Žå¦ï¼Ÿ é“¾è¡¨ç¿»è½¬ï¼ˆå³ï¼šç¿»è½¬ä¸€ä¸ªå•é¡¹é“¾è¡¨ï¼‰ åˆå¹¶å¤šä¸ªå•æœ‰åºé“¾è¡¨ï¼ˆå‡è®¾éƒ½æ˜¯é€’å¢žçš„ï¼‰","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW  experience ONLINE","slug":"interview-experience","date":"2024-05-27T06:06:56.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/05/27/interview-experience/","link":"","permalink":"https://noteforme.github.io/2024/05/27/interview-experience/","excerpt":"","text":"https://github.com/Moosphan/Android-Daily-Interview/ https://lrh1993.gitbooks.io/android_interview_guide&#x2F;content&#x2F; https://www.nowcoder.com/discuss/396383934924292096 https://www.nowcoder.com/discuss/456922214454091776 https://www.nowcoder.com/discuss/462666906584043520 æˆ‘æ˜¯21å¹´å…¥å‘ï¼Œä¸€å¹´æ™‹å‡ä¸€æ¬¡ï¼Œç¬¬ä¸€æ¬¡é ä¸šåŠ¡é…åˆæŠ€æœ¯ï¼Œç¬¬äºŒæ¬¡é æ•°æ®ç›‘æŽ§æ­å»ºé…åˆæ•°æ®æŒ–æŽ˜æ‰¾ä¸šåŠ¡ä¼˜åŒ–ç‚¹ï¼Œä¸‹ä¸€æ­¥æ‰“ç®—æŒ–æŽ˜ç«¯æ™ºèƒ½é…åˆåŠ¨æ€åŒ–åŠ ä¸Šæ•°æ®æŒ–æŽ˜æ¥ç»§ç»­æ™‹å‡ï¼Œå¦å¤–æˆ‘æ˜¯iOSå’ŒAndroidéƒ½åšï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ© â€¦ å±•å¼€ ä½œè€…ï¼šåæ³¡æ³¡çš„å’¸é±¼é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ æ€Žä¹ˆåœ¨çŸ­æ—¶é—´æ‰“ç‰¢åŸºç¡€ï¼Ÿä½ å°±æœæœå¤§å¤šæ•°çš„é¢è¯•é¢˜ç»å¸¸é—®é‚£äº›é—®é¢˜ï¼Œæèµ·å¤šçœ‹å‡ éï¼Œä¸è‡³äºŽé—®åˆ°çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯´ä»€ä¹ˆï¼Œè‡³å°‘ä½ èƒ½è¯´å‡ºä¸ªå¤§æ¦‚ä¹Ÿæ¯”ä»€ä¹ˆéƒ½è¯´ä¸å‡ºæ¥å¥½ã€‚å½“ç„¶ï¼Œè¿™ä¸æ˜¯æ•™ä½ è¯ˆï¼Œæ˜¯ä½ æ‰¾åˆ°å·¥ä½œåŽï¼Œè¦èµ¶ç´§æŠŠè‡ªå·±è–„å¼±çš„åœ°æ–¹è¡¥ä¸Šæ¥ã€‚ æˆ‘11æœˆé¡ºåˆ©æ‹¿åˆ°äº†OPPOå…¬å¸Androidå·¥ç¨‹å¸ˆofferï¼Œæˆ‘æœ‰ä¸‰å¹´å¤šçš„å·¥ä½œç»éªŒï¼Œè¿™æ¬¡é¢è¯•åŽ†ç»ä¸¤è½®ï¼Œç»ˆäºŽæ˜¯æ‹¿åˆ°äº†offerï¼Œä¸€é¢æ˜¯ä»¥é¡¹ç›®æ¥å±•å¼€çš„ï¼Œç®€åŽ†ä¸Šçš„ä¸œè¥¿ä¸€å®šè¦ç†Ÿæ‚‰ï¼Œé¢è¯•å®˜å°±æ˜¯é€šè¿‡ç®€åŽ†åŽ»é—®ï¼Œç„¶åŽä¼šé’ˆå¯¹é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè®©ä½ çŽ°åœºç»™ä½ è§£å†³æ–¹æ¡ˆã€‚ äºŒé¢æ˜¯ç”±éƒ¨é—¨çš„ä¸»ç®¡è´Ÿè´£é¢è¯•ï¼Œä¸»è¦ä¹Ÿæ˜¯è¯¢é—®å·¥ä½œä¸Šçš„ä¸€äº›äº‹ï¼Œå¤§å¤´å½“ç„¶è¿˜æ˜¯é¡¹ç›®ä¸Šçš„ç»åŽ†ï¼Œé‡åˆ°çš„éš¾ç‚¹å’Œè§£å†³åŠžæ³•ï¼Œè¿˜é’ˆå¯¹å›¢é˜Ÿåˆä½œé—®é¢˜ä¸Šæäº†ä¸€äº›é—®é¢˜ï¼Œç±»ä¼¼äºŽç»“æž„åŒ–é¢è¯•ä¸­çš„äººé™…å…³ç³»é¢˜ï¼Œè€ƒå¯Ÿçš„åº”è¯¥æ˜¯æ²Ÿé€šåè°ƒèƒ½åŠ›äº†å§ã€‚ ä½œè€…ï¼šjuncosé“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ OSIä¸ƒå±‚ç½‘ç»œæ¨¡åž‹UDPå’ŒTCPçš„åŒºåˆ«ï¼ŒUDPçš„ä½¿ç”¨ä¾‹å­ï¼ŒTCPæ€Žä¹ˆä¿è¯è¿žæŽ¥å¯é HTTP1ï¼ŒHTTP2ï¼ŒHTTP3çš„åè®®TCPä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ï¼Œå¦‚æžœä¸­é—´ä¿¡æ¯ä¸¢å¤±äº†æ€Žä¹ˆåŠžï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´é‚£è¿™ä¸ªæ—¶é—´å…·ä½“åº”è¯¥è®¾ç½®å¤šå°‘HTTPSçš„åŠ å¯†è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€æ¬¡å‘é€å…¬é’¥ä¸éœ€è¦åŠ å¯†HTTPçŠ¶æ€ç åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€æ•°æ®åº“TABLEå’ŒVIEWçš„åŒºåˆ«ï¼ˆæˆ‘å›žç­”ä¸å¤ªæ‡‚æ•°æ®åº“åŽé¢å°±æ²¡é—®äº†ï¼‰æ­»é”äº§ç”Ÿæ¡ä»¶FragmentManagerçš„Addå’ŒReplaceåŒºåˆ«Activityå› ä¸ºå†…å­˜ä¸è¶³é”€æ¯äº†å¦‚ä½•æ¢å¤æ•°æ®ç‚¹å‡»é”å±åŽActivityä¼šæ‰§è¡ŒonPauseå’ŒonStopå—Recyclerviewçš„å¤ç”¨æœºåˆ¶ ä½œè€…ï¼šç‰›å®¢784018930å· \\3. ä»‹ç»ä¸€ä¸‹ä¸ƒå±‚æ¨¡åž‹ï¼Œæ¯ä¸€å±‚çš„ä½œç”¨ \\4. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡åž‹ï¼Œåº”ç”¨ï¼ˆçº¿ç¨‹æ± ï¼‰ \\5. ç”¨è¿‡çº¿ç¨‹æ± å—ï¼Œçº¿ç¨‹æ± å¦‚ä½•å®žçŽ° \\6. è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ \\7. httpè¯·æ±‚çš„è¿‡ç¨‹ \\8. ä»€ä¹ˆæ˜¯å¤šæ€ï¼Œåº”ç”¨åœºæ™¯ \\9. äº†è§£è¿‡è®¾è®¡æ¨¡å¼å—ï¼Ÿå•ä¾‹æ¨¡å¼ï¼Œåº”ç”¨åœºæ™¯ \\10. epollçš„ä¼˜åŠ¿ \\11. æ‰‹æ’•ç®€å•é¢˜ \\12. é¡¹ç›®ä¸­é‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œåº”ç”¨åœºæ™¯ ä½œè€…ï¼šå·²runçš„å°å­¦ç”Ÿå¾ˆçˆ±çœ‹ç”µå½±é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ \\1. kotlinçš„letï¼Œapplyï¼Œalsoæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚\\2. kotlinçš„inlineï¼Œnonlineå…³é”®å­—æœ‰ä»€ä¹ˆä½œç”¨ã€‚\\3. å¼‚æ­¥è°ƒç”¨æœ‰å‡ ç§æ–¹å¼ï¼Œä»Žç®€å•åˆ°å¤æ‚ã€‚\\4. å¦‚ä½•å…¨å±€ç®¡ç†å¼‚æ­¥ä»»åŠ¡(ä¸çŸ¥é“)\\5. mvvmä¸Žmvpçš„åŒºåˆ«ã€‚\\6. é€†å˜ä¸Žåå˜ã€‚\\7. content providerçš„ä½œç”¨ã€‚\\8. sqliteçš„åº•å±‚åŽŸç†(ä¸äº†è§£)\\9. ç´¢å¼•çš„åŽŸç†åŠå®žçŽ°ã€‚\\10. è·¨ç«¯æ¡†æž¶çš„æ ¸å¿ƒå®žçŽ°è¦ç‚¹(å¼€æ”¾é¢˜)\\11. å¦‚ä½•å®šä½ANRå’Œå´©æºƒé—®é¢˜çš„åŽŸå› ã€‚ ä½œè€…ï¼šæ‘¸ä¸ç€å¤´å‘ Â·å¯¹é¢å‘å¯¹è±¡çš„ç†è§£Â·ArrayListæ‰©å®¹ç­‰Â·åžƒåœ¾å›žæ”¶Â·ç½‘ç»œä¸ƒå±‚åè®®Â·TCPä¸‰æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹Â·httpsåŠ å¯†çš„ç®—æ³• å¿«æ‰‹å®¢æˆ·ç«¯ä¸€é¢ï¼ˆ40minï¼‰è‡ªæˆ‘ä»‹ç» 1.ArrayListçš„æ‰©å®¹æœºåˆ¶ï¼Ÿ 2.åº•å±‚å®žçŽ°ï¼Ÿæ·±æ‹·è´è¿˜æ˜¯æµ…æ‹·è´ï¼Ÿ 3.å•ä¾‹æ¨¡å¼ 4.æ‡’æ±‰çº¿ç¨‹å®‰å…¨ï¼Ÿ 5.å¤šçº¿ç¨‹ä¸‹å¦‚ä½•ä¿è¯ç±»çš„çº¿ç¨‹å®‰å…¨ï¼Ÿ 6.CopyOnWriteArrayListåº•å±‚å®žçŽ°ï¼Ÿå¦‚ä½•å®žçŽ°çº¿ç¨‹å®‰å…¨ï¼Ÿ 7.HTTPæ”¯æŒé•¿é“¾æŽ¥å—ï¼Ÿä»€ä¹ˆæ—¶å€™å¼€å§‹æ”¯æŒçš„ï¼Ÿ 8.é•¿è¿žæŽ¥ä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾ï¼Ÿ 9.æœåŠ¡ç«¯é€šè¿‡timeoutè¿˜æ˜¯æŽ¢æµ‹å†³å®šæ˜¯å¦å…³é—­é•¿è¿žæŽ¥ï¼Ÿ 10.TCPæœ‰æ²¡æœ‰è¿™ç§å…³é—­è¿žæŽ¥çš„æ–¹å¼ï¼Ÿ 11.ç®—æ³•é¢˜ï¼šç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œå’Œä¸€ä¸ªæ•°å­—mï¼Œé—®è¿™ä¸ªæ•°ç»„ä¸­å­˜ä¸å­˜åœ¨ä¸€ä¸ªå­åºåˆ—ï¼ˆä¸ä¸€å®šè¿žç»­ï¼‰ï¼Œä½¿å¾—å®ƒçš„å’Œä¸ºmï¼Œè¾“å‡ºtrueæˆ–false 12.åé—® ä½œè€…ï¼šNamcoo å½±çŸ³ï¼šå®¢æˆ·ç«¯iOSå¼€å‘ï¼Œä¸€é¢é¢ç»\\4. å…«è‚¡ï¼šè®¡ç½‘å’Œæ•°æ®ç»“æž„ä¸Žç®—æ³•4.1 ä½ çŸ¥é“å“ªäº›å¸¸è§çš„æ•°æ®ç»“æž„ï¼Ÿ4.2 é“¾è¡¨æœ‰å“ªäº›ç±»åž‹ï¼Ÿ4.3 ä»€ä¹ˆæ˜¯å“ˆå¸Œå†²çªï¼Ÿ4.4 è¯´ä¸€ä¸‹æŽ’åºç®—æ³•ä¸­å†’æ³¡æŽ’åºå¦‚ä½•å®žçŽ°ï¼Ÿ4.5 å¿«é€ŸæŽ’åºå¦‚ä½•å®žçŽ°ï¼Ÿ4.6 å †æŽ’åºçŸ¥é“å—ï¼Ÿå¦‚ä½•å®žçŽ°ï¼Ÿï¼ˆéº»äº†å·²ç»ï¼‰4.7 TCPåè®®ä¸ŽUDPåè®®çš„åŒºåˆ«4.8 TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹4.9 TCPæ»‘åŠ¨çª—å£ã€æ‹¥å¡žæŽ§åˆ¶å¦‚ä½•å®žçŽ°ï¼Ÿ4.10 HTTP1.0ã€HTTP1.1ã€HTTP2.0çŸ¥é“å—ï¼Ÿä»–ä»¬ç›¸æ¯”ä¹‹å‰çš„ç‰ˆæœ¬æœ‰å“ªäº›ä¼˜åŒ–ï¼Ÿ ä½œè€…ï¼šå‹¤å¥‹çš„é¼ é¼  2023.5.9 ç¾Žå›¢ ç§»åŠ¨ç«¯ ä¸€é¢ï¼ˆ1å°æ—¶ï¼‰äº†è§£ç½‘ç»œå­—èŠ‚åºå— ä½ å¯¹ç§»åŠ¨ç«¯å®¢æˆ·ç«¯å¼€å‘æ„Ÿå…´è¶£å— ä»‹ç»ä¸€ä¸‹ä¸­ä»‹è€…æ¨¡å¼å§ é™¤äº†ä¸­ä»‹è€…æ¨¡å¼ä½ è¿˜äº†è§£å“ªäº›è®¾è®¡æ¨¡å¼ é¢å‘å¯¹è±¡çš„åŽŸåˆ™æœ‰å“ªäº› Cè¯­è¨€æºæ–‡ä»¶ç¼–è¯‘è¿‡ç¨‹ çŸ¥é“ç¼–è¯‘å™¨å‰ç«¯å’ŒåŽç«¯å— æ­»é”æ˜¯ä»€ä¹ˆï¼Œæ€Žä¹ˆé¿å…æ­»é” å…³äºŽå‰ç«¯ä½ å­¦è¿‡ä»€ä¹ˆï¼Œäº†è§£å‰ç«¯çš„æ¡†æž¶å— ä½ å¹³æ—¶éƒ½é€šè¿‡ä»€ä¹ˆæ–¹å¼å­¦ä¹  ä¸¤ä¸ªç®—æ³•ï¼ˆåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰çŽ¯ã€é“¾è¡¨é‡æŽ’&#x2F;é“¾è¡¨æŠ˜å ï¼‰ åé—® ä½œè€…ï¼šgenius1008 å¿«æ‰‹å®¢æˆ·ç«¯2é¢é¡¹ç›® composeå’Œviewå†™æ³•çš„ä¼˜ç¼ºç‚¹ ä½¿ç”¨recycleviewç¢°åˆ°çš„é—®é¢˜ glideçš„ç¼“å­˜åŠ è½½æœºåˆ¶ composeå®žçŽ°éŸ³ä¹æ’­æ”¾æ å›ºå®š å®‰å“glideä¸­ä¸Žç”Ÿå‘½å‘¨æœŸçš„å…³ç³» java åŒäº²å§”æ´¾(å†™ä¸€ä¸ªè·¯å¾„åå­—ä¸€æ ·çš„Stringï¼Œnew Stringï¼ˆï¼‰ä¼šåˆ›å»ºè‡ªå·±å†™çš„è¿˜æ˜¯ç³»ç»Ÿçš„) å—æ£€å¼‚å¸¸å’Œéžå—æ£€å¼‚å¸¸ æŠ½è±¡ç±»å’ŒæŽ¥å£çš„åŒºåˆ« koltin ä½œç”¨åŸŸå‡½æ•°ï¼ˆåº”ç”¨åœºæ™¯ï¼‰ é«˜é˜¶å‡½æ•°ï¼ˆæ¦‚å¿µï¼‰ kotlinå’Œjavaä¸€å—ç¼–è¯‘ç¢°åˆ°å•¥é—®é¢˜ ::funName åŒå†’å·çš„å†™æ³•çš„ç†è§£ æ³›åž‹ out in ä¸ŽJavaæ³›åž‹ä¸­çš„è”ç³»å’ŒåŒºåˆ« å®‰å“ activity a -&gt; b çš„ç”Ÿå‘½å‘¨æœŸ ï¼ˆå“ªä¸ªé˜¶æ®µç•Œé¢ä¸å¯è§ï¼‰ fragmentçš„æž„é€ å‡½æ•°åˆå§‹åŒ–ï¼Œnavigateçš„è·³è½¬ã€‚ä¸¤ç§æ–¹å¼ç†è§£ å¯ä»¥å¼‚æ­¥åŠ è½½fragmentå—ï¼Œç­”æ¡ˆï¼šå¯ä»¥ã€‚ serialVersionUIDæ˜¯å¦äº†è§£ ç®—æ³• åè½¬å­—ç¬¦ä¸² ä¸Šæ¥¼æ¢¯åŠ¨æ€è§„åˆ’ï¼Œå¦‚æžœç¬¬Mé˜¶æ¢¯æ˜¯ä¸èƒ½è¸©çš„ ä½œè€…ï¼šå·å·lookç—›è‹¦é¢å…· å®‰å“å¼€å‘è´§æ‹‰æ‹‰æ—¥å¸¸å®žä¹ (å¯„)\\1. å…ˆé—®é¡¹ç›®(æåˆ°äº†æ»‘åŠ¨å†²çªæ€Žä¹ˆè§£å†³çš„)\\2. å®‰å“æœ‰å“ªå‡ ç§é¡µé¢é€šè®¯çš„æ–¹å¼\\3. ç”¨è¿‡ä»€ä¹ˆå¼€æºæ¡†æž¶ï¼ˆæ¶ˆæ¯æ€»çº¿[#%ï¿¥#]()ï¼Ÿï¼‰\\4. jetpackå…¨å®¶æ¡¶ç”¨è¿‡å“ªäº›\\5. livedataæœ‰ä»€ä¹ˆèƒ½åŠ›\\6. javaé‡Œå¼±å¼•ç”¨å’Œå¼ºå¼•ç”¨åˆ†åˆ«ç”¨åœ¨ä»€ä¹ˆåœºæ™¯\\7. ç”¨åˆ°ä»€ä¹ˆå¸ƒå±€ï¼ˆä¸ºä»€ä¹ˆä¸ç”¨constraintLayout)\\8. glideå’ŒOkHttpçš„ä»»åŠ¡è°ƒåº¦æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼ˆæ¯”å¦‚åŒæ—¶å‘èµ·å¾ˆå¤šè¯·æ±‚ï¼‰\\9. handlerMessageä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ï¼ˆè¦æ€Žä¹ˆé¢„é˜²ï¼‰\\10. handlerå’ŒActivityä¸¤è€…æ˜¯æ€Žä¹ˆç›¸äº’å¼•ç”¨çš„ï¼Ÿï¼ˆè¿™é‡Œæ²¡å¬æ‡‚ï¼Œé¢è¯•å®˜è¯­é€Ÿå¤ªå¿«å¤ªæ¨¡ç³Šäº†ï¼‰\\11. handleå’ŒActivityåœ¨é“¾è¡¨ä¸­çš„é¡ºåºæ˜¯æ€Žä¹ˆæ ·çš„ï¼Ÿ\\12. httpåè®®æœ‰å“ªäº›è·Ÿç¼“å­˜ç›¸å…³çš„å±žæ€§ï¼Ÿ\\13. kotlinæ¯”javaæ–°çš„åœ°æ–¹åœ¨å“ª\\14. çŸ¥é“å“ªäº›é«˜é˜¶å‡½æ•° ä½œè€…ï¼šJojoYoé“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ ä¸œæ–¹è´¢å¯Œæ ¡æ‹›å®‰å“äºŒé¢50minï¼ˆå·²è¿‡ï¼‰2.ä¸ºä»€ä¹ˆé€‰æ‹©ä¸œè´¢3.ä»‹ç»é¡¹ç›®ï¼Œå…·ä½“çš„ä¸€äº›åŠŸèƒ½ä¼šé—®æ€Žä¹ˆå®žçŽ°çš„4.é—®ç¬¬ä¸‰æ–¹åº“å¦‚okhttpã€picassoç­‰åº•å±‚åŽŸç†å¦‚ç¼“å­˜æœºåˆ¶ç­‰ï¼ˆä¸€ä¸ªä¹Ÿæ²¡ç­”ä¸Šæ¥ï¼Œliterally5.ç©¿æ’é—®é¢å‘å¯¹è±¡ã€å®‰å“ã€javaã€è®¡ç½‘çš„å¸¸è§„çŸ¥è¯†ï¼Œç½‘ä¸Šé¢ç»å¯ä»¥æ¦‚æ‹¬è€…ä¸åŠ èµ˜è¿°6.æ·±å…¥é—®handlerï¼ˆæ¯”å¦‚messagequeueä¸ºç©ºæ—¶å€™ï¼Œlooperåœ¨åšä»€ä¹ˆï¼‰7.é—®è®¾è®¡æ¨¡å¼ï¼Œè¦æ±‚æŒ‘ä¸€ä¸ªæ·±å…¥åˆ†æžï¼Œé—®ä½ å¯¹è¿™äº›æ¨¡å¼çš„ç†è§£8.å®‰å“æ€Žä¹ˆåˆ¤æ–­activityå‘ç”Ÿå†…å­˜æ³„æ¼ï¼ˆå…¶å®žæˆ‘æ²¡ç­”ä¸Šæ¥ï¼Œé¢è¯•å®˜é—®æœ‰ç®€æ˜“æ–¹æ³•ä¹ˆï¼Ÿæˆ‘è¯´aså†…ç½®çš„èµ„æºç›‘è§†å·¥å…·é‡Œé¢çœ‹æ˜¯å¦åœ¨ä½¿ç”¨çš„æ—¶å€™å†…å­˜å ç”¨ä¸åœå¢žåŠ ï¼Œé¢è¯•å®˜è¯´å—¯åº”è¯¥å¯ä»¥ã€‚ã€‚9.threadlocalï¼ŒåŠ¨æ€ä»£ç†ï¼Œè¿™ä¿©æˆ‘è¯´æ²¡ç”¨è¿‡ä¸äº†è§£10.recyclerviewçš„ç¼“å­˜æœºåˆ¶ï¼ˆçŸ¥é“ä½†ä¸æ‡‚ï¼Œæˆ‘è¯´åšé¡¹ç›®ç”¨list viewå‡ºçŽ°äº†é‡å¤åˆ·æ˜¾ç¤ºçš„é—®é¢˜ï¼Œæ‰€ä»¥æ¢äº†recyclerviewè§£å†³11.å›¾ç‰‡æœ‰å“ªäº›æ ¼å¼ï¼Œä»–ä»¬çš„åŒºåˆ«ï¼Ÿï¼ˆæŠ¥èœåï¼Œå¹¶ä¸”ä¸€é—®ä¸‰ä¸çŸ¥ è¿‡äºŽåŸºç¡€çš„ä¸è´´äº†ï¼Œè¿™ä½é¢è¯•å®˜æ„Ÿè§‰æŠ€æœ¯ç‰¹æ‰Žå®žï¼Œä½†æ˜¯ä»–å¯¹æŠ€æœ¯çš„è€ƒé‡åº”è¯¥æœ‰ä¸€å®šé˜ˆå€¼ï¼Œå¤§éƒ¨åˆ†æ˜¯åœ¨ç»™ä½ æ–½åŠ åŽ‹åŠ›è€ƒå¯Ÿåœ¨åŽ‹åŠ›ä¸­åº”å˜çš„èƒ½åŠ›ã€‚æ¯”å¦‚é—®äº†å¾ˆå¤šæºç æˆ‘ä¸€æ¦‚ä¸çŸ¥ï¼Œä»–è¿™æ—¶å€™è¯´é‚£ä½ å¯¹ä»€ä¹ˆæ¯”è¾ƒäº†è§£ï¼Ÿæˆ‘æŠŠhandleræ•´å¥—æµç¨‹æ†‹å‡ºæ¥äº†ï¼Œå¹¶ä¸”è¯´æˆ‘æ˜¯åœ¨xxé¡¹ç›®é‡åˆ°xxé—®é¢˜æ‰€ä»¥æ·±å…¥äº†è§£äº†handler ä½œè€…ï¼šæ­‡æ¯å¿…å– ä¸œæ–¹è´¢å¯Œæ ¡æ‹›Androidä¸€é¢ï¼ˆæ˜¥æ‹›ï¼‰\\2. å¤šå®žçŽ°æŽ¥å£ï¼Œå¦‚æžœæŽ¥å£é‡Œé¢æœ‰å…¥å‚å‡ºå‚ä¸€æ ·çš„åŒåæ–¹æ³•ï¼Œä¼šå®žçŽ°å‡ ä¸ª\\3. è¯´ä¸€ä¸‹finalï¼Œstatic\\4. staticæ–¹æ³•èƒ½è°ƒç”¨éžé™æ€å—ï¼Œéžé™æ€èƒ½è°ƒç”¨staticå—\\5. finalçš„arraylistï¼Œå¾€é‡Œé¢addä¸œè¥¿ä¼šå’‹æ ·ï¼ˆæ‘¸é»‘äº†ï¼Œå®Œå…¨ä¸ç¡®å®šï¼Œå½“æ—¶çžŽè’™äº†ä¸ªç­”æ¡ˆ\\6. é¢è¯•å®˜ç»™äº†ä¸€æ®µä»£ç ï¼Œé—®è¿è¡Œç»“æžœï¼šä»£ç æ˜¯newäº†ä¸ªç©ºarraylistï¼ˆstringï¼Œintegerï¼‰é—®è¿™æ—¶å€™int i&#x3D;arraylist.getï¼ˆâ€œkeyâ€ï¼‰ç„¶åŽprintä¼šè¾“å‡ºå•¥\\7. å¦‚æžœæ˜¯Integer iå‘¢ï¼Œä¼šæ˜¯å•¥ï¼ˆå¥½å®¶ä¼™ä¸¤ä¸ªå…¨ç­”é”™ï¼‰\\8. å®‰å“é—®å¾—ä¸å¤šä¸”æ¯”è¾ƒåŸºç¡€ï¼Œå¿˜äº†\\9. å€’æ°´é—®é¢˜ï¼Œ3lå’Œ5læ¡¶å­è¦4læ°´æ€Žä¹ˆæž\\10. ç®—æ³•æ€è·¯ï¼Œé“¾è¡¨å³ç§»åŠ¨kä½å’Œæ•°ç»„å³ç§»åŠ¨kä½æ€Žä¹ˆæž\\11. å·¦å³æ‹¬å·åŒ¹é…ï¼Œæœ€å°‘æƒ…å†µè¦åŠ å¤šå°‘æ¬¡æ‹¬å·ï¼Œå†™åœ¨çº¸ä¸Šæ‹ç…§ä¸‰ã€å¤§æ¦‚è¯´è¯´é¡¹ç›®ï¼Œåé—® ä½œè€…ï¼šæ­‡æ¯å¿…å– ç™¾åº¦å®‰å“æ˜¥æ‹›äºŒé¢å‡‰ç»javaå†…å­˜åˆ†é… æ–¹æ³•åŒºï¼šæ–¹æ³•æ²¡æœ‰è¿è¡Œçš„æ—¶å€™ï¼Œå®žåœ¨è¿™é‡Œå­˜å‚¨çš„æ ˆåŒºï¼šæ–¹æ³•å¦‚æžœè¿›è¡Œè¿è¡Œï¼Œåœ¨æ²¡æœ‰è¿›è¡Œæ–°ç”Ÿæˆæ•°æ®çš„æ—¶å€™ï¼Œä»£ç å°±æ˜¯åœ¨æ ˆä¸­å­˜å‚¨ã€‚å †åŒºï¼šnewå‡ºæ¥çš„ä¸œè¥¿ä¼šåœ¨è¿™å—å†…å­˜ä¸­å¼€è¾Ÿç©ºé—´å¹¶äº§ç”Ÿåœ°å€ GCç®—æ³•ï¼šappå¯åŠ¨æµç¨‹recyclerViewkotlinåŸºç¡€å®‰å“å†…å­˜æ³„éœ²Retrofit å›¾ç‰‡ç¼“å­˜æ ‘ã€å›¾çš„å­˜å‚¨ç»“æž„httpå¯ä»¥ç”¨UDPå—çº¿ç¨‹è¿›ç¨‹åŒºåˆ« ä½œè€…ï¼šæƒ³åŽ»å¹¿è¥¿å—¦ç²‰çš„å°é»„é¸­åœ¨å­¦ä¹  Bç«™å®‰å“å®¢æˆ·ç«¯å®žä¹ é¢ç»## ä¸€é¢1.è‡ªæˆ‘ä»‹ç»2.é¡¹ç›®3.ä»‹ç»ä¸€ä¸‹å¤šçº¿ç¨‹ é—®é¢˜å¾ˆå®½æ³›è®²äº†ä¸€å¤§å †4.è¾“å…¥bilibili.comä¹‹åŽå‘ç”Ÿäº†ä»€ä¹ˆ5.æ‰©å±•ï¼šè¾“å…¥å®Œäº†ç›´æŽ¥å¼¹å‡ºä¸€ä¸ªå¹¿å‘Šå¯èƒ½æ˜¯å“ªä¸ªçŽ¯èŠ‚å‡ºäº†é—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³æˆ‘çŒœæ˜¯DNSè§£æžå‡ºäº†é—®é¢˜ï¼Œä¸çŸ¥é“æ€Žä¹ˆè§£å†³ é¢å®Œä¹‹åŽæƒ³åˆ°æ¸…æµè§ˆå™¨ç¼“å­˜ã€åŠ å¼ºå‰ç«¯æ ¡éªŒä¹‹ç±»çš„6.httpåè®®1.0 2.0xx ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ« æœ‰äº†è§£å— ï¼ˆæ²¡äº†è§£ï¼‰7.TCPå’ŒUDPçš„åŒºåˆ«8.TCPä¸ºä»€ä¹ˆæ˜¯å¯é çš„9.æ­»é”äº†è§£å— ï¼ˆæ²¡å¤ä¹  ä½†æ‰¯ä¸€ç‚¹ï¼‰10.æ·±æ‹·è´ã€æµ…æ‹·è´11.ä½ å­¦ä¹ è¿‡å®‰å“çš„å“ªäº›ä¸œè¥¿12.ä»‹ç»ä¸€ä¸‹viewæ¸²æŸ“æµç¨‹13.å†™é¢˜ æ‹¬å·åŒ¹é…é¢å®Œ10åˆ†é’Ÿ hrçº¦ç¬¬äºŒå¤©ä¸‹åˆäºŒé¢ ä½œè€…ï¼šFANIII__é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ ç«å¸Globaléƒ¨é—¨ä¸€é¢1.HashMapåŽŸç†2.åˆ›å»ºHashMapè¦æ”¾å…¥1000ä¸ªä¸åŒhashCodeçš„é”®å€¼å¯¹,åˆå§‹æœ€å¤§å€¼å¤šå°‘3.ArrayListçš„removeæ–¹æ³•åŽŸç†4.å¯¹çº¿ç¨‹æ± çš„ç†è§£5.ä½¿ç”¨çº¿ç¨‹æ± çš„è€ƒè™‘å› ç´ 6.çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°æ•°é‡çš„è®¾è®¡è€ƒè™‘å› ç´ 7.CPUå¯†é›†åž‹å’ŒIOå¯†é›†åž‹8.DCLå•ä¾‹æ¨¡å¼åŽŸç†9.Fragmentçš„replace,hide,add,showçš„åŒºåˆ«10.å¤šæ¸ é“æ‰“åŒ…11.APKç˜¦èº«12.Kotlinç›¸æ¯”è¾ƒjavaçš„å¥½å¤„13.Retrofitä¸­çš„Callå¯¹è±¡å¦‚ä½•è½¬æ¢æˆokhttpçš„callå¯¹è±¡(è¿™ä¸ªé¢˜ç›®æ˜¯åŸ‹å‘çš„)14.Retrofitè®¾è®¡æ¨¡å¼15.é¡¹ç›®ä¸­çš„ç»„ä»¶åŒ–æž¶æž„æ–¹æ¡ˆ16.å¯¹Arouterçš„ç†è§£17.åœ¨Google Playä¸Šæž¶è¿‡å—18.å¯¹å›½å¤–æœºåž‹çš„é€‚é…æ–¹æ¡ˆ19.å¯¹ä½Žç«¯æœºåž‹å’Œå¼±ç½‘çš„é€‚é…æ–¹æ¡ˆ20.çº¿ä¸Šé—®é¢˜æŽ’æŸ¥æ–¹æ¡ˆ21.Roomæœ‰ä»€ä¹ˆé—®é¢˜22.EditTextçš„ç›‘æŽ§æ–¹æ³• äºŒé¢1.Android art å’Œ dalvikçš„åŒºåˆ«2.åç¨‹çš„ç†è§£3.åç¨‹ç›¸å¯¹äºŽçº¿ç¨‹çš„åŒºåˆ«4.å†…å­˜ä¼˜åŒ–5.å†…å­˜æ£€æµ‹å·¥å…·6.ä¼˜åŒ–æ–¹é¢å¯ä»¥åšçš„å†…å®¹7.å¯åŠ¨ä¼˜åŒ–8.å•ä¾‹èƒ½å¦ç»§æ‰¿(å¯¹è±¡åˆå§‹åŒ–è¿‡ç¨‹)9.APKä½“ç§¯ä¼˜åŒ–10.åŠ è½½soæœ‰å‡ ç§æ–¹æ³•11.okhttpè´£ä»»é“¾è®¾è®¡æ¨¡å¼12.Activityçš„onDestoryå›žè°ƒæ—¶æœº13.Activityè°ƒç”¨finishåŽæ˜¯å¦ç«‹å³onDestory14.Activity A å¯åŠ¨ Activity B,Activity A çš„onDestoryå’ŒActivity B çš„onCreateæ‰§è¡Œé¡ºåº15.Activity A å¯åŠ¨ Activity B,ç„¶åŽè°ƒç”¨finish,Activity A çš„onDestoryå’ŒActivity B çš„onCreateæ‰§è¡Œé¡ºåº16.Activityçš„singleTopå’ŒsingleTaskçš„åŒºåˆ«17.Handlerå·¥ä½œæœºåˆ¶18.Looperå¦‚ä½•è¯†åˆ«Handler19.Kçº¿å›¾çš„ç»˜åˆ¶å’Œä¼˜åŒ–(éžé‡‘èžç›¸å…³ä¸ç”¨è€ƒè™‘è¿™ä¸ªé—®é¢˜) é’±åŒ…éƒ¨é—¨1.Kotlin é—­åŒ…2.Kotlin é™æ€æ–¹æ³•3.é“¾è¡¨é€†åº4.Handlerçš„postDelayåŽŸç†5.P2Pç½‘ç»œ6.okhttpå‘é€è¯·æ±‚çš„æ‹¦æˆªæ–¹å¼7.okhttpçš„æ‹¦æˆªå™¨è®¾è®¡æ¨¡å¼8.çº¿ä¸ŠANRç›‘æŽ§ç­–ç•¥9.çº¿ä¸Šå¡é¡¿ç›‘æŽ§ç­–ç•¥10.åŒºå—é“¾é’±åŒ…çš„ç­¾åå’Œäº¤æ˜“åŽŸç† ä½œè€…ï¼šå¤©å¤§åœ°å¤§æˆ‘æœ€å¤§é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ Viewç»˜åˆ¶å‰çš„æµç¨‹ç®—æ³•é¢˜ç»™å‡ºäºŒå‰æ ‘çš„å‰åºä¸­åºï¼Œè¾“å‡ºåŽåº å…ˆæ¥äº†ä¸€é“ç®—æ³•é¢˜:æ‰¾å‡ºæœ€å·¦è¾¹çš„æ¬¡æ•°æœ€å¤šçš„å­—æ¯ã€‚ ç®—æ³•é¢˜ï¼šåˆ é™¤æŽ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ï¼ˆåŠ›æ‰£82ï¼‰ å¿«æŽ’å’Œåè½¬é“¾è¡¨ åˆ¤æ–­ä¸€ä¸ªæ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œ ç®—æ³•ï¼šæ—‹è½¬é“¾è¡¨ LC61é¢˜æ„æ˜¯è¿™æ ·å­çš„ï¼šç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ã€‚è¾“å…¥ï¼šhead&#x3D;[1,2,3] k &#x3D; 1è¾“å‡ºï¼š[3,1,2] 22.ç®—æ³•é¢˜ï¼šäºŒåˆ†æ³•æŸ¥æ‰¾ç›®æ ‡æ•° çˆ±å¥‡è‰º Androidæ¶ˆæ¯æœºåˆ¶ Android Viewç»˜åˆ¶æµç¨‹ï¼Œå½“ä¸€ä¸ªTextViewçš„å®žä¾‹è°ƒç”¨setText()æ–¹æ³•åŽæ‰§è¡Œäº†ä»€ä¹ˆ Android dalvikè™šæ‹Ÿæœºå’ŒArtè™šæ‹Ÿæœºçš„ä¼˜åŒ–å‡çº§ç‚¹ Androidå±å¹•æ¸²æŸ“æœºåˆ¶ çƒ­ä¿®å¤çš„åŽŸç†ï¼Œä½ éƒ½äº†è§£è¿‡å“ªå‡ ç§çƒ­ä¿®å¤æ¡†æž¶ OkHttpçš„åŽŸç† Android çº¿ç¨‹æ± çš„å®žçŽ°åŽŸç† JavaGCæœºåˆ¶ HashMapçš„å®žçŽ°æœºåˆ¶ï¼Œæ€Žä¹ˆæ ·HashMapçº¿ç¨‹å®‰å…¨ å¯é‡å…¥é”çš„å®žçŽ°ï¼Œå…¬å¹³é”éžå…¬å¹³é”éƒ½æ˜¯ä»€ä¹ˆå®šä¹‰ï¼Ÿ éƒ½ç”¨è¿‡é‚£äº›å¸¸ç”¨çš„æ•°æ®ç»“æž„ï¼Œè¯´è¯´å¯¹æ ‘çš„äº†è§£ï¼Ÿ Activityå¯åŠ¨æ¨¡å¼ï¼ŒallowReparentçš„ç‰¹ç‚¹å’Œæ ˆäº²å’Œæ€§ WebViewä¼˜åŒ– æœ‰æ²¡æœ‰Jniä½¿ç”¨ç»éªŒ æœ‰ä½¿ç”¨è¿‡RxJavaå—ï¼Ÿ è¯´è¯´ä½ å¯¹è®¾è®¡æ¨¡å¼çš„ç†è§£ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä¸»è¦ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ å¿«æŽ’å†™ä¸€ä¸‹ï¼ŒåŠ¨æ€è§„åˆ’äº†è§£å—ï¼Ÿ å°ç±³ å†’æ³¡æŽ’åºçš„é“¾è¡¨å®žçŽ° å†™ä¸ªå¿«æŽ’ å†™ä¸ªå•ä¾‹æ¨¡å¼ -Activityå¯åŠ¨æ¨¡å¼ å¼‚å¸¸ç”Ÿå‘½å‘¨æœŸ ä»Žç‚¹å‡»åº”ç”¨å›¾æ ‡åˆ°è¿›å…¥åº”ç”¨ï¼ŒAndroidç³»ç»Ÿéƒ½åšäº†å“ªäº›å·¥ä½œï¼ŒæœŸé—´æ¶‰åŠåˆ°çš„è¿›ç¨‹åˆ‡æ¢æœ‰å“ªäº›ï¼Ÿ è¯´è¯´ä½ äº†è§£çš„IPCæ–¹æ³• è¯´è¯´Binderçš„å¤§ä½“å®žçŽ° æ€Žä¹ˆæŽ§åˆ¶å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„Viewæ˜¾ç¤º å¹¿æ’­ä¸­æ€Žä¹ˆè¿›è¡Œç½‘ç»œè¯·æ±‚ è¯´è¯´Androidä¸­çº¿ç¨‹æ± çš„å®žçŽ° HashMapå¦‚æžœHashå†²çªäº†æ€Žä¹ˆè§£å†³ï¼Ÿ åŒçº¿ç¨‹é€šè¿‡çº¿ç¨‹åŒæ­¥çš„æ–¹å¼æ‰“å°12121212â€¦â€¦. è…¾è®¯ HTTPSæ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ Androidäº‹ä»¶ä¼ é€’æµç¨‹å’ŒOnTouchListenerçš„å…³ç³» Activityå¯åŠ¨æ¨¡å¼ Androidçº¿ç¨‹æ± å®žçŽ°åŽŸç† åŒæŒ‡ç¼©æ”¾æ‹–åŠ¨å¤§å›¾ å®¢æˆ·ç«¯ç½‘ç»œå®‰å…¨å®žçŽ° Webviewä¼˜åŒ– Androidåº”ç”¨ä¿æ´» RemoteViewså®žçŽ°å’Œä½¿ç”¨åœºæ™¯ RecyclerViewç»˜åˆ¶æ­¥éª¤å’Œå¤ç”¨æœºåˆ¶ Binderçš„å¤§ä½“è®¾è®¡æ¨¡å¼ Activityéµå¾ªä»€ä¹ˆè®¾è®¡æ¨¡å¼ EventBusæºç è§£æžï¼Œéµå¾ªä»€ä¹ˆè®¾è®¡æ¨¡å¼ Handlerä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ Javaå†…å­˜æ¨¡å—åˆ†åŒºå’ŒGCæœºåˆ¶ï¼ŒGCç®—æ³•æœ‰å“ªäº› Finalizeæœºåˆ¶ å¼ºå¼•ç”¨ å¼±å¼•ç”¨ è½¯å¼•ç”¨ è™šå¼•ç”¨çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ LeakCanaryçš„ä½¿ç”¨å’Œå®žçŽ°åŽŸç† ä»‹ç»ä¸€ä¸‹ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ å¿«æŽ’ å¯¹æœåŠ¡å™¨ä¼—å¤šé”™è¯¯ç çš„å¤„ç†ï¼ˆé”™è¯¯ç æœ‰å¥½å‡ ä¸‡ä¸ªï¼‰ é˜¿é‡Œ Androidæ¶ˆæ¯æœºåˆ¶ Androidäº‹ä»¶ä¼ é€’æµç¨‹ Android Viewç»˜åˆ¶æµç¨‹ Activityå¯åŠ¨æ¨¡å¼ Android IPCæœºåˆ¶ Androidçº¿ç¨‹æ± è®¾è®¡åŽŸç† EventBusæºç å’Œè®¾è®¡æ¨¡å¼ Androidåº”ç”¨ä¿æ´» Android UIä¼˜åŒ– Androidå¯åŠ¨ä¼˜åŒ– å¿«æŽ’ å †æŽ’ å•ä¾‹ è¿›ç¨‹çº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­çš„å®žçŽ° HTTPSçš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿ ClassLoaderçš„åŒäº²å§”æ‰˜ Androidä¸­çš„ClassLoader æœ‰è¿‡Jniä½¿ç”¨ç»éªŒå—ï¼Ÿ æœ‰è¿‡è·¨å¹³å°å¼€å‘ç»éªŒå—ï¼Ÿ ä»Šæ—¥å¤´æ¡ è§†é¢‘åŠ å¯† Android Native Crash è§†é¢‘ç»„æˆ æ’­æ”¾å™¨åŽŸç† ä½œè€…ï¼šAndroidå°å´½é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ å“ˆå•°å®‰å“ä¸€é¢é¢ç»é—®äº†ä¸€ä¸ªåŠå°æ—¶ å¾ˆå¤šé—®é¢˜æ²¡è®°ä½ æŒ‘å‡ ä¸ªè¯´ä¸€ä¸‹1ã€è¿›ç¨‹é€šä¿¡æ–¹å¼æœ‰å“ªäº›2ã€çº¿ç¨‹é€šä¿¡æ–¹å¼æœ‰å“ªäº›3ã€è¿›ç¨‹çº¿ç¨‹åŒºåˆ«4ã€JAVAGCå¦‚ä½•åˆ¤æ–­æ˜¯å¦å›žæ”¶ä»¥åŠåƒµå°¸çº¿ç¨‹5ã€AOPäº†è§£å—6ã€ä¸ºä»€ä¹ˆå®‰å“ç”¨BINDER æœ‰å•¥ä¼˜ç‚¹7ã€GCå›žæ”¶ç®—æ³•æœ‰å“ªäº›8ã€httpçš„æµç¨‹ä»¥åŠå’Œhttpsçš„åŒºåˆ«9ã€OSIä¸ƒå±‚æœ‰å“ªäº› TCP UDPåœ¨å“ªäº›å±‚ äº¤æ¢å™¨è·¯ç”±å™¨åœ¨å“ªäº›å±‚10ã€UDP STL å’ŒTCPåŒºåˆ«11ã€å¯¹ç§°åŠ å¯†å’Œéžå¯¹ç§°åŠ å¯†æœ‰å“ªäº›ç®—æ³• ä»€ä¹ˆåŒºåˆ«12ã€æœ‰å“ªäº›æ•°æ®ç»“æž„ å¢žåˆ æ”¹æŸ¥çš„å¤æ‚åº¦å¤šå°‘13ã€ç®—æ³•çš„äº”å¤§åŸºæœ¬è¦ç´ æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆç®—æ³•æ•ˆçŽ‡ä¸æ˜¯åŸºæœ¬è¦ç´ ï¼Ÿ14ã€ç®—æ³•é¢˜ åˆ¤æ–­äºŒå‰æ ‘æ·±åº¦ 1ã€Glide2ã€httpå’Œhttps3ã€viewç»˜åˆ¶æµç¨‹4ã€TCP&#x2F;UDP5ã€Handlerå’ŒAsyncTask6ã€TCP\\UDP7ã€MVP8ã€Retrofit9ã€AsyncTask Handler ä½œè€…ï¼šæƒ³åŽ»å¹¿è¥¿å—¦ç²‰çš„å°é»„é¸­åœ¨å­¦ä¹ è…¾è®¯ä¸€é¢ 50åˆ†é’Ÿ 1.MVVMä¸Žmvcã€mvpæž¶æž„çš„åŒºåˆ«ä¸Žè”ç³» 2.mvvmç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ 3.viewmodelçš„å®žçŽ°åŽŸç† 4.viewmodelæ€Žä¹ˆæ›´æ–°æ•°æ®çš„ 5.å®‰å“çš„çº¿ç¨‹é€šä¿¡ 6.looperé˜»å¡žä¸ºä»€ä¹ˆä¸ä¼šé€ æˆANR 7.å¹¿æ’­é‡Œæ€Žä¹ˆæ‰§è¡Œè€—æ—¶æ“ä½œ 8.é˜»å¡žå¤šä¹…ä¼šå‡ºçŽ°ANR 9.å¼€å‘é‡åˆ°çš„ä¸€äº›å¼‚å¸¸ï¼Œæ€Žä¹ˆå¤„ç† 10.çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ—æœ‰å“ªäº› 11.concurrenthashmapè¯¦è§£ 12.fragmentçš„ç”Ÿå‘½å‘¨æœŸ 13.å®‰å“é‡Œè§£å†³å¤šçº¿ç¨‹å†²çªçš„æ–¹æ³• 14.volatileè¯¦è§£ã€synchronizedè¯¦è§£ï¼Œä¸¤è€…åŒºåˆ« 15.activityç”Ÿå‘½å‘¨æœŸ 16.onStartä¸ŽonResumeè§£é‡Š 17.å®‰å“ä¸­è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ 18.å†…æ ¸æ€ä¸Žç”¨æˆ·æ€ 21.TCPä¼ è¾“ä¸­headeré‡Œçš„å­—æ®µ 22.httpçŠ¶æ€ç  23.Java GCæœºåˆ¶ 24.è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„è”ç³»ä¸ŽåŒºåˆ« 25.æ­»é”çš„å¿…è¦æ¡ä»¶ 26.é“¶è¡Œå®¶ç®—æ³• 27.TCPæ‹¥å¡žæŽ§åˆ¶ 28.å››æ¬¡æŒ¥æ‰‹è¯¦è§£ 29.TCPä¸ŽUDPåŒºåˆ« 30.TCPæ€Žä¹ˆä¿è¯å¯é ä¼ è¾“ 31.DNSè§£æžè¿‡ç¨‹ 32.TCPæŠ¥æ–‡é‡Œçš„å­—æ®µ 33.ç®—æ³•é¢˜ï¼šè®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦ï¼ˆé€’å½’ä¸Žéžé€’å½’ä¸¤ç§æ–¹å¼ï¼‰ è…¾è®¯äºŒé¢ï¼Œ35åˆ†é’Ÿ1.mvvmï¼Œmvp,mvc 2.è¯¦ç»†ä»‹ç»é¡¹ç›® 3.ç½‘ç»œä¼ è¾“å±‚çš„åè®® 4.TCPæŠ¥å¤´ 5.TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸ºä»€ä¹ˆä¸‰æ¬¡ 6.linuxå†…å­˜ç®¡ç†æœºåˆ¶ 7.è™šæ‹Ÿå†…å­˜ä¸Žç‰©ç†å†…å­˜ 8.å¸¸ç”¨æ•°æ®ç»“æž„ 9.å †æŽ’åºåŽŸç† vivoä¸€é¢ 45åˆ†é’Ÿ1.é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ï¼Œå¤šæ€æ€Žä¹ˆå®žçŽ° 2.é™æ€æ–¹æ³•ä¸Žå˜é‡æ˜¯å¦å¯ä»¥ç»§æ‰¿ï¼ŒåŽŸå›  3.Javaä»£ç†æ˜¯å¦ç”¨è¿‡ï¼Œæ€Žä¹ˆå®žçŽ° 4.Javaå¼‚å¸¸è¯¦è§£ 5.é¡¹ç›®ä¸­é‡åˆ°çš„å¼‚å¸¸ çº¿ç¨‹å®‰å…¨çš„é˜Ÿåˆ— 7.ç±»åŠ è½½çš„è¿‡ç¨‹ 8.ç±»åŠ è½½å™¨ï¼ŒåŒäº²å§”æ´¾æ¨¡åž‹ 9.å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ 10.åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥å›žæ”¶çš„æ–¹æ³• 11.æœ‰å“ªäº›GC roots 12.Javaå¼•ç”¨ç±»åž‹ 13.æŠ½è±¡ç±»ä¸ŽæŽ¥å£åŒºåˆ«ï¼Œå„è‡ªä¼˜ç¼ºç‚¹ 14.Javaçº¿ç¨‹é—´é€šä¿¡ï¼Œ volatileè¯¦è§£ã€synchronizedè¯¦è§£ 15.çº¿ç¨‹çš„çŠ¶æ€ 16.è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ 17.æ­»é”æ€Žä¹ˆé€ æˆçš„ 18.çº¿ç¨‹æ± è¯¦è§£ 19.çº¿ç¨‹æ± æ€Žä¹ˆåšåˆ°çº¿ç¨‹å¤ç”¨ 20.thread localè¯¦è§£ 21.Javaæ³›åž‹ï¼Œæ³›åž‹æ“¦é™¤æœºåˆ¶ 22.TCPä¸ŽUDPåŒºåˆ«ï¼Œä¼˜ç¼ºç‚¹ 23.TCPå¯é ä¼ è¾“æœºåˆ¶ 24.ä»‹ç»httpåè®® 25.httpsè¯·æ±‚æµç¨‹ 26.bæ ‘ã€b+æ ‘ã€çº¢é»‘æ ‘ 27.çº¢é»‘æ ‘æ€Žä¹ˆå¢žåŠ ã€åˆ é™¤èŠ‚ç‚¹ 28.è¾“å…¥ä¸€ä¸ªURLåˆ°ç½‘é¡µæ˜¾ç¤ºçš„è¿‡ç¨‹ 29.localhost ä¸Ž127.0.0.1çš„åŒºåˆ« 30.MVVMã€MVCã€MVPçš„åŒºåˆ«ä¸Žè”ç³»ï¼Œå„è‡ªä¼˜ç¼ºç‚¹ 31.activityçš„ç”Ÿå‘½å‘¨æœŸ 32.å®‰å“ä¸­çš„æ•°æ®å­˜å‚¨ï¼Œsharedpreferenceè¯¦è§£ å­—èŠ‚ä¸€é¢ 1å°æ—¶1.è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹ 2.è¿›ç¨‹é—´èƒ½å…±äº«å†…å­˜å— 3.å®‰å“ä¸­æŒ‚èµ·å‡½æ•°æ€Žä¹ˆå®žçŽ°çš„ 4.å®‰å“ä¸­å®žçŽ°å¤šçº¿ç¨‹çš„æ–¹æ³• 5.çº¿ç¨‹æ± è¯¦è§£ 6.çº¿ç¨‹æ± è®¾è®¡æ¨¡å¼ï¼Œæ€Žä¹ˆè‡ªå·±è®¾è®¡ä¸€ä¸ªçº¿ç¨‹æ±  7.handlerè¯¦è§£ï¼Œæ˜¯å¦ä¼šå†…å­˜æ³„æ¼ï¼Œæ³„éœ²çš„åŽŸç† 8.åŒ¿åå†…éƒ¨ç±»ï¼ŒåŽŸç†æ˜¯ä»€ä¹ˆ 9.Java GCç®—æ³• 10.Javaå¼•ç”¨ç±»åž‹ï¼Œå¼±å¼•ç”¨çš„ä½œç”¨ï¼Œå¼•ç”¨é˜Ÿåˆ—ã€‚ 11.å®‰å“å›¾ç‰‡ç¼“å­˜ï¼ŒåŠ è½½ 12.å®‰å“ä¸­çš„å¸ƒå±€ï¼Œå¸ƒå±€ä¼˜åŒ–æ–¹æ³•ï¼Œå¸¸ç”¨æ ‡ç­¾ 13.å®‰å“å››å¤§ç»„ä»¶ 14.activityå››å¤§å¯åŠ¨æ¨¡å¼ 15.onnewintentæ–¹æ³• 16.æœ¬åœ°å¹¿æ’­ 17.jetpackç»„ä»¶ 18.viewmodelè®¾è®¡æ¨¡å¼ï¼Œmvc,mvp,mvvmä»‹ç» 19.retrofitçš„å…·ä½“å®žçŽ°ï¼Œå…¶ä¸­æŽ¥å£çš„ä½œç”¨ï¼Œæ³¨è§£çš„ä½œç”¨ 20.hashtable,hashmapä¸Ž concurrenthashmapè¯¦è§£ 21.å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼Œ 22.ç®—æ³•é¢˜ï¼šéšæœºç”Ÿæˆä¸é‡å¤çš„100ä¸ªæ•°0-99 å­—èŠ‚äºŒé¢ï¼Œ50åˆ†é’Ÿ1.httpsè¯¦ç»†ä»‹ç» 2.getä¸ŽpoståŒºåˆ« 3.è¯·æ±‚çŠ¶æ€ç  4.cookieä¸Žsession 5.Javaå†…éƒ¨ç±» 6.æ³›åž‹æ“¦é™¤æœºåˆ¶ 7.Javaå†…å­˜å›žæ”¶ 8.GC roots 9.JavaåŠ é”æ–¹å¼ 10.çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æµ‹ï¼‰ï¼Œä¸ºä»€ä¹ˆè¦ä¸¤æ¬¡åˆ¤æ–­ï¼Œvolatileä½œç”¨ 11.å®‰å“çš„äº‹ä»¶åˆ†å‘æœºåˆ¶ 12.ç®—æ³•é¢˜ï¼šèŽ·å¾—äºŒå‰æ ‘çš„æœ€å¤§å®½åº¦ï¼Œå†™å‡ºæœ€ä¼˜è§£ å­—èŠ‚ä¸‰é¢ï¼Œ50åˆ†é’Ÿ5é“ä»£ç é¢˜ 1.å†™ä¸€ä¸ªæ³›åž‹æ–¹æ³•ï¼Œå®žçŽ°åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ åŠŸèƒ½ 2.å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼ 3.è¿”å›žäºŒå‰æ ‘çš„ç¬¬kå¤§æ•° å¦å¤–ä¸¤ä¸ªè®°ä¸å¾—äº†ï¼Œä»£ç å†™çš„å¾ˆå·®ï¼Œæ‰€ä»¥ä¸‰é¢å’ã€‚ã€‚ã€‚ é¡ºä¸°ä¸€é¢ï¼Œ30åˆ†é’Ÿ1.é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¸Žé¢å‘è¿‡ç¨‹åŒºåˆ« 2.æ€Žä¹ˆåˆ¤æ–­å¯¹è±¡ç›¸ç­‰ï¼Œequalsè¯¦è§£ 3.æŠ½è±¡ç±»ä¸ŽæŽ¥å£åŒºåˆ« 4.Javaè·¨å¹³å°çš„åŽŸå›  5.JVMï¼ŒGCç®—æ³• 6.å®‰å“viewç»˜åˆ¶æµç¨‹ 7.viewæ€Žä¹ˆç¡®è®¤ä½ç½®ä¸Žå¤§å°ï¼Œæµ‹é‡æ¨¡å¼ 8.å¸¸ç”¨çš„viewgroupï¼Œä¸ŽviewåŒºåˆ«ï¼Œåœ¨äº‹ä»¶å¤„ç†è¿‡ç¨‹ä¸­æœ‰ä»€ä¹ˆåŒºåˆ« 9.å®‰å“äº‹ä»¶ä¼ é€’æœºåˆ¶ 10.listviewè¯¦è§£ï¼Œç¼“å­˜æœºåˆ¶ä¸ŽrecyclerviewåŒºåˆ« é¡ºä¸°äºŒé¢ï¼Œ15åˆ†é’Ÿ1.é¡¹ç›®è¯¦ç»†ä»‹ç» 2.å®‰å“ä¸­çš„listviewä¸Žrecyclerview 3.å®‰å“ä¸­çš„ç½‘ç»œè¯·æ±‚æ–¹å¼ 4.é¡¹ç›®ä¸­çš„è®¾è®¡æ¨¡å¼ ç¾Žå›¢ä¸€é¢ï¼Œ1å°æ—¶1.å®‰å“é¡¹ç›®ä»‹ç» 2.mvc,mvp,mvvmæž¶æž„ 3.jetpackç»„ä»¶ 4.lifecycleä»‹ç» 5.viewmodelå®žçŽ°åŽŸç† 6.retrofitä»‹ç» 7.retrofitæ€Žä¹ˆå®žçŽ°å¤šçº¿ç¨‹ 8.çº¿ç¨‹æ± è¯¦è§£ 9.å¤šçº¿ç¨‹ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ 10.æ­»é”çš„æ¡ä»¶ï¼Œæ‰‹å†™ä¸€ä¸ªæ­»é”ä»£ç å¹¶è¿è¡Œå‡ºæ¥ 11.æ€Žä¹ˆé¿å…æ­»é”é—®é¢˜ 12.å¯é‡å…¥é” 13.å®‰å“æ€Žä¹ˆè¿›è¡Œuiæ“ä½œ 14.å®‰å“ç‚¹å‡»äº‹ä»¶çš„å¤„ç† 15.ä¸‹æ‹‰åˆ·æ–°åŽŸç† 16.å®‰å“å­˜å‚¨æ–¹å¼ 17.contentproviderä»‹ç»ï¼Œèƒ½å®žçŽ°è€—æ—¶æ“ä½œå— 18.serviceä»‹ç»ï¼Œç”Ÿå‘½å‘¨æœŸä¸Ž contentprovideråŒºåˆ« 19.httpsè¯·æ±‚è¿‡ç¨‹ 20.ç®—æ³•é¢˜ï¼šè¿”å›žç¬¬kå¤§çš„æ•°ï¼Œå…ˆè¯´ä¸‹ä½ èƒ½æƒ³åˆ°çš„æ–¹æ³•ï¼Œå†é€‰ä¸€ä¸ªæœ€ä¼˜æ–¹æ³•ã€‚ ç¾Žå›¢äºŒé¢ï¼Œ50åˆ†é’Ÿ1.Javaå…¥å£å‡½æ•° 2.æ–¹æ³•ç­¾å 3.æ–¹æ³•ä¿®é¥°ç¬¦ 4.staticå…³é”®å­—è¯¦è§£ï¼Œè¯´ä¸‹è‡ªå·±çŸ¥é“çš„å…³é”®å­— 5.JavaåŸºæœ¬ç±»åž‹ 6.å­—ç¬¦ä¸²è¯¦è§£ 7.å­—ç¬¦ä¸²çš„å¸¸ç”¨æ“ä½œ 8.Java io 9.Javaå¼‚å¸¸ä»‹ç»ï¼Œæ˜¯å¦æ‰€æœ‰å¼‚å¸¸éƒ½éœ€è¦æ•èŽ· 10.å¯¹JavaæŠ½è±¡çš„ç†è§£ 11.æŽ¥å£ä¸ŽæŠ½è±¡ç±»åŒºåˆ« 12.ç±»ç¼–è¯‘è¿‡ç¨‹ 13.ä»‹ç»å¯¹å®‰å“ä¸­intentçš„ç†è§£ 14.è‡ªå®šä¹‰viewè¿‡ç¨‹ 15.ä»‹ç»service 16.serviceä¸Žactivityé€šä¿¡ 17.è¾“å…¥URLåˆ°è¿”å›žé¡µé¢çš„å®Œæ•´è¿‡ç¨‹ 18.æ€Žä¹ˆåŠ é€Ÿhttpè¿žæŽ¥ 19.è™šæ‹Ÿå†…å­˜ 20.çº¿ç¨‹å¹¶å‘ä¼šé‡åˆ°å“ªäº›é—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³ 21.è¯¦ç»†ä»‹ç»è‡ªå·±çš„é¡¹ç›®ï¼Œé¡¹ç›®å¯ä»¥æœ‰å“ªäº›æ”¹è¿›çš„åœ°æ–¹ 22.ç®—æ³•é¢˜ï¼šäºŒåˆ†æ³•æŸ¥æ‰¾ç›®æ ‡æ•° ä½œè€…ï¼šAndroidå¤§ç‰› å°ç±³å®‰å“å¼€å‘ä¸€äºŒé¢é¢ç»ä¸€é¢9.291ã€æ‰‹æ’•ï¼šä½¿ç”¨ä¸€ä¸ªå›ºå®šé•¿åº¦æ•°ç»„å®žçŽ°é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬æ·»åŠ å’Œå–æ•°æ®çš„åŠŸèƒ½ 2ã€æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼Œå¦‚ä½•ä¼˜åŒ– 3ã€é“¾è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Œå¯ä»¥é™ä½ŽæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿ 4ã€hashmapæ’å…¥æ•°æ®çš„æµç¨‹ï¼Ÿ 5ã€å¦‚ä½•è®¡ç®—hashmapæ•°æ®æ’å…¥çš„ä½ç½®ï¼Ÿ 6ã€å¦‚ä½•è§£å†³å“ˆå¸Œå†²çªï¼Ÿ 7ã€å¤šçº¿ç¨‹å¦‚ä½•è§£å†³çº¿ç¨‹å†²çªï¼Ÿ 8ã€æ‰‹æ’•ï¼šæ‰‹å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼ 9ã€volatile å’Œ synchronized æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 10ã€synchronized å’Œ lock æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 11ã€synchronized åº•å±‚æ˜¯å¦‚ä½•å®žçŽ°åŠ é”æ“ä½œçš„ï¼Ÿ 12ã€å¯¹è±¡ã€é”ã€å¯¹è±¡ç›‘è§†å™¨ç›¸äº’ä¹‹é—´çš„å…³ç³»ï¼Ÿ 13ã€ä¹è§‚é”å¦‚ä½•å®žçŽ°ï¼Ÿç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ 14ã€ThreadLocal æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ 15ã€ThreadLocalMapä¸­é‡åˆ°å†²çªæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ 16ã€æ¡†æž¶éƒ¨åˆ†æ˜¯å¦‚ä½•å­¦ä¹ çš„ï¼Ÿé‡åˆ°é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ 17ã€å¦‚æžœè½¬å®‰å“å¼€å‘ï¼Œå°†æ€Žæ ·åˆ¶å®šå­¦ä¹ è·¯çº¿ï¼Ÿ 18ã€å¯¹å°ç±³çš„äº†è§£ï¼Ÿï¼ˆæˆ‘è¯´æˆ‘è€ç±³ç²‰äº†ï¼Œç»™é¢è¯•å®˜æ•´ç¬‘äº†ï¼‰ åé—® ï¼ˆé¢è¯•ä¹‹å‰æ²Ÿé€šæ—¶æˆ‘è¯´ä¸ä¼šå®‰å“ï¼Œä»–ä¹Ÿå°±æ²¡é—®æˆ‘å®‰å“çš„ä¸œè¥¿ï¼Œé¢è¯•å®˜äººè¿˜æŒºå¥½çš„ï¼‰ äºŒé¢9.301ã€ä¸ºä»€ä¹ˆä¼šè½¬ç ï¼Ÿï¼ˆâ€¦æ¯æ¬¡é¢è¯•å¿…é—®ï¼‰ 2ã€æœ‰ä¸€åƒä¸ªé”®å€¼å¯¹çš„æ•°æ®ï¼Œå¦‚ä½•è®¾è®¡HashMapçš„åˆå§‹å®¹é‡å¤§å°ï¼Ÿ 3ã€HashMapçš„æ‰©å®¹æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ 4ã€ConcurrentHashMap æ˜¯å¦‚ä½•å®žçŽ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿå¦‚æžœè®©ä½ è®¾è®¡é”çš„æ•°é‡ä½ ä¼šæ€Žä¹ˆè®¾è®¡æ¥æé«˜æ•ˆçŽ‡ï¼Ÿ 5ã€synchronized åº•å±‚æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Ÿ 6ã€ReentrantLock å¦‚ä½•å®žçŽ°å…¬å¹³é”ä¸Žéžå…¬å¹³é”ï¼Ÿ 7ã€å…¬å¹³é”ä¸Žéžå…¬å¹³é”çš„é‡Šæ”¾æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 8ã€çº¿ç¨‹çš„ wait å’Œ block æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå’Œ sleep æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 9ã€JVM ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ 10ã€JVM å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡éœ€è¦è¢«å›žæ”¶? 11ã€å¦‚æžœç”µè„‘å†…å­˜æ˜¯4Gï¼Œå·²ç»ä½¿ç”¨äº†3Gï¼ŒçŽ°åœ¨å¯åŠ¨ä¸€ä¸ªç¨‹åºéœ€è¦è¶…è¿‡1Gçš„å†…å­˜ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ(å†…å­˜å›žæ”¶) 12ã€SpringBootç›¸æ¯”äºŽSpringæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ 13ã€Springä¸­æŽ§åˆ¶åè½¬å’Œä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿä¸ºä»€ä¹ˆè¦è¿›è¡ŒæŽ§åˆ¶åè½¬ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 14ã€å•ä¾‹æ¨¡å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿåº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ 15ã€ä¸‰ç§å·¥åŽ‚æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 16ã€ç±»åŠ è½½è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ 17ã€åŒäº²å§”æ´¾æ¨¡åž‹æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ 18ã€é¡¹ç›®ä¸­å¦‚ä½•è®¾è®¡å•ç‚¹ç™»å½•ï¼Ÿå¦‚ä½•å®žçŽ°ä½ è¿™è¾¹ç™»é™†ï¼Œå¦ä¸€è¾¹å¼ºåˆ¶ä¸‹çº¿çš„åŠŸèƒ½ï¼Ÿ 19ã€OSIä¸ƒå±‚æ¨¡åž‹ä»‹ç»ä¸€ä¸‹ï¼Ÿåº”ç”¨å±‚æœ‰ä»€ä¹ˆåè®®ï¼Ÿ 20ã€ä¸‰æ¬¡æ¡æ‰‹å˜æˆä¸¤æ¬¡å¯ä¸å¯ä»¥ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ 21ã€æ‰‹æ’•ï¼šäºŒå‰æœç´¢æ ‘ç¬¬ k å°çš„èŠ‚ç‚¹ å°ç±³é¢è¯•å®˜æ„Ÿè§‰éƒ½æŒºå¥½çš„ï¼Œä¸ä¼šçš„é—®é¢˜ä¼šè¿›è¡Œå¼•å¯¼ï¼ŒäºŒé¢å¤šé—®äº›åœºæ™¯é¢˜ã€‚ ä½œè€…ï¼šCodeWH 2.&#x3D;&#x3D;å’Œequalsçš„åŒºåˆ« 3.é‡è½½å’Œé‡å†™çš„åŒºåˆ« 4.å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ 5.staticã€finalä½œç”¨ 6.æ‰€æœ‰ç±»çš„çˆ¶ç±» 7.this()å’Œsuper() 8.intå’ŒIntegerçš„åŒºåˆ« 9.çº¿ç¨‹æ± å’Œçº¿ç¨‹ 10.é”äº†è§£å“ªäº›ï¼ˆè¯´äº†åˆ†å¸ƒå¼é”ï¼Œåˆé—®æˆ‘åˆ†å¸ƒå¼é”æ˜¯ä»€ä¹ˆï¼‰ 11.é¡¹ç›®çš„éš¾ç‚¹ï¼Œè§£å†³ Javaåå°„åŽŸç†Javaé¢å‘å¯¹è±¡çš„ç†è§£ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€HashMapåº•å±‚åŽŸç†æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ä½ æ˜¯æ€Žä¹ˆå­¦ä¹ çš„ï¼Œä½ çš„å­¦ä¹ èƒ½åŠ›æ€Žä¹ˆæ ·Activityçš„å¯åŠ¨æ¨¡å¼æœ‰å“ªäº›å¤šè¿›ç¨‹é€šä¿¡çš„æ–¹å¼Android intentå¦‚ä½•ä¼ é€’æ•°æ®Androidå¹¿æ’­è°ˆè°ˆAndroidæ€§èƒ½ä¼˜åŒ– httpså’Œhttpçš„åŒºåˆ«ä¸‰æ¬¡æ¡æ‰‹ä½ éƒ½ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ ä½œè€…ï¼šè¢«å…‰é€‰ä¸­çš„äºº å­—èŠ‚è·³åŠ¨å®‰å“å·¥ç¨‹å¸ˆä¸€ã€äºŒé¢ç¤¾æ‹›ä¸€é¢|1hèŠäº†å¥½ä¹…ï¼Œä¸€é¢ä¹Ÿå¤ªæ­£å¼äº†ï¼Œé—®å¾—è¾ƒä¸ºåŸºç¡€ï¼Œä½†æ˜¯é—®å¾—çœŸçš„æŒºå¤šçš„ï¼Œå¿ƒç´¯ã€‚é¡¹ç›®ä»‹ç» Javaå››æ¬¡å¼•ç”¨ åžƒåœ¾å›žæ”¶æœºåˆ¶ çº¿ç¨‹å®‰å…¨çš„é›†åˆæœ‰å“ªäº›ï¼ˆé—®å¾—æ¯”è¾ƒç»†ï¼‰ è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ HashMapçš„åº•å±‚å®žçŽ° eventbusåŽŸç† Viewçš„ç»˜åˆ¶è¿‡ç¨‹ Surfaceviewå¯ä»¥åœ¨éžä¸»çº¿ç¨‹ç»˜åˆ¶å— Glideçš„ç¼“å­˜æœºåˆ¶ å†…å­˜ä¼˜åŒ–ï¼ˆè¿½ç€é—®ï¼‰ TCPä¸‰æ¬¡æ¡æ‰‹ ç®—æ³•ï¼šåˆå¹¶åŒºé—´ ç®—æ³•ï¼šæŽ’åºæ•°ç»„ äºŒé¢|45minäºŒé¢åœ¨æºç è¿™å—çœŸçš„é—®å¾—å¾ˆæ·±ï¼ŒAndroidéƒ¨åˆ†é—®å¾—æ¯”è¾ƒå¤šï¼Œä¸èƒ½å°çœ‹å•Š Javaè™šæ‹Ÿæœº okhttpçš„è¯·æ±‚æœºåˆ¶ RxJavaå®žçŽ°åŽŸç† handlerå¤„ç†æµç¨‹ï¼Œlooperå’Œhandleræ˜¯ä¸€å¯¹ä¸€è¿˜æ˜¯ä¸€å¯¹å¤šï¼Œä¸ºä»€ä¹ˆä¸»çº¿ç¨‹loopä¸ä¼šANRï¼Ÿ AsyncTaskçš„åº•å±‚æ˜¯æ€Žä¹ˆå®žçŽ°çš„ æ¶ˆè´¹è€…ä¸Žç”Ÿäº§è€…æ¨¡åž‹ Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»ŽActivity Aå¯åŠ¨Activity Bç”Ÿå‘½å‘¨æœŸçš„å˜åŒ– touchäº‹ä»¶çš„ä¼ é€’æœºåˆ¶ TCPä¸ŽUDPçš„åŒºåˆ« å¸¸ç”¨çš„æ•°æ®ç»“æž„ ç®—æ³•ï¼šåºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘ ä½œè€…ï¼šç”°é¸¡ä¸æ˜¯é¸¡ å¯¹Javaé¢å‘å¯¹è±¡çš„ç†è§£ï¼ˆé‡ç‚¹è®²ä¸‰å¤§ç‰¹æ€§ï¼Œå“ªäº›å¯ä»¥ç»§æ‰¿ä¸‹æ¥ï¼‰ä½ çŸ¥é“Javaå“ªäº›æ•°æ®ç±»åž‹å‘¢ï¼ŸæŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼çº¿ç¨‹æ± å‚æ•°HashMapçš„æ‰©å®¹æœºåˆ¶ï¼Œå®ƒçº¿ç¨‹å®‰å…¨å—ï¼ŸArrayListå’ŒLinkedListåŒºåˆ«Stringã€StringBufferã€StringBuidlerçš„åŒºåˆ«è®²è®²activityçš„ç”Ÿå‘½å‘¨æœŸAndroidæ¡†æž¶æœ‰äº†è§£è¿‡å—ï¼ŸbinderåŽŸç†å®‰å“æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®å­˜å‚¨çš„ï¼ŸTCPä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸ºä»€ä¹ˆä¸‰æ¬¡ï¼Ÿç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼å—ï¼Ÿå•ä¾‹æ¨¡å¼æœ‰å“ªäº›å®žçŽ°æ–¹æ³• å®¢æˆ·ç«¯æŠ€æœ¯æˆé•¿è·¯çº¿åˆ†äº« è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç»„æˆåŽŸç†ã€æ•°æ®ç»“æž„ä¸Žç®—æ³•ã€æ•°æ®åº“åŽŸç†ç­‰è®¡ç®—æœºåŸºç¡€è¯¾ï¼šå­¦ä¹ è¿™äº›ä¸€æ–¹é¢æ˜¯ä¸ºäº†åº”ä»˜é¢è¯•ï¼Œå°±Androidçš„é¢è¯•ï¼Œå¾ˆå¤šå…¬å¸çˆ±é—®http&#x2F;httpsï¼Œtcp&#x2F;udpï¼Œhashmapï¼Œlinkedhashmapï¼Œç”¨æˆ·æ€&#x2F;æ ¸å¿ƒæ€ç­‰å…«è‚¡ï¼›æ›´é‡è¦çš„æ˜¯ï¼Œå¯¹Androidå¼€å‘åŠä½“ç³»çš„å…¨é¢ç†è§£ï¼ŒAndroidåº”ç”¨å±‚å»ºç«‹åœ¨linuxæ“ä½œç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥æ‰æœ‰Javaå’ŒC++åˆ†åˆ«åŽ»å†™åº”ç”¨å±‚ä»£ç å’Œç³»ç»Ÿå±‚ä»£ç ï¼Œè€Œç³»ç»Ÿå±‚ä»£ç ä¼šåšä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™å°±éœ€è¦äº†è§£ä¸€äº›æ“ä½œç³»ç»Ÿã€‚ Javaï¼šç”±äºŽç¬”è€…ä¹‹å‰å­¦ä¹ çš„æ˜¯JavaåŽç«¯å¼€å‘ï¼Œæ‰€ä»¥JavaåŸºç¡€è¿˜æ¯”è¾ƒæ‰Žå®žï¼Œè¯­è¨€çš„å­¦ä¹ ä¸€å®šæ˜¯éœ€è¦ä¸æ–­åœ°å®žè·µæ€è€ƒçš„ã€‚åœ¨å­¦ä¹ Javaçš„åŒæ—¶ä¹Ÿéœ€è¦åŽ»æžæ‡‚Javaä¸­çš„å¤šçº¿ç¨‹ï¼ˆåŒ…æ‹¬å„ç§é”å’Œçº¿ç¨‹ç®¡ç†ï¼‰ã€JVMã€é›†åˆç±»å®žçŽ°åŽŸç†ï¼Œè¿™éƒ¨åˆ†ä¸€å®šéœ€è¦åŽ»æ…¢æ…¢å•ƒåŽŸç†ç”šè‡³æºç ã€‚ kotlinï¼šktç›®å‰ä½œä¸ºGoogleä¸»æŽ¨çš„Androidå¼€å‘è¯­è¨€ï¼Œä»¥å…¶ç©ºå®‰å…¨ã€ç®€ä¾¿æ€§å’Œå„ç§è¯­æ³•ç³–ä¼šæ›´è¿›ä¸€æ­¥å—åˆ°Androidå¼€å‘å·¥ç¨‹å¸ˆçš„å–œçˆ±ï¼ŒåŒæ—¶æ”¯æŒJavaå’Œktç›¸äº’è°ƒç”¨ã€‚åŒæ ·åœ°ï¼Œktçš„å­¦ä¹ ä¹Ÿéœ€è¦ä¸æ–­åœ°åŽ»å®žè·µï¼Œå†™ä¸€äº›å°demoï¼Œæ›´é‡è¦çš„æ˜¯åŽ»è¯†åˆ«ktä¸ŽJavaä¹‹é—´çš„åŒºåˆ«ï¼Œä»¥åŠktæ‰€æ‹¥æœ‰çš„æ–°ç‰¹æ€§ï¼ˆåç¨‹ã€æ‰©å±•å‡½æ•°ã€æ›´ä¼˜ç§€çš„å‡½æ•°å¼ç¼–ç¨‹ã€ä¸€äº›å¸¸ç”¨çš„å…³é”®å­—å¦‚by lazyã€lateinitã€applyã€runã€withã€objectç­‰ç­‰ï¼‰ã€‚æ€»ä¹‹ï¼Œktå­¦ä¹ è¿‡ç¨‹ä¸­ä¸€å®šæ˜¯éœ€è¦å’ŒJavaåŽ»å¯¹æ¯”ç€æ¥çš„ã€‚ AndroidåŸºç¡€ æŽ¨èAndroidç¬¬ä¸€è¡Œä»£ç ï¼ˆå°½é‡çœ‹æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç”¨ktå†™çš„ï¼‰ â€‹ Androidå››å¤§ç»„ä»¶ï¼ˆActivityã€Serviceã€ContentProviderã€BroadcastReceiverï¼‰çš„ä½¿ç”¨ï¼› â€‹ Activityçš„ç”Ÿå‘½å‘¨æœŸï¼ŒActivityæ˜¾å¼è·³è½¬å’Œéšå¼è·³è½¬ï¼Œå„ç§æ“ä½œçš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼ˆåŒ…æ‹¬æ¨ªç«–å±åˆ‡æ¢ã€Activityé—´è·³è½¬ã€Activityéžæ­£å¸¸é”€æ¯ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼‰ï¼ŒActivityçš„LaunchModeï¼› AndroidåŠ¨ç”»ï¼› â€‹ Serviceä¸¤ç§å¯åŠ¨æ–¹å¼åŠç”Ÿå‘½å‘¨æœŸï¼› â€‹ ç½‘ç»œç¼–ç¨‹ã€SqlLiteã€SharedPreferencesï¼› â€‹ Fragmentç®¡ç†ï¼Œä¸ŽActivityä¹‹é—´çš„é€šä¿¡ï¼› â€‹ Intentã€Bundleã€Parcelableä½¿ç”¨ï¼› â€‹ å¸¸è§çš„æŽ§ä»¶å’Œå¸ƒå±€ä½¿ç”¨ï¼ŒContraintLayoutï¼› â€‹ å¸¸è§çš„UIæ¡†æž¶å¦‚ViewPagerã€ViewPager2ã€ListViewã€GridViewã€RecyclerViewçš„ä½¿ç”¨ï¼ŒListViewå’ŒRecyclerViewçš„ç¼“å­˜æœºåˆ¶ï¼ŒRecyclerViewçš„LayoutManagerè‡ªå®šä¹‰å¸ƒå±€ï¼ŒViewPager2åŽŸç†ã€‚ Androidè¿›é˜¶ æŽ¨èAndroidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æž â€‹ ç¬”è€…è®¤ä¸ºå­¦ä¹ Android Frameworkéžå¸¸æœ‰å¿…è¦ï¼Œä¸€æ–¹é¢å¯¹äºŽæ•´ä¸ªAndroidä½“ç³»çš„æŠŠæ¡ï¼Œå¦ä¸€æ–¹é¢åšAndroid Frameworkå¯ä»¥å¾€æ™ºèƒ½è½¦è½½ç³»ç»Ÿå¼€å‘ç­‰æ–¹å‘èµ°ã€‚ç¬”è€…èŠ±äº†1-2ä¸ªæœˆçš„æ—¶é—´çœ‹äº†Androidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æžï¼Œçœ‹å®Œä»¥åŽå¯¹æˆ‘è§¦åŠ¨å¾ˆå¤§ï¼Œä¹Ÿç†è§£äº†Androidä½“ç³»å·¥ä½œè¿‡ç¨‹ï¼Œæ‰€ä»¥ç¬”è€…è¿˜æ˜¯éžå¸¸æŽ¨èè¯»è€…æœ‰æ—¶é—´çš„è¯éƒ½å­¦ä¹ ä¸€ä¸‹Frameworkçš„çŸ¥è¯†ï¼Œåªè¦ä½ è‚¯ä¸“ç ”ï¼Œå…¶å®žä¹Ÿå¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ã€‚ c++å­¦ä¹ ï¼Œå­¦c++ä¸€æ–¹é¢æ˜¯ä¸ºäº†çœ‹æ‡‚ç³»ç»Ÿæºç ï¼Œç‰¹åˆ«æ˜¯binderåŸºæœ¬ä¸Šæ˜¯ç”¨c++å†™çš„ï¼›å¦ä¸€æ–¹é¢NDKç›¸å…³å¼€å‘ç”¨çš„å°±æ˜¯c++ï¼› â€‹ Android Frameworkï¼ŒåŒ…æ‹¬handlerï¼ˆAndroidçº¿ç¨‹é—´é€šä¿¡ã€Androidåº”ç”¨å±‚å¿ƒè„ï¼‰ã€Binderï¼ˆAndroid è¿›ç¨‹é—´é€šä¿¡ã€Androidç³»ç»Ÿå±‚å¿ƒè„ï¼‰ã€AMSã€PMSã€WMSå·¥ä½œåŽŸç†ï¼› â€‹ Android å¯åŠ¨æµç¨‹ï¼ˆåŒ…æ‹¬ç³»ç»Ÿå¼€æœºæµç¨‹ã€åº”ç”¨å¯åŠ¨ï¼‰ï¼ŒLauncherå·¥ä½œåŽŸç†ï¼Œzygoteå·¥ä½œåŽŸç†ï¼› â€‹ è‡ªå®šä¹‰Viewï¼ŒViewç»˜åˆ¶ï¼ˆViewRootImplä¸­ä¸‰å¤§ç»˜åˆ¶æ•´ä¸ªè¿‡ç¨‹ï¼‰ï¼Œæ»‘åŠ¨å†²çªï¼› â€‹ Hookï¼ŒåŠ¨æ€ä»£ç†ï¼› â€‹ AIDLä½¿ç”¨å’ŒåŽŸç†ï¼ˆå…¶å®žæœ¬è´¨ä¸Šè¿˜æ˜¯ç”¨çš„Binderï¼‰ï¼ŒMessagerä½¿ç”¨å’ŒåŽŸç†ï¼› â€‹ Androidå¯åŠ¨ä¼˜åŒ–ï¼ŒAndroidåº”ç”¨æ•´ä¸ªå¯åŠ¨æµç¨‹å’Œå¯ä»¥ä¼˜åŒ–çš„ç‚¹ï¼ˆ1ã€ä¸šåŠ¡ï¼Œ2ã€çº¿ç¨‹å¤„ç†è€—æ—¶ä»»åŠ¡ï¼Œ3ã€çº¿ç¨‹æ± ç®¡ç†ï¼Œ4ã€ç•Œé¢æ¸²æŸ“ï¼Œ5ã€é¿å…å¯åŠ¨å¡é¡¿ï¼Œ6ã€é—ªå±ï¼‰ï¼Œè¿˜æœ‰ä¸€äº›å¯åŠ¨ä¼˜åŒ–å¸¸ç”¨çš„å·¥å…·å¦‚systraceï¼› â€‹ Androidå¡é¡¿ä¼˜åŒ–ï¼Œå¡é¡¿äº§ç”Ÿçš„åŽŸå› ï¼Œå¡é¡¿çš„æ£€æµ‹ï¼› â€‹ Androidå†…å­˜ä¼˜åŒ–ï¼Œå†…å­˜æ³„æ¼äº§ç”Ÿçš„åŽŸå› å’Œæ£€æµ‹ï¼Œå†…å­˜æº¢å‡ºäº§ç”Ÿçš„åŽŸå› å’Œæ£€æµ‹ï¼ŒLeakCanaryåŽŸç†ï¼› â€‹ æž„å»ºåŽŸç†ï¼ˆgradleã€groovyï¼‰ï¼ŒDalvikè™šæ‹Ÿæœºå’Œdexæ–‡ä»¶ï¼› â€‹ ANRåŽŸç†å’Œè§£å†³æ‰‹æ®µï¼› â€‹ å¼€æºåº“ä½¿ç”¨å’Œæºç ï¼Œokhttpã€retrofitã€livedataã€databindingã€rxjavaã€glideç­‰ï¼Œglideç¼“å­˜æœºåˆ¶å’Œå†…å­˜ä¼˜åŒ–ï¼› â€‹ MVCã€MVPã€MVVMä½¿ç”¨ï¼› â€‹ Androidå¼€å‘æž¶æž„ï¼Œç»„ä»¶åŒ–ã€æ¨¡å—åŒ–ï¼› â€‹ é»‘ç§‘æŠ€ï¼šæ’ä»¶åŒ–ã€çƒ­éƒ¨ç½²ï¼ˆç¬”è€…ä¹Ÿè¿˜åœ¨å­¦ï¼‰ï¼› ä½œè€…ï¼š_Hawper æ¬§ç§‘äº‘é“¾å®‰å“å·¥ç¨‹å¸ˆä¸€é¢é¡¹ç›®æé—®ï¼ˆè¿™é‡Œå°±ä¸è¯´äº†ï¼Œå¤§å®¶çœ‹è‡ªå·±é¡¹ç›®å°±å¥½ï¼Œé¡¹ç›®å°½é‡ä¸è¦å†™å¾—æ¨¡æ£±ä¸¤å¯ï¼‰ JavaåŸºæœ¬çš„æ•°æ®ç±»åž‹æœ‰å“ªäº›ï¼Ÿ æ³¨è§£çš„ç±»åž‹æœ‰å“ªäº›ï¼Ÿ sychronizedå’Œlockçš„åŒºåˆ« Javaåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ JVMçš„å†…å­˜æ¨¡åž‹ è‡ªå®šä¹‰viewçš„æµç¨‹ HashMapçš„å®žçŽ°åŽŸç†ï¼Œå’ŒHashTableåŒºåˆ«ï¼Œçº¿ç¨‹ä¸å®‰å…¨çš„åŽŸå›  Activityç”Ÿå‘½å‘¨æœŸï¼Œæ¨ªç«–å±åˆ‡æ¢çš„ Activity ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Ÿ viewäº‹ä»¶åˆ†å‘æœºåˆ¶ httpsè¯·æ±‚åˆ°å“åº”çš„è¿‡ç¨‹ï¼ˆåŠ å¯†è¿‡ç¨‹ï¼‰ TCPæ‹¥å¡žæŽ§åˆ¶ å•ä¾‹æ¨¡å¼çš„å®žçŽ°æ–¹æ³•ï¼Œå¦‚ä½•ç ´åä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼Ÿ äºŒé¢é¡¹ç›®ä»‹ç» æœ‰ç”¨è¿‡kotlinï¼Œé‚£é—®è¿™å—æ²¡é—®é¢˜å§ï¼Ÿ Kotlinæœ‰æ²¡æœ‰static å…³é”®å­—ï¼Ÿé‚£åˆ›å»ºé™æ€å‡½æ•°æ€Žä¹ˆåŠž æž„é€ æ–¹æ³•æœ‰å“ªäº› åç¨‹Flowæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ ï¼ˆé—®äº†å››äº”é“å°±æ²¡é—®äº†ï¼Œå†…å¿ƒOSï¼šè¦ä¸è¿˜æ˜¯é—®Javaå§ï¼‰ HandleråŽŸç† looperæ­»å¾ªçŽ¯ä¼šä¸ä¼šå¡æ­»ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ å†…å­˜æ³„æ¼çš„æƒ…å†µæœ‰å“ªäº›ï¼Œè®²ä¸€ç§æ£€æµ‹æ–¹æ³• okhttpæ‹¦æˆªå™¨ Retrofitçš„è°ƒç”¨è¿‡ç¨‹ï¼ˆæˆ‘ç»™ä½ ç‚¹æç¤ºï¼Œä½ è‡ªå·±æ€è€ƒä¸€ä¸‹ï¼‰ mvpæ˜¯ä»€ä¹ˆï¼Ÿ TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå¦‚ä½•ä¿è¯å®‰å…¨ä¼ è¾“çš„ çŽ°åœ¨Androidå²—ä½çœŸçš„ä¸å¤šäº†ï¼Œå„ä½é¢è¯•Androidçš„æœ‹å‹å¯ä»¥æŠ±ä¸ªå›¢ï¼Œå…±äº«ä¸‹æœ€æ–°æƒ…å†µï¼Œæˆ‘å¯ä»¥ç»™å¤§å®¶åˆ†äº«ä¸€ä»½è‡ªå·±æ•´ç†çš„Androidé¢è¯•æ‰‹å†Œï¼Œéœ€è¦çš„è¯å¯ä»¥ç»™åˆ°å¤§å®¶ï¼Œä¹Ÿå¯ä»¥çœ‹æˆ‘ä¸“æ å“¦ï¼Œéƒ½æ˜¯æ–°é²œé¢ç»ã€‚ ä½œè€…ï¼šæ±‰å°¼æ‹”å“ˆå“ˆ æµ·ä¿¡é¡¹ç›®ä»‹ç»ï¼ˆå¬ä½ è®²å®Œé¡¹ç›®è§‰å¾—ä½ Androidè¿™å—æ˜¯æ²¡å•¥é—®é¢˜çš„ï¼Œè¿˜æ˜¯é—®äº†ä¸‹Androidæž¶æž„å’Œæ€§èƒ½ä¼˜åŒ–è¿™å—ï¼Œè®©æˆ‘å…·ä½“è°ˆè°ˆï¼‰å¯¹Javaé¢å‘å¯¹è±¡æ€æƒ³çš„ç†è§£è®²ä¸€ä¸‹Javaçš„åŸºæœ¬æ•°æ®ç±»åž‹ï¼ˆæ²¡ç­”å…¨ï¼Œå¼€å¤´æ£’å–ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼ŸJava å®¹å™¨éƒ½æœ‰å“ªäº›ï¼ŸListã€Setå’ŒMapçš„åŒºåˆ«çŸ¥é“å—ï¼ŸString ç±»å¯ä»¥ç»§æ‰¿å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿå®ƒå’ŒStringBuilderã€StringBufferæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿçº¿ç¨‹çš„ sleep() æ–¹æ³•å’Œ yield() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿçº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å½¢æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ± ï¼ŸGC Rootæœ‰å“ªäº›å‘¢?é‚£ä½ å°±è®²Javaåžƒåœ¾æ”¶é›†æœºåˆ¶å°±è¡ŒMVCæž¶æž„æ˜¯æ€Žæ ·çš„ï¼Ÿhttpså’Œhttpçš„åŒºåˆ«ï¼Œå®ƒæ˜¯å¦‚ä½•æ¥ä¿è¯å®‰å…¨æ€§çš„ï¼ŸTCPä¸‰æ¬¡æ¡æ‰‹çš„æ­¥éª¤ï¼Ÿä¸¤æ¬¡æ¡æ‰‹ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ ä½œè€…ï¼šæ±‰å°¼æ‹”å“ˆå“ˆ è£è€€AndroidæŠ€æœ¯é¢é¢ç»è£è€€æ˜¯ä¸€ä¸ªå¾ˆå€¼å¾—åŽ»çš„åœ°æ–¹ï¼Œæˆ‘9æœˆåˆæŠ•çš„ç®€åŽ†ï¼Œå›½åº†ä¸Šæ¥é™†ç»­è¿›è¡Œäº†é¢è¯•ï¼Œè£è€€æ˜¯æœ‰ä¸€è½®æŠ€æœ¯é¢ã€ä¸€è½®ç»¼åˆé¢ä»¥åŠä¸€è½®HRé¢ï¼Œæˆ‘ä¹Ÿéƒ½æ„Ÿå—äº†ä¸€éï¼Œè¿™é‡Œé‡ç‚¹ç»™å¤§å®¶è®²ä¸€ä¸‹æŠ€æœ¯é¢çš„å†…å®¹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°å¤§å®¶ã€‚ æŠ€æœ¯é¢ä¸¨50minè‡ªæˆ‘ä»‹ç» é¡¹ç›®ä¸­é‡åˆ°çš„éš¾é¢˜ ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯æ¥è§£å†³ Javaåžƒåœ¾å›žæ”¶ HashMapåº•å±‚åŽŸç† å“ˆå¸Œè¡¨è§£å†³å†²çªçš„æ–¹æ³• ä»€ä¹ˆæ˜¯å¤šæ€ï¼Œæ€Žä¹ˆåŽ»å®žçŽ°å‘¢ æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ï¼Œå®ƒä»¬å„è‡ªçš„ä½¿ç”¨åœºæ™¯å‘¢ å®‰å“çš„å››å¤§ç»„ä»¶ Activityå›žè°ƒçš„æ–¹æ³• ä½ éƒ½ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ å®žçŽ°å¤šçº¿ç¨‹çš„å‡ ç§æ–¹å¼ ç”¨è¿‡å“ªäº›æ•°æ®ç»“æž„ Javaé¢å‘å¯¹è±¡ synchronized equalså’ŒhashCodeæ–¹æ³• å¹¿æ’­çš„ä¸¤ç§å¯åŠ¨æ–¹å¼ ä¸‰æ¬¡æ¡æ‰‹ kotlinæœ‰äº†è§£è¿‡å—ï¼ˆèŠäº†ä¸€ä¼šï¼‰ ä½œè€…ï¼šç‰›ç‰›ï¼å‘å‰å†²ï¼é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ å°ç±³å®‰å“é¢ç»(å·²offer)9.5 ä¸€é¢ 25min â€‹ è‡ªæˆ‘ä»‹ç» â€‹ å†™ä»£ç å¸¦æ¥çš„å¿«ä¹ â€‹ è®¾è®¡æ¨¡å¼ â€‹ å•ä¾‹æ¨¡å¼çš„å¥½å¤„ â€‹ çº¿ç¨‹å®‰å…¨ â€‹ å½¢æˆæ­»é”çš„æ¡ä»¶,ç ´è§£æ­»é”çš„æ–¹æ³• â€‹ gcæ˜¯ä»€ä¹ˆ â€‹ åžƒåœ¾æ ‡è®°æ–¹æ³•(æ‹“å±•äº†å¾ˆå¤š) â€‹ å¼ºå¼•ç”¨,å¼±å¼•ç”¨ â€‹ å¯¹æ“ä½œç³»ç»Ÿçš„äº†è§£ 9.9 äºŒé¢ 40min â€‹ è‡ªæˆ‘ä»‹ç» â€‹ å¤šçº¿ç¨‹ â€‹ çº¿ç¨‹æ±  â€‹ å¹¶è¡Œä¸Žå¹¶å‘ â€‹ æ­»é” â€‹ arraylistä¸Žlinkedlist â€‹ hashmap â€‹ hashtableä¸Žconcurrenthashmap â€‹ æ‰‹æ’•å¿«é€ŸæŽ’åº â€‹ æ‰‹æ’•å•ä¾‹æ¨¡å¼ â€‹ å†…å­˜æ³„éœ² â€‹ é¡¹ç›®ä¸­ç¢°åˆ°çš„å¼‚å¸¸ ä½œè€…ï¼šrsthhé“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ èš‚èšé‡‘æœAndroidå®¢æˆ·ç«¯ä¸€é¢é¢ç»ä¸€é¢|40minjavaå››ç§å¼•ç”¨JVMå†…å­˜åŒºåŸŸä¹è§‚é”å’Œæ‚²è§‚é”gradleæ‰“åŒ…æµç¨‹çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«çº¿ç¨‹æ± çš„å‚æ•°å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œæ€Žä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŸAndroidç­¾åæµç¨‹Androidçš„å››å¤§ç»„ä»¶æœ‰å“ªäº›ï¼Ÿæ´»åŠ¨çš„ç”Ÿå‘½å‘¨æœŸhttpçš„ç¼“å­˜æœºåˆ¶tcpæ»‘åŠ¨çª—å£ï¼Œä¸‰æ¬¡æ¡æ‰‹hashmapçš„åº•å±‚ç»“æž„å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œé‡ç‚¹é—®äº†å•ä¾‹æ¨¡å¼çš„å®žçŽ°å¯¹AMSçš„äº†è§£è®²ä¸€ä¸ªçº¢é»‘æ ‘å’Œä¸€ä¸ªæŽ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜çš„åˆ†æžæ€è·¯ äºŒé¢|35minå®žä¹ é¡¹ç›®å’Œå°åº”ç”¨å¼€å‘è¿‡ç¨‹ï¼ˆæ‰’è£¤å­ï¼‰HTTPSæ˜¯æ€Žä¹ˆä¿è¯å®‰å…¨çš„DNSåè®®tapå’Œudpçš„åŒºåˆ«å¯¹ç§°åŠ å¯†Androidç­¾åæœºåˆ¶okhttpå¦‚ä½•å¤„ç†ç½‘ç»œç¼“å­˜çš„ ä½œè€…ï¼šæ±‰å°¼æ‹”å“ˆå“ˆ OPPOå®‰å“å²—ä¸€ã€äºŒé¢çš„é¢ç»ä¸€é¢|35minæ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ« hashmapåŽŸç† javaä¸­çš„å¼‚å¸¸å¤„ç†ä¸Žåˆ†ç±» çº¿ç¨‹æ± çš„å‚æ•° javaåžƒåœ¾å›žæ”¶æœºåˆ¶ GC ROOTåŒ…æ‹¬ä»€ä¹ˆ dnsåè®® thread fragmentçš„ç”Ÿå‘½å‘¨æœŸ handlerçš„ä½œç”¨ hashmapç›¸å…³ TCPä¼ è¾“å±‚ httpsæ€Žä¹ˆä¿è¯ä»–çš„å®‰å…¨æ€§ httpä¸Žhttpsçš„åŒºåˆ« å•ä¾‹æ¨¡å¼ äºŒé¢|45minviewç»˜åˆ¶æµç¨‹ åŒäº²å§”æ´¾æœºåˆ¶ å†…å­˜æ³„æ¼çš„åŽŸå› åŠæ–¹æ¡ˆ try catch finally ä¸­é‡åˆ°çš„returné—®é¢˜ è®²ä¸€ä¸‹æŽ’åºç®—æ³•çš„æ€è·¯ ä½œè€…ï¼šç»Ÿä¸€é²œæ©™å¤š å•†ç±³-å®‰å“å¼€å‘-ä¸€é¢é¢ç»æŠ€æœ¯é—®é¢˜åŒ…æ‹¬æ•°æ®ç»“æž„ã€ç®—æ³•ã€è®¡ç®—æœºç½‘ç»œå’Œå®‰å“çš„çŸ¥è¯† æ•°æ®ç»“æž„ï¼š æ•°æ®ç»“æž„çš„åˆ†ç±» æ•°ç»„å’Œé“¾è¡¨æœ€å¤§çš„åŒºåˆ« 5ä¸ªå…ƒç´ æ²¡æœ‰æŽ’åºï¼Œæ•°ç»„å’Œé“¾è¡¨æŸ¥æ‰¾å“ªä¸ªæ›´å¿«ä¸€äº›ï¼Ÿ å¦‚æžœæŽ’åºäº†ï¼Œå“ªä¸ªä¼šå¿«ä¸€äº›ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ hashmapå…·ä½“æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿ hashå†²çªå¦‚ä½•è§£å†³ï¼Ÿ æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ« äºŒå‰æŸ¥æ‰¾æ ‘çš„æ¦‚å¿µ æ ‘é€€åŒ–æˆé“¾è¡¨å¦‚ä½•è§£å†³ï¼Ÿ Bæ ‘ä»¥åŠBæ ‘å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ å›¾çš„éåŽ†ä»¥åŠå…·ä½“ä»£ç å¦‚ä½•å®žçŽ°ï¼Ÿï¼ˆè¿­ä»£ï¼‰ ç®—æ³•ï¼š æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„æ¦‚å¿µ å¸¸è§çš„æŽ’åºç®—æ³•ä»¥åŠæ—¶é—´å¤æ‚åº¦ é“¾è¡¨çš„åè½¬æ€Žä¹ˆå®žçŽ°ï¼Ÿ å®‰å“ï¼š å®‰å“çš„å››å¤§ç»„ä»¶ activityçš„å£°æ˜Žå‘¨æœŸ activityçš„å¯åŠ¨æ¨¡å¼ äº‹ä»¶çš„è§¦å‘æµç¨‹ è®¡ç®—æœºç½‘ç»œï¼š 5å±‚ç»“æž„ä»¥åŠç›¸åº”çš„ä½œç”¨ ä¼ è¾“å±‚çš„ä¸»è¦åè®®æœ‰å“ªäº› ä½œè€…ï¼šé²¸é±¼samaé“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ å•†ç±³å®‰å“æ ¡æ‹›é¢ç»åˆ†äº«å…ˆè¯´ç»“æžœï¼šæŠ€æœ¯é¢æŒ‚äº†ï¼Œä½†æ˜¯æ„Ÿè§‰æ”¶èŽ·è¿˜æ˜¯è›®å¤§çš„ã€‚ ç®€åŽ†è¿‡äº†ï¼Œå…ˆæ˜¯ç¬”è¯•å…³ï¼Œä¸€å…±8é“é¢˜ï¼Œå…¨æ˜¯lcä¸Šåˆ·åˆ°è¿‡çš„åŽŸé¢˜ï¼Œæ¯«ä¸çŠ¹è±«çš„è¿‡äº†ã€‚ é¢è¯•ä¸€å¼€å§‹ï¼Œé¢è¯•å®˜æ ¹æ®ç®€åŽ†ä¸Šçš„é¡¹ç›®ç»åŽ†é—®é—®é¢˜ã€‚ ç„¶åŽé—®Javaè¯­è¨€åŸºç¡€ï¼Œé—®åˆ°äº†æ³›åž‹ï¼Œæœ‰æ²¡æœ‰è‡ªå·±å®šä¹‰è¿‡æ³›åž‹ï¼Ÿï¼ˆæ²¡æœ‰ï¼‰ Javaä¸­çˆ¶ç±»å¯¹è±¡èƒ½å¦å¼ºåˆ¶è½¬æ¢ä¸ºå­ç±»å¯¹è±¡ï¼Ÿï¼ˆå°è±¡ä¸­è¿™é¢˜å¹¶æ²¡æœ‰åˆ·åˆ°è¿‡ï¼Œå°±å›žç­”çš„æ²¡æœ‰ï¼Œé¢è¯•å®˜å†è¿½é—® é‚£æœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œåœ¨æŸç§ç‰¹æ®Šæƒ…å†µä¸‹çˆ¶ç±»å¯¹è±¡èƒ½å¼ºåˆ¶è½¬æ¢ä¸ºå­ç±»å¯¹è±¡ï¼Ÿï¼‰æ­¤æ—¶æˆ‘å¿ƒé‡Œå·²ç»å‘å‡‰äº†ï¼Œä»–è¿™ä¹ˆè¿½é—®çš„æ„æ€æ˜¯ï¼Œè‚¯å®šèƒ½å¼ºåˆ¶è½¬æ¢ï¼Œåªæ˜¯æˆ‘ä¸çŸ¥é“ï¼Œè¿™ä¹Ÿä¸æ˜¯é¢˜åº“é‡Œèƒ½è§åˆ°çš„é¢˜ã€‚è¿™é¢˜è¿‡äº†ã€‚ ç„¶åŽæ˜¯é—®cè¯­è¨€åŸºç¡€ï¼Œå®å®šä¹‰ å†å°±æ˜¯æ•°æ®ç»“æž„å’Œç®—æ³•ï¼Œå †æŽ’åºçš„å®žçŽ°è¿‡ç¨‹ï¼Œå¿«é€ŸæŽ’åºçš„å®žçŽ°è¿‡ç¨‹ï¼ˆå¿«é€ŸæŽ’åºçš„å®žçŽ°è¿‡ç¨‹ç”¨è¯­è¨€ç»™ä»–æè¿°äº†ï¼Œç„¶åŽä»–å†è¿½é—®ç»†èŠ‚ï¼Œç¬¬äºŒè½®æŽ’åºçš„æ—¶å€™ï¼Œæ•°ç»„æ˜¯ä¸æ˜¯è¦ç§»åŠ¨ï¼Ÿï¼‰äººéº»äº†ï¼Œç¨€é‡Œç³Šæ¶‚ä¸çŸ¥é“è®²çš„ä»€ä¹ˆï¼Œè¿™é¢˜è¿‡ã€‚ å†ç„¶åŽæ˜¯æ“ä½œç³»ç»Ÿå’Œè®¡ç®—æœºç½‘ç»œã€‚Javaå¤šçº¿ç¨‹ã€‚è®¡ç®—æœºç½‘ç»œçš„7å±‚æ¨¡åž‹ã€‚çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ã€‚çº¿ç¨‹å’Œå‡½æ•°çš„å…³ç³»ã€‚åˆ›å»ºçº¿ç¨‹éœ€è¦ä»€ä¹ˆå‚æ•°ï¼Ÿå“ªäº›å‚æ•°æ˜¯å¿…è¦çš„ï¼Ÿå¦‚ä½•ç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Ÿ ç„¶åŽï¼Œå¤§å­¦æˆç»©æ€Žä¹ˆæ ·ï¼Ÿï¼ˆç»©ç‚¹3.3ï¼‰é—®é«˜æ•°ï¼Œxç«‹æ–¹çš„å¯¼æ•°æ˜¯å¤šå°‘ï¼Ÿï¼ˆ3xæ–¹ï¼Œå¾ˆç®€å•ï¼‰å¦‚ä½•ç”¨å¾®ç§¯åˆ†è®¡ç®—åœ†é”¥ä½“çš„ä½“ç§¯ï¼Ÿï¼ˆå…·ä½“è¿‡ç¨‹ä¸è®°å¾—äº†ï¼Œæ¯•ç«Ÿä¸‰å¹´æ²¡å­¦é«˜æ•°äº†ï¼Œç­”çš„ç”¨æžé™çš„æ€æƒ³ï¼ŒæŠŠåœ†é”¥ä½“æŠ½è±¡æˆæ— é™ä¸ªåœ†æŸ±ä½“ï¼Œåº•é¢ç§¯ä¹˜é«˜ï¼Œä¸¤å±‚ç±»ä¼¼fçš„ç¬¦å·ç›¸ä¹˜å¾—å‡ºåœ†é”¥ä½“çš„ä½“ç§¯ã€‚ï¼‰ ç„¶åŽå†æ˜¯æ¦‚çŽ‡è®ºï¼Œå¦‚ä½•è®¡ç®—æ•°å­¦æœŸæœ›ï¼Ÿï¼ˆç­”ï¼Œæ•°å­¦æœŸæœ›ç±»ä¼¼å¹³å‡å€¼ï¼Œæ¯”å¦‚åœ¨æœ‰10ä¸ªç‚¹çš„æ•£ç‚¹å›¾ä¸­ï¼Œæ•°å­¦æœŸæœ›å³è¿™10ä¸ªç‚¹çš„yå€¼ç›¸åŠ é™¤ä»¥10ï¼‰ æœ€åŽæ˜¯åŽä¸ºç»å…¸é¢˜ï¼Œä¸€ä¸ªæ¡¶5Lï¼Œå¦ä¸€ä¸ªæ¡¶7Lï¼Œå¦‚ä½•å¾—åˆ°6Lï¼Ÿï¼ˆç­”å‡ºæ¥äº†ï¼‰é¢è¯•å®˜ç«‹é©¬è¿½é—®ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ•°å­¦ç†è®ºå¯ä»¥ç»™è¿™ä¸ªé—®é¢˜æä¾›æ”¯æŒæ¥è¯æ˜Žï¼Œ1Lï¼Œ2Lï¼Œ3Lï¼Œ4Lï¼Œ6Læ˜¯ä¸æ˜¯éƒ½å¯ä»¥å¾—åˆ°è¿˜æ˜¯åªèƒ½å¾—åˆ°å…¶ä¸­çš„æŸå‡ ç§ï¼Ÿï¼ˆåˆ°è¿™é‡Œï¼Œæˆ‘æ˜¯çœŸçš„éº»äº†ï¼Œè€ƒè¿™ç§é¢˜çœŸçš„æ— ä»Žå‡†å¤‡ï¼Œé¢è¯•å®˜æ˜¯å•¥é—®é¢˜éƒ½èƒ½æ·±æŒ–æ·±æŒ–å†æ·±æŒ–ï¼‰ï¼ˆæœ€åŽä¸€é¢˜æœ‰çŸ¥é“çš„åŒå­¦å¯ä»¥è¯„è®ºåŒºç•™è¨€ï¼‰ ä½œè€…ï¼šAlaJackie 2022ç™¾åº¦Androidé¢è¯•é¢˜æ±‡æ€»+è§£æžæ€è·¯1ã€ Activityçš„å¯åŠ¨æµç¨‹ â€”â€”ä»ŽLauncheråˆ°AMSâ€”â€”ä»ŽAMSåˆ°ApplicationThreadâ€”â€”ä»ŽApplicationThreadåˆ°Activity 2ã€ handleræœºåˆ¶çš„åŽŸç† 3ã€ è·¨è¿›ç¨‹é€šä¿¡çš„å‡ ç§æ–¹å¼ 4ã€ wait å’Œ sleep çš„åŒºåˆ« 5ã€ String,StringBuffer,StringBuilder çš„åŒºåˆ« 6ã€ View å’Œ SurfaceView çš„åŒºåˆ« 7ã€ View çš„ç»˜åˆ¶åŽŸç† 8ã€ ç®€è¿° JNI 9ã€ ç®€è¿° TCPï¼ŒUDPï¼ŒSocket 10ã€ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« 11ã€ å†…å­˜æ³„éœ²å¦‚ä½•æŸ¥çœ‹å’Œè§£å†³ 12ã€ View çš„åˆ†å‘æœºåˆ¶ 13ã€ RecyclerView å’Œ ListView çš„åŒºåˆ« 14ã€ è°ˆ MVC ï¼ŒMVPï¼ŒMVVM 15ã€ Android æ€§èƒ½ä¼˜åŒ– 16ã€ SharedPreference è·¨è¿›ç¨‹ä½¿ç”¨ä¼šæ€Žä¹ˆæ ·ï¼Ÿå¦‚ä½•ä¿è¯è·¨è¿›ç¨‹ ä½¿ç”¨å®‰å…¨ï¼Ÿ 17ã€ activityï¼Œfragment ä¼ å€¼é—®é¢˜ 18ã€ activity ä¸Ž fragment åŒºåˆ« 19ã€ Fragment ä¸­ add ä¸Ž replace çš„åŒºåˆ«ï¼Ÿ 20ã€ è¯´ä¸‹ Activity çš„å››ç§å¯åŠ¨æ¨¡å¼ã€åº”ç”¨åœºæ™¯ ï¼Ÿ â€”â€”standardæ ‡å‡†æ¨¡å¼ï¼›singleTop æ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼›singleTask æ ˆå†…å¤ç”¨æ¨¡å¼ï¼›singleInstance å•å®žä¾‹æ¨¡å¼ 21ã€ æ¨ªç«–å±åˆ‡æ¢çš„ Activity ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼Ÿ 22ã€ Android çº¿ç¨‹é—´é€šä¿¡æœ‰å“ªå‡ ç§æ–¹å¼ â€”â€”1. å…±äº«å†…å­˜ï¼ˆå˜é‡ï¼‰ï¼›2.æ–‡ä»¶ï¼Œæ•°æ®åº“ï¼›3.Handlerï¼›4.Java é‡Œçš„ wait()ï¼Œnotify()ï¼ŒnotifyAll() 23ã€è‡ªå®šä¹‰viewçš„åŸºæœ¬æµç¨‹ 24ã€ tcpå’ŒudpåŒºåˆ« 25ã€ å¾®ä¿¡è§†é¢‘æ˜¯ç”¨äº†tcpè¿˜æ˜¯udp 26ã€ udpçš„ä¼˜ç‚¹ 27ã€ httpåŸºäºŽtcpè¿˜æ˜¯udp 28ã€ ä¸ºä»€ä¹ˆå¾ˆå¤šç”¨httpsè€Œä¸ç”¨http 29ã€ åŠ å¯†ç®—æ³•æœ‰äº†è§£å— 30ã€ ä»€ä¹ˆæ˜¯å¯¹ç§°åŠ å¯†å’Œéžå¯¹ç§°åŠ å¯† 31ã€ httpsçš„åŠ å¯†æ˜¯å¯¹ç§°çš„è¿˜æ˜¯éžå¯¹ç§°çš„ 32ã€ serviceåœ¨é¡¹ç›®ä¸­æ€Žä¹ˆä½¿ç”¨ï¼Ÿ 33ã€ æ€Žä¹ˆåœ¨å­çº¿ç¨‹ä¸­æ›´æ–°UIï¼Ÿ åŒèŠ±é¡º å®‰å“ 09.23 äºŒé¢ 50min è‡ªæˆ‘ä»‹ç» é¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹çš„åŒºåˆ« é¢å‘åˆ‡é¢ç¼–ç¨‹ä½ çŸ¥é“ä¹ˆï¼Œå’Œé¢å‘å¯¹è±¡çš„åŒºåˆ«å’Œç»†èŠ‚ æœ‰æ— é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ¡ˆä¾‹ å¼€é—­åŽŸåˆ™çš„ç»†èŠ‚ è®¾è®¡æ¨¡å¼çš„å…¶ä»–è®¾è®¡åŽŸåˆ™ synchronizedäº†è§£ä¹ˆ ThreadLocaläº†è§£ä¹ˆï¼Œä»–æœ‰ä»€ä¹ˆé—®é¢˜ å¿«æŽ’çš„æ€æƒ³ å¿«æŽ’è§£å†³topké—®é¢˜ï¼ˆæˆ‘å“­æ­»å•Šï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å½“å‰çš„ä¼šä½¿ç”¨å¿«æŽ’æ¥è¿›è¡Œè§£å†³topkï¼Œæˆ‘ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨å †æŽ’åºï¼‰ å¿«æŽ’å’Œå †æŽ’æ¥è¿›è¡Œè§£å†³topké—®é¢˜ è‡ªå·±æ‰‹ä¸Šçš„æ„å‘offeræœ‰é‚£äº› åœ°ç‚¹ä¼šè€ƒè™‘å“ªä¸€äº›ä¹ˆ ä¸çŸ¥é“ä½ æœ€è¿‘çœ‹è¿‡ä¸€äº›Bç«™çš„è™šæ‹Ÿäººç‰©ä¹ˆï¼Œä½ è§‰å¾—å½“å‰çš„æŠ€æœ¯æ–¹é¢æ˜¯æ€Žä¹ˆæ¥è¿›è¡Œå®žçŽ°çš„ çœ‹è¿‡é‚£äº›ä¹¦ç± å‡å¦‚è¯´ä½ æ¥åŒèŠ±é¡ºï¼Œä½ å¯¹å›¢é˜Ÿæ€Žä¹ˆæ¥çœ‹ ä½ æœ‰é‚£äº›ä¼˜åŠ¿å’Œç¼ºç‚¹ å‡å¦‚è¯´åŒèŠ±é¡ºç»™ä½ ä¸€ç¬”èµ„é‡‘ï¼Œä½ ä¼šæ€Žä¹ˆè€ƒè™‘æ¥è¿›è¡Œåˆ›ä¸š åé—®ï¼š1ï¼šéƒ¨é—¨çš„ä¸€äº›æƒ…å†µï¼›2ï¼šä½¿ç”¨åˆ°çš„æŠ€æœ¯æ ˆï¼ˆå®‰å“ï¼‰ ä½œè€…ï¼šå¶å­ä¸ŽèŠ±(o-Ï‰ï½‘)).oOå›° ä¼ éŸ³ Androidå¼€å‘ ä¸€é¢+äºŒé¢09&#x2F;13 ä¸€é¢ volatile åœ¨Javaå’ŒC++ä¸­çš„åŒºåˆ« synchronized åŽŸç† é”çš„å‡çº§ JVMå†…å­˜æ¨¡åž‹ NoSQLä¸Žå…³ç³»åž‹æ•°æ®åº“åŒºåˆ« åžƒåœ¾å›žæ”¶ç®—æ³• å†…å­˜æ³„éœ²æ£€æµ‹æ–¹æ³• JVMè°ƒä¼˜ 09&#x2F;19 äºŒé¢ è®¾è®¡æ¨¡å¼ä½œç”¨ åŠ¨æ€ä»£ç†ä¸Žé™æ€ä»£ç† çº¿ç¨‹ä¸Žè¿›ç¨‹çš„ä½¿ç”¨åœºæ™¯ çº¿ç¨‹å®‰å…¨ä¸Žä¸å®‰å…¨çš„ä¾‹å­ TCPä¸‰æ¬¡æ¡æ‰‹ HTTP3 Javaå†…å­˜æ³„éœ²åœºæ™¯ OOMèƒ½æ•èŽ·å— è¿è¡Œæ—¶å¼‚å¸¸ä¸Žç¼–è¯‘æ—¶å¼‚å¸¸ å®‰å“ç›¸å…³çŸ¥è¯† ä½œè€…ï¼šç‰›å®¢100861101é“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ æ»´æ»´å®‰å“å®¢æˆ·ç«¯ä¸€äºŒé¢é¢ç»ä¸€é¢ï¼ˆ40minï¼‰ ç®—æ³•: åè½¬é“¾è¡¨ åˆå¹¶ä¸¤ä¸ªæŽ’åºçš„é“¾è¡¨ è‡ªæˆ‘ä»‹ç» å®‰å“å­¦ä¹ è·¯çº¿ httpå’Œhttpsçš„åŒºåˆ« TCPä¸ŽUDPåŒºåˆ« TCPæµé‡æŽ§åˆ¶ Cookieä¸ŽSessionçš„ä½œç”¨ä¸ŽåŽŸç† è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ å¤šçº¿ç¨‹é‡Œçš„å…³é”®å­— synchronizedåº”ç”¨åœºæ™¯ wait() å’Œ sleep() çš„åŒºåˆ« Javaå†…å­˜å›žæ”¶æœºåˆ¶ åžƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº› äºŒé¢ï¼ˆ30minï¼‰ ç®—æ³•: åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ åˆå¹¶åŒºé—´ è‡ªæˆ‘ä»‹ç» é€‰æ‹©è¿™ä¸ªå²—ä½çš„åŽŸå›  é¡¹ç›®ç›˜ç‚¹ å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œä¼šå­˜åœ¨å•ä¸ª Activity ç›´æŽ¥è¢«ç³»ç»Ÿå›žæ”¶çš„æƒ…å†µå—ï¼Ÿ å®‰å“ä¸­çš„æ¶ˆæ¯æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ åˆ†å‘ç»™Handlerçš„æ¶ˆæ¯æ˜¯æ€Žä¹ˆå¤„ç†çš„ æ¶ˆæ¯æœºåˆ¶ä¸­ï¼Œå¦‚ä½•æ›´æ–°UI ç”¨è¿‡å“ªäº›å®‰å“ç›¸å…³çš„å¼€æºæ¡†æž¶ ä½œè€…ï¼šç»Ÿä¸€é²œæ©™å¤šé“¾æŽ¥ï¼šhttps://www.nowcoder.com/?type=11023_0æ¥æºï¼šç‰›å®¢ç½‘ 1.ä»‹ç»RPCï¼ŒRPCå’Œå…¶ä»–åè®®HTTPæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç„¶åŽæ‰£é¡¹ç›®ç»†èŠ‚ã€‚ã€‚ã€‚ï¼ˆå½•åƒéƒ½ä¸æ•¢çœ‹ï¼Œä¸æƒ³å†™äº†ï¼‰","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"health","slug":"health","date":"2024-05-25T11:19:39.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/05/25/health/","link":"","permalink":"https://noteforme.github.io/2024/05/25/health/","excerpt":"","text":"Takeawayé˜¿å‘†ç‚’é¥­* ç‚’æ±Ÿè¥¿ç±³ç²‰ , ç‚’é¢éš¾åƒ,å¤ªå’¸äº†ç–†å²šå¤§ç›˜é¸¡ ä¸å¥½åƒå·§å“¥æ¹˜ç²‰é¦†ï¼š ç…®ç²‰ï¼Œå¤ªè¾£ï¼Œéš¾åƒæ‚¦å¨Ÿç§åŽ¨ã€‚ å‘³é“è¿˜è¡Œï¼Œå¤ªå’¸äº†æ¸©å²­åµŒç³• ï¼š ä¸å«ç”Ÿ. Kneerecovery videohttps://www.youtube.com/watch?v=V-zQ2ePEj1Y https://mp.weixin.qq.com/s/KRcLEmkJI_ELGtdI2kufig æ‚¨å¥½ï¼Œæ‚¨31å²ï¼Œå³è†å…³èŠ‚ç–¼ç—›ä¸€æœˆä½™ï¼Œå‚åŠ è¿‡é©¬æ‹‰æ¾ã€‚çœ‹æ‚¨çš„ç£å…±æŒ¯æ¥è¯´ï¼Œæœ‰ç§¯æ¶²ï¼Œé«Œéª¨è½¯éª¨æœ‰æŸä¼¤ï¼ŒåŠæœˆæ¿æ˜¯ä¸ª2çº§ä¿¡å·ã€‚åŠæœˆæ¿2çº§ä¿¡å·ä¸éœ€è¦å¤„ç†ï¼Œè¿™æ˜¯ä¸ªé€€å˜ä¿¡å·ï¼Œå’Œæ´»åŠ¨å¤šæœ‰å…³ç³»ï¼Œç§¯æ¶²è¯´æ˜Žè†å…³èŠ‚å†…æœ‰æ— èŒæ€§ç‚Žç—‡ã€‚ ä»Žç›®å‰æ¥çœ‹ï¼Œå¼•èµ·ç›®å‰æ‚¨ç–¼ç—›çš„åŽŸå› ä¸»è¦æ˜¯è¿åŠ¨æŸä¼¤ã€‚ä¹Ÿè®¸æ‚¨æ²¡æœ‰ä¸¥é‡çš„å¤–ä¼¤ï¼Œä½†æ˜¯æ‚¨å¹³æ—¶æ‰“ç¾½æ¯›çƒï¼Œçƒç±»è¿åŠ¨å¯¹è†å…³èŠ‚è¦æ±‚æžé«˜ï¼ŒåŒ…æ‹¬æ€¥åœã€æ€¥è·‘ã€æ—‹è½¬ã€è¹²ä½åˆ°ç«™ç«‹ï¼ˆæˆ–è€…åè¿‡æ¥ï¼‰ã€‚è¿™äº›åŠ¨ä½œä¼šé€ æˆè†å…³èŠ‚çš„æ…¢æ€§æŸä¼¤ï¼Œå°¤å…¶æ˜¯è†å…³èŠ‚å†…é«Œéª¨è½¯éª¨ï¼Œä¼šæ—©æœŸå‘ç”Ÿè½¯éª¨æŸä¼¤ï¼Œé«Œéª¨è½¯éª¨ä¸å…‰æ»‘ï¼Œé«Œéª¨å’Œè‚¡éª¨çš„æ‘©æ“¦ç•Œé¢æ‘©æ“¦åŠ›å¢žå¤§ï¼Œé«Œè‚¡å…³èŠ‚é€æ¸å‡ºçŽ°é—®é¢˜ï¼Œè€Œä¸”æ˜¯ä¸å¯é€†çš„ï¼Œå¹´çºªå¤§äº†å°±æ˜¯å…³èŠ‚ç‚Žã€‚ å¥½åœ¨æ‚¨å¹´è½»ï¼Œç›®å‰æŸä¼¤ä¸ä¸¥é‡ï¼Œä¸éœ€è¦æ‰‹æœ¯ç­‰å¤„ç†ï¼Œåšå¥½ä»¥ä¸‹å‡ ç‚¹å³å¯[1,2]ï¼š1.è¿åŠ¨å‰åšå¥½çƒ­èº«ã€‚çƒ­èº«èƒ½å”¤é†’è‚Œè‚‰ï¼Œä¿æŒè‚Œè‚‰çš„åŽŸè®°å¿†å’Œå…´å¥‹æ€§ï¼Œè¿™æ ·èƒ½å‡å°‘å—ä¼¤çš„å‡ çŽ‡ã€‚2.è†å…³èŠ‚åŠŸèƒ½é”»ç‚¼ã€‚ç»†èŠ‚å¾ˆå¤šï¼Œä¸è¿‡åšå¥½äº†è¿™äº›é”»ç‚¼ï¼Œåˆ©äºŽè†å…³èŠ‚ä¿æŠ¤ï¼Œå‡ç¼“å…³èŠ‚é€€å˜ï¼Œå¢žåŠ è¿åŠ¨å¯¿å‘½ã€‚â‘ åŠ å¼ºè‚¡å››å¤´è‚Œçš„é”»ç‚¼ï¼šç›´è…¿æŠ¬é«˜åšæŒ5ç§’é’Ÿï¼Œæ”¾ä¸‹å‡ ç§’é’Ÿï¼Œå†æŠ¬é«˜ï¼Œå†æ”¾ä¸‹ï¼Œåå¤åšï¼Œ50-100æ¬¡ä¸ºä¸€ç»„ï¼Œæ¯å¤©ä¸Šåˆä¸€ç»„ä¸‹åˆä¸€ç»„ã€‚ â‘¡é å¢™é™è¹²ï¼šæŽ¨èç—‡çŠ¶ä¸æ˜Žæ˜¾çš„ä¸­é’å¹´åšï¼Œä¸Šèº«åŽèƒŒé å¢™ï¼Œé‡å¿ƒåŽç§»ï¼Œè†å…³èŠ‚çš„å±ˆæ›²ä¸è¦è¶…è¿‡90åº¦ï¼ŒåšæŒåˆ°å¤§è…¿å‘é…¸åœæ­¢è¿åŠ¨ï¼Œæ³¨æ„ä¸è¦è†ç›–å†…æ‰£ï¼Œè„šåŽè·Ÿä¸è¦å¤ªé è¿‘å¢™é¢ã€‚ â‘¢æ¯æ—¥è†å…³èŠ‚æŒ‰æ‘©æ³•ï¼šå·¦å³æŽ¨é«Œéª¨ï¼Œå¢žåŠ é«Œéª¨æ´»åŠ¨åº¦ï¼ŒæŒ‰æ‘©ä¾§å‰¯éŸ§å¸¦2åˆ†é’Ÿã€‚ â‘£ç”©è…¿è¿åŠ¨ï¼š2000æ¬¡ã€‚æ‰‹æ‰¶ä½æ”¯æ’‘ç‰©ï¼Œä¸€åªè„šåž«é«˜ï¼Œå¦ä¸€åªè„šå‰åŽç”©åŠ¨ï¼Œæ¯ä¾§ç”©1000æ¬¡ï¼Œä¸¤è„šäº¤æ›¿è¿›è¡Œç”©åŠ¨ï¼Œå¯åˆ†å¤šæ¬¡å®Œæˆï¼Œä¸€èˆ¬2å°æ—¶ä¹‹å†…å®Œæˆã€‚ â‘¤å‹¾è„šè¿åŠ¨ï¼šååœ¨æ¤…å­ä¸Šï¼Œä¼¸ç›´è…¿ï¼Œå‹¾è„šå°–ç»·è„šå°–äº¤æ›¿å®Œæˆï¼Œæ¯æ¡è…¿30-50æ¬¡1ç»„ï¼Œæ¯å¤©3ç»„ã€‚ æ‚£è€…å¯æ ¹æ®è‡ªèº«ä¹ æƒ¯ï¼Œè€åŠ›é€‰æ‹©é€‚åˆè‡ªå·±çš„è¿åŠ¨ä¸Žç†ç–—æ–¹å¼ã€‚ OATå®¹æ˜“èƒ€æ°”ï¼Œå°‘é‡å¤šæ¬¡5 å‹º ç‡•éº¦ç‰‡ + æ— ç³–è±†æµ† https://www.youtube.com/watch?v=Tx_R1ewl7DA&amp;pp&#x3D;ygUM54eV6bqm6YCJ5oup https://www.youtube.com/watch?v=xnbfDZOyFDA è€Œç”·äººå€‘å‰‡ä¸æ‡‰è¶…éŽ2,000kcalã€‚https://www.esquirehk.com/health/calories-how-to-allocation åƒç„¦å’Œåƒå¡çš„æ¢ç®—å…³ç³»æ˜¯ï¼š1000åƒç„¦&#x3D;238.9å¤§å¡ï¼Œ1 å¤§å¡ï¼ˆåƒå¡ï¼‰&#x3D;4.18åƒç„¦ï¼ˆKJï¼‰ MILKhttps://mp.weixin.qq.com/s/3G6ojq9zIvoZW-0B6hXXbAhttps://mp.weixin.qq.com/s/6biNR2ecGKYGU4qGtYUTbwhttps://mp.weixin.qq.com/s/zrrig_-da9KdOUhyuMWHTQ é…¸å¥¶https://mp.weixin.qq.com/s/BPU9f9YbIgtLUaV827QnTw ç»´ç”Ÿç´  Dhttps://mp.weixin.qq.com/s/tuFUAUAHkjhJOP0yxH39vA EAThttps://mp.weixin.qq.com/s/hn_fErI9jWFz5orcVYPNOQ salaryè–ªèµ„ å…³äºŽæ­¦æ±‰ä½°é’§æˆæŠ€æœ¯æœ‰é™è´£ä»»å…¬å¸çš„å¤–åŒ…ï¼Œé’ˆå¯¹æ­å·žé˜¿é‡Œå¤–åŒ…ï¼Œæœ¬äººçŽ°åœ¨åˆšè„±å‘ï¼Œåœ¨æ­å·žé˜¿é‡Œå¤–åŒ…çš„èŒä½çº§åˆ«æ˜¯W3-W5ï¼Œä»¥ä¸Šéƒ½æ˜¯é’ˆå¯¹é˜¿é‡Œçš„å¤–åŒ…å¼€å‘å’Œæµ‹è¯•å²—ä½ã€‚W3 å¯¹åº”çš„ç”²æ–¹ç»™å‡ºçš„è–ªèµ„æ˜¯25K W4å¯¹åº”çš„ç”²æ–¹ç»™å‡ºçš„è–ªèµ„æ˜¯30K W5ä¸çŸ¥é“ä¸€èˆ¬ç”²æ–¹åªä¼šç»™ä½ ä¸€åŠçš„è–ªèµ„ï¼Œå¹¶ä¸”ä¼šå¾ˆå‘ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯å„ç§åŽ‹æ¦¨ä½ ä»¬å¤–åŒ…äººåŠ›èµ„æºï¼Œå¯¹äºŽæƒ³è¿›æ¥çš„äººï¼Œæˆ‘è¡¨ç¤ºçœ‹ä½ ä¸ªäººæ„æ„¿ã€‚ç„¶åŽè–ªèµ„å°½é‡æœç€20+å¾€ä¸Šæ¥è¦ï¼Œç»™ä¸åˆ°å°±ä¸éœ€è¦æ¥ï¼Œè·Ÿå¤–åŒ…äººå‘˜å¾—ç¡¬æ°”ä¸€ç‚¹ï¼Œé‡Œé¢å…¬ç§¯é‡‘å’Œç¤¾ä¿éƒ½æ˜¯æœ€ä½Žçš„æ¥ï¼Œæ²¡æœ‰ä»€ä¹ˆå›¢å»ºæ´»åŠ¨ï¼Œå‡ ä¹Žä¸ºé›¶ï¼Œä¹Ÿæ²¡æœ‰å½’å®¿æ„Ÿï¼Œç»™äººæ„Ÿè§‰å°±æ˜¯ä¸€å¤´ç‰›ã€‚å¦‚æžœåœ¨é‡Œé¢æ··æ—¥å­çš„è¯ï¼ŒåŸºæœ¬ä¸Šå°±åºŸäº†ã€‚è¿˜æœ‰ä¸€ç‚¹è¿˜ä¼šå¡ä½ ç¦»èŒï¼Œæ€»çš„æ¥è¯´ï¼Œåžƒåœ¾å…¬å¸ï¼Œåžƒåœ¾å…¬å¸ï¼Œåžƒåœ¾å…¬å¸ã€‚é‡è¦çš„äº‹æƒ…è¯´ä¸‰éå“Ÿï¼Œå¦‚æžœè¯´è¦çš„è–ªèµ„å¤Ÿé«˜çš„è¯ï¼Œæˆ‘è§‰å¾—ä¹Ÿä¸äºï¼Œä¸è¦ç»™å…¬å¸é¢å­ã€‚æ²¡æœ‰äººä¼šç†è§£ä½ çš„ã€‚ ä½œè€…ï¼šaxolotlé“¾æŽ¥ï¼šhttps://www.zhihu.com/question/67747911/answer/1488575977æ¥æºï¼šçŸ¥ä¹Žè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚ https://maimai.cn/web/feed_detail?fid&#x3D;1798366727&amp;efid&#x3D;iJ0LEumBeKjT6BqWVHmggQ 20å¹´12æœˆä»½è¿›å…¥èš‚èšé‡‘æœå¤–åŒ…å½“æ˜¯çº§åˆ«æ˜¯w3è–ªèµ„12kä¸åˆ°ï¼Œç„¶åŽ21å¹´8æœˆåº•ç¦»èŒåŽ»äº†å®¶è‡ªç ”å…¬å¸è–ªèµ„15k 13è–ª ä¸»è¦æ˜¯è´Ÿè´£ç§»åŠ¨ç«¯çš„æµ‹è¯•ï¼Œåšäº†2æœˆå…¬å¸å†³å®šé¡¹ç›®è§£æ•£ä¸åšäº†ï¼Œ11æœˆä¸­æ—¬åˆè¢«ä¹‹å‰é˜¿é‡Œä¸»ç®¡æ‹›å›žåŽ»äº†ï¼Œå‡äº†ä¸€çº§åŠ è–ªåˆ°äº†15kã€‚https://www.zhihu.com/question/502753583","categories":[{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/categories/LIFE/"}],"tags":[],"author":"Jon"},{"title":"Computer Network","slug":"computer-network","date":"2024-05-24T07:56:10.000Z","updated":"2024-09-15T10:00:05.063Z","comments":true,"path":"/2024/05/24/computer-network/","link":"","permalink":"https://noteforme.github.io/2024/05/24/computer-network/","excerpt":"","text":"Summary of 4 Layer Model The 7-layer OSI Model traceroute -w 1 www.jonblog.site https://www.bilibili.com/video/BV1F54y1t7Dx?from=search&amp;seid=12798261982184143495 Open System InterconnectionOSI 7å±‚æ¨¡åž‹ TCP&#x2F;IP 5å±‚æ¨¡åž‹ åº”ç”¨å±‚protocolURI ftp://ftp.is.co.za/rfc/rfc1808.txt http://www.ietf.org/rfc/rfc2396.txt ldap:&#x2F;&#x2F;[2001:db8::7]&#x2F;c&#x3D;GB?objectClass?one mailto:&#x4a;&#111;&#104;&#110;&#x2e;&#68;&#111;&#x65;&#64;&#x65;&#120;&#97;&#109;&#x70;&#108;&#x65;&#46;&#99;&#111;&#109; news:comp.infosystems.www.servers.unix tel:+1-816-555-1212 telnet:&#x2F;&#x2F;192.0.2.16:80&#x2F; urn:oasis:names:specification:docbook:dtd:xml:4.1.2 Http1.1https://tools.ietf.org/html/rfc7230#section-6 HyperText Transfer Protocol å¯é çš„æ•°æ®ä¼ è¾“åè®®ï¼ŒåŸºäºŽTCP æŠ¥æ–‡æ ¼å¼ Http2.0https://tools.ietf.org/html/rfc7540 å¯ä»¥çœ‹åˆ°http2.0æ”¹é€ äº†åè®®ï¼Œ head æ”¹æˆäº† HEADERS frame ,Body æ”¹æˆäº† DATA frameã€‚ Length : æ•´ä¸ªframe å¼€å§‹åˆ°ç»“æŸ Type : frameçš„ç±»åž‹ Stream IDç”¨ä½œæµæŽ§åˆ¶ Payload è¯·æ±‚æ­£æ–‡ https://www.bilibili.com/video/BV1SJ411q7ei?from=search&amp;seid=10178848750670062838 https://www.bilibili.com/video/BV1Sw411d7oE?from=search&amp;seid=10178848750670062838 ç«¯å£ä½œç”¨è¿›ç¨‹idæ˜¯ä¼šå˜åŒ–çš„ï¼Œè¿›ç¨‹é€šè¿‡ç»‘å®šå›ºå®šä¸å˜çš„ç«¯å£ï¼Œæ¥å®žçŽ°é€šä¿¡ã€‚ httpç‰ˆæœ¬åŒºåˆ« https://juejin.cn/post/6844903489596833800 Socketå¯¹TCP&#x2F;IPçš„å°è£…ï¼Œ æä¾›å¯ä¾›ç¨‹åºå‘˜åšç½‘ç»œå¼€å‘çš„æŽ¥å£-Socketç¼–ç¨‹æŽ¥å£ã€‚ SocketHttpTest.java http getè¯·æ±‚ æŒ‰ç…§getè¯·æ±‚æ‹¼æŽ¥å­—ç¬¦ä¸² 1234567891011121314151617StringBuffer protocol = new StringBuffer(); //è¯·æ±‚è¡Œ protocol.append(&quot;GET &quot;); protocol.append(url.getPath()); protocol.append(&quot;?&quot;); protocol.append(url.getQuery()); protocol.append(&quot; &quot;); protocol.append(&quot;HTTP/1.1&quot;); protocol.append(&quot;\\r\\n&quot;); // httpè¯·æ±‚å¤´ protocol.append(&quot;Host:&quot;); protocol.append(url.getHost()); protocol.append(&quot;\\r\\n&quot;); //ç©ºè¡Œ protocol.append(&quot;\\r\\n&quot;); 1234567891011121314//postè¯·æ±‚ä½“ getæ²¡æœ‰System.out.println(&quot;å‘é€çš„httpæŠ¥æ–‡: \\n&quot; + protocol.toString()); Socket socket = new Socket();socket.connect(new InetSocketAddress(url.getHost(), 80)); //èŽ·å¾—è¾“å…¥è¾“å‡ºæµBufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream())); bufferedWriter.write(protocol.toString());bufferedWriter.flush(); StringBuilder stringBuilder = new StringBuilder(); 1234567String line = &quot;&quot;;while ((line = bufferedReader.readLine()) != null) &#123; stringBuilder.append(line) .append(&quot;\\r\\n&quot;);&#125;System.out.println(stringBuilder.toString()); 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152* Http Postè¯·æ±‚å‚æ•°æ”¾å…¥è¯·æ±‚ä½“ä¸­```java URL url = new URL(cUrl); StringBuffer protocol = new StringBuffer(); //è¯·æ±‚è¡Œ protocol.append(&quot;POST &quot;); protocol.append(url.getPath()); protocol.append(&quot; &quot;); protocol.append(&quot;HTTP/1.1&quot;); protocol.append(&quot;\\r\\n&quot;); // httpè¯·æ±‚å¤´ protocol.append(&quot;Host:&quot;); protocol.append(url.getHost()); protocol.append(&quot;\\r\\n&quot;); protocol.append(&quot;Content-Length: 60\\r\\n&quot;); protocol.append(&quot;Content-Type: application/x-www-form-urlencoded\\r\\n&quot;); //ç©ºè¡Œ protocol.append(&quot;\\r\\n&quot;); // å¿…é¡»ç”¨ç©ºè¡Œåˆ†éš”è¯·æ±‚ä½“ //postè¯·æ±‚ä½“ getæ²¡æœ‰// protocol.append(&quot;city=&quot;+ URLEncoder.encode(&quot;é•¿æ²™&quot;,&quot;UTF-8&quot;) +&quot;&amp;key=13cb58f5884f9749287abbead9c658f2&quot;); protocol.append(url.getQuery()); System.out.println(&quot;å‘é€çš„httpæŠ¥æ–‡: \\n&quot; + protocol.toString()); Socket socket = new Socket(); socket.connect(new InetSocketAddress(url.getHost(), 80)); //èŽ·å¾—è¾“å…¥è¾“å‡ºæµ BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())); BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream())); bufferedWriter.write(protocol.toString()); bufferedWriter.flush(); StringBuilder stringBuilder = new StringBuilder(); String line = &quot;&quot;; while ((line = bufferedReader.readLine()) != null) &#123; stringBuilder.append(line) .append(&quot;\\r\\n&quot;); &#125; System.out.println(stringBuilder.toString()); åˆ†å—ç¼–ç æ•°æ®é‡å¾ˆå¤§ï¼åˆ†å—ç¼–ç  ä¸Šé¢çš„5å°±æ˜¯ ä¸‹é¢çš„å­—ç¬¦é•¿åº¦ HTTPShttps://www.bilibili.com/video/BV1F54y1t7Dx?p=5 https://www.bilibili.com/video/BV1j7411H7vV?from=search&amp;seid=12798261982184143495 ä¼ è¾“å±‚ (TCP UDP)ä»£ç è¿è¡Œåœ¨ç”¨æˆ·æœºå™¨ä¸Šï¼Œä¸ºäº†å¯¹ ç½‘ç»œå±‚è¿›è¡Œæ›´å¥½çš„æŽ§åˆ¶ UDP(User Datagram Protocol) é¢å‘æŠ¥æ–‡ä¼ è¾“ æ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶,æ— æ³•ä¿è¯æ•°æ®åœ¨ç½‘ç»œä¸­æ˜¯å¦ä¸¢å¤± UDPé¦–éƒ¨å¼€é”€å° â€‹ ![ä¼ è¾“å±‚] TCP (Transmission Control Protocol) é¢å‘è¿žæŽ¥çš„åè®® æä¾›å¯é ä¼ è¾“ å…¨åŒå·¥é€šä¿¡ é¢å‘å­—èŠ‚æµåè®®: å¯èƒ½å¯¹ç”¨æˆ·æ•°æ®åˆå¹¶æˆ–åˆ†æ‹†è¿›è¡Œä¼ è¾“ TCPé¦–éƒ¨ åºå· tcpæ ‡è®° å¦‚ä½•ä¿è¯TCPå¯é ä¼ è¾“? åœæ­¢ç­‰å¾…åè®® è¿žç»­ARQåè®®(Automatic Repeat request) : â€‹ æ»‘åŠ¨çª—å£: ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå®žçŽ°æµé‡æŽ§åˆ¶ ç´¯è®¡ç¡®è®¤ â€‹ é€‰æ‹©é‡ä¼ : é‡ä¼ è¾¹ç•Œå’ŒèŒƒå›´ å®šæ—¶å™¨ è¶…æ—¶å®šæ—¶å™¨ åšæŒå®šæ—¶å™¨: è§£å†³æ­»é”å±€é¢,å½“æ”¶åˆ°çª—å£ä¸º0çš„æ¶ˆæ¯ï¼Œåˆ™å¯åŠ¨åšæŒå®šæ—¶å™¨,æ¯éš”ä¸€æ®µæ—¶é—´å‘é€ä¸€ä¸ªçª—å£æŽ¢æµ‹æŠ¥æ–‡ TCPåè®®çš„æ‹¥å¡žæŽ§åˆ¶ æŠ¥æ–‡è¶…æ—¶å³è®¤ä¸ºæ‹¥å¡ž æ…¢å¯åŠ¨ç®—æ³• ç”±å°åˆ°å¤§é€æ¸å¢žåŠ å‘é€æ•°æ®é‡,ç›´åˆ°åˆ°è¾¾ â€œæ…¢å¯åŠ¨é˜ˆå€¼â€&#x3D;&gt;å¼€å§‹ æ‹¥å¡žé¿å…ç®—æ³• æ‹¥å¡žé¿å…ç®—æ³• åªè¦ç½‘ç»œä¸æ‹¥å¡žï¼Œå°±è¯•æŽ¢æ‹¥å¡žçª—å£è°ƒå¤§ TCPä¸‰æ¬¡æ¡æ‰‹TCPæ ‡è®° ä¸‰æ¬¡æ¡æ‰‹ ![shake] ä¸ºä½•3æ¬¡æ¡æ‰‹1å®¢æˆ·ç«¯è§’åº¦ : 1 ï¼Œ2ï¼Œè¯´æ˜Žå®¢æˆ·ç«¯çš„å‘é€å’ŒæŽ¥æ”¶æ²¡é—®é¢˜ æœåŠ¡ç«¯è§’åº¦ï¼š 1ï¼Œ2ï¼Œè¯´æ˜ŽæœåŠ¡ç«¯çš„æŽ¥æ”¶æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸ç¡®å®šè‡ªå·±çš„å‘é€æ”¶å¦æœ‰é—®é¢˜ï¼Œæ‰€ä»¥éœ€è¦3ç¡®è®¤ ä¸ºä½•3æ¬¡æ¡æ‰‹2ç¬¬ä¸€æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘å‡º: Serverè§‰å¾— : å®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›æ²¡é—®é¢˜ ç¬¬äºŒæ¬¡æ¡æ‰‹æœåŠ¡ç«¯å‘å‡º: Clientè§‰å¾— : æœåŠ¡ç«¯çš„æŽ¥æ”¶èƒ½åŠ›æ²¡é—®é¢˜ï¼Œ ä»¥åŠæœåŠ¡ç«¯çš„å‘é€èƒ½åŠ›æ²¡é—®é¢˜ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹å®¢æˆ·ç«¯å‘å‡º: Serverè§‰å¾—: å®¢æˆ·ç«¯çš„æŽ¥æ”¶èƒ½åŠ›æ²¡é—®é¢˜ã€‚ ä¸ºä»€ä¹ˆè¦ç¬¬ä¸‰æ¬¡æ¡æ‰‹? åªæœ‰ä¸¤æ¬¡æ¡æ‰‹çš„è¯ï¼Œä¸€æ—¦ç¬¬äºŒæ¬¡æ¡æ‰‹æŽ¥æ”¶è¶…æ—¶ï¼Œé‡æ–°å‘é€åŽå°±ä¼šé‡æ–°å‘é€ï¼Œä¼šå¯¼è‡´å»ºç«‹2ä¸ªè¿žæŽ¥ TCPè¿žæŽ¥çš„4æ¬¡æŒ¥æ‰‹ ç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ· : æœåŠ¡ç«¯æ”¶åˆ°ä¿¡æ¯åŽ,å°±èƒ½ç¡®å®šå®¢æˆ·ç«¯å·²ç»åœæ­¢å‘é€æ•°æ®ã€‚ ç”±æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘èµ· : å®¢æˆ·ç«¯æ”¶åˆ°æ¶ˆæ¯åŽ,å°±èƒ½ç¡®å®šæœåŠ¡ç«¯å·²ç»çŸ¥é“å®¢æˆ·ç«¯ä¸ä¼šå†å‘é€æ•°æ®ã€‚è¿™ä¸€æ¬¡æ˜¯ä¸ºäº†TCPå¯é ä¼ è¾“ï¼Œç¡®è®¤æ”¶åˆ°äº†æ•°æ®åŒ…ã€‚ ç”±æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘èµ· : å®¢æˆ·ç«¯æ”¶åˆ°æ¶ˆæ¯åŽ,å°±èƒ½ç¡®å®šæœåŠ¡ç«¯å·²ç»åœæ­¢å‘é€æ•°æ®ã€‚æ­¤æ—¶ æœåŠ¡ç«¯æ•°æ®å‘é€å®Œäº†ã€‚ ç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ· : æœåŠ¡ç«¯æ”¶åˆ°ä¿¡æ¯åŽ,å°±èƒ½ç¡®å®šå®¢æˆ·ç«¯å·²ç»çŸ¥é“æœåŠ¡ç«¯ä¸ä¼šå†å‘é€æ•°æ®ã€‚ Client: åˆ†æ‰‹ Server : what Server : å¥½å§ åˆ†å§ Client : æˆ‘å·²ç»åˆ å¾®ä¿¡äº†ï¼› ç­‰å¾…è®¡æ—¶å™¨ : 2MSL(Max Segment liftime), **ä¸ºä»€ä¹ˆéœ€è¦ç­‰å¾…è®¡æ—¶å™¨?**ï¼š å¦‚æžœç¬¬4ä¸ªæŒ¥æ‰‹æŠ¥æ–‡æŽ¥æ”¶æ–¹æ²¡æ”¶åˆ°ï¼Œé‚£ä¹ˆæŽ¥æ”¶æ–¹ä¼šé‡æ–°å‘é€ç¬¬3æ¬¡çš„æŒ¥æ‰‹æŠ¥æ–‡ ä¸ºä»€ä¹ˆç¬¬3æ¬¡æŒ¥æ‰‹æ˜¯æŽ¥æ”¶æ–¹å‘å‡ºçš„? : æˆ‘çš„ç†è§£æ˜¯ï¼Œç¬¬2æ¬¡æŒ¥æ‰‹æ˜¯ç¡®è®¤æ”¶åˆ°çš„å›žå¤ï¼Œç¬¬ä¸‰æ¬¡æ˜¯æŒ¥æ‰‹æ˜¯ç¡®è®¤æ•°æ®å‘é€å®Œæ¯•ï¼Œå‘Šè¯‰å‘é€æ–¹å¯ä»¥æ–­å¼€äº†,ç„¶è€Œæˆ‘åˆæœ‰äº†ç–‘é—®? ä¸ºä»€ä¹ˆéœ€è¦ç¬¬4æ¬¡æŒ¥æ‰‹? å°æ‰Žå’Œå°ç¾Žé€šä¿¡ https://www.zhihu.com/question/63264012 ç½‘ç»œå±‚é€šè¿‡ISPã€è·¯ç”± æ‰¾åˆ° ,è¿è¡Œåœ¨è·¯ç”±å™¨ä¸Š ripåè®®:ä¸å¤ªç†è§£ ç½‘ç»œé…ç½® ä¸»æœºè®¡ç®—IPADDR : 192.168.139.10 NETMASKå­ç½‘æŽ©ç  : 255.255.255.0 ç½‘ç»œå·: å°±æ˜¯ä¸Šé¢çš„IPADDR ,NETMASKè¿›è¡Œ ä¸Žè¿ç®—, 192.168.139.0,10å°±æ˜¯ç½‘ç»œä¸­çš„ç¬¬10å·ä¸»æœºã€‚ ##è·¯ç”±è¡¨ ç¬¬ä¸€æ¡æ„æ€ æˆ‘è¿™å°è®¡ç®—æœºé€šè¿‡ eth0,ä¸éœ€è¦ä»»ä½•ä¸­é—´çš„ç½‘å…³Geteway,ä¹…å¯ä»¥è®¿é—®è¿™ä¸ªç½‘ç»œ(192.168.150.)ä¸­çš„ä»»ä½•è®¡ç®—æœºï¼Œ æ€Žä¹ˆæ‰¾åˆ°ç›®æ ‡ä¸»æœºé¢è¯•é¢˜:è·¯ç”±å™¨æ˜¯æ€Žä¹ˆæ‰¾ç›®æ ‡æœåŠ¡å™¨ https://www.bilibili.com/video/BV1PU4y1s7Bs?p=18&amp;spm_id_from=pageDriver https://www.bilibili.com/video/BV1PU4y1s7Bs?p=24&amp;spm_id_from=pageDriver www.baidu.comé€šè¿‡ DNSè§£æžå¾—åˆ°ç›®æ ‡ipåœ°å€ 61.135.169.121 61.135.169.121å’Œç¬¬ä¸€æ¡255.255.255.0è¿›è¡Œ æŒ‰ä½ä¸Žè¿ç®—çš„åˆ°çš„61.135.169.0å’Œ192.168.150.0ç»“æžœä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¯¥æ¡ç›®è¢«æ·˜æ±°ã€‚ ç¬¬äºŒæ¡ç›®ä¸ç”¨ç®¡ï¼ˆå¥½åƒè¿™ä¸ªæ¡ç›®æœ‰é—®é¢˜ï¼‰ï¼Œæ¥åˆ°ç¬¬ä¸‰æ¡ï¼ŒæŒ‰ç…§æ­¥éª¤2æŒ‰ä½ä¸Žè¿ç®—ï¼Œå¾—åˆ°ç»“æžœ0.0.0.0ï¼Œå’ŒDestinationç»“æžœä¸€æ ·ã€‚åˆ™æ­¤æ—¶çš„Gatewayèµ·ä½œç”¨ã€‚ æ•°æ®ç»™åˆ°ä¸‹ä¸€è·³ç½‘å…³ï¼Œä¹Ÿå°±æ˜¯192.168.150.2ï¼Œå¦‚æžœèŽ·å¾—çš„ä¸‹ä¸€è·³ç½‘å…³Gatewayæ˜¯ 0.0.0.0çš„è¯ï¼Œé‚£ä¹ˆè¯´æ˜Žåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ç›´æŽ¥å‘æ•°æ®å°±å¥½äº†ï¼Œä¸ç”¨è·³äº†ã€‚ #æ•°æ®é“¾è·¯å±‚ å°è£…æˆå¸§é€æ˜Žä¼ è¾“å·®é”™æ£€æµ‹ARPåè®® ç½‘å¡çš„IP 192.168.150.1 å’ŒatåŽé¢å¯¹åº”çš„ ç½‘å¡macåœ°å€ã€‚ ç½‘å¡pc1åˆ°pc5çš„è¿‡ç¨‹ç½‘ç»œæ•°æ®é‡Œå±‚å­˜æ”¾ç›®æ ‡IPåœ°å€ï¼Œå¤–å±‚æœ‰ä¸‹ä¸€è·³çš„macåœ°å€ã€‚ ä½†æ˜¯macåœ°å€æ˜¯æ€Žä¹ˆæ¥çš„å‘¢? å°±æ˜¯é€šè¿‡ arpåè®®, pc1å‘åˆ°pc2è·¯ç”±å™¨,å¸¦çš„æ•°æ®æ˜¯1ï¼Œmacå…ˆå®šä¹‰æˆFFFFFF pc2æŽ¥å—åˆ°åŽï¼Œå›žä¼ ç»™pc1è‡ªå·±çš„macåœ°å€ï¼ŒæŽ¥ç€ä¸Šé¢çš„ä¼ è¾“å±‚æ­¥éª¤4å°±æœ‰äº†ä¸‹ä¸€è·³çš„macåœ°å€äº†ã€‚ ç‰©ç†å±‚: é“œçº¿ä»‹è´¨ç±» æ•°æ®é“¾è·¯å±‚ ï¼š ç›¸é‚»ä¸¤å°æœºå™¨é—´çš„è¿žæŽ¥ï¼ŒæŠŠæ•°æ®æŠ¥ä»¥å¸§çš„å½¢å¼å‘é€, ä»¥å¤ªç½‘åè®® https://www.bilibili.com/video/BV1pA411M7Ai?p=137&amp;spm_id_from=pageDriver https://www.bilibili.com/video/BV1PU4y1s7Bs?from=search&amp;seid=16016904944562540448 https://www.ruanyifeng.com/blog/2014/02/ssl_tls.html https://hpbn.co/brief-history-of-http/ https://www.w3.org/Protocols/History.html https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Evolution_of_HTTP TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œç¡®ä¿ä¸¤ç«¯æ”¶å‘èƒ½åŠ›çš„æ­£å¸¸ã€‚ Client -&gt; Server : Clientå‘é€Ok Client send Client recieve Server send Server Recieve Client-&gt;Server ok Server -&gt;Client ok Client-&gt;Server ok ok","categories":[{"name":"NETWORK","slug":"NETWORK","permalink":"https://noteforme.github.io/categories/NETWORK/"}],"tags":[],"author":"Jon"},{"title":"Solar System","slug":"solar-system","date":"2024-05-22T13:44:38.000Z","updated":"2024-10-01T14:27:08.955Z","comments":true,"path":"/2024/05/22/solar-system/","link":"","permalink":"https://noteforme.github.io/2024/05/22/solar-system/","excerpt":"","text":"https://www.iau.org/public/themes/pluto/","categories":[],"tags":[{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/tags/LIFE/"}],"author":"Jon"},{"title":"INTERVIEW-ANDROID-BASIC","slug":"interview-android-basic","date":"2024-05-22T06:48:34.000Z","updated":"2024-09-15T10:06:24.109Z","comments":true,"path":"/2024/05/22/interview-android-basic/","link":"","permalink":"https://noteforme.github.io/2024/05/22/interview-android-basic/","excerpt":"","text":"architecturehttps://jonblog.site/2024/05/30/architecture/ AndroidåŸºç¡€çŸ¥è¯†ç‚¹å››å¤§ç»„ä»¶æ˜¯ä»€ä¹ˆActivity ,Service ,BroadCastReceiver,ContentProvider ActivityActivityå„ç§æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸ? å…ˆå¯åŠ¨A å†è·³è½¬B A_onCreate()-&gt; A_onStart()-&gt;A_onResume-&gt; A_onPause()-&gt; B_onCreate() -&gt; B_onStart() -&gt; B_resume -&gt; A_onSaveInstanceState()-&gt;A_onStop() å¼¹å‡ºDialog ä¸è°ƒç”¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸ,æ‰€ä»¥Activityä¸Šæœ‰Dialogçš„æ—¶å€™æŒ‰Homeé”®æ—¶çš„ç”Ÿå‘½å‘¨æœŸ,æœ‰æ²¡æœ‰Dialogéƒ½ä¸€æ ·çš„ã€‚ æ¨ªç«–å±åˆ‡æ¢çš„æ—¶å€™ï¼ŒActivity å„ç§æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸ ActivityçŠ¶æ€ä¿å­˜äºŽæ¢å¤ (ä»€ä¹ˆéƒ½ä¸è®¾ç½®) è®¾ç½®android:screenOrientation=&quot;portrait&quot; ä¸ä¼šæ—‹è½¬ Android 8.0 è®¾ç½®android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot; ä¼šå‘ç”Ÿæ—‹è½¬ï¼Œç”Ÿå‘½å‘¨æœŸä¸å‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯ä¼šè°ƒç”¨ onConfigurationChanged() https://blog.csdn.net/qq_36713816/article/details/80538467 å‰å°åˆ‡æ¢åˆ°åŽå°ï¼Œç„¶åŽå†å›žåˆ°å‰å°ï¼ŒActivityç”Ÿå‘½å‘¨æœŸå›žè°ƒæ–¹æ³•ã€‚ å‰å°åˆ‡æ¢åˆ°åŽå°: A_onCreate()-&gt; A_onStart()-&gt;A_onResume-&gt; A_onPause()-&gt;A_onSaveInstanceState()-&gt; A_onStop() å†å›žåˆ°å‰å°: A_onRestart() -&gt;A_onStart()-&gt; A_onResume() Activityä¹‹é—´çš„é€šä¿¡æ–¹å¼ Intent startActivity()æˆ–startActivityForResult(),é€šè¿‡Intentä¼ é€’ä¿¡æ¯,éœ€è¦æ³¨æ„ï¼ŒIntentå¯¹æºå¸¦ä¿¡æ¯å¤§å°æœ‰é™åˆ¶ã€‚ BroadcastReceiver æ•°æ®å­˜å–ä¼ é€’ï¼ŒsharePreference&#x2F;sql&#x2F;File Application é™æ€å˜é‡ Activityçš„å››ç§å¯åŠ¨æ¨¡å¼å¯¹æ¯” Standard é»˜è®¤å¯åŠ¨æ¨¡å¼ï¼Œæ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„Activity ã€‚ SingleStop å½“å‰Activityå¦‚æžœåœ¨æ ˆé¡¶ï¼Œé‚£ä¹ˆå°±ä¸ä¼šåˆ›å»ºæ–°çš„Activityï¼Œä¼šåŽŸå…ˆè°ƒç”¨Activityçš„onNewIntent() SingleTask å½“å‰ä»»åŠ¡æ ˆå·²ç»æœ‰Activityå®žä¾‹ï¼Œå°±ä¸ä¼šå†åˆ›å»ºäº†ï¼Œä¼šè°ƒç”¨ onNewIntent(). SingleInstance å•ä¸€å®žä¾‹æ¨¡å¼ï¼Œæ•´ä¸ªæ‰‹æœºæ“ä½œç³»ç»Ÿé‡Œé¢åªæœ‰ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚ä¸åŒçš„åº”ç”¨åŽ»æ‰“å¼€è¿™ä¸ªactivity å…±äº«å…¬ç”¨çš„åŒä¸€ä¸ªactivityã€‚ä»–ä¼šè¿è¡Œåœ¨è‡ªå·±å•ç‹¬ï¼Œç‹¬ç«‹çš„ä»»åŠ¡æ ˆé‡Œé¢ï¼Œå¹¶ä¸”ä»»åŠ¡æ ˆé‡Œé¢åªæœ‰ä»–ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚åº”ç”¨åœºæ™¯ï¼šå‘¼å«æ¥ç”µç•Œé¢ã€‚è¿™ç§æ¨¡å¼çš„ä½¿ç”¨æƒ…å†µæ¯”è¾ƒç½•è§ï¼Œåœ¨Launcherä¸­å¯èƒ½ä½¿ç”¨ã€‚æˆ–è€…ä½ ç¡®å®šä½ éœ€è¦ä½¿Activityåªæœ‰ä¸€ä¸ªå®žä¾‹ã€‚ å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š \\1. ä»¥singleInstanceæ¨¡å¼å¯åŠ¨çš„Activityå…·æœ‰å…¨å±€å”¯ä¸€æ€§ï¼Œå³æ•´ä¸ªç³»ç»Ÿä¸­åªä¼šå­˜åœ¨ä¸€ä¸ªè¿™æ ·çš„å®žä¾‹ã€‚ \\2. ä»¥singleInstanceæ¨¡å¼å¯åŠ¨çš„Activityåœ¨æ•´ä¸ªç³»ç»Ÿä¸­æ˜¯å•ä¾‹çš„ï¼Œå¦‚æžœåœ¨å¯åŠ¨è¿™æ ·çš„Activiytæ—¶ï¼Œå·²ç»å­˜åœ¨äº†ä¸€ä¸ªå®žä¾‹ï¼Œé‚£ä¹ˆä¼šæŠŠå®ƒæ‰€åœ¨çš„ä»»åŠ¡è°ƒåº¦åˆ°å‰å°ï¼Œé‡ç”¨è¿™ä¸ªå®žä¾‹ã€‚ \\3. ä»¥singleInstanceæ¨¡å¼å¯åŠ¨çš„Activityå…·æœ‰ç‹¬å æ€§ï¼Œå³å®ƒä¼šç‹¬è‡ªå ç”¨ä¸€ä¸ªä»»åŠ¡ï¼Œè¢«ä»–å¼€å¯çš„ä»»ä½•activityéƒ½ä¼šè¿è¡Œåœ¨å…¶ä»–ä»»åŠ¡ä¸­ã€‚ \\4. è¢«singleInstanceæ¨¡å¼çš„Activityå¼€å¯çš„å…¶ä»–activityï¼Œèƒ½å¤Ÿåœ¨æ–°çš„ä»»åŠ¡ä¸­å¯åŠ¨ï¼Œä½†ä¸ä¸€å®šå¼€å¯æ–°çš„ä»»åŠ¡ï¼Œä¹Ÿå¯èƒ½åœ¨å·²æœ‰çš„ä¸€ä¸ªä»»åŠ¡ä¸­å¼€å¯ã€‚ https://blog.csdn.net/zivensonice/article/details/51569502 https://ayusch.com/android-launch-modes-explained/ https://noteforme.github.io/2021/01/16/Activity/ ä¸ºä»€ä¹ˆ application.startActivity è¦è®¾ç½®NEW_TASK å¦‚æžœActivityæ˜¯ç”±ä¸€ä¸ªå·²ç»å¯åŠ¨çš„Activityå‘èµ·çš„ï¼Œé‚£ä¹ˆæŠŠå®ƒæ”¾åœ¨è¿™ä¸ªå·²ç»å¯åŠ¨çš„ä»»åŠ¡æ ˆæ˜¯åˆç†çš„ï¼ŒApplicationæœ¬æ¥æ²¡æœ‰ä»»åŠ¡æ ˆï¼Œé‚£ä¹ˆå°±æ–°åˆ›å»ºä¸€ä¸ªæ”¾èµ·æ¥. https://www.wanandroid.com/wenda/show/8697 ä»»åŠ¡æ ˆçš„åº•å±‚åŽŸç† Android APKç¼–è¯‘æ‰“åŒ…æµç¨‹ AAPTï¼ˆAndroid Asset Packaging Toolsï¼‰å·¥å…·ä¼šæ‰“åŒ…åº”ç”¨ä¸­çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚AndroidManifest.xmlã€layoutå¸ƒå±€ä¸­çš„xmlç­‰ï¼Œå¹¶å°†xmlæ–‡ä»¶ç¼–è¯‘æˆäºŒè¿›åˆ¶å½¢å¼ï¼Œå½“ç„¶assetsæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ä¸ä¼šè¢«ç¼–è¯‘ï¼Œå›¾ç‰‡ä»¥åŠrawæ–‡ä»¶å¤¹ä¸­çš„èµ„æºä¹Ÿä¼šä¿æŒåŽŸæœ‰çš„å½¢æ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯rawæ–‡ä»¶å¤¹ä¸­çš„èµ„æºä¹Ÿä¼šç”Ÿæˆèµ„æºIDã€‚AAPTç¼–è¯‘å®ŒæˆåŽä¼šç”ŸæˆR.javaæ–‡ä»¶ã€‚ AIDLå·¥ä¼šå°†æ‰€æœ‰çš„aidlæŽ¥å£è½¬æ¢ä¸ºjavaæŽ¥å£ã€‚ æ‰€æœ‰çš„Javaæºä»£ç ã€Ræ–‡ä»¶ã€æŽ¥å£éƒ½ä¼šç¼–è¯‘å™¨ç¼–è¯‘æˆ.classæ–‡ä»¶ã€‚ Dexå·¥å…·ä¼šå°†ä¸Šè¿°äº§ç”Ÿçš„.classæ–‡ä»¶ä»¥åŠç¬¬ä¸‰æ–¹åº“å’Œå…¶ä»–classæ–‡ä»¶è½¬åŒ–ä¸ºdexï¼ˆDalvikè™šæ‹Ÿæœºå¯æ‰§è¡Œæ–‡ä»¶ï¼‰æ–‡ä»¶ï¼Œdexæ–‡ä»¶æœ€ç»ˆä¼šè¢«æ‰“åŒ…è¿›APKæ–‡ä»¶ã€‚ apkbuilderä¼šæŠŠç¼–è¯‘åŽçš„èµ„æºå’Œå…¶ä»–èµ„æºæ–‡ä»¶åŒdexæ–‡ä»¶ä¸€èµ·æ‰“å…¥APKä¸­ã€‚ ç”ŸæˆAPKæ–‡ä»¶ä¹‹åŽï¼Œï¼Œéœ€è¦å¯¹å…¶ç­¾åæ‰èƒ½å®‰è£…åˆ°è®¾å¤‡ä¸Šï¼Œå¹³æ—¶æµ‹è¯•éƒ½ä¼šä½¿ç”¨debug keystoreï¼Œå½“å‘å¸ƒåº”ç”¨æ—¶å¿…é¡»ä½¿ç”¨releaseç‰ˆçš„keystoreå¯¹åº”ç”¨è¿›è¡Œç­¾åã€‚ å¦‚æžœå¯¹APKæ­£å¼ç­¾åï¼Œè¿˜éœ€è¦ä½¿ç”¨zipalignå·¥å…·å¯¹APKè¿›è¡Œå¯¹é½æ“ä½œï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å½“åº”ç”¨è¿è¡Œæ—¶èƒ½æé«˜é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šç›¸åº”çš„å¢žåŠ å†…å­˜å¼€é”€ã€‚ æ€»ç»“ï¼šç¼–è¯‘ â€“&gt; DEX â€“&gt; æ‰“åŒ… â€“&gt; ç­¾åå’Œå¯¹é½ ARTè™šæ‹Ÿæœºä¸ŽDalvikè™šæ‹Ÿæœºçš„åŒºåˆ« ä»€ä¹ˆæ˜¯ARTï¼Ÿ ARTä»£è¡¨Android Runtimeï¼Œå…¶å¤„ç†åº”ç”¨ç¨‹åºæ‰§è¡Œçš„æ–¹å¼å®Œå…¨ä¸åŒäºŽDalvikï¼ŒDalvikæ˜¯ä¾é ä¸€ä¸ªJust-In-Timeï¼ˆJITï¼‰ç¼–è¯‘å™¨åŽ»è§£é‡Šå­—èŠ‚ç ã€‚å¼€å‘è€…ç¼–è¯‘åŽçš„åº”ç”¨ä»£ç éœ€è¦é€šè¿‡ä¸€ä¸ªè§£é‡Šå™¨åœ¨ç”¨æˆ·çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œè¿™ä¸€æœºåˆ¶å¹¶ä¸é«˜æ•ˆï¼Œä½†è®©åº”ç”¨èƒ½æ›´å®¹æ˜“åœ¨ä¸åŒç¡¬ä»¶å’Œæž¶æž„ä¸Šè¿è¡Œã€‚ARTåˆ™å®Œå…¨æ”¹å˜äº†è¿™å¥—åšæ³•ï¼Œåœ¨åº”ç”¨å®‰è£…æ—¶å°±é¢„ç¼–è¯‘å­—èŠ‚ç åˆ°æœºå™¨è¯­è¨€ï¼Œè¿™ä¸€æœºåˆ¶å«Ahead-Of-Timeï¼ˆAOTï¼‰ç¼–è¯‘ã€‚åœ¨ç§»é™¤è§£é‡Šä»£ç è¿™ä¸€è¿‡ç¨‹åŽï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œå°†æ›´åŠ æ•ˆçŽ‡ã€‚å¯åŠ¨æ›´å¿«ã€‚ ARTä¼˜ç‚¹ï¼š ç³»ç»Ÿæ€§èƒ½çš„æ˜¾è‘—æå‡ã€‚ åº”ç”¨å¯åŠ¨æ›´å¿«ã€è¿è¡Œæ›´å¿«ã€ä½“éªŒæ›´æµç•…ã€è§¦æ‘¸åé¦ˆæ›´åŠæ—¶ã€‚ æ›´é•¿çš„ç”µæ± ç»­èˆªèƒ½åŠ› æ”¯æŒæ›´ä½Žçš„ç¡¬ä»¶ã€‚ ARTç¼ºç‚¹ æ›´å¤§çš„å­˜å‚¨ç©ºé—´å ç”¨ï¼Œå¯èƒ½ä¼šå¢žåŠ 10%-20% æ›´é•¿çš„åº”ç”¨å®‰è£…æ—¶é—´ LaunchModeåº”ç”¨åœºæ™¯FragmmentFragmentç”Ÿå‘½å‘¨æœŸç®¡ç†è¿‡ç¨‹é‡åˆ°çš„å‘å’Œè§£å†³åŠžæ³•fragmentå„ç§æƒ…å†µä¸‹çš„ç”Ÿå‘½å‘¨æœŸ Activityä¸ŽFragmentä¹‹é—´ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒâ€‹ onAttach() -&gt; onCreate() -&gt; onCreateView() -&gt; onActivityCreate() -&gt; onStart() -&gt; onResume() -&gt; onPause() -&gt; onStop() -&gt; â€‹ onDestroyView() -&gt; onDestroy() -&gt; onDetach() FragmentçŠ¶æ€ä¿å­˜startActivityForResultæ˜¯å“ªä¸ªç±»çš„æ–¹æ³•ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ï¼Ÿ Fragmentå‘èµ· Fragment onActivityResultèƒ½æŽ¥æ”¶ã€‚Activity onActivityResultèƒ½æŽ¥æ”¶,ä½†æ˜¯requestCodeä¸æ­£ç¡®ã€‚ Activityå‘èµ· Fragmentä¸èƒ½æŽ¥æ”¶ã€‚ Activity onActivityResultèƒ½æŽ¥æ”¶ã€‚ fragmentä¹‹é—´ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Ÿ Fragment.setArguments()æ–¹æ³•ä¼ é€’bundle findFragmentById()æ‰¾åˆ°tag,ç„¶åŽç›´æŽ¥æ“ä½œFramgent 123456789101112131415161718public void onArticleSelected(int position) &#123; ArticleFragment articleFrag = (ArticleFragment) getSupportFragmentManager().findFragmentById(R.id.article_fragment); if (articleFrag != null) &#123; articleFrag.updateArticleView(position); &#125; else &#123; ArticleFragment newFragment = new ArticleFragment(); Bundle args = new Bundle(); args.putInt(ArticleFragment.ARG_POSITION, position); newFragment.setArguments(args); FragmentTransaction transaction = getSupportFragmentManager().beginTransaction(); transaction.replace(R.id.fragment_container, newFragment); transaction.addToBackStack(null); transaction.commit(); &#125; &#125; æŽ¥å£å›žè°ƒ Serviceè¯·æè¿°ä¸€ä¸‹Service çš„ç”Ÿå‘½å‘¨æœŸ startService() â€‹ å¯åŠ¨: onCreate() - onCommandStart() - onDestory() â€‹ ç»§ç»­startService : åªä¼šæ‰§è¡Œ onCommandStart() bindService() â€‹ onCreate() - onBind() - onUnbind()-onDestory() serviceå’Œactivityæ€Žä¹ˆè¿›è¡Œæ•°æ®äº¤äº’ï¼Ÿ bindService() Serviceä¸­å®šä¹‰æŽ¥å£ï¼ŒServiceConnectionä¸­èŽ·å–Serviceå®žä¾‹ï¼Œè°ƒç”¨å“åº”æŽ¥å£ æ³¨å†Œå¹¿æ’­ä¼ é€’æ•°æ®è¯´è¯´ContentProviderã€ContentResolverã€ContentObserver ä¹‹é—´çš„å…³ç³» æŠŠè‡ªå·±çš„ç¨‹åºæ•°æ®æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºè°ƒç”¨ï¼Œæä¾›ç›¸å…³çš„uriæŽ¥å£,æ²¡ç”¨è¿‡ntentObserver ä¹‹é—´çš„å…³ç³» æŠŠè‡ªå·±çš„ç¨‹åºæ•°æ®æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºè°ƒç”¨ï¼Œæä¾›é¦™æ¸¯çš„uriæŽ¥å£,æ²¡ç”¨è¿‡ http://wangbufan.cn/2019/09/17/Service%E5%8F%8AService%E4%B8%8EActivity%E9%80%9A%E4%BF%A1/ è¯·æè¿°ä¸€ä¸‹å¹¿æ’­BroadcastReceiverçš„ç†è§£ å¹¿æ’­æ˜¯å¯ä»¥ä½œä¸ºåº”ç”¨å…¨å±€ç›‘å¬å™¨ï¼Œå¯ä»¥å®žçŽ°åº”ç”¨ä¸­ä¸åŒç»„ä»¶å°‘é‡æ•°æ®çš„é€šä¿¡ï¼ï¼ï¼ï¼Œæ›´æ·±ç ”ç©¶åŽå¯ä»¥å¤šè¯´ç‚¹. åŸºäºŽæ¶ˆæ¯çš„å‘å¸ƒ&#x2F;è®¢é˜…äº‹ä»¶æ¨¡åž‹. å¹¿æ’­çš„åˆ†ç±» æ— åºå¹¿æ’­ æœ‰åºå¹¿æ’­ æŽ¥æ”¶è€…æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºæŽ¥æ”¶,æ¯ä¸ªæŽ¥æ”¶è€…éƒ½æœ‰æƒç»ˆæ­¢å¹¿æ’­,ä¸‹ä¸€ä¸ªå°±å¾—ä¸åˆ°. å¹¿æ’­ä½¿ç”¨çš„æ–¹å¼å’Œåœºæ™¯ appå…¨å±€ç›‘å¬ binderæœºåˆ¶ https://www.jianshu.com/p/5a983578418e BroadcastReceiverï¼ŒLocalBroadcastReceiver(æœ¬åœ°å¹¿æ’­) åŒºåˆ«BroadcastReceiverï¼šé’ˆå¯¹åº”ç”¨é—´ï¼Œç³»ç»Ÿå’Œåº”ç”¨é—´é€šä¿¡ã€‚ LocalBroadcastReceiverï¼š åªæœ‰è‡ªå·±åº”ç”¨å†…éƒ¨æ‰èƒ½æ”¶åˆ°,æ•ˆçŽ‡æ›´é«˜. DialogAlertDialog,popupWindow,ToaståŒºåˆ« ï¼ŸAndroidæ˜¯ä¸å…è®¸Activityæˆ–Dialogå‡­ç©ºå‡ºçŽ°çš„,è€ŒDialogåˆ™å¿…é¡»åœ¨ä¸€ä¸ªActivityä¸Šé¢å¼¹å‡º AlertDialog æ‹¦æˆªäº†å±å¹•ä¸Šæ‰€æœ‰çš„TouchK&#x2F;key PopupWindow ä»…ä»…æ‹¦æˆªè‡ªèº«åŒºåŸŸtouch&#x2F;key éœ€è¦Activityç±»åž‹çš„Contextå¯åŠ¨ Toast å¯ä»¥ç ”ç©¶ä¸‹ ä¸¤è€…æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºŽæœ‰æ²¡æœ‰æ–°å»ºä¸€ä¸ª windowï¼ŒPopupWindow æ²¡æœ‰æ–°å»ºï¼Œè€Œæ˜¯é€šè¿‡ WMS å°† View åŠ åˆ° DecorViewï¼›Dialog æ˜¯æ–°å»ºäº†ä¸€ä¸ª window (PhoneWindow)ï¼Œç›¸å½“äºŽèµ°äº†ä¸€é Activity ä¸­åˆ›å»º window çš„æµç¨‹ https://www.jianshu.com/p/aed496937bd2 Application å’Œ Activity çš„ Context å¯¹è±¡çš„åŒºåˆ«ApplicatioContext ï¼š â€‹ åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸€æ ·é•¿,é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡å°±ç”¨ApplicationContext Activityçš„Contextï¼š â€‹ å½“å‰Activityçš„ç”Ÿå‘½å‘¨æœŸ,å’ŒUIç›¸å…³çš„éƒ½ç”¨Activityä¸ºContextæ¥å¤„ç† https://www.jianshu.com/p/e215c90a460e Contextçš„ç†è§£ï¼Ÿâ€‹ Contextæ˜¯ç»´æŒAndroidç¨‹åºä¸­å„ç»„ä»¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ç±» AnimAndroidå±žæ€§åŠ¨ç”»ç‰¹æ€§AndroidåŠ¨ç”»æ¡†æž¶å®žçŽ°åŽŸç† å¯ä»¥æ”¹å˜å¯¹è±¡çš„å±žæ€§ã€‚è¿˜éœ€è¦è¯´è¯´ä»€ä¹ˆå—? å¦‚ä½•å¯¼å…¥å¤–éƒ¨æ•°æ®åº“?æŠŠæ•°æ®åº“æ–‡ä»¶é˜²ç›—assertsç›®å½•ä¸‹ï¼Œç„¶åŽå†™å…¥databasesç›®å½•ä¸‹é¢, ç„¶åŽé€šè¿‡æ•°æ®åº“å®¹å™¨è£…è½½é‡Œé¢æ•°æ®åº“é‡Œé¢çš„æ•°æ®ã€‚ https://blog.csdn.net/chaoyu168/article/details/50467913 æ’å€¼å™¨ ä¼°å€¼å™¨åŒºåˆ«â€‹ æ’å€¼å™¨: ï¼ˆInterpolatorï¼‰å†³å®š å€¼ çš„å˜åŒ–æ¨¡å¼ï¼ˆåŒ€é€Ÿã€åŠ é€Ÿï¼‰ â€‹ ä¼°å€¼å™¨ : (TypeEvaluator)å†³å®š å€¼ çš„å…·ä½“å˜åŒ–æ•°å€¼ è°ˆè°ˆå¯¹æŽ¥å£ä¸Žå›žè°ƒçš„ç†è§£ ç†è§£: Aå‘é€æ¶ˆæ¯ç»™B,Bå¤„ç†å®ŒåŽé«˜é€ŸAå¤„ç†ç»“æžœ. å®žçŽ°: ä¸€èˆ¬è€Œè¨€ï¼Œå¤„ç†æ¶ˆæ¯çš„ç±»æ˜¯å”¯ä¸€çš„ï¼Œå‘é€æ¶ˆæ¯çš„ç±»å´æ˜¯å„ç§å„æ ·çš„ï¼Œå°†å›žè°ƒæ–¹æ³•åšæˆä¸€ä¸ªæŽ¥å£ï¼Œä¸åŒçš„å‘é€è€…å®žçŽ°è¯¥æŽ¥å£ï¼Œå¹¶ä¸”æŠŠè‡ªå·±çš„æŽ¥å£å®žçŽ°ç±»çš„å¯¹è±¡åœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œä¼ é€’ç»™æ¶ˆæ¯å¤„ç†è€…ã€‚ æ³¨å†Œä¹‹åŽä¸é©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯æŸä¸ªæ—¶æœºå†è§¦å‘æ‰§è¡Œã€‚ å›žè°ƒçš„åŽŸç† å†™ä¸€ä¸ªå›žè°ƒdemo12345678910111213141516171819202122232425262728public class MyTest &#123; public static void main(String[] args) &#123; ProcessClick process = new ProcessClick(new OnClickListener() &#123; @Override public void onClick() &#123; System.out.println(&quot;å·²ç»ç‚¹å‡»&quot;); &#125; &#125;); process.click(); &#125;&#125;interface OnClickListener&#123; void onClick();&#125;class ProcessClick &#123; OnClickListener listener; public ProcessClick(OnClickListener listener) &#123; this.listener = listener; &#125; void click()&#123; listener.onClick(); &#125;&#125; https://developer.aliyun.com/article/614769 VIEWç›¸å…³å¦‚ä½•ä¼˜åŒ–è‡ªå®šä¹‰Viewandroid viewç»˜åˆ¶æœºåˆ¶å’ŒåŠ è½½è¿‡ç¨‹ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹æ¯ä¸ªActivityåŒ…å«ä¸€ä¸ªWindowå¯¹è±¡ï¼ŒAndroidä¸­windowå¯¹è±¡ç”±PhoneWindowå®žçŽ°ï¼ŒPhoneWindowå°†ä¸€ä¸ªDecorViewè®¾ç½®ä¸ºæ•´ä¸ªåº”ç”¨çª—å£çš„æ ¹View,DecorViewä½œä¸ºçª—å£ç•Œé¢çš„é¡¶å±‚è§†å›¾ï¼Œå°è£…äº†çª—å£æ“ä½œçš„é€šç”¨æ–¹æ³•ï¼ŒDecorViewå°†è¦æ˜¾ç¤ºçš„å…·ä½“å†…å®¹æ˜¾ç¤ºåœ¨PhoneWindowä¸Šï¼Œè¿™é‡Œæ‰€æœ‰çš„Viewç›‘å¬äº‹ä»¶é€šè¿‡WindowMangerServiceæ¥æŽ¥æ”¶,é€šè¿‡Activityå¯¹è±¡æ¥å›žè°ƒç›¸åº”çš„onCLicklistener.æ˜¾ç¤ºæ˜¯å°†å±å¹•åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªTitleViewï¼Œå¦ä¸€ä¸ªæ˜¯ContentView. Measure å¦‚æžœæ˜¯åŽŸå§‹çš„ View,é€šè¿‡measureæ–¹æ³•å°±å®Œæˆäº†æµ‹é‡è¿‡ç¨‹,å¦‚æžœæ˜¯ViewGroup,é™¤äº†å®Œæˆè‡ªå·±çš„æµ‹é‡å¤–ï¼Œè¿˜éœ€è¦éåŽ†æ‰€æœ‰çš„å­View,å„ä¸ªå­å…ƒç´ å†åŽ»é€’å½’æ‰§è¡Œè¿™ä¸ªæµç¨‹. Layout Draw MeasureSpeckçš„æ„ä¹‰ï¼Œæ€Žä¹ˆè®¡ç®—MeasureSpecwrap content å’ŒMATCH_PARENTçš„æµ‹é‡æ–¹å¼WRAP_CONTENT : æœ€å¤§æ¨¡å¼ï¼Œå¤§å°ä¸å®šï¼Œä½†æ˜¯ä¸èƒ½è¶…è¿‡çª—å£çš„å¤§å°. specModeæ˜¯AT_MOSTæ¨¡å¼,è¿™ç§æ¨¡å¼ä¸‹ï¼Œå®ƒçš„å®½ï¼Œé«˜ç­‰äºŽspecSize, è¿™ç§æƒ…å†µä¸‹specSizeæ˜¯parentSize,è€ŒparentSizeæ˜¯çˆ¶å®¹å™¨ç›®å‰å¯ä»¥ä½¿ç”¨çš„å¤§å°,ä¹Ÿå°±æ˜¯çˆ¶å®¹å™¨å‰©ä½™çš„ç©ºé—´å¤§å°. MATCH_PARENT: ç²¾ç¡®æ¨¡å¼ï¼Œå¤§å°å°±æ˜¯çª—å£å¤§å°. https://noteforme.github.io/2017/11/12/View_OVER/ LayoutParamsæ˜¯æ˜¯ä»€ä¹ˆä»‹ç»ä¸‹SurfaceView SurfaceViewä½¿ç”¨åŒç¼“å†²æŠ€æœ¯ç¼“è§£ï¼Œé¡µé¢ç»˜åˆ¶é¢‘ç¹å¼•èµ·çš„å¡é¡¿ã€‚ SurfaceViewå¯ä»¥åœ¨å­çº¿ç¨‹æ›´æ–° UI,ä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚ https://noteforme.github.io/2019/11/05/SurfaceView/ SurfaceViewåœ¨æ›´æ–°è§†å›¾æ—¶ç”¨åˆ°äº†ä¸¤å¼  Canvasï¼Œå¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„Canvaså¯¹è±¡ï¼Œå°†å›¾åƒéƒ½ç»˜åˆ¶åˆ°è¿™ä¸ªä¸´æ—¶çš„Canvaså¯¹è±¡ä¸­ï¼Œç»˜åˆ¶å®Œæˆä¹‹åŽå†å°†è¿™ä¸ªä¸´æ—¶Canvaså¯¹è±¡ä¸­çš„å†…å®¹(ä¹Ÿå°±æ˜¯ä¸€ä¸ªBitmap)ï¼Œé€šè¿‡drawBitmap()æ–¹æ³•ç»˜åˆ¶åˆ°onDraw()æ–¹æ³•ä¸­çš„canvaså¯¹è±¡ä¸­ã€‚ RecycleViewçš„ä½¿ç”¨â€‹ https://noteforme.github.io/2017/07/17/RecyclerView/ webviewå®‰å…¨é—®é¢˜WebViewæ¼æ´žçš„æ ¹æºåœ¨äºŽå¼ºåˆ¶å…¶è®¿é—®æ”»å‡»è€…æŽ§åˆ¶çš„ç½‘é¡µã€‚ç½‘é¡µä¸­å«æœ‰æ”»å‡»è€…å¯ä»¥æŽ§åˆ¶çš„JS,å› æ­¤å¯èƒ½é’“é±¼ï¼Œçªƒå–ç§æœ‰æ–‡ä»¶ï¼Œç”šè‡³æ˜¯ RCE,å¸¦æ¥æ¯”è¾ƒå¤§çš„å±å®³ã€‚ ä¸‹é¢ä¸»è¦æ˜¯4.4ç³»ç»Ÿä»¥ä¸Šçš„æœºåž‹ Webviewå¯†ç æ˜Žæ–‡å­˜å‚¨æ¼æ´žWebViewé»˜è®¤å¼€å¯å¯†ç ä¿å­˜åŠŸèƒ½mWebView.setSavePassword(true),å¦‚æžœæœªå…³é—­ï¼Œç”¨æˆ·è¾“å…¥å¯†ç æ—¶ï¼Œä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦ä¿å­˜å¯†ç ï¼Œå¦‚æžœé€‰æ˜¯ï¼Œå¯†ç ä¼šæ˜Žæ–‡ä¿å­˜åˆ° &#x2F;data&#x2F;data&#x2F;com.package.name&#x2F;databases&#x2F;webview.db WebViewåŸŸæŽ§åˆ¶ä¸ä¸¥æ ¼æ¼æ´žsetAllowFileAccess(true) : çªƒå–APPä»»æ„ç›®å½•ä¸‹çš„ç§æœ‰æ–‡ä»¶ â€‹ setAllowUniversalAccessFromFileURLs : å…è®¸é€šè¿‡fileåŸŸurlä¸­çš„ javascriptè®¿é—®å…¶ä»–çš„æºã€‚ https://noteforme.github.io/2017/09/01/WebView/ webviewå†…å­˜æ³„æ¼ Leakcanary éªŒè¯?â€‹ android 5.0ä»¥ä¸‹æœ‰å†…å­˜æ³„æ¼é—®é¢˜ https://juejin.cn/post/6901487965562732551 viewstubå»¶è¿ŸåŠ è½½åŽŸç† 123456789101112131415161718 // è®¾ç½® ViewStub ä¸è¿›è¡Œç»˜åˆ¶ setWillNotDraw(true);private void replaceSelfWithView(View view, ViewGroup parent) &#123; final int index = parent.indexOfChild(this); // æŠŠ ViewStub ä»ŽæŽ§ä»¶å±‚çº§ä¸­ç§»é™¤ã€‚ parent.removeViewInLayout(this); // æŠŠæ–°åˆ›å»ºçš„ View å¯¹è±¡åŠ å…¥æŽ§ä»¶å±‚çº§ç»“æž„ä¸­ï¼Œå¹¶ä¸”ä½äºŽ ViewStub çš„ä½ç½®ï¼Œ // å¹¶ä¸”åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨ ViewStub çš„å¸ƒå±€å‚æ•°ï¼Œä¾‹å¦‚å®½é«˜ç­‰ã€‚ final ViewGroup.LayoutParams layoutParams = getLayoutParams(); if (layoutParams != null) &#123; parent.addView(view, index, layoutParams); &#125; else &#123; parent.addView(view, index); &#125;&#125; â€‹ https://juejin.cn/post/6844903799337779214 overdrawè¿‡åº¦ç»˜åˆ¶ä¼˜åŒ–æ–¹æ³•â€‹ ç§»é™¤é»˜è®¤å’Œä¸å¿…è¦èƒŒæ™¯ â€‹ https://jaeger.itscoder.com/android/2016/09/29/android-performance-overdraw.html â€‹ https://www.jianshu.com/p/9e095bacf44a Viewåˆ·æ–°æœºåˆ¶ Viewç»˜åˆ¶æµç¨‹ è‡ªå®šä¹‰æŽ§ä»¶åŽŸç† å¦‚ä½•å–æ¶ˆAsyncTaskï¼Ÿ ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å­çº¿ç¨‹æ›´æ–°UIï¼Ÿ Requestlayoutï¼Œonlayoutï¼ŒonDrawï¼ŒDrawChildåŒºåˆ«ä¸Žè”ç³» invalidateå’ŒpostInvalidateçš„åŒºåˆ«åŠä½¿ç”¨ Activity-Window-Viewä¸‰è€…çš„å·®åˆ« è‡ªå®šä¹‰Viewå¦‚ä½•è€ƒè™‘æœºåž‹é€‚é… è‡ªå®šä¹‰Viewçš„äº‹ä»¶ å°è£…Viewçš„æ—¶å€™æ€Žä¹ˆçŸ¥é“viewçš„å¤§å° äº‹ä»¶åˆ†å‘æœºåˆ¶æ˜¯å¦è§£å†³è¿‡äº‹ä»¶å†²çªé—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³çš„ã€‚ é—®é¢˜: https://juejin.cn/post/6922300686638153736 https://noteforme.github.io/categories/VIEW/ https://www.bilibili.com/video/BV1754y1H7jT è¯·æè¿°ä¸€ä¸‹Viewäº‹ä»¶ä¼ é€’åˆ†å‘æœºåˆ¶ Touchäº‹ä»¶ä¼ é€’æµç¨‹ äº‹ä»¶åˆ†å‘ä¸­çš„onTouch å’ŒonTouchEvent æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆè¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿ Viewå’ŒViewGroupåˆ†åˆ«æœ‰å“ªäº›äº‹ä»¶åˆ†å‘ç›¸å…³çš„å›žè°ƒæ–¹æ³• æˆ‘çš„é¢è¯•é—®é¢˜activityè¢«é”€æ¯åŽé‡å»ºï¼Œæ€Žä¹ˆèŽ·å–fragmentâ€‹ findFragmentByTag â€‹ https://www.wanandroid.com/wenda/show/11077 activityå’Œserviceé€šä¿¡ é€šè¿‡bindService é€šè¿‡å¹¿æ’­ https://www.jianshu.com/p/6040dfa83594 activityé”€æ¯çº¿ç¨‹ä¼šä¸ä¼šæ¶ˆå¤±ä¸ä¼š, å¯ä»¥è¿™æ ·å¤„ç† 12345678910111213141516171819/** * é™æ€å†…éƒ¨ç±»å°†ä¸ä¼šå†éšå¼çš„æŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œæ‰€ä»¥åœ¨é…ç½®æ”¹å˜æ—¶ï¼Œä½ çš„Activityçš„å®žä¾‹åœ¨ä¹Ÿä¸ä¼š * å‡ºçŽ°å†…å­˜æ³„éœ² */ private static class MyThread extends Thread &#123; private boolean mRunning = false; @Override public void run() &#123; mRunning = true; while (mRunning) &#123; SystemClock.sleep(1000); &#125; &#125; public void close() &#123; mRunning = false; &#125; &#125; activityæ¯ä¸ªæ–¹æ³•å¤„ç†çš„åŒºåˆ« onCreate(): Activityåˆ›å»ºçš„æ—¶å€™è°ƒç”¨ï¼Œç»‘å®šæ•°æ®ã€‚ onStart() : å½“Activityå¯¹ç”¨æˆ·å˜å¾—å¯è§çš„æ—¶å€™è°ƒç”¨. onResume() : activityå¼€å§‹å’Œç”¨æˆ·äº¤äº’çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™æ—¶å€™activityå¤„äºŽæ ˆé¡¶ï¼Œä¼´éšç€ç”¨æˆ·çš„è¾“å…¥. onPause() : å½“activityå¤±åŽ»å‰å°çŠ¶æ€ï¼Œå¼€å§‹è¿›å…¥stopped&#x2F;hidden or destroyedçŠ¶æ€ï¼Œä¸èƒ½å†èŽ·å–ç„¦ç‚¹ï¼Œæ­¤æ—¶activityå¯¹ç”¨æˆ·å¯è§ï¼Œä½†æ˜¯æ›´æ–°çš„UIçš„æ“ä½œè¦å¿«ã€‚ onStop() : å½“activityä¸å†å¯è§ï¼Œå¯èƒ½æ˜¯æ–°çš„activityæ¥åˆ°æ ˆé¡¶ï¼Œæˆ–è€…å½“å‰activityæ­£åœ¨è¢«destroy. onDestory(): å½“å‰activityæ­£åœ¨ç¦»å¼€ã€‚ activity fragmentä¼ é€’æ•°æ®æ–¹å¼ ViewModel onTach() å›žè°ƒ å•ä¾‹æ¨¡å¼æ€Žä¹ˆç†è§£çš„ åˆ›å»ºå”¯ä¸€çš„å¯¹è±¡ res&#x2F;rawå’Œassets ä¸‰è€…ç›®å½•ä¸‹çš„æ–‡ä»¶åœ¨æ‰“åŒ…åŽåŽŸå°ä¸åŠ¨çš„ä¿å­˜åœ¨apkåŒ…ä¸­ï¼Œä¸ä¼šè¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶ã€‚ Res&#x2F;rawæ–‡ä»¶ä¼šè¢«æ˜ å°„åˆ°R.javaæ–‡ä»¶ä¸­ï¼Œè®¿é—®çš„æ—¶å€™ç›´æŽ¥ä½¿ç”¨èµ„æº R.id.filename; res&#x2F;rawä¸å¯ä»¥æœ‰ç›®å½•ç»“æž„ï¼Œè€Œassertsåˆ™å¯ä»¥æœ‰ç›®å½•ç»“æž„ï¼Œä¹Ÿå°±æ˜¯assertsç›®å½•ä¸‹å¯ä»¥å»ºç«‹æ–‡ä»¶å¤¹. https://www.jianshu.com/p/4c8bcb8c3717 æˆªèŽ·é€šçŸ¥æ–°å»ºä¸€ä¸ªæœåŠ¡MessageNotificationServiceå®žçŽ° NotificationListenerService finalç‰¹æ€§ finalç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œæ²¡æœ‰å­ç±» æ–¹æ³•ä¸èƒ½è¢«å­ç±»çš„æ–¹æ³•é‡å†™ï¼Œä½†å¯ä»¥è¢«ç»§æ‰¿ è¡¨ç¤ºå¸¸é‡ï¼Œåªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œèµ‹å€¼åŽä¸å†æ”¹å˜ã€‚ androidå¤šçº¿ç¨‹æ€Žä¹ˆå¤„ç†çš„ ï¼Œä¸¤ä¸ªå­çº¿ç¨‹é—´æ€Žä¹ˆé€šè®¯â€‹ Androidä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡æ¶ˆæ¯å¾ªçŽ¯æœºåˆ¶ï¼Œä¸»çº¿ç¨‹ä¸­çš„handleræŠŠå­çº¿ç¨‹çš„ messageå‘é€ç»™ä¸»çº¿ç¨‹çš„Looperï¼Œé‚£ä¹ˆå­çº¿ç¨‹æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Œ å¯ä»¥æŠŠlooperç»‘å®šåˆ°å­çº¿ç¨‹ä¸­ï¼Œè°ƒç”¨Looper.prepare()ä¸ºæ”¹å­çº¿ç¨‹ç”ŸæˆLooper,ç„¶åŽè°ƒç”¨Looper.loop()å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶ä¸”åœ¨è¯¥å­çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªHandler,åœ¨å¦ä¸€ä¸ªå­çº¿ç¨‹è°ƒç”¨handlerå‘é€æ¶ˆæ¯ã€‚è¿™æ ·å®žçŽ°é€šä¿¡. 1234567891011121314151617181920212223242526272829303132333435363738val threadA = ThreadA()val threadB = ThreadB()Thread(threadA).start()if (threadA.getHandler() == null) &#123; Thread.sleep(1000) handler = threadA.getHandler()&#125;Thread(threadB).start()class ThreadA : Runnable &#123; var mHandler: Handler? = null fun getHandler(): Handler? &#123; return mHandler &#125; override fun run() &#123; Looper.prepare() mHandler = object : Handler(Looper.myLooper()!!) &#123; override fun handleMessage(msg: Message) &#123; super.handleMessage(msg) Timber.d(&quot;çº¿ç¨‹A: çº¿ç¨‹Bå‘è¿‡æ¥æ¶ˆæ¯äº†-- $&#123;msg.obj&#125; &quot;) &#125; &#125; Looper.loop() &#125; &#125; inner class ThreadB : Runnable &#123; override fun run() &#123; val message = Message.obtain() message.what = 1 message.obj = &quot;çº¿ç¨‹B å‘é€æ¶ˆæ¯&quot; + System.currentTimeMillis() handler?.sendMessage(message) &#125; &#125; https://blog.csdn.net/pbm863521/article/details/103493708 é˜²æ­¢åº”ç”¨è¢«è¢«æ€æ­»,æ€Žä¹ˆä¿è¯serviceä¸è¢«æ€æ­»http://www.52im.net/thread-2881-1-1.html http://www.52im.net/thread-2893-1-1.html æ€Žä¹ˆè®©çº¿ç¨‹æœ‰åºä¸¤ä¸ªçº¿ç¨‹ï¼Œæƒ³è®©æ¥çš„ä¸€ä¸ªæ’é˜Ÿæ€Žä¹ˆå¼„â€‹ Join æ‰¹é‡ç½‘ç»œè¯·æ±‚ å­çº¿ç¨‹åˆ›å»ºHandler contextå¯¹è±¡äº’ç›¸å¼•ç”¨ï¼Œå¯¹è±¡å›žæ”¶ Androidç•Œé¢æ€Žä¹ˆå›žæ”¶çš„ ç”Ÿå‘½å‘¨æœŸ å†…å­˜æº¢å‡ºå’Œå†…å­˜æ³„éœ²çš„åŒºåˆ«ï¼Œoomæ˜¯æ€Žä¹ˆå¤„ç†çš„ ï¼Œ ANRæ€Žä¹ˆé¿å… javaå†…å­˜å›žæ”¶æœºåˆ¶ androidç®¡ç†æœºåˆ¶ æ€Žä¹ˆå¤„ç†å†…å­˜æ³„éœ² æ€Žä¹ˆåšæ€§èƒ½ä¼˜åŒ– åå°„æœºåˆ¶ broadcastRecieverå’Œ handleråŒºåˆ« åŽå°å›¾ç‰‡æ›´æ”¹ï¼Œå‰å°æ€Žä¹ˆå¤„ç† å›¾ç‰‡åŠ è½½åº“,å›¾ç‰‡åŠ è½½æ–¹æ³• å›¾ç‰‡åŠ è½½æ¡†æž¶æ€Žä¹ˆå¤„ç†oomé—®é¢˜ java AndroidåŠ è½½æœºåˆ¶ AndroidåŠ è½½åŠ¨æ€åº“ AndroidManifestæƒé™æ˜¯æ€Žä¹ˆèŽ·å–çš„ï¼Œå°è£…æƒé™ç®¡ç†ï¼Œä¸ºä»€ä¹ˆéœ€è¦æƒé™åˆ†ç»„. listviewå›¾ç‰‡ ç¼“å­˜ï¼Œlistviewæ€Žä¹ˆä¼˜åŒ– viewpager listviewå¤„ç†æ»‘åŠ¨å†²çª listéåŽ†åˆ é™¤ fragment tag sercice ALDL (åŽé¢å†å¼„) Hashmapå®žçŽ°åŽŸç† å®žçŽ°æœ‰åº androidäº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹ androidå››å¤§ç»„ä»¶çš„åŠ è½½è¿‡ç¨‹ æé«˜sqliteçš„æŸ¥è¯¢æ•ˆçŽ‡ å†’æ³¡æŽ’åºï¼Œæ’å…¥æŽ’åº Androidæºç ç›¸å…³åˆ†æžHandleræœºåˆ¶å’Œåº•å±‚å®žçŽ°â€‹ https://noteforme.github.io/2017/08/21/Handler/ RecycleViewâ€‹ https://noteforme.github.io/2017/07/17/RecyclerView/ Binderé€šä¿¡åŽŸç†ä¸Žæœºåˆ¶https://blog.csdn.net/Android_SE/article/details/103898581 https://www.bilibili.com/video/BV1Ko4y117Ca?p=74 JetPackhttps://noteforme.github.io/categories/Jetpack/ Androidå„ä¸ªç‰ˆæœ¬APIçš„åŒºåˆ« æè¿°ä¸€æ¬¡ç½‘ç»œè¯·æ±‚çš„æµç¨‹ Bitmapå¯¹è±¡çš„ç†è§£ ActivityThreadï¼ŒAMSï¼ŒWMSçš„å·¥ä½œåŽŸç† SpareArrayåŽŸç† AndroidServiceä¸ŽActivityä¹‹é—´é€šä¿¡çš„å‡ ç§æ–¹å¼ IntentServiceåŽŸç†åŠä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ è¯´è¯´Activityã€Intentã€Service æ˜¯ä»€ä¹ˆå…³ç³» ApplicationContextå’ŒActivityContextçš„åŒºåˆ« SPæ˜¯è¿›ç¨‹åŒæ­¥çš„å—?æœ‰ä»€ä¹ˆæ–¹æ³•åšåˆ°åŒæ­¥ï¼Ÿ è°ˆè°ˆå¤šçº¿ç¨‹åœ¨Androidä¸­çš„ä½¿ç”¨ è¿›ç¨‹å’Œ Application çš„ç”Ÿå‘½å‘¨æœŸ AsyncTaskæœºåˆ¶ AsyncTaskåŽŸç†åŠä¸è¶³ AndroidManifestçš„ä½œç”¨ä¸Žç†è§£ æ€§èƒ½ä¼˜åŒ–https://noteforme.github.io/2017/08/16/PerformancePatterns/ https://noteforme.github.io/2018/02/09/LeakMemory/ ANRäº§ç”Ÿçš„åŽŸå› æ˜¯ä»€ä¹ˆï¼Ÿ ANRå®šä½å’Œä¿®æ­£ oomæ˜¯ä»€ä¹ˆï¼Ÿ ä»€ä¹ˆæƒ…å†µå¯¼è‡´oomï¼Ÿ æœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•å¯ä»¥é¿å…OOMï¼Ÿ Oom æ˜¯å¦å¯ä»¥try catchï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ å†…å­˜æ³„æ¼æ˜¯ä»€ä¹ˆï¼Ÿ ä»€ä¹ˆæƒ…å†µå¯¼è‡´å†…å­˜æ³„æ¼ï¼Ÿ å¦‚ä½•é˜²æ­¢çº¿ç¨‹çš„å†…å­˜æ³„æ¼ï¼Ÿ å†…å­˜æ³„éœ²åœºçš„è§£å†³æ–¹æ³• å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºåŒºåˆ«ï¼Ÿ LruCacheé»˜è®¤ç¼“å­˜å¤§å° å¦‚ä½•é€šè¿‡å¹¿æ’­æ‹¦æˆªå’Œabortä¸€æ¡çŸ­ä¿¡ï¼Ÿ å¹¿æ’­å¼•èµ·anrçš„æ—¶é—´é™åˆ¶æ˜¯å¤šå°‘ï¼Ÿ è®¡ç®—ä¸€ä¸ªviewçš„åµŒå¥—å±‚çº§ Activityæ ˆ Androidçº¿ç¨‹æœ‰æ²¡æœ‰ä¸Šé™ï¼Ÿ çº¿ç¨‹æ± æœ‰æ²¡æœ‰ä¸Šé™ï¼Ÿ Androidä¸ºä»€ä¹ˆå¼•å…¥Parcelableï¼Ÿ æœ‰æ²¡æœ‰å°è¯•ç®€åŒ–Parcelableçš„ä½¿ç”¨ï¼Ÿ ï¼ˆå››ï¼‰å¼€å‘ä¸­å¸¸è§çš„ä¸€äº›é—®é¢˜ å±å¹•é€‚é…çš„å¤„ç†æŠ€å·§éƒ½æœ‰å“ªäº›? æœåŠ¡å™¨åªæä¾›æ•°æ®æŽ¥æ”¶æŽ¥å£ï¼Œåœ¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹æ¡ä»¶ä¸‹ï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„æœ‰åºåˆ°è¾¾ï¼Ÿ åŠ¨æ€å¸ƒå±€çš„ç†è§£ æ€Žä¹ˆåŽ»é™¤é‡å¤ä»£ç ï¼Ÿ ç”»å‡º Android çš„å¤§ä½“æž¶æž„å›¾ Recycleviewå’ŒListViewçš„åŒºåˆ« ListViewå›¾ç‰‡åŠ è½½é”™ä¹±çš„åŽŸç†å’Œè§£å†³æ–¹æ¡ˆ åŠ¨æ€æƒé™é€‚é…æ–¹æ¡ˆï¼Œæƒé™ç»„çš„æ¦‚å¿µ Androidç³»ç»Ÿä¸ºä»€ä¹ˆä¼šè®¾è®¡ContentProviderï¼Ÿ ä¸‹æ‹‰çŠ¶æ€æ æ˜¯ä¸æ˜¯å½±å“activityçš„ç”Ÿå‘½å‘¨æœŸ å¦‚æžœåœ¨onStopçš„æ—¶å€™åšäº†ç½‘ç»œè¯·æ±‚ï¼ŒonResumeçš„æ—¶å€™æ€Žä¹ˆæ¢å¤ï¼Ÿ Bitmap ä½¿ç”¨æ—¶å€™æ³¨æ„ä»€ä¹ˆï¼Ÿ Bitmapçš„recycler() ViewPagerä½¿ç”¨ç»†èŠ‚ï¼Œå¦‚ä½•è®¾ç½®æˆæ¯æ¬¡åªåˆå§‹åŒ–å½“å‰çš„Fragmentï¼Œå…¶ä»–çš„ä¸åˆå§‹åŒ–ï¼Ÿ ç‚¹å‡»äº‹ä»¶è¢«æ‹¦æˆªï¼Œä½†æ˜¯æƒ³ä¼ åˆ°ä¸‹é¢çš„Viewï¼Œå¦‚ä½•æ“ä½œï¼Ÿ å¾®ä¿¡ä¸Šæ¶ˆæ¯å°çº¢ç‚¹çš„åŽŸç† CASä»‹ç»ï¼ˆè¿™æ˜¯é˜¿é‡Œå·´å·´çš„é¢è¯•é¢˜ï¼Œæˆ‘ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯ä»¥å‚è€ƒåšå®¢: CASç®€ä»‹ï¼‰ https://github.com/android-exchange/Android-Interview Kotiné¢è¯•é¢˜ http://www.youkmi.cn/2019/10/27/kotlin-ti-mu-zheng-li/ https://www.jianshu.com/p/45866c8415c8 æ€Žä¹ˆçœ‹æºç  https://www.bilibili.com/video/BV1d54y1h768 é¢ç» https://blog.csdn.net/sjy0118/article/details/112759112 https://www.kaelli.com/43.html https://www.jianshu.com/p/058c54948ca5 https://juejin.cn/post/6888222422760488974#heading-51 https://github.com/Omooo/Android_QA","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"INTEVIEW-ALGORITHEM","slug":"inteview-algorithem","date":"2024-05-22T06:46:53.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/05/22/inteview-algorithem/","link":"","permalink":"https://noteforme.github.io/2024/05/22/inteview-algorithem/","excerpt":"","text":"ç®—æ³•æŽ’åºç®—æ³•æœ‰å“ªäº›ï¼Ÿå†’æ³¡æŽ’åºã€é€‰æ‹©æŽ’åºã€æ’å…¥æŽ’åºã€å½’å¹¶æŽ’åºã€å¿«é€ŸæŽ’åºã€å¸Œå°”æŽ’åºã€å †æŽ’åºã€è®¡æ•°æŽ’åºã€æ¡¶æŽ’åºã€åŸºæ•°æŽ’åº https://zhuanlan.zhihu.com/p/42586566 æœ€å¿«çš„æŽ’åºç®—æ³•æ˜¯å“ªä¸ªï¼Ÿå¿«é€ŸæŽ’åº æœ€å¥½æƒ…å†µO(nlogn) æœ€åæƒ…å†µ O(n^2) ä¸ºä»€ä¹ˆä¸æ˜¯å †æŽ’åº ? åœ¨å †æŽ’åºï¼ˆå°æ ¹å †ï¼‰çš„æ—¶å€™ï¼Œæ¯æ¬¡æ€»æ˜¯å°†æœ€å°çš„å…ƒç´ ç§»é™¤ï¼Œç„¶åŽå°†æœ€åŽçš„å…ƒç´ æ”¾åˆ°å †é¡¶ï¼Œå†è®©å…¶è‡ªæˆ‘è°ƒæ•´ã€‚è¿™æ ·ä¸€æ¥ï¼Œæœ‰å¾ˆå¤šæ¯”è¾ƒå°†æ˜¯è¢«æµªè´¹çš„ï¼Œå› ä¸ºè¢«æ‹¿åˆ°å †é¡¶çš„é‚£ä¸ªå…ƒç´ å‡ ä¹Žè‚¯å®šæ˜¯å¾ˆå¤§çš„ï¼Œè€Œé è¿‘å †é¡¶çš„å…ƒç´ åˆå‡ ä¹Žè‚¯å®šæ˜¯å¾ˆå°çš„ï¼Œæœ€åŽä¸€ä¸ªå…ƒç´ èƒ½ç•™åœ¨å †é¡¶çš„å¯èƒ½æ€§å¾®ä¹Žå…¶å¾®ï¼Œæœ€åŽä¸€ä¸ªå…ƒç´ å¾ˆæœ‰å¯èƒ½æœ€ç»ˆå†è¢«ç§»åŠ¨åˆ°åº•éƒ¨ã€‚åœ¨å †æŽ’åºé‡Œé¢æœ‰å¤§é‡è¿™ç§è¿‘ä¹Žæ— æ•ˆçš„æ¯”è¾ƒã€‚éšç€æ•°æ®è§„æ¨¡çš„å¢žé•¿ï¼Œæ¯”è¾ƒçš„å¼€é”€æœ€å·®æƒ…å†µåº”è¯¥åœ¨ï¼ˆçº¿æ€§*å¯¹æ•°ï¼‰çº§åˆ«ï¼Œå¦‚æžœæ•°æ®é‡æ˜¯åŽŸæ¥çš„10å€ï¼Œé‚£ä¹ˆç”¨äºŽæ¯”è¾ƒçš„æ—¶é—´å¼€é”€å¯èƒ½æ˜¯åŽŸæ¥çš„10log10å€åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/qq_36770641&#x2F;article&#x2F;details&#x2F;82669788 æ‰‹å†™ä¸€ä¸ªå†’æ³¡æŽ’åº æ‰‹å†™å¿«é€ŸæŽ’åºä»£ç  å¿«é€ŸæŽ’åºçš„è¿‡ç¨‹ã€æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ æ‰‹å†™å †æŽ’åº å †æŽ’åºè¿‡ç¨‹ã€æ—¶é—´å¤æ‚åº¦åŠç©ºé—´å¤æ‚åº¦ å†™å‡ºä½ æ‰€çŸ¥é“çš„æŽ’åºç®—æ³•åŠæ—¶ç©ºå¤æ‚åº¦ï¼Œç¨³å®šæ€§ https://noteforme.github.io/2021/03/21/Data-Sort/ äºŒå‰æ ‘ç»™å‡ºæ ¹èŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹ï¼Œæ‰¾å‡ºä»Žæ ¹èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„è·¯å¾„ ç»™é˜¿é‡Œ2ä¸‡å¤šåå‘˜å·¥æŒ‰å¹´é¾„æŽ’åºåº”è¯¥é€‰æ‹©å“ªä¸ªç®—æ³•ï¼Ÿ GCç®—æ³•(å„ç§ç®—æ³•çš„ä¼˜ç¼ºç‚¹ä»¥åŠåº”ç”¨åœºæ™¯) èšç¾¤ç®—æ³•ä¸Žè’™ç‰¹å¡æ´›ç®—æ³• å­ä¸²åŒ…å«é—®é¢˜(KMP ç®—æ³•)å†™ä»£ç å®žçŽ° ä¸€ä¸ªæ— åºï¼Œä¸é‡å¤æ•°ç»„ï¼Œè¾“å‡ºNä¸ªå…ƒç´ ï¼Œä½¿å¾—Nä¸ªå…ƒç´ çš„å’Œç›¸åŠ ä¸ºMï¼Œç»™å‡ºæ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ã€‚æ‰‹å†™ç®—æ³• ä¸‡äº¿çº§åˆ«çš„ä¸¤ä¸ªURLæ–‡ä»¶Aå’ŒBï¼Œå¦‚ä½•æ±‚å‡ºAå’ŒBçš„å·®é›†C(æç¤ºï¼šBitæ˜ å°„-&gt;hashåˆ†ç»„-&gt;å¤šæ–‡ä»¶è¯»å†™æ•ˆçŽ‡-&gt;ç£ç›˜å¯»å€ä»¥åŠåº”ç”¨å±‚é¢å¯¹å¯»å€çš„ä¼˜åŒ–) ç™¾åº¦POIä¸­å¦‚ä½•è¯•ä¸‹æŸ¥æ‰¾æœ€è¿‘çš„å•†å®¶åŠŸèƒ½(æç¤ºï¼šåæ ‡é•œåƒ+Ræ ‘)ã€‚ ä¸¤ä¸ªä¸é‡å¤çš„æ•°ç»„é›†åˆä¸­ï¼Œæ±‚å…±åŒçš„å…ƒç´ ã€‚ ä¸¤ä¸ªä¸é‡å¤çš„æ•°ç»„é›†åˆä¸­ï¼Œè¿™ä¸¤ä¸ªé›†åˆéƒ½æ˜¯æµ·é‡æ•°æ®ï¼Œå†…å­˜ä¸­æ”¾ä¸ä¸‹ï¼Œæ€Žä¹ˆæ±‚å…±åŒçš„å…ƒç´ ï¼Ÿ ä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰100ä¸‡ä¸ªæ•´æ•°ï¼Œç”±ç©ºæ ¼åˆ†å¼€ï¼Œåœ¨ç¨‹åºä¸­åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„æ•´æ•°æ˜¯å¦åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚è¯´å‡ºæœ€ä¼˜çš„æ–¹æ³• ä¸€å¼ Bitmapæ‰€å å†…å­˜ä»¥åŠå†…å­˜å ç”¨çš„è®¡ç®— 2000ä¸‡ä¸ªæ•´æ•°ï¼Œæ‰¾å‡ºç¬¬äº”åå¤§çš„æ•°å­—ï¼Ÿ çƒ§ä¸€æ ¹ä¸å‡åŒ€çš„ç»³ï¼Œä»Žå¤´çƒ§åˆ°å°¾æ€»å…±éœ€è¦1ä¸ªå°æ—¶ã€‚çŽ°åœ¨æœ‰è‹¥å¹²æ¡æè´¨ç›¸åŒçš„ç»³å­ï¼Œé—®å¦‚ä½•ç”¨çƒ§ç»³çš„æ–¹æ³•æ¥è®¡æ—¶ä¸€ä¸ªå°æ—¶åäº”åˆ†é’Ÿå‘¢ï¼Ÿ æ±‚1000ä»¥å†…çš„æ°´ä»™èŠ±æ•°ä»¥åŠ40äº¿ä»¥å†…çš„æ°´ä»™èŠ±æ•° 5æžšç¡¬å¸ï¼Œ2æ­£3åå¦‚ä½•åˆ’åˆ†ä¸ºä¸¤å †ç„¶åŽé€šè¿‡ç¿»è½¬è®©ä¸¤å †ä¸­æ­£é¢å‘ä¸Šçš„ç¡¬8å¸å’Œåé¢å‘ä¸Šçš„ç¡¬å¸ä¸ªæ•°ç›¸åŒ æ—¶é’ˆèµ°ä¸€åœˆï¼Œæ—¶é’ˆåˆ†é’ˆé‡åˆå‡ æ¬¡ N*Nçš„æ–¹æ ¼çº¸,é‡Œé¢æœ‰å¤šå°‘ä¸ªæ­£æ–¹å½¢ xä¸ªè‹¹æžœï¼Œä¸€å¤©åªèƒ½åƒä¸€ä¸ªã€ä¸¤ä¸ªã€æˆ–è€…ä¸‰ä¸ªï¼Œé—®å¤šå°‘å¤©å¯ä»¥åƒå®Œï¼Ÿç”¨è¿‡å“ªäº›æ•°æ®ç»“æž„ å¸¸ç”¨æ•°æ®ç»“æž„ æœ‰å“ªäº›æ•°æ®ç»“æž„ å¢žåˆ æ”¹æŸ¥çš„å¤æ‚åº¦å¤šå°‘ è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦ï¼ˆé€’å½’ä¸Žéžé€’å½’ä¸¤ç§æ–¹å¼ï¼‰ å¿«æŽ’å†™ä¸€ä¸‹ï¼ŒåŠ¨æ€è§„åˆ’äº†è§£å—ï¼Ÿ å†’æ³¡æŽ’åºçš„é“¾è¡¨å®žçŽ° å†™ä¸ªå¿«æŽ’ éƒ½ç”¨è¿‡é‚£äº›å¸¸ç”¨çš„æ•°æ®ç»“æž„ï¼Œè¯´è¯´å¯¹æ ‘çš„äº†è§£ï¼Ÿ å †æŽ’ ç®—æ³•é¢˜ åˆ¤æ–­äºŒå‰æ ‘æ·±åº¦. 2 ç®—æ³•çš„äº”å¤§åŸºæœ¬è¦ç´ æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆç®—æ³•æ•ˆçŽ‡ä¸æ˜¯åŸºæœ¬è¦ç´  é“¶è¡Œå®¶ç®—æ³• å †æŽ’åºåŽŸç† bæ ‘ã€b+æ ‘ã€çº¢é»‘æ ‘ çº¢é»‘æ ‘æ€Žä¹ˆå¢žåŠ ã€åˆ é™¤èŠ‚ç‚¹ ç®—æ³•é¢˜ï¼šéšæœºç”Ÿæˆä¸é‡å¤çš„100ä¸ªæ•°0-99 å†™ä¸€ä¸ªæ³›åž‹æ–¹æ³•ï¼Œå®žçŽ°åˆ é™¤æ•°ç»„ä¸­çš„å…ƒç´ åŠŸèƒ½ è¿”å›žäºŒå‰æ ‘çš„ç¬¬kå¤§æ•° è¿”å›žç¬¬kå¤§çš„æ•°ï¼Œå…ˆè¯´ä¸‹ä½ èƒ½æƒ³åˆ°çš„æ–¹æ³•ï¼Œå†é€‰ä¸€ä¸ªæœ€ä¼˜æ–¹æ³•ã€‚ äºŒåˆ†æ³•æŸ¥æ‰¾ç›®æ ‡æ•° ä½¿ç”¨ä¸€ä¸ªå›ºå®šé•¿åº¦æ•°ç»„å®žçŽ°é˜Ÿåˆ—ï¼ŒåŒ…æ‹¬æ·»åŠ å’Œå–æ•°æ®çš„åŠŸèƒ½ æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼Œå¦‚ä½•ä¼˜åŒ– é“¾è¡¨å¦‚ä½•ä¼˜åŒ–ï¼Œå¯ä»¥é™ä½ŽæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ï¼Ÿ æ‰‹æ’•ï¼šæ‰‹å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼ æ‰‹æ’•ï¼šäºŒå‰æœç´¢æ ‘ç¬¬ k å°çš„èŠ‚ç‚¹ ç®—æ³•ï¼šåˆå¹¶åŒºé—´ ç®—æ³•ï¼šæŽ’åºæ•°ç»„ ç®—æ³•ï¼šåºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘ equalså’ŒhashCodeæ–¹æ³• æ‰‹æ’•å¿«é€ŸæŽ’åº è®²ä¸€ä¸ªçº¢é»‘æ ‘å’Œä¸€ä¸ªæŽ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜çš„åˆ†æžæ€è·¯ äºŒå‰æŸ¥æ‰¾æ ‘çš„æ¦‚å¿µ æ ‘é€€åŒ–æˆé“¾è¡¨å¦‚ä½•è§£å†³ï¼Ÿ Bæ ‘ä»¥åŠBæ ‘å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ å›¾çš„éåŽ†ä»¥åŠå…·ä½“ä»£ç å¦‚ä½•å®žçŽ°ï¼Ÿï¼ˆè¿­ä»£ï¼‰ æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„æ¦‚å¿µ å¸¸è§çš„æŽ’åºç®—æ³•ä»¥åŠæ—¶é—´å¤æ‚åº¦ é“¾è¡¨çš„åè½¬æ€Žä¹ˆå®žçŽ°ï¼Ÿ è®²ä¸€ä¸‹æŽ’åºç®—æ³•çš„æ€è·¯ æœ€åŽæ˜¯åŽä¸ºç»å…¸é¢˜ï¼Œä¸€ä¸ªæ¡¶5Lï¼Œå¦ä¸€ä¸ªæ¡¶7Lï¼Œå¦‚ä½•å¾—åˆ°6Lï¼Ÿï¼ˆç­”å‡ºæ¥äº†ï¼‰é¢è¯•å®˜ç«‹é©¬è¿½é—®ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ•°å­¦ç†è®ºå¯ä»¥ç»™è¿™ä¸ªé—®é¢˜æä¾›æ”¯æŒæ¥è¯æ˜Žï¼Œ1Lï¼Œ2Lï¼Œ3Lï¼Œ4Lï¼Œ6Læ˜¯ä¸æ˜¯éƒ½å¯ä»¥å¾—åˆ°è¿˜æ˜¯åªèƒ½å¾—åˆ°å…¶ä¸­çš„æŸå‡ ç§ï¼Ÿï¼ˆåˆ°è¿™é‡Œï¼Œæˆ‘æ˜¯çœŸçš„éº»äº†ï¼Œè€ƒè¿™ç§é¢˜çœŸçš„æ— ä»Žå‡†å¤‡ï¼Œé¢è¯•å®˜æ˜¯å•¥é—®é¢˜éƒ½èƒ½æ·±æŒ–æ·±æŒ–å†æ·±æŒ–ï¼‰ï¼ˆæœ€åŽä¸€é¢˜æœ‰çŸ¥é“çš„åŒå­¦å¯ä»¥è¯„è®ºåŒºç•™è¨€ å¿«æŽ’çš„æ€æƒ³ å¿«æŽ’è§£å†³topké—®é¢˜ï¼ˆæˆ‘å“­æ­»å•Šï¼Œæˆ‘æ²¡æœ‰æƒ³åˆ°å½“å‰çš„ä¼šä½¿ç”¨å¿«æŽ’æ¥è¿›è¡Œè§£å†³topkï¼Œæˆ‘ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨å †æŽ’åºï¼‰ å¿«æŽ’å’Œå †æŽ’æ¥è¿›è¡Œè§£å†³topké—®é¢˜ åè½¬é“¾è¡¨ åˆå¹¶ä¸¤ä¸ªæŽ’åºçš„é“¾è¡¨ ç®—æ³•é¢˜ï¼šç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œå’Œä¸€ä¸ªæ•°å­—mï¼Œé—®è¿™ä¸ªæ•°ç»„ä¸­å­˜ä¸å­˜åœ¨ä¸€ä¸ªå­åºåˆ—ï¼ˆä¸ä¸€å®šè¿žç»­ï¼‰ï¼Œä½¿å¾—å®ƒçš„å’Œä¸ºmï¼Œè¾“å‡ºtrueæˆ–false ä¸¤ä¸ªç®—æ³•ï¼ˆåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰çŽ¯ã€é“¾è¡¨é‡æŽ’&#x2F;é“¾è¡¨æŠ˜å ï¼‰ åè½¬å­—ç¬¦ä¸² ä¸Šæ¥¼æ¢¯åŠ¨æ€è§„åˆ’ï¼Œå¦‚æžœç¬¬Mé˜¶æ¢¯æ˜¯ä¸èƒ½è¸©çš„ å€’æ°´é—®é¢˜ï¼Œ3lå’Œ5læ¡¶å­è¦4læ°´æ€Žä¹ˆæžç®—æ³•æ€è·¯ï¼Œé“¾è¡¨å³ç§»åŠ¨kä½å’Œæ•°ç»„å³ç§»åŠ¨kä½æ€Žä¹ˆæžå·¦å³æ‹¬å·åŒ¹é…ï¼Œæœ€å°‘æƒ…å†µè¦åŠ å¤šå°‘æ¬¡æ‹¬å·ï¼Œå†™åœ¨çº¸ä¸Šæ‹ç…§ æ ‘ã€å›¾çš„å­˜å‚¨ç»“æž„ ç»™å‡ºäºŒå‰æ ‘çš„å‰åºä¸­åºï¼Œè¾“å‡ºåŽåº å…ˆæ¥äº†ä¸€é“ç®—æ³•é¢˜:æ‰¾å‡ºæœ€å·¦è¾¹çš„æ¬¡æ•°æœ€å¤šçš„å­—æ¯ã€‚ ç®—æ³•é¢˜ï¼šåˆ é™¤æŽ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ï¼ˆåŠ›æ‰£82ï¼‰ å¿«æŽ’å’Œåè½¬é“¾è¡¨ åˆ¤æ–­ä¸€ä¸ªæ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œ æ—‹è½¬é“¾è¡¨ LC61:é¢˜æ„æ˜¯è¿™æ ·å­çš„ï¼šç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ã€‚è¾“å…¥ï¼šhead&#x3D;[1,2,3] k &#x3D; 1è¾“å‡ºï¼š[3,1,2] 22.ç®—æ³•é¢˜ï¼šäºŒåˆ†æ³•æŸ¥æ‰¾ç›®æ ‡æ•°","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"INTERVIEW-LIABARY","slug":"interview-library","date":"2024-05-22T06:39:05.000Z","updated":"2024-09-15T10:06:57.580Z","comments":true,"path":"/2024/05/22/interview/","link":"","permalink":"https://noteforme.github.io/2024/05/22/interview/","excerpt":"","text":"https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md https://www.youtube.com/watch?v=pUV3qZh481k okhttphttps://jonblog.site/2024/05/11/okhttp/ https://www.51cto.com/article/689330.html OKHttp è¯·æ±‚çš„æ•´ä½“æµç¨‹æ˜¯æ€Žæ ·çš„? OKHttp åˆ†å‘å™¨æ˜¯æ€Žæ ·å·¥ä½œçš„? OKHttp æ‹¦æˆªå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„? åº”ç”¨æ‹¦æˆªå™¨å’Œç½‘ç»œæ‹¦æˆªå™¨æœ‰ä»€ä¹ˆåŒºåˆ«? OKHttp å¦‚ä½•å¤ç”¨ TCP è¿žæŽ¥? OKHttp ç©ºé—²è¿žæŽ¥å¦‚ä½•æ¸…é™¤? OKHttp æœ‰å“ªäº›ä¼˜ç‚¹? OKHttp æ¡†æž¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼? okhttpæ€Žä¹ˆæ”¯æŒhttp2.0 é…ç½®åˆé€‚çš„é€‚é…å™¨ï¼Œè§£æžjsonæ•°æ®ã€‚ Android å¦‚ä½•ç¼–å†™åŸºäºŽç¼–è¯‘æ—¶æ³¨è§£çš„é¡¹ç›® ç¼–è¯‘æ—¶æ³¨è§£ä¸Žè¿è¡Œæ—¶æ³¨è§£ï¼Œä¸ºä»€ä¹ˆretrofitè¦ä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼Ÿ åœ¨é¡¹ç›®ä¸­æœ‰ç›´æŽ¥ä½¿ç”¨tcp,socketæ¥å‘é€æ¶ˆæ¯å— https://www.bilibili.com/video/BV1ib4y1f7S1 okhttpæ€Žä¹ˆæ”¯æŒhttp2.0 Handshakeåˆ™ä¼šæŠŠæœåŠ¡ç«¯æ”¯æŒçš„Tlsç‰ˆæœ¬ï¼ŒåŠ å¯†æ–¹å¼ç­‰éƒ½å¸¦å›žæ¥ï¼Œç„¶åŽä¼šæŠŠè¿™ä¸ªæ²¡æœ‰éªŒè¯è¿‡çš„HandShakeç”¨X509CertificateåŽ»éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚ç„¶åŽä¼šé€šè¿‡PlatformåŽ»ä»ŽSSLSocketåŽ»èŽ·å–ALPNçš„åè®®æ”¯æŒä¿¡æ¯ï¼Œå½“åŽç«¯æ”¯æŒçš„åè®®å†…åŒ…å«Http2.0æ—¶ï¼Œåˆ™å°±ä¼šæŠŠè¯·æ±‚å‡çº§åˆ°Http2.0é˜¶æ®µã€‚ é…ç½®åˆé€‚çš„é€‚é…å™¨ï¼Œè§£æžjsonæ•°æ®ã€‚ Android å¦‚ä½•ç¼–å†™åŸºäºŽç¼–è¯‘æ—¶æ³¨è§£çš„é¡¹ç›® ç¼–è¯‘æ—¶æ³¨è§£ä¸Žè¿è¡Œæ—¶æ³¨è§£ï¼Œä¸ºä»€ä¹ˆretrofitè¦ä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼Ÿ https://www.bilibili.com/video/BV1ib4y1f7S1 Okhttpç¼“å­˜æœºåˆ¶ ç½‘ç»œè¯·æ±‚ç¼“å­˜å¤„ç†ï¼Œokhttpå¦‚ä½•å¤„ç†ç½‘ç»œç¼“å­˜çš„ è‡ªå·±åŽ»è®¾è®¡ç½‘ç»œè¯·æ±‚æ¡†æž¶ï¼Œæ€Žä¹ˆåšï¼Ÿ HTTP Network ä»Žç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹ TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ TCPä¸ŽUDPçš„åŒºåˆ« TCPä¸ŽUDPçš„åº”ç”¨ HTTPåè®® HTTP1.0ä¸Ž2.0çš„åŒºåˆ« HTTPæŠ¥æ–‡ç»“æž„ HTTPä¸ŽHTTPSçš„åŒºåˆ«ä»¥åŠå¦‚ä½•å®žçŽ°å®‰å…¨æ€§ å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§? httpsä¸­å“ªé‡Œç”¨äº†å¯¹ç§°åŠ å¯†ï¼Œå“ªé‡Œç”¨äº†éžå¯¹ç§°åŠ å¯†ï¼Œå¯¹åŠ å¯†ç®—æ³•ï¼ˆå¦‚RSAï¼‰ç­‰æ˜¯å¦æœ‰äº†è§£? clientå¦‚ä½•ç¡®å®šè‡ªå·±å‘é€çš„æ¶ˆæ¯è¢«serveræ”¶åˆ°? è°ˆè°ˆä½ å¯¹å®‰å“ç­¾åçš„ç†è§£ã€‚ è¯·è§£é‡Šå®‰å“ä¸ºå•¥è¦åŠ ç­¾åæœºåˆ¶? è§†é¢‘åŠ å¯†ä¼ è¾“ App æ˜¯å¦‚ä½•æ²™ç®±åŒ–ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ æƒé™ç®¡ç†ç³»ç»Ÿï¼ˆåº•å±‚çš„æƒé™æ˜¯å¦‚ä½•è¿›è¡Œ grant çš„ï¼‰ï¼Ÿ ä»Žç½‘ç»œåŠ è½½ä¸€ä¸ª10Mçš„å›¾ç‰‡ï¼Œè¯´ä¸‹æ³¨æ„äº‹é¡¹ TCPçš„3æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ TCPä¸ŽUDPçš„åŒºåˆ« TCPä¸ŽUDPçš„åº”ç”¨ HTTPåè®® HTTP1.0ä¸Ž2.0çš„åŒºåˆ« HTTPæŠ¥æ–‡ç»“æž„ HTTPä¸ŽHTTPSçš„åŒºåˆ«ä»¥åŠå¦‚ä½•å®žçŽ°å®‰å…¨æ€§ å¦‚ä½•éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§? httpsä¸­å“ªé‡Œç”¨äº†å¯¹ç§°åŠ å¯†ï¼Œå“ªé‡Œç”¨äº†éžå¯¹ç§°åŠ å¯†ï¼Œå¯¹åŠ å¯†ç®—æ³•ï¼ˆå¦‚RSAï¼‰ç­‰æ˜¯å¦æœ‰äº†è§£? clientå¦‚ä½•ç¡®å®šè‡ªå·±å‘é€çš„æ¶ˆæ¯è¢«serveræ”¶åˆ°? è°ˆè°ˆä½ å¯¹å®‰å“ç­¾åçš„ç†è§£ã€‚ è¯·è§£é‡Šå®‰å“ä¸ºå•¥è¦åŠ ç­¾åæœºåˆ¶? è§†é¢‘åŠ å¯†ä¼ è¾“ App æ˜¯å¦‚ä½•æ²™ç®±åŒ–ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ æƒé™ç®¡ç†ç³»ç»Ÿï¼ˆåº•å±‚çš„æƒé™æ˜¯å¦‚ä½•è¿›è¡Œ grant çš„ï¼‰ï¼Ÿ okio1.ç®€ä»‹ï¼› 1.sinkï¼šè‡ªå·±â€“ã€‹åˆ«äºº 2.sourceï¼šåˆ«äººâ€“ã€‹è‡ªå·± 3.BufferSinkï¼šæœ‰ç¼“å­˜åŒºåŸŸçš„sink 4.BufferSourceï¼šæœ‰ç¼“å­˜åŒºåŸŸçš„source 5.Bufferï¼šå®žçŽ°äº†3ã€4çš„ç¼“å­˜åŒºåŸŸï¼Œå†…éƒ¨æœ‰Segmentçš„åŒå‘é“¾è¡¨ï¼Œåœ¨åœ¨è½¬ç§»æ•°æ®çš„æ—¶å€™ï¼Œåªéœ€è¦å°†æŒ‡é’ˆè½¬ç§»æŒ‡å‘å°±è¡Œ 2.æ¯”java ioçš„å¥½å¤„ï¼š 1.å‡å°‘å†…å­˜ç”³è¯·å’Œæ•°æ®æ‹·è´ 2.ç±»å°‘ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¼€å‘æ•ˆçŽ‡é«˜ 3.å†…éƒ¨å®žçŽ°ï¼š 1.Bufferçš„SegmentåŒå‘é“¾è¡¨ï¼Œå‡å°‘æ•°æ®æ‹·è´ 2.Segmentçš„å†…éƒ¨byteæ•°ç»„çš„å…±äº«ï¼Œå‡å°‘æ•°æ®æ‹·è´ 3.SegmentPoolçš„å…±äº«å’Œå›žæ”¶Segment 4.sinkå’Œsourceä¸­è¢«å®žé™…æ“ä½œçš„å…¶å®žæ˜¯Bufferï¼ŒBufferå¯ä»¥å……å½“sinkå’Œsource 5.æœ€ç»ˆokioåªæ˜¯å¯¹java ioçš„å°è£…ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸºäºŽjava io çš„ å†™åœ¨æœ€åŽ:èƒ½çœ‹åˆ°è¿™é‡Œçš„äºº,æˆ‘æŒºä½©æœä½ çš„.è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨å¤´æ¡é¢è¯•ä¹‹å‰æ•´ç†çš„,æœ€åŽ**80%**çš„é¢˜ç›®éƒ½å‘½ä¸­äº†,æ‰€ä»¥ç¥ä½ å¥½è¿. ä¸è´©å–ç„¦è™‘ï¼Œä¹Ÿä¸æ ‡é¢˜å…šã€‚åˆ†äº«ä¸€äº›è¿™ä¸ªä¸–ç•Œä¸Šæœ‰æ„æ€çš„äº‹æƒ…ã€‚é¢˜æåŒ…æ‹¬ä¸”ä¸é™äºŽï¼šç§‘å¹»ã€ç§‘å­¦ã€ç§‘æŠ€ã€äº’è”ç½‘ã€ç¨‹åºå‘˜ã€è®¡ç®—æœºç¼–ç¨‹ã€‚ä¸‹é¢æ˜¯æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼šä¸–ç•Œä¸Šæœ‰æ„æ€çš„äº‹ï¼Œå¹²è´§å¤šå¤šç­‰ä½ æ¥çœ‹ã€‚ ä½œè€…ï¼šä½•æ—¶å¤• é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/cf5092fa2694æ¥æºï¼šç®€ä¹¦ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚ Retrofitåœ¨retrofitä¸­çš„æ³›åž‹æ˜¯æ€Žä¹ˆè§£æžçš„ https://noteforme.github.io/2017/09/23/Retrofit/ coroutine é¢è¯•kotlinåç¨‹æœ‰æ²¡æœ‰äº†è§£è¿‡ã€‚ï¼ˆåç¨‹æ˜¯kotlin è¯­è¨€å¯¹çº¿ç¨‹çš„å°è£…ï¼‰åç¨‹å®žçŽ°åŽŸç†åç¨‹çš„ç†è§£åç¨‹ç›¸å¯¹äºŽçº¿ç¨‹çš„åŒºåˆ«åç¨‹Flowæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„è”ç³»ä¸ŽåŒºåˆ«ä½ äº†è§£åç¨‹å—ï¼Ÿåç¨‹æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå¯ä»¥å®Œå…¨å–ä»£rxjavaå—ï¼Ÿ é«˜ç«¯æŠ€æœ¯é¢è¯•é¢˜ è¿™é‡Œè®²çš„æ˜¯å¤§å…¬å¸éœ€è¦ç”¨åˆ°çš„ä¸€äº›é«˜ç«¯AndroidæŠ€æœ¯ï¼Œè¿™é‡Œä¸“é—¨æ•´ç†äº†ä¸€ä¸ªæ–‡æ¡£ï¼Œå¸Œæœ›å¤§å®¶éƒ½å¯ä»¥çœ‹çœ‹ã€‚è¿™äº›é¢˜ç›®æœ‰ç‚¹æŠ€æœ¯å«é‡ï¼Œéœ€è¦å¥½ç‚¹æ—¶é—´åŽ»ç ”ç©¶ä¸€ä¸‹çš„ã€‚ Glidehttps://jonblog.site/2024/06/18/glide/ RxJavahttps://noteforme.github.io/2020/08/04/RxJava/ åœ¨ RxJava ä¸­ï¼Œ ä¼šé‡åˆ°è¢«è§‚å¯Ÿè€…å‘é€æ¶ˆæ¯å¤ªå¿«ä»¥è‡³äºŽå®ƒçš„æ“ä½œç¬¦æˆ–è€…è®¢é˜…è€…ä¸èƒ½åŠæ—¶å¤„ç†ç›¸å…³çš„æ¶ˆæ¯ï¼Œè¿™å°±æ˜¯å…¸åž‹çš„èƒŒåŽ‹ï¼ˆ Back Pressure ï¼‰åœºæ™¯ã€‚ RxJava æ˜¯åŸºäºŽ Push æ¨¡åž‹ ã€‚å¯¹äºŽ Pull æ¨¡åž‹è€Œè¨€ï¼Œå½“æ¶ˆè´¹è€…è¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æžœç”Ÿäº§è€…æ¯”è¾ƒæ…¢ ï¼Œåˆ™æ¶ˆè´¹è€…ä¼šé˜»å¡žç­‰å¾…ã€‚å¦‚æžœç”Ÿäº§è€…æ¯”è¾ƒå¿«ï¼Œç”Ÿäº§è€…ä¼šç­‰å¾…æ¶ˆè´¹è€…å¤„ç†å®ŒåŽå†ç”Ÿäº§æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºçŽ°èƒŒåŽ‹çš„æƒ…å†µã€‚ç„¶è€Œåœ¨ RxJava ä¸­ï¼Œåªè¦ç”Ÿäº§è€…æ•°æ®å‡†å¤‡å¥½äº†å°±ä¼šå‘å°„å‡ºåŽ»ã€‚å¦‚æžœç”Ÿäº§è€…æ¯”è¾ƒæ…¢ï¼Œåˆ™æ¶ˆè´¹è€…ä¼šç­‰å¾…æ–°çš„æ•°æ®åˆ°æ¥ã€‚å¦‚æžœç”Ÿäº§è€…æ¯”è¾ƒå¿«ï¼Œåˆ™ä¼šæœ‰å¾ˆå¤šæ•°æ®å‘å°„ç»™æ¶ˆè´¹è€…ï¼Œè€Œä¸ç®¡æ¶ˆè´¹è€…å½“å‰æœ‰æ²¡æœ‰èƒ½åŠ›å¤„ç†æ•°æ®ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´èƒŒåŽ‹ã€‚ åœ¨ RxJava 2.x ä¸­ï¼Œ Observable ä¸å†æ”¯æŒèƒŒåŽ‹ï¼Œè€Œæ˜¯æ”¹ç”¨ Flowable æ¥ä¸“é—¨æ”¯æŒèƒŒåŽ‹ã€‚é»˜è®¤é˜Ÿåˆ—å¤§å°ä¸º 128 ï¼Œå¹¶ä¸”è¦æ±‚æ‰€æœ‰çš„æ“ä½œç¬¦å¼ºåˆ¶æ”¯æŒèƒŒåŽ‹ã€‚ RxJavaåŽŸç†åŠå¦‚ä½•å°è£…ä½¿ç”¨â€‹ ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå’Œè£…é¥°å™¨æ¨¡å¼ã€‚ â€‹ å…ˆç”¨Observablexå‘å³æž„å»ºæµï¼Œç„¶åŽå‘å·¦åˆ›å»ºè®¢é˜…æµï¼Œæœ€åŽæ—¶é—´é€šè¿‡è§‚å¯Ÿè€…å›žè°ƒæµå‘é€ã€‚ â€‹ â€‹ ä½ äº†è§£åç¨‹å—ï¼Ÿåç¨‹æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå¯ä»¥å®Œå…¨å–ä»£rxjavaå—ï¼Ÿ rxjavaé‡Œé¢ç”¨äº†å¤§é‡çš„&lt;? super T&gt;è¿™äº›ï¼Œæ˜¯ä»€ä¹ˆæ„æ€ã€‚ å¦‚æžœè¦ä»Žé›†åˆä¸­è¯»å–ç±»åž‹Tçš„æ•°æ®ï¼Œå¹¶ä¸”ä¸èƒ½å†™å…¥ï¼Œå¯ä»¥ä½¿ç”¨ ? extends é€šé…ç¬¦ï¼›(Producer Extends) å¦‚æžœè¦ä»Žé›†åˆä¸­å†™å…¥ç±»åž‹Tçš„æ•°æ®ï¼Œå¹¶ä¸”ä¸éœ€è¦è¯»å–ï¼Œå¯ä»¥ä½¿ç”¨ ? super é€šé…ç¬¦ï¼›(Consumer Super),åªèƒ½ç”¨ObjectæŽ¥æ”¶ã€‚ å¦‚æžœæ—¢è¦å­˜åˆè¦å–ï¼Œé‚£ä¹ˆå°±ä¸è¦ä½¿ç”¨ä»»ä½•é€šé…ç¬¦ã€‚ https://www.jianshu.com/p/86cf908afcb6 RxJavaæ€Žä¹ˆé€šè¿‡è¢«è®¢é˜…è€…ä¼ ç»™è®¢é˜…è€…çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„?Observerå¤„ç†å®ŒonCompleteåŽä¼šè¿˜èƒ½onNextå—?â€‹ onCompleteæ˜¯ç”¨æ¥æŽ§åˆ¶ä¸èƒ½å‘é€æ•°æ®çš„ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½onNextäº†ï¼ŒåŒ…æ‹¬onErrorä¹Ÿæ˜¯ä¸èƒ½å†å‘é€onNextæ•°æ®äº†ï¼Œè¯¥æ–¹æ³•ä¸­ä¹Ÿæ˜¯è°ƒç”¨äº† disposeæ–¹æ³•ã€‚ RxJavaä¸­mapã€flatMapçš„åŒºåˆ«ï¼Œä½ è¿˜ç”¨è¿‡å…¶ä»–å“ªäº›æ“ä½œç¬¦?â€‹ mapæ˜¯é€šè¿‡åŽŸå§‹æ•°æ®ç±»åž‹è¿”å›žå¦å¤–ä¸€ç§æ•°æ®ç±»åž‹ï¼Œè€ŒflatMapæ˜¯é€šè¿‡åŽŸå§‹æ•°æ®ç±»åž‹è¿”å›žå¦å¤–ä¸€ç§è¢«è§‚å¯Ÿè€…ã€‚ Maybeã€Singleã€Flowableã€Completableå‡ ç§è§‚å¯Ÿè€…çš„åŒºåˆ«ï¼Œä»¥åŠä»–ä»¬åœ¨ä»€ä¹ˆåœºæ™¯ç”¨ï¼Ÿâ€‹ å¦‚æžœåªæƒ³å‘ä¸€æ¡æ•°æ®ï¼Œæˆ–è€…ä¸å‘æ•°æ®å°±ç”¨Maybeï¼Œå¦‚æžœæƒ³å‘å¤šæ¡æ•°æ®æˆ–è€…ä¸å‘æ•°æ®å°±ç”¨Observableï¼Œå¦‚æžœåªå‘ä¸€æ¡æ•°æ®æˆ–è€…å¤±è´¥å°±ç”¨Singleï¼Œå¦‚æžœæƒ³ç”¨èƒŒåŽ‹ç­–ç•¥ä½¿ç”¨Flowableï¼Œå¦‚æžœä¸å‘æ•°æ®å°±ç”¨Completable ä¹Ÿå°±æ˜¯è¯´Maybeå¯èƒ½ä¸å‘é€æ•°æ®ï¼Œå¦‚æžœå‘é€æ•°æ®åªä¼šå‘é€å•æ¡æ•°æ®ã€‚ singleä¹Ÿæ˜¯å‘é€å•æ¡æ•°æ®ï¼Œä½†æ˜¯å®ƒè¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥ã€‚ RxJavaåˆ‡æ¢çº¿ç¨‹æ˜¯æ€Žä¹ˆå›žäº‹?subscribeOnå®žé™…æ˜¯åˆ›å»ºäº†ObservableSubscribeOnçš„Observableï¼Œå®ƒçš„è®¢é˜…æ–¹æ³•é‡Œé¢åˆ›å»ºäº†SubscribeOnObserverï¼Œé€šè¿‡çº¿ç¨‹æ± æ‰§è¡ŒRunnableï¼Œä½¿ä¸Šæ¸¸Observableçš„è®¢é˜…åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆsubscribeOnèƒ½æŽ§åˆ¶observableåœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„åŽŸå›  RxJavaçš„subscribeOnåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆ?subscribeOnå¯¹subscribeè®¢é˜…è¿›è¡Œå¤„ç†ï¼Œé’ˆå¯¹æ˜¯è®¢é˜…æµï¼Œä»ŽåŽå‘å‰æµåŠ¨ï¼Œæ‰€ä»¥æœ€å‰é¢çš„ä¸€æ¬¡ç”Ÿæ•ˆã€‚ subscribeOnæ˜¯è§„å®šä¸Šæ¸¸çš„observableåœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æžœæˆ‘ä»¬æ‰§è¡Œå¤šæ¬¡çš„subscribeOnçš„è¯ï¼Œä»Žä¸‹æ¸¸çš„observeråˆ°ä¸Šæ¸¸çš„observableçš„è®¢é˜…è¿‡ç¨‹ï¼Œæœ€å¼€å§‹è°ƒç”¨çš„subscribeOnè¿”å›žçš„observableä¼šæŠŠåŽé¢æ‰§è¡Œçš„subscribeOnè¿”å›žçš„observableç»™è¦†ç›–äº†ï¼Œå› æ­¤æˆ‘ä»¬æ„Ÿå®˜çš„æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡çš„subscribeOnèƒ½ç”Ÿæ•ˆã€‚ RxJavaçš„observeOnå¤šæ¬¡è°ƒç”¨å“ªä¸ªæœ‰æ•ˆ?observeOnåœ¨äº‹ä»¶å‘é€çš„ onNext(T t)è¿›è¡Œå¤„ç†ï¼Œé’ˆå¯¹çš„æ˜¯è§‚å¯Ÿè€…æµï¼Œä»Žå‰å‘åŽæµåŠ¨ï¼Œæ‰€ä»¥æœ€åŽä¸€æ¬¡ç”Ÿæ•ˆã€‚ observeOnæ˜¯æŒ‡å®šä¸‹æ¸¸çš„observeråœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥è¿™ä¸ªæ›´å¥½ç†è§£ï¼Œçœ‹observeOnä¸‹ä¸€ä¸ªobserveræ˜¯å“ªä¸€ä¸ªï¼Œæ‰€ä»¥å¤šæ¬¡è°ƒç”¨observeOnè‚¯å®šæ˜¯æœ€åŽä¸€ä¸ªobserveOnæŽ§åˆ¶æœ‰æ•ˆã€‚ https://juejin.cn/post/6900870262062120967 https://zhuanlan.zhihu.com/p/339620311 RxJavaä¸­èƒŒåŽ‹æ˜¯æ€Žä¹ˆå›žäº‹ï¼Ÿ https://www.jianshu.com/p/c3965e82b164 https://zhuanlan.zhihu.com/p/322405376 https://www.bilibili.com/video/BV1Af4y187b8 æ•°æ®åº“ sqliteå‡çº§ï¼Œå¢žåŠ å­—æ®µçš„è¯­å¥ æ•°æ®åº“æ¡†æž¶å¯¹æ¯”å’Œæºç åˆ†æž æ•°æ®åº“çš„ä¼˜åŒ– æ•°æ®åº“æ•°æ®è¿ç§»é—®é¢˜ æ’ä»¶åŒ–ã€æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€çƒ­ä¿®å¤ã€å¢žé‡æ›´æ–°ã€Gradle å¯¹çƒ­ä¿®å¤å’Œæ’ä»¶åŒ–çš„ç†è§£ æ’ä»¶åŒ–åŽŸç†åˆ†æž æ¨¡å—åŒ–å®žçŽ°ï¼ˆå¥½å¤„ï¼ŒåŽŸå› ï¼‰ çƒ­ä¿®å¤,æ’ä»¶åŒ– é¡¹ç›®ç»„ä»¶åŒ–çš„ç†è§£ æè¿°æ¸…ç‚¹å‡» Android Studio çš„ build æŒ‰é’®åŽå‘ç”Ÿäº†ä»€ä¹ˆ æž¶æž„è®¾è®¡å’Œè®¾è®¡æ¨¡å¼â€‹ https://noteforme.github.io/categories/DesignPatterns/ è®¾è®¡åŽŸåˆ™â€‹ å•ä¸€èŒè´£ â€‹ ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚ æŽ¥å£éš”ç¦» â€‹ å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ï¼Œå³ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æŽ¥å£ä¸Šã€‚ ä¾èµ–å€’ç½® é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½Žå±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ã€‚ æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚ ä¾èµ–å€’ç½®çš„ä¸­å¿ƒæ€æƒ³æ˜¯é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚ é‡Œæ°æ›¿æ¢ æ‰€æœ‰ä½¿ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žçš„ä½¿ç”¨å…¶å­ç±»ã€‚ ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œå­ç±»å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ç»§æ‰¿å®žé™…ä¸Šè®©ä¸¤ä¸ªç±»è€¦åˆæ€§å¢žå¼ºäº†ï¼Œé€‚å½“æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ èšåˆ ç»„åˆ ä¾èµ–æ¥è§£å†³é—®é¢˜ã€‚ â€‹ é€šç”¨åšæ³•æ˜¯ï¼š åŽŸæ¥çš„çˆ¶ç±»å’Œå­ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»ï¼ŒåŽŸæœ‰çš„ç»§æ‰¿å…³ç³»åŽ»æŽ‰ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ã€‚ å¼€é—­åŽŸåˆ™ ocp è¿ªç±³ç‰¹æ³•åˆ™ â€‹ ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ è®¾è®¡æ¨¡å¼ è°ˆè°ˆä½ å¯¹Androidè®¾è®¡æ¨¡å¼çš„ç†è§£ MVC MVP MVVMåŽŸç†å’ŒåŒºåˆ« ä½ æ‰€çŸ¥é“çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ é¡¹ç›®ä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ æ‰‹å†™ç”Ÿäº§è€…&#x2F;æ¶ˆè´¹è€…æ¨¡å¼ å†™å‡ºè§‚å¯Ÿè€…æ¨¡å¼çš„ä»£ç  é€‚é…å™¨æ¨¡å¼ï¼Œè£…é¥°è€…æ¨¡å¼ï¼Œå¤–è§‚æ¨¡å¼çš„å¼‚åŒï¼Ÿ ç”¨åˆ°çš„ä¸€äº›å¼€æºæ¡†æž¶ï¼Œä»‹ç»ä¸€ä¸ªçœ‹è¿‡æºç çš„ï¼Œå†…éƒ¨å®žçŽ°è¿‡ç¨‹ã€‚ è°ˆè°ˆå¯¹RxJavaçš„ç†è§£ RxJavaçš„åŠŸèƒ½ä¸ŽåŽŸç†å®žçŽ° RxJavaçš„ä½œç”¨ï¼Œä¸Žå¹³æ—¶ä½¿ç”¨çš„å¼‚æ­¥æ“ä½œæ¥æ¯”çš„ä¼˜ç¼ºç‚¹ è¯´è¯´EventBusä½œç”¨ï¼Œå®žçŽ°æ–¹å¼ï¼Œä»£æ›¿EventBusçš„æ–¹å¼ ä»Ž0è®¾è®¡ä¸€æ¬¾Appæ•´ä½“æž¶æž„ï¼Œå¦‚ä½•åŽ»åšï¼Ÿ è¯´ä¸€æ¬¾ä½ è®¤ä¸ºå½“å‰æ¯”è¾ƒç«çš„åº”ç”¨å¹¶è®¾è®¡(æ¯”å¦‚ï¼šç›´æ’­APPï¼ŒP2Pé‡‘èžï¼Œå°è§†é¢‘ç­‰) è°ˆè°ˆå¯¹javaçŠ¶æ€æœºç†è§£ Fragmentå¦‚æžœåœ¨Adapterä¸­ä½¿ç”¨åº”è¯¥å¦‚ä½•è§£è€¦ï¼Ÿ Binderæœºåˆ¶åŠåº•å±‚å®žçŽ° å¯¹äºŽåº”ç”¨æ›´æ–°è¿™å—æ˜¯å¦‚ä½•åšçš„ï¼Ÿ(è§£ç­”ï¼šç°åº¦ï¼Œå¼ºåˆ¶æ›´æ–°ï¼Œåˆ†åŒºåŸŸæ›´æ–°)ï¼Ÿ å®žçŽ°ä¸€ä¸ªJsonè§£æžå™¨(å¯ä»¥é€šè¿‡æ­£åˆ™æé«˜é€Ÿåº¦) ç»Ÿè®¡å¯åŠ¨æ—¶é•¿,æ ‡å‡† æ€§èƒ½ä¼˜åŒ– å¦‚ä½•å¯¹Android åº”ç”¨è¿›è¡Œæ€§èƒ½åˆ†æžä»¥åŠä¼˜åŒ–? ddms å’Œ traceView æ€§èƒ½ä¼˜åŒ–å¦‚ä½•åˆ†æžsystraceï¼Ÿ ç”¨IDEå¦‚ä½•åˆ†æžå†…å­˜æ³„æ¼ï¼Ÿ Javaå¤šçº¿ç¨‹å¼•å‘çš„æ€§èƒ½é—®é¢˜ï¼Œæ€Žä¹ˆè§£å†³ï¼Ÿ å¯åŠ¨é¡µç™½å±åŠé»‘å±è§£å†³ï¼Ÿ å¯åŠ¨å¤ªæ…¢æ€Žä¹ˆè§£å†³ï¼Ÿ æ€Žä¹ˆä¿è¯åº”ç”¨å¯åŠ¨ä¸å¡é¡¿ï¼Ÿ Appå¯åŠ¨å´©æºƒå¼‚å¸¸æ•æ‰ è‡ªå®šä¹‰Viewæ³¨æ„äº‹é¡¹ çŽ°åœ¨ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢,è¯•ä»Žç½‘ç»œåè®®çš„è§’åº¦åˆ†æžåŽŸå› ,å¹¶ä¼˜åŒ–(æç¤ºï¼šç½‘ç»œçš„5å±‚éƒ½å¯ä»¥æ¶‰åŠ)ã€‚ Httpsè¯·æ±‚æ…¢çš„è§£å†³åŠžæ³•ï¼ˆæç¤ºï¼šDNSï¼Œæºå¸¦æ•°æ®ï¼Œç›´æŽ¥è®¿é—®IPï¼‰ å¦‚ä½•ä¿æŒåº”ç”¨çš„ç¨³å®šæ€§ RecyclerViewå’ŒListViewçš„æ€§èƒ½å¯¹æ¯” ListViewçš„ä¼˜åŒ– RecycleViewä¼˜åŒ– Viewæ¸²æŸ“ Bitmapå¦‚ä½•å¤„ç†å¤§å›¾ï¼Œå¦‚ä¸€å¼ 30Mçš„å¤§å›¾ï¼Œå¦‚ä½•é¢„é˜²OOM javaä¸­çš„å››ç§å¼•ç”¨çš„åŒºåˆ«ä»¥åŠä½¿ç”¨åœºæ™¯ å¼ºå¼•ç”¨ç½®ä¸ºnullï¼Œä¼šä¸ä¼šè¢«å›žæ”¶ï¼Ÿ NDKã€jniã€Binderã€AIDLã€è¿›ç¨‹é€šä¿¡æœ‰å…³ è¯·ä»‹ç»ä¸€ä¸‹NDK ä»€ä¹ˆæ˜¯NDKåº“? jniç”¨è¿‡å—ï¼Ÿ å¦‚ä½•åœ¨jniä¸­æ³¨å†Œnativeå‡½æ•°ï¼Œæœ‰å‡ ç§æ³¨å†Œæ–¹å¼? Javaå¦‚ä½•è°ƒç”¨cã€c++è¯­è¨€ï¼Ÿ jniå¦‚ä½•è°ƒç”¨javaå±‚ä»£ç ï¼Ÿ è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ï¼Ÿ Binderæœºåˆ¶ ç®€è¿°IPCï¼Ÿ ä»€ä¹ˆæ˜¯AIDLï¼Ÿ AIDLè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ AIDLå¦‚ä½•ä½¿ç”¨ï¼Ÿ Android ä¸Šçš„ Inter-Process-Communication è·¨è¿›ç¨‹é€šä¿¡æ—¶å¦‚ä½•å·¥ä½œçš„ï¼Ÿ å¤šè¿›ç¨‹åœºæ™¯é‡è§è¿‡ä¹ˆï¼Ÿ Androidè¿›ç¨‹åˆ†ç±»ï¼Ÿ è¿›ç¨‹å’Œ Application çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ è¿›ç¨‹è°ƒåº¦ è°ˆè°ˆå¯¹è¿›ç¨‹å…±äº«å’Œçº¿ç¨‹å®‰å…¨çš„è®¤è¯† è°ˆè°ˆå¯¹å¤šè¿›ç¨‹å¼€å‘çš„ç†è§£ä»¥åŠå¤šè¿›ç¨‹åº”ç”¨åœºæ™¯ ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ frameworkå±‚ã€ROMå®šåˆ¶ã€Ubuntuã€Linuxä¹‹ç±»çš„é—®é¢˜ javaè™šæ‹Ÿæœºçš„ç‰¹æ€§ è°ˆè°ˆå¯¹jvmçš„ç†è§£ JVMå†…å­˜åŒºåŸŸï¼Œå¼€çº¿ç¨‹å½±å“å“ªå—å†…å­˜ å¯¹Dalvikã€ARTè™šæ‹Ÿæœºæœ‰ä»€ä¹ˆäº†è§£ï¼Ÿ Artå’ŒDalvikå¯¹æ¯” è™šæ‹ŸæœºåŽŸç†ï¼Œå¦‚ä½•è‡ªå·±è®¾è®¡ä¸€ä¸ªè™šæ‹Ÿæœº(å†…å­˜ç®¡ç†ï¼Œç±»åŠ è½½ï¼ŒåŒäº²å§”æ´¾) è°ˆè°ˆä½ å¯¹åŒäº²å§”æ´¾æ¨¡åž‹ç†è§£ JVMå†…å­˜æ¨¡åž‹ï¼Œå†…å­˜åŒºåŸŸ ç±»åŠ è½½æœºåˆ¶ è°ˆè°ˆå¯¹ClassLoader(ç±»åŠ è½½å™¨)çš„ç†è§£ è°ˆè°ˆå¯¹åŠ¨æ€åŠ è½½ï¼ˆOSGIï¼‰çš„ç†è§£ å†…å­˜å¯¹è±¡çš„å¾ªçŽ¯å¼•ç”¨åŠé¿å… å†…å­˜å›žæ”¶æœºåˆ¶ã€GCå›žæ”¶ç­–ç•¥ã€GCåŽŸç†æ—¶æœºä»¥åŠGCå¯¹è±¡ åžƒåœ¾å›žæ”¶æœºåˆ¶ä¸Žè°ƒç”¨System.gc()åŒºåˆ« ç³»ç»Ÿå¯åŠ¨æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæç¤ºï¼šZygoteè¿›ç¨‹ â€“&gt; SystemServerè¿›ç¨‹ â€“&gt; å„ç§ç³»ç»ŸæœåŠ¡ â€“&gt; åº”ç”¨è¿›ç¨‹ï¼‰ å¤§ä½“è¯´æ¸…ä¸€ä¸ªåº”ç”¨ç¨‹åºå®‰è£…åˆ°æ‰‹æœºä¸Šæ—¶å‘ç”Ÿäº†ä»€ä¹ˆ ç®€è¿°Activityå¯åŠ¨å…¨éƒ¨è¿‡ç¨‹ Appå¯åŠ¨æµç¨‹ï¼Œä»Žç‚¹å‡»æ¡Œé¢å¼€å§‹ Androidä¸­è¿›ç¨‹å†…å­˜çš„åˆ†é…ï¼Œèƒ½ä¸èƒ½è‡ªå·±åˆ†é…å®šé¢å†…å­˜ï¼Ÿ å¦‚ä½•ä¿è¯ä¸€ä¸ªåŽå°æœåŠ¡ä¸è¢«æ€æ­»ï¼Ÿï¼ˆç›¸åŒé—®é¢˜ï¼šå¦‚ä½•ä¿è¯serviceåœ¨åŽå°ä¸è¢«killï¼Ÿï¼‰æ¯”è¾ƒçœç”µçš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ Appä¸­å”¤é†’å…¶ä»–è¿›ç¨‹çš„å®žçŽ°æ–¹å¼ â€‹ https://www.jianshu.com/p/c3965e82b164 â€‹ https://www.cnblogs.com/deman/p/5860976.html#_label29 AMSæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼Ÿ AMSåœ¨Androidèµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ AMSæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿæˆ‘ä»¬æ˜¯å¦‚ä½•åº”ç”¨AMSæ ¸å¿ƒåŽŸç†çš„ï¼Ÿ WMSçš„å·¥ä½œåŽŸç†è¯´è¯´ï¼Ÿ JVMçš„æ ¸å¿ƒåŽŸç†ä½ æ‡‚å¤šå°‘ï¼Ÿ æˆ‘ä»¬çš„ä»£ç æ˜¯å¦‚ä½•åœ¨æ ˆåŒºä¸­è¿è¡Œçš„ï¼Ÿ **å¦‚ä½•ä½¿ç”¨å­—èŠ‚ç ç ”ç©¶ç³»ç»Ÿçº§åŽŸç†ï¼Ÿ å¤§ä½¬é¢è¯•ç»éªŒ https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Android/","categories":[{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"}],"tags":[],"author":"Jon"},{"title":"GIT","slug":"git","date":"2024-05-21T09:30:32.000Z","updated":"2025-04-02T13:46:52.078Z","comments":true,"path":"/2024/05/21/git/","link":"","permalink":"https://noteforme.github.io/2024/05/21/git/","excerpt":"","text":"å®˜æ–¹æ–‡æ¡£https://git-scm.com/book/en/v2http://iissnan.com/progit/ GitåŸºæœ¬æ“ä½œgithubä¸Šä¼ é¡¹ç›® åˆ†æ”¯åˆ›å»º 123git branch Dev1.10 git push origin Dev1.10 // æäº¤è¯¥åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“git pull origin dev //ä»Žè¿œç¨‹èŽ·å–åˆ†æ”¯ ä¸‹é¢æ˜¯å¯¹å·²æœ‰é¡¹ç›®çš„æäº¤ 12git remote add origin git@gitee.com:huaiyi/EffectiveJava.gitgit push -u origin master åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“$ git push origin v1.0.0 commit Gitæ’¤é”€git commit ä½†æ˜¯æœªgit pushçš„ä¿®æ”¹ æ‰¾åˆ°ä¸Šæ¬¡git commitçš„ id git log æ‰¾åˆ°ä½ æƒ³æ’¤é”€çš„commit_id git reset â€“hard commit_id å®Œæˆæ’¤é”€,åŒæ—¶å°†ä»£ç æ¢å¤åˆ°å‰ä¸€commit_id å¯¹åº”çš„ç‰ˆæœ¬ã€‚ git reset commit_id å®ŒæˆCommitå‘½ä»¤çš„æ’¤é”€ï¼Œä½†æ˜¯ä¸å¯¹ä»£ç ä¿®æ”¹è¿›è¡Œæ’¤é”€ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡git commit é‡æ–°æäº¤å¯¹æœ¬åœ°ä»£ç çš„ä¿®æ”¹ã€‚ gitåˆ†æ”¯ç®€ä»‹http://blog.csdn.net/hyr83960944/article/details/36185231 åˆå¹¶åˆ†æ”¯åˆå¹¶hotfixåˆ°dev 12$ git checkout // å…ˆåˆ‡æ¢åˆ°dev $ git merge hotfix åˆå¹¶åˆ†æ”¯ è¿œç¨‹åˆ†æ”¯èŽ·å–æœ¬åœ°æ²¡æœ‰çš„è¿œç¨‹åˆ†æ”¯1git branch -r #æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ æˆ– git branch -a #æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ ä¼šæ˜¾ç¤º 123origin/HEAD -&gt; origin/masterorigin/daily/1.2.2origin/master ç„¶åŽç›´æŽ¥ 1git checkout -b &lt;local-branch-name&gt; origin/&lt;remote-branch-name&gt; æ˜¾ç¤ºè¿œç¨‹ä»“åº“ $ git remote show origin 1. æœ¬åœ°åˆ†æ”¯é‡å‘½å(è¿˜æ²¡æœ‰æŽ¨é€åˆ°è¿œç¨‹) 1git branch -m oldName newName 2. è¿œç¨‹åˆ†æ”¯é‡å‘½å (å·²ç»æŽ¨é€è¿œç¨‹-å‡è®¾æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹å¯¹åº”åˆ†æ”¯åç§°ç›¸åŒ) a. é‡å‘½åè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ 1git branch -m oldName newName c. åˆ é™¤æœ¬åœ°åˆ†æ”¯ ` git branch -d v1.0.0 ` åˆ é™¤è¿œç¨‹åˆ†æ”¯1git push --delete origin oldName è¿œç¨‹ä»“åº“æ›´æ–°åˆ°æœ¬åœ°12$ git fetch origin$ git merge origin/hexo æˆ–è€…åˆå¹¶ 1$ git pull origin hexo http://www.ruanyifeng.com/blog/2014/06/git_remote.html ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€ githubåˆ›å»º Newé¡¹ç›®ï¼Œé¡¹ç›®åœ°å€æ˜¯ &#103;&#105;&#116;&#64;&#x67;&#x69;&#116;&#x68;&#117;&#98;&#46;&#99;&#111;&#x6d;:BlogForMe&#x2F;News.git ä¿®æ”¹è¿œç¨‹æœåŠ¡å™¨åœ°å€ ï¼šgit remote set-url origin git@github.com:BlogForMe/News.git æŽ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨ : git push origin http://jcpplus.github.io/2015/07/23/modify-remote-url/ forkåŽçš„é¡¹ç›®å¤„ç†get forkåŽåˆ†æ”¯çš„tag123456789git remote add upstream git@github.com:square/okhttp.gitgit fetch upstream --tags//Verify that the tags are fetched:git tag//will show [new tag] parent-4.9.0 -&gt; parent-4.9.0git push origin --tagsgit checkout tags/parent-4.12.0 https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/ https://blog.csdn.net/sdujava2011/article/details/138312278 merge the src directoryAssume you want to merge the android-test-app directory from master into parent-4.12.0-study. 12345678okhttp_dump % git branch main master* parent-4.12.0-studyokhttp_dump % git checkout parent-4.12.0-studyokhttp_dump % git checkout master android-test-appokhttp_dump % git add android-test-appokhttp_dump % git commit -m &quot;Merged src directory from feature-branch&quot; å¿½ç•¥æ–‡ä»¶å·²æäº¤çš„æ–‡ä»¶ å¯¹äºŽå•ä¸ªæ–‡ä»¶å¤„ç† å‡å¦‚è¦å¿½ç•¥ .idea&#x2F;misc.xmlæ–‡ä»¶ï¼Œ.gitignoreå¯ä»¥æ·»åŠ  /.idea/* æŠŠ.ideaæ–‡ä»¶è¿‡æ»¤ ä¸»è¦æ˜¯ git rm --cached .idea/misc.xml ç„¶åŽæäº¤ä¿®æ”¹,æ¯æ¬¡æ‰‹è¾“å…¥æ‰æœ‰ç”¨? å¯¹æ–‡ä»¶å¤¹çš„å¤„ç†,æ¯”å¦‚common-bankcard 12git rm -r --cached common-bankcardgit rm --cached *idea/* ä¿®å¤å·²å‘å¸ƒç‰ˆæœ¬bugä¿®å¤bugä¸»è¦ä»¥ä¸‹å‡ æ­¥: ä½¿ç”¨git reset â€“hard å‘½ä»¤é€€å›žåˆ°å‘å¸ƒæ ‡ç­¾å¯¹åº”çš„ç‰ˆæœ¬ ä½¿ç”¨git checkout -b BugFixæ–°å»ºä¸€ä¸ªBugFixçš„åˆ†æ”¯ï¼ŒåŽŸåˆ†æ”¯å‰è¿›åˆ°æœ€æ–°æäº¤ç‰ˆæœ¬ ä½¿ç”¨git checkout BugFixåˆ‡æ¢åˆ°BugFixåˆ†æ”¯ï¼Œä¿®æ”¹bugï¼Œé‡æ–°å‘å¸ƒå¹¶ä½¿ç”¨git tagæ‰“æ ‡ç­¾ git reaset â€“hard åˆ‡æ¢ä¸»å¹²æœ€æ–°çš„åˆ†æ”¯ ä½¿ç”¨git mergeåˆå¹¶BugFixåˆ†æ”¯åˆ°ä¸»åˆ†æ”¯ å‚è€ƒ:https://blog.masterliu.net/git-retag/ æ ‡ç­¾æ˜¯ä¸€ä¸ªæ–‡ä»¶å¿«ç…§ï¼Œå¹¶ä¸æ˜¯çœŸæ‹‰å‡ºä¸€ä»½ä»£ç æ”¾åœ¨äº†é‚£é‡Œ 12D:\\Project\\ASProjects\\cqianjia&gt;git tagv1.0.2 å‚è€ƒ: http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/ è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åœ¨æœ€æ–°æäº¤ç‰ˆæœ¬ä¿®å¤bug git stash https://www.jianshu.com/p/54b8ea4317cc https://qiita.com/hudichao/items/d665cd769ed1d2ce832a Gitä»“åº“è¿ç§» è¿ç§»gitä»“åº“ åŽŸæ¥æ‰˜ç®¡äºŽgithub,cloneä¸€ä»½è£¸ç‰ˆæœ¬åº“ git clone --bare git@gitee.com:huaiyi/CQJ.git åœ¨æ–°çš„ç‰ˆæœ¬åº“(gitlab)é‡Œé¢åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œä¾‹å¦‚ cqianjia æŽ¨é€åˆšæ‰cloneçš„é•œåƒåˆ°gitlabæœåŠ¡å™¨ 12cd CQJ.git/git push --mirror git@45.77.22.97:root/cqianjia.git mirror å…‹éš†å‡ºæ¥çš„è£¸ç‰ˆæœ¬å¯¹ä¸Šæ¸¸ç‰ˆæœ¬åº“è¿›è¡Œäº†æ³¨å†Œï¼Œè¿™æ ·å¯ä»¥åœ¨è£¸ç‰ˆæœ¬åº“ä¸­ä½¿ç”¨git fetchå‘½ä»¤å’Œä¸Šæ¸¸ç‰ˆæœ¬åº“è¿›è¡ŒæŒç»­åŒæ­¥ åˆ é™¤æœ¬åœ°ä»£ç  12cd ..rm -rf project.git åˆ°æ–°çš„æœåŠ¡å™¨cloneåˆ°æœ¬åœ°å°±Okäº† git clone git@45.77.22.97:root/cqianjia.git å‚è€ƒ: https://my.oschina.net/kind790/blog/510601 git clone æ‰€æœ‰åˆ†æ”¯ è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œåˆ‡æ¢åˆ†æ”¯åŽ å·¥ç¨‹åæ²¡äº†ï¼Œ è¿˜æ˜¯æ…¢æ…¢æ‘¸ç´¢å§ ! 123git branch -r | grep -v &#x27;\\-&gt;&#x27; | while read remote; do git branch --track &quot;$&#123;remote#origin/&#125;&quot; &quot;$remote&quot;; donegit fetch --allgit pull --all å‚è€ƒ: http://blog.csdn.net/allangold/article/details/78028709 GITæ ‡ç­¾ æŸ¥çœ‹æ‰€æœ‰çš„ç‰ˆæœ¬â€‹ git tag æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git ls-remote --tags åˆ›å»ºæ ‡ç­¾ git tag -a v1.0.2 -m &quot;my version 1.0.2&quot; -m é€‰é¡¹æŒ‡å®šäº†ä¸€æ¡å°†ä¼šå­˜å‚¨åœ¨æ ‡ç­¾ä¸­çš„ä¿¡æ¯ åˆ›å»ºTag 123git tag -a v1.0.0 -m &quot;my version 1.0.0&quot;git push origin v1.0.0 //æŽ¨é€åˆ°è¿œç¨‹åˆ†æ”¯git push origin --tags //æŽ¨é€æ‰€æœ‰çš„æ ‡ç­¾ åˆ é™¤tag 123456 git tag -d &lt;tagname&gt; git push origin :refs/tags/&lt;tagname&gt;ä¾‹å¦‚ git push origin :refs/tags/v1.0.2 git tag -d v1.0.2 æ£€å‡ºæ ‡ç­¾ æ£€å‡ºæ ‡ç­¾ Checkout Git Tagshttps://devconnected.com/how-to-checkout-git-tags/ 1234git fetch --all --tagsgit checkout tags/v1.0 -b v1.0-branch //git checkout tags/v2.1.1 -b v2.1.1-branch v1.0ä»£è¡¨tagåç§°git log --oneline --graph //You can inspect the state of your branch by using the â€œgit logâ€ command. Make sure that the HEAD pointer (the latest commit) is pointing to your annotated tag. checkout remote tag12345678git fetch --all --tagsgit ls-remote --tags refs/tags/v2.5.9 refs/tags/v2.5.9^&#123;&#125;git checkout refs/tags/v2.5.9 -b v2.5.9-branch //-b åŽé¢æ˜¯è‡ªå®šä¹‰çš„åˆ†æ”¯åç§° è¿™ä¸ªè‡ªå®šä¹‰ åœ¨ Git ä¸­ä½ å¹¶ä¸èƒ½çœŸçš„æ£€å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸èƒ½åƒåˆ†æ”¯ä¸€æ ·æ¥å›žç§»åŠ¨ã€‚ å¦‚æžœä½ æƒ³è¦å·¥ä½œç›®å½•ä¸Žä»“åº“ä¸­ç‰¹å®šçš„æ ‡ç­¾ç‰ˆæœ¬å®Œå…¨ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ git checkout -b [branchname] [tagname] åœ¨ç‰¹å®šçš„æ ‡ç­¾ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼š $ git checkout -b version2 v2.0.0 Switched to a new branch â€˜version2â€™ å½“ç„¶ï¼Œå¦‚æžœåœ¨è¿™ä¹‹åŽåˆè¿›è¡Œäº†ä¸€æ¬¡æäº¤ï¼Œversion2 åˆ†æ”¯ä¼šå› ä¸ºæ”¹åŠ¨å‘å‰ç§»åŠ¨äº†ï¼Œé‚£ä¹ˆ version2 åˆ†æ”¯å°±ä¼šå’Œ v2.0.0 æ ‡ç­¾ç¨å¾®æœ‰äº›ä¸åŒï¼Œè¿™æ—¶å°±åº”è¯¥å½“å¿ƒäº†ã€‚ ä¿®å¤å·²å‘å¸ƒç‰ˆæœ¬\bBughttp://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/ git stashç»å¸¸æœ‰è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œå½“ä½ æ­£åœ¨è¿›è¡Œé¡¹ç›®ä¸­æŸä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œé‡Œé¢çš„ä¸œè¥¿å¤„äºŽä¸€ä¸ªæ¯”è¾ƒæ‚ä¹±çš„çŠ¶æ€ï¼Œè€Œä½ æƒ³è½¬åˆ°å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å·¥ä½œã€‚é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³æäº¤è¿›è¡Œäº†ä¸€åŠçš„å·¥ä½œï¼Œå¦åˆ™ä»¥åŽä½ æ— æ³•å›žåˆ°è¿™ä¸ªå·¥ä½œç‚¹ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠžæ³•å°±æ˜¯git stashå‘½ä»¤ã€‚ git stash save &#39;æš‚å­˜å¤‡æ³¨ä¿¡æ¯&#39; &#x2F;&#x2F;è¿›å…¥æš‚å­˜çŠ¶æ€,æ­¤æ—¶æ‰§è¡Œ git status å·²ç»æ²¡æœ‰è¦æäº¤çš„äº† git checkout åˆ‡æ¢åˆ°è¦ä¿®æ”¹çš„åˆ†æ”¯ä¸Š ,ä¿®æ”¹å®Œ å®ŒæˆåŽå›žåˆ°åŽŸæ¥çš„å¼€å‘åˆ†æ”¯ä¸Šï¼Œgit stash apply èŽ·å–æœ€è¿‘æš‚å­˜å†…å®¹ git stash drop stash@&#123;1&#125; apply é€‰é¡¹åªå°è¯•åº”ç”¨å‚¨è—çš„å·¥ä½œâ€”â€”å‚¨è—çš„å†…å®¹ä»ç„¶åœ¨æ ˆä¸Šã€‚è¦ç§»é™¤å®ƒï¼Œä½ å¯ä»¥è¿è¡Œ git stash dropï¼ŒåŠ ä¸Šä½ å¸Œæœ›ç§»é™¤çš„å‚¨è—çš„åå­—ï¼š git stash å¯ä»¥è¿›è¡Œå¤šæ¬¡æš‚å­˜,å¤šæ¬¡å­˜åŽ git stash listé•¿ä¸‹é¢è¿™æ ·,å¯ä»¥ç”¨ Â· git stash apply stash@{1}Â· èŽ·å–æŸæ¬¡æš‚å­˜çš„å†…å®¹ stash@{0}: WIP on dev: 3d01a6c Patient Entityæ•°æ®åº“åˆ é™¤stash@{1}: WIP on dev: b6a688e è·‘èµ·æ¥æäº¤ å–æ¶ˆå‚¨è— git stash show -p stash@&#123;0&#125; | git apply -R å¦‚æžœæ²¡æŒ‡å®šå…·ä½“çš„æ ‡ç­¾ å–æ¶ˆæœ€è¿‘çš„ è¿™ä¸ªå’Œgit stash dropçš„åŒºåˆ«æ˜¯ å–æ¶ˆçš„æ˜¯æ–‡ä»¶å†…å®¹ï¼Œstashæ ‡ç­¾è¿˜åœ¨ https://git-scm.com/docs/git-stash æ³¨æ„æ˜¯ stash@{0} ä¸æ˜¯ 3d01a6c git branch åˆ†æ”¯å hash(åŽ†å²ç‰ˆæœ¬) update forked project https://blog.csdn.net/qq1332479771/article/details/56087333 èŽ·å–æš‚å­˜ git stash apply stash@{0} &#x2F;&#x2F; donâ€˜t remove stash git stash pop stash@{0} SVN SVNä¸èƒ½æ·»åŠ æ–‡ä»¶:https://blog.csdn.net/yujiayinshi/article/details/51381942 githubæé€Ÿwww.github.com æ›¿æ¢ä¸º www.github.com.cnpmjs.org https://github.com/flutter/flutter.git git clone https://github.com.cnpmjs.org/love-flutter/flutter-column.git git pull git fetchåŒºåˆ«git fetchæ›´æ–°æœ¬åœ°ä»“åº“çš„ä¸¤ç§ç”¨æ³•ï¼š 1234# æ–¹æ³•ä¸€$ git fetch origin master #ä»Žè¿œç¨‹çš„originä»“åº“çš„masteråˆ†æ”¯ä¸‹è½½ä»£ç åˆ°æœ¬åœ°çš„origin maste$ git log -p master.. origin/master #æ¯”è¾ƒæœ¬åœ°çš„ä»“åº“å’Œè¿œç¨‹å‚è€ƒçš„åŒºåˆ«$ git merge origin/master #æŠŠè¿œç¨‹ä¸‹è½½ä¸‹æ¥çš„ä»£ç åˆå¹¶åˆ°æœ¬åœ°ä»“åº“ï¼Œè¿œç¨‹çš„å’Œæœ¬åœ°çš„åˆå¹¶ 12345# æ–¹æ³•äºŒ$ git fetch origin master:temp #ä»Žè¿œç¨‹çš„originä»“åº“çš„masteråˆ†æ”¯ä¸‹è½½åˆ°æœ¬åœ°å¹¶æ–°å»ºä¸€ä¸ªåˆ†æ”¯temp$ git diff temp #æ¯”è¾ƒmasteråˆ†æ”¯å’Œtempåˆ†æ”¯çš„ä¸åŒ$ git merge temp #åˆå¹¶tempåˆ†æ”¯åˆ°masteråˆ†æ”¯$ git branch -d temp #åˆ é™¤temp è¿™æ ·ç†è§£ pull &#x3D; fetch + merge https://segmentfault.com/a/1190000017030384 https://www.jianshu.com/p/d265f7763a3a https://blog.csdn.net/riddle1981/article/details/74938111 https://www.cpweb.top/455 master revert ä»Šå¤©å°†ä¸€æ®µä»£ç åˆå…¥äº†masterï¼Œä¸Šçº¿çš„æ—¶å€™æœ‰é—®é¢˜ï¼Œè€Œä¸èƒ½å¾ˆå¿«è§£å†³æŽ‰ï¼Œä¸ºäº†ä¸å½±å“å…¶ä»–åŒäº‹åˆå…¥masteræˆ–å°†æœ‰é—®é¢˜çš„commitå¸¦ä¸Šçº¿ï¼Œå› æ­¤æˆ‘å°†æˆ‘çš„commit revertæŽ‰äº†ã€‚ åŒæ—¶ï¼Œå½“å¤©æ™šä¸Šçš„æ—¶å€™æœ‰åŒäº‹åˆšå¥½é—®æˆ‘git revertåŽè‡ªå·±ä»£ç æ¶ˆå¤±çš„é—®é¢˜ï¼Œå½“æ—¶æ€è€ƒä¸æ¸…æ™°ï¼Œä¹Ÿæ¯”è¾ƒå°‘ç”¨revertï¼Œå› æ­¤çŽ°åœ¨æ¥å¤ç›˜ä¸‹ã€‚ commitæäº¤æµç¨‹ç¤ºæ„å›¾å¦‚ä¸‹ï¼š å…¶ä¸­Aæ˜¯æœ‰é—®é¢˜çš„commitï¼ŒRæ˜¯revertçš„commitï¼ŒMæ˜¯masterï¼Œåºå·Nä»£è¡¨masterçš„æµå‘, ä»Žmaster checkoutåˆ†æ”¯ F-A ,æäº¤äº†TestAæ–‡ä»¶ ä»Žmaster checkoutåˆ†æ”¯ UP-R,æäº¤äº†TESTB, TestR åˆ†åˆ«å§F-A , UP-Råˆ†æ”¯åˆå¹¶åˆ°master. æ­¤æ—¶è§‰å¾—F-Aä»£ç æœ‰é—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹ï¼Œmasterå¯¹F-Aè¿›è¡Œrevert ,æ­¤æ—¶ masterçš„F-A åˆ†æ”¯TesAè¢«åˆ é™¤äº†,å¹¶ä¸”æœ‰ä¸€æ¡æäº¤è®°å½• ä»Žmaster checkoutå¾—åˆ°åˆ†æ”¯verify-b,ç„¶åŽå°†ä¹‹å‰éœ€è¦ä¼šé€€çš„æäº¤ , å†è¿›è¡Œ git revert commit,ç„¶åŽpush (è¿™ä¸ªæ–¹å¼æ²¡æƒ³æ˜Žç™½) æŠŠmasteråˆå¹¶åˆ°verify-bå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜. https://blog.csdn.net/oYiMiYangGuang123/article/details/99437382 ä¸Šé¢çš„æ­¥éª¤è¿˜æ˜¯æ²¡æƒ³æ˜Žç™½. ä¸»è¦ git resetä¸èƒ½è§£å†³ï¼Œæœ‰é—®é¢˜.é™¤éžå¼ºåˆ¶pushã€‚ åˆ é™¤ä¸€æ¡åŽ†å²è®°å½•git revert çºªå½• Git force push git rebase -i 7158b278b8f47f9b46f9af2207996bce783c0b57 è¿™ç¯‡blogä»‹ç»çš„ï¼Œä½†æ˜¯æ²¡èµ·ä½œç”¨ã€‚ https://linuxhint.com/remove-commit-from-history-git/ æŸ¥çœ‹æ—¥å¿— git log â€“author zh â€“since&#x3D;2022-12-10 git sshåŽŸç†http://skypegnu1.blog.51cto.com/8991766/1641064 å¤šå¹³å°é…ç½®SSHæ­£å¸¸æƒ…å†µä¼šå“Ÿå‡ ä¸ªå¹³å°çš„é…ç½®æƒ…å†µ,sshæ“ä½œæ–¹å¼ ç”¨æˆ·ä¿¡æ¯è®¾ç½®åœ¨configåŽåŠ ä¸Š â€“global å³å¯å…¨å±€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¦åˆ™å°±æ˜¯å±€éƒ¨çš„ã€‚æœ‰æ—¶å€™ç”¨æ‰‹è¾“å…¥æ‰æœ‰ç”¨ $ git config â€“global user.name â€œJohn Doeâ€ $ git config â€“global user.email &#106;&#111;&#104;&#x6e;&#100;&#111;&#x65;&#x40;&#101;&#120;&#97;&#x6d;&#112;&#108;&#x65;&#46;&#99;&#x6f;&#109; æ£€æŸ¥é…ç½®ä¿¡æ¯ git config --list ç”Ÿæˆsshkeyå¦‚æžœè§†å…¶ä»–å¹³å°ç”Ÿæˆæ—¶å°±è¦ä¿®æ”¹åç§°äº† ssh-keygen -t rsa -b 4096 -C â€œ&#121;&#x6f;&#117;&#x72;&#x5f;&#101;&#x6d;&#97;&#x69;&#x6c;&#x40;&#x65;&#x78;&#x61;&#x6d;&#x70;&#108;&#101;&#46;&#x63;&#111;&#109;â€œEnter file in which to save the key (&#x2F;home&#x2F;jon&#x2F;.ssh&#x2F;id_rsa): &#x2F;home&#x2F;jon&#x2F;.ssh&#x2F;id_rsa.Oschinacat ~&#x2F;.ssh&#x2F;id_rsa.li | clip Adding your SSH key to the ssh-agent start the ssh-agent in the background $ eval $(ssh-agent -s) Agent pid 59566 $ ssh-add ~/.ssh/id_rsa.li gitbashä¸‹æŠŠç”Ÿæˆçš„id_rsa.pub æ·»åŠ åˆ°sshkey oschina æµ‹è¯•è¿žæŽ¥ï¼š$ ssh -T git@git.oschina.net github æµ‹è¯•è¿žæŽ¥: $ ssh -T git@github.comå¦‚æžœå‡ºçŽ°: Hi username! Youâ€™ve successfully authenticated, but GitHub does not provide shell access. é…ç½®æˆåŠŸ ä¸åŒå¹³å° ä¸åŒçš„rsa.key æˆ‘å‰é¢çš„keyé‡æ–°å‘½åï¼Œcloneé¡¹ç›®è¿˜æ˜¯æœ‰é—®é¢˜ è§£å†³æ–¹æ³•: åœ¨ .sshç›®å½•ä¸‹ æ–°å»ºconfigæ–‡ä»¶ æ·»åŠ  Host github HostName github.com User Jon IdentityFile ~&#x2F;.ssh&#x2F;id_rsa.li ä¸åŒçš„å¹³å°ï¼Œç›¸åŒçš„rsa.key (æŽ¨è)å¤åˆ¶id_rsa.pubå¡«å…¥ clip &lt; ~&#x2F;.ssh&#x2F;id_rsa.pub å‚è€ƒï¼šgithubç”Ÿæˆæ–¹å¼https://help.github.com/articles/about-ssh/ gitlabç”Ÿæˆæ–¹å¼https://gitlab.com/help/ssh/README oschinaæ–¹å¼:http://git.mydoc.io/?t=154712 gogs:å‚è€ƒgithub,é…ç½®sskeyåŽè¿˜éœ€è¦ç”¨è´¦å·ç™»é™† é—®é¢˜ ç±»ä¼¼ä¸‹é¢é”™è¯¯ä½¿ç”¨ git push -u origin master git push -f origin master ! [rejected] master -&gt; master (fetch first)error: failed to push some refs to â€˜https://github.com/aniruddhabarapatre/learn-rails.gitâ€˜hint: Updates were rejected because the remote contains work that you dohint: not have locally. This is usually caused by another repository pushing å‚è€ƒï¼šhttps://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github ç”Ÿæˆkeyæ—¶ï¼Œæˆ‘æ”¹æˆäº† id_rsaOschinaandroid studio æœ€åŽpush æ—¶authentication id_rsaOschina using key failedæŠ¥é”™æ–¹æ³•: AndroidStudio -&gt; File -&gt; Settings -&gt;Git -&gt; SSH executable : built-in æ”¹æˆNative å‚è€ƒ:https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository GitHub CLI é…ç½® åœ¨windowså¹³å° git auth login æŽˆæƒ è¦ç”¨windowså‘½ä»¤è¡Œå·¥å…·ã€‚ Macä½¿ç”¨sshå¯†é’¥ç™»å½•Linux - ç®€ä¹¦ push issue big file 1git config --global http.postBuffer 524288000","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[],"author":"Jon"},{"title":"LIFE-Equipment ear","slug":"LIFE-equipment","date":"2024-05-20T01:57:34.000Z","updated":"2024-09-15T12:50:56.408Z","comments":true,"path":"/2024/05/20/equipment/","link":"","permalink":"https://noteforme.github.io/2024/05/20/equipment/","excerpt":"","text":"domain","categories":[{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/categories/LIFE/"}],"tags":[],"author":"Jon"},{"title":"https_ca","slug":"https_ca","date":"2024-05-15T07:08:40.000Z","updated":"2025-04-02T13:46:52.078Z","comments":true,"path":"2024/05/15/https_ca/","link":"","permalink":"https://noteforme.github.io/2024/05/15/https_ca/","excerpt":"","text":"TLSSSL Server Test (Powered by Qualys SSL Labs) https://gist.github.com/Karewan/4b0270755e7053b471fdca4419467216 Check CA1openssl x509 -in ca.crt -text -noout https://www.youtube.com/watch?v=JA0vaIb4158&amp;t=876s https://www.youtube.com/watch?v=AlE5X1NlHgg https://www.youtube.com/watch?v=j9QmMEWmcfo Posthttps://jsonplaceholder.typicode.com/posts request 12345:method: POST:path: /posts:authority: jsonplaceholder.typicode.com:scheme: httpscontent-type: application/x-www-form-urlencodedcontent-length: 42accept-encoding: gzipuser-agent: okhttp/5.0.0-SNAPSHOT response 1234567891011121314151617:status: 201date: Wed, 17 Apr 2024 06:45:30 GMTcontent-type: application/json; charset=utf-8content-length: 82location: https://jsonplaceholder.typicode.com/posts/101report-to: &#123;&quot;group&quot;:&quot;heroku-nel&quot;,&quot;max_age&quot;:3600,&quot;endpoints&quot;:[&#123;&quot;url&quot;:&quot;https://nel.heroku.com/reports?ts=1713336330&amp;sid=e11707d5-02a7-43ef-b45e-2cf4d2036f7d&amp;s=Hua%2F7slOIpUhGTDPNaKu4xbP%2Bjuwplp9ehOh7C014ok%3D&quot;&#125;]&#125;reporting-endpoints: heroku-nel=https://nel.heroku.com/reports?ts=1713336330&amp;sid=e11707d5-02a7-43ef-b45e-2cf4d2036f7d&amp;s=Hua%2F7slOIpUhGTDPNaKu4xbP%2Bjuwplp9ehOh7C014ok%3Dnel: &#123;&quot;report_to&quot;:&quot;heroku-nel&quot;,&quot;max_age&quot;:3600,&quot;success_fraction&quot;:0.005,&quot;failure_fraction&quot;:0.05,&quot;response_headers&quot;:[&quot;Via&quot;]&#125;x-powered-by: Expressx-ratelimit-limit: 1000x-ratelimit-remaining: 999x-ratelimit-reset: 1713336348vary: Origin, X-HTTP-Method-Override, Accept-Encodingaccess-control-allow-credentials: truecache-control: no-cachepragma: no-cacheexpires: -1access-control-expose-headers: Locationx-content-type-options: nosniffetag: W/&quot;52-HKy3Gu5DcI5r2jj3f8TQwnYvlDs&quot;via: 1.1 vegurcf-cache-status: DYNAMICserver: cloudflarecf-ray: 875a73ddee780484-HKGalt-svc: h3=&quot;:443&quot;; ma=86400 GEThttps://api.github.com/repos/square/okhttp/contributors Request 1234:method: GET:path: /repos/square/okhttp/contributors:authority: api.github.com:scheme: httpsaccept-encoding: gzipuser-agent: okhttp/5.0.0-SNAPSHOT Response 12345678910111213141516:status: 200server: GitHub.comdate: Wed, 17 Apr 2024 06:58:41 GMTcontent-type: application/json; charset=utf-8cache-control: public, max-age=60, s-maxage=60vary: Accept, Accept-Encoding, Accept, X-Requested-Withetag: W/&quot;699b092aa0b0980f1b2f2bde5e810a75c5c1921ee2f53c4d9f28fc8ea5fca327&quot;last-modified: Wed, 17 Apr 2024 02:18:24 GMTx-github-media-type: github.v3; format=jsonlink: &lt;https://api.github.com/repositories/5152285/contributors?page=2&gt;; rel=&quot;next&quot;, &lt;https://api.github.com/repositories/5152285/contributors?page=9&gt;; rel=&quot;last&quot;x-github-api-version-selected: 2022-11-28access-control-expose-headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunsetaccess-control-allow-origin: *strict-transport-security: max-age=31536000; includeSubdomains; preloadx-frame-options: denyx-content-type-options: nosniffx-xss-protection: 0referrer-policy: origin-when-cross-origin, strict-origin-when-cross-origincontent-security-policy: default-src &#x27;none&#x27;content-encoding: gzipx-ratelimit-limit: 60x-ratelimit-remaining: 55x-ratelimit-reset: 1713337679x-ratelimit-resource: corex-ratelimit-used: 5accept-ranges: bytesx-github-request-id: 200C:21C6BE:267A047:2720F58:661F7320 Key Points Deprecation of TLS 1.0 and 1.1:Android 10 disables TLS 1.0 and TLS 1.1 by default due to known vulnerabilities in these older protocols. Enhanced Security:By requiring TLS 1.2 or newer, Android 10 and later versions improve the security of network communications. Developer Implications:Apps that rely on legacy servers supporting only TLS 1.0 or TLS 1.1 may encounter connection issues on devices running Android 10 or higher. Developers are encouraged to update their server configurations and client code to support TLS 1.2 or TLS 1.3. Industry Alignment:This move is in line with broader industry trends, where many platforms and browsers have also phased out support for TLS 1.0 and 1.1. If youâ€™re maintaining an app or server infrastructure, itâ€™s important to verify that your connections support TLS 1.2 or higher to ensure compatibility with Android 10+ devices. Selfâ€‘Signed CAStep 1. Create a Selfâ€‘Signed CA with SANs1.1 Create an OpenSSL Configuration File for the CA (ca.cnf)Create a file named ca.cnf with the following content. This file tells OpenSSL to include SANs in the CA certificate and sets the proper CA extensions. ini Copy 1234567891011121314151617181920212223242526[ req ]default_bits = 4096prompt = nodefault_md = sha256distinguished_name = dnx509_extensions = v3_ca[ dn ]C = USST = StateL = CityO = MyOrgOU = MyUnitCN = MyLocalCA[ v3_ca ]# Add Subject Alternative Names to the CA certificatesubjectAltName = @alt_names# Indicate this certificate is a CAbasicConstraints = critical, CA:TRUE, pathlen:0keyUsage = critical, digitalSignature, cRLSign, keyCertSignsubjectKeyIdentifier = hash[ alt_names ]DNS.1 = myca.realmjon.mynetgear.comDNS.2 = ca.realmjon.mynetgear.com 1.2 Generate the CA Key and CertificateRun these commands in your terminal: bash Copy 123456# Generate the CA private keyopenssl genrsa -out ca.key 4096# Generate the selfâ€‘signed CA certificate (valid for 10 years)openssl req -x509 -new -nodes -key ca.key -sha256 -days 3650 \\ -out ca.crt -config ca.cnf After this step, ca.crt is your CA certificate (including the SANs defined in ca.cnf). Step 2. Create a Server Certificate for â€œrealmjon.mynetgear.comâ€ with SANs2.1 Create an OpenSSL Configuration File for the Server (server.cnf)Create a file named server.cnf with the following content: ini Copy 1234567891011121314151617181920212223[ req ]default_bits = 2048prompt = nodefault_md = sha256distinguished_name = dnreq_extensions = req_ext[ dn ]C = USST = StateL = CityO = MyOrgOU = MyUnitCN = realmjon.mynetgear.com[ req_ext ]# Add Subject Alternative Names for the server certificatesubjectAltName = @alt_names[ alt_names ]DNS.1 = realmjon.mynetgear.comDNS.2 = www.realmjon.mynetgear.comDNS.3 = api.realmjon.mynetgear.com Adjust or add additional DNS (or IP) entries as needed. 2.2 Generate the Server Key and CSRRun the following commands: bash Copy 12345# Generate the server private keyopenssl genrsa -out server.key 2048# Create a Certificate Signing Request (CSR) using the config fileopenssl req -new -key server.key -out server.csr -config server.cnf 2.3 Sign the Server CSR with Your CASign the CSR with your CA certificate and key to generate the server certificate. This process will embed the SANs into the certificate. bash Copy 12openssl x509 -req -in server.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\ -out server.crt -days 3650 -sha256 -extfile server.cnf -extensions req_ext Now, server.crt is your server certificate for realmjon.mynetgear.com with the specified SANs. Step 3. Package the Server Certificate and Key into a PKCS#12 KeystoreSpring Boot can load your certificate and key from a PKCS#12 keystore. Create it with: bash Copy 12openssl pkcs12 -export -in server.crt -inkey server.key \\ -out server.p12 -name springboot -CAfile ca.crt -caname root When prompted, enter an export password (which youâ€™ll later use in your Spring Boot configuration). Step 4. Configure Spring Boot to Use the KeystorePlace server.p12 in your Spring Boot projectâ€™s src&#x2F;main&#x2F;resources directory, and update your application.properties (or YAML) file with: properties Copy 123456server.port=8443server.ssl.enabled=trueserver.ssl.key-store=classpath:server.p12server.ssl.key-store-password=your_keystore_passwordserver.ssl.key-store-type=PKCS12server.ssl.key-alias=springboot Replace your_keystore_password with the password you set during the PKCS#12 export. Step 5. Verify the Certificates with OpenSSL5.1 Verify CA Certificate SANsRun this command to print the details of your CA certificate and check its SANs: bash Copy 1openssl x509 -in ca.crt -text -noout | grep -A1 &quot;Subject Alternative Name&quot; You should see something like: ruby Copy `X509v3 Subject Alternative Name: DNS:myca.realmjon.mynetgear.com, DNS:ca.realmjon.mynetgear.com` 5.2 Verify Server Certificate SANsSimilarly, check your server certificate: 1openssl x509 -in server.crt -text -noout | grep -A1 &quot;Subject Alternative Name&quot; Expected output: `X509v3 Subject Alternative Name: DNS:realmjon.mynetgear.com, DNS:www.realmjon.mynetgear.com, DNS:api.realmjon.mynetgear.com` Step6. OkHttp Demo CodeBelow is an example Java class demonstrating how to load the CA from assets, configure the SSL context for TLSv1.3, and make an asynchronous HTTPS request using OkHttp. Make sure to execute network calls off the main thread (this example uses a separate thread): 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293import android.content.Context;import android.util.Log;import java.io.InputStream;import java.security.KeyStore;import java.security.cert.Certificate;import java.security.cert.CertificateFactory;import javax.net.ssl.SSLContext;import javax.net.ssl.TrustManager;import javax.net.ssl.TrustManagerFactory;import javax.net.ssl.X509TrustManager;import okhttp3.Call;import okhttp3.Callback;import okhttp3.OkHttpClient;import okhttp3.Request;import okhttp3.Response;import javax.net.ssl.HostnameVerifier;import javax.net.ssl.SSLSession;import java.io.IOException;public class OkHttpSelfSignedDemo &#123; public static void makeRequest(final Context context) &#123; new Thread(() -&gt; &#123; try &#123; // Load the CA certificate from the assets folder CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;); InputStream caInput = context.getAssets().open(&quot;ca.crt&quot;); Certificate ca = cf.generateCertificate(caInput); caInput.close(); // Create a KeyStore containing the trusted CA KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType()); keyStore.load(null, null); keyStore.setCertificateEntry(&quot;ca&quot;, ca); // Create a TrustManager that trusts the CA in our KeyStore TrustManagerFactory tmf = TrustManagerFactory.getInstance( TrustManagerFactory.getDefaultAlgorithm()); tmf.init(keyStore); TrustManager[] trustManagers = tmf.getTrustManagers(); X509TrustManager trustManager = null; for (TrustManager tm : trustManagers) &#123; if (tm instanceof X509TrustManager) &#123; trustManager = (X509TrustManager) tm; break; &#125; &#125; if (trustManager == null) &#123; throw new IllegalStateException(&quot;No X509TrustManager found&quot;); &#125; // Create an SSLContext for TLSv1.3 SSLContext sslContext = SSLContext.getInstance(&quot;TLSv1.3&quot;); sslContext.init(null, new TrustManager[]&#123;trustManager&#125;, null); // Build the OkHttpClient with the custom SSL settings OkHttpClient client = new OkHttpClient.Builder() .sslSocketFactory(sslContext.getSocketFactory(), trustManager) .hostnameVerifier(new HostnameVerifier() &#123; @Override public boolean verify(String hostname, SSLSession session) &#123; // Accept the specific IP address (replace with your actual server IP) return hostname.equals(&quot;192.168.1.100&quot;); &#125; &#125;) .build(); // Build and execute the HTTPS request (adjust URL, port, and path as needed) Request request = new Request.Builder() .url(&quot;https://192.168.1.100:8443/&quot;) .build(); client.newCall(request).enqueue(new Callback() &#123; @Override public void onFailure(Call call, IOException e) &#123; Log.e(&quot;OkHttpDemo&quot;, &quot;Request failed&quot;, e); &#125; @Override public void onResponse(Call call, Response response) throws IOException &#123; if (!response.isSuccessful()) &#123; throw new IOException(&quot;Unexpected code &quot; + response); &#125; String responseBody = response.body().string(); Log.d(&quot;OkHttpDemo&quot;, &quot;Response: &quot; + responseBody); &#125; &#125;); &#125; catch (Exception e) &#123; Log.e(&quot;OkHttpDemo&quot;, &quot;Error setting up HTTPS connection&quot;, e); &#125; &#125;).start(); &#125;&#125; HTTPS Springbooté…ç½®opensslç”Ÿæˆçš„è¯ä¹¦ - lovelylily - åšå®¢å›­ Springboot è¯ä¹¦é…ç½®å®žæˆ˜Springbootè¯ä¹¦é…ç½®å®žæˆ˜ åˆ›å»ºè¯ä¹¦ ç”ŸæˆCAè¯ä¹¦ ç”ŸæˆCAè¯ä¹¦ å°†CAè¯ä¹¦åŠ åˆ° - æŽ˜é‡‘ generate host â€œrealmjon.mynetgear.comâ€ self-sign CA make both server.crt ca.crt have subjectalternativenames , config in the springboot ChatGPT said:Reasoned for 17 seconds Below is a complete guide that shows you how to create a selfâ€‘signed CA and use it to sign a server certificate for the host realmjon.mynetgear.com, ensuring that both the CA certificate and the server certificate include Subject Alternative Names (SANs). Finally, youâ€™ll see how to package the server certificate into a PKCS#12 keystore for Spring Boot configuration. Summary Local CA Creation: Created a selfâ€‘signed CA certificate (ca.crt) that includes SANs (via ca.cnf). Server Certificate: Generated a CSR and signed it with the CA to produce server.crt for realmjon.mynetgear.com with SANs (via server.cnf). PKCS#12 Keystore: Combined the server certificate and key (with the CA certificate) into server.p12. Spring Boot Configuration: Configured Spring Boot to use server.p12 for HTTPS. Verification: Used OpenSSL commands to verify that both certificates contain the correct SAN entries. Following these steps ensures that both your CA and server certificates include the desired Subject Alternative Names and that your Spring Boot application is correctly configured for HTTPS.","categories":[{"name":"NETWORK","slug":"NETWORK","permalink":"https://noteforme.github.io/categories/NETWORK/"}],"tags":[],"author":"Jon"},{"title":"Cache File","slug":"cache-file","date":"2024-05-15T06:28:23.000Z","updated":"2025-02-04T14:00:04.931Z","comments":true,"path":"/2024/05/15/cache-file/","link":"","permalink":"https://noteforme.github.io/2024/05/15/cache-file/","excerpt":"","text":"In Android, creating cache files and managing permissions related to file storage are common tasks, especially when you need to store temporary data. Hereâ€™s how you can handle creating cache files and manage the necessary permissions: Creating a Cache File Android provides two main cache storage options: Internal cache directory: Private to your app and doesnâ€™t require any permissions to read or write. External cache directory: Accessible by other apps and the user. Depending on your target API level and Android version, you may need to request permissions. Creating a File in Internal Cache: Hereâ€™s how you can create a file in the internal cache directory. This method does not require any special permissions: kotlin Copy code fun createCacheFile(context: Context, fileName: String): File { &#x2F;&#x2F; Creating a file in the internal cache directory val file &#x3D; File(context.cacheDir, fileName) if (!file.exists()) { file.createNewFile() } return file } Creating a File in External Cache: For external cache files, you might need to check and request permissions, especially on Android versions prior to Android 10 (API level 29). From Android 10 and beyond, scoped storage simplifies permission management. 123456789Copy codefun createExternalCacheFile(context: Context, fileName: String): File &#123; // Check for the external storage state val externalCacheDir = context.externalCacheDir ?: throw IllegalStateException(&quot;External cache is not available&quot;) val file = File(externalCacheDir, fileName) if (!file.exists()) &#123; file.createNewFile() &#125; return file&#125; Managing Permissions For versions before Android 10, if youâ€™re using external storage for anything other than the cache directories, youâ€™ll need to request the following permissions in your AndroidManifest.xml: xml Copy code 12&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt; Requesting Permissions at Runtime (Android 6.0 and up): You should request permissions at runtime for accessing external storage with API level 23 and above. Hereâ€™s a simplified way to request permissions: 1234Copy codeif (ContextCompat.checkSelfPermission(context, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123; ActivityCompat.requestPermissions(activity, arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE), REQUEST_CODE)&#125; In the above code, replace REQUEST_CODE with any integer value that you use to identify the permission request. This code should be called before you perform any operations that require the permission. Note on Scoped Storage (Android 10+) From Android 10 (API level 29), scoped storage is enforced, which restricts access to broad file paths and requires you to use either the app-specific directories or scoped storage APIs to access files. For temporary files, using the cache directories as shown above usually does not require additional permissions with scoped storage. This should help you manage cache files and permissions effectively in your Android applications.","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[],"author":"Jon"},{"title":"Retrofit","slug":"retrofit","date":"2024-05-14T02:01:38.000Z","updated":"2024-09-15T10:15:08.635Z","comments":true,"path":"/2024/05/14/retrofit/","link":"","permalink":"https://noteforme.github.io/2024/05/14/retrofit/","excerpt":"","text":"Retofitè°ƒç”¨å…³ç³» illustrating interceptor request flowè°ƒç”¨æ•´ä½“æµç¨‹ sequenceDiagram autonumber participant SimpleService as Retrofit participant ProxyClass as BinInterface$0 participant InvocationHandler participant ExecutorCallbackCall as RetrofitCall SimpleService ->> ProxyClass : retrofit.create(IGitHub.class) ProxyClass ->> InvocationHandler : github.contributors InvocationHandler ->> ExecutorCallbackCall : h.invoke(this, m3, new Object[]{var1}) Note over InvocationHandler, ExecutorCallbackCall: it invoke in proxyclass loadServiceMethod(service, method).invoke(proxy, args) ExecutorCallbackCall ->> OkHttpCall : retrofit2::call.execute() OkHttpCall ->> OkHttpCall : createRaw Okhttp Call OkHttpCall ->> RealCall : Okhttp Call.execute() RealCall ->> RealCall: getResponseWithInterceptorChain Note over RealCall : RetryAndFollowUpInterceptor BridgeInterceptor CacheInterceptor CallServerInterceptor RealCall -->> OkHttpCall : parseResponse OkHttpCall -->> SimpleService : Response Entity åŠ¨æ€ä»£ç†åˆ›å»ºä¸€ä¸ªæŽ¥å£çš„ä»£ç†ç±»,ä¸ºä»£ç†ç±»æ³¨å…¥ä¸€ä¸ªå›žè°ƒã€‚ The step cannot check out the source code because it is generated by ProxyGenerator. Invoke the contributors method of the proxy class. The InvocationHandler parameter, h, is passed in step 1. The object is constructed with var1.newInstance(var2). In step 3, create an ExecutorCallbackCall object last so that it can invoke retrofit2::execute(). é€šè¿‡åå°„è§£æžæ¯ä¸ªæŽ¥å£çš„æ³¨è§£ã€å…¥å‚æž„é€ httpè¯·æ±‚èŽ·å–åˆ°è¿”å›žçš„httpè¯·æ±‚ï¼Œä½¿ç”¨Adapterè§£æžæˆéœ€è¦çš„è¿”å›žå€¼ã€‚ Retrofit äº¤ä»˜è¯·æ±‚ç»™OkHttpä¸»è¦æ˜¯ï¼ŒOkHttpCallä¸­å¤„ç†, ç»„è£…æ•°æ®åŽï¼Œè¯·æ±‚æ–¹å¼å°±æ˜¯OkHttpå®˜æ–¹æä¾›çš„æ–¹å¼äº†ã€‚è¯·æ±‚çš„bodyæ˜¯åœ¨è¿™é‡Œå¤„ç†çš„ 123456okhttp3.Request create(@Nullable Object instance, Object[] args) &#123; handlers[p].apply(requestBuilder, args[p]); return requestBuilder .get() // ç»„è£…bodyå’Œè¯·æ±‚ .build();&#125; Retrofit VS OkhttpEase of Use: Retrofit:Provides a high-level API that simplifies the creation and execution of network requests. You define API endpoints using Java interfaces, and Retrofit generates the necessary code to handle these requests. OkHttp:While powerful, requires more boilerplate code to set up and execute requests. You need to manually construct HTTP requests, handle responses, and parse the results. Automatic JSON Parsing: Retrofit: Integrates seamlessly with JSON libraries like Gson or Moshi to automatically convert JSON responses into Java objects. This reduces the need for manual parsing and makes the code cleaner and easier to maintain. OkHttp: Does not include built-in support for JSON parsing, so you need to manually parse JSON responses using a separate library. Annotations: Retrofit: Uses annotations to define request parameters, headers, and endpoints. This makes the code more readable and easier to understand. OkHttp: Requires manual handling of these aspects, leading to more verbose and error-prone code. Interceptors and Customization: Retrofit: Allows for easy integration of OkHttp interceptors to handle logging, authentication, and other concerns. Retrofit itself focuses on simplifying API interactions while allowing OkHttp to handle lower-level HTTP operations. OkHttp: You can also use interceptors and customize requests, but it requires more effort compared to Retrofit. Error Handling: Retrofit: Provides built-in support for error handling, including deserialization of error responses and easier differentiation between HTTP error codes. OkHttp: Requires manual implementation of error handling, which can be more complex and less consistent. Scalability: Retrofit: Ideal for larger projects with multiple API endpoints. The use of interfaces and annotations makes it easier to manage and scale the codebase. OkHttp: Better suited for simpler or lower-level network tasks where fine-grained control over the HTTP layer is required. ç”¨æˆ·ç½‘ç»œè¯·æ±‚çš„å€Ÿå£é…ç½® ç¹çï¼Œ å°¤å…¶æ˜¯éœ€è¦é…ç½®å¤æ‚çš„è¯·æ±‚body,è¯·æ±‚å¤´ï¼Œå‚æ•°çš„æ—¶å€™ã€‚ æ•°æ®è§£æžè¿‡ç¨‹éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ‹¿åˆ°respponsbodyè¿›è¡Œè§£æžï¼Œä¸èƒ½å¤ç”¨ã€‚ æ— æ³•é€‚é…è‡ªåŠ¨è¿›è¡Œçº¿ç¨‹çš„åˆ‡æ¢ã€‚ Retrofitåº•å±‚å®žçŽ°ï¼Œåœ¨okhttpçš„åŸºç¡€ä¸‹åšäº†å“ªäº›å°è£…Retrofitåœ¨OkHttpçš„åŸºç¡€ä¸Šè¿›è¡Œäº†å¤šä¸ªå±‚æ¬¡çš„å°è£…ï¼Œä¸»è¦é›†ä¸­åœ¨ç®€åŒ–ç½‘ç»œè¯·æ±‚çš„åˆ›å»ºã€æ‰§è¡Œå’Œå“åº”å¤„ç†ã€‚ä»¥ä¸‹æ˜¯Retrofitåœ¨OkHttpåŸºç¡€ä¸Šæ‰€åšçš„ä¸»è¦å°è£…ï¼š æŽ¥å£å®šä¹‰å’Œæ³¨è§£ï¼š Retrofitå…è®¸å¼€å‘è€…ä½¿ç”¨JavaæŽ¥å£æ¥å®šä¹‰ç½‘ç»œè¯·æ±‚ã€‚æ¯ä¸ªæŽ¥å£æ–¹æ³•å¯¹åº”ä¸€ä¸ªAPIç«¯ç‚¹ï¼Œå¹¶é€šè¿‡æ³¨è§£ï¼ˆå¦‚@GETã€@POSTã€@Pathã€@Queryç­‰ï¼‰æ¥æè¿°è¯·æ±‚çš„ç±»åž‹ã€è·¯å¾„å’Œå‚æ•°ã€‚è¿™äº›æ³¨è§£è®©ä»£ç æ›´ç®€æ´ã€æ˜“è¯»ï¼Œé¿å…äº†æ‰‹åŠ¨æž„å»ºè¯·æ±‚æ‰€éœ€çš„å†—é•¿ä»£ç ã€‚ åŠ¨æ€ä»£ç†ï¼š Retrofitä½¿ç”¨Javaçš„åŠ¨æ€ä»£ç†æœºåˆ¶ï¼ˆProxyç±»ï¼‰åœ¨è¿è¡Œæ—¶ç”ŸæˆæŽ¥å£å®žçŽ°ã€‚è¿™äº›å®žçŽ°ä¼šå°†æ–¹æ³•è°ƒç”¨è½¬æ¢ä¸ºHTTPè¯·æ±‚ã€‚é€šè¿‡åŠ¨æ€ä»£ç†ï¼ŒRetrofitèƒ½å¤Ÿåœ¨å¼€å‘è€…è°ƒç”¨æŽ¥å£æ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºå¹¶æ‰§è¡Œç›¸åº”çš„OkHttpè¯·æ±‚ã€‚ è¯·æ±‚å’Œå“åº”è½¬æ¢ï¼šRetrofitæä¾›äº†ConverteræŽ¥å£ï¼Œç”¨äºŽå°†è¯·æ±‚ä½“è½¬æ¢ä¸ºHTTPè¯·æ±‚çš„æœ‰æ•ˆè´Ÿè½½ï¼ˆå¦‚JSONï¼‰ä»¥åŠå°†HTTPå“åº”è½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚å¸¸è§çš„ConverteråŒ…æ‹¬GsonConverterã€MoshiConverterå’ŒJacksonConverterï¼Œæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨å„ç§JSONåº“æ¥è§£æžå“åº”ã€‚ å¼‚æ­¥å’ŒåŒæ­¥è¯·æ±‚ï¼šRetrofitæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è¯·æ±‚ã€‚å¼€å‘è€…å¯ä»¥é€‰æ‹©è¿”å›žCallå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨enqueueæ–¹æ³•è¿›è¡Œå¼‚æ­¥è¯· æ±‚ï¼Œæˆ–è€…ä½¿ç”¨executeæ–¹æ³•è¿›è¡ŒåŒæ­¥è¯·æ±‚ã€‚è¿™ç§çµæ´»æ€§ä½¿å¾—ç½‘ç»œè¯·æ±‚çš„å¤„ç†æ–¹å¼æ›´åŠ ä¸°å¯Œå’Œé€‚åº”ä¸åŒçš„éœ€æ±‚åœºæ™¯. é”™è¯¯å¤„ç†:Retrofitå†…ç½®äº†å¯¹HTTPé”™è¯¯çš„å¤„ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°æ•èŽ·å’Œå¤„ç†HTTPé”™è¯¯çŠ¶æ€ç å’Œç½‘ç»œå¼‚å¸¸ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡è‡ªå®šä¹‰Callbackæˆ–è€…é…åˆä½¿ç”¨Callå¯¹è±¡çš„Responseç±»ï¼Œæ–¹ä¾¿åœ°è¿›è¡Œé”™è¯¯å¤„ç†å’Œé‡è¯•é€»è¾‘ã€‚ æ‹¦æˆªå™¨ï¼š è™½ç„¶OkHttpæœ¬èº«ä¹Ÿæ”¯æŒæ‹¦æˆªå™¨ï¼ŒRetrofitå¯¹å…¶è¿›è¡Œäº†æ›´å‹å¥½çš„é›†æˆã€‚å¼€å‘è€…å¯ä»¥è½»æ¾åœ°å°†OkHttpçš„æ‹¦æˆªå™¨ï¼ˆå¦‚æ—¥å¿—è®°å½•ã€è®¤è¯æ‹¦æˆªå™¨ï¼‰æ·»åŠ åˆ°Retrofitçš„é…ç½®ä¸­ã€‚è¿™ä½¿å¾—è°ƒè¯•å’Œç½‘ç»œè¯·æ±‚çš„ç®¡ç†æ›´åŠ æ–¹ä¾¿ã€‚ URLç®¡ç†ï¼š Retrofitæ”¯æŒåœ¨æŽ¥å£æ–¹æ³•ä¸Šé€šè¿‡æ³¨è§£æ¥çµæ´»é…ç½®URLå‚æ•°ï¼Œè·¯å¾„å˜é‡å’ŒæŸ¥è¯¢å‚æ•°ã€‚è¿™ä½¿å¾—æž„å»ºå¤æ‚çš„URLå˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚é€šè¿‡æ³¨è§£å’Œå‚æ•°æ›¿æ¢ï¼ŒRetrofitèƒ½å¤ŸåŠ¨æ€åœ°ç”Ÿæˆå®Œæ•´çš„è¯·æ±‚URLã€‚å†…ç½®åç¨‹æ”¯æŒï¼ˆåœ¨Kotlinä¸­ï¼‰ï¼š å¯¹äºŽä½¿ç”¨Kotlinçš„é¡¹ç›®ï¼ŒRetrofitæä¾›äº†å¯¹åç¨‹çš„æ”¯æŒï¼Œä½¿å¾—ç½‘ç»œè¯·æ±‚å¯ä»¥ä»¥æŒ‚èµ·å‡½æ•°çš„å½¢å¼å®žçŽ°ï¼Œç®€åŒ–äº†å¼‚æ­¥ä»£ç çš„ç¼–å†™ã€‚é€šè¿‡è¿™äº›å°è£…ï¼ŒRetrofitå°†OkHttpå¼ºå¤§çš„ä½Žçº§ç½‘ç»œåŠŸèƒ½ä¸Žé«˜å±‚çš„APIå®šä¹‰å’Œå¤„ç†ç»“åˆèµ·æ¥ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºŽä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦è¿‡å¤šå…³å¿ƒåº•å±‚çš„ç½‘ç»œè¯·æ±‚ç»†èŠ‚ã€‚ Retrofitä¸­çš„Callå¯¹è±¡å¦‚ä½•è½¬æ¢æˆokhttpçš„callå¯¹è±¡Retrofitä¸­æœ‰ä¸€ä¸ªOkHttpCallç±»ï¼Œå®ƒå®žçŽ°äº†CallæŽ¥å£ï¼Œå¹¶å°è£…äº†OkHttpçš„Callå¯¹è±¡ã€‚åˆ›å»ºOkHttp Requestå¯¹è±¡ï¼š åœ¨OkHttpCallç±»ä¸­ï¼ŒcreateRawCallæ–¹æ³•ä¼šè°ƒç”¨OkHttpçš„Call.Factoryæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„OkHttp Callå¯¹è±¡ã€‚ 12345@Overridepublic okhttp3.Call createRawCall() &#123; Request request = serviceMethod.toRequest(args); return serviceMethod.callFactory.newCall(request);&#125; åœ¨retrofitä¸­çš„æ³›åž‹æ˜¯æ€Žä¹ˆè§£æžçš„?ä¸ºä»€ä¹ˆretrofitè¦ä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼ŸRetrofitä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£çš„åŽŸå› åœ¨äºŽå…¶çµæ´»æ€§å’ŒåŠ¨æ€ç‰¹æ€§ï¼Œè¿™ä½¿å¾—Retrofitèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶è§£æžæŽ¥å£æ–¹æ³•çš„æ³¨è§£å’Œå‚æ•°ï¼Œå¹¶æ ¹æ®è¿™äº›ä¿¡æ¯åŠ¨æ€åœ°æž„å»ºHTTPè¯·æ±‚ã€‚ä¸‹é¢æ˜¯Retrofitä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£çš„å…·ä½“åŽŸå› ä»¥åŠé€‚ç”¨åœºæ™¯ï¼š çµæ´»çš„è¯·æ±‚é…ç½® è¿è¡Œæ—¶æ³¨è§£å…è®¸å¼€å‘è€…åœ¨æŽ¥å£æ–¹æ³•ä¸Šçµæ´»åœ°é…ç½®HTTPè¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æŒ‡å®šHTTPæ–¹æ³•ã€URLè·¯å¾„ã€æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚å¤´ç­‰ã€‚è¿™ç§æ–¹å¼ æ¯”ç¡¬ç¼–ç è¯·æ±‚é…ç½®æ›´åŠ çµæ´»å’Œå¯ç»´æŠ¤ã€‚ 1234public interface ApiService &#123;@GET(&quot;users/&#123;user&#125;/repos&quot;)Call&lt;List&lt;Repo&gt;&gt; listRepos(@Path(&quot;user&quot;) String user);&#125; åŠ¨æ€è§£æžå’Œç”Ÿæˆè¯·æ±‚ ä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£ï¼ŒRetrofitå¯ä»¥åœ¨è¿è¡Œæ—¶è§£æžæŽ¥å£æ–¹æ³•çš„æ³¨è§£ï¼Œç”Ÿæˆç›¸åº”çš„è¯·æ±‚å¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬è§£æžHTTPæ–¹æ³•ã€URLã€è¯·æ±‚å‚æ•°ç­‰ä¿¡æ¯ï¼Œ å¹¶åŠ¨æ€æž„å»ºè¯·æ±‚ã€‚è¿™ç§åŠ¨æ€ç”Ÿæˆè¯·æ±‚çš„æ–¹å¼ç›¸æ¯”äºŽç¼–è¯‘æ—¶ç”Ÿæˆè¯·æ±‚ä»£ç ï¼Œæ›´åŠ çµæ´»ä¸”æ˜“äºŽä¿®æ”¹ã€‚ é€‚åº”å¤šå˜çš„API è®¸å¤šç½‘ç»œAPIä¼šé¢‘ç¹å˜åŒ–ï¼Œä½¿ç”¨è¿è¡Œæ—¶æ³¨è§£å¯ä»¥æ›´å®¹æ˜“åœ°é€‚åº”è¿™äº›å˜åŒ–ã€‚å› ä¸ºæ³¨è§£çš„è§£æžå’Œè¯·æ±‚çš„ç”Ÿæˆæ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­ä¿®æ”¹ æ³¨è§£å³å¯åº”å¯¹APIçš„å˜åŒ–ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä»£ç ã€‚ DESIGN PATTERNstatic method factory1234567private static Platform findPlatform() &#123; if (isAndroid()) &#123; return findAndroidPlatform(); &#125; else &#123; return findJvmPlatform(); &#125;&#125; Abstract Factory methodRetrofit deserializes data using the abstract factory method classDiagram class Factory { +requestBodyConverter(): RequestBody +responseBodyConverter(): ResponseBody } class GsonConverterFactory { +requestBodyConverter(): GsonRequestBodyConverter +responseBodyConverter(): GsonResponseBodyConverter } class Converter { +convert(): T } class MoshiConverterFactory { +requestBodyConverter(): MoshiRequestBodyConverter +responseBodyConverter(): MoshiResponseBodyConverter } class RequestBody { +operationA(): void } class ResponseBody { +operationA(): void } class AbstractProductB { +operationB(): void } class ConcreteProductB1 { +operationB(): void } class ConcreteProductB2 { +operationB(): void } Factory AndroidMainExecutor : callbackExecutor.execute AndroidMainExecutor -->> DefaultCallAdapterFactory : handler.post(r); DefaultCallAdapterFactory -->> RetrofitCall : callback.onResponse implementationåœ¨æ·»åŠ é»˜è®¤é€‚é…å™¨å·¥åŽ‚defaultCallAdapterFactoriesæ—¶ï¼Œå°†callbackExecutorä½œä¸ºäº†ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå®ƒçš„å…·ä½“å®žçŽ°ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªé»˜è®¤é€‚é…å™¨å·¥åŽ‚ä¸­ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸‹callbackExecutoråœ¨é‡Œé¢åšäº†äº›å•¥ã€‚ 1234567891011121314151617181920static final class ExecutorCallbackCall&lt;T&gt; implements Call&lt;T&gt; &#123; final Executor callbackExecutor; @Override public void enqueue(final Callback&lt;T&gt; callback) &#123; delegate.enqueue( new Callback&lt;T&gt;() &#123; @Override public void onResponse(Call&lt;T&gt; call, final Response&lt;T&gt; response) &#123; callbackExecutor.execute( // è¿™é‡Œåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ () -&gt; &#123; callback.onResponse(ExecutorCallbackCall.this, response); &#125;); &#125; @Override public void onFailure(Call&lt;T&gt; call, final Throwable t) &#123; callbackExecutor.execute(() -&gt; callback.onFailure(ExecutorCallbackCall.this, t)); // è¿™é‡Œåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ &#125; &#125;); &#125; åœ¨ä¸Šè¿°ä»£ç é‡Œäº†è§£åˆ°ï¼ŒcallbackExecutorå³Executorï¼Œä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨ã€‚åœ¨Callçš„enqueueå®žçŽ°é‡Œæ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œè¯·æ±‚delegate.enqueueï¼Œåœ¨è¯·æ±‚çš„å“åº”onResponseã€onFailureä¸­ Executorä¹ŸåŒæ ·æ‰§è¡Œäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™é‡Œå°±æœ‰ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚é‡Œåˆè°ƒç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Ÿæˆ‘ä»¬çŸ¥é“callbackExecutoræ˜¯ä¸€ä¸ªçº¿ç¨‹è°ƒåº¦å™¨ï¼Œé‚£ä»–å†…éƒ¨åˆ°åº•å®žçŽ°çš„æ˜¯ä»€ä¹ˆï¼Ÿ é»˜è®¤callbackExecutorçš„åˆ›å»ºåœ¨Retrofitçš„åˆå§‹åŒ–ä¸­ï¼ŒcallbackExecutor &#x3D; platform.defaultCallbackExecutor(); 1234567891011121314151617static final class Android extends Platform &#123;@Overridepublic Executor defaultCallbackExecutor() &#123; return new MainThreadExecutor();&#125;static final class MainThreadExecutor implements Executor &#123; private final Handler handler = new Handler(Looper.getMainLooper()); @Override public void execute(Runnable r) &#123; handler.post(r); &#125;&#125;&#125;&#125; platformæ˜¯ä¸€ä¸ªAndroidå¹³å°ï¼ŒdefaultCallbackExecutor å†…éƒ¨å…¶å®žè°ƒç”¨çš„æ˜¯ new MainThreadExecutor() ï¼Œå¾ˆæ¸…æ¥šçš„çœ‹åˆ°ï¼Œ handler.post(r) å†…éƒ¨ä½¿ç”¨Handlerå°†å“åº”æŠ›åˆ°äº†ä¸»çº¿ç¨‹ã€‚ è¿™å°±æ˜¯Retrofitå°†å­çº¿ç¨‹åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹çš„æ ¸å¿ƒæ‰€åœ¨ã€‚ é—®3ï¼šRetrofitä¸ºä»€ä¹ˆè¦ç”¨åŠ¨æ€ä»£ç†ï¼Ÿ åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/qq_37492806/article/details/133995368 Retrofitç»“åˆRxJava æ„Ÿè§‰RxJavaå¯ä»¥äº†è§£ä¸‹ï¼ŒRetrofitç»“åˆcourutine æ„Ÿè§‰courutineä»£ç ä¸æ‡‚ï¼Œcourutineçš„å¯ä»¥äº†è§£ä¸‹ï¼Œæ„Ÿè§‰courutineæœ‰å…ˆçº§åˆ«æ›´é«˜ä¸€ç‚¹ï¼Œå›žæ¥å†æ¥ç”»Retrofitå…¶ä»–çš„ç±»å›¾ Retrofit æ³¨è§£æ˜¯æ€Žä¹ˆæ¶ˆè´¹çš„123456789101112 private void parseMethodAnnotation(Annotation annotation) &#123; if (annotation instanceof DELETE) &#123; parseHttpMethodAndPath(&quot;DELETE&quot;, ((DELETE) annotation).value(), false); &#125; else if (annotation instanceof GET) &#123; parseHttpMethodAndPath(&quot;GET&quot;, ((GET) annotation).value(), false); &#125; else if (annotation instanceof HEAD) &#123; parseHttpMethodAndPath(&quot;HEAD&quot;, ((HEAD) annotation).value(), false); &#125; else if (annotation instanceof PATCH) &#123; parseHttpMethodAndPath(&quot;PATCH&quot;, ((PATCH) annotation).value(), true); &#125; else if (annotation instanceof POST) &#123; parseHttpMethodAndPath(&quot;POST&quot;, ((POST) annotation).value(), true);&#125; https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md https://github.com/stven0king/designmode?tab=readme-ov-file Build Project","categories":[{"name":"Library","slug":"Library","permalink":"https://noteforme.github.io/categories/Library/"}],"tags":[],"author":"Jon"},{"title":"DesignPattern","slug":"designpattern","date":"2024-05-14T01:54:42.000Z","updated":"2024-09-15T12:50:22.130Z","comments":true,"path":"/2024/05/14/designpattern/","link":"","permalink":"https://noteforme.github.io/2024/05/14/designpattern/","excerpt":"","text":"ResourceOverviewhttps://refactoring.guru/design-patterns/abstract-factoryhttps://design-patterns.readthedocs.io/zh-cn/latest/behavioral_patterns/behavioral.html https://blog.csdn.net/unique_perfect/article/details/109621369 meituanhttps://tech.meituan.com/2022/03/10/interesting-talk-about-design-patterns.html åˆ—ä¸¾äº†è§†é¢‘ç¤ºä¾‹https://blog.csdn.net/mrhanzhou5273/article/details/119248595 å°šç¡…è°·-Javaè®¾è®¡æ¨¡å¼https://www.bilibili.com/video/BV1W4411c77Ehttps://github.com/vectorxxxx/NOTE_DesignPatterns 23ç§ https://www.cnblogs.com/furenjun/archive/2008/12/28/DesignPatterns1.htmlhttps://masiyi.blog.csdn.net/article/details/128345543https://www.yuque.com/u22582281/qyidho/bd7d1k#e3c84592 ç”»emçš„å›¾ https://github.com/noteforme/noteforme.github.io/blob/main/source/_posts&#x2F;DesignPatterns_Factory.md è®¾è®¡åŽŸåˆ™è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™1-å•ä¸€èŒè´£åŽŸåˆ™ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™2-é‡Œæ°æ›¿æ¢åŽŸåˆ™ å­ç±»å¿…é¡»å®žçŽ°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸å¾—é‡å†™ï¼ˆè¦†ç›–ï¼‰çˆ¶ç±»çš„éžæŠ½è±¡ï¼ˆå·²å®žçŽ°ï¼‰æ–¹æ³•ï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™è§„å®šï¼Œå­ç±»ä¸èƒ½è¦†å†™çˆ¶ç±»å·²å®žçŽ°çš„æ–¹æ³•ã€‚çˆ¶ç±»ä¸­å·²å®žçŽ°çš„æ–¹æ³•å…¶å®žæ˜¯ä¸€ç§å·²å®šå¥½çš„è§„èŒƒå’Œå¥‘çº¦ï¼Œå¦‚æžœæˆ‘ä»¬éšæ„çš„ä¿®æ”¹äº†å®ƒï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚ å­ç±»å®Œç¾Žç»§æ‰¿çˆ¶ç±»çš„è®¾è®¡åˆè¡·ï¼Œå¹¶åšäº†å¢žå¼º https://www.jianshu.com/p/cf9f3c7c0df5 é‡Œæ°æ›¿æ¢ æ‰€æœ‰ä½¿ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žçš„ä½¿ç”¨å…¶å­ç±»ã€‚ ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œå­ç±»å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ç»§æ‰¿å®žé™…ä¸Šè®©ä¸¤ä¸ªç±»è€¦åˆæ€§å¢žå¼ºäº†ï¼Œé€‚å½“æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ èšåˆ ç»„åˆ ä¾èµ–æ¥è§£å†³é—®é¢˜ã€‚ é€šç”¨åšæ³•æ˜¯ï¼š åŽŸæ¥çš„çˆ¶ç±»å’Œå­ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»ï¼ŒåŽŸæœ‰çš„ç»§æ‰¿å…³ç³»åŽ»æŽ‰ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ã€‚ ä¹‹å‰çš„æ–¹æ¡ˆ 123456789101112131415161718192021222324252627282930public class Liskov &#123; public static void main(String[] args) &#123; A a = new A(); System.out.println(&quot;11-3=&quot; + a.func1(11, 3)); System.out.println(&quot;1-8=&quot; + a.func1(1, 8)); System.out.println(&quot;---------------&quot;); B b = new B(); System.out.println(&quot;11-3=&quot; + b.func1(11, 3)); System.out.println(&quot;1-8=&quot; + b.func1(1, 8)); System.out.println(&quot;11+3+9=&quot; + b.func2(11, 3)); &#125;&#125;class A &#123; public int func1(int num1, int num2) &#123; return num1 - num2; &#125;&#125;class B extends A &#123; //æ²¡æ„è¯†åˆ° é‡å†™äº†è¯¥æ–¹æ³• public int func1(int num1, int num2) &#123; return num1 + num2; &#125; public int func2(int a, int b) &#123; return func1(a, b) - 9; &#125;&#125; æ”¹è¿›åŽçš„æ–¹æ¡ˆ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class Liskov &#123; public static void main(String[] args) &#123; A a = new A(); System.out.println(&quot;11-3=&quot; + a.func1(11, 3)); System.out.println(&quot;1-8=&quot; + a.func1(1, 8)); System.out.println(&quot;---------------&quot;); B b = new B(); //å› ä¸ºBç±»ä¸å†ç»§æ‰¿Aç±»ï¼Œå› æ­¤è°ƒç”¨è€…ï¼Œä¸ä¼šå†func1æ±‚å‡æ³• System.out.println(&quot;11+3=&quot; + b.func1(11, 3)); System.out.println(&quot;1+8=&quot; + b.func1(1, 8)); System.out.println(&quot;11+3+9=&quot; + b.func2(11, 3)); //ä½¿ç”¨ç»„åˆä»ç„¶å¯ä»¥ä½¿ç”¨Aç±»ç›¸å…³æ–¹æ³• System.out.println(&quot;11-3=&quot; + b.func3(11, 3)); &#125;&#125; class Base&#123; //æŠŠæ›´åŸºç¡€çš„æ–¹æ³•å’Œæˆå‘˜å†™åˆ°Baseç±»ä¸­&#125;class A extends Base &#123; public int func1(int num1, int num2) &#123; return num1 - num2; &#125;&#125;class B extends Base &#123; //å¦‚æžœBéœ€è¦ä½¿ç”¨Aç±»çš„æ–¹æ³•ï¼Œä½¿ç”¨ç»„åˆå…³ç³» private A a = new A(); //æ²¡æ„è¯†åˆ° é‡å†™äº†è¯¥æ–¹æ³• public int func1(int num1, int num2) &#123; return num1 + num2; &#125; public int func2(int a, int b) &#123; return func1(a, b) +9; &#125; public int func3(int a,int b)&#123; return this.a.func1(a,b); &#125;&#125; å¼€é—­åŽŸåˆ™ ocp open closed principle ä¸é€‚ç”¨è¯¥åŽŸåˆ™çš„æ–¹æ¡ˆ 1234567891011121314151617public class GraphicEditor &#123; public static void main(String[] args) &#123; GraphicEditor graphicEditor = new GraphicEditor(); graphicEditor.drawShape(new Rectangle()); graphicEditor.drawShape(new Circle()); graphicEditor.drawShape(new Triangle()); &#125; //æ·»åŠ ä¸€ä¸ªå›¾å½¢éœ€è¦ä¿®æ”¹ public void drawShape(Shape s) &#123; if (s.m_type == 1) drawRectangle(s); else if (s.m_type == 2) drawCircle(s); else if (s.m_type == 3) drawTriangle(s); &#125; private void drawCircle(Shape s) &#123; System.out.println(&quot;ç»˜åˆ¶åœ†å½¢&quot;); &#125; private void drawRectangle(Shape s) &#123; System.out.println(&quot;ç»˜åˆ¶çŸ©å½¢&quot;); &#125; //æ·»åŠ ä¸€ä¸ªå›¾å½¢éœ€è¦ä¿®æ”¹ private void drawTriangle(Shape s) &#123; System.out.println(&quot;ç»˜åˆ¶ä¸‰è§’å½¢&quot;); &#125; } class Shape { public int m_type; } class Rectangle extends Shape { public Rectangle() &#123; super.m_type = 1; &#125; } class Circle extends Shape { public Circle() &#123; super.m_type = 2; &#125; } &#x2F;&#x2F;æ–°å¢žå›¾å½¢class Triangle extends Shape { public Triangle() &#123; super.m_type = 3; &#125; } å¯ä»¥çœ‹åˆ°æ”¹åŠ¨å¾ˆå¤š ä½¿ç”¨ocpåŽŸåˆ™æ”¹è¿›åŽ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class GraphicEditor &#123; public static void main(String[] args) &#123; GraphicEditor graphicEditor = new GraphicEditor(); graphicEditor.drawShape(new Rectangle()); graphicEditor.drawShape(new Circle()); graphicEditor.drawShape(new Triangle()); graphicEditor.drawShape(new OtherGraphic()); &#125; public void drawShape(Shape s) &#123; s.drawShape(); &#125;&#125;abstract class Shape &#123; public int m_type; abstract void drawShape();&#125;class Rectangle extends Shape &#123; @Override void drawShape() &#123; System.out.println(&quot;ç»˜åˆ¶çŸ©å½¢&quot;); &#125;&#125;class Circle extends Shape &#123; @Override void drawShape() &#123; System.out.println(&quot;ç»˜åˆ¶åœ†å½¢&quot;); &#125;&#125;class Triangle extends Shape &#123; @Override void drawShape() &#123; System.out.println(&quot;ç»˜åˆ¶ä¸‰è§’å½¢&quot;); &#125;&#125;//æ–°å¢žä¸€ä¸ªå›¾å½¢class OtherGraphic extends Shape &#123; @Override void drawShape() &#123; System.out.println(&quot;æ–°å¢žä¸€ä¸ªå›¾å½¢&quot;); &#125;&#125; å®žçŽ°ä»£ç æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™3-ä¾èµ–å€’ç½®åŽŸåˆ™ é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºŽåº•å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ï¼Œ æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºŽç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ ä¾èµ–å€’ç½®çš„ä¸­å¿ƒæ€æƒ³æ˜¯é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™4-æŽ¥å£éš”ç¦»åŽŸåˆ™ æŽ¥å£éš”ç¦»åŽŸåˆ™:Clients should not be forced to depend upon interfaces that they do not use.ä¸Žå¤–éƒ¨å…³ç³»ä¸Šåªä¾èµ–éœ€è¦çš„æŠ½è±¡ å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ï¼Œå³ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æŽ¥å£ä¸Šã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™çš„å…³é”®æ˜¯æŽ¥å£ä»¥åŠè¿™ä¸ªæŽ¥å£è¦å°ï¼Œå¦‚ä½•å°å‘¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦ä¸ºä¸“é—¨çš„ç±»åˆ›å»ºä¸“é—¨çš„æŽ¥å£ï¼Œè¿™ä¸ªæŽ¥å£åªå¯¹å®ƒæœ‰æ•ˆï¼Œä¸è¦è¯•å›¾è®©ä¸€ä¸ªæŽ¥å£åŒ…ç½—ä¸‡è±¡ï¼Œè¦å»ºç«‹æœ€å°çš„ä¾èµ–å…³ç³» https://blog.csdn.net/dingshuo168/article/details/103531805 è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™5-è¿ªç±³ç‰¹æ³•åˆ™ å‡å°‘ä¾èµ– Each unit should have only limited knowledge about other units: only units â€œcloselyâ€ related to the current unit. Or: Each unit should only talk to its friends; Donâ€™t talk to strangers ä¸€ä¸ªç±»åº”è¯¥åº”è¯¥å¯¹å…¶ä»–ç±»å°½å¯èƒ½äº†è§£å¾—æœ€å°‘ï¼›ç±»åªä¸Žç›´æŽ¥çš„æœ‹å‹é€šä¿¡ç­‰ç­‰ã€‚ä½†æ˜¯å…¶æœ€ç»ˆç›®çš„åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯è®©ç±»é—´è§£è€¦ã€‚ https://tianweili.github.io/2015/02/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/ è¿ªç±³ç‰¹æ³•åˆ™ ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£ Demeter Principleåˆå«æœ€å°‘çŸ¥é“åŽŸåˆ™ï¼Œ å³ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–å‡ºäº†æä¾›çš„publicæ–¹æ³•ï¼Œä¸æ³„æ¼ä»»ä½•ä¿¡æ¯ åªä¸Žç›´æŽ¥çš„æœ‹å‹é€šä¿¡ã€‚ ç›´æŽ¥çš„æœ‹å‹: æ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸Žå…¶ä»–å¯¹è±¡æœ‰è€¦åˆå…³ç³»ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œ ä¾èµ– å…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚ å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºçŽ°æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›žå€¼ä¸­çš„ç±»ä¸ºç›´æŽ¥çš„æœ‹å‹ï¼Œè€Œå‡ºçŽ°åœ¨å±€éƒ¨å˜é‡ä¸­çš„ç±»ä¸æ˜¯ç›´æŽ¥çš„æœ‹å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜é‡çš„å½¢å¼å‡ºçŽ°åœ¨ç±»çš„å†…éƒ¨ã€‚ â€‹ æ”¹è¿›å‰ â€‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576public class Demeter1 &#123; public static void main(String[] args) &#123; SchoolManager schoolManager = new SchoolManager(); schoolManager.printAllEmployee(new CollegeManger()); &#125;&#125;//å­¦æ ¡æ€»éƒ¨å‘˜å·¥çš„ç±»class SchollEmployee &#123; private String id; public String getId() &#123; return id; &#125; public void setId(String id) &#123; this.id = id; &#125;&#125;//å­¦é™¢çš„å‘˜å·¥class CollegeEmployee &#123; private String id; public String getId() &#123; return id; &#125; public void setId(String id) &#123; this.id = id; &#125;&#125;//ç®¡ç†å­¦é™¢å‘˜å·¥çš„ç®¡ç†ç±»class CollegeManger &#123; public List&lt;CollegeEmployee&gt; getAllEmployee() &#123; ArrayList&lt;CollegeEmployee&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; CollegeEmployee collegeEmployee = new CollegeEmployee(); collegeEmployee.setId(&quot;å­¦é™¢å‘˜å·¥id= &quot; + i); list.add(collegeEmployee); &#125; return list; &#125;&#125;// SchollEmployee , CollegeManger æ˜¯ç›´æŽ¥æœ‹å‹// CollegeEmployee ä¸æ˜¯ç›´æŽ¥æœ‹å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé™Œç”Ÿç±»ï¼Œè¿™æ ·è¿åäº† è¿ªç±³ç‰¹æ³•åˆ™ã€‚class SchoolManager &#123; public List&lt;SchollEmployee&gt; getAllEmployee() &#123;//æ–¹æ³•è¿”å›žå€¼:ç›´æŽ¥æœ‹å‹ ArrayList&lt;SchollEmployee&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 5; i++) &#123; SchollEmployee schollEmployee = new SchollEmployee(); // CollegeEmployee ä¸æ˜¯ç›´æŽ¥æœ‹å‹ï¼Œä»¥å±€éƒ¨å˜é‡å‡ºçŽ°åœ¨SchoolManager schollEmployee.setId(&quot;å­¦æ ¡æ€»éƒ¨å‘˜å·¥id= &quot; + i); list.add(schollEmployee); &#125; return list; &#125; //è¯¥æ–¹æ³•å®Œæˆè¾“å‡ºå­¦æ ¡æ€»éƒ¨å’Œå­¦é™¢å‘˜å·¥ID void printAllEmployee(CollegeManger sub) &#123;//æ–¹æ³•å‚æ•°:ç›´æŽ¥æœ‹å‹ List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee(); System.out.println(&quot;-----------å­¦é™¢å‘˜å·¥--------&quot;); for (CollegeEmployee e : list1) &#123; System.out.println(e.getId()); &#125; List&lt;SchollEmployee&gt; list2 = this.getAllEmployee(); System.out.println(&quot;-----------å­¦æ ¡æ€»éƒ¨å‘˜å·¥--------&quot;); for (SchollEmployee e : list2) &#123; System.out.println(e.getId()); &#125; &#125;&#125; æ”¹è¿›åŽ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293public class Demeter2 &#123; public static void main(String[] args) &#123; System.out.println(&quot;ä½¿ç”¨è¿ªç±³ç‰¹æ³•åˆ™çš„æ”¹è¿›&quot;); SchoolManager schoolManager = new SchoolManager(); schoolManager.printAllEmployee(new CollegeManger()); &#125;&#125;//å­¦æ ¡æ€»éƒ¨å‘˜å·¥çš„ç±»class SchollEmployee &#123; private String id; public String getId() &#123; return id; &#125; public void setId(String id) &#123; this.id = id; &#125;&#125;//å­¦é™¢çš„å‘˜å·¥class CollegeEmployee &#123; private String id; public String getId() &#123; return id; &#125; public void setId(String id) &#123; this.id = id; &#125;&#125;//ç®¡ç†å­¦é™¢å‘˜å·¥çš„ç®¡ç†ç±»class CollegeManger &#123; public List&lt;CollegeEmployee&gt; getAllEmployee() &#123; ArrayList&lt;CollegeEmployee&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 10; i++) &#123; CollegeEmployee collegeEmployee = new CollegeEmployee(); collegeEmployee.setId(&quot;å­¦é™¢å‘˜å·¥id= &quot; + i); list.add(collegeEmployee); &#125; return list; &#125; // è¾“å‡ºå­¦é™¢å‘˜å·¥çš„ä¿¡æ¯ void printCollegeEmployee() &#123; //æ”¹è¿›æ–¹æ³•ï¼š å°†è¾“å‡ºå­¦é™¢å‘˜å·¥çš„æ–¹æ³•ï¼Œå°è£…åˆ°CollegeManagerä¸­ã€‚ List&lt;CollegeEmployee&gt; list1 = getAllEmployee(); System.out.println(&quot;-----------å­¦é™¢å‘˜å·¥--------&quot;); for (CollegeEmployee e : list1) &#123; System.out.println(e.getId()); &#125; &#125;&#125;// SchollEmployee , CollegeManger æ˜¯ç›´æŽ¥æœ‹å‹// CollegeEmployee ä¸æ˜¯ç›´æŽ¥æœ‹å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé™Œç”Ÿç±»ï¼Œè¿™æ ·è¿åäº† è¿ªç±³ç‰¹æ³•åˆ™ã€‚class SchoolManager &#123; public List&lt;SchollEmployee&gt; getAllEmployee() &#123;//æ–¹æ³•è¿”å›žå€¼:ç›´æŽ¥æœ‹å‹ ArrayList&lt;SchollEmployee&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 5; i++) &#123; SchollEmployee schollEmployee = new SchollEmployee(); // CollegeEmployee ä¸æ˜¯ç›´æŽ¥æœ‹å‹ï¼Œä»¥å±€éƒ¨å˜é‡å‡ºçŽ°åœ¨SchoolManager schollEmployee.setId(&quot;å­¦æ ¡æ€»éƒ¨å‘˜å·¥id= &quot; + i); list.add(schollEmployee); &#125; return list; &#125; //è¯¥æ–¹æ³•å®Œæˆè¾“å‡ºå­¦æ ¡æ€»éƒ¨å’Œå­¦é™¢å‘˜å·¥ID void printAllEmployee(CollegeManger sub) &#123;//æ–¹æ³•å‚æ•°:ç›´æŽ¥æœ‹å‹ /* List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee(); System.out.println(&quot;-----------å­¦é™¢å‘˜å·¥--------&quot;); for (CollegeEmployee e : list1) &#123; System.out.println(e.getId()); &#125;*/ //æ”¹è¿›æ–¹æ³•ï¼š å°†è¾“å‡ºå­¦é™¢å‘˜å·¥çš„æ–¹æ³•ï¼Œå°è£…åˆ°CollegeManagerä¸­ã€‚ sub.printCollegeEmployee(); List&lt;SchollEmployee&gt; list2 = this.getAllEmployee(); System.out.println(&quot;-----------å­¦æ ¡æ€»éƒ¨å‘˜å·¥--------&quot;); for (SchollEmployee e : list2) &#123; System.out.println(e.getId()); &#125; &#125;&#125; è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™6-å¼€é—­åŽŸåˆ™æŽ§åˆ¶åè½¬ åœ¨ä½¿ç”¨æ¡†æž¶ä¹‹åŽï¼Œæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹é€šè¿‡æ¡†æž¶æ¥æŽ§åˆ¶ã€‚æµç¨‹çš„æŽ§åˆ¶æƒä»Žç¨‹åºå‘˜â€œåè½¬â€ç»™äº†æ¡†æž¶ã€‚ è°ˆä¸€è°ˆè‡ªå·±å¯¹ä¾èµ–ã€å…³è”ã€èšåˆå’Œç»„åˆä¹‹é—´åŒºåˆ«çš„ç†è§£ http://blog.itpub.net/69952849/viewspace-2672009/ Creational Design PatternsSingletonFactoryPrototype åŽŸåž‹Behavioral PatternsChain of Responsibility å°†è¯·æ±‚çš„å‘é€å’ŒæŽ¥æ”¶è§£è€¦ï¼Œè®©å¤šä¸ªæŽ¥æ”¶å¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚å°†è¿™äº›æŽ¥æ”¶å¯¹è±¡ä¸²æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¿™ä¸ªè¯·æ±‚ï¼Œç›´åˆ°é“¾ä¸Šçš„æŸä¸ªæŽ¥æ”¶å¯¹è±¡èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢ã€‚ https://refactoring.guru/design-patterns/chain-of-responsibilityhttps://www.bilibili.com/video/BV1W4411c77E?p=147 https://github.com/vectorxxxx/NOTE_DesignPatterns&#x2F;blob&#x2F;main&#x2F;%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F&#x2F;22-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F&#x2F;README.md classDiagram class Handler{ + successor :Handler + setSuccessor(Handler): void + handleRequest(): void } class ConcreteHandlerA { + handleRequest() } class ConcreteHandlerB { + handleRequest() } ConcreteHandlerA --|> Handler ConcreteHandlerB --|> Handler Handler o-- Handler class Client Client --> Handler ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæŽ¥æ”¶è€…å¯¹è±¡çš„é“¾. èŒè´£é“¾æ¨¡å¼é€šå¸¸æ¯ä¸ªæŽ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæŽ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæŽ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æŽ¨ å°†è¿™ä¸ªå¯¹è±¡è¿žæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ HandleræŠ½è±¡å¤„ç†è€…ï¼š å®šä¹‰äº†ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•ï¼ŒåŒæ—¶å«æœ‰å¦å¤–ä¸€ä¸ªHandler ConcreteHandlerå…·ä½“å¤„ç†è€…ï¼š å¤„ç†è‡ªå·±è´Ÿè´£çš„è¯·æ±‚ï¼ŒåŒæ—¶å¯ä»¥è®¿é—®å®ƒçš„åŽç»§è€…ï¼ˆå³ä¸‹ä¸€ä¸ªå¤„ç†è€…ï¼‰ ï¼›å¦‚æžœå¯ä»¥å¤„ç†è¯·æ±‚ï¼Œåˆ™è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™äº¤ç»™åŽç»§è€…åŽ»å¤„ç†ï¼Œä»Žè€Œå½¢æˆä¸€ä¸ªèŒè´£é“¾ Requestå«æœ‰å¾ˆå¤šå±žæ€§ï¼Œè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚ Command å‘½ä»¤æ¨¡å¼å°†è¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯·æ±‚å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ï¼ˆå°†ä¸åŒè¯·æ±‚ä¾èµ–æ³¨å…¥åˆ°å…¶ä»–å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ”¯æŒè¯·æ±‚ï¼ˆå‘½ä»¤ï¼‰çš„æŽ’é˜Ÿæ‰§è¡Œã€è®°å½•æ—¥å¿—ã€æ’¤é”€ç­‰ï¼ˆé™„åŠ æŽ§åˆ¶ï¼‰åŠŸèƒ½ åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œä¸åŒçš„ç­–ç•¥å…·æœ‰ç›¸åŒçš„ç›®çš„ã€ä¸åŒçš„å®žçŽ°ã€äº’ç›¸ä¹‹é—´å¯ä»¥æ›¿æ¢ã€‚æ¯”å¦‚ï¼ŒBubbleSortã€SelectionSort éƒ½æ˜¯ä¸ºäº†å®žçŽ°æŽ’åºçš„ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯ç”¨å†’æ³¡æŽ’åºç®—æ³•æ¥å®žçŽ°çš„ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨é€‰æ‹©æŽ’åºç®—æ³•æ¥å®žçŽ°çš„ã€‚è€Œåœ¨å‘½ä»¤æ¨¡å¼ä¸­ï¼Œä¸åŒçš„å‘½ä»¤å…·æœ‰ä¸åŒçš„ç›®çš„ï¼Œå¯¹åº”ä¸åŒçš„å¤„ç†é€»è¾‘ï¼Œå¹¶ä¸”äº’ç›¸ä¹‹é—´ä¸å¯æ›¿æ¢ Iteratorä¸€èˆ¬ä¼šæ¶‰åŠå®¹å™¨ List å’Œå®¹å™¨è¿­ä»£å™¨ iterator ä¸¤éƒ¨åˆ†å†…å®¹. Mediator ä¸­ä»‹è€… å°†ä¸€ç»„å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼ˆæˆ–è€…ä¾èµ–å…³ç³»ï¼‰ä»Žå¤šå¯¹å¤šï¼ˆç½‘çŠ¶å…³ç³»ï¼‰è½¬æ¢ä¸ºä¸€å¯¹å¤šï¼ˆæ˜ŸçŠ¶å…³ç³»). Memento å¤‡å¿˜å½• è¿™ä¸ªæ¨¡å¼ç†è§£ã€æŽŒæ¡èµ·æ¥ä¸éš¾ï¼Œä»£ç å®žçŽ°æ¯”è¾ƒçµæ´»ï¼Œåº”ç”¨åœºæ™¯ä¹Ÿæ¯”è¾ƒæ˜Žç¡®å’Œæœ‰é™ï¼Œä¸»è¦æ˜¯ç”¨æ¥é˜²ä¸¢å¤±ã€æ’¤é”€ã€æ¢å¤ç­‰. ObserverStateStrategy åŒ…å«ä¸€ç»„ç­–ç•¥å¯é€‰ï¼Œå®¢æˆ·ç«¯ä»£ç å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªä¸ªç­–ç•¥ï¼Œæœ‰ä¸¤ç§ç¡®å®šæ–¹æ³•ï¼šç¼–è¯‘æ—¶é™æ€ç¡®å®šå’Œè¿è¡Œæ—¶åŠ¨æ€ç¡®å®šã€‚å…¶ä¸­ï¼Œâ€œè¿è¡Œæ—¶åŠ¨æ€ç¡®å®šâ€æ‰æ˜¯ç­–ç•¥æ¨¡å¼æœ€å…¸åž‹çš„åº”ç”¨åœºæ™¯ã€‚ ç±»ä¼¼äºŽé¢å‘æŽ¥å£ç¼–ç¨‹,ç­–ç•¥æ¨¡å¼åŒ…å«ç­–ç•¥çš„å®šä¹‰ã€åˆ›å»ºå’Œä½¿ç”¨ä¸‰éƒ¨åˆ†ï¼Œä»Žä»£ç ç»“æž„ä¸Šæ¥ï¼Œå®ƒéžå¸¸åƒå·¥åŽ‚æ¨¡å¼ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºŽï¼Œç­–ç•¥æ¨¡å¼ä¾§é‡â€œç­–ç•¥â€æˆ–â€œç®—æ³•â€è¿™ä¸ªç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œç”¨æ¥è§£å†³æ ¹æ®è¿è¡Œæ—¶çŠ¶æ€ä»Žä¸€ç»„ç­–ç•¥ä¸­é€‰æ‹©ä¸åŒç­–ç•¥çš„é—®é¢˜ï¼Œè€Œå·¥åŽ‚æ¨¡å¼ä¾§é‡å°è£…å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œè¿™é‡Œçš„å¯¹è±¡æ²¡æœ‰ä»»ä½•ä¸šåŠ¡åœºæ™¯çš„é™å®šï¼Œå¯ä»¥æ˜¯ç­–ç•¥ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä¸œè¥¿ã€‚ä»Žè®¾è®¡æ„å›¾ä¸Šæ¥ï¼Œè¿™ä¸¤ä¸ªæ¨¡å¼å®Œå…¨æ˜¯ä¸¤å›žäº‹å„¿ Template Method æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªç®—æ³•éª¨æž¶ï¼Œå¹¶å°†æŸäº›æ­¥éª¤æŽ¨è¿Ÿåˆ°å­ç±»ä¸­å®žçŽ°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼å¯ä»¥è®©å­ç±»åœ¨ä¸æ”¹å˜ç®—æ³•æ•´ä½“ç»“æž„çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰ç®—æ³•ä¸­çš„æŸäº›æ­¥éª¤ã€‚ å›žè°ƒåŸºäºŽç»„åˆå…³ç³»æ¥å®žçŽ°ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ç§å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼›æ¨¡æ¿æ¨¡å¼åŸºäºŽç»§æ‰¿å…³ç³»æ¥å®žçŽ°ï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œæ˜¯ä¸€ç§ç±»ä¹‹é—´çš„å…³ç³»ã€‚ Visitor åœ¨ä¸è¿èƒŒå°è£…åŽŸåˆ™çš„å‰æä¸‹ï¼Œæ•èŽ·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»¥ä¾¿ä¹‹åŽæ¢å¤å¯¹è±¡ä¸ºå…ˆå‰çš„çŠ¶æ€. Structural : ç±»æˆ–å¯¹è±¡çš„ç»„åˆæˆ–ç»„è£…Adapter é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§äº‹åŽçš„è¡¥æ•‘ç­–ç•¥ã€‚é€‚é…å™¨æä¾›è·ŸåŽŸå§‹ç±»ä¸åŒçš„æŽ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼æä¾›çš„éƒ½æ˜¯è·ŸåŽŸå§‹ç±»ç›¸åŒçš„æŽ¥å£ã€‚ ç±»é€‚é…å™¨: é€šè¿‡ç»§æ‰¿å…³ç³» å¯¹è±¡é€‚é…å™¨ï¼šé€šè¿‡ç»„åˆå…³ç³» Proxyä»£ç†æ¨¡å¼åœ¨ä¸æ”¹å˜åŽŸå§‹ç±»æŽ¥å£çš„æ¡ä»¶ä¸‹ï¼Œä¸ºåŽŸå§‹ç±»å®šä¹‰ä¸€ä¸ªä»£ç†ç±»ï¼Œä¸»è¦ç›®çš„æ˜¯æŽ§åˆ¶è®¿é—®ï¼Œè€ŒéžåŠ å¼ºåŠŸèƒ½ï¼Œè¿™æ˜¯å®ƒè·Ÿè£…é¥°å™¨æ¨¡å¼æœ€å¤§çš„ä¸åŒã€‚ Bridgeæœ‰ä¸¤ç§ç†è§£æ–¹å¼ã€‚ç¬¬ä¸€ç§ç†è§£æ–¹å¼æ˜¯â€œå°†æŠ½è±¡å’Œå®žçŽ°è§£è€¦ï¼Œè®©å®ƒä»¬èƒ½ç‹¬ç«‹å¼€å‘ Decorator è£…é¥°å™¨ç±»å’ŒåŽŸå§‹ç±»ç»§æ‰¿åŒæ ·çš„çˆ¶ç±»ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¯¹åŽŸå§‹ç±»â€œåµŒå¥—â€å¤šä¸ªè£…é¥°å™¨ç±» è£…é¥°å™¨ç±»æ˜¯å¯¹åŠŸèƒ½çš„å¢žå¼ºï¼Œè¿™ä¹Ÿæ˜¯è£…é¥°å™¨æ¨¡å¼åº”ç”¨åœºæ™¯çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ã€‚ ä»£ç†æ¨¡å¼ä¸­ï¼Œä»£ç†ç±»é™„åŠ çš„æ˜¯è·ŸåŽŸå§‹ç±»æ— å…³çš„åŠŸèƒ½ï¼Œè€Œåœ¨è£…é¥°å™¨æ¨¡å¼ä¸­ï¼Œè£…é¥°å™¨ç±»é™„åŠ çš„æ˜¯è·ŸåŽŸå§‹ç±»ç›¸å…³çš„å¢žå¼ºåŠŸèƒ½ã€‚ å¯¹äºŽä¸ºä»€ä¹ˆå¿…é¡»ç»§æ‰¿è£…é¥°å™¨çˆ¶ç±» FilterInputStreamçš„æ€è€ƒï¼šè£…é¥°å™¨å¦‚BufferedInputStreamç­‰ï¼Œæœ¬èº«å¹¶ä¸çœŸæ­£å¤„ç†read()ç­‰æ–¹æ³•ï¼Œè€Œæ˜¯ç”±æž„é€ å‡½æ•°ä¼ å…¥çš„è¢«è£…é¥°å¯¹è±¡ï¼šInputStreamï¼ˆå®žé™…ä¸Šæ˜¯FileInputStreamæˆ–è€…ByteArrayInputStreamç­‰å¯¹è±¡ï¼‰æ¥å®Œæˆçš„ã€‚å¦‚æžœä¸é‡å†™é»˜è®¤çš„read()ç­‰æ–¹æ³•ï¼Œåˆ™æ— æ³•å®Œæˆå¦‚FileInputStreamæˆ–è€…ByteArrayInputStreamç­‰å¯¹è±¡æ‰€çœŸæ­£å®žçŽ°çš„readåŠŸèƒ½ã€‚æ‰€ä»¥å¿…é¡»é‡å†™å¯¹åº”çš„æ–¹æ³•ï¼Œä»£ç†ç»™è¿™äº›è¢«è£…é¥°å¯¹è±¡è¿›è¡Œå¤„ç†ï¼ˆè¿™ä¹Ÿæ˜¯ç±»ä¼¼äºŽä»£ç†æ¨¡å¼çš„åœ°æ–¹ï¼‰ã€‚å¦‚æžœåƒDataInputStreamå’ŒBufferedInputStreamç­‰æ¯ä¸ªè£…é¥°å™¨éƒ½é‡å†™çš„è¿™äº›æ–¹æ³•è¯ï¼Œä¼šå­˜åœ¨å¤§é‡é‡å¤çš„ä»£ç ã€‚æ‰€ä»¥è®©å®ƒä»¬éƒ½ç»§æ‰¿FilterInputStreamæä¾›çš„é»˜è®¤å®žçŽ°ï¼Œå¯ä»¥å‡å°‘ä»£ç é‡å¤ï¼Œè®©è£…é¥°å™¨åªèšç„¦åœ¨å®ƒè‡ªå·±çš„è£…é¥°åŠŸèƒ½ä¸Šå³å¯ã€‚ https://noteforme.github.io/2017/09/12/JavaIo/ Facade é—¨é¢æ¨¡å¼ é—¨é¢æ¨¡å¼ä¸ºå­ç³»ç»Ÿæä¾›ä¸€ç»„ç»Ÿä¸€çš„æŽ¥å£ï¼Œå®šä¹‰ä¸€ç»„é«˜å±‚æŽ¥å£è®©å­ç³»ç»Ÿæ›´æ˜“ç”¨ã€‚è¿™ä¸ªå®šä¹‰å¾ˆç®€æ´ï¼Œæˆ‘å†è¿›ä¸€æ­¥è§£é‡Šä¸€ä¸‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªç³»ç»Ÿ Aï¼Œæä¾›äº† aã€bã€cã€d å››ä¸ªæŽ¥å£ã€‚ç³»ç»Ÿ B å®ŒæˆæŸä¸ªä¸šåŠ¡åŠŸèƒ½ï¼Œéœ€è¦è°ƒç”¨ A ç³»ç»Ÿçš„ aã€bã€d æŽ¥å£ã€‚åˆ©ç”¨é—¨é¢æ¨¡å¼ï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ªåŒ…è£¹ aã€bã€d æŽ¥å£è°ƒç”¨çš„é—¨é¢æŽ¥å£ xï¼Œç»™ç³»ç»Ÿ B ç›´æŽ¥ä½¿ç”¨ Composite ç»„åˆæ¨¡å¼ å°†ä¸€ç»„å¯¹è±¡ç»„ç»‡ï¼ˆComposeï¼‰æˆæ ‘å½¢ç»“æž„ï¼Œä»¥è¡¨ç¤ºä¸€ç§â€œéƒ¨åˆ† - æ•´ä½“â€çš„å±‚æ¬¡ç»“æž„ã€‚ç»„åˆè®©å®¢æˆ·ç«¯ï¼ˆåœ¨å¾ˆå¤šè®¾è®¡æ¨¡å¼ä¹¦ç±ä¸­ï¼Œâ€œå®¢æˆ·ç«¯â€ä»£æŒ‡ä»£ç çš„ä½¿ç”¨è€…ã€‚ï¼‰å¯ä»¥ç»Ÿä¸€å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„å¤„ç†é€»è¾‘ã€‚ ç»„åˆæ¨¡å¼çš„è®¾è®¡æ€è·¯ï¼Œä¸Žå…¶è¯´æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå€’ä¸å¦‚è¯´æ˜¯å¯¹ä¸šåŠ¡åœºæ™¯çš„ä¸€ç§æ•°æ®ç»“æž„å’Œç®—æ³•çš„æŠ½è±¡ã€‚å…¶ä¸­ï¼Œæ•°æ®å¯ä»¥è¡¨ç¤ºæˆæ ‘è¿™ç§æ•°æ®ç»“æž„ï¼Œä¸šåŠ¡éœ€æ±‚å¯ä»¥é€šè¿‡åœ¨æ ‘ä¸Šçš„é€’å½’éåŽ†ç®—æ³•æ¥å®žçŽ°ã€‚ Flayweight äº«å…ƒæ¨¡å¼ å¦‚æžœè¿™äº›é‡å¤çš„å¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨äº«å…ƒæ¨¡å¼å°†å¯¹è±¡è®¾è®¡æˆäº«å…ƒï¼Œåœ¨å†…å­˜ä¸­åªä¿ç•™ä¸€ä»½å®žä¾‹ï¼Œä¾›å¤šå¤„ä»£ç å¼•ç”¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ï¼Œèµ·åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„. å®žé™…ä¸Šï¼Œä¸ä»…ä»…ç›¸åŒå¯¹è±¡å¯ä»¥è®¾è®¡æˆäº«å…ƒï¼Œå¯¹äºŽç›¸ä¼¼å¯¹è±¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™äº›å¯¹è±¡ä¸­ç›¸åŒçš„éƒ¨åˆ†ï¼ˆå­—æ®µï¼‰æå–å‡ºæ¥ï¼Œè®¾è®¡æˆäº«å…ƒï¼Œè®©è¿™äº›å¤§é‡ç›¸ä¼¼å¯¹è±¡å¼•ç”¨è¿™äº›äº«å…ƒã€‚ æ€è€ƒ: æå–ç›¸åŒå¯¹è±¡ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦åˆ›å»ºç›¸åŒçš„æ•°é‡çš„å¯¹è±¡ï¼Œåªæ˜¯å­—æ®µçœç•¥äº† https://github.com/mxg133/learnforJava_DesignPattern è®¾è®¡æ¨¡å¼ åŽŸåˆ™ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™1-å•ä¸€èŒè´£åŽŸåˆ™ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™2-é‡Œæ°æ›¿æ¢åŽŸåˆ™ å­ç±»å¿…é¡»å®žçŽ°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸å¾—é‡å†™ï¼ˆè¦†ç›–ï¼‰çˆ¶ç±»çš„éžæŠ½è±¡ï¼ˆå·²å®žçŽ°ï¼‰æ–¹æ³•ï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™è§„å®šï¼Œå­ç±»ä¸èƒ½è¦†å†™çˆ¶ç±»å·²å®žçŽ°çš„æ–¹æ³•ã€‚çˆ¶ç±»ä¸­å·²å®žçŽ°çš„æ–¹æ³•å…¶å®žæ˜¯ä¸€ç§å·²å®šå¥½çš„è§„èŒƒå’Œå¥‘çº¦ï¼Œå¦‚æžœæˆ‘ä»¬éšæ„çš„ä¿®æ”¹äº†å®ƒï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚ å­ç±»å®Œç¾Žç»§æ‰¿çˆ¶ç±»çš„è®¾è®¡åˆè¡·ï¼Œå¹¶åšäº†å¢žå¼º å…­å¤§è®¾è®¡åŽŸåˆ™ä¹‹é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLSPï¼‰ - ç®€ä¹¦ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™3-ä¾èµ–å€’ç½®åŽŸåˆ™ é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºŽåº•å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ï¼ŒæŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºŽç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™4-æŽ¥å£éš”ç¦»åŽŸåˆ™ æŽ¥å£éš”ç¦»åŽŸåˆ™:Clients should not be forced to depend upon interfaces that they do not use.ä¸Žå¤–éƒ¨å…³ç³»ä¸Šåªä¾èµ–éœ€è¦çš„æŠ½è±¡ æŽ¥å£éš”ç¦»åŽŸåˆ™çš„å…³é”®æ˜¯æŽ¥å£ä»¥åŠè¿™ä¸ªæŽ¥å£è¦å°ï¼Œå¦‚ä½•å°å‘¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦ä¸ºä¸“é—¨çš„ç±»åˆ›å»ºä¸“é—¨çš„æŽ¥å£ï¼Œè¿™ä¸ªæŽ¥å£åªå¯¹å®ƒæœ‰æ•ˆï¼Œä¸è¦è¯•å›¾è®©ä¸€ä¸ªæŽ¥å£åŒ…ç½—ä¸‡è±¡ï¼Œè¦å»ºç«‹æœ€å°çš„ä¾èµ–å…³ç³» 18 | ç†è®ºå››ï¼šæŽ¥å£éš”ç¦»åŽŸåˆ™æœ‰å“ªä¸‰ç§åº”ç”¨ï¼ŸåŽŸåˆ™ä¸­çš„â€œæŽ¥å£â€è¯¥å¦‚ä½•ç†è§£ï¼Ÿ_æŽ¥å£éš”ç¦»åŽŸåˆ™æœ‰å“ªä¸‰ç§åº”ç”¨?åŽŸåˆ™ä¸­çš„æŽ¥å£è¯¥å¦‚ä½•ç†è§£?-CSDNåšå®¢ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™5-è¿ªç±³ç‰¹æ³•åˆ™ å‡å°‘ä¾èµ– Each unit should have only limited knowledge about other units: only units â€œcloselyâ€ related to the current unit. Or: Each unit should only talk to its friends; Donâ€™t talk to strangers ä¸€ä¸ªç±»åº”è¯¥åº”è¯¥å¯¹å…¶ä»–ç±»å°½å¯èƒ½äº†è§£å¾—æœ€å°‘ï¼›ç±»åªä¸Žç›´æŽ¥çš„æœ‹å‹é€šä¿¡ç­‰ç­‰ã€‚ä½†æ˜¯å…¶æœ€ç»ˆç›®çš„åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯è®©ç±»é—´è§£è€¦ã€‚ https://tianweili.github.io/2015/02/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/ è®¾è®¡æ¨¡å¼å…­å¤§åŽŸåˆ™6-å¼€é—­åŽŸåˆ™ æŽ§åˆ¶åè½¬ åœ¨ä½¿ç”¨æ¡†æž¶ä¹‹åŽï¼Œæ•´ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹é€šè¿‡æ¡†æž¶æ¥æŽ§åˆ¶ã€‚æµç¨‹çš„æŽ§åˆ¶æƒä»Žç¨‹åºå‘˜â€œåè½¬â€ç»™äº†æ¡†æž¶ã€‚ è°ˆä¸€è°ˆè‡ªå·±å¯¹ä¾èµ–ã€å…³è”ã€èšåˆå’Œç»„åˆä¹‹é—´åŒºåˆ«çš„ç†è§£ http://blog.itpub.net/69952849/viewspace-2672009/ è®¾è®¡æ¨¡å¼ä¹‹ç¾Žè¿ªç±³ç‰¹æ³•åˆ™çš„æè¿°ä¸ºï¼šä¸è¯¥æœ‰ç›´æŽ¥ä¾èµ–å…³ç³»çš„ç±»ä¹‹é—´ï¼Œä¸è¦æœ‰ä¾èµ–ï¼›æœ‰ä¾èµ–å…³ç³»çš„ç±»ä¹‹é—´ï¼Œå°½é‡åªä¾èµ–å¿…è¦çš„æŽ¥å£ã€‚ å…³äºŽAndroidè®¾è®¡æ¨¡å¼ï¼Œè®¾è®¡æ¨¡å¼é¢è¯•å¿…ä¼š - ç®€ä¹¦ https://juejin.im/post/6844903591686176776 GitHub - Meng997998&#x2F;AndroidJX: Flutter+Kotlin+å°ç¨‹åº+é¢è¯•å¤§å…¨+é¢ç»ã€‚åŠ BATæŠ€æœ¯äº¤æµqç¾¤ï¼›708683109 vx[xx13414521]å…è´¹é¢†å–èµ„æ–™, æ·±å…¥äº†è§£volatileå…³é”®å­—å…³é”®å­—volatileå¯ä»¥ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œ - æŽ˜é‡‘ GitHub - JsonChao&#x2F;Awesome-Android-Interview: :fire: A awesome android expert interview questions and answersï¼ˆcontinuous updating â€¦ï¼‰ ä¸€å¹´ç»éªŒ Android å¼€å‘é¢ç»æ€»ç»“19 å¹´åŒéžæœ¬ç§‘æ¯•ä¸šï¼Œæ´‹æ´‹æ´’æ´’çš„å†™äº†ä¸€å¹´å¤šä¸šåŠ¡ï¼Œä¹æœˆä»½å¼€å§‹é¢è¯•ï¼Œå°†ä¸€äº›é¢è¯•é¢˜åˆ†äº«ç»™ - æŽ˜é‡‘ å¹¶å‘å•ä¾‹ä¸ºä»€ä¹ˆä½¿ç”¨volatileä¿®é¥° https://juejin.im/post/6844903605292498958 http://static.kancloud.cn/alex_wsc/mianshi/1811436 https://mp.weixin.qq.com/s/eCotdGOWvSMki062eLjS8g https://mp.weixin.qq.com/s/7DvReHYugl1KClKFGBwSfg å¹³å¸¸æœ‰ç”¨åˆ°ä»€ä¹ˆé”ï¼Œsynchronizedåº•å±‚åŽŸç†æ˜¯ä»€ä¹ˆ é”ä¹‹é—´çš„åŒºåˆ« çº¿ç¨‹é—´åŒæ­¥çš„æ–¹æ³• é˜¿é‡Œç¼–ç¨‹è§„èŒƒä¸å»ºè®®ä½¿ç”¨çº¿ç¨‹æ± ï¼Œä¸ºä»€ä¹ˆï¼Ÿ RXJavaæ€Žä¹ˆåˆ‡æ¢çº¿ç¨‹ å¹³å¸¸æœ‰ç”¨åˆ°ä»€ä¹ˆé”ï¼Œsynchronizedåº•å±‚åŽŸç†æ˜¯ä»€ä¹ˆ ç®€å•æè¿°ä¸‹Handler,Handleræ˜¯æ€Žä¹ˆåˆ‡æ¢çº¿ç¨‹çš„,HandleråŒæ­¥å±éšœ synchronizedæ˜¯å…¬å¹³é”è¿˜æ˜¯éžå…¬å¹³é”,ReteranLockæ˜¯å…¬å¹³é”å—ï¼Ÿæ˜¯æ€Žä¹ˆå®žçŽ°çš„ çº¿ç¨‹é—´åŒæ­¥çš„æ–¹æ³• é”ä¹‹é—´çš„åŒºåˆ« OkHttpæ€Žä¹ˆå®žçŽ°è¿žæŽ¥æ±  å¦‚æžœè®©ä½ æ¥å®žçŽ°ä¸€ä¸ªç½‘ç»œæ¡†æž¶ï¼Œä½ ä¼šè€ƒè™‘ä»€ä¹ˆ è¯´è¯´ä½ å¯¹volatileå­—æ®µæœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ å››ç§çº¿ç¨‹æ± åŽŸç†ï¼Ÿ æ€Žä¹ˆä¸­æ­¢ä¸€ä¸ªçº¿ç¨‹ï¼ŒThread.Interuptä¸€å®šæœ‰æ•ˆå—ï¼Ÿ å¦‚ä½•è®©ä¸¤ä¸ªçº¿ç¨‹å¾ªçŽ¯äº¤æ›¿æ‰“å° çº¿ç¨‹æ± äº†è§£å¤šå°‘ï¼Ÿæ‹’ç»ç­–ç•¥æœ‰å‡ ç§,ä¸ºä»€ä¹ˆæœ‰newSingleThread okhttpçº¿ç¨‹ä½¿ç”¨æ–¹å¼ RXJava RXJavaæ€Žä¹ˆåˆ‡æ¢çº¿ç¨‹ Rxjavaè‡ªå®šä¹‰æ“ä½œç¬¦ JVMAndroid é¢è¯•å¿…å¤‡ä¹‹ JVM ç›¸å…³å£æ°´è¯Java ä¸­çš„è¿è¡Œæ—¶æ•°æ®å¯ä»¥åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºæ ˆ - æŽ˜é‡‘ è®¾è®¡æ¨¡å¼ä¹‹ç¾Ž 25 26 39. 40ä»£ç æ²¡ä»€ä¹ˆäº†è§£ Hashmap æ³¨è§£ä½œç”¨è·¯çº¿å›¾ æ³¨è§£","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[],"author":"Jon"},{"title":"Spring Boot","slug":"spring-boot","date":"2024-05-13T14:11:04.000Z","updated":"2024-09-13T21:02:22.000Z","comments":true,"path":"/2024/05/13/spring-boot/","link":"","permalink":"https://noteforme.github.io/2024/05/13/spring-boot/","excerpt":"","text":"Add Headerhttps://blog.csdn.net/qq_26878363&#x2F;article&#x2F;details&#x2F;102487207","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[],"author":"Jon"},{"title":"WordPress","slug":"wordpress","date":"2024-05-12T10:01:56.000Z","updated":"2025-01-06T13:18:35.395Z","comments":true,"path":"/2024/05/12/wordpress/","link":"","permalink":"https://noteforme.github.io/2024/05/12/wordpress/","excerpt":"","text":"Install guidehttps://www.linuxtuto.com/how-to-install-wordpress-on-debian-12/ Try not to create a &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;wordpress.conf file; instead, make the necessary configurations directly in /etc/nginx/sites-enabled/default . è£…å®Œè¿™ä¸ªåŽï¼Œ ä¹‹å‰æŒ‰ç…§è¿™ä¸ªå®‰è£…, https://shape.host/resources/certbot-installation-guide-on-debian-12 12345678sudo apt updatesudo apt upgradesudo apt install certbot python3-certbot-nginxsudo certbot --apache -d jonblog.site -d www.jonblog.sitecertbot certificatessystemctl status certbot.timercertbot renew --dry-run å¦‚æžœè¿˜æ˜¯ä¸è¡Œï¼ŒæŠŠ/etc/nginx/sites-available/defaultä¹Ÿé…ç½®ä¸Šã€‚ &#x2F;var&#x2F;www&#x2F;html&#x2F;wordpress&#x2F;wp-config.php ç›®å‰è¿™ä¸ªæ²¡æœ‰é…ç½® 12345678/**define(&#x27;FORCE_SSL_ADMIN&#x27;, true);if (strpos($_SERVER[&#x27;HTTP_X_FORWARDED_PROTO&#x27;], &#x27;https&#x27;) !== false) &#123; $_SERVER[&#x27;HTTPS&#x27;] = &#x27;on&#x27;;&#125;*/ set https://jonblog.site forWordPress Address (URL)Site Address (URL) wordpress backuphttps://www.youtube.com/watch?v=2qoX-siH0cY IPV6bridge mode settiing https://www.bilibili.com/video/BV1wa411H7NJ/ https://www.youtube.com/watch?v=t3H8kVQmTu0","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[],"author":"Jon"},{"title":"Intellij idea Clion","slug":"intellij-idea","date":"2024-05-11T01:38:10.000Z","updated":"2025-03-29T15:17:55.183Z","comments":true,"path":"/2024/05/11/intellij-idea/","link":"","permalink":"https://noteforme.github.io/2024/05/11/intellij-idea/","excerpt":"","text":"Ideahttps://blog.lupf.cn/articles/2023/11/12/1699792053397.html ã€è¯·è§£åŽ‹ã€‘IDEA 2023.xæ¿€æ´»è‡³2099å¹´æ’ä»¶ clion å…¨å®¶æ¡¶https://www.jetbrains.com/zh-cn/clion/download/other.html https://blog.lupf.cn/articles/2023/07/10/1689000614618.html ã€è¯·è§£åŽ‹ã€‘Jetbrainså…¨å®¶æ¡¶æœ€æ–°æ°¸ä¹…æ¿€æ´»æ’ä»¶ IDEA 2023.2æ°¸ä¹…æ¿€æ´»ç ´è§£è‡³2099å¹´ï¼ˆäº²æµ‹æœ‰æ•ˆï¼ŒæŒç»­æ›´æ–°ï¼‰ - ç éœ¸éœ¸ IDEA 2023.x æ¿€æ´»è‡³2099å¹´æ’ä»¶æ’ä»¶ä¸‹è½½åœ°å€ï¼šhttps://mbb.lanzouj.com/i7AFo1ene8ghä¸‹è½½å¯†ç ï¼šbcbyæ³¨æ„ï¼šè¯·ä½¿ç”¨ç”µè„‘æµè§ˆå™¨ä¸‹è½½ï¼›æ’ä»¶ä¸­åŒ…å«å®‰è£…è„šæœ¬ï¼Œéƒ¨åˆ†æ€è½¯ä¼šå‡ºçŽ°è¯¯æŠ¥æƒ…å†µï¼Œå¯æ·»åŠ ä¿¡ä»»ï¼(è‹¥ä¸æ”¾å¿ƒï¼Œå¯è‡ªè¡Œé˜…è¯»ä¸€ä¸‹è„šæœ¬æºç åŽå†å®‰è£…) æ’ä»¶å¤‡ç”¨ä¸‹è½½ï¼ˆäºŒé€‰ä¸€ï¼‰åœ°å€ï¼šhttps://www.123pan.com/s/xPY9-ohZvH.htmlä¸‹è½½å¯†ç ï¼šI8XK æ¿€æ´»ç ä¸‹è½½åœ°å€ï¼šå·²ç»æ”¾ç½®åœ¨æ’ä»¶åŒ…ä¸­ï¼Œè¯·åœ¨â€œæ¿€æ´»ç .txtâ€æ–‡ä»¶ä¸­èŽ·å–ï¼› ç½‘é¡µå›¾æ–‡æ•™ç¨‹ï¼š https://blog.lupf.cn/articles/2023/12/01/1701405135406.html å‡ºçŽ°ä»»ä½•é—®é¢˜ï¼Œå¯æ·»åŠ å¾®ä¿¡ï¼ˆmbb2100ï¼‰äº¤æµ","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[],"author":"Jon"},{"title":"kotlin coroutine","slug":"kotlin-coroutine","date":"2024-05-10T06:25:21.000Z","updated":"2025-02-04T13:56:25.376Z","comments":true,"path":"/2024/05/10/kotlin-coroutine/","link":"","permalink":"https://noteforme.github.io/2024/05/10/kotlin-coroutine/","excerpt":"","text":"å¤§è‡´ä¸Šæ˜¯å°†æœ¬æ¥å‡½æ•°è¯¥è¿”å›žçš„å€¼é€šè¿‡å‚æ•°ä¸­çš„å›žè°ƒå‡½æ•°è¿›è¡Œè¿”å›žã€‚ https://flaneur2020.github.io/2020/07/04/kotlin-coroutine-cps/ https://time.geekbang.org/column/article/497868","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[],"author":"Jon"},{"title":"permission_storage","slug":"permission-storage","date":"2023-11-15T14:52:48.000Z","updated":"2025-01-20T14:13:44.633Z","comments":true,"path":"2023/11/15/permission-storage/","link":"","permalink":"https://noteforme.github.io/2023/11/15/permission-storage/","excerpt":"","text":"App data and filesAndroid uses a file system thatâ€™s similar to disk-based file systems on other platforms. The system provides several options for you to save your app data: App-specific storage: Store files that are meant for your appâ€™s use only, either in dedicated directories within an internal storage volume or different dedicated directories within external storage. Use the directories within internal storage to save sensitive information that other apps shouldnâ€™t access. Shared storage: Store files that your app intends to share with other apps, including media, documents, and other files. Preferences: Store private, primitive data in key-value pairs. Databases: Store structured data in a private database using the Room persistence library. https://developer.android.com/guide/topics/data Type of content Access method Permissions needed Can other apps access? Files removed on app uninstall? App-specific files Files meant for your appâ€™s use only From internal storage, getFilesDir() or getCacheDir() From external storage, getExternalFilesDir() or getExternalCacheDir() Never needed for internal storage Not needed for external storage when your app is used on devices that run Android 4.4 (API level 19) or higher No Yes Media Shareable media files (images, audio files, videos) MediaStore API READ_EXTERNAL_STORAGE when accessing other appsâ€™ files on Android 11 (API level 30) or higher READ_EXTERNAL_STORAGE or WRITE_EXTERNAL_STORAGE when accessing other appsâ€™ files on Android 10 (API level 29) Permissions are required for all files on Android 9 (API level 28) or lower Yes, though the other app needs the READ_EXTERNAL_STORAGE permission No Documents and other files Other types of shareable content, including downloaded files Storage Access Framework None Yes, through the system file picker No App preferences Key-value pairs Jetpack Preferences library None No Yes Database Structured data Room persistence library None No Yes https://developer.android.com/training/data-storage On Android 4.4 (API level 19) or higher, your app doesnâ€™t need to request any storage-related permissions to access app-specific directories within external storage. The files stored in these directories are removed when your app is uninstalled. https://developer.android.com/training/data-storage/app-specific#external Internal Itâ€™s always available. Files saved here are accessible by only your app. When the user uninstalls your app, the system removes all your appâ€™s files from internal storage. å†…éƒ¨å­˜å‚¨ä¸éœ€è¦ç”³è¯·ä»»ä½•æƒé™ 12345678String fileInnerName = &quot;/inner/img&quot;; //ç›®å½•å //å†…ç½®å­˜å‚¨ç¼“å­˜ç›®å½•File fileCache = new File(getActivity().getCacheDir(), fileInnerName); // /data/data/com.android.imageloaderstorage/cache/inner/img if (!fileCache.exists()) &#123; boolean isInner = fileCache.mkdirs(); &#125; Log.i(&quot; FileFragment &quot;, &quot; &quot; + fileCache.getAbsolutePath()); ç”±æ­¤å¯ä»¥çœ‹åˆ° ç»å¯¹è·¯å¾„ï¼š Context.getCacheDir()ï¼š&#x2F;data&#x2F;data&#x2F;åº”ç”¨åŒ…å&#x2F;cache&#x2F; fileInnerName External Storage å¤–éƒ¨å­˜å‚¨ä¹Ÿåˆ†ä¸¤ç§ Private files (å¤–éƒ¨ç§æœ‰å­˜å‚¨) ã€Public files (å¤–éƒ¨å…¬æœ‰å­˜å‚¨) https://developer.android.com/guide/topics/manifest/uses-permission-element.html (context.getExternalCacheDir()) 1234567891011121314/* Checks if external storage is available for read and write */ String fileOutName = &quot;/AutDir/fileOut&quot;; if (!isExternalStorageWritable()) &#123; return; &#125; if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.KITKAT) &#123; File fileOut = new File(getActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES) + fileOutName); // /storage/emulated/0/Android/data/com.android.imageloaderstorage/files/Pictures/AutDir/fileOut boolean flag = fileOut.mkdirs(); Log.i(&quot;FileFragment&quot;, fileOut.getAbsolutePath()); &#125; //ç¼“å­˜ç›®å½• File fileOutCache = new File(getActivity().getExternalCacheDir() + fileOutName); // /storage/emulated/0/Android/data/com.android.imageloaderstorage/cache/AutDir/fileOut Boolean isInner = fileOutCache.mkdirs(); Log.i(&quot;FileFragment&quot;, &quot; è·¯å¾„ &quot; + fileOutCache.getAbsolutePath()); ç‰¹åˆ«æ³¨æ„ mkdir(),mkdirs(),createNewFile()çš„åŒºåˆ« createNewFile:æ–°å»ºæ–‡ä»¶ï¼ˆéžç›®å½•ï¼‰ mkdirï¼šæ–°å»ºç›®å½• mkdirsï¼šæ–°å»ºç›®å½•ï¼Œä¸Žmkdirçš„åŒºåˆ«æ˜¯ï¼šæ¯”å¦‚ mkdirsï¼ˆâ€œD:&#x2F;test&#x2F;test2â€) å¦‚æžœtest , ä¸å­˜åœ¨ä¼šåˆ›å»ºï¼Œç„¶åŽåˆ›å»ºtest2ï¼Œå¦‚æžœæ˜¯ mkdirï¼ˆâ€œD:&#x2F;test&#x2F;test2â€) ï¼Œå¦‚æžœ testä¸å­˜åœ¨ï¼Œä¼šå¤±è´¥ã€‚ android ioè¾“å…¥æ–‡ä»¶ 12345new File(param1,param2); param1 File,param2 Stringç±»åž‹String dir = StorageUtils.getCacheDirectory(this);String apkDIR = &quot;apkdir.apk&quot;;File apkFile = new File(dir, apkDIR); å‚è€ƒï¼š https://developer.android.com/training/permissions/requesting.htmlhttps://developer.android.com/guide/topics/permissions/requesting.htmlhttps://developer.android.com/training/basics/data-storage/files.html?hl=zh-cn Android 13åª’ä½“æ–‡ä»¶è®¿é—®æƒé™é€‚é…_read_media_images-CSDNåšå®¢ Android 13 åª’ä½“æƒé™é€‚é…æŒ‡å— - æŽ˜é‡‘ Permissions and access to external storageAndroid defines the following storage-related permissions: READ_EXTERNAL_STORAGE, WRITE_EXTERNAL_STORAGE, and MANAGE_EXTERNAL_STORAGE. MANAGE_EXTERNAL_STORAGEAndroid 11 introduces the MANAGE_EXTERNAL_STORAGE permission, which provides write access to files outside the app-specific directory and MediaStore. To learn more about this permission, and why most apps donâ€™t need to declare it to fulfill their use cases, see the guide on how to manage all files on a storage device. The answer is NO it is not required if you are simply capturing image from camera or by gallery by calling an intent (calling other app to perform some task for you ) in our case this other app would be the camera application in your mobile https://medium.com/@bilalhameed0800/is-permission-required-for-android-capture-image-from-camera-and-gallery-intent-4812964e8c9a https://developer.android.com/training/data-storage Preparing for scoped storage (Android Dev Summit &#39;19) - YouTube android SDå¡ä¸»è¦æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ Internal ã€ External Storage external storage permission è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶ï¼Œä¸éœ€è¦æƒé™ ï¼Œä¸æ˜¯è‡ªå·±çš„ éœ€è¦ READ_EXTERNAL_STORAGE photo pickerhttps://developer.android.com/about/versions/14/changes/partial-photo-video-access if your app is running on a device with Android 14 (API level 34) or higher, limit access to selected photos and videos, request â€œManifest.permission.READ_MEDIA_IMAGESâ€ will show READ_MEDIA_VISUAL_USER_SELECTEDè¿™ä¸ªé™åˆ¶å’Œ iOS ç›¸ä¼¼ï¼ŒAndroid 14 æä¾›äº†å¯¹ç…§ç‰‡å’Œè§†é¢‘çš„éƒ¨åˆ†è®¿é—®æƒé™ã€‚å½“æ‚¨è®¿é—®åª’ä½“æ•°æ®æ—¶ï¼Œç”¨æˆ·å°†çœ‹åˆ°ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œæç¤ºç”¨æˆ·æŽˆäºˆå¯¹æ‰€æœ‰åª’ä½“çš„è®¿é—®ã€æˆ–è€…æŽˆäºˆå•ä¸ªç…§ç‰‡&#x2F;è§†é¢‘çš„è®¿é—®æƒé™ï¼Œè¯¥æ–°åŠŸèƒ½å°†é€‚ç”¨äºŽ Android 14 ä¸Šæ‰€æœ‰åº”ç”¨ç¨‹åºï¼Œæ— è®ºå…¶ targetSdkVersion æ˜¯å¤šå°‘ è°·æ­Œåœ¨ API 33ï¼ˆAndroid 13ï¼‰ä¸Šé¢å¼•å…¥äº† READ_MEDIA_IMAGES å’Œ READ_MEDIA_VIDEO è¿™ä¸¤ä¸ªæƒé™ï¼Œç›®å‰é’ˆå¯¹è¿™ä¸¤ä¸ªæƒé™åœ¨ Android 14 ä¸Šé¢æœ‰æ–°çš„å˜åŠ¨ï¼Œå…·ä½“çš„å˜åŠ¨ç‚¹å°±æ˜¯æ–°å¢žäº† READ_MEDIA_VISUAL_USER_SELECTEDæƒé™ï¼Œé‚£ä¹ˆè¿™ä¸ªæƒé™çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ READ_MEDIA_IMAGES å’Œ READ_MEDIA_VIDEO æ˜¯ç”³è¯·å›¾ç‰‡å’Œè§†é¢‘æƒé™çš„ï¼Œä½†æ˜¯è¿™æ ·ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“ç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·åˆ°æƒé™åŽï¼Œå°±æ‹¥æœ‰äº†æ‰‹æœºç›¸å†Œä¸­æ‰€æœ‰ç…§ç‰‡å’Œè§†é¢‘çš„è®¿é—®æƒé™ï¼Œè¿™æ˜¯ååˆ†å±é™©çš„ï¼Œä¹Ÿæ˜¯éžå¸¸ä¸å¯æŽ§çš„ï¼Œå› ä¸ºç”¨æˆ·ä¹Ÿæ— æ³•çŸ¥é“ç¬¬ä¸‰æ–¹åº”ç”¨ä¼šå¹²ä»€ä¹ˆï¼Œæ‰€ä»¥è°·æ­Œåœ¨ API 34ï¼ˆAndroid 14ï¼‰å¼•å…¥äº†è¿™ä¸ªæƒé™ï¼Œè¿™æ ·ç”¨æˆ·æ‹¥æœ‰äº†æ›´å¤šçš„é€‰æ‹©ï¼Œå¯ä»¥å°†ç›¸å†Œä¸­æ‰€æœ‰çš„å›¾ç‰‡å’Œè§†é¢‘æŽˆäºˆç»™ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œä¹Ÿå¯ä»¥å°†éƒ¨åˆ†çš„å›¾ç‰‡å’Œè§†é¢‘ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚ è®²å®Œäº†è¿™ä¸ªç‰¹æ€§çš„æ¥é¾™åŽ»è„‰ï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥è®²è®²è¿™ä¸ªæƒé™å¦‚ä½•é€‚é…ï¼Œå¦‚æžœä½ çš„åº”ç”¨ç”³è¯·äº† READ_MEDIA_IMAGES æˆ–è€… READ_MEDIA_VIDEO æƒé™ï¼Œå¹¶ä¸” targetSdkVersion å¤§äºŽç­‰äºŽ 33ï¼ˆAndroid 13ï¼‰ï¼Œé‚£ä¹ˆéœ€è¦åœ¨ç”³è¯·æƒé™æ—¶æºå¸¦ä¸Š READ_MEDIA_VISUAL_USER_SELECTED æƒé™æ–¹èƒ½æ­£å¸¸ç”³è¯·ï¼Œå¦‚æžœä¸æºå¸¦ä¸Š READ_MEDIA_VISUAL_USER_SELECTED æƒé™å°±ç”³è¯· READ_MEDIA_IMAGES æˆ–è€… READ_MEDIA_VIDEO æƒé™ï¼Œä¼šå¼¹å‡ºæƒé™è¯¢é—®å¯¹è¯æ¡†ï¼Œä½†æ˜¯å¦‚æžœç”¨æˆ·æ˜¯é€‰æ‹©å…¨éƒ¨æŽˆäºˆï¼Œé‚£ä¹ˆ READ_MEDIA_IMAGES æˆ–è€… READ_MEDIA_VIDEO æƒé™çŠ¶æ€æ˜¯å·²æŽˆäºˆçš„çŠ¶æ€ï¼Œå¦‚æžœç”¨æˆ·æ˜¯é€‰æ‹©éƒ¨åˆ†æŽˆäºˆï¼Œé‚£ä¹ˆ READ_MEDIA_IMAGES æˆ–è€… READ_MEDIA_VIDEO æƒé™çŠ¶æ€æ˜¯å·²æ‹’ç»çš„çŠ¶æ€ï¼Œå‡è®¾æ­¤æ—¶æœ‰æºå¸¦äº† READ_MEDIA_VISUAL_USER_SELECTED æƒé™çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆ READ_MEDIA_VISUAL_USER_SELECTED æƒé™æ˜¯å·²æŽˆäºˆçš„çŠ¶æ€ã€‚ çœ‹åˆ°è¿™é‡Œï¼Œè„‘æ´žå¤§çš„åŒå­¦å¯èƒ½æœ‰æƒ³æ³•äº†ï¼Œé‚£æˆ‘ä¸ç”³è¯· READ_MEDIA_IMAGES æˆ–è€… READ_MEDIA_VIDEO æƒé™ï¼Œæˆ‘å°±åªç”³è¯· READ_MEDIA_VISUAL_USER_SELECTED æƒé™è¡Œä¸è¡Œå•Šï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œæˆ‘æ›¿å¤§å®¶è¯•éªŒè¿‡äº†ï¼Œè¿™ä¸ªæƒé™ç”³è¯·ä¼šåœ¨ä¸ä¼šè¯¢é—®ç”¨æˆ·çš„æƒ…å†µä¸‹ï¼Œè¢«ç³»ç»Ÿç›´æŽ¥æ‹’ç»æŽ‰ã€‚ å¦å¤–éœ€è¦çš„ä¸€ç‚¹æ˜¯ READ_MEDIA_VISUAL_USER_SELECTED å±žäºŽå±é™©æƒé™ï¼Œé™¤äº†åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”³è¯·å¤–ï¼Œè¿˜éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œã€‚ [Bug]ï¼šå®‰å“14ï¼Œç”³è¯·READ_MEDIA_IMAGESæ—¶ï¼Œå½“ç”¨æˆ·é€‰æ‹©éƒ¨åˆ†å…è®¸åŽï¼ŒREAD_MEDIA_IMAGESçš„isGranted&#x3D;true Â· Issue #244 Â· getActivity&#x2F;XXPermissions Â· GitHub https://developer.android.com/training/data-storage/shared/photopicker#kotlin 12345678910111213141516var filter by remember &#123; mutableStateOf&lt;VisualMediaType&gt;(ImageAndVideo) &#125;/** * [PickMultipleVisualMedia] is an ActivityResultContract that will launch the photo picker * intent while providing an enhanced API over the available customisations options (media type, * max number of items). * * If you&#x27;re looking for single selection only, use PickVisualMedia ActivityResultContract * instead. */ val pickMultipleMedia = rememberLauncherForActivityResult(PickMultipleVisualMedia(maxItems)) &#123; uris -&gt; selectedMedia = uris &#125; pickMultipleMedia.launch(PickVisualMediaRequest(filter))","categories":[],"tags":[{"name":"permission","slug":"permission","permalink":"https://noteforme.github.io/tags/permission/"}]},{"title":"notification","slug":"notification","date":"2023-11-15T00:30:59.000Z","updated":"2023-12-06T00:30:28.431Z","comments":true,"path":"2023/11/15/notification/","link":"","permalink":"https://noteforme.github.io/2023/11/15/notification/","excerpt":"","text":"Notification switch1NotificationManagerCompat.from(this).areNotificationsEnabled() channel switch1NotificationManager.IMPORTANCE_NONE == NotificationManagerCompat.from(this).getNotificationChannel(CHANNEL_ID)?.importance ======= https://stackoverflow.com/questions/71159130/custom-android-notification-sound Android 13 and abovegranted permission and channel is nullgranted permission and channel open Android 8 and above - below Android 13notfication switch openchannel switch open Blow Android 8notification switch open Channel SoundSince Android Oreo / 8 the Notificationsound is coming from the Channel and can only be set the first time you add the channel via your channel.setSound(). If you want to change it later on you need to delete the channel and then re-add it to the system. The user will be warned about that behaviour though (App deleted channels X amount of times). Custom Android notification sound - Stack Overflow","categories":[],"tags":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/tags/ANDROID/"}]},{"title":"compose_layout","slug":"compose-layout","date":"2023-08-20T13:41:06.000Z","updated":"2024-04-11T23:35:14.893Z","comments":true,"path":"2023/08/20/compose-layout/","link":"","permalink":"https://noteforme.github.io/2023/08/20/compose-layout/","excerpt":"","text":"Compose study pathJetpack Compose for Android Developers Compose Guide document Images and graphics in Compose &nbsp;|&nbsp; Jetpack Compose &nbsp;|&nbsp; Android Developers ScaffoldJetpack Compose basics &nbsp;|&nbsp; Android Developers GitHub - android/codelab-android-compose GitHub - android/codelab-android-compose Jetpack Compose basics &nbsp;|&nbsp; Android Developers Jetpack Compose for Android Developers Compose test Testing your Compose layout &nbsp;|&nbsp; Jetpack Compose &nbsp;|&nbsp; Android Developers 5 ways Compose improves UI testing - YouTube Llaazy layouts in Compose - YouTube","categories":[],"tags":[{"name":"compose","slug":"compose","permalink":"https://noteforme.github.io/tags/compose/"}]},{"title":"LC_DP_BAG","slug":"LC-DP-BAG","date":"2023-08-09T14:42:49.000Z","updated":"2023-10-18T13:59:55.119Z","comments":true,"path":"2023/08/09/LC-DP-BAG/","link":"","permalink":"https://noteforme.github.io/2023/08/09/LC-DP-BAG/","excerpt":"","text":"å¯¹äºŽ01èƒŒåŒ…ï¼Œç‰©å“iï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯ä»Ž0å¼€å§‹æ›´å¥½ã€‚ çº¯01èƒŒåŒ…:è£…æ»¡è¿™ä¸ªèƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚ åˆ†å‰²ç­‰å’Œå­é›†ï¼šèƒ½å¦è£…æ»¡ã€‚ æœ¬é¢˜: ç»™ä¸€ä¸ªèƒŒåŒ…å®¹é‡ï¼Œæœ‰å¤šå°‘ç§æ–¹å¼è£…æ»¡ã€‚ è§£æ³•ä¸€éšæƒ³å½• èƒŒåŒ…é—®é¢˜ç†è®ºåŸºç¡€ è¿™ä¸ªè§†é¢‘è®²çš„å¾ˆå¥½ https://www.bilibili.com/video/BV1jT4y1o71J/ 0/1 Knapsack problem | Dynamic Programming - YouTube https://www.bilibili.com/video/BV1cg411g7Y6/ The 0/1 Knapsack Problem (Demystifying Dynamic Programming) - YouTube æœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸ºW çš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„é‡é‡æ˜¯weight[i]ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯ value[i] ã€‚ 1234567dp[i][j] [0,i]ç‰©å“ä»»å–æ”¾å®¹é‡ä¸ºjçš„èƒŒåŒ…ä¸æ”¾ç‰©å“i : dp[i-1][j]æ”¾ç‰©å“i : dp[i-1][j-weight[i]] + value[i]ï¼Œ é‚£ä¹ˆå°±æ˜¯å‰i-1ç§ç‰©å“çš„é€‰æ‹©ï¼Œå‡åŽ»å½“å‰iç‰©å“çš„é‡é‡ + å½“å‰iç‰©å“çš„ä»·å€¼ï¼Œå…¶å®žå°±è½¬åŒ–ä¸º i-1ç§ç‰©å“ j-weight[i]çš„å®¹é‡ä¸‹çš„æœ€å¤§å€¼ã€‚dp[i][j] = max(dp[i-1][j], dp[i-1][j-weight[i]] + value[i]) ä»Žä¸Šé¢çš„é€’æŽ¨å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œå½“å‰å€¼éƒ½æ˜¯ç”± å·¦ä¸Šè§’çš„å€¼ï¼Œå…¶å®žæˆ‘è§‰å¾—æ˜¯æ­£ä¸Šè§’ï¼Œ æ¥é€’æŽ¨å‡ºæ¥çš„ã€‚dp[i-1][j] éšæƒ³å½•çš„è§£æ³•ï¼Œç‰©å“0æ˜¯ç¬¬ä¸€ä¸ªç‰©å“ï¼Œæ‰€ä»¥Xæ–¹å‘åˆå§‹åŒ–æ˜¯æœ‰å€¼çš„ ä¸‹é¢ä¸¤ä¸ªè§†é¢‘ï¼Œx,yéƒ½åˆå§‹åŒ–0ï¼Œæ„Ÿè§‰æ›´å¥½ã€‚ 01èƒŒåŒ…é—®é¢˜ï¼Œè¿™ä¸ªè§†é¢‘è®²çš„å¾ˆå¥½ https://www.bilibili.com/video/BV1pY4y1J7na https://www.bilibili.com/video/BV1K4411X766 å¯¹ç¬¬0è¡Œï¼Œç¬¬0è¡Œæ²¡æœ‰ä»»ä½•ç‰©å“ï¼Œåœ¨ä»»ä½•èƒŒåŒ…å®¹é‡ä¸‹ï¼Œå‰0ä¸ªç‰©å“ï¼Œèƒ½è£…è¿›èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ä¸º0. å¯¹ç¬¬0åˆ—ï¼Œç¬¬0åˆ—æ²¡æœ‰ä»»ä½•å®¹é‡ï¼Œåœ¨ä»»ä½•ç‰©å“éƒ½æ— æ³•æ”¾è¿›èƒŒåŒ…ï¼Œå› æ­¤ä»·å€¼ä¹Ÿéƒ½ä¸º0. æœ€åŽä¸€ä¸ªå•å…ƒæ ¼çš„æ•°å­—ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å¾—åˆ°çš„æœ€ç»ˆç­”æ¡ˆã€‚ j sts/LC-DP/2023-09-09-21.54.02.png) [2,1] æ”¾è‘¡è„æƒ…å†µä¸‹ï¼š è‘¡è„å ç”¨2ï¼Œå¹¶ä¸”è‘¡è„æ— æ³•å†æ¬¡è¢«é€‰æ‹© ï¼Œ æ­¤æ—¶é—®é¢˜ä»ŽèƒŒåŒ…å®¹é‡ä¸º2çš„æƒ…å†µä¸‹ï¼Œå¯¹å‰ä¸€ç§ç‰©å“å–èˆé€‰æ‹©åŽèŽ·å¾—çš„å®¹é‡ï¼Œå˜æˆäº†èƒŒåŒ…å®¹é‡æœ€å¤§ä¸º0çš„æƒ…å†µä¸‹ï¼Œå¯¹å‰0ç§ç‰©å“è¿›è¡Œå–èˆé€‰æ‹©åŽèŽ·å¾—çš„æœ€å¤§ä»·å€¼ã€‚ ç¬¬2è¡Œ3åˆ—çš„å•å…ƒæ ¼ï¼ŒèƒŒåŒ…å®¹é‡æœ€å¤§ä¸º3çš„æƒ…å†µä¸‹ï¼Œå¯¹å‰é¢2ç§ç‰©å“è¿›è¡Œé€‰æ‹©ã€‚ å¯¹äºŽiè¡Œjåˆ—çš„å•å…ƒæ ¼ï¼ŒèƒŒåŒ…å®¹é‡æœ€å¤§ä¸ºjçš„æƒ…å†µä¸‹ï¼Œå¯¹å‰é¢iç§ç‰©å“è¿›è¡Œé€‰æ‹©ï¼Œèƒ½ä½¿å¾—èƒŒåŒ…ä»·å€¼æœ€å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå•å…ƒæ ¼éƒ½æ˜¯å½“å‰æ¡ä»¶ä¸‹çš„æœ€ä¼˜è§£ã€‚ ä¸‹é¢è¿™ä¸ªä»£ç ï¼ŒæŠŠx,y 0çš„ç‚¹éƒ½åˆå§‹åŒ–ä¸º0. æ”¾å…¥çš„ç‰©å“ https://www.bilibili.com/video/BV1jT4y1o71J/ caculate what goods were added in bag. 33:00 å…ˆä»Ždp[5][10] ,17å¼€å§‹ï¼Œ15 !=17 æ‰€ä»¥ ç‰©å“5æ”¾å…¥äº†èƒŒåŒ…, è¿™ä¸ªæ˜¯ dp[4][10-3]=11+6 å¾—å‡ºæ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨10-3 èµ°åˆ°äº†dp[4][7], dp[4][7] 11 == dp[3][7] æ‰€ä»¥ç‰©å“4æ²¡æœ‰æ”¾å…¥èƒŒåŒ…ã€‚ç„¶åŽèµ°åˆ°äº†dp[3][7], dp[3][7] 11 != dp[2][7] 9 , æ‰€ä»¥ç‰©å“3æ”¾å…¥èƒŒåŒ…, dp[2][7-4] + 3 = 9 . ç„¶åŽèµ°åˆ°äº† dp[2[3] dp[2][3] == dp[1][3] ==6,æ‰€ä»¥ç‰©å“2æ²¡æœ‰æ”¾å…¥èƒŒåŒ…, ç„¶åŽèµ°åˆ°äº† dp[1][3] dp[1][3] != dp[0][3] è¯´æ˜Ž ç‰©å“1æ”¾å…¥èƒŒåŒ…ï¼Œdp[0][3-2] + 6 , ç„¶åŽå°±èµ°åˆ°äº†dp[0][1]. and then will impement above code 1234567891011121314151617181920212223242526272829303132333435363738394041424344fun knap01(): Int &#123; val weightArr = arrayOf(1, 3, 4) val valueArr = arrayOf(15, 20, 30) val n = 5 // the number of goods val w = 8// the max of bag weight val dp = Array(n + 1) &#123; IntArray(w + 1) &#125; // 0 is nothing , so need one more //å³dp[i][j] è¡¨ç¤ºä»Žä¸‹æ ‡ä¸º[0-i]çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œä»·å€¼æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘ã€‚ //åˆå§‹åŒ– //j==0 , èƒŒåŒ…å®¹é‡ä¸º0ï¼Œæ”¾ç‰©å“ for (i in 1 until n) &#123; //number dp[i][0] = 0 &#125; // i==0 nothing to put in bag for (j in 1 until w) &#123; //weights dp[0][j] = 0 &#125; for (i in 0 until n) &#123; //number // i==0 , nothing to put in bag for (j in 0 until w) &#123; //weights if (weightArr[i] &gt; j) &#123; // ç‰©å“é‡é‡å¤§äºŽ èƒŒåŒ…å®¹é‡ dp[i][j] = dp[i - 1][j] // if object weight &lt; j , then use top item &#125; else &#123; dp[i][j] = Math.max(dp[i - 1][j], dp[i - 1][j - weightArr[i]] + valueArr[i]) &#125; &#125; &#125; //è¿™ä¸ªéœ€è¦åŽç»­çš„çœŸé¢˜éªŒè¯ val addedList = ArrayList&lt;Int&gt;() var j = w for (i in n downTo 0) &#123; if (dp[i - 1][j] &gt;= dp[i][j]) &#123; j-=weightArr[j] &#125; &#125; return dp[n][w]&#125; æ»‘åŠ¨æ•°ç»„ https://www.bilibili.com/video/BV1jT4y1o71J/ 40:00 the video clearly talking about 01 knapstack problem which two ways. æ­£æŽ¨çš„æ—¶å€™ï¼Œæ˜¯æ‹¿ç€æ–°å€¼ï¼Œ åŽ»æ›´æ–°,æ–°çš„å€¼ã€‚æ‰€ä»¥ç¬¬4ä¸ªæ•°ä¼šæ”¾å…¥å¤šæ¬¡ã€‚ å®Œå…¨èƒŒåŒ… 1 - i ç§ç‰©å“å¯ä»¥å– n æ¬¡ã€‚ å®Œå…¨èƒŒåŒ…å°±æ˜¯01èƒŒåŒ… è¿™ä¸ªä»£ç éœ€è¦éªŒè¯ 1234567891011fun knapStackarray(N: Int, W: Int) &#123; val weightArr = arrayOf(1, 3, 4) val valueArr = arrayOf(15, 20, 30) val dp = Array(4) &#123; 0 &#125; for (i in 1..N) &#123; for (j in W downTo weightArr[i]) &#123; // åªæœ‰jå®¹é‡å¤§äºŽå½“å‰ç‰©å“çš„å®¹é‡ï¼Œæ‰ä¼šè€ƒè™‘æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œæ›´æ–°å½“å‰cellçš„å€¼ï¼Œå¦åˆ™å°±ç›´æŽ¥ç”¨ä¸Šä¸€å±‚çš„å€¼ dp[j] = Math.max(dp[j],dp[j-weightArr[i]+valueArr[i]]) &#125; &#125;&#125; 416. åˆ†å‰²ç­‰å’Œå­é›†è½¬åŒ–æˆèƒŒåŒ…é—®é¢˜çš„ï¼Œ1,5,11,5ï¼ŒèƒŒåŒ…å®¹é‡11ï¼Œå‰é¢é¢˜è§£æ˜¯è£…åˆ°æœ€å¤§å€¼ä½†æ˜¯ä¸ä¸€å®šèƒ½è£…æ»¡ï¼Œä½†æ˜¯åœ¨è¿™é‡Œä¸æ˜¯æ‹¿åˆ°æœ€å¤§å€¼ï¼Œæ˜¯è£…åˆ°æœ€å¤§å€¼çš„æƒ…å†µ,è€Œä¸”==11ä¸¤ä¸ªæ¡ä»¶.åˆšå¥½è£…æ»¡ã€‚ ä¸€å¼€å§‹æ‰“å°çš„æ—¶å€™ï¼Œå‘çŽ°è¶…å‡ºäº†target,æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸å¯èƒ½çš„ï¼ŒåŠ å…¥æ”¾å…¥æ–°çš„ç‰©å“åŽï¼Œç•™ä¸‹çš„å®¹é‡åŽ»ä¹‹å‰çš„æœ€å¤§å€¼åŽ»æ‰¾ï¼Œæ‰€ä»¥ä¸å¯èƒ½è¶…è¿‡. 12345678910111213141516171819202122232425262728fun canPartition(nums: IntArray): Boolean &#123; var sum = 0 nums.forEach &#123; sum += it &#125; if (sum % 2 != 0) &#123; return false // will not fill target exactly &#125; val target = sum / 2 val dp = IntArray(target + 1) println(&quot;target $target&quot;) for (i in 0 until nums.size) &#123; println() println(&quot; i $i &quot;) println() for (j in target downTo nums[i]) &#123; println(&quot; j = $j j - nums[i] = $&#123;j - nums[i]&#125; dp[j - nums[i]] $&#123;dp[j - nums[i]]&#125; &quot;) dp[j] = Math.max(dp[j], dp[j - nums[i]] + nums[i]) // ä¸€å¼€å§‹ dp[j] å†™æˆäº†dp[target]æŽ’æŸ¥äº†å¾ˆä¹… print(&quot; dp[j] $&#123;dp[j]&#125; &quot;) &#125; dp.printIntArray() println() &#125; if (dp[target] == target) &#123; return true &#125; return false&#125; 1049. æœ€åŽä¸€å—çŸ³å¤´çš„é‡é‡ II ä¸¤å †çŸ³å¤´å¦‚æžœåˆšå¥½ä¸€æ ·å¤§å°ï¼Œç»“æžœå°±æ˜¯0ï¼Œæ‰€ä»¥æ‰¾å‡ºæœ€æŽ¥è¿‘ä¸­é—´é‡é‡çš„çŸ³å¤´ã€‚ ä¹Ÿå°±æ˜¯è½¬åŒ–æˆ01èƒŒåŒ…é—®é¢˜äº†ã€‚ 12345678910111213141516171819 fun lastStoneWeightII(stones: IntArray): Int &#123; var sum = 0 stones.forEach &#123; sum += it // total sum &#125; val target = sum / 2 val dp = IntArray(target + 1) for (i in 0 until stones.size) &#123; for (j in target downTo stones[i]) &#123;// println(&quot; j = $j j - nums[i] = $&#123;j - stones[i]&#125; dp[j - nums[i]] $&#123;dp[j - stones[i]]&#125; &quot;) dp[j] = Math.max(dp[j - stones[i]] + stones[i], dp[j])// print(&quot; dp[j] $&#123;dp[j]&#125; &quot;) &#125;// dp.printIntArray()// println() &#125; return sum - dp[target]*2 // è¿™æ˜¯target,è€Œä¸æ˜¯ç‰©å“çš„size &#125; 494.ç›®æ ‡å’Œhttps://www.bilibili.com/video/BV16Y411v7Y6/?vd_source=d4c5260002405798a57476b318eccac9 èŠ±èŠ±é…± LeetCode 494. Target Sum ä¸Š - åˆ·é¢˜æ‰¾å·¥ä½œ EP156 - YouTube 12:00 positve æ˜¯æ­£æ•°çš„æ€»å’Œ negative è´Ÿæ•°çš„æ€»å’Œ åˆ†æžpositive - negative = target positive + negative = sum ä¸Šé¢å…¬å¼ç›¸åŠ  positive = (target + sum)/2 ç„¶åŽå°±è½¬åŒ–æˆ 01èƒŒåŒ…é—®é¢˜ , è£…æ»¡å®¹é‡ä¸ºpositiveçš„èƒŒåŒ…ï¼Œæœ‰dp[positive]ç§æ–¹æ³•ã€‚ ç¡®å®šé€’æŽ¨å…¬å¼æœ‰å“ªäº›æ¥æºå¯ä»¥æŽ¨å‡ºdp[j]å‘¢ï¼Ÿ åªè¦æžåˆ°nums[i]ï¼Œå‡‘æˆdp[j]å°±æœ‰dp[j - nums[i]] ç§æ–¹æ³•ã€‚dp[j - nums[i]]ï¼Œ è¯´æ˜Žè£…è¿›nums[i]åŽ,å‰©ä¸‹dp[j - nums[i]]çš„æ–¹æ³•æ•°, ä¸€ç›´å¾€å‰æ‰¾ï¼Œåˆå§‹dp[j]æ•°ç»„çš„å€¼æ˜¯0, ä¾‹å¦‚ï¼šdp[j]ï¼Œj ä¸º5ï¼Œ å·²ç»æœ‰ä¸€ä¸ªç‰©å“1ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[4]ç§æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…ã€‚ å·²ç»æœ‰ä¸€ä¸ª2ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[3]ç§æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ…ã€‚ å·²ç»æœ‰ä¸€ä¸ª3ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[2]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ… å·²ç»æœ‰ä¸€ä¸ª4ï¼ˆnums[i]ï¼‰ çš„è¯ï¼Œæœ‰ dp[1]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ… å·²ç»æœ‰ä¸€ä¸ª5 ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œæœ‰ dp[0]ä¸­æ–¹æ³• å‡‘æˆ å®¹é‡ä¸º5çš„èƒŒåŒ… é‚£ä¹ˆå‡‘æ•´dp[5]æœ‰å¤šå°‘æ–¹æ³•å‘¢ï¼Œä¹Ÿå°±æ˜¯æŠŠ æ‰€æœ‰çš„ dp[j - nums[i]] ç´¯åŠ èµ·æ¥ã€‚ æ‰€ä»¥æ±‚ç»„åˆç±»é—®é¢˜çš„å…¬å¼ï¼Œéƒ½æ˜¯ç±»ä¼¼è¿™ç§ï¼š 1dp[j] += dp[j - nums[i]] è¿™ä¸ªå…¬å¼åœ¨åŽé¢åœ¨è®²è§£èƒŒåŒ…è§£å†³æŽ’åˆ—ç»„åˆé—®é¢˜çš„æ—¶å€™è¿˜ä¼šç”¨åˆ°ï¼ //dp[j] += dp[j - nums[i]]å¯¹è¿™å¥ç»„åˆæ•°çš„ç†è§£ï¼š 1ã€å¦‚æžœä¸é€‰ç¬¬iä¸ªæ•°ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œåˆ™æ–¹æ³•æ•°ä¸ºdp[j]ï¼› 2ã€å¦‚æžœé€‰ç¬¬iä¸ªæ•°ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œåˆ™æ–¹æ³•æ•°ä¸ºdp[j - nums[i]]ï¼›// æ‰€ä»¥æ–¹æ³•æ€»æ•°ä¸ºï¼šdp[j] = dp[j] + dp[j - nums[i]]ï¼›ï¼ˆæ„Ÿè§‰è¿™æ ·æ‹†å¼€å†™æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼‰ å¯ä»¥å¯¹æ¯”å…¶ä»–01èƒŒåŒ…é—®é¢˜ï¼šdp[j] = max(dp[j], dp[j - nums[i]])ï¼Œè¿™ç§é—®é¢˜å³æ˜¯ä»Žé€‰iä¸Žä¸é€‰ié‡Œï¼Œé€‰å–æœ€å¤§å€¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738fun findTargetSumWays(nums: IntArray, target: Int): Int &#123; /** * positive - negative = target * positive + negative = sum * * positive = (target + sum)/2 * */ //dp[j] += dp[j - nums[i]]å¯¹è¿™å¥ç»„åˆæ•°çš„ç†è§£ï¼š 1ã€å¦‚æžœä¸é€‰ç¬¬iä¸ªæ•°ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œåˆ™æ–¹æ³•æ•°ä¸ºdp[j]ï¼› 2ã€å¦‚æžœé€‰ç¬¬iä¸ªæ•°ï¼ˆnums[i]ï¼‰çš„è¯ï¼Œåˆ™æ–¹æ³•æ•°ä¸ºdp[j - nums[i]]ï¼› // æ‰€ä»¥æ–¹æ³•æ€»æ•°ä¸ºï¼šdp[j] = dp[j] + dp[j - nums[i]]ï¼›ï¼ˆæ„Ÿè§‰è¿™æ ·æ‹†å¼€å†™æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼‰ å¯ä»¥å¯¹æ¯”å…¶ä»–01èƒŒåŒ…é—®é¢˜ï¼šdp[j] = max(dp[j], dp[j - nums[i]])ï¼Œè¿™ç§é—®é¢˜å³æ˜¯ä»Žé€‰iä¸Žä¸é€‰ié‡Œï¼Œé€‰å–æœ€å¤§å€¼ã€‚ var sum = 0 nums.forEach &#123; sum += it &#125; if (Math.abs(target)&gt;sum) return 0 // å¦‚æžœtarget å¤§äºŽ sumæ˜¯ä¸å¯èƒ½æœ‰å€¼çš„ if ((target + sum) % 2 != 0) return 0 // positive ä¸€å®šæ˜¯æ­£æ•´æ•° ,è¿™ç§æƒ…å†µä¸‹æ²¡æœ‰ val positive = (target + sum) / 2 val dp = IntArray(positive + 1) dp[0] = 1 for (i in nums.indices) &#123; for (j in positive downTo nums[i]) &#123; // jè¡¨ç¤ºèƒŒåŒ…å®¹é‡ println(&quot; i = $i j = $j j - nums[i] = $&#123;j - nums[i]&#125; dp[j - nums[i]] $&#123;dp[j - nums[i]]&#125; &quot;) dp[j] += dp[j - nums[i]] println(&quot; dp[j] $&#123;dp[j]&#125; &quot;) &#125; println() dp.printIntArray() println() println() &#125; return dp[positive] &#125; è¿™ä¸ªçœ‹äº†å¾ˆå¤šè§†é¢‘ï¼Œè¿˜ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œ 474.ä¸€å’Œé›¶è£…æ»¡mä¸ª0,nä¸ª1 å®¹å™¨çš„èƒŒåŒ…ï¼Œæœ‰å“ªäº›ç‰©å“ ï¼Œå…¶å®žå°±æ˜¯01èƒŒåŒ…ï¼Œåªæ˜¯è£…çš„ç‰©å“æ˜¯ä¸¤ä¸ªçº¬åº¦ã€‚ 1234567891011121314151617181920212223 fun findMaxForm(strs: Array&lt;String&gt;, m: Int, n: Int): Int &#123; val dp = Array(m + 1) &#123; IntArray(n + 1) &#125; strs.forEachIndexed &#123; index, str -&gt; var oneNum = 0 // ä¸€å¼€å§‹æ”¾ï¼Œå¤–é¢ï¼Œè¦åœ¨é‡Œé¢ var zeroNum = 0 str.forEach &#123; if (&#x27;1&#x27; == it) &#123; oneNum++ &#125; else &#123; zeroNum++ &#125; &#125; for (i in m downTo zeroNum) &#123; // for (j in n downTo oneNum) &#123;// dp[i][j] = Math.max(dp[i][j], dp[m - i][n - j] + 1) // é”™çš„å†™æ³• dp[i][j] = Math.max(dp[i][j], dp[i-zeroNum][j - oneNum] + 1) &#125; &#125; &#125; return dp[m][n] &#125;","categories":[],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"LC-DP","slug":"LC-DP","date":"2023-04-02T09:32:31.000Z","updated":"2023-08-09T14:42:00.048Z","comments":true,"path":"2023/04/02/LC-DP/","link":"","permalink":"https://noteforme.github.io/2023/04/02/LC-DP/","excerpt":"","text":"Labuladong https://www.bilibili.com/video/BV1XV411Y7oE é‡å å­é—®é¢˜ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ (æœ€å…³é”®) æœ€ä¼˜å­ç»“æž„ æ˜Žç¡®çŠ¶æ€ æ˜Žç¡® é€‰æ‹© æ˜Žç¡®dpå‡½æ•°/æ•°ç»„çš„å®šä¹‰ æ˜Žç¡®base case éšæƒ³å½• https://www.bilibili.com/video/BV13Q4y197Wg åŠ¨è§„5éƒ¨æ›²å¯¹äºŽåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæˆ‘å°†æ‹†è§£ä¸ºå¦‚ä¸‹äº”æ­¥æ›²ï¼Œè¿™äº”æ­¥éƒ½æžæ¸…æ¥šäº†ï¼Œæ‰èƒ½è¯´æŠŠåŠ¨æ€è§„åˆ’çœŸçš„æŽŒæ¡äº†ï¼ 123451. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰2. ç¡®å®šé€’æŽ¨å…¬å¼3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–4. ç¡®å®šéåŽ†é¡ºåº5. ä¸¾ä¾‹æŽ¨å¯¼dpæ•°ç»„ åŠ¨æ€è§„åˆ’è§£æ³•ä»£ç æ¡†æž¶ 509. æ–æ³¢é‚£å¥‘æ•°éšæƒ³å½• è¿­ä»£é€’æŽ¨è‡ªåº•å‘ä¸Š é€šè¿‡forå¾ªçŽ¯é€’æŽ¨å‡º dp[n]çš„å€¼ï¼Œä¸€å¼€å§‹è§£çš„æ—¶å€™å†™æˆäº† dp[n] = dp[n - 1] + dp[n- 2] 12345678910111213141516 /** * éšæƒ³å½•è§†é¢‘æ€è·¯è§£æ³•1 */ fun fib1(n: Int): Int &#123;// println(n) if (n == 0) return 0 else if (n == 1) return 1 val dp = IntArray(n+1) dp[0] = 0 dp[1] = 1 for (i in 2..n) &#123; dp[i] = dp[i - 1] + dp[i - 2]// println(&quot; dp[n - 1]= $&#123; dp[n - 1]&#125; dp[n - 2]= $&#123;dp[n - 2]&#125;&quot;) &#125; return dp[n] &#125; éšæƒ³å½• è§†é¢‘æ€è·¯è§£æ³•2è¿™ç§è§£æ³•ï¼Œdpæ•°ç»„ç©ºé—´å¤æ‚åº¦å‡å°‘äº†ã€‚ 123456789101112131415161718/** * éšæƒ³å½•è§†é¢‘æ€è·¯è§£æ³•2 */fun fib(n: Int): Int &#123; if (n == 0) return 0 else if (n == 1) return 1 val dp = IntArray(2) dp[0] = 0 dp[1] = 1 var sum = 0 for (i in 2..n) &#123; sum = dp[0] + dp[1] println(&quot;sum $sum dp[0]= $&#123;dp[0]&#125; , dp[1]= $&#123;dp[1]&#125;&quot;) dp[0] = dp[1] dp[1] = sum &#125; return sum&#125; labuladongæŠŠæ‰€æœ‰è®¡ç®—çš„å€¼å…ˆä¿å­˜èµ·æ¥ï¼ŒåŽé¢éœ€è¦çš„è¯å…ˆç›´æŽ¥è¿”å›žï¼Œé¿å…é‡å¤è®¡ç®—. ä¸ºä»€ä¹ˆç”³è¯· n+1 æ•°ç»„å¤§å° å› ä¸ºç´¢å¼•ä»Ž0å¼€å§‹ ï¼ŒåŽé¢è¦å–memory[n]ï¼Œæ‰€æœ‰å°±ç”³è¯· n+1 å¤§å°. è‡ªé¡¶å‘ä¸‹ 1234567891011121314151617fun fib(n: Int): Int &#123; val memory = IntArray(n + 1) if (memory[n] != 0) &#123; return memory[n] &#125; else if (n == 0) return 0 else if (n == 1) return 1 memory[n] = fib(n - 1) + fib(n - 2) return memory[n]&#125;fun fib(n: Int): Int &#123; if (n == 0) return 0 if (n == 1) return 1 return fib(n - 1) + fib(n - 2)&#125; è¿˜æœ‰ä¸€ç§labladoè§£æ³•ä¸€å¼€å§‹æ²¡æƒ³å‡ºæ¥,åŒæŒ‡é’ˆåº”è¯¥æ€Žä¹ˆæ“ä½œ è¿™ä¸ªæ€è·¯å’Œéšæƒ³å½•çš„æ€è·¯2æ˜¯ä¸€æ ·çš„ 1234567891011121314fun fib(n: Int): Int &#123; var pre1 = 0 var pre2 = 1 var sum = 0 if (n == 0) return 0 else if (n == 1) return 1 for (i in 2..n) &#123; sum = pre1 + pre2 // å¾—åˆ°å½“å‰nçš„num pre1 = pre2 //ç§»åŠ¨æŒ‡é’ˆ pre2 = sum &#125; return sum&#125; 70 çˆ¬æ¥¼æ¢¯æ ¹æ®é˜¶æ¢¯ 0é˜¶ 1 // éœ€è¦è¿”å›ž1ï¼Œ2 = 1 +1,å¦åˆ™2å°±ä¸æ­£ç¡®äº†,æ­£å¸¸ç†è§£åº”è¯¥è¿”å›ž0,ä¸è¿‡é€’å½’è§£æ³•ï¼Œéœ€è¦è¿”å›ž1 1é˜¶ 1 2é˜¶ 1+1 , 2 2 3é˜¶ 1+1+1, 1+2, 2+1 3 å››é˜¶ 5 æ ¹æ®ä¸Šé¢çš„æŽ¨å¯¼ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿç±»ä¼¼äºŽ æ–æ³¢é‚£å¥‘æ•° ï¼Œ çœ‹äº†éšæƒ³å½•çš„è§†é¢‘ï¼Œè¿™ä¸ªæŽ¨å¯¼è¿‡ç¨‹è¿˜æ˜¯æ²¡çœ‹æ˜Žç™½ çœ‹äº†è¿™ä¸ªè§†é¢‘æŽ¨å¯¼æ˜Žç™½äº† https://www.bilibili.com/video/BV1G54y1X72H/ è¿›åº¦æ¡5åˆ†é’Ÿ. åˆ°è¾¾ k åªæœ‰ ä¸¤ç§æ–¹å¼ , k-2è¿‡åŽ»å’Œk-1è¿‡åŽ»ï¼Œæ‰€ä»¥åˆ°kçš„æ‰€æœ‰æƒ…å†µå°±æ˜¯ (k-2) + (k-1) ,æˆ‘ä»¬è¿™é‡Œè®¨è®ºçš„æ˜¯å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•ï¼Œè€Œä¸ç”¨ç®¡k-2,k-1å¤šå°‘æ­¥åˆ°è¾¾k. k k-1 k-2 é€’å½’è§£æ³•è¶…æ—¶ 1234567891011/** * é€’å½’è§£æ³• ï¼Œ ä¼šè¶…æ—¶ */fun climbStairs(n: Int): Int &#123; if (n == 0) return 1 // éœ€è¦è¿”å›ž1ï¼Œ2 = 1 +1,å¦åˆ™2å°±ä¸æ­£ç¡®äº† if (n == 1) return 1 val dp = IntArray(n + 1) dp[0] = 1 dp[1] = 1 return climbStairs(n - 1) + climbStairs(n - 2)&#125; è¿­ä»£è§£æ³•1234567891011fun climbStairs1(n: Int): Int &#123; if (n == 0) return 1 if (n == 1) return 1 val dp = IntArray(n + 1) dp[0] = 1 dp[1] = 1 for (i in 2..n) &#123; dp[i] = dp[i - 1] + dp[i - 2] &#125; return dp[n]&#125; 746 ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯å¦‚æžœè¦èµ°åˆ°dp[i] çš„ä½ç½®ï¼Œ æœ‰ä¸¤ç§é€‰æ‹©ï¼Œdp[i-1] + cost[i-1] ï¼Œdp[i-2] + cost[i-2]ï¼Œ costå°±æ˜¯ä»Žå½“å‰ä½ç½®è·³å‡ºæ¶ˆè€—çš„èƒ½é‡å€¼ï¼Œdp[i-1] å·²ç»åŒ…å«dp[0]å¼€å§‹çš„æ‰€æœ‰ æ¶ˆè´¹å€¼ã€‚ 1dp[i] &#x3D; min(dp[i-1] + cost[i-1], dp[i-2] + cost[i-2]) å¯ä»¥ç”¨è¿™ä¸ªæŽ¨å¯¼ å®˜æ–¹é¢˜è§£ è¿™ç§æ–¹å¼æ¯”è¾ƒå¥½ç†è§£ 123456789fun minCostClimbingStairs(cost: IntArray): Int &#123; val dp = IntArray(cost.size + 1) //è¦èµ°å®Œæ•°ç»„æœ€åŽä¸€æ­¥çš„ä¸‹ä¸€æ­¥ dp[0] = 0 dp[1] = 0 for (i in 2..cost.size) &#123; dp[i] = min(dp[i - 1] + cost[i - 1], dp[i - 2] + cost[i - 2]) &#125; return dp[cost.size]&#125; å…¶ä»–çš„åŽé¢åœ¨çœ‹å§ 62. ä¸åŒè·¯å¾„è¿™é¢˜äºŒå‰æ ‘è§£æ³•æ²¡çœ‹æ‡‚ï¼Œç»™å¿˜äº†ã€‚ é€’å½’å…¬å¼çš„æŽ¨å¯¼ï¼Œ 1é‚£ä¹ˆå¾ˆè‡ªç„¶ï¼Œdp[i][j] &#x3D; dp[i - 1][j] + dp[i][j - 1]ï¼Œå› ä¸ºdp[i][j]åªæœ‰è¿™ä¸¤ä¸ªæ–¹å‘è¿‡æ¥ã€‚ dpæ•°ç»„çš„åˆå§‹åŒ– 1å¦‚ä½•åˆå§‹åŒ–å‘¢ï¼Œé¦–å…ˆdp[i][0]ä¸€å®šéƒ½æ˜¯1ï¼Œå› ä¸ºä»Ž(0, 0)çš„ä½ç½®åˆ°(i, 0)çš„è·¯å¾„åªæœ‰ä¸€æ¡ï¼Œå› ä¸ºåªèƒ½å‘å³å‘ä¸‹èµ°ï¼Œé‚£ä¹ˆdp[0][j]ä¹ŸåŒç†ã€‚ æ‰€ä»¥åˆå§‹åŒ–ä»£ç ä¸ºï¼š 12for (int i = 0; i &lt; m; i++) dp[i][0] = 1;for (int j = 0; j &lt; n; j++) dp[0][j] = 1; å¯ä»¥æ ¹æ®ä¸Šå›¾æ¥æŽ¨å¯¼å‡º dp[i][j] i =1 æ—¶ , j ä»£å…¥è¿›åŽ»è¿›è¡ŒæŽ¨å¯¼ã€‚ j = 1 : dp[i][j] = dp[i-1][j] + dp[i][j-1] j = 2 : dp[i][j] = dp[i-1][j] + dp[i][j-1] j = 3 : dp[i][j] = dp[i-1][j] + dp[i][j-1] ç„¶åŽé€æ­¥å°±èƒ½æŽ¨å¯¼å‡ºæ‰€æœ‰çš„å€¼,æ³¨æ„dp[m][n] è¦-1,å¦åˆ™ä¼šè¶Šç•Œã€‚ 1234567891011fun uniquePaths(m: Int, n: Int): Int &#123; val dp = Array(m) &#123; IntArray(n) &#125; for (i in 0 until m) dp[i][0] = 1 for (j in 0 until n) dp[0][j] = 1 for (i in 1 until m) &#123; for (j in 1 until n) &#123; dp[i][j] = dp[i-1][j] + dp[i][j-1] &#125; &#125; return dp[m-1][n-1]&#125; 63. ä¸åŒè·¯å¾„ IIåŽŸç†è¿˜æ˜¯ä¸€æ ·ï¼Œä»Žå·¦åˆ°å³,array[i][0] : array[0][0],array[1][0],array[2][0] ï¼Œä»Žä¸Šåˆ°ä¸‹ è¿›è¡ŒæŽ¨å¯¼ã€‚ è¿™ä¸€é¢˜æ˜¯ä¸Šä¸€é¢˜çš„æ‹“å±•ç‰ˆæœ¬ é€šè¿‡62é¢˜å¯ä»¥çœ‹åˆ° m æ˜¯ç«–çº¿ï¼Œnæ˜¯æ¨ªçº¿ã€‚ [0][0] [m-1][n-1] é‚£ä¹ˆä¸å¯èƒ½æœ‰æœ‰è·¯å¾„å¾€åŽèµ°äº†ã€‚ æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œå¦‚æžœæ˜¯æœ‰éšœç¢ï¼ŒåŽé¢å°±ä¸ç”¨åˆå§‹åŒ–äº†ã€‚ è¿˜æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œå¦‚æžœè¦æ‰¾çš„ä½ç½®æ²¡æœ‰éšœç¢ç‰©ï¼Œæ‰æœ‰æ±‚å‡ºé€’æŽ¨å€¼çš„æ„ä¹‰ã€‚ é€’æŽ¨å…¬å¼å’Œå‰é¢å·®ä¸å¤š ï¼Œåœ¨å¤„ç†é€’æŽ¨å…¬å¼çš„æ—¶å€™ï¼Œçœ‹ä¸Šå›¾ï¼Œå‰ä¸€æ­¥æœ‰éšœç¢ç‰©çš„æ—¶å€™ï¼Œå½±å“çš„æ˜¯ dp[i-1] dp[j-1] å‰ä¸€æ­¥çš„ä¸€ä¸ªå€¼ã€‚ åŽç»­é€’æŽ¨çš„æ—¶å€™ï¼Œç¢°åˆ°obstaclesåŽï¼Œobstaclesçš„ç‚¹å°±æ˜¯0ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªç‚¹å°±æ˜¯éšœç¢ç‰© 0 å’Œå¦ä¸€ä¸ªç‚¹ç›¸åŠ ã€‚ 123456789101112131415161718192021222324fun uniquePathsWithObstacles(obstacleGrid: Array&lt;IntArray&gt;): Int &#123; val m = obstacleGrid.size // è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæ•°ç»„ val n = obstacleGrid[0].size // å…¶ä¸­ä¸€ä¸ªæ•°ç»„çš„é•¿åº¦ if (obstacleGrid[0][0] == 1 || obstacleGrid[m-1][n-1] == 1) return 0 // if there are obstacle in these two points, will no path. val dp = Array(m) &#123; IntArray(n) &#125; for (i in 0 until m) &#123; // é‡Œé¢å†åŠ ä¸ªæ¡ä»¶ä¸å¥½åŠ  if (obstacleGrid[i][0] == 1) break // when init dats, hit path , following init will 0 dp[i][0] = 1 // å‰é¢[i][0] iè¡¨è¿°å¤šå°‘ä¸ªæ•°ç»„ &#125; for (j in 0 until n) &#123; if (obstacleGrid[0][j] == 1) break dp[0][j] = 1 // [0][j] åŽé¢è¡¨è¿°ä¸€ä¸ªæ•°ç»„çš„é•¿åº¦ &#125; for (i in 1 until m) &#123; for (j in 1 until n) &#123; if (obstacleGrid[i][j] != 1) &#123; dp[i][j] = dp[i - 1][j] + dp[i][j - 1] &#125; &#125; &#125; return dp[m - 1][n - 1]&#125; 343. æ•´æ•°æ‹†åˆ†æˆ‘ä»¬æŒ‰ç…§åŠ¨è§„ 5 éƒ¨æ›²æ¥åˆ†æžå…ˆ ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ æ‹†åˆ†iï¼Œæœ€å¤§ä¹˜ç§¯æ˜¯dp[i] ç¡®å®šé€’æŽ¨å…¬å¼ è¿™ä¸€æ­¥æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œ å¯¹ i è¿›è¡Œæ‹†åˆ†ï¼Œçœ‹äº†éšæƒ³å½•çš„è§†é¢‘ï¼Œæœ‰3ç§å¯èƒ½ ç¬¬ä¸€ç§: æ‹†æˆ2ä¸ªæ•°çš„æƒ…å†µ i * j ä¹Ÿå°±æ˜¯ dp[i] = i * (i-j) ç¬¬äºŒç§ï¼šæ‹†æˆ2ä¸ªæ•°ä»¥ä¸Šçš„æƒ…å†µ : dp[i] = i * dp[i-j] è¿™ç§å¯ä»¥ç”¨6æ¥æµ‹è¯•æ‹†åˆ† 1 * 5 2 * 4 3 * 3 4 * 2 5 * 1 ä¸Šé¢æˆ‘ä»¬å¯ä»¥åªæ‹†åˆ†j, æˆ‘ä»¬æœ‰å¿…è¦æ‹†åˆ†iå—ï¼Œå…¶å®žæ˜¯æ²¡å¿…è¦çš„ï¼Œ æˆ‘çš„ç†è§£æ˜¯2 * 4 ä¸­ï¼Œ 2å·²ç»è¢« 1 * 5 ä¸­çš„5åŒ…å«äº†ï¼Œ é‚£ä¹ˆ5 æ‹†æˆ 2 *1 * 1 * 1 å°±åŒ…æ‹¬äº† 2çš„æƒ…å†µï¼Œä¸çŸ¥é“æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ã€‚ ç¬¬ä¸‰ç§ : å°±æ˜¯ iæœ¬èº«ã€‚ 123456789101112131415161718192021222324252627282930313233343536 fun integerBreak(n: Int): Int &#123; if (n == 2) return 1 // 1+1 val dp = IntArray(n + 1) dp[0] = 0 dp[1] = 0 dp[2] = 1 for (i in 3..n) &#123; for (j in 1 until i) &#123;// println(&quot;i $i j $j &quot;) val a = j * (i - j) val b = j * dp[i - j]// maxNum = max(a, b, i) println(&quot;j * (i - j) $j * ($i - $j) a =$a dp[i - j] $&#123;dp[i - j]&#125; b= $b &quot;)// maxNum = max(a, b,dp[i])// maxNum= max(a,b)// val abMax = max(a, b)// println(&quot;abMax $abMax dp[$i] $&#123;dp[i]&#125; &quot;) dp[i] = max(a, b, dp[i]) // dp[i] åˆå§‹å€¼æ˜¯0ï¼Œæ‰€ä»¥å¾—å‡ºçš„å€¼è¿˜æ˜¯ä»Ža,bä¸­æ‹¿åˆ°æœ€å¤§å€¼ &#125;// println(&quot;dp[$i] $&#123;dp[i]&#125;&quot;) &#125; return dp[n] &#125;fun max(a: Int, b: Int, c: Int): Int &#123; var max = a if (b &gt; max) &#123; max = b &#125; if (c &gt; max) &#123; max = c &#125; return max&#125; 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘â€‹ ä¸Šé¢æ˜¯i==3çš„æƒ…å†µï¼Œ root node =1çš„æ—¶å€™ï¼Œ left tree 0 , right tree 2ç§æƒ…å†µ , å³å­æ ‘å’Œ root node =2çš„æ ‘çš„ç»“æž„æ˜¯ä¸€æ ·çš„ã€‚ root node =2çš„æ—¶å€™ï¼Œ left tree 1 , right tree 1ç§æƒ…å†µ, å·¦ï¼Œå³å­æ ‘å’Œ root node =1çš„æ ‘çš„ç»“æž„æ˜¯ä¸€æ ·çš„ã€‚ root node =3çš„æ—¶å€™ï¼Œ left tree 2 , right tree 0ç§æƒ…å†µ. å·¦å­æ ‘å’Œ root node =2çš„æ ‘çš„ç»“æž„æ˜¯ä¸€æ ·çš„ã€‚ æ‰€ä»¥ dp[3] = (root node ==1 +dp[2]) + (root node ==2 +dp[1]) + (root node ==3 +dp[2]) dp[3]ï¼Œå°±æ˜¯ å…ƒç´ 1ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ + å…ƒç´ 2ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ + å…ƒç´ 3ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ å…ƒç´ 1ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ = å³å­æ ‘æœ‰2ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ * å·¦å­æ ‘æœ‰0ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ å…ƒç´ 2ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ = å³å­æ ‘æœ‰1ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ * å·¦å­æ ‘æœ‰1ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ å…ƒç´ 3ä¸ºå¤´ç»“ç‚¹æœç´¢æ ‘çš„æ•°é‡ = å³å­æ ‘æœ‰0ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ * å·¦å­æ ‘æœ‰2ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡ æœ‰2ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡å°±æ˜¯dp[2]ã€‚ æœ‰1ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡å°±æ˜¯dp[1]ã€‚ æœ‰0ä¸ªå…ƒç´ çš„æœç´¢æ ‘æ•°é‡å°±æ˜¯dp[0]ã€‚ æ‰€ä»¥dp[3] = dp[2] * dp[0] + dp[1] * dp[1] + dp[0] * dp[2] è¿™ä¸ªå›¾æ›´ç›´è§‚ ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ç›®å‰å¯ä»¥æ ¹æ®ä¸‹é¢æŽ¨å¯¼æ¥ï¼Œç¡®è®¤dpæ•°ç»„çš„å«ä¹‰ã€‚dp[1] =1dp[2]= 2dp[3] =5 ç¡®å®šé€’æŽ¨å…¬å¼è¿™ä¸ªæ²¡æŽ¨å¯¼å‡ºæ¥ï¼Œi jæ²¡æžæ¸…æ¥šã€‚æŠŠéšæƒ³å½•çš„æ‹¿è¿‡æ¥12345åœ¨ä¸Šé¢çš„åˆ†æžä¸­ï¼Œå…¶å®žå·²ç»çœ‹å‡ºå…¶é€’æŽ¨å…³ç³»ï¼Œ dp[i] +&#x3D; dp[ä»¥jä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡] * dp[ä»¥jä¸ºå¤´ç»“ç‚¹å³å­æ ‘èŠ‚ç‚¹æ•°é‡]jç›¸å½“äºŽæ˜¯å¤´ç»“ç‚¹çš„å…ƒç´ ï¼Œä»Ž1éåŽ†åˆ°iä¸ºæ­¢ã€‚æ‰€ä»¥é€’æŽ¨å…¬å¼ï¼šdp[i] +&#x3D; dp[j - 1] * dp[i - j]; ï¼Œj-1 ä¸ºjä¸ºå¤´ç»“ç‚¹å·¦å­æ ‘èŠ‚ç‚¹æ•°é‡ï¼Œi-j ä¸ºä»¥jä¸ºå¤´ç»“ç‚¹å³å­æ ‘èŠ‚ç‚¹æ•°é‡ dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ– ç¡®å®šéåŽ†é¡ºåº ä¸¾ä¾‹æŽ¨å¯¼dpæ•°ç»„ 12345678910111213141516 fun numTrees(n: Int): Int &#123; // 1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ val dp = IntArray(n + 1) dp[0] = 1 dp[1] = 1 //3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ– //4.ç¡®å®šéåŽ†é¡ºåº for (i in 2 ..n) &#123; for (j in 1 ..i) &#123; // æ³¨æ„è¿™é‡Œè¾¹ç•Œï¼Œä¸€å¼€å§‹éƒ½ æ²¡åŠ ==// println(&quot; dp[$i] $&#123;dp[i]&#125; += (dp[j - 1] $&#123;dp[j - 1]&#125; * dp[i - j]) $&#123;dp[i - j]&#125; j = $j&quot;) dp[i] += (dp[j - 1] * dp[i - j]) //2.ç¡®å®šé€’æŽ¨å…¬å¼ &#125; &#125; return dp[n] &#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"RecyclerView-padding","slug":"RecyclerView-padding","date":"2023-01-10T07:16:04.000Z","updated":"2023-02-23T14:17:11.783Z","comments":true,"path":"2023/01/10/RecyclerView-padding/","link":"","permalink":"https://noteforme.github.io/2023/01/10/RecyclerView-padding/","excerpt":"","text":"ä¿®æ”¹Display scalingå±žæ€§åŽï¼Œå³ä½¿è®¾ç½®å­—ä½“æ˜¯dpä¹Ÿä¼šå¯¼è‡´ï¼Œä¹Ÿä¼šå‡ºçŽ°Textå†…å®¹çš„æœ‰å˜åŒ–ã€‚ è®¡ç®—è½¬è´¦é¡µé¢çš„padding,5ä¸ªTextViewå¹³åˆ†å±å¹•å®½åº¦ï¼Œä¹‹å‰nexus5æ²¡é—®é¢˜ï¼Œå› ä¸ºæ˜¯åˆšå¥½2å€ï¼Œæˆ‘çš„æ‰‹æœºå°±æ˜¯æœ‰é—®é¢˜ï¼ŒåŽŸæ¥æ˜¯dpè½¬pxæœ‰æŸè€—ã€‚ 1234567@get:JvmName(&quot;dp2px&quot;)val Float.dp: Float get() = convert(this, TypedValue.COMPLEX_UNIT_DIP)@get:JvmName(&quot;dp2px&quot;)val Int.dp: Int get() = convert(this.toFloat(), TypedValue.COMPLEX_UNIT_DIP).toInt() ç„¶åŽç”¨ 2f.dpè¿™æ ·å°±èƒ½é¿å…dpè½¬pxçš„æŸè€—ã€‚ å…¶å®žé€‰æ‹©ä¸Šé¢è¿™ä¸ªæ–¹æ³•å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å­—ä½“æµ‹é‡æ–¹æ³• 1234567fun getTextLength(typeface: Typeface, txt: String): Int &#123; val paint = Paint() paint.typeface = typeface paint.textSize = 12f.dp.toFloat() val textWidth = paint.measureText(txt) return textWidth.toInt()&#125; æ–‡å­—å®½åº¦ https://www.cnblogs.com/dasusu/p/6602710.html https://www.jianshu.com/p/9fc07c3311c1 https://www.laoyuyu.me/2020/08/03/android/text_measure_wh/","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"RecyclerView","slug":"RecyclerView","permalink":"https://noteforme.github.io/tags/RecyclerView/"}]},{"title":"LC-GREEDY","slug":"LC-GREEDY","date":"2023-01-02T14:42:03.000Z","updated":"2023-04-02T11:24:38.736Z","comments":true,"path":"2023/01/02/LC-GREEDY/","link":"","permalink":"https://noteforme.github.io/2023/01/02/LC-GREEDY/","excerpt":"","text":"https://www.bilibili.com/video/BV1sA4y1S7Sp è¿™ä¸ªè§†é¢‘è®²åˆ°æš´åŠ› å¯¹æ•°å™¨å¯ä»¥éªŒè¯ç­”æ¡ˆï¼Œæœ‰æ„æ€ã€‚ æœ‰åŒå­¦é—®äº†å¦‚ä½•éªŒè¯å¯ä¸å¯ä»¥ç”¨è´ªå¿ƒç®—æ³•å‘¢ï¼Ÿ åˆ·é¢˜æˆ–è€…é¢è¯•çš„æ—¶å€™ï¼Œæ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸‹æ„Ÿè§‰å¯ä»¥å±€éƒ¨æœ€ä¼˜æŽ¨å‡ºæ•´ä½“æœ€ä¼˜ï¼Œè€Œä¸”æƒ³ä¸åˆ°åä¾‹ï¼Œé‚£ä¹ˆå°±è¯•ä¸€è¯•è´ªå¿ƒã€‚ è´ªå¿ƒç®—æ³•ä¸€èˆ¬åˆ†ä¸ºå¦‚ä¸‹å››æ­¥ï¼š å°†é—®é¢˜åˆ†è§£ä¸ºè‹¥å¹²ä¸ªå­é—®é¢˜ æ‰¾å‡ºé€‚åˆçš„è´ªå¿ƒç­–ç•¥ æ±‚è§£æ¯ä¸€ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£ å°†å±€éƒ¨æœ€ä¼˜è§£å †å æˆå…¨å±€æœ€ä¼˜è§£ è¿™ä¸ªå››æ­¥å…¶å®žè¿‡äºŽç†è®ºåŒ–äº†ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨åšè´ªå¿ƒç±»çš„é¢˜ç›® å¾ˆéš¾åŽ»æŒ‰ç…§è¿™å››æ­¥åŽ»æ€è€ƒï¼ŒçœŸæ˜¯æœ‰ç‚¹â€œé¸¡è‚‹â€ã€‚ åšé¢˜çš„æ—¶å€™ï¼Œåªè¦æƒ³æ¸…æ¥š å±€éƒ¨æœ€ä¼˜ æ˜¯ä»€ä¹ˆï¼Œå¦‚æžœæŽ¨å¯¼å‡ºå…¨å±€æœ€ä¼˜ï¼Œå…¶å®žå°±å¤Ÿäº†ã€‚ https://www.bilibili.com/video/BV1XY411A766 https://www.bilibili.com/video/BV1Hz4y117CP/ 455.åˆ†å‘é¥¼å¹²åˆ†è§£é¢˜ç›® æ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚ æ¯ä¸ªå­©å­ iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ g[i]ï¼Œæ¯å—é¥¼å¹² jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ s[j] ã€‚å¦‚æžœ s[j] &gt;= g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² j åˆ†é…ç»™å­©å­ iã€‚ Idea1g &#x3D; [1,3], s &#x3D; [1,2,4] å¯¹å­©å­çš„èƒƒå£å€¼å’Œï¼Œ é¥¼å¹²çš„å¤§å°è¿›è¡ŒæŽ’åºï¼Œå¾—åˆ°ä¸¤è¡Œæ•°ç»„ã€‚ å¦‚ä¸Šé¢ç¤ºä¾‹ï¼Œsä¸­çš„s[0]=1é¥¼å¹²å¤§å°ï¼Œæ»¡è¶³g[0]=1 å­©å­çš„èƒƒå£å€¼,é‚£ä¹ˆåŒæ—¶å‘å³ç§»åŠ¨.s[1]=2 ä¸æ»¡è¶³g[1],sæŒ‡é’ˆå‘å³ç§»åŠ¨ï¼Œs[2]æ»¡è¶³g[1]. è¿™æ ·æ‰€æœ‰å­©å­éƒ½æ»¡è¶³äº†ã€‚ ä¸Šé¢æ€è·¯å’Œéšæƒ³å½•çš„ä¸ä¸€æ ·ï¼Œéšæƒ³å½•çš„æ˜¯å¤§é¥¼å¹²å–‚ èƒƒå£å€¼å¤§çš„å­©å­ï¼Œä¸è¿‡è§‰å¾—æˆ‘è¿™ä¸ªæ›´å¥½ç†è§£ã€‚ Code123456789101112131415161718fun findContentChildren(g: IntArray, s: IntArray): Int &#123; if (s.isEmpty()) return 0 Arrays.sort(g) // å†™äº†s.isEmpty()ï¼Œ ä¸€å¼€å§‹å¿˜äº†åŠ è¿™ä¸ªæŽ’åº Arrays.sort(s) var pg = 0 var ps = 0 var count = 0 while (pg &lt; g.size &amp;&amp; ps &lt; s.size) &#123; // æŽ§åˆ¶è¾¹ç•Œ if (s[ps] &gt;= g[pg]) &#123; //é¥¼å¹²æ»¡è¶³å­©å­çš„èƒƒå£å¤§å°. count++ pg++ ps++ &#125; else &#123; ps++ //é¥¼å¹²ä¸æ»¡è¶³å­©å­çš„èƒƒå£å¤§å°ï¼Œé¥¼å¹²æ•°ç»„æŒ‡é’ˆå¾€å³èµ°. &#125; &#125; return count&#125; 376æ‘†åŠ¨åºåˆ—Ideaæ‘†åŠ¨åºåˆ—ï¼Œå…¶å®žæ±‚æ³¢å³° æ³¢è°·çš„ä¸ªæ•°ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªæ–¹å‘æ”¹å˜å°±ç®—ä¸€ä¸ªæ³¢åŠ¨ã€‚ æ ¹æ®å›¾1å¯ä»¥çœ‹åˆ° preDiff = 17-1 &gt;0 , curveDiff = 5 -10&lt;0 ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ‘†åŠ¨åºåˆ—ã€‚è¿˜æœ‰ preDiff = 5-10 &lt;0 , curveDiff = 16 -5&gt;0 çš„æƒ…å†µï¼Œè¿™åˆæ˜¯å¦ä¸€ç§æƒ…å†µçš„æ‘†åŠ¨åºåˆ—ã€‚ æ ¹æ®å›¾2å¯ä»¥çœ‹åˆ° preDiff ==0 , curveDiff = 5 -2 &gt; 0, preDiff ==0 , curveDiff = 5 -8 &gt; 0, é¢˜ç›®è¯´ ä¸¤ä¸ªä¸ç­‰å…ƒç´ çš„åºåˆ—ä¹Ÿè§†ä½œæ‘†åŠ¨åºåˆ—ã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¹Ÿæ˜¯æ‘†åŠ¨åºåˆ—ã€‚ ä½†æ˜¯æˆ‘æ„Ÿè§‰è¿™ä¸ªå’Œå‰é¢çš„ â€œå¦‚æžœè¿žç»­æ•°å­—ä¹‹é—´çš„å·®ä¸¥æ ¼åœ°åœ¨æ­£æ•°å’Œè´Ÿæ•°ä¹‹é—´äº¤æ›¿ï¼Œåˆ™æ•°å­—åºåˆ—ç§°ä¸º æ‘†åŠ¨åºåˆ—â€,æ˜¯æœ‰çŸ›ç›¾çš„ã€‚ æ ¹æ® 1.2,æ‰€ä»¥æ¡ä»¶å¯ä»¥åˆå¹¶, preDiff &gt;=0 , curveDiff &lt;=0 ,preDiff &lt;=0 , curveDiff &gt;=0 å›¾3ï¼Œåªæœ‰2ä¸ªæ‘†åŠ¨ï¼Œä½†æ˜¯æ ¹æ®æ ¹æ®1ï¼Œ2çš„æ€»ç»“ä»£ç åœ¨2,3èŠ‚ç‚¹å¤„ï¼Œçº¢è‰²preçš„åœ°æ–¹ä¹Ÿæœ‰1ä¸ªæ‘†åŠ¨ï¼Œè¿™ç§æƒ…å†µè¦åŽ»æŽ‰ï¼Œå› ä¸ºä»–æ˜¯åŒæ–¹å‘çš„æ‘†åŠ¨ã€‚æ‰€ä»¥preåº”è¯¥åœåœ¨ç»¿è‰²çš„åœ°æ–¹ï¼Œåªæœ‰æ‘†åŠ¨å‘ç”Ÿå¥¹æ‰éœ€è¦æ”¹å˜ï¼Œå¹³æ³¢ä¸ç”¨ç®¡ã€‚ 12345678910111213141516fun wiggleMaxLength(nums: IntArray): Int &#123; if (nums.size &lt;= 1) &#123; return nums.size &#125; var preDiff = 0 //å‰ä¸€å¯¹å·®å€¼ var curveDiff = 0 var result = 1 for (i in 1 until nums.size) &#123; // ç¬¬ä¸€ä¸ªæ•°å·²ç»è®¡å…¥æ‘†åŠ¨åºåˆ—äº†ï¼Œæ‰€ä»¥ä»Ž1å¼€å§‹ curveDiff = nums[i] - nums[i - 1] // å› ä¸ºè¦ç»™å€¼ç»™preDiffï¼Œæ‰€ä»¥ä»Žiå¼€å§‹ï¼Œéšæƒ³å½•c++è§£æ³•æ˜¯ä»Ž0å¼€å§‹çš„ã€‚ if ((preDiff &gt;= 0 &amp;&amp; curveDiff &lt; 0) || (preDiff &lt;= 0 &amp;&amp; curveDiff &gt; 0)) &#123; result++ preDiff = curveDiff &#125; &#125; return result&#125; 53 æœ€å¤§å­åºå’Œ -2, 1, -3, 4, -1, 2, 1, -5, 4 *Q *P IDEA é¢˜æ„æ˜¯æ‰¾åˆ°æœ€å¤§å’Œçš„è¿žç»­å­æ•°ç»„ï¼Œ æ‰€ä»¥æ˜¯ä¸èƒ½å¯¹æ•°ç»„æŽ’åºã€‚ è¿™é¢˜å¯ä»¥è€ƒè™‘ç”¨åŒæŒ‡é’ˆè§£æ³•ï¼Œç§»åŠ¨*pï¼Œä»Ž0å¼€å§‹ åŠ ä¸ŠæŒ‡é’ˆå¯¹åº”çš„è®¡æ•°ã€‚å¦‚æžœè®¡æ•°å¢žåŠ åˆ™æ˜¯æ­£æ•°è®¡å…¥ï¼Œå¦‚æžœå‡å°åˆ™é‡ç½®ï¼Œç§»åŠ¨ *qæŒ‡é’ˆã€‚ ä¸Šé¢è¿™ä¸ªæ€è·¯æ˜¯ä¸è¡Œçš„ï¼Œ4, -1, 2, 1è¿™ç§å°±æœ‰é—®é¢˜ã€‚ é—´éš”åŽæ–°çš„é»„è‰²éƒ¨åˆ†æ˜¯é‡ç½®æ•°æ®ã€‚ æ ¹æ®éšæƒ³å½•çš„æ€è·¯ å±€éƒ¨æœ€ä¼˜ï¼šå½“å‰â€œè¿žç»­å’Œâ€ä¸ºè´Ÿæ•°çš„æ—¶å€™ç«‹åˆ»æ”¾å¼ƒï¼Œä»Žä¸‹ä¸€ä¸ªå…ƒç´ é‡æ–°è®¡ç®—â€œè¿žç»­å’Œâ€ï¼Œå› ä¸ºè´Ÿæ•°åŠ ä¸Šä¸‹ä¸€ä¸ªå…ƒç´  â€œè¿žç»­å’Œâ€åªä¼šè¶Šæ¥è¶Šå°ã€‚ è¿™å¥è¯çœ‹èµ·æ¥æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿæ‹¿ä¸å‡ºåä¾‹. 123456789101112fun maxSubArray(nums: IntArray): Int &#123; var result = 0 var maxResult = Int.MIN_VALUE for (pIndex in nums.indices) &#123; result += nums[pIndex] maxResult = maxResult.coerceAtLeast(result) if (result &lt; 0) &#123; result = 0 &#125; &#125; return maxResult&#125; 122 ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II127, 1, 5, 3, 6, 4 -6 4 -2 3 -2 å‡å¦‚ç¬¬0å¤©ä¹°å…¥ï¼Œç¬¬3å¤©å–å‡ºï¼Œé‚£ä¹ˆåˆ©æ¶¦ä¸ºï¼šprices[3] - prices[0]ã€‚ ç›¸å½“äºŽ(prices[3] - prices[2]) + (prices[2] - prices[1]) + (prices[1] - prices[0])ã€‚ æ­¤æ—¶å°±æ˜¯æŠŠåˆ©æ¶¦åˆ†è§£ä¸ºæ¯å¤©ä¸ºå•ä½çš„ç»´åº¦ï¼Œè€Œä¸æ˜¯ä»Ž0å¤©åˆ°ç¬¬3å¤©æ•´ä½“åŽ»è€ƒè™‘ï¼ é‚£ä¹ˆæ ¹æ®priceså¯ä»¥å¾—åˆ°æ¯å¤©çš„åˆ©æ¶¦åºåˆ—ï¼š(prices[i] - prices[i - 1])â€¦..(prices[1] - prices[0])ã€‚ 1234567891011121314fun maxProfit(prices: IntArray): Int &#123; val diffArray = IntArray(prices.size - 1) for (i in 1 until prices.size) &#123; println(i) diffArray[i - 1] = prices[i] - prices[i - 1] &#125; var sum = 0 for (i in diffArray.indices) &#123; if (diffArray[i] &gt; 0) &#123; sum += diffArray[i] &#125; &#125; return sum&#125; 55 è·³è·ƒæ¸¸æˆ[2,3,1,1,4] é¢˜æ„ç»™å®šä¸€ä¸ªéžè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºŽæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚ æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ï¼Œæ¯”å¦‚åœ¨2çš„ä½ç½®ï¼Œå¯ä»¥è·³ä¸€æ ¼åˆ°3çš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥ä¸¤æ ¼åˆ°1çš„ä½ç½®ã€‚ ä¸Šé¢ç¬¬äºŒå¹…å›¾ï¼Œç¬¬ä¸€æ¡çº¿åº”è¯¥æœ‰é—®é¢˜ï¼Œåº”è¯¥è¦†ç›–åˆ°2 3 1 éåŽ†æ¯ä¸ªä½ç½®ï¼Œç¡®å®šæ¯ä¸ªä½ç½®èƒ½è¦†ç›–çš„æœ€å¤§èŒƒå›´ã€‚ 12345678910fun canJump(nums: IntArray): Boolean &#123; var coverArea = 0 for (i in 0..coverArea) &#123; // æ³¨æ„:è¿™é‡Œæ˜¯coverArea,éœ€è¦ç¡®å®šèƒ½èµ°å¤šå°‘æ­¥ coverArea = (i + nums[i]).coerceAtLeast(coverArea) //æ–°çš„èŒƒå›´å’Œ ä¹‹å‰çš„èŒƒå›´åšæ¯”è¾ƒ if (coverArea &gt;= nums.size - 1) &#123; return true &#125; &#125; return false&#125; 45 è·³è·ƒæ¸¸æˆ IIIdeaé¢˜ç›®æ„æ€ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åŽä¸€ä¸ªä½ç½® 1234567891011121314151617fun jump(nums: IntArray): Int &#123; var maxCover = 0 var count = 0 for (i in 0..maxCover) &#123; if (i + nums[i] &gt; maxCover) &#123; maxCover = i + nums[i] &#125; else &#123; count++ &#125; if (maxCover &gt;= nums.size) &#123; println(&quot;count $count&quot;) return count &#125; &#125; return count&#125; æ‰¾åˆ°èƒ½è¦†ç›–çš„æœ€è¿œè·ç¦»ï¼Œå¦‚æžœç§»åŠ¨åˆ°äº†è¿™ä¸ªåœ°æ–¹ï¼Œé‚£ä¹ˆå°±è®¡ç®—ä¸€æ¬¡ï¼Œç›´åˆ° nums.size - 1- 1ä¸ªèŠ‚ç‚¹ï¼Œç„¶åŽå†count++å°±å¯ä»¥äº†ã€‚ 12345678910111213fun jump(nums: IntArray): Int &#123; var nextCover = 0 var count = 0 var currentCover = 0 for (i in 0 until nums.size - 1) &#123; nextCover = Math.max(i + nums[i], nextCover) if (i == currentCover) &#123; currentCover = nextCover count++ &#125; &#125; return count&#125; 1005. K æ¬¡å–ååŽæœ€å¤§åŒ–çš„æ•°ç»„å’Œ å…ˆå¯¹æ•°ç»„è¿›è¡ŒæŽ’åºï¼ŒæŠŠ &lt; 0çš„æ•°æŒ‰ä½å–å ,ç›´åˆ°æ•°ç»„çš„æ•°æ®éƒ½&gt;0,æ­¤æ—¶ç¿»è½¬äº†næ¬¡ å¯¹ç¿»è½¬åŽçš„æ•°ç»„é‡æ–°è¿›è¡ŒæŽ’åºï¼Œå¯¹æœ€å°çš„æ•° ç¿»è½¬ k-n æ¬¡ My Idea 1234567891011121314151617181920fun largestSumAfterKNegations(nums: IntArray, k: Int): Int &#123; Arrays.sort(nums) var balanceK = 0 for (i in 0 until k) &#123; // kotlinç”¨while åº”è¯¥æ›´å¥½ if (i &gt;= nums.size || nums[i] &gt; 0) &#123; balanceK = k - i break &#125; nums[i] = Math.abs(nums[i]) &#125; Arrays.sort(nums) if (balanceK &gt; 0 &amp;&amp; (balanceK % 2) &gt; 0) &#123; nums[0] = -nums[0] &#125; var sum = 0 for (value in nums) &#123; sum += value &#125; return sum&#125; è¿™ä¸ªä¹Ÿå¯ä»¥ https://www.bilibili.com/video/BV1iY411s7qB 1234567891011121314151617181920fun largestSumAfterKNegations(nums: IntArray, k: Int): Int &#123; val typedArray = nums.toTypedArray() // è½¬æˆæ•°ç»„ Arrays.sort(typedArray, Comparator.comparingInt(Math::abs)) // æŒ‰ç…§ç»å¯¹å€¼æŽ’åº var k = k for (i in typedArray.indices) &#123; if (k &gt; 0 &amp;&amp; typedArray[i] &lt; 0) &#123; // ç¢°åˆ°æ•°ç»„ä¸­&gt;0çš„æ•° typedArray[i] *= -1 k-- &#125; &#125; Arrays.sort(typedArray) if (k % 2 &gt; 0) &#123; typedArray[0] *= -1 &#125; var sum = 0 for (value in nums) &#123; sum += value &#125; return sum&#125; å‚è€ƒéšæƒ³å½•ï¼Œä½†æ˜¯ç¼–è¯‘ä¸é€šè¿‡ https://www.bilibili.com/video/BV138411G7LY 134 åŠ æ²¹ç«™æš´åŠ›è§£æ³•1234567891011121314fun canCompleteCircuit(gas: IntArray, cost: IntArray): Int &#123; for (i in gas.indices) &#123; var balance = gas[i] - cost[i] var index = (i + 1) % gas.size while (balance &gt; 0 &amp;&amp; i != index) &#123; // è¿˜æœ‰æ²¹çš„è¯ï¼Œæ²¡èµ°å®Œä¸€åœˆï¼Œç»§ç»­èµ° balance += (gas[index] - cost[index]) index = (index + 1) % gas.size &#125; if (balance &gt;= 0 &amp;&amp; (index == i)) &#123;//èµ°å®Œä¸€åœˆï¼Œè¿”å›žä¸‹æ ‡ return i &#125; &#125; return -1&#125; è´ªå¿ƒè§£æ³•è¿™é‡Œkä¸ç”¨çœ‹ https://www.bilibili.com/video/BV1DF411L7cz j åˆ° j+1è·‘ä¸åˆ° , ä»Ži åˆ° j +1 æ²¹é‡&lt;0 å› ä¸º i èƒ½å¼€åˆ°j,ä»Ž i å‡ºå‘åˆ° i+1 æ²¹é‡ &gt;=0 , é‚£ä¹ˆ i+1 åˆ° j+1 æ²¹é‡ä¸€å®š &lt;0. å¦‚æžœèµ·ç‚¹åœ¨ i+1, å› ä¸º i åˆ°j+1&lt;0 ,å› æ­¤ i åˆ° i+1&gt;=0 , i+1 åˆ°j+1ä¸€å®š&lt;0. æ€»ç»“æ¥çœ‹, i åˆ° j+1&lt;0 ,ä¸­é—´ä¸ç”¨çœ‹ï¼Œç›´æŽ¥ä»Ž j+1å¼€å§‹å³å¯ã€‚ LC134æˆ‘çš„è§£æ³•æœ‰é—®é¢˜ï¼Œçœ‹åˆ°éšæƒ³å½•çš„è§£æ³•åŽæ„Ÿè§‰å¾ˆå¦™ 1234567891011121314151617fun canCompleteCircuit(gas: IntArray, cost: IntArray): Int &#123; var totalSum = 0 // æ‰€æœ‰è·¯ç¨‹éœ€è¦çš„æ²¹é‡ var currentSum = 0 // å½“å‰ä½ç½®å¼€å§‹æ‰€éœ€è¦çš„æ²¹é‡ var start = 0 for (i in gas.indices) &#123; totalSum += gas[i] - cost[i] currentSum += gas[i] - cost[i] if (currentSum &lt; 0) &#123; // åˆ°iåŠ æ²¹ç«™éœ€è¦æ²¹é‡ &lt;0, å¦‚æžœæŽ¥ä¸‹æ¥ gas[i+1] - cost[i+1]è¿˜æ˜¯&lt;0,é‚£ä¹ˆstart ,currentSum ç»§ç»­æ›´æ–° start = i + 1 currentSum = 0 &#125; &#125; if (totalSum &lt; 0) &#123; return -1 &#125; return start&#125; åˆ°iåŠ æ²¹ç«™éœ€è¦æ²¹é‡ &lt;0, å¦‚æžœæŽ¥ä¸‹æ¥ gas[i+1] - cost[i+1]è¿˜æ˜¯&lt;0,é‚£ä¹ˆstart ,currentSum ç»§ç»­æ›´æ–°. j ,j+1æ˜¯è´Ÿæ•°èŠ‚ç‚¹,å¦‚æžœå­˜åœ¨è¿™æ ·ä¸€ä¸ªèŠ‚ç‚¹,æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆj+1å¼€å§‹åŽé¢ä¸€åœˆçš„ä¸€å®šéƒ½æ˜¯&gt;0 135 åˆ†å‘ç³–æžœ12[1,2,2] 1 2 1 &#x2F;&#x2F;ä¸ºä»€ä¹ˆarray[2] ç³–æžœæ˜¯1ï¼Œå› ä¸ºé¢˜ç›®æ„æ€åªæœ‰è¯„åˆ†é«˜æ‰æœ‰æ›´å¤šçš„ç³–æžœï¼Œç›¸ç­‰çš„æƒ…å†µæŒ‰ç…§æœ€å°‘çš„1ä¸ªç³–æžœäº†ã€‚ 0 1 2 3 4 5 6 1 2 2 5 4 3 2 1 2 1 2 1 1 1 å·¦&lt;å³ 1 1 1 2 2 2 1 1 2 1 4 3 2 1 å·¦&gt;å³ Ideaéœ€è¦ä¸€è¾¹ä¸€è¾¹è€ƒè™‘ï¼Œå¦åˆ™é¡¾æ­¤å¤±å½¼ å…ˆè€ƒè™‘ å·¦è¾¹å­©å­ç²‰ä¸çš„æƒ…å†µ &lt; å³è¾¹å­©å­åˆ†æ•° ï¼Œæ­¤æ—¶éœ€è¦ä»Žå·¦å¾€å³, å¾—åˆ°ç¬¬ä¸‰è¡Œçš„åˆ†æ•°. å†è€ƒè™‘ å·¦è¾¹å­©å­ç²‰ä¸ &gt; å³è¾¹å­©å­åˆ†æ•°çš„æƒ…å†µ, æ­¤æ—¶éœ€è¦ä»Žå³å‘å·¦ï¼Œå› ä¸ºè¿™ç§æƒ…å†µéœ€è¦ä¾èµ–ï¼Œå³è¾¹çš„å­©å­ã€‚å¦‚æžœä»Žå·¦åˆ°å³ï¼Œå¾—åˆ°ç¬¬4è¡Œç»“æžœï¼Œæ­¤æ—¶ 2 3 4 5éƒ½æ˜¯é”™çš„ã€‚ ç„¶åŽä»Žå³å¾€å·¦çš„è¿‡ç¨‹ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¹‹å‰ å·¦è¾¹å­©å­&lt; å³è¾¹çš„æƒ…å†µï¼Œæ‰€ä»¥å–æœ€å¤§å€¼ã€‚ code1234567891011121314151617181920212223242526272829 fun candy(ratings: IntArray): Int &#123; val answer = IntArray(ratings.size) answer[0] = 1// å·¦è¾¹å­©å­ç²‰ä¸çš„æƒ…å†µ &lt; å³è¾¹å­©å­åˆ†æ•° ï¼Œæ­¤æ—¶éœ€è¦ä»Žå·¦å¾€å³ for (i in 1 until ratings.size) &#123; if (ratings[i] &gt; ratings[i - 1]) &#123; answer[i] = answer[i - 1] + 1 &#125; else &#123; answer[i] = 1 &#125; &#125; println() answer.printIntArray() //å·¦è¾¹å­©å­ç²‰ä¸ &gt; å³è¾¹å­©å­åˆ†æ•°çš„æƒ…å†µ, æ­¤æ—¶éœ€è¦ä»Žå³å‘å·¦ for (i in ratings.size - 1 downTo 1) &#123; if (ratings[i - 1] &gt; ratings[i]) &#123; answer[i - 1] = answer[i - 1].coerceAtLeast(answer[i] + 1) &#125; &#125; answer.printIntArray() var sum = 0 for (i in answer) &#123; sum += i &#125; return sum &#125; 860 æŸ æª¬æ°´æ‰¾é›¶Idea ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯æš´åŠ›è§£æ³•ï¼Œ ç”¨map å­˜ 5 , 10ä¸¤ç§é‡‘é¢çš„ä¸ªæ•°ï¼Œ20ä¸ç”¨è€ƒè™‘ æ¥äº†5å­˜èµ·æ¥ map5 +1ï¼Œæ¥äº†10å­˜èµ·æ¥ map10+1 , map5 -1 , æ¥äº†20ï¼Œ map10-1, map5-1 code æš´åŠ›è§£æ³•12345678910111213141516171819202122232425fun lemonadeChange(bills: IntArray): Boolean &#123; val map &#x3D; HashMap&lt;Int, Int&gt;() for ((index, money) in bills.withIndex()) &#123; if (money &#x3D;&#x3D; 5) &#123; map[5] &#x3D; map.getOrDefault(5, 0).plus(1) &#125; else if (money &#x3D;&#x3D; 10) &#123; map[5] &#x3D; map.getOrDefault(5, 0) - 1 map[10] &#x3D; map.getOrDefault(10, 0).plus(1) &#125; else &#123; &#x2F;&#x2F;for 20 rmb if (map.getOrDefault(10, 0) &gt; 0 &amp;&amp; map.getOrDefault(5, 0) &gt; 0) &#123; &#x2F;&#x2F;at lease 10rmb 1 , 5rmb 1 map[10] &#x3D; map.getOrDefault(10, 0) - 1 map[5] &#x3D; map.getOrDefault(5, 0) - 1 &#125; else if (map.getOrDefault(5, 0) &gt; 2) &#123; &#x2F;&#x2F; at least 3 * 5 rmb map[5] &#x3D; map.getOrDefault(5, 0) - 3 &#125; else &#123; return false &#125; &#125; println(&quot; index $index map5 $&#123;map[5]&#125; map10 $&#123;map[10]&#125; &quot;) if (map.getOrDefault(5, 0) &lt; 0 || map.getOrDefault(10, 0) &lt; 0) &#123; return false &#125; &#125; return true&#125; çœ‹äº†éšæƒ³å½•çš„è§£æ³•ï¼Œå’Œæˆ‘çš„è§£æ³•ç±»ä¼¼ï¼ŒçŸ¥è¯†mapä¸­çš„å€¼å¯ä»¥ç”¨å˜é‡æ¥åš. 12int five = 0, ten = 0, twenty = 0;è¿™æ ·++,--æ›´æ–¹ä¾¿. https://programmercarl.com/0860.%E6%9F%A0%E6%AA%AC%E6%B0%B4%E6%89%BE%E9%9B%B6.html#%E6%80%9D%E8%B7%AF 406 æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—Idea éšæƒ³å½•å¯¹äºŽæœ¬é¢˜ç›¸ä¿¡å¤§å®¶å›°æƒ‘çš„ç‚¹æ˜¯å…ˆç¡®å®škè¿˜æ˜¯å…ˆç¡®å®šhå‘¢ï¼Œä¹Ÿå°±æ˜¯ç©¶ç«Ÿå…ˆæŒ‰hæŽ’åºå‘¢ï¼Œè¿˜æ˜¯å…ˆæŒ‰ç…§kæŽ’åºå‘¢ï¼Ÿ å¦‚æžœæŒ‰ç…§kæ¥ä»Žå°åˆ°å¤§æŽ’åºï¼ŒæŽ’å®Œä¹‹åŽï¼Œä¼šå‘çŽ°kçš„æŽ’åˆ—å¹¶ä¸ç¬¦åˆæ¡ä»¶ï¼Œèº«é«˜ä¹Ÿä¸ç¬¦åˆæ¡ä»¶ï¼Œä¸¤ä¸ªç»´åº¦å“ªä¸€ä¸ªéƒ½æ²¡ç¡®å®šä¸‹æ¥ã€‚ é‚£ä¹ˆæŒ‰ç…§èº«é«˜hæ¥æŽ’åºå‘¢ï¼Œèº«é«˜ä¸€å®šæ˜¯ä»Žå¤§åˆ°å°æŽ’ï¼ˆèº«é«˜ç›¸åŒçš„è¯åˆ™kå°çš„ç«™å‰é¢ï¼‰ï¼Œè®©é«˜ä¸ªå­åœ¨å‰é¢ã€‚ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç¡®å®šä¸€ä¸ªç»´åº¦äº†ï¼Œå°±æ˜¯èº«é«˜ï¼Œå‰é¢çš„èŠ‚ç‚¹ä¸€å®šéƒ½æ¯”æœ¬èŠ‚ç‚¹é«˜ï¼ 123456789101112131415161718fun reconstructQueue(people: Array&lt;IntArray&gt;): Array&lt;IntArray&gt; &#123; Arrays.sort(people, object : Comparator&lt;IntArray&gt; &#123; override fun compare(o1: IntArray, o2: IntArray): Int &#123; if (o2[0] &#x3D;&#x3D; o1[0]) &#123; &#x2F;&#x2F; å¦‚æžœèº«é«˜ç›¸åŒï¼Œkå°çš„æŽ’åœ¨å‰é¢ return o1[1] - o2[1] &#125; return o2[0] - o1[0] &#x2F;&#x2F; å¯¹æ•°ç»„å…ˆæŒ‰ç…§èº«é«˜æ¥æŽ’åº &#125; &#125;) val linkedList &#x3D; LinkedList&lt;IntArray&gt;() for (value in people)&#123; val index &#x3D; value[1] linkedList.add(index,value) &#x2F;&#x2F; æŒ‰ç…§kæ’å…¥å¯¹åº”çš„ä½ç½®, è¿™é‡Œæ’å…¥æ—¶å¾ˆå®¹æ˜“è¶Šç•Œã€‚ &#125; return linkedList.toTypedArray()&#125; 452. ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒIDEA å…ˆå¯¹æ•°ç»„æŒ‰ç…§å·¦è¾¹ç•Œå¤§å°è¿›è¡ŒæŽ’åºã€‚ å¦‚æžœå½“å‰iæ•°ç»„å³è¾¹çš„å€¼ &gt; æˆ–è€…å‰é¢æ•°ç»„é‡å åŒºåŸŸçš„æœ€å°å³è¾¹ç•Œï¼Œ æ­¤æ—¶æ²¡æœ‰é‡å ï¼ˆå’Œä¹‹å‰çš„å…±æœ‰åŒºåŸŸï¼‰ï¼Œæ•°é‡+1 å¦åˆ™æœ‰é‡å ï¼Œå–æœ€å°å³è¾¹ç•Œå€¼ã€‚ ä¸€å¼€å§‹çœ‹é¢˜è§£ï¼Œæ²¡ç†è§£ç‰¹åˆ«æ˜¯ points[i][1] 1points[i][1] = min(points[i - 1][1], points[i][1]); // æ›´æ–°é‡å æ°”çƒæœ€å°å³è¾¹ç•Œ 123456789101112131415161718 fun findMinArrowShots1(points: Array&lt;IntArray&gt;): Int &#123;// Arrays.sort(points)&#123;o1,o2 -&gt; o1[0] - o2[0]&#125; è¿™ä¸ªå›žæŠ¥è¶Šç•Œé”™ [[-2147483646,-2147483645],[2147483646,2147483647]] points.sortBy&#123;it[0]&#125; var count = 1 for (i in 1 until points.size) &#123; if (points[i][0] &gt; points[i - 1][1]) &#123; // å¦‚æžœå½“å‰æ°”çƒçš„å·¦è¾¹ç•Œ &gt; å…¬å…±å³è¾¹ç•Œ count++ &#125; else &#123; // æ²¡æœ‰å¤§äºŽå…¬å…±å³è¾¹ç•Œ //points[i][1] = points[i][1].minus(points[i - 1][1]) // ç”¨minusæ˜¯æœ‰é—®é¢˜çš„ points[i][1] = points[i][1].coerceAtMost(points[i - 1][1]) // æ›´æ–°é‡å æ°”çƒæœ€å°å³è¾¹ç•Œ &#125; &#125;// points.printDimensionalArray() return count &#125; 1 6 â€‹ 2 8 â€‹ 7 12 â€‹ 10 16 ä½¿ç”¨chatGPTçš„ç®—æ³•ï¼Œæ›´å¥½ç¡®å®šå³è¾¹ç•Œ, å¦‚æžœæ–°çš„å·¦è¾¹ç•Œ&gt;ä¹‹å‰çš„å³è¾¹ç•Œ+1 , ä½¿ç”¨æ–°çš„æ•°æ®ï¼Œå¹¶ä¸”ç¡®å®šå³è¾¹ç•Œã€‚ The solution sorts the balloons by their end positions in ascending order, and then uses a greedy algorithm to shoot the balloons. We start with the first balloon and set end to its end position. Then, we iterate through the rest of the balloons and compare their start positions to end. If the start position of a balloon is greater than end, we shoot another arrow and update end to the end position of the current balloon. At the end, the function returns the number of arrows shot. 123456789101112131415fun findMinArrowShots(points: Array&lt;IntArray&gt;): Int &#123; if (points.isEmpty()) return 0 points.sortBy &#123; it[1] &#125; var arrows = 1 var end = points[0][1] for (i in 1 until points.size) &#123; if (points[i][0]&gt;end) &#123; arrows++ end = points[i][1] &#125; &#125; return arrows&#125; 435. æ— é‡å åŒºé—´[1,2] [3,6] [7,12] [4,8] [10,16] 1 2 â€‹ 3 6 â€‹ 4 8 â€‹ 7 12 â€‹ 10 16 https://www.bilibili.com/video/BV1A14y1c7E1 å·¦è¾¹æ•°ç»„è¿›è¡ŒæŽ’åºã€‚1231. if [i][0] &lt; [i-1][1] è¯´æ˜Žä¼šæœ‰é‡åˆï¼Œé‚£ä¹ˆæ±‚å‡º [i][1] [i-1][1]ä¸­çš„æœ€å°å€¼ï¼Œä½œä¸ºå³è¾¹ç•Œï¼Œæ›´æ–°æ•°é‡å¦åˆ™å°±æ²¡é‡åˆæ›´æ–°å³è¾¹ç•Œé™ã€‚2. å¦åˆ™ï¼Œæ²¡æœ‰é‡åˆç›´æŽ¥æ›´æ–° endã€‚ 12345678910111213141516 fun eraseOverlapIntervals(intervals: Array&lt;IntArray&gt;): Int &#123; if(intervals.isEmpty()) return 0 var count = 0 Arrays.sort(intervals) &#123; a, b -&gt; a[0] - b[0] &#125; // æŒ‰ç…§å·¦è¾¹æ•°ç»„è¿›è¡ŒæŽ’åº var end = intervals[0][1] for (i in 1 until intervals.size) &#123; if (intervals[i][0] &lt; end) &#123; //é‡åˆçš„æƒ…å†µ count++ end = end.coerceAtMost(intervals[i][1]) // ç¡®å®šæœ€å°é‡åˆçš„ å³è¾¹ç•Œ, è¿™é‡Œä¸€å¼€å§‹å¼„é”™äº† &#125; else &#123; end = intervals[i][1] &#125; &#125;// intervals.printDimensionalArray() return count &#125; å³è¾¹æ•°ç»„æŽ’åºè¿™ç§è§£æ³•ä¸ç†è§£. æ ¹æ®éšæƒ³å½•çš„æ€è·¯ï¼Œæ€»çš„ä¸ªæ•° - éžäº¤å‰ä¸ªæ•° = äº¤å‰ä¸ªæ•°ã€‚ è¿™é‡Œçš„éš¾ç‚¹æ˜¯è¦çŸ¥é“äº¤å‰åŽçš„å³è¾¹ç•Œçš„ å¦‚æžœ3åœ¨ 1,2 å³è¾¹æœ€å°å€¼çš„å·¦è¾¹ï¼Œæ‰€ä»¥3æ¡çº¿è¿˜ä¼šæœ‰äº¤å‰ï¼Œå¦‚æžœåœ¨1ï¼Œ2æœ€å°å€¼çš„å³è¾¹é‚£ä¹ˆ 2åŽ»æŽ‰å°±å¯ä»¥äº†ï¼Œè¿˜æ˜¯åŽ»æŽ‰1ã€‚ 1234567891011121314151617 fun eraseOverlapIntervals(intervals: Array&lt;IntArray&gt;): Int &#123; if (intervals.isEmpty()) return 0 var count = 1 //éžäº¤å‰åŒºé—´ä¸ªæ•° Arrays.sort(intervals) &#123; a, b -&gt; a[1] - b[1] &#125; // æŒ‰ç…§å·¦è¾¹æ•°ç»„è¿›è¡ŒæŽ’åº var end = intervals[0][1] for (i in 1 until intervals.size) &#123; if (intervals[i][0] &gt;= end) &#123; count ++ end = intervals[i][1] &#125;// else&#123;// end = intervals[i][1].coerceAtMost(end) // è¿™ä¸ªä¸éœ€è¦// &#125; &#125;// intervals.printDimensionalArray() return intervals.size - count &#125; 12 763 åˆ’åˆ†å­—æ¯åŒºé—´idea éåŽ†å‡ºæ¯ä¸ªå­—æ¯çš„æœ€è¿œè·ç¦»ï¼Œå‡ºçŽ°çš„åº§æ ‡ã€‚ æ ¹æ®å­—æ¯çš„hashå€¼å¾—åˆ°å½“å‰çš„åº§æ ‡ï¼ŒåŽé¢å¦‚æžœæœ‰é‡å¤çš„hash,ä¼šè¦†ç›–å‰é¢çš„ã€‚ éåŽ†åŽåºåˆ—æ‰¾ å½“å‰å­—æ¯hashå€¼ == i , right = i æ‹¿åˆ°å½“å‰ right + 1 - left, å°±æ˜¯ç‰‡æ®µçš„é•¿åº¦ã€‚ ç„¶åŽæ›´æ–°leftå€¼. â€‹ 12345678910111213141516171819 fun partitionLabels(s: String): List&lt;Int&gt; &#123; val result = arrayListOf&lt;Int&gt;() val hash = IntArray(26) for (i in s.indices) &#123; hash[s[i] - &#x27;a&#x27;] = i &#125; var left = 0 var right = 0 for (i in s.indices) &#123; right = hash[s[i] - &#x27;a&#x27;].coerceAtLeast(right) // è¦æ‰¾åˆ°å½“å‰hashå€¼çš„æœ€å¤§å€¼ if (right == i) &#123; //å¦‚æžœ hashå€¼çš„æœ€å¤§å€¼ å’Œåº§æ ‡ç›¸ç­‰ï¼Œå°±ç”¨åˆ°äº†åˆ†å‰²ç‚¹ result.add(right + 1 - left) left = i + 1 &#125; &#125;// hash.printIntArray() return result &#125; 56 åˆå¹¶åŒºé—´Idea Myåˆå§‹åŒ– left. right æŒ‰ç…§å·¦è¾¹æ•°ç»„ æŽ’åºã€‚ å¦‚æžœæ²¡é‡åˆç›´æŽ¥[left,right]æŠŠå‰é¢æ•°ç»„åŠ å…¥åŒºé—´ ã€‚ å¦‚æžœé‡åˆï¼Œé‚£ä¹ˆç¡®å®š rightå³è¾¹ç•Œï¼Œåˆ¤æ–­ [i][0]å’Œright,ç¡®å®šå³è¾¹ç•Œï¼ŒæŠŠrightæ”¾å…¥å³è¾¹ç•Œã€‚ 1234567891011121314151617fun merge(intervals: Array&lt;IntArray&gt;): Array&lt;IntArray&gt; &#123; Arrays.sort(intervals) &#123; a, b -&gt; a[0] - b[0] &#125; var left = intervals[0][0] var right = intervals[0][1] val arrayOf = arrayListOf&lt;IntArray&gt;() for (i in 1 until intervals.size) &#123; if (intervals[i][0] &lt;= right) &#123; right = right.coerceAtLeast(intervals[i][1]) &#125; else &#123; arrayOf.add(intArrayOf(left, right)) left = intervals[i][0] right = intervals[i][1] &#125; &#125; arrayOf.add(intArrayOf(left, right)) return arrayOf.toTypedArray()&#125; Idea 2çœ‹äº†éšæƒ³å½•çš„é¢˜è§£ï¼Œè§‰å¾—æ¯”æˆ‘ä¸Šé¢çš„æ›´å¥½ï¼Œåªéœ€è¦æ›´æ–°å³è¾¹ç•Œã€‚ 1 3 â€‹ 2 6 8 10 15 18 â€‹ è¿˜æ˜¯æŒ‰ç…§æ•°ç»„å·¦è¾¹ç•ŒæŽ’å¥½åºã€‚ æŠŠç¬¬ä¸€ç»„æ•°ç»„æ”¾å…¥ç»“æžœæ•°ç»„ä¸­ï¼Œç„¶åŽå–å‡ºæ¥ï¼Œç”¨å®ƒçš„å³è¾¹ç•Œå’Œç¬¬äºŒç»„æ•°ç»„çš„å·¦è¾¹ç•Œæ¯”è¾ƒå¤§å°. å¦‚æžœæ–°çš„æ•°ç»„çš„å·¦è¾¹ç•Œ &lt; ç»“æžœæ•°ç»„çš„å³è¾¹ç•Œï¼Œè¯´æ˜Žæœ‰é‡åˆï¼Œæ›´æ–°ç»“æžœæ•°ç»„çš„å³è¾¹ç•Œã€‚ å¦‚æžœæ–°çš„æ•°ç»„çš„å·¦è¾¹ç•Œ &gt; ç»“æžœæ•°ç»„çš„å³è¾¹ç•Œ,æ²¡æœ‰é‡åˆï¼Œæ–°æ•°ç»„ç›´æŽ¥æ·»åŠ åˆ°ç»“æžœæ•°ç»„é›†ä¸­ã€‚ 738 å•è°ƒé€’å¢žçš„æ•°å­—Ideaçœ‹äº†éšæƒ³å½•çš„é¢˜è§£ é‚£ä¹ˆæ‹¿ä¸€ä¸ªä¸¤ä½çš„æ•°å­—æ¥ä¸¾ä¾‹ã€‚ ä¾‹å¦‚ï¼š98ï¼Œä¸€æ—¦å‡ºçŽ°strNum[i - 1] &gt; strNum[i]çš„æƒ…å†µï¼ˆéžå•è°ƒé€’å¢žï¼‰ï¼Œé¦–å…ˆæƒ³è®©strNum[i - 1]â€“ï¼Œç„¶åŽstrNum[i]ç»™ä¸º9ï¼Œè¿™æ ·è¿™ä¸ªæ•´æ•°å°±æ˜¯89ï¼Œå³å°äºŽ98çš„æœ€å¤§çš„å•è°ƒé€’å¢žæ•´æ•°ã€‚ æ­¤æ—¶æ˜¯ä»Žå‰å‘åŽéåŽ†è¿˜æ˜¯ä»ŽåŽå‘å‰éåŽ†å‘¢ï¼Ÿ è¿™ä¹ˆè¯´æœ‰ç‚¹æŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ•°å­—ï¼š332ï¼Œä»Žå‰å‘åŽéåŽ†çš„è¯ï¼Œé‚£ä¹ˆå°±æŠŠå˜æˆäº†329ï¼Œæ­¤æ—¶2åˆå°äºŽäº†ç¬¬ä¸€ä½çš„3äº†ï¼ŒçœŸæ­£çš„ç»“æžœåº”è¯¥æ˜¯299ã€‚ é‚£ä¹ˆä»ŽåŽå‘å‰éåŽ†ï¼Œå°±å¯ä»¥é‡å¤åˆ©ç”¨ä¸Šæ¬¡æ¯”è¾ƒå¾—å‡ºçš„ç»“æžœäº†ï¼Œä»ŽåŽå‘å‰éåŽ†332çš„æ•°å€¼å˜åŒ–ä¸ºï¼š332 -&gt; 329 -&gt; 299 ç¡®å®šäº†éåŽ†é¡ºåºä¹‹åŽï¼Œé‚£ä¹ˆæ­¤æ—¶å±€éƒ¨æœ€ä¼˜å°±å¯ä»¥æŽ¨å‡ºå…¨å±€ï¼Œæ‰¾ä¸å‡ºåä¾‹ï¼Œè¯•è¯•è´ªå¿ƒã€‚ Codeåˆå§‹çš„æƒ³æ³• 12345678910fun monotoneIncreasingDigits(n: Int): Int &#123; val arrStr = n.toString().toCharArray() for (i in arrStr.size - 1 downTo 1) &#123; if (arrStr[i - 1] &gt; arrStr[i]) &#123; arrStr[i] = &#x27;9&#x27; arrStr[i - 1] = arrStr[i - 1].toInt().minus(1).toChar() &#125; &#125; return String(arrStr).toInt()&#125; 100 è·‘å®ŒåŽå˜æˆ90,å…¶å®žåŽé¢æ‰€æœ‰ä½éƒ½è¦å˜æˆ â€˜9â€™,åªæœ‰å½“å‰ä½å‡1 æ‰¾åˆ° minus 1 çš„ä½ç½®ï¼ŒåŽé¢çš„ä½éƒ½å˜æˆ9 1234567891011121314fun monotoneIncreasingDigits(n: Int): Int &#123; val arrStr = n.toString().toCharArray() var position = arrStr.size //åˆå§‹ä½ç½®ä¸èƒ½æ˜¯ arrStr.size - 1 ï¼Œå¦åˆ™æœ€åŽä¸€ä½éƒ½ä¼šå˜æˆ &#x27;9&#x27; for (i in arrStr.size - 1 downTo 1) &#123; if (arrStr[i - 1] &gt; arrStr[i]) &#123; arrStr[i - 1] = arrStr[i - 1].toInt().minus(1).toChar() // digitToInt leetcodeè·‘ä¸äº† position = i // æ‰¾åˆ°-1 çš„ä½ç½®ï¼ŒåŽé¢çš„ä½éƒ½å˜æˆ9 &#125; &#125; for (i in position until arrStr.size) &#123; arrStr[i] = &#x27;9&#x27; &#125; return String(arrStr).toInt()&#125; 968 ç›‘æŽ§äºŒå‰æ ‘è¿™é¢˜æ¯”è¾ƒéš¾ï¼Œæš‚æ—¶æ²¡å¿…è¦å†™ã€‚","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"","slug":"Activity_Stack","date":"2023-01-02T03:31:38.914Z","updated":"2024-06-13T11:19:05.839Z","comments":true,"path":"2023/01/02/Activity_Stack/","link":"","permalink":"https://noteforme.github.io/2023/01/02/Activity_Stack/","excerpt":"","text":"ActivityAn activity is a single, focused thing that the user can do. Almost all activities interact with the user, so the Activity class takes care of creating a window for you in which you can place your UI with setContentView(View).Acitivtyå’Œç”¨æˆ·äº¤äº’ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç”¨çš„æœ€å¤šçš„ lifecycle onCreate(): Activityåˆ›å»ºçš„æ—¶å€™è°ƒç”¨ï¼Œç»‘å®šæ•°æ®ã€‚ onStart() : å½“Activityå¯¹ç”¨æˆ·å˜å¾—å¯è§çš„æ—¶å€™è°ƒç”¨. onResume() : activityå¼€å§‹å’Œç”¨æˆ·äº¤äº’çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™æ—¶å€™activityå¤„äºŽæ ˆé¡¶ï¼Œä¼´éšç€ç”¨æˆ·çš„è¾“å…¥. onPause() : å½“activityå¤±åŽ»å‰å°çŠ¶æ€ï¼Œå¼€å§‹è¿›å…¥stopped&#x2F;hidden or destroyedçŠ¶æ€ï¼Œä¸èƒ½å†èŽ·å–ç„¦ç‚¹ï¼Œæ­¤æ—¶activityå¯¹ç”¨æˆ·å¯è§ï¼Œä½†æ˜¯æ›´æ–°çš„UIçš„æ“ä½œè¦å¿«ã€‚ onStop() : å½“activityä¸å†å¯è§ï¼Œå¯èƒ½æ˜¯æ–°çš„activityæ¥åˆ°æ ˆé¡¶ï¼Œæˆ–è€…å½“å‰activityæ­£åœ¨è¢«destroy. onDestory(): å½“å‰activityæ­£åœ¨ç¦»å¼€ã€‚ æƒ³åˆ°ä¸€ä¸ªé—®é¢˜:ç•Œé¢ï¼¡åˆ°ç•Œé¢ï¼¢ï¼Œæ˜¯ï¼¡çš„onStop()å…ˆæ‰§è¡Œ è¿˜æ˜¯ï¼¢çš„onResume()å…ˆèµ°å…ˆç”¨äº‹å®žè¯´è¯å§ I/BaseActivity: MainActivity -- onCreate() -- I/BaseActivity: MainActivity -- onStart() -- I/BaseActivity: MainActivity -- onResume() -- I/BaseActivity: MainActivity -- onPause() -- I/BaseActivity: StopResumeActivity -- onCreate() -- I/BaseActivity: StopResumeActivity -- onStart() -- I/BaseActivity: StopResumeActivity -- onResume() -- I/BaseActivity: MainActivity -- onStop() -- ä»Žæ‰“å°ç»“æžœå¯ä»¥çœ‹åˆ°StopResumeActivity.onResume()å…ˆæ‰§è¡Œ,ç„¶åŽæ˜¯MainActivityçš„onStop onStop() :å¤§æ¦‚çŸ¥é“åŽŸå› ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿè¯´æœåŠ›ï¼Œå› ä¸ºonStart()æ–¹æ³•å·²ç»å¯¹ç”¨æˆ·å¯è§äº†ï¼Œä¸ºä»€ä¹ˆMainActivity â€“ onStop()ä¸åœ¨ StopResumeActivity â€“ onStart()åŽé¢å‘¢ï¼Ÿ å¯èƒ½æ˜¯onResume()è°ƒç”¨åŽï¼Œæ–°activityä½äºŽæ ˆé¡¶ï¼Œä¹‹å‰çš„å†onStop() https://blog.csdn.net/c6E5UlI1N/article/details/119549972 OnNewIntent()onNewIntent added in API level 1 1void onNewIntent (Intent intent) if the Activity was already created and a new Intent is being delivered to onNewIntent(android.content.Intent) This is called for activities that set launchMode to â€œsingleTopâ€ in their package, or if a client used the FLAG_ACTIVITY_SINGLE_TOP flag when calling startActivity(Intent). In either case, when the activity is re-launched while at the top of the activity stack instead of a new instance of the activity being started, onNewIntent() will be called on the existing instance with the Intent that was used to re-launch it. An activity will always be paused before receiving a new intent, so you can count on onResume() being called after this method. Note that getIntent() still returns the original Intent. You can use setIntent(Intent) to update it to this new Intent. Parameters intent Intent: The new intent that was started for the activity. è¿™ä¸ªæ–¹æ³•ç”¨äºŽsingleTop singleTaskä¸¤ç§å¯åŠ¨æ¨¡å¼ å…ˆçœ‹çœ‹ singleTaskæ–¹å¼ï¼šFirstActivity 12&lt;activity android:name=&quot;.launchmode.FirstActivity&quot; android:launchMode=&quot;singleTask&quot;/&gt; â€‹ ä»Ž FirstActivity â€“&gt; LaunchActivity â€“&gt; FirstActivity ç”Ÿå‘½å‘¨æœŸæ–¹æ³• 04-24 11:49:14.602 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onCreate() 04-24 11:49:14.672 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onStart() 04-24 11:49:14.679 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onResume() 04-24 11:49:32.085 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onPause() 04-24 11:49:32.099 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onCreate() 04-24 11:49:32.127 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onStart() 04-24 11:49:32.132 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onResume() 04-24 11:49:32.462 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onStop() 04-24 11:49:53.681 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onPause() 04-24 11:49:53.701 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onNewIntent(Intent intent) 04-24 11:49:53.702 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onStart() 04-24 11:49:53.703 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;FirstActivity LaunchMode: onResume() 04-24 11:49:54.049 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onStop() 04-24 11:49:54.049 26674-26674&#x2F;com.jonzhou.mineutils D&#x2F;LaunchActivity LaunchMode: onDestroy() ç„¶åŽå¯ä»¥é€šè¿‡ onNewIntent(Intent intent);èŽ·å–ä¼ å›žæ¥çš„æ•°æ® 12345String data1 = intent.getStringExtra(newIntent);String data2 = getIntent().getStringExtra(newIntent); //è¿™ç§æ–¹å¼èŽ·å–ä¸åˆ°setIntent(intent); //é€šè¿‡è¿™ç§è®¾ç½®èŽ·å–String data3 = getIntent().getStringExtra(newIntent);Timber.d(&quot;onNewIntent &quot; + data3); ä¸ºä»€ä¹ˆè¦è®¾ç½® setIntent(intent) æˆ‘ä»¬åœ¨å¤šæ¬¡å¯åŠ¨åŒä¸€ä¸ªæ ˆå”¯ä¸€æ¨¡å¼ä¸‹çš„activityæ—¶ï¼Œåœ¨onNewIntent()é‡Œé¢çš„getIntent()å¾—åˆ°çš„intentæ„Ÿè§‰éƒ½æ˜¯ç¬¬ä¸€æ¬¡çš„é‚£ä¸ªæ•°æ®ã€‚å¯¹ï¼Œè¿™é‡Œå°±æ˜¯è¿™ä¸ªé™·é˜±ã€‚å› ä¸ºå®ƒå°±æ˜¯ä¼šè¿”å›žç¬¬ä¸€ä¸ªintentçš„æ•°æ® ActivityStackTaskRecordä¸åŒçš„åº”ç”¨å°±ä¸åŒçš„ ä»»åŠ¡æ ˆ å®‰å“ç³»ç»Ÿç®¡ç†ç€ä¸åŒæ¨¡å¼ä¸‹çš„å¤šä¸ªActivityStackï¼ˆæ¯”å¦‚åœ¨home launcherç•Œé¢éœ€è¦æœ‰ä¸€ä¸ªActivityStackï¼Œç”»ä¸­ç”»æ¨¡å¼ï¼Œåˆ†å±æ¨¡å¼ç­‰ï¼‰ï¼Œä¸€ä¸ªActivityStackå¯ä»¥åŒ…å«å¾ˆå¤šä¸ªTaskRecordï¼Œä¸€ä¸ªTaskRecordåˆå¯ä»¥åŒ…å«å¾ˆå¤šä¸ªActivityRecordã€‚ æ¯ä¸€ä¸ªActivityRecordéƒ½ä¼šæœ‰ä¸€ä¸ªActivityä¸Žä¹‹å¯¹åº”ï¼Œä¸€ä¸ªActivityå¯èƒ½ä¼šæœ‰å¤šä¸ªActivityRecordï¼Œå› ä¸ºActivityå¯ä»¥è¢«å¤šæ¬¡å®žä¾‹åŒ–ï¼Œå–å†³äºŽå…¶launchmodeã€‚ä¸€ç³»åˆ—ç›¸å…³çš„ActivityRecordç»„æˆäº†ä¸€ä¸ªTaskRecordï¼ŒTaskRecordæ˜¯å­˜åœ¨äºŽActivityStackä¸­ï¼ŒActivityStackSupervisoræ˜¯ç”¨æ¥ç®¡ç†è¿™äº›ActivityStackçš„ã€‚ taskAffinityæ¸…å•æ–‡ä»¶ä¸­Applicationå’ŒActivityæ ‡ç­¾éƒ½å¯ä»¥ä½¿ç”¨android:taskAffinityï¼Œå€¼ä¸ºStringç±»åž‹ã€‚ å®ƒä»£è¡¨è¿™ä¸ªActivityæ‰€å¸Œæœ›å½’å±žçš„Taskï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªappä¸­çš„æ‰€æœ‰Activityæ‹¥æœ‰å…±åŒçš„Affinityï¼Œå³manifestä¸­å®šä¹‰çš„packageã€‚ å¦å¤–taskçš„affinityå–å†³äºŽå®ƒçš„æ ¹éƒ¨Activityã€‚ å¦‚æžœä½¿ç”¨SingleInstanceæ¨¡å¼å¯åŠ¨çš„Activityï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šaffinityçš„è¯ï¼Œåˆ›å»ºçš„æ–°taskçš„affinityè¿˜æ˜¯appçš„åŒ…åã€‚ FLAG_ACTIVITY_NEW_TASKåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç›®æ ‡Activityå°†ä¸ŽstartActivityçš„è°ƒç”¨è€…å¤„äºŽåŒä¸€taskä¸­ã€‚ä½†å¦‚æžœç”¨æˆ·ç‰¹åˆ«æŒ‡å®šäº†FLAG_ACTIVITY_NEW_TASKï¼Œè¡¨æ˜Žå®ƒå¸Œæœ›ä¸ºActivityé‡æ–°å¼€è®¾ä¸€ä¸ªTaskã€‚è¿™æ—¶å°±æœ‰ä¸¤ç§æƒ…å†µï¼š å‡å¦‚å½“å‰å·²ç»æœ‰ä¸€ä¸ªTaskï¼Œå®ƒçš„affinityä¸Žæ–°Activityæ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šç›´æŽ¥ç”¨æ­¤Taskæ¥å®Œæˆæ“ä½œï¼Œè€Œä¸æ˜¯å¦å¤–åˆ›å»ºä¸€ä¸ªTaskï¼› å¦åˆ™ç³»ç»Ÿéœ€è¦åˆ›å»ºä¸€ä¸ªTaskã€‚ allowTaskReparenting ä»€ä¹ˆæ„æ€Activity launch modeå¯åŠ¨æ¨¡å¼ Androidmanifest è®¾ç½® launch modeæ˜¯å¯¹ç›®æ ‡Activityè€Œè¨€ Intent flagæ¯” Androidmanifestçš„ä¼˜å…ˆçº§æ›´é«˜ 4ç§å¯åŠ¨æ¨¡å¼æˆ‘ç†è§£çš„å¯åŠ¨æ¨¡å¼ï¼Œé’ˆå¯¹çš„æ˜¯è¢«å¯åŠ¨çš„Activity standard åœ¨ä¸åŒçš„Taskä¸­æ‰“å¼€åŒä¸€ä¸ªActivityï¼ŒActivityä¼šè¢«åˆ›å»ºå¤šä¸ªå®žä¾‹ã€‚åˆ†åˆ«æ”¾è¿›æ‰“å¼€å®ƒçš„Taskä¸­ã€‚ ä¾‹å¦‚: ç‚¹å¼€çŸ­ä¿¡ä¸­çš„ç”µè¯å·ç ï¼Œ æ–°çš„ æ‰“ç”µè¯çš„Activityä¼šå­˜åœ¨äºŽ çŸ­ä¿¡Taskä¸­ã€‚ singleTop singleTask The system creates a new task and instantiates the activity at the root of the new task. However, if an instance of the activity already exists in a separate task, the system routes the intent to the existing instance through a call to its onNewIntent() method, rather than creating a new instance. Only one instance of the activity can exist at a time. åªä¼šåœ¨ä¸€ä¸ªTaskå‡ºçŽ°,è¿™ä¸ªTaské‡Œåªæœ‰ä¸€ä¸ªè¿™ä¸ªActivityï¼Œå…¨å±€å”¯ä¸€ singleInstance Same as &quot;singleTask&quot;, except that the system doesnâ€™t launch any other activities into the task holding the instance. The activity is always the single and only member of its task; any activities started by this one open in a separate task. é™¤äº†å…¨å±€å”¯ä¸€ï¼Œè¿˜ä¼šç‹¬å ä¸€ä¸ªTask taskAffinityæ¯ä¸ªActivityéƒ½æœ‰ä¸€ä¸ªtaskAffinityï¼Œé»˜è®¤å–è‡ªActivityæ‰€åœ¨çš„Applicationçš„taskAffinity,è€ŒåŽè€…åˆé»˜è®¤å–è‡ªappåŒ…å. æ¯ä¸ªTaskä¹Ÿæœ‰å®ƒè‡ªå·±çš„taskAffinityï¼Œå®ƒå–è‡ªæ ˆåº•çš„Activityçš„taskAffinity é»˜è®¤æƒ…å†µä¸‹ï¼ŒActivityä¼šç›´æŽ¥è¿›å…¥å½“å‰çš„Task ä½†å¯¹äºŽè®¾ç½®äº† launchMode &#x3D; â€œsingleTaskâ€çš„Activity,ç³»ç»Ÿä¼šå…ˆæ¯”å¯¹Activityå’Œå½“å‰Taskçš„taskAffinityæ˜¯å¦ç›¸åŒ å¦‚æžœç›¸åŒï¼Œä¾ç„¶æ­£å¸¸å…¥æ ˆ. å¦‚æžœä¸åŒï¼Œæ–°Activityä¼šåŽ»å¯»æ‰¾å’Œå®ƒ taskAffinityç›¸åŒçš„TaskåŽå…¥æ ˆã€‚ å¦‚æžœæ‰¾ä¸åˆ°ï¼Œç³»ç»Ÿå°±ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„Task,æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„Task. MainActivityå¯åŠ¨FirstActivity 123&lt;activity android:name=&quot;.component.launchmode.FirstActivity&quot; android:taskAffinity=&quot;com.comm.mytask&quot; /&gt; TaskRecord&#123;dff3f0b #4947 A=com.comm.util U=0 StackId=1 sz=2&#125; Run #4: ActivityRecord&#123;e52ebf7 u0 com.comm.util/.component.launchmode.FirstActivity t4947&#125; Run #3: ActivityRecord&#123;cd6b037 u0 com.comm.util/.MainActivity t4947&#125; 1234&lt;activity android:name=&quot;.component.launchmode.FirstActivity&quot; android:launchMode=&quot;singleTask&quot; android:taskAffinity=&quot;com.comm.mytask&quot; /&gt; 1234TaskRecord&#123;3713c1e #4946 A=com.comm.mytask U=0 StackId=1 sz=1&#125; Run #4: ActivityRecord&#123;3d3bd58 u0 com.comm.util/.component.launchmode.FirstActivity t4946&#125; TaskRecord&#123;273cacc #4945 A=com.comm.util U=0 StackId=1 sz=1&#125; Run #3: ActivityRecord&#123;77277e0 u0 com.comm.util/.MainActivity t4945&#125; æ·»åŠ å®Œ android:launchMode=&quot;singleTask&quot;åŽ å¤šäº†ä¸ªtask com.comm.mytask TaskAffinityå’Œæœ€è¿‘ä»»åŠ¡åˆ—è¡¨1adb shell dumpsys activity activities | sed -En -e &#x27;/Running activities/,/Run #0/p&#x27; SingleInstance ä¸è®¾ç½®taskAffinitySingleInstanceä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡æ ˆ 12345678910111213&lt;activity android:name=&quot;.component.launchmode.FirstActivity&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt; &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt; &lt;/intent-filter&gt;&lt;/activity&gt;&lt;activity android:name=&quot;.component.launchmode.SecondActivity&quot; android:launchMode=&quot;singleInstance&quot; /&gt;&lt;activity android:name=&quot;.component.launchmode.ThirdActivity&quot; /&gt; 1234567891011121314151617D/FirstActivity LaunchModeActivity: onCreate() taskId 86D/FirstActivity LaunchModeActivity: onStart()D/FirstActivity LaunchModeActivity: onResume()D/FirstActivity LaunchModeActivity: onPause()D/SecondActivity LaunchModeActivity: onCreate() taskId 85D/SecondActivity LaunchModeActivity: onStart()D/SecondActivity LaunchModeActivity: onRestoreInstanceState()D/SecondActivity LaunchModeActivity: onNewIntent(Intent intent)D/SecondActivity LaunchModeActivity: onResume()D/FirstActivity LaunchModeActivity: onSaveInstanceState()D/FirstActivity LaunchModeActivity: onStop()D/SecondActivity LaunchModeActivity: onPause()D/ThirdActivity LaunchModeActivity: onCreate() taskId 86D/ThirdActivity LaunchModeActivity: onStart()D/ThirdActivity LaunchModeActivity: onResume()D/SecondActivity LaunchModeActivity: onSaveInstanceState()D/SecondActivity LaunchModeActivity: onStop() å¯ä»¥çœ‹åˆ° FirstActivity ã€ThirdActivityåœ¨åŒä¸€ä¸ªæ ˆä¸­ï¼ŒSecondActivityå•ç‹¬åœ¨ä¸€ä¸ªæ ˆä¸­ æ‰€ä»¥æŒ‰è¿”å›žé”®ç›˜ï¼Œå…ˆåˆ° FirstActivityï¼Œç„¶åŽåˆ°SecondActivity . æ ˆå†…ActivityæŸ¥çœ‹ï¼Œè®¾ç½®taskAffinity123456789101112131415&lt;activity android:name=&quot;.component.launchmode.SerachActivity&quot; /&gt; &lt;activity android:name=&quot;.component.onactivityresult.SecondActivity&quot; android:launchMode=&quot;singleTask&quot; android:taskAffinity=&quot;&quot; /&gt; &lt;activity android:name=&quot;.component.launchmode.FirstActivity&quot; android:configChanges=&quot;orientation&quot; android:launchMode=&quot;singleTask&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt; &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; adb shell dumpsys activity taskAffinityå±žæ€§çš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”ä¸­é—´å¿…é¡»å«æœ‰åˆ†éš”ç¬¦â€.â€ standardæ¨¡å¼ï¼ŒtaskAffinityç»§æ‰¿è‡ªApplicationçš„taskAffinityï¼Œè€ŒApplicationé»˜è®¤taskAffinityä¸ºåŒ…åï¼Œæ‰€ä»¥MainActivityçš„taskAffinityä¸ºåŒ…åã€‚ https://developer.android.com/guide/components/activities/tasks-and-back-stack https://blog.csdn.net/zhangjg_blog/article/details/10923643 https://blog.csdn.net/javazejian/article/details/52072131 ç”Ÿå‘½å‘¨æœŸè§†å›¾ http://yhz61010.iteye.com/blog/2389877 https://blog.csdn.net/qq_16628781/article/details/51539715 ç„¶è€Œ ANDROID 4.4 å¯åŠ¨æ¨¡å¼ä¼šå‡ºçŽ°é—®é¢˜http://www.jianshu.com/p/2a9fcf3c11e4 http://blog.csdn.net/mynameishuangshuai/article/details/51491074 https://www.youtube.com/watch?v=r4T9zkhpmII ä»»åŠ¡æ ˆä¸€ ä»Žå›¾ä¸­æˆ‘ä»¬çœ‹å‡ºå‰å°ä»»åŠ¡æ ˆåˆ†åˆ«ä¸ºABä¸¤ä¸ªActivityï¼ŒåŽå°ä»»åŠ¡æ ˆåˆ†åˆ«ä¸ºCDä¸¤ä¸ªä»»åŠ¡æ ˆï¼Œè€Œä¸”å…¶å¯åŠ¨æ¨¡å¼å‡ä¸ºsingleTaskï¼Œæ­¤æ—¶æˆ‘ä»¬å…ˆå¯åŠ¨CDï¼Œç„¶åŽå†å¯åŠ¨ABï¼Œå†æœ‰Bå¯åŠ¨Dï¼Œæ­¤æ—¶åŽå°ä»»åŠ¡æ ˆä¾¿ä¼šè¢«åˆ‡æ¢åˆ°å‰å°ï¼Œè€Œä¸”è¿™ä¸ªæ—¶å€™æ•´ä¸ªåŽé€€åˆ—è¡¨å°±å˜æˆäº†ABCDï¼Œè¯·æ³¨æ„æˆ‘ä»¬è¿™é‡Œå¼ºè°ƒçš„æ˜¯åŽé€€åˆ—è¡¨ï¼Œè€Œéžæ ˆåˆå¹¶ã€‚å› æ­¤å½“ç”¨æˆ·ç‚¹å‡»backé”®æ—¶ï¼Œåˆ—è¡¨ä¸­çš„Activityä¼šä¾æ¬¡æŒ‰DCBAé¡ºåºå‡ºæ ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å‰é¢æˆ‘ä»¬åœ¨åˆ†æžsingleTaskæ¨¡å¼æ—¶ï¼Œæåˆ°è¿‡singleTaskæ¨¡å¼æœ‰äº›æ¯”è¾ƒç‰¹æ®Šçš„åœºæ™¯ï¼ŒçŽ°åœ¨æˆ‘ä»¬å°±æ¥äº†è§£äº†è§£å®ƒä»¬ã€‚ç‰¹æ®Šæƒ…æ™¯ä¸€:çŽ°åœ¨æˆ‘ä»¬å‡è®¾æœ‰å¦‚ä¸‹ä¸¤ä¸ªTaskæ ˆ,åˆ†åˆ«ä¸ºå‰å°ä»»åŠ¡æ ˆå’ŒåŽå°ä»»åŠ¡æ ˆ ä»Žå›¾ä¸­æˆ‘ä»¬çœ‹å‡ºå‰å°ä»»åŠ¡æ ˆåˆ†åˆ«ä¸ºABä¸¤ä¸ªActivityï¼ŒåŽå°ä»»åŠ¡æ ˆåˆ†åˆ«ä¸ºCDä¸¤ä¸ªä»»åŠ¡æ ˆï¼Œè€Œä¸”å…¶å¯åŠ¨æ¨¡å¼å‡ä¸ºsingleTaskï¼Œæ­¤æ—¶æˆ‘ä»¬å…ˆå¯åŠ¨CDï¼Œç„¶åŽå†å¯åŠ¨ABï¼Œå†æœ‰Bå¯åŠ¨Dï¼Œæ­¤æ—¶åŽå°ä»»åŠ¡æ ˆä¾¿ä¼šè¢«åˆ‡æ¢åˆ°å‰å°ï¼Œè€Œä¸”è¿™ä¸ªæ—¶å€™æ•´ä¸ªåŽé€€åˆ—è¡¨å°±å˜æˆäº†ABCDï¼Œè¯·æ³¨æ„æˆ‘ä»¬è¿™é‡Œå¼ºè°ƒçš„æ˜¯åŽé€€åˆ—è¡¨ï¼Œè€Œéžæ ˆåˆå¹¶ã€‚å› æ­¤å½“ç”¨æˆ·ç‚¹å‡»backé”®æ—¶ï¼Œåˆ—è¡¨ä¸­çš„Activityä¼šä¾æ¬¡æŒ‰DCBAé¡ºåºå‡ºæ ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªåº”ç”¨ActivityTaskå’ŒActivityTask2æ¥æµ‹è¯•é‡çŽ°è¿™ä¸ªçŽ°è±¡ã€‚å› ä¸ºä¸¤ä¸ªæ˜¯ä¸åŒçš„åº”ç”¨æ‰€ä»¥å¯åŠ¨æ—¶æ‰€åœ¨çš„æ ˆä¹Ÿæ˜¯ä¸åŒã€‚æˆ‘ä»¬å…ˆå¯åŠ¨ActivityTask2çš„åº”ç”¨ï¼Œå…¶ActivityCå’ŒActivityDéƒ½æ˜¯singleTaskæ¨¡å¼ï¼Œç„¶åŽå†å¯åŠ¨åº”ç”¨ActivityTaskï¼Œæ­¤æ—¶ActivityCå’ŒActivityDæ‰€åœ¨ä»»åŠ¡æ ˆä¼šè¢«é€€å±…åŽå°ï¼Œè€Œæ‰“å¼€çš„ActivityAå’ŒActivityBä¼šåœ¨å‰å°ï¼Œè€Œä¸”éƒ½æ˜¯é»˜è®¤æ¨¡å¼ã€‚æˆ‘ä»¬é€šè¿‡ adb shell dumpsys activity activities å‘½ä»¤æŸ¥çœ‹æ­¤æ—¶æ ˆçš„æƒ…å†µï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”±ä¸¤ä¸ªæ ˆï¼Œåˆ†åˆ«ä¸ºid&#x3D;222ä¸”æ ˆåä¸ºâ€œcom.cmcm.activitytaskâ€çš„ä»»åŠ¡æ ˆå…¶åŒ…å«ActivityAå’ŒActivityBï¼ˆä¸‹é¢ç®€ç§°ABï¼Œæ ˆåä¸€èˆ¬é»˜è®¤å’ŒåŒ…åç›¸åŒï¼‰ï¼Œå¦å¤–ä¸€ä¸ªä»»åŠ¡æ ˆï¼Œid&#x3D;221ï¼Œæ ˆåä¸ºâ€œcom.cmcm.activitytask2â€ï¼Œå…¶åŒ…å«ActivityCå’ŒActivityDï¼ˆä¸‹é¢æ£€æµ‹CDï¼‰ã€‚çŽ°åœ¨æˆ‘ä»¬é€šè¿‡ActivityBåŽ»å¯åŠ¨ActivityDï¼Œç„¶åŽæŒ‰backé”®å›žé€€ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŒ…å«CDçš„ä»»åŠ¡æ ˆè¢«æå‰çš„ï¼Œè™½ç„¶CDéš”å¼€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä»Židå’Œæ ˆåå¯ä»¥å‘çŽ°ä»–ä»¬æ˜¯åŒä¸€ä¸ªæ ˆï¼Œè€ŒABæ‰€åœ¨çš„æ ˆåˆ™åœ¨CDæ‰€åœ¨æ ˆçš„åŽé¢ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬æŒ‰backå›žé€€æ—¶ï¼Œé€€å‡ºé¡ºåºæ˜¯è¿™æ ·çš„D-&gt;C-&gt;B-&gt;Aï¼ŒåŠ¨æ€å›¾å¦‚ä¸‹ï¼š åˆ°æ­¤æˆ‘ä»¬å¯¹SingleTaskæ¨¡å¼åˆæœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œä½†æ˜¯æˆ‘ä»¬å‘çŽ°ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªåº”ç”¨ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰ä¸åŒçš„ä»»åŠ¡æ ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¸€ä¸ªåº”ç”¨ä¸­å­˜åœ¨å¤šä¸ªä¸åŒçš„ä»»åŠ¡æ ˆå‘¢ï¼ˆæš‚æ—¶ä¸è€ƒè™‘singleInstance æ¨¡å¼ï¼‰ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯è‚¯å®šçš„å•¦ï¼Œè¿™å°±éœ€è¦é€šè¿‡taskAffinityå±žæ€§æ¥è®¾ç½®ä¸åŒçš„ä»»åŠ¡æ ˆåç§°ï¼Œä¸è¿‡è¿™ç‚¹å°†æ”¾åœ¨ä¸‹ç¯‡æ¥è®°å½•ï¼Œæœ¬ç¯‡å°±å…ˆåˆ°è¿™é‡Œå‘Šä¸€æ®µè½å“ˆã€‚ ä»»åŠ¡æ ˆäºŒä»»åŠ¡æ ˆäºŒè¿™ç¯‡æ–‡ç« è®²çš„å¾ˆå¥½ â€‹ è¿™ä¸ªå’ŒallowTaskReparentingæ²¡å…³ç³» â€‹ è¿™ä¸ªå’ŒallowTaskReparentingæ²¡å…³ç³» å‡å¦‚çŽ°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚,æˆ‘ä»¬çš„å®¢æˆ·ç«¯appæ­£å¤„äºŽåŽå°è¿è¡Œï¼Œæ­¤æ—¶æˆ‘ä»¬å› ä¸ºæŸäº›éœ€è¦ï¼Œè®©å¾®ä¿¡è°ƒç”¨è‡ªå·±å®¢æˆ·ç«¯appçš„æŸä¸ªé¡µé¢ï¼Œç”¨æˆ·å®Œæˆç›¸å…³æ“ä½œåŽï¼Œæˆ‘ä»¬ä¸åšä»»ä½•å¤„ç†ï¼ŒæŒ‰ä¸‹å›žé€€æˆ–è€…å½“å‰Activity.finish()ï¼Œé¡µé¢éƒ½ä¼šåœç•™åœ¨è‡ªå·±çš„å®¢æˆ·ç«¯ï¼ˆæ­¤æ—¶æˆ‘ä»¬çš„appå›žé€€æ ˆä¸ä¸ºç©ºï¼‰ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆé€»è¾‘çš„ï¼Œç”¨æˆ·ä½“éªŒä¹Ÿæ˜¯ç›¸å½“å‡ºé—®é¢˜çš„ã€‚æˆ‘ä»¬è¦æ±‚æ˜¯ï¼Œå›žé€€å¿…é¡»å›žåˆ°å¾®ä¿¡å®¢æˆ·ç«¯,è€Œä¸”è¦ä¿è¯ä¸æ€æ­»è‡ªå·±çš„app.è¿™æ—¶å€™æˆ‘ä»¬çš„å¤„ç†æ–¹æ¡ˆå°±æ˜¯ï¼Œè®¾ç½®å½“å‰è¢«è°ƒèµ·Activityçš„å±žæ€§ä¸ºï¼š LaunchMode&#x3D;â€â€SingleTaskâ€ taskAffinity&#x3D;â€com.tencent.mmâ€ å…¶ä¸­com.tencent.mmæ˜¯å€ŸåŠ©äºŽå·¥å…·æ‰¾åˆ°çš„å¾®ä¿¡åŒ…åï¼Œå°±æ˜¯æŠŠè‡ªå·±çš„Activityæ”¾åˆ°å¾®ä¿¡é»˜è®¤çš„Taskæ ˆé‡Œé¢ï¼Œè¿™æ ·å›žé€€æ—¶å°±ä¼šéµå¾ªâ€œTaskåªè¦æœ‰Activityä¸€å®šä»Žæœ¬Taskå‰©ä½™Activityå›žé€€â€çš„åŽŸåˆ™ï¼Œä¸ä¼šå›žåˆ°è‡ªå·±çš„å®¢æˆ·ç«¯ï¼›è€Œä¸”ä¹Ÿä¸ä¼šå½±å“è‡ªå·±å®¢æˆ·ç«¯æœ¬æ¥çš„Activityå’ŒTaské€»è¾‘ã€‚ TaskAffinityä¸ŽallowTaskReparentingåº”ç”¨åœºæ™¯ ä¸€ä¸ªe-mailåº”ç”¨æ¶ˆæ¯åŒ…å«ä¸€ä¸ªç½‘é¡µé“¾æŽ¥ï¼Œç‚¹å‡»è¿™ä¸ªé“¾æŽ¥å°†å‡ºå‘ä¸€ä¸ªactivityæ¥æ˜¾ç¤ºè¿™ä¸ªé¡µé¢ï¼Œè™½ç„¶è¿™ä¸ªactivityæ˜¯æµè§ˆå™¨åº”ç”¨å®šä¹‰çš„ï¼Œä½†æ˜¯activityç”±äºŽe-mailåº”ç”¨ç¨‹åºåŠ è½½çš„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ—¶å€™è¯¥activityä¹Ÿå±žäºŽe-mailè¿™ä¸ªtaskã€‚å¦‚æžœe-mailåº”ç”¨åˆ‡æ¢åˆ°åŽå°ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡æ‰“å¼€æ—¶ç”±äºŽallowTaskReparentingå€¼ä¸ºtrueï¼Œæ­¤æ—¶æµè§ˆå™¨å°±ä¼šæ˜¾ç¤ºè¯¥activityè€Œä¸æ˜¾ç¤ºæµè§ˆå™¨ä¸»ç•Œé¢ï¼ŒåŒæ—¶actvityä¹Ÿå°†ä»Že-mailçš„ä»»åŠ¡æ ˆè¿ç§»åˆ°æµè§ˆå™¨çš„ä»»åŠ¡æ ˆï¼Œä¸‹æ¬¡æ‰“å¼€e-ä¹°äº†æ—¶å¹¶ä¸ä¼šå†æ˜¾ç¤ºè¯¥activity åˆ°æ­¤TaskAffinityå°±å…¨éƒ¨ä»‹ç»å®Œäº†ï¼Œæœ€åŽæˆ‘ä»¬å†æ¥äº†è§£å‡ ä¸ªè·Ÿä»»åŠ¡æ ˆç›¸å…³çš„å±žæ€§å‚æ•°ï¼›","categories":[],"tags":[]},{"title":"viewBinding","slug":"viewBinding","date":"2022-12-27T13:04:33.000Z","updated":"2023-01-02T03:31:39.350Z","comments":true,"path":"2022/12/27/viewBinding/","link":"","permalink":"https://noteforme.github.io/2022/12/27/viewBinding/","excerpt":"","text":"https://www.cnblogs.com/pengxurui/p/16669380.html https://juejin.cn/post/6958346113552220173 ç¼–è¯‘ç”Ÿæˆçš„ç›®å½•build/generated/data_binding_base_class_source_out/ ActivityCBinding.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public final class ActivityCBinding implements ViewBinding &#123; @NonNull private final LinearLayout rootView; @NonNull public final Button btC; @NonNull public final Button btD; private ActivityCBinding(@NonNull LinearLayout rootView, @NonNull Button btC, @NonNull Button btD) &#123; this.rootView = rootView; this.btC = btC; this.btD = btD; &#125; @Override @NonNull public LinearLayout getRoot() &#123; return rootView; &#125; @NonNull public static ActivityCBinding inflate(@NonNull LayoutInflater inflater) &#123; return inflate(inflater, null, false); &#125; @NonNull public static ActivityCBinding inflate(@NonNull LayoutInflater inflater, @Nullable ViewGroup parent, boolean attachToParent) &#123; View root = inflater.inflate(R.layout.activity_c, parent, false); if (attachToParent) &#123; parent.addView(root); &#125; return bind(root); &#125; @NonNull public static ActivityCBinding bind(@NonNull View rootView) &#123; // The body of this method is generated in a way you would not otherwise write. // This is done to optimize the compiled bytecode for size and performance. int id; missingId: &#123; id = R.id.bt_c; Button btC = ViewBindings.findChildViewById(rootView, id); if (btC == null) &#123; break missingId; &#125; id = R.id.bt_D; Button btD = ViewBindings.findChildViewById(rootView, id); if (btD == null) &#123; break missingId; &#125; return new ActivityCBinding((LinearLayout) rootView, btC, btD); &#125; String missingId = rootView.getResources().getResourceName(id); throw new NullPointerException(&quot;Missing required view with ID: &quot;.concat(missingId)); &#125;&#125; ä»ŽæŽ§ä»¶ Button btC; Button btD;å¯ä»¥å¾ˆå®¹æ˜“çœ‹åˆ°ã€‚idéƒ½æ˜¯findbyidç”Ÿæˆçš„ã€‚ 123456789101112131415161718192021222324class FragmentViewBinding&lt;T : ViewBinding&gt;(classes: Class&lt;T&gt;, fragment: Fragment) : FragmentDelegate&lt;T&gt;(fragment) &#123; private val TAG = &quot;TAG&quot; private val layoutInflater = classes.inflateMethod() private val bindView = classes.bindMethod() //è°ƒç”¨getValueå±žäºŽå±žæ€§ä»£ç†,è®¿é—®viewbidingå±žæ€§è°ƒç”¨getVauleæ–¹æ³• @Suppress(&quot;UNCHECKED_CAST&quot;) override fun getValue(thisRef: Fragment, property: KProperty&lt;*&gt;): T = viewBinding ?: let &#123; Log.i(TAG, &quot;getValue: $layoutInflater $bindView&quot;) val bind: T = (if (thisRef.view == null) &#123; layoutInflater.invoke(null, thisRef.layoutInflater) // è¡¨ç¤º ActivityCBinding.inflate() &#125; else &#123; bindView.invoke(null, thisRef.view) //è¡¨ç¤º ActivityCBinding.bind() &#125;) as T viewBinding = bind bind &#125;&#125;","categories":[],"tags":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/tags/ANDROID/"}]},{"title":"LC-backtrack-combination","slug":"LC-backtrack-combination","date":"2022-10-30T02:27:10.000Z","updated":"2023-07-17T13:34:08.142Z","comments":true,"path":"2022/10/30/LC-backtrack-combination/","link":"","permalink":"https://noteforme.github.io/2022/10/30/LC-backtrack-combination/","excerpt":"","text":"ç»„åˆ ç»„åˆçš„å…ƒç´ æ˜¯æ— åºçš„[1,2] , [2,1]æ˜¯ä¸€ä¸ªç»„åˆ ç»„åˆçš„å…ƒç´ æ˜¯ä¸èƒ½é‡å¤çš„ 77. ç»„åˆç»™å®šä¸¤ä¸ªæ•´æ•° n å’Œ kï¼Œè¿”å›žèŒƒå›´ [1, n] ä¸­æ‰€æœ‰å¯èƒ½çš„ k ä¸ªæ•°çš„ç»„åˆã€‚ https://www.bilibili.com/video/BV1ti4y1L7cv æ‹¿åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ . ç”¨ä¸Šé¢çš„å›¾å¾ˆå½¢è±¡,åœ¨å‰©ä½™çš„å…ƒç´ ä¸­å–æ•°æ®ï¼Œå’Œ äºŒå‰æ ‘è·¯å¾„å¾ˆåƒ,é€’å½’åŠ å›žæº¯çš„è¿‡ç¨‹. è¿™é‡Œä¸€å¼€å§‹ç”¨çš„æ˜¯ startIndex+1,ä¸ç†è§£ï¼Œè¿™é‡Œå›žæº¯åŽ,æœ€ç¬¬ä¸€æ¬¡çš„for (i in startIndex..n)å¦‚æžœi ==2,æˆ–è€…3ï¼Œæˆ–è€…4, é€’å½’åˆ°åº•å±‚ï¼Œå†å›žæº¯åˆ°ç¬¬ä¸€æ¬¡å¾ªçŽ¯çš„æ—¶å€™ï¼ŒstartIndexéƒ½æ˜¯ç¬¬ä¸€æ¬¡çš„2,è¿™æ ·å°±å¯¼è‡´å‰©ä½™çš„å…ƒç´ ä¸å¯¹ 1234567891011121314151617fun combine(n: Int, k: Int): List&lt;List&lt;Int&gt;&gt; &#123; backTracking(n, k, 1) return result&#125;private fun backTracking(n: Int, k: Int, startIndex: Int) &#123; if (path.size == k) &#123; result.add(path.toMutableList()) return &#125; for (i in startIndex..n) &#123; path.add(i) backTracking(n, k, i + 1) // è¿™é‡Œä¸€å¼€å§‹ç”¨çš„æ˜¯ startIndex+1 path.remove(i) &#125;&#125; ç»„åˆå‰ªæžhttps://www.bilibili.com/video/BV1wi4y157er/ https://programmercarl.com/0077.%E7%BB%84%E5%90%88.html#%E5%89%AA%E6%9E%9D%E4%BC%98%E5%8C%96 æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œn = 4ï¼Œk = 4çš„è¯ï¼Œé‚£ä¹ˆç¬¬ä¸€å±‚forå¾ªçŽ¯çš„æ—¶å€™ï¼Œä»Žå…ƒç´ 2å¼€å§‹çš„éåŽ†éƒ½æ²¡æœ‰æ„ä¹‰äº†ã€‚ åœ¨ç¬¬äºŒå±‚forå¾ªçŽ¯ï¼Œä»Žå…ƒç´ 3å¼€å§‹çš„éåŽ†éƒ½æ²¡æœ‰æ„ä¹‰äº†ã€‚ 12345for (i in startIndex..n) &#123; // è¿™é‡Œå¯¹åº”æ¨¡æ‹Ÿå°±æ˜¯,å–1,å–2 ,å–3,å–4 ,å‡ ä¸ªå­å­©å­çš„æ“ä½œ. path.add(i) backTracking(n, k, i + 1) // è¿™é‡Œä¸€å¼€å§‹ç”¨çš„æ˜¯ startIndex+1 path.remove(i)&#125; å‰ªæžå°±æ˜¯ i&lt; nè¿™ä¸ªèŒƒå›´é‡Œé¢åšæ“ä½œã€‚ æŽ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ä¼˜åŒ–è¿‡ç¨‹å¦‚ä¸‹ï¼š å·²ç»é€‰æ‹©çš„å…ƒç´ ä¸ªæ•°ï¼špath.size(); è¿˜éœ€è¦çš„å…ƒç´ ä¸ªæ•°ä¸º: k - path.size(); åœ¨é›†åˆnä¸­è‡³å¤šè¦ä»Žè¯¥èµ·å§‹ä½ç½® : n - (k - path.size()) + 1ï¼Œå¼€å§‹éåŽ† ä¸ºä»€ä¹ˆæœ‰ä¸ª+1å‘¢ï¼Œå› ä¸ºåŒ…æ‹¬èµ·å§‹ä½ç½®ï¼Œæˆ‘ä»¬è¦æ˜¯ä¸€ä¸ªå·¦é—­çš„é›†åˆã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œn = 4ï¼Œk = 3ï¼Œ ç›®å‰å·²ç»é€‰å–çš„å…ƒç´ ä¸º0ï¼ˆpath.sizeä¸º0ï¼‰ï¼Œn - (k - 0) + 1 å³ 4 - ( 3 - 0) + 1 = 2ã€‚ ä»Ž2å¼€å§‹æœç´¢éƒ½æ˜¯åˆç†çš„ï¼Œå¯ä»¥æ˜¯ç»„åˆ[2, 3, 4]ã€‚ è¿™é‡Œå¤§å®¶æƒ³ä¸æ‡‚çš„è¯ï¼Œå»ºè®®ä¹Ÿä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå°±çŸ¥é“æ˜¯ä¸æ˜¯è¦+1äº†ã€‚ 123456789101112131415161718val path = ArrayList&lt;Int&gt;()val result = ArrayList&lt;List&lt;Int&gt;&gt;()fun combine(n: Int, k: Int): List&lt;List&lt;Int&gt;&gt; &#123; backTracking1(n, k, 1) return result&#125;//å‰ªæžæ“ä½œprivate fun backTracking1(n: Int, k: Int, startIndex: Int) &#123; if (path.size == k) &#123; result.add(path.toMutableList()) return &#125; for (i in startIndex..(n - (k - path.size) + 1)) &#123; path.add(i) backTracking1(n, k, i + 1) // è¿™é‡Œä¸€å¼€å§‹ç”¨çš„æ˜¯ startIndex+1 path.remove(i) &#125;&#125; 216. ç»„åˆæ€»å’Œ III åªä½¿ç”¨æ•°å­—1åˆ°9 . æ¯ä¸ªæ•°å­— æœ€å¤šä½¿ç”¨ä¸€æ¬¡ . ä»Ž1å¼€å§‹é€‰å–ï¼Œæ¯æ¬¡å¾ªçŽ¯å¾€åŽé€‰å–ï¼Œå¦‚æžœå¾€å‰é€‰æ•°å­—å…¥[1,2], [2,1]çš„æƒ…å†µï¼Œå°±é‡å¤äº†. é€‰å–å…ƒç´ ç»¼åˆ==n , å¹¶ä¸”æ˜¯kä¸ªï¼Œè£…å…¥æ•°ç»„ã€‚ æˆ‘çš„è§£æ³•if (sum == n &amp;&amp; pathList.size == k)æ”¾ä¸€èµ·ä¸å¥½ ï¼ŒpathList.sizeåˆ°äº†k ä¸ªæ•°ï¼ŒåŽé¢çš„å°±ä¸ç”¨åŠ äº†ï¼Œè¾¾åˆ°ç«–å‘å‰ªæžçš„ç›®çš„ã€‚ 123456789101112131415161718192021private val result = ArrayList&lt;List&lt;Int&gt;&gt;()private var sum: Int = 0 //é›†åˆçš„å’Œprivate val pathList = ArrayList&lt;Int&gt;() // é›†åˆfun combinationSum3(k: Int, n: Int): List&lt;List&lt;Int&gt;&gt; &#123; blockTracking(k, n, 1) return result&#125;private fun blockTracking(k: Int, n: Int, startIndex: Int) &#123; if (sum == n &amp;&amp; pathList.size == k) &#123; // ç›¸åŠ ä¹‹å’Œä¸º n çš„ k ä¸ªæ•°çš„ç»„åˆ result.add(pathList.toMutableList()) return &#125; for (i in startIndex..9) &#123; sum += i pathList.add(i) blockTracking(k, n, i + 1) sum -= i pathList.remove(i) &#125;&#125; å‰ªæžè¿˜æ²¡æƒ³å¥½ pathList.sizeåˆ°äº†k ä¸ªæ•°ï¼ŒåŽé¢çš„å°±ä¸ç”¨åŠ äº†ï¼Œè¾¾åˆ°ç«–å‘å‰ªæžçš„ç›®çš„ã€‚ (9 - (k - pathList.size) + 1) åˆ†æž k - pathList.size : ä»Ž1å¼€å§‹é€‰å–,è¿˜å·®å¤šå°‘ä¸ªå…ƒç´  9 - (k - pathList.size) : å¦‚æžœä»Ž1â€¦9é€‰å–ï¼Œä¸ºäº†é¿å…é‡å¤ï¼Œä¸€ç›´å¾€å¤§çš„æ•°é€‰å–,ç¬¬1æ¬¡é€‰åˆ°äº†8,å¦‚æžœk==2,é‚£ä¹ˆè¿‡äº†8å°±æ²¡æ„ä¹‰äº†ï¼Œç¬¬ä¸€æ¬¡çš„9å°±ä¸éœ€è¦é€‰å–äº†. (9 - (k - pathList.size) + 1) å¤„ç†ä¸‹æ ‡å€¼ã€‚ 123456789101112131415161718192021222324252627private val result = ArrayList&lt;List&lt;Int&gt;&gt;()private var sum: Int = 0 //é›†åˆçš„å’Œprivate val pathList = ArrayList&lt;Int&gt;() // é›†åˆfun combinationSum3(k: Int, n: Int): List&lt;List&lt;Int&gt;&gt; &#123; blockTracking(k, n, 1) println(result) return result&#125;private fun blockTracking(k: Int, n: Int, startIndex: Int) &#123; if (pathList.size == k) &#123; //shuxiang if (sum == n) &#123; result.add(pathList.toMutableList()) &#125; return &#125; for (i in startIndex..(9 - (k - pathList.size) + 1)) &#123; // æ¨ªå‘å‰ªæž if (sum &gt; n) &#123; //å‰ªæž break &#125; sum += i pathList.add(i) blockTracking(k, n, i + 1) sum -= i pathList.remove(i) &#125;&#125; 123456789101112131415161718private fun blockTracking(k: Int, n: Int, startIndex: Int) &#123; if (sum &gt; n) &#123; return //sum &gt; n ç›´æŽ¥è¿”å›žï¼Œéšæƒ³å½•çš„è§£æ³•ï¼Œè¿™æ ·æ›´å¥½. &#125; if (pathList.size == k) &#123; if (sum == n) &#123; result.add(pathList.toMutableList()) &#125; return &#125; for (i in startIndex..(9 - (k - pathList.size) + 1)) &#123; sum += i pathList.add(i) blockTracking(k, n, i + 1) sum -= i pathList.remove(i) &#125;&#125; 17.ç”µè¯å·ç çš„å­—æ¯ç»„åˆå‰é¢çš„é¢˜ç›®éƒ½æ˜¯åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢å–ï¼Œçœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯åœ¨æ•°ç»„é‡Œé¢ï¼Œå†å–é‡Œé¢çš„æ•°ç»„ã€‚ é—®é¢˜æ˜¯ï¼Œå¦‚æžœè¾“å…¥â€235â€,é‚£ä¹ˆä»–ä»¬å†…éƒ¨æ•°ç»„çš„ç´¢å¼•startIndexæ€Žä¹ˆæ±‚å‡ºæ¥. Stringä¸­çš„æ•°å­—è½¬int1234val digits = &quot;23&quot;val c = digits[0] - &#x27;0&#x27; // 50 - 48println(digits[0].code) // ASCIIæ˜¯ 50println(&#x27;0&#x27;.code) //ASCIIæ˜¯ 48 39.ç»„åˆæ€»å’Œè¿™é¢˜ç›®å’Œå‰é¢çš„åŒºåˆ«æ˜¯ï¼Œå¯ä»¥é€‰å–é‡å¤çš„å…ƒç´ . é€‰äº†2åŽï¼Œç¬¬äºŒåˆ—é€‰5è¿™æ—¶å€™ä¸èƒ½é€‰2äº†ï¼Œå¦åˆ™å°±ä¼šé‡å¤äº†ã€‚ çœ‹äº†éšæƒ³å½•åˆ†æžè§†é¢‘ï¼Œåœ¨åˆ†æžä»£ç å‰ï¼Œæ ¹æ®ä¸Šé¢çš„å›¾äº†è§£åˆ°çš„æ€è·¯. æ•´ä½“å›žæº¯æž¶æž„å’Œå‰é¢çš„éƒ½æ˜¯ä¸€æ ·çš„,é€‰äº†2åŽï¼ŒåŽé¢è¿˜æ˜¯å¯ä»¥ç»§ç»­253, é€‰äº†5åŽåªæœ‰53äº†ï¼Œå¦åˆ™å°±æœ‰é‡å¤çš„ã€‚ ä¸€å¼€å§‹æˆ‘çš„è§£æ³•æ˜¯backTrack(candidates.toList(), target,i),ä¼ å…¥forå¾ªçŽ¯ä¸­çš„iï¼Œè¿™æ ·ä¼šå¯¼è‡´æœ‰æ¼æŽ‰å‰é¢çš„æƒ…å†µã€‚è¦çŸ¥é“forå¾ªçŽ¯çš„éƒ¨åˆ†å°±æ˜¯æ ‘çš„å®½åº¦ã€‚ åŽé¢çš„å‰ªæžåº”è¯¥ä¹Ÿæ˜¯é’ˆå¯¹è¿™éƒ¨åˆ†ã€‚ 123456789101112131415161718192021222324var sum = 0private val path = ArrayList&lt;Int&gt;()private val result = ArrayList&lt;List&lt;Int&gt;&gt;()fun combinationSum(candidates: IntArray, target: Int): List&lt;List&lt;Int&gt;&gt; &#123; backTrack(candidates.toList(), target) return result&#125;private fun backTrack(candidates: List&lt;Int&gt;, target: Int) &#123; if (sum &gt; target) &#123; // èŠ‚ç‚¹å’Œ return &#125; if (sum == target) &#123; result.add(path.toList()) return &#125; for ((i, item) in candidates.withIndex()) &#123; path.add(item) sum += item backTrack(candidates.toMutableList().subList(i, candidates.size), target) // åªéœ€è¦ä¼ å…¥åŽé¢èƒ½é€‰å–çš„æ•°ç»„éƒ¨åˆ† path.remove(item) sum -= item &#125;&#125; çœ‹äº†éšæƒ³å½•çš„éƒ¨åˆ†è§£æ³•è§†é¢‘åŽï¼Œæ„Ÿè§‰è¿™ç§æ›´å¥½ï¼Œæ ¹æ®startIndexæ¥å–æ•°ç»„ä½ç½®ã€‚ä¼ å…¥startIndexåŽï¼ŒåŽé¢çš„æ™ºèƒ½ä»ŽstartIndexåŽé¢å–ï¼Œå’Œåˆ†å‰²æ•°ç»„æ˜¯ä¸€æ ·çš„é“ç†ï¼Œæ„Ÿè§‰æ•ˆçŽ‡ä¼šæ›´å¥½ã€‚ 1234567891011121314151617181920212223var sum = 0private val path = ArrayList&lt;Int&gt;()private val result = ArrayList&lt;List&lt;Int&gt;&gt;()fun combinationSum(candidates: IntArray, target: Int): List&lt;List&lt;Int&gt;&gt; &#123; backTrack(candidates.toList(), target, 0) return result&#125;private fun backTrack(candidates: List&lt;Int&gt;, target: Int, startIndex: Int) &#123; if (sum &gt; target) &#123; return &#125; if (sum == target) &#123; result.add(path.toList()) return &#125; for (i in startIndex until candidates.size) &#123; path.add(candidates[i]) sum += candidates[i] backTrack(candidates, target, i) // iåŽåˆ†å‰²å…ƒç´ ï¼Œä¸€å¼€å§‹å†™çš„æ˜¯startIndexï¼Œè¿™æ ·forå¾ªçŽ¯åŽé¢çš„å°±æ²¡è¿‡æ»¤åˆ°äº†,åªæœ‰startIndexè¿‡æ»¤åˆ°äº†ã€‚ path.remove(candidates[i]) sum -= candidates[i] &#125;&#125; å‰ªæž å¦‚æžœtarget ==4 å¯ä»¥çœ‹è¿™å¼ å›¾ï¼Œå¦‚æžœç»è¿‡æŽ’åºå·¦è¾¹çš„ 235,å–äº†2,3å·²ç» &gt;=4äº†ï¼Œé‚£ä¹ˆåŽé¢çš„5å°±ä¸ç”¨åŽ»å–äº†. 12345678910111213141516171819202122232425262728 var sum = 0 private val path = ArrayList&lt;Int&gt;() private val result = ArrayList&lt;List&lt;Int&gt;&gt;() fun combinationSum(candidates: IntArray, target: Int): List&lt;List&lt;Int&gt;&gt; &#123;// backTrack1(candidates.toList(), target) Arrays.sort(candidates) //å‰ªæžå‰éœ€è¦æŽ’åº backTrack(candidates.toList(), target, 0) return result &#125; private fun backTrack(candidates: List&lt;Int&gt;, target: Int, startIndex: Int) &#123; if (sum &gt; target) &#123; return &#125; if (sum == target) &#123; result.add(path.toList()) return &#125; for (i in startIndex until candidates.size) &#123; if (sum + candidates[i] &gt; target) &#123; // å‰ªæžæ“ä½œ return &#125; path.add(candidates[i]) sum += candidates[i] backTrack(candidates, target, i) path.remove(candidates[i]) sum -= candidates[i] &#125; &#125; 123456789101112131415161718192021222324252627private fun backTrack1(candidates: IntArray, target: Int, startIndex: Int, used: BooleanArray, layer: Int) &#123; if (sum == target) &#123; result.add(path.toList()) println(path) return &#125; for (i in startIndex until candidates.size) &#123; if (sum + candidates[i] &gt; target) &#123; // è¿™æ ·åˆ¤æ–­æ›´å¥½ï¼Œå› ä¸ºæ˜¯ç”Ÿåºçš„æ•°ç»„ï¼Œå³è¾¹çš„æžæ²¡å¿…è¦ return &#125; println(&quot;layer$layer i: $i candidates[i]: $&#123;candidates[i]&#125; used: $&#123;used[i]&#125;&quot;) if (i &gt; 0 &amp;&amp; candidates[i] == candidates[i - 1] &amp;&amp; !used[i - 1]) &#123; println(&quot;continue $&#123;candidates[i]&#125;&quot;) continue &#125; path.add(candidates[i]) sum += candidates[i] used[i] = true println(&quot;path $path&quot;) backTrack1(candidates, target, i + 1, used, layer + 1) // ç»è¿‡æ—¥å¿—æŽ’æŸ¥åŽ, i + 1ä¹‹å‰å†™çš„æ˜¯ startIndex +1, ç¬¬äºŒå±‚æŠ¥é”™ path.remove(candidates[i]) println(&quot;path backTrack $path&quot;) sum -= candidates[i] used[i] = false &#125;&#125; 40.ç»„åˆæ€»å’Œ IIhttps://www.bilibili.com/video/BV12V4y1V73A/ è¿™ä¸€é¢˜çš„ [10,1,2,7,6,1,5]ï¼Œæœ‰ä¸¤ä¸ª1ï¼Œå¯èƒ½éƒ½å’Œ7ç»„æˆäº†[1,7]å°±é‡å¤äº†ï¼Œè¿™é‡Œå°±æ˜¯è¦åŽ»æŽ‰è¿™ç§é‡å¤ã€‚ ä¸€å¼€å§‹æƒ³ä¸åˆ°åŽ»é‡çš„æ€è·¯ ã€‚ çœ‹äº†è§†é¢‘ï¼Œå¯¹åº”è¿™ä¸ªå›¾. é‡å¤çš„åŽŸå› åœ¨äºŽæ ‘å®½ ç¬¬äºŒæ¬¡å–1çš„åœ°æ–¹ï¼Œå› ä¸ºç¬¬1æ¬¡å–1ï¼Œå·²ç»åŒ…æ‹¬äº†ç¬¬äºŒæ¬¡å–1çš„æ‰€æœ‰æ ‘æžã€‚æ‰€ä»¥æŠŠç¬¬äºŒæ¬¡å–1çš„æ ‘æžå‰ªæŽ‰æ—¢å¯ã€‚ å‰ªæžæ¡ä»¶1ï¼šcandidates[i] == candidates[i - 1] å‰ªæžæ¡ä»¶2: é€šè¿‡è®¾ç½®usedæ•°ç»„ï¼Œåªæœ‰used[i - 1] æ˜¯falseæ‰æœ‰æ„ä¹‰, used[i - 1]= false ,è¯´æ˜Žæ•°ç»„çš„ç¬¬ä¸€ä¸ª1æ²¡æœ‰å–ï¼Œå–çš„æ˜¯ç¬¬äºŒä¸ª1ï¼Œç»“æžœæ˜¯[1,2]ï¼Œæ‰€ä»¥å¯ä»¥èˆå¼ƒæŽ‰ï¼Œå¦åˆ™å¯¼è‡´å’Œç¬¬ä¸€æ¬¡çš„å–ç¬¬ä¸€ä¸ª1å’Œä¸‹ä¸€å±‚å–2,ç»“æžœæ˜¯[1,2]é‡å¤äº†ã€‚è¿™æ ·åˆ¤æ–­å°±å¯ä»¥æŠŠ ç¬¬äºŒæ¬¡å–1çš„è¿™ä¸ªæžå¹²ç»™å‰ªæŽ‰ã€‚ ä¹Ÿå« æ ‘å±‚åŽ»é‡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839var sum = 0val path = ArrayList&lt;Int&gt;()val result = ArrayList&lt;List&lt;Int&gt;&gt;()fun combinationSum2(candidates: IntArray, target: Int): List&lt;List&lt;Int&gt;&gt; &#123; Arrays.sort(candidates) println(candidates.joinToString()) val used = BooleanArray(candidates.size) backTrack(candidates, target, 0, used, 0) return result&#125;private fun backTrack(candidates: IntArray, target: Int, startIndex: Int, used: BooleanArray, layer: Int) &#123; if (sum &gt; target) &#123; return &#125; if (sum == target) &#123; result.add(path.toList()) println(path) return &#125; for (i in startIndex until candidates.size) &#123; println(&quot;layer$layer i: $i candidates[i]: $&#123;candidates[i]&#125; used: $&#123;used[i]&#125;&quot;) if (i &gt; 0 &amp;&amp; candidates[i] == candidates[i - 1] &amp;&amp; !used[i - 1]) &#123; println(&quot;continue $&#123;candidates[i]&#125;&quot;) continue &#125; path.add(candidates[i]) sum += candidates[i] used[i] = true println(&quot;path $path&quot;) backTrack(candidates, target, i + 1, used, layer + 1) // ç»è¿‡æ—¥å¿—æŽ’æŸ¥åŽ, i + 1ä¹‹å‰å†™çš„æ˜¯ startIndex +1, ç¬¬äºŒå±‚æŠ¥é”™ path.remove(candidates[i]) println(&quot;path backTrack $path&quot;) sum -= candidates[i] used[i] = false &#125;&#125; 131.åˆ†å‰²å›žæ–‡ä¸²12è¾“å…¥ï¼šs &#x3D; &quot;aab&quot;è¾“å‡ºï¼š[[&quot;a&quot;,&quot;a&quot;,&quot;b&quot;],[&quot;aa&quot;,&quot;b&quot;]] æ²¡æƒ³æ˜Žç™½ [[â€œaâ€,â€aâ€,â€bâ€],[â€œaaâ€,â€bâ€]] è¿™ä¸ªæ•°ç»„æ˜¯æ€Žä¹ˆå¼„å‡ºæ¥çš„ã€‚ https://www.bilibili.com/video/BV1c54y1e7k6 è¿™é¢˜æ˜¯è¾¹çœ‹ç­”æ¡ˆå˜åšå‡ºæ¥çš„ã€‚ æ ¹æ®ä¸Šå›¾å¯ä»¥è¿™æ ·ç†è§£ ï¼Œ DFSé€’å½’æ˜¯ çºµå‘åˆ‡å‰²ï¼Œ a|ab å–[a], a|a|b å– [a,a] , a|a|b| æœ€ç»ˆåˆ°å¶å­èŠ‚ç‚¹å– [a,a,b]ï¼Œåˆ°ç»ˆç‚¹ã€‚ forå¾ªçŽ¯æ˜¯æ¨ªå‘åˆ‡å‰² ã€‚ val str = s.substring(startIndex,i+1) // è¿™ä¸ªä¹Ÿå¾ˆå…³é”®ï¼ŒstartIndexä½œä¸ºåˆ†å‰²çš„èµ·ç‚¹ è¿™é¢˜ç±»ä¼¼äºŽæ ‘ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰çš„è·¯å¾„ï¼Œä¸€æ—¦çºµå‘è·¯å¾„ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸ç¬¦åˆæ¡ä»¶[a,ab] abä¸ç¬¦åˆï¼Œå°±ç›´æŽ¥å›žæº¯åŽ»å…¶ä»–è·¯å¾„.æ‰€ä»¥æ”¾ifé‡Œåˆ¤æ–­é€’å½’ä¼šæ›´å¥½ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940val result = ArrayList&lt;List&lt;String&gt;&gt;()private val path = ArrayList&lt;String&gt;()fun partition(s: String): List&lt;List&lt;String&gt;&gt; &#123; backTrack(s, 0) return result&#125;private fun backTrack(s: String, startIndex: Int) &#123; if (startIndex &gt;= s.length) &#123; // çºµå‘åˆ°å¶å­èŠ‚ç‚¹ï¼Œå°±ç½‘ä¸Šå›žæº¯ result.add(path.toList()) return //å¯ä»¥ç”¨ &#125; for (i in startIndex until s.length) &#123; //forå¾ªçŽ¯æ˜¯ æ¨ªå‘åˆ‡å‰² if (isPalindromeNum(s,startIndex,i+1))&#123; // åˆ¤æ–­startIndex,åˆ° i+1æ˜¯å¦æ˜¯å›žæ–‡ä¸² val str = s.substring(startIndex,i+1) // è¿™ä¸ªä¹Ÿå¾ˆå…³é”®ï¼ŒstartIndexä½œä¸ºåˆ†å‰²çš„èµ·ç‚¹ path.add(str) // backTrack(s, i + 1) //é€’å½’æ˜¯ çºµå‘åˆ‡å‰²ï¼Œä¹Ÿæ²¡æœ‰å¾ªçŽ¯ã€‚è¿™ä¸ªæ”¾ifé‡Œé¢å¯èƒ½æ›´å¥½. // path.removeAt(path.size-1) &#125;else&#123; continue // å¦‚abä¸æ˜¯å›žæ–‡ä¸²ï¼Œä¹Ÿä¸ç”¨ç»§ç»­äº† &#125; backTrack(s, i + 1) //é€’å½’æ˜¯ çºµå‘åˆ‡å‰²ï¼Œä¹Ÿæ²¡æœ‰å¾ªçŽ¯ã€‚è¿™ä¸ªæ”¾ifé‡Œé¢å¯èƒ½æ›´å¥½. path.removeAt(path.size-1) &#125;&#125;fun isPalindromeNum(str: String,start:Int,end:Int): Boolean &#123; if (str.isEmpty()) &#123; return false &#125; val charArray = str.substring(start,end) for (i in 0 until charArray.length / 2) &#123; if (charArray[i] != charArray[charArray.length - 1 - i]) &#123; return false &#125; &#125; return true&#125; ä¼˜åŒ–è§£æ³•å¯¹åˆ¤æ–­æ˜¯å¦å›žæ–‡ä¸²çš„ä¼˜åŒ–. 93.å¤åŽŸ IP åœ°å€æˆ‘çš„åˆ†æž è¿™é¢˜å’Œä¸Šé¢131ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡åˆ‡å‰²æ–¹å¼è§£å†³ã€‚ ipåœ°å€éƒ½æœ‰å››ä½ï¼Œéœ€è¦åˆ‡å‰²4æ¬¡ï¼Œæ‰€ä»¥æ ‘çš„æ·±åº¦æ˜¯4ã€‚ä¹Ÿæ˜¯å›žæº¯ç»ˆæ­¢æ¡ä»¶ä¹‹ä¸€ï¼ŒstartIndexæ˜¯åˆ‡å‰²çº¿ã€‚(åº”è¯¥æ˜¯i+1æ˜¯åˆ‡å‰²çº¿ï¼Œå¦åˆ™åªèƒ½åˆ†å‰²ä¸€ä¸ªå­—æ¯) é€‰å–æœ‰æ•ˆçš„ip, å‰å¯¼ä¸ä¸º0ï¼Œåªèƒ½æ˜¯æ•°å­—ã€‚ &lt;255 , å¯ä»¥é™åˆ¶æ ‘çš„å®½åº¦ã€‚ æˆ‘å†™å®Œä»£ç åŽï¼Œåˆ‡å‰²æˆè¿™æ · 2.5.5.2ï¼Œ ä¸æ˜¯å…¨éƒ¨çš„æ•°å­—ï¼Œæ²¡æƒ³åˆ°ä»€ä¹ˆæ–¹å¼èƒ½åˆ‡å‰²æ‰€æœ‰çš„æ•°å­—ã€‚ s.substring(startIndex, s.length) å…ˆåˆ†å‰²å‰ä¸‰ä¸ªï¼Œç„¶åŽåˆ¤æ–­æœ€åŽä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±èƒ½åˆ†å‰²æ‰€æœ‰çš„å­—æ¯ã€‚ startIndexè§£é‡Šï¼Œä¸‹é¢è¿™å¼ å›¾æ›´æ¸…æ¥šï¼Œç¬¬ä¸€å±‚å– å…ƒç´ 2. 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950val result = ArrayList&lt;String&gt;()val path = ArrayList&lt;String&gt;()fun restoreIpAddresses(s: String): List&lt;String&gt; &#123; backTrack(s, 0, 0) return result&#125;private fun backTrack(s: String, startIndex: Int, layer: Int) &#123; // çœ‹äº†éšæƒ³å½•è§£æ³•ï¼Œè¿™é‡ŒåŠ ä¸Šç»ˆæ­¢æ¡ä»¶ä¼šæ›´å¥½ã€‚ if (layer == 3) &#123; // ç¬¬ä¸‰ä¸ªåˆ†å‰²çº¿ val substring = s.substring(startIndex, s.length) // è¿™é‡Œçš„æ–¹å¼å°±è§£å†³äº†ï¼Œåˆ†å‰²æ‰€æœ‰å­ä¸²çš„é—®é¢˜ï¼Œæœ€åŽä¸€æ¬¡åˆ†å‰²ï¼Œç›´æŽ¥åˆ°å­—ç¬¦ä¸²çš„ç»ˆç‚¹ã€‚ if (isValid(substring)) &#123; path.add(substring) result.add(path.toList().joinToString(separator = &quot;.&quot;)) path.removeAt(path.size-1) // æœ€åŽçš„å­—ç¬¦ä¸²å›žæº¯ &#125; return &#125; for (i in startIndex until s.length) &#123; val substring = s.substring(startIndex, i + 1) if (isValid(substring)) &#123; path.add(substring) backTrack(s, i + 1, layer + 1) // æ³¨æ„æˆ‘è¿™é‡Œç»å¸¸ä¼ é”™ç”¨ startIndex,å¦‚æžœç¬¬ä¸€æ¬¡å·²ç»åˆ†å‰²åˆ°äº†è¶…è¿‡ç¬¬2ä¸ªä½ç½®ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¼ è¿™ä¸ªä½ç½®ï¼Œ path.removeAt(path.size-1) &#125; &#125;&#125;// åˆ¤æ–­å­—ç¬¦ä¸²såœ¨å·¦é—­åˆé—­åŒºé—´[start, end]æ‰€ç»„æˆçš„æ•°å­—æ˜¯å¦åˆæ³•private fun isValid(s: String): Boolean &#123; val start = 0 val end = s.length - 1 if (start &gt; end) &#123; return false; &#125; if (s[start] == &#x27;0&#x27; &amp;&amp; start != end) &#123; // 0å¼€å¤´çš„æ•°å­—ä¸åˆæ³• return false; &#125; var num = 0; for (i in start..end) &#123; if (s[i] &gt; &#x27;9&#x27; || s[i] &lt; &#x27;0&#x27;) &#123; // é‡åˆ°éžæ•°å­—å­—ç¬¦ä¸åˆæ³• return false; &#125; num = num * 10 + (s[i] - &#x27;0&#x27;); if (num &gt; 255) &#123; // å¦‚æžœå¤§äºŽ255äº†ä¸åˆæ³• return false; &#125; &#125; return true;&#125; 78. å­é›† è¿™é¢˜æŠŠä¸Šå›¾ç”»å‡ºæ¥åŽï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚åªè¦æŠŠæ‰€æœ‰æ­¥æ•°æƒ…å†µæ·»åŠ å°±å¯ä»¥äº†ã€‚ 123456789101112131415val result = ArrayList&lt;List&lt;Int&gt;&gt;()val path = ArrayList&lt;Int&gt;()fun subsets(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; backTrack(nums, 0) return result&#125;private fun backTrack(nums: IntArray, startIndex: Int) &#123; result.add(path.toList()) // è¿™æ£µæ ‘æ‰€æœ‰çš„æ­¥é•¿ï¼Œéƒ½æ·»åŠ  for (i in startIndex until nums.size) &#123; path.add(nums[i]) backTrack(nums, i + 1) // æ³¨æ„ path.remove(nums[i]) &#125;&#125; 90.å­é›† II ç¬¬ä¸€å±‚ ç¬¬äºŒåˆ—å–å…ƒç´ 2çš„æ—¶å€™ï¼Œæ­¤æ—¶å­é›†å°±æœ‰2äº†ï¼Œç¬¬ä¸‰åˆ—å†å–å°±é‡å¤äº†ã€‚ ä»Žå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŒä¸€æ ‘å±‚ä¸Šé‡å¤å–2 å°±è¦è¿‡æ»¤æŽ‰ï¼ŒåŒä¸€æ ‘æžä¸Šå°±å¯ä»¥é‡å¤å–2ï¼Œå› ä¸ºåŒä¸€æ ‘æžä¸Šå…ƒç´ çš„é›†åˆæ‰æ˜¯å”¯ä¸€å­é›†ï¼ 123456789101112131415161718192021222324class Solution &#123; private val result = ArrayList&lt;List&lt;Int&gt;&gt;() private val path = ArrayList&lt;Int&gt;() fun subsetsWithDup(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; Arrays.sort(nums) val used = BooleanArray(nums.size) backTrack(nums, used, 0) return result &#125; private fun backTrack(nums: IntArray, used: BooleanArray, startIndex: Int) &#123; result.add(path.toList()) for (i in startIndex until nums.size) &#123; if (i &gt; 0 &amp;&amp; nums[i] == nums[i - 1] &amp;&amp; !used[i - 1]) &#123; continue &#125; used[i] = true path.add(nums[i]) backTrack(nums,used,i+1) path.remove(nums[i]) used[i] = false &#125; &#125;&#125; !used[i - 1] è¿™ä¸ªæ¡ä»¶æ˜¯åˆ¤æ–­æ ‘å±‚çš„æ¡ä»¶ï¼Œå¦åˆ™ä¼šæŠŠæ ‘æžç»™å‰ªæŽ‰äº†ã€‚ è¡¥å……æœ¬é¢˜ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨usedæ•°ç»„æ¥åŽ»é‡ï¼Œå› ä¸ºé€’å½’çš„æ—¶å€™ä¸‹ä¸€ä¸ªstartIndexæ˜¯i+1è€Œä¸æ˜¯0ã€‚ éšæƒ³å½•è¿™å¥æ²¡ç†è§£ã€‚ 491.é€’å¢žå­åºåˆ— ä¸èƒ½æŽ’åº,æ‰€ä»¥å­é›†ä¸­usedè§£æ³•ä¸è¡Œ æ ‘æžä¸­å°å¿ƒåˆ¤æ–­å¤§å°ã€‚ https://www.bilibili.com/video/BV1EG4y1h78v/ ä¸€å¼€å§‹æŒ‰ç…§ä¸‹é¢å­é›†çš„è§£æ³•åšçš„,ä½†æ˜¯å­˜åœ¨é—®é¢˜ï¼Œå­é›†æ˜¯ç»è¿‡æŽ’åºåŽçš„ï¼Œç„¶åŽnums[i] == nums[i - 1] &amp;&amp; !used[i - 1]è¿™æ ·çš„æ¡ä»¶åˆ¤æ–­ï¼Œè¿™é¢˜ä¸èƒ½æŽ’åºçš„ï¼Œæ‰€ä»¥æƒ…å†µä¸ä¸€æ ·ã€‚ 123456789101112131415161718private fun backTrack(nums: IntArray, used: BooleanArray, startIndex: Int) &#123; if (path.size &gt; 1) &#123; result.add(path.toList()) &#125; for (i in startIndex until nums.size) &#123; if (i &gt; 0 &amp;&amp; nums[i] == nums[i - 1] &amp;&amp; !used[i - 1]) &#123; continue &#125; if (i &gt; 0 &amp;&amp; nums[i] &lt; nums[i - 1])&#123; break &#125; path.add(nums[i]) used[i] = true backTrack(nums,used,i+1) path.remove(nums[i]) used[i] = false &#125;&#125; ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ ‘å±‚ä¸­æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œå› ä¸ºç­¾åçš„ 7åŒ…å«åŽé¢7çš„æ‰€æœ‰æƒ…å†µã€‚ 123456789101112131415161718192021222324252627 private val result = ArrayList&lt;List&lt;Int&gt;&gt;() private val path = ArrayList&lt;Int&gt;() fun findSubsequences(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; backTrack(nums, 0, 0) return result &#125; private fun backTrack(nums: IntArray, startIndex: Int, layer: Int) &#123; if (path.size &gt; 1) &#123; // è‡³å°‘æœ‰ä¸¤ä¸ªå…ƒç´  result.add(path.toList()) &#125; val set = mutableSetOf&lt;Int&gt;() // æ ‘å±‚ä¸­æ˜¯å¦åŒ…å« ç›¸åŒçš„å…ƒç´ ã€‚ for (i in startIndex until nums.size) &#123;// println(&quot;startIndex $startIndex set $set&quot;) if (layer == 0) &#123; println(&quot;layer set $set&quot;) &#125; if ((path.isNotEmpty() &amp;&amp; nums[i] &lt; path.last()) || set.contains(nums[i])) &#123; // å°äºŽä¸Šä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªåˆ†æ”¯ä»¥ä¸‹ä¸ç”¨èµ°äº†ï¼Œ setæ ‘å±‚ä¸­åŒ…å«ç›¸åŒçš„ä¸Žå…ƒç´ ã€‚ continue &#125; set.add(nums[i]) //å› ä¸ºæ˜¯åˆ¤æ–­æ ‘å±‚ï¼Œè€Œä¸”æ˜¯æ¯ä¸€å±‚éƒ½å±€éƒ¨ä¼šnew ä¸€ä¸ªsetï¼Œæ‰€ä»¥è¿™ä¸ªæ²¡æœ‰å›žæº¯ã€‚ path.add(nums[i]) backTrack(nums, i + 1, layer + 1) path.remove(nums[i]) &#125; &#125; 123456789101112131415private fun backTrack(nums: IntArray, startIndex: Int, layer: Int) &#123; if (path.size &gt; 1) &#123; result.add(path.toList()) &#125; val used = IntArray(201) // -100 &lt;= nums[i] &lt;= 100 ï¼Œ åŒ…æ‹¬ 0 for (i in startIndex until nums.size) &#123; if ((path.isNotEmpty() &amp;&amp; nums[i] &lt; path.last()) || used[nums[i] + 100] == 1) &#123; continue &#125; used[nums[i] + 100] = 1 path.add(nums[i]) backTrack(nums, i + 1, layer + 1) path.remove(nums[i]) &#125;&#125; 46å…¨æŽ’åˆ—[1,2,3] é€‰äº†2ä¹‹åŽï¼Œ 1ï¼Œ3 å°±ä¸çŸ¥é“ä»Žå“ªé‡Œå¼€å§‹äº†ï¼Œå­é›†é—®é¢˜æœ‰ä¸ªstartIndex æˆ‘çš„è§£æ³•12345678910111213141516171819202122232425262728293031private val result = ArrayList&lt;List&lt;Int&gt;&gt;()private val path = ArrayList&lt;Int&gt;()fun permute(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; val size = nums.size val used = BooleanArray(size) backTrack(nums, used) return result&#125;private fun backTrack(nums: IntArray, used: BooleanArray) &#123; println(path) //if (totalUsed(used)) &#123; if (totalUsed(used)) &#123; result.add(path.toList()) return &#125; for ((index, value) in nums.withIndex()) &#123; if (used[index]) &#123; continue &#125; path.add(nums[index]) used[index] = true backTrack(nums, used) path.remove(nums[index]) used[index] = false &#125;&#125;private fun totalUsed(used: BooleanArray): Boolean &#123; return used.contains(false).not()&#125; å…ˆç”»å›¾åˆ†æž å•æµ‹ä¸­æŠŠæ•°æ®æ‰“å°å‡ºæ¥ï¼Œèƒ½å¤§æ¦‚ç†æ¸…è¿™ç§æ€è·¯ï¼Œ 1234567891011121314151617[][1][1, 2][1, 2, 3][1, 3][1, 3, 2][2][2, 1][2, 1, 3][2, 3][2, 3, 1][3][3, 1][3, 1, 2][3, 2][3, 2, 1][[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]] 47.å…¨æŽ’åˆ— IIæˆ‘çš„è§£æ³•æœ‰ä¸€ç‚¹ç‚¹é—®é¢˜[2,2,1,1]è¿™ä¸ªè·‘æ­¥è¿‡åŽ»,path.removeAt(path.lastIndex),çœ‹äº†éšæƒ³å½•çš„è§£æ³•å’Œæˆ‘æ²¡åŒºåˆ«ï¼Œæ‰å‘çŽ°è¿™é‡Œçš„ã€‚ æ€è·¯ å’Œç»„åˆåŽ»é‡æ²¡åŒºåˆ« ,(index &gt; 0 &amp;&amp; nums[index] == nums[index - 1] &amp;&amp; !used[index - 1])é‡å¤å…ƒç´ ï¼Œæ ‘å±‚åŽ»é‡ å…¨æŽ’åˆ—ä½¿ç”¨è¿‡çš„å…ƒç´ ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748 private val path = ArrayList&lt;Int&gt;() private val result = ArrayList&lt;List&lt;Int&gt;&gt;() fun permuteUnique(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; Arrays.sort(nums)// nums.printIntArray() val used = BooleanArray(nums.size) backTrack(nums, used) return result &#125;// private fun backTrack(nums: IntArray, used: BooleanArray) &#123;// println(path)// if (path.size == nums.size) &#123;// result.add(path.toList())// return// &#125;// for ((index, value) in nums.withIndex()) &#123;// if (used[index] || (index &gt; 0 &amp;&amp; nums[index] == nums[index - 1] &amp;&amp; !used[index - 1])) &#123;// continue// &#125;// used[index] = true// path.add(value)// backTrack(nums, used)// used[index] = false// path.remove(value)// &#125;// &#125; private fun backTrack(nums: IntArray, used: BooleanArray) &#123; println(path) if (path.size == nums.size) &#123; result.add(path.toList()) return &#125; for (index in nums.indices) &#123; if ((index &gt; 0 &amp;&amp; nums[index] == nums[index - 1] &amp;&amp; !used[index - 1])) &#123; continue &#125; if (used[index]) &#123; continue &#125; used[index] = true path.add(nums[index]) backTrack(nums, used) path.removeAt(path.lastIndex) // ç”¨path.remove(value)æ˜¯æœ‰é—®é¢˜çš„ï¼Œä¼šæŠŠæ‰€æœ‰çš„è¿™ä¸ªå…ƒç´ åˆ é™¤æŽ‰ï¼Œ46æ²¡é—®é¢˜æ˜¯å› ä¸ºæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œleetcode removeLast() cannot build used[index] = false &#125; &#125; 332.é‡æ–°å®‰æŽ’è¡Œç¨‹éšæƒ³å½•è§£æ³•é‚£ä¸ªæ•°ç»„å¤„ç†æ²¡çœ‹æ˜Žç™½ è¿™é‡Œç”¨åˆ°çš„å›žæº¯ï¼Œå°±æ˜¯ç›®çš„åœ°å¯èƒ½æœ‰å¤šä¸ªã€‚ https://leetcode.cn/problems/reconstruct-itinerary/solutions/654811/java-bu-yong-ou-la-zhi-yong-hui-su-si-lu-4v83/ çœ‹äº†ä»–çš„è§†é¢‘ ç»™å®šçš„ticketsè½¬æˆ from to çš„ç»“æž„,å°±å¯ä»¥çŸ¥é“å‡ºå‘ç‚¹å¯¹åº”çš„ï¼Œåˆ°è¾¾ç‚¹å’Œåˆ°è¾¾ç‚¹çš„çº¿è·¯æ•°ã€‚ // è¿™ä¸ªæ•°æ®å¤„ç†ä¹Ÿæ˜¯æœ‰ç‚¹éº»çƒ¦çš„ã€‚ æ ¹æ®å¤šä¸ªåˆ°è¾¾ç‚¹å›žæº¯ï¼Œæ‰¾åˆ°æœ€åˆé€‚çš„è·¯å¾„ å¦‚æžœåˆ°è¾¾ç‚¹çš„æ˜¯çº¿è·¯æ˜¯0ï¼Œé‚£ä¹ˆæ‰¾ä¸‹ä¸€é¢˜è·³çº¿è·¯ã€‚ é‡åˆ°çš„æœºåœºä¸ªæ•°path ==èˆªç­æ•°é‡+ putIfAbsent https://blog.csdn.net/hbtj_1216/article/details/75093428 123456789101112131415161718192021222324252627282930313233343536373839404142val path = ArrayList&lt;String&gt;()fun findItinerary(tickets: List&lt;List&lt;String&gt;&gt;): List&lt;String&gt; &#123; //1. listè½¬æˆ from to çš„ç»“æž„ //2. å›žæº¯æ‰¾åˆ°æœ€åˆé€‚çš„è·¯å¾„ //3. é‡åˆ°çš„æœºåœºä¸ªæ•°path ==èˆªç­æ•°é‡+ val hashMap = HashMap&lt;String, TreeMap&lt;String, Int&gt;&gt;() tickets.stream().forEach &#123; ticket -&gt; val from = ticket[0] // å‡ºå‘åœ° val to = ticket[1] //ç›®çš„åœ° hashMap.putIfAbsent(from, TreeMap()) val treeMap = hashMap[from] ?: TreeMap() //èŽ·å–å‡ºå‘åœ°å¯¹åº”çš„å®¹å™¨TreeMap,å¦‚æžœä¹‹å‰æ²¡ç”¨è¿‡çš„å‡ºå‘åœ°key,é‚£ä¹ˆæ–°å»ºä¸€ä¸ªå®¹å™¨TreeMap treeMap[to] = treeMap.getOrDefault(to, 0) + 1 // å®¹å™¨å†…ï¼Œç›®çš„åœ°çš„ä¸ªæ•°++,ä¸€å¼€å§‹è¿™é‡Œå†™çš„æœ‰é—®é¢˜ã€‚ &#125; path.add(&quot;JFK&quot;) // æ‰€æœ‰è¿™äº›æœºç¥¨éƒ½å±žäºŽä¸€ä¸ªä»Ž JFKï¼ˆè‚¯å°¼è¿ªå›½é™…æœºåœºï¼‰å‡ºå‘çš„å…ˆç”Ÿï¼Œæ‰€ä»¥è¯¥è¡Œç¨‹å¿…é¡»ä»Ž JFK å¼€å§‹ã€‚ backTrack(hashMap, tickets.size) return path&#125;private fun backTrack(hashMap: HashMap&lt;String, TreeMap&lt;String, Int&gt;&gt;, ticketSize: Int): Boolean &#123; if (path.size == ticketSize + 1) &#123; return true &#125; // 1.æ ¹æ®pathæ‰¾åˆ°å‡ºå‘ç‚¹,ä»Žhashmapæ ¹æ®å‡ºå‘ç‚¹æ‰¾åˆ°å¯¹åº”çš„ å¯èƒ½å¤šä¸ªåˆ°è¾¾ç‚¹ // 2. å¤šä¸ªå¯èƒ½çš„ç›®çš„åœ°è¿›è¡Œå›žæº¯. val recentTo = path[path.size - 1] //path.last() LeetCode build failed val toDestinations = hashMap[recentTo] if (toDestinations.isNullOrEmpty()) return false for (to in toDestinations) &#123;// forEachä¹Ÿè¡Œ, forä¹ æƒ¯ç‚¹ if (to.value == 0) &#123; continue &#125; path.add(to.key) to.setValue(to.value - 1) if (backTrack(hashMap, ticketSize)) &#123; return true &#125; path.removeAt(path.size - 1) to.setValue(to.value + 1) &#125; return false&#125; 51.N çš‡åŽ è¿™é¢˜æ€è·¯ä¸éš¾ï¼Œå®žçŽ°è¿˜æ˜¯æœ‰éš¾åº¦ï¼Œä¸»è¦æ˜¯çš‡åŽå†²çªä»£ç ä¸å¥½ç†è§£ï¼Œhttps://www.bilibili.com/video/BV1bK4y1n7iq å¤§æ¦‚11åˆ†é’Ÿï¼Œåˆ¤æ–­ çš‡åŽä½ç½®çš„å†²çªæƒ…å†µã€‚ è¿™ä¸€é¢˜æ€è·¯å°±æ˜¯ä¸»è¦ é¦–å…ˆè¡Œï¼Œç„¶åŽåˆ—æ‘†æ”¾çš‡åŽé—®é¢˜ï¼Œç„¶åŽå›žæº¯ã€‚ è¿˜ä¸€ä¸ªå°±æ˜¯å°†è¦æ”¾ä¸‹çš‡åŽçš„ä½ç½®ä¹‹å‰ï¼Œ8ä¸ªæ–¹å‘åªç”¨è€ƒè™‘3ä¸ª,ç¡®å®šå·¦ä¸Šï¼Œæ­£ä¸Šæ–¹ï¼Œå³ä¸Šæ–¹çš„çš‡åŽæ˜¯å¦å­˜åœ¨ã€‚å½“å‰è¡Œä¸ç”¨è€ƒäº†ï¼Œå› ä¸ºæ¯è¡Œä¸€ä¸ªï¼ŒåŽé¢çš„æ›´ä¸çœ‹äº†ï¼Œå› ä¸ºè¿˜æ²¡æ”¾çš‡åŽ. æœ€åŽå°±æ˜¯è¦æ³¨æ„è¾¹ç•Œçš„é—®é¢˜ï¼ŒäºŒåˆ·çš„æ—¶å€™å°¤å…¶æ³¨æ„è¿™ä¸ªã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;();public List&lt;List&lt;String&gt;&gt; solveNQueens(int n) &#123; //1. åˆå§‹åŒ–æ£‹ç›˜æ”¾ä¸Š. char[][] chessBoard = new char[n][n]; for (char[] c : chessBoard) &#123; Arrays.fill(c, &#x27;.&#x27;); &#125; // 2. å¼€å§‹æ”¾Queue,é¦–å…ˆä»Žè¡Œå¼€å§‹ï¼Œä¸€è¡Œä¸€è¡Œå›žæº¯çš„æ”¾ï¼Œ ç„¶åŽæ¯ä¸€è¡Œå¼€å§‹ä»Žç¬¬1åˆ—å¼€å§‹ã€‚ // 3. æ¯æ¬¡æ–°çš„ä¸€è¡Œå¼€å§‹æ”¾Queueæ—¶ï¼Œè¦è€ƒè™‘å½“å‰ä½ç½®åˆ—çš„ å‰é¢çš„åˆ—æœ‰æ²¡æœ‰Queue, // å½“å‰ä½ç½®çš„å·¦è¾¹45åº¦å’Œ135åº¦æœ‰æ²¡æœ‰Queue,å¯¹äºŽå½“å‰è¡Œå’ŒåŽé¢çš„è¡Œå’Œæ–œå¯¹è§’ä¸ç”¨è€ƒè™‘ï¼Œå› ä¸ºæ¯ä¸€è¡Œåªæœ‰ä¸€ä¸ªQueue,åŽé¢çš„è¡Œæ›´æ˜¯æ²¡æœ‰ã€‚ //4 ã€‚åªæœ‰èƒ½æ”¾ä¸‹ï¼Œæ‰ä¼šæ”¾åŽç»­çš„ï¼Œç„¶åŽè¿›è¡Œå›žæº¯. //5. å½“æ”¾ä¸‹çš„Queueæ—¶æœ€åŽä¸€è¡Œnæ—¶ï¼Œé€’å½’ç»“æŸï¼Œå¼€å§‹æ”¶é›†ç»“æžœã€‚ backTrack(n, 0, chessBoard); return result;&#125;private void backTrack(int n, int row, char[][] chessBoard) &#123; if (n == row) &#123; result.add(Array2List(chessBoard)); return; &#125; for (int column = 0; column &lt; n; ++column) &#123; if (isValid(row, column, chessBoard, n)) &#123; // row,columnå¾…æ”¾å…¥Queueçš„ä½ç½® chessBoard[row][column] = &#x27;Q&#x27;; backTrack(n, row + 1, chessBoard); chessBoard[row][column] = &#x27;.&#x27;; &#125; &#125;&#125;private boolean isValid(int pRow, int pColumn, char[][] chessBoard, int n) &#123; for (int i = 0; i &lt; pRow; ++i) &#123; //åˆ— if (chessBoard[i][pColumn] == &#x27;Q&#x27;) &#123; return false; &#125; &#125; for (int x = pRow - 1, y = pColumn - 1; x &gt;= 0 &amp;&amp; y &gt;= 0; x--, y--) &#123; //å·¦ä¸Šè§’ é¦–æ¬¡==è¾¹ç•Œé”™äº† if (chessBoard[x][y] == &#x27;Q&#x27;) &#123; return false; &#125; &#125; for (int x = pRow - 1, y = pColumn + 1; x &gt;= 0 &amp;&amp; y &lt;= n - 1; x--, y++) &#123;//å³ä¸Šè§’ é¦–æ¬¡==,n-1è¾¹ç•Œé”™äº† ,y &lt; n - 1ä¸€å¼€å§‹å†™æˆè¿™æ ·ï¼Œæ‰¾äº†åŠå¤© if (chessBoard[x][y] == &#x27;Q&#x27;) &#123; return false; &#125; &#125; return true;&#125;public List Array2List(char[][] chessboard) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); for (char[] c : chessboard) &#123; list.add(String.copyValueOf(c)); &#125; return list;&#125; è¿™é¢˜foré‡Œé¢æœ‰x,yä¸¤ä¸ªå˜é‡ï¼Œkotlinä¸å¥½å¼„ï¼Œå°±ç”¨javaäº†ã€‚ 37.è§£æ•°ç‹¬éšæƒ³å½•è®²è§£. https://www.bilibili.com/video/BV1TW4y1471V/ https://xiaochen1024.com/video?id=6285f1b6ede03c002e46b218 æ ¹æ®ä¸‹é¢å…¬å¼å¯ä»¥æ‰¾åˆ° 3 *3çš„å¼€å§‹ä½ç½®ã€‚ val startRow = (row / 3) * 3 val startColumn = (column / 3) * 3 æŠŠçº¢æ–¹æ¡†ä»£å…¥è¿›åŽ»ï¼Œ val 3 = (4 / 3) * 3 å°±æ˜¯çº¢è‰²ç®­å¤´çš„ä½ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// 1.å…ˆè¡Œ åŽåˆ—çš„é¡ºåºï¼Œæ‰¾åˆ°å­—ç¬¦ä½ &#x27;.&#x27;çš„ç©ºæ ¼ï¼Œå¡«å…¥ 1 - 9 çš„æ•°å­—// 2.å¡«å…¥åŽï¼Œå¼€å§‹å›žæº¯// 3.å¡«å…¥ç©ºæ ¼çš„æ—¶å€™ï¼Œå¦‚æžœæ²¡æœ‰è¿”å›žtrue,ifå°±è¿”å›žfalse// 4. å¦‚æžœå…¨éƒ¨å¡«æ»¡äº†éƒ½æ²¡è¿”å›žtrue,æ­¤æ—¶è¯´æ˜Žå·²ç»åˆ°äº†å¶å­èŠ‚ç‚¹ï¼Œç›´æŽ¥è¿”å›žtrue.fun solveSudoku(board: Array&lt;CharArray&gt;): Unit &#123; backTrack(board)&#125;private fun backTrack(board: Array&lt;CharArray&gt;): Boolean &#123; for (i in board.indices) &#123; // éåŽ†è¡Œ for (j in board[0].indices) &#123;// éåŽ†åˆ— if (board[i][j] == &#x27;.&#x27;) &#123; for (k in &#x27;1&#x27;..&#x27;9&#x27;) &#123; if (isValid(i, j, k, board)) &#123; board[i][j] = k if (backTrack(board)) &#123; return true &#125; board[i][j] = &#x27;.&#x27; &#125; &#125; return false //æ”¾ä¸Šé¢ä¸€å±‚ï¼Œå¾ªçŽ¯åŽç›´æŽ¥è¿”å›žfalseäº†,// 9ä¸ªæ•°éƒ½è¯•å®Œäº†ï¼Œéƒ½ä¸è¡Œï¼Œé‚£ä¹ˆå°±è¿”å›žfalse &#125; &#125; &#125; return true&#125;private fun isValid(row: Int, column: Int, k: Char, board: Array&lt;CharArray&gt;): Boolean &#123; for (i in board[0].indices) &#123; // åˆ¤æ–­è¡Œé‡Œæ˜¯å¦é‡å¤,ä¸€å¼€å§‹ä¸ç†è§£å¾ˆå¤šè§£æ³•åŒ…æ‹¬ï¼Œéšæƒ³å½•ç”¨çš„æ˜¯9,è¿™æ ·å¦‚æžœä¸æ˜¯9*9å°±æœ‰é—®é¢˜äº†,åŽŸæ¥é¢˜ç›®ç»™çš„å°±æ˜¯9*9çš„æ–¹æ ¼ if (board[row][i] == k) &#123; return false &#125; &#125; for (i in board.indices) &#123; // åˆ¤æ–­åˆ—é‡Œæ˜¯å¦é‡å¤ if (board[i][column] == k) &#123; return false &#125; &#125; val startRow = (row / 3) * 3 val startColumn = (column / 3) * 3 for (i in startRow until (startRow + 3)) &#123; // åˆ¤æ–­9æ–¹æ ¼é‡Œæ˜¯å¦é‡å¤ for (j in startColumn until startColumn + 3) &#123; if (board[i][j] == k) &#123; return false &#125; &#125; &#125; return true&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"AppLink","slug":"AppLink","date":"2022-10-17T08:49:19.000Z","updated":"2023-01-02T03:31:38.944Z","comments":true,"path":"2022/10/17/AppLink/","link":"","permalink":"https://noteforme.github.io/2022/10/17/AppLink/","excerpt":"","text":"https://juejin.cn/post/7031143982960902157 https://developer.android.com/studio/write/app-link-indexing å”¤é†’Appçš„å‡ ç§æ–¹å¼Deep Linkhttps://developer.android.com/training/app-links/deep-linking URL Scheme é“¾æŽ¥æ ¼å¼ 1[scheme]:&#x2F;&#x2F;[host][:port]&#x2F;[path]?[query] å±žæ€§å å«ä¹‰ scheme åè®®åï¼ˆç”±å¼€å‘äººå‘˜å®šä¹‰ï¼‰ host ç½‘ç»œåŸŸå port ç«¯å£å· path é¡µé¢è·¯å¾„ query è¯·æ±‚å‚æ•° scheme only1234567891011&lt;!-- for deep-link --&gt;&lt;intent-filter&gt; &lt;!-- å¿…é¡»åŠ å¦å¦æ— æ³•å“åº”ç‚¹å‡»é“¾æŽ¥çš„ Intent--&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt; &lt;data android:scheme=&quot;ewallet&quot; /&gt;&lt;/intent-filter&gt; åœ¨æµè§ˆå™¨è¾“å…¥ ewallet:// å°±èƒ½ç›´æŽ¥æ‰“å¼€app 1ewallet:&#x2F;&#x2F; scheme host123456789101112&lt;intent-filter&gt; &lt;!-- å¿…é¡»åŠ å¦å¦æ— æ³•å“åº”ç‚¹å‡»é“¾æŽ¥çš„ Intent--&gt; &lt;action android:name&#x3D;&quot;android.intent.action.VIEW&quot; &#x2F;&gt; &lt;category android:name&#x3D;&quot;android.intent.category.DEFAULT&quot; &#x2F;&gt; &lt;category android:name&#x3D;&quot;android.intent.category.BROWSABLE&quot; &#x2F;&gt; &lt;data android:host&#x3D;&quot;topic&quot; android:scheme&#x3D;&quot;com.great.jon&quot; &#x2F;&gt;&lt;&#x2F;intent-filter&gt; åœ¨æµè§ˆå™¨è¾“å…¥ 12com.great.jon:&#x2F;&#x2F;topiccom.great.jon:&#x2F;&#x2F;topic?id &#x3D;11 id=11 è¿™ä¸ªå¯ä»¥ä¸å†™ ADB TEST1adb shell am start -a android.intent.action.VIEW -d &quot;replace your link here&quot; Androidç³»ç»Ÿçº§ Schemesæœ‰ä¸€äº›å·²ç»å®šä¹‰äº†URL Schemesï¼Œæ¯”å¦‚çŸ­ä¿¡æ˜¯ sms:ã€é€šè¯æ˜¯tel:ã€emailæ˜¯mailto:ï¼Œåœ¨å®šä¹‰è‡ªå·±APPçš„URL Schemesçš„æ—¶å€™è¦é¿å…è·Ÿç³»ç»Ÿåº”ç”¨åç§°ä¸€æ · å„å¤§å¹³å°ç®€å•æŸ¥æ‰¾äº†ä¸€ä¸‹å„å¤§å¹³å°çš„ schemeï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç›´æŽ¥ä»Žæ‰‹æœºæµè§ˆå™¨ä¸­æ‰“å¼€å°è¯•ä¸€ä¸‹ã€‚ QQï¼šqq://å¾®ä¿¡ï¼šweixin://æ·˜å®ï¼štaobao://å¾®åšï¼šsinaweibo://ç™¾ç“¶ï¼šbillionbottle:// é¡µé¢è°ƒç”¨æ–¹å¼ 12window.location.href = schemeUrl;å¤åˆ¶ä»£ç  ç›´æŽ¥è·³è½¬é“¾æŽ¥å³å¯ï¼Œç®€å•æ–¹ä¾¿ã€‚ è´Ÿé¢æƒ…å†µ ç›®å‰æ²¡æœ‰åŠžæ³•åŒºåˆ†å¤šä¸ª App éƒ½æ³¨å†Œäº†ç›¸åŒ scheme çš„æƒ…å†µï¼› ä¸æ”¯æŒä»Žå…¶ä»– App ä¸­çš„ WebView ç›´æŽ¥è·³è½¬åˆ°ç›®æ ‡ Appï¼› Android ç«¯å¾®ä¿¡ï¼Œæ— æ³•ç›´æŽ¥é€šè¿‡ scheme å”¤èµ· Appï¼Œå¯ä»¥é€šè¿‡å¼•å¯¼æˆ–å¾®ä¿¡å¼€æ”¾æ ‡ç­¾æ¥è§£å†³ï¼› åªèƒ½é€šè¿‡ hiddenã€blur ç­‰äº‹ä»¶ç›‘å¬åˆ°æ˜¯å¦å®‰è£… Appï¼› å› æ­¤ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒiOS å’Œ Android éƒ½æœ‰äº†è‡ªå·±çš„ç¬¬äºŒå¥—è§£å†³æ–¹æ¡ˆï¼Œåˆ†åˆ«æ˜¯ iOS çš„ Universal Linksï¼Œå’Œ Android çš„ App Linksã€‚ App Linksåœ¨ 2015 å¹´çš„ Google I/O å¤§ä¼šä¸Šï¼ŒAndroid M å®£å¸ƒäº†ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šApp Linksã€‚å®ƒå¯ä»¥è®©ç”¨æˆ·åœ¨ç‚¹å‡»ä¸€ä¸ªæ™®é€š Web é“¾æŽ¥çš„æ—¶å€™å¯ä»¥æ‰“å¼€æŒ‡å®š App çš„å¯¹åº”é¡µé¢ï¼Œå‰ææ˜¯è¿™ä¸ª App å·²ç»å®‰è£…å¹¶ä¸”ç»è¿‡äº†éªŒè¯ï¼Œå¦åˆ™ä¼šæ˜¾ç¤ºä¸€ä¸ªæ‰“å¼€ç¡®è®¤é€‰é¡¹çš„å¯¹è¯æ¡†ï¼Œç›®å‰åªæ”¯æŒ Android M ä»¥ä¸Šç³»ç»Ÿã€‚ App Links çš„å‡ºçŽ°å…¶å®žä¹Ÿæ˜¯ä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œåœ¨ä½¿ç”¨å®ƒå”¤é†’ App æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†æç¤ºç”¨æˆ·æ˜¯å¦æ‰“å¼€ï¼Œç¼ºç‚¹å°±æ˜¯å¦‚æžœç”¨æˆ·å‹¾é€‰äº†å–æ¶ˆä¹‹åŽï¼Œå¯èƒ½ä¹‹åŽå°±å†ä¹Ÿå”¤é†’ä¸äº†äº†ã€‚ å·¥ä½œæ–¹å¼åŠæµç¨‹ é…ç½® AndroidManifest.xmlï¼› é…ç½® json æ–‡ä»¶ï¼› 12345678[&#123; &quot;relation&quot;: [&quot;delegate_permission/common.handle_all_urls&quot;], &quot;target&quot;: &#123; &quot;namespace&quot;: &quot;android_app&quot;, &quot;package_name&quot;: &quot;åŒ…å&quot;, &quot;sha256_cert_fingerprints&quot;: [&quot;ç­¾å&quot;] &#125;&#125;] å°† json æ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šåŸŸåçš„ .well-known è·¯å¾„ä¸‹ï¼Œæ–‡ä»¶åå®šä¹‰ä¸º assetlinks.jsonï¼› éªŒè¯ App Linksï¼Œå¯ä½¿ç”¨ AndroidStudio é‡Œçš„ App Links Assistant ä¸­çš„ Test App Links è¿›è¡Œæµ‹è¯•æˆ–è€…åœ¨çŸ­ä¿¡ä¸­è¾“å…¥é“¾æŽ¥ç‚¹å‡»æµ‹è¯•ï¼Œå¦‚æžœç›´æŽ¥å”¤èµ· App æ²¡æœ‰å¼¹å‡ºå¯¹è¯æ¡†é€‰æ‹©åˆ™è¯´æ˜Ž App Links éªŒè¯æˆåŠŸï¼› æ€»çš„æ¥è¯´ä¸Ž Universal Links çš„é…ç½®å’ŒéªŒè¯å¾ˆç›¸ä¼¼ï¼Œå·®å¼‚ä¸å¤§ã€‚ https://developer.android.com/studio/write/app-link-indexing http://www.androidchina.net/10135.html ç¬¬ä¸‰æ–¹æœåŠ¡å¾®ä¿¡ç›¸å…³çš„å‹æƒ…æç¤ºå¾®ä¿¡å·²ç»æˆä¸ºå¤§å®¶æ—¥å¸¸å¿…ä¸å¯å°‘çš„äº¤æµå·¥å…·ï¼Œç”¨ä½œæŽ¨å¹¿ App æ¥è¯´æ˜¯å†å¥½ä¸è¿‡çš„ï¼Œä½†æ˜¯å¾®ä¿¡å†…éƒ¨é€šå¸¸æ˜¯æ— æ³•ç›´æŽ¥è·³è½¬è‡³å…¶ä»– App çš„ã€‚é‚£é™¤äº†ä»¥ä¸Šåˆ—å‡ºçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¦‚ä½•åŽ»å®žçŽ°è¿™ä¸ªæŠ€æœ¯éœ€æ±‚å‘¢ï¼Ÿ åº”ç”¨å®å¦‚æžœä½ çš„é¡µé¢éœ€è¦èƒ½ç›´æŽ¥æ‰“å¼€åº”ç”¨å•†åº—ï¼Œå¯ä»¥æŠŠä½ çš„ App ä¸Šä¼ åˆ°åº”ç”¨å®å¹³å°ï¼Œå› ä¸ºåº”ç”¨å®å’Œ AppStore æœ‰åˆä½œï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å®žçŽ°äº†å±žäºŽè‡ªå·±çš„ä¸€å¥—æµç¨‹ï¼Œç›´æŽ¥åœ¨å¾®ä¿¡ä¸­è·³è½¬åº”ç”¨å®çš„é“¾æŽ¥ä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰çš„æ–¹æ¡ˆã€‚ å¾®ä¿¡å¼€æ”¾æ ‡ç­¾å¾®ä¿¡åœ¨ 2020 å¹´ 5 æœˆæŽ¨å‡ºäº†å¾®ä¿¡å¼€æ”¾æ ‡ç­¾åŠŸèƒ½ï¼Œç”¨äºŽåœ¨å¾®ä¿¡æµè§ˆå™¨å†…ç›´æŽ¥å”¤é†’ Appï¼Œä¹Ÿèƒ½é€šè¿‡æºå¸¦å‚æ•°ç›´æŽ¥è¿›å…¥ App ç›¸åº”çš„é¡µé¢ï¼Œåªè¦æŒ‰ç…§æ–‡æ¡£è§„å®šæŽ¥å…¥å¾®ä¿¡ SDK å°±å¯ç›´æŽ¥ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚ å…·ä½“è¦æ±‚å¯ä»¥å‚è€ƒå®˜æ–¹å¼€æ”¾å¹³å°ï¼šå¾®ä¿¡å®˜æ–¹æ–‡æ¡£ï¼ˆ developers.weixin.qq.com/doc/oplatfoâ€¦ ï¼‰ã€‚ https://cloud.tencent.com/developer/article/1652487 deeplin VS AppLink Deep Links æ˜¯ä¸€ç§å…è®¸ç”¨æˆ·è¿›å…¥åº”ç”¨æŸä¸ªç‰¹å®šActivityçš„intent filterã€‚ç‚¹å‡»è¿™ç±»é“¾æŽ¥æ—¶ï¼Œç³»ç»Ÿå¯èƒ½ä¼šå¼¹å‡ºä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ï¼Œè®©ç”¨æˆ·åœ¨ä¸€å †èƒ½å¤Ÿå¤„ç†è¿™ç±»é“¾æŽ¥çš„åº”ç”¨é‡Œ(åŒ…æ‹¬ä½ çš„)é€‰æ‹©ä¸€ä¸ªæ¥å¤„ç†è¯¥é“¾æŽ¥ã€‚å›¾ä¸€å±•ç¤ºäº†è¿™æ ·ä¸€ç§æƒ…å†µï¼šç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªåœ°å›¾ç›¸å…³çš„é“¾æŽ¥ï¼Œç³»ç»Ÿå¼¹å‡ºä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ˜¯è¦ä½¿ç”¨åœ°å›¾åº”ç”¨æ¥å¤„ç†ï¼Œè¿˜æ˜¯ä½¿ç”¨Chromeæµè§ˆå™¨æ¥å¤„ç†ã€‚ App Links æ˜¯ä¸€ç§åŸºäºŽä½ çš„ç½‘ç«™åœ°å€ä¸”éªŒè¯é€šè¿‡çš„Deep Linksã€‚å› æ­¤ï¼Œç‚¹å‡»ä¸€ä¸ªè¿™æ ·çš„é“¾æŽ¥ä¼šç›´æŽ¥æ‰“å¼€ä½ çš„åº”ç”¨(å¦‚æžœå·²ç»å®‰è£…)ï¼Œç³»ç»Ÿå°†ä¸ä¼šå¼¹å‡ºé€‰æ‹©åˆ—è¡¨ã€‚å½“ç„¶ï¼ŒåŽç»­ç”¨æˆ·å¯ä»¥æ›´æ”¹é…å¥½è®¾ç½®ï¼Œæ¥æŒ‡å®šç”±å“ªä¸ªåº”ç”¨ç¨‹åºå¤„ç†è¿™ç±»é“¾æŽ¥ã€‚ item Deep Links App Links Intent URL Scheme https, httpï¼Œæˆ–è€…è‡ªå®šä¹‰ éœ€ä¸ºhttpæˆ–https Intent Action ä»»æ„Action éœ€ä¸ºandroid.intent.action.VIEW Intent Category ä»»æ„Category éœ€ä¸ºandroid.intent.category.BROWSABLEå’Œandroid.intent.category.DEFAULT é“¾æŽ¥éªŒè¯ ä¸éœ€è¦ éœ€è¦åœ¨ç½‘ç«™ä¸Šæ”¾ç½®ä¸€ä¸ªæ•°å­—èµ„äº§é“¾æŽ¥ï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡HTTPSè®¿é—® ç”¨æˆ·ä½“éªŒ å¯èƒ½ä¼šå¼¹å‡ºä¸€ä¸ªé€‰æ‹©åˆ—è¡¨ç»™ç”¨æˆ·é€‰æ‹©ç”¨å“ªä¸ªåº”ç”¨å¤„ç†è¿žæŽ¥ æ²¡æœ‰å¼¹æ¡†ï¼Œç³»ç»Ÿç›´æŽ¥æ‰“å¼€ä½ çš„åº”ç”¨å¤„ç†ç½‘ç«™è¿žæŽ¥ å…¼å®¹æ€§ æ‰€æœ‰Androidç‰ˆæœ¬ Android 6.0åŠä»¥ä¸Š https://juejin.cn/post/6844903954149539848 ç”±äºŽå¤§éƒ¨åˆ†åº”ç”¨ï¼Œå¦‚å¾®åšã€å¾®ä¿¡ã€ç¬¬ä¸‰æ–¹æµè§ˆå™¨(åŒ…æ‹¬Chrome)ï¼Œéƒ½ä¸ä¼šå°†URLæŠ›ç»™ç³»ç»Ÿå¤„ç†(å¯¹schemeè¿›è¡Œå±è”½)ï¼Œå› æ­¤App Linksç”Ÿæ•ˆçš„æƒ…å†µå°±å¾ˆæœ‰é™äº†ï¼Œæ¯”å¦‚åªèƒ½ä»Žè®°äº‹æœ¬åº”ç”¨ã€çŸ­ä¿¡åº”ç”¨è¿™äº›è¿›è¡Œè·³è½¬ã€‚ä¸€èˆ¬å•†ç”¨å®žçŽ°çš„æ˜¯æ‰“å¼€ç³»ç»Ÿæµè§ˆå™¨ï¼Œé€šè¿‡ç³»ç»Ÿæµè§ˆå™¨æ‰“å¼€åº”ç”¨çš„å¯¹åº”é¡µé¢ã€‚ ä½œè€…ï¼šJinBeené“¾æŽ¥ï¼šhttps://juejin.cn/post/6844903954149539848æ¥æºï¼šç¨€åœŸæŽ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"LC-Tree-Search-22","slug":"LC-Tree-Search-22","date":"2022-10-05T14:00:07.000Z","updated":"2023-01-02T03:31:39.080Z","comments":true,"path":"2022/10/05/LC-Tree-Search-22/","link":"","permalink":"https://noteforme.github.io/2022/10/05/LC-Tree-Search-22/","excerpt":"","text":"äºŒå‰æ ‘æœç´¢ BSTæ ¹èŠ‚ç‚¹æ¯”å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„æ•°å€¼éƒ½å¤§ï¼Œæ¯”å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„æ•°å€¼éƒ½å°. 700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢My idea DFS å…ˆåºéåŽ†æœç´¢ï¼Œå¦‚æžœæ‰¾åˆ°äº†ç›´æŽ¥è¿”å›žå½“å‰èŠ‚ç‚¹ã€‚ 123456789101112131415fun searchBST(root: TreeNode?, `val`: Int): TreeNode? &#123; if (root == null) return null if (root.`val` == `val`) &#123; return root &#125; val nodeLeft = searchBST(root.left, `val`) if (nodeLeft != null) &#123; return nodeLeft &#125; val nodeRight = searchBST(root.right, `val`) if (nodeRight != null) &#123; return nodeRight &#125; return null&#125; çœ‹äº†å®˜æ–¹è§£æ³•,åˆ©ç”¨äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ 1234567891011fun searchBST1(root: TreeNode?, `val`: Int): TreeNode? &#123; if (root == null) return null var node: TreeNode? = root.left if (root.`val` == `val`) &#123; //ä¸€å¼€å§‹æ²¡æœ‰åšå‡ºæ¥ï¼Œè¿™ä¸ªæ¡ä»¶æ²¡å†™,å¯¼è‡´ä¸€ç›´å¾€ä¸‹é€’å½’ return root &#125; if (root.`val` &lt; `val`) &#123; node = root.right &#125; return searchBST1(node, `val`)&#125; è¿­ä»£æ³•äºŒå‰æœç´¢æ ‘çš„è¿­ä»£æ³•ç›¸å¯¹ç®€å•ï¼Œæš‚æ—¶å…ˆä¸çœ‹äº† 98. éªŒè¯äºŒå‰æœç´¢æ ‘äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ä¸ªæœ‰åºæ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘ä¸ç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å°äºŽå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› æ³¨æ„==éƒ½ä¸è¡Œ è‹¥å®ƒçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰ç»“ç‚¹çš„å€¼å‡å¤§äºŽå®ƒçš„æ ¹ç»“ç‚¹çš„å€¼ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æœç´¢æ ‘ è¿™å°±å†³å®šäº†ï¼ŒäºŒå‰æœç´¢æ ‘ï¼Œé€’å½’éåŽ†å’Œè¿­ä»£éåŽ†å’Œæ™®é€šäºŒå‰æ ‘éƒ½ä¸ä¸€æ ·ã€‚ ä¸€å¼€å§‹ç†è§£é”™äº†ï¼Œåªæ¯”è¾ƒæ ¹èŠ‚ç‚¹å’Œå·¦å³å­æ ‘ï¼Œå¯¼è‡´ä¸‹é¢è¿™ä¸ªtestcaseæ²¡é€šè¿‡ï¼Œåº”è¯¥æ˜¯æ ¹èŠ‚ç‚¹å’Œæ‰€æœ‰çš„å·¦å³å­æ ‘çš„èŠ‚ç‚¹æ•°ç»„ 15, 4, 6, null, null, 3, 7 è½¬æ•°ç»„æŠŠä¸­åºéåŽ†è½¬æˆæ•°ç»„å¾ˆå¥½ç†è§£ ä¸­åºéåŽ†é€’å½’ å¾—åˆ°listæ•°ç»„ æ¯”è¾ƒæ•°ç»„çš„å‰åŽèŠ‚ç‚¹å¤§å¤§å°, å¦‚æžœå‰é¢èŠ‚ç‚¹å€¼æ›´å¤§ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›žfalse, ==ä¹Ÿä¸è¡Œ 1234567891011121314151617val list = LinkedList&lt;Int&gt;()fun isValidBST3(root: TreeNode?): Boolean &#123; dfsTraversal(root) // ä¸­åºéåŽ†é€’å½’ å¾—åˆ°listæ•°ç»„ for (i in 0 until list.size - 1) &#123; // æ¯”è¾ƒæ•°ç»„çš„å‰åŽèŠ‚ç‚¹å¤§å¤§å° if (list[i] &gt;= list[i + 1]) &#123; // å¦‚æžœå‰é¢èŠ‚ç‚¹å€¼æ›´å¤§ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›žfalse, ==ä¹Ÿä¸è¡Œ return false &#125; &#125; return true&#125;private fun dfsTraversal(root: TreeNode?) &#123; if (root == null) return dfsTraversal(root.left) list.add(root.`val`) dfsTraversal(root.right)&#125; é€’å½’è§£æ³•éšæƒ³å½•çš„é€’å½’è§£æ³•ï¼Œä¸€å¼€å§‹æ€Žä¹ˆä¹Ÿç†è§£ä¸äº†ï¼Œå…¶å®žå’Œä¸Šé¢ ä¸­åºè½¬æ•°ç»„çš„ç±»ä¼¼ï¼Œå°±æ˜¯æŠŠæ ¹æ®ä¸­åºéåŽ†éåŽ†çš„èŠ‚ç‚¹ï¼ŒåŽä¸€ä¸ªèŠ‚ç‚¹ä¸€å®šæ¯”å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°å€¼é«˜ã€‚ ä¸­åºéåŽ† åŽä¸€ä¸ªèŠ‚ç‚¹æ¯”å‰ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼å¤§ï¼Œå°±å¯ä»¥äº†ï¼Œæ‰€ä»¥å­˜å‚¨å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ 123456789101112131415var preNode: TreeNode? = nullfun isValidBST4(root: TreeNode?): Boolean &#123; if (root == null) return true if (!isValidBST4(root.left)) &#123; return false &#125; if (preNode != null &amp;&amp; preNode!!.`val` &gt;= root.`val`) &#123; return false &#125; preNode = root if (!isValidBST4(root.right)) &#123; return false &#125; return true&#125; ä¹‹å‰çš„é¢˜ä¸»è¦ç”¨åˆ° åŽåºå’Œå…ˆåºï¼ŒäºŒå‰æœç´¢è¿™é‡Œå¼€å§‹ç”¨åˆ°äº† ä¸­åºéåŽ†ã€‚ 530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®My idea è¿™ä¸€é¢˜å’Œä¸Šä¸€é¢˜ 98 æ€è·¯å·®ä¸å¤šï¼Œ ä¸­åºéåŽ†çš„èŠ‚ç‚¹ä¹‹é—´çš„æ•°ç»„ç›¸å·®æœ€å°ï¼Œæ‰€ä»¥æ‰¾å‡ºèŠ‚ç‚¹é—´çš„é—´éš”æœ€å°å€¼å°±å¯ä»¥äº†ã€‚ 123456789101112131415var preNode: TreeNode? = nullvar miniNum = Int.MAX_VALUEfun getMinimumDifference(root: TreeNode?): Int &#123; if (root == null) return Int.MAX_VALUE getMinimumDifference(root.left) if (preNode != null) &#123; val gapNum = root.`val` - preNode!!.`val`//è¿™ä¸€æ­¥å¯ä»¥ç®€åŒ– Math.min() if (gapNum &lt; miniNum) &#123; miniNum = gapNum &#125; &#125; preNode = root getMinimumDifference(root.right) return miniNum&#125; ä¹Ÿå¯ä»¥å…ˆä¸­åºéåŽ†è½¬æˆæ•°ç»„ï¼Œç„¶åŽæ±‚æ•°ç»„å…ƒç´ é—´çš„å·®å€¼å°±å¯ä»¥äº†ã€‚ 501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°My idea æˆ‘çš„æƒ³æ³•å’Œä¸Šé¢çš„ç±»ä¼¼ã€‚ ä¸­åºéåŽ†ç›¸é‚»èŠ‚ç‚¹ç”¨mapå­˜ä¸‹valueå’Œå€¼çš„ä¸ªæ•°ã€‚ éåŽ†mapæ±‚å¾—æœ€å¤§ä¸ªäº‹çš„æ•°ç»„ã€‚æŠŠmapæŒ‰ç…§valueä¸ªæ•°è¿›è¡Œæ•°ç»„æŽ’åº ç„¶åŽå–æŽ’åºåŽçš„å‰é¢çš„å…ƒç´  ã€‚äº†ã€‚/å…¶å®žä¸Šé¢è¿™ç§æ–¹å¼ï¼Œç”¨å…ˆåº åŽåºéƒ½å¯ä»¥ï¼Œéƒ½ä¸éœ€è¦äºŒå‰æœç´¢æ ‘ã€‚ å…¶å®žä¸Šé¢æˆ‘çš„æƒ³æ³•ä¹Ÿæ˜¯ æ‰“ç®—ç”¨äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼Œæ”¾åˆ°mapä¸­ï¼Œç„¶åŽæŠŠmapæŽ’åº,å°±ä¸çŸ¥é“æ€Žä¹ˆå¤„ç†æ›´å¥½ã€‚çœ‹äº†éšæƒ³å½•çš„å¤„ç†æ–¹å¼,ç†äº†ä¸‹æ€è·¯. æ ¹æ®ä¸­åºéåŽ†çš„å‰åŽèŠ‚ç‚¹ï¼Œä»–ä»¬çš„å€¼ç›¸åŒçš„æ˜¯ä¸€èµ·çš„ï¼Œè¿›è¡ŒéåŽ†ã€‚ å¯¹valueå€¼è¿›è¡Œcountè®¡æ•°ï¼Œå¦‚æžœcount == æœ€å¤§ä¸ªæ•°ï¼ŒåŠ å…¥é›†åˆã€‚ å¦‚æžœcount&gt;æœ€å¤§ä¸ªæ•°ï¼Œæ¸…ç©ºé›†åˆ. ä¸€å¼€å§‹ä¸çŸ¥é“æ”¾å“ªé‡Œ, maxCount=count ï¼Œä»¥ä¸ºåœ¨å‰é¢if (preNode != null &amp;&amp; preNode!!.val == node.val) å‰é¢çš„æ¯”è¾ƒé‡Œé¢,è¿˜æƒ³ç€Math.max,ä½†æ˜¯éƒ½ä¸åˆé€‚ã€‚ç„¶åŽçœ‹äº†ä¸€åŠéšæƒ³å½•æ˜¯æ”¾åœ¨æ›´æ–°èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ›´å¥½. 1234567891011121314151617181920212223242526272829303132val array = ArrayList&lt;Int&gt;()fun findMode(root: TreeNode?): IntArray &#123; inDFS(root) return array.toIntArray()&#125;var preNode: TreeNode? = nullvar maxCount = 0var count = 0private fun inDFS(node: TreeNode?) &#123; val printNode = node?.`val` println(&quot;printNode $printNode&quot;) if (node == null) &#123; return &#125; inDFS(node.left) if (preNode != null &amp;&amp; preNode!!.`val` == node.`val`) &#123; count++ &#125; else &#123; count = 1 &#125; if (count == maxCount) &#123; array.add(node.`val`) &#125; if (count &gt; maxCount) &#123; maxCount = count//è¿™ä¸€æ­¥ä¸€å¼€å§‹ä¸çŸ¥é“æ”¾å“ªé‡Œ,çœ‹äº†ä¸€çœ¼éšæƒ³å½•ç­”æ¡ˆ array.clear() // æœ‰æ›´å¤§çš„å€¼ï¼Œæ¸…ç©ºä¹‹å‰çš„é›†åˆ array.add(node.`val`) &#125; preNode = node inDFS(node.right)&#125; å®˜æ–¹è¿˜æœ‰ o(1)çš„å¤„ç†ï¼Œwhileå¾ªçŽ¯ https://leetcode.cn/problems/find-mode-in-binary-search-tree/solution/er-cha-sou-suo-shu-zhong-de-zhong-shu-by-leetcode-/ 236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆè¿™ä¸€é¢˜æœ‰ä¸¤ç§æƒ³æ³• ä¹‹å‰åšçš„çŽ¯å½¢é“¾è¡¨ èµ°å¯¹æ–¹çš„è·¯ å…ˆåºéåŽ†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªè¦ä¸‹é¢çš„èŠ‚ç‚¹éƒ½èµ°è¿‡ï¼Œåªè¦ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰èµ°åˆ°ï¼Œå°±è¿”å›žä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯å…ˆåºéåŽ†DFS ä¸¤ä¸ªèŠ‚ç‚¹éƒ½èµ°äº†ä¸çŸ¥é“æ€Žä¹ˆè¿”å›žã€‚ çœ‹äº†éšæƒ³å½•è§†é¢‘æ€è·¯åŽ https://www.bilibili.com/video/BV1jd4y1B7E2 åŽåºéåŽ†å¦‚æžœç¢°åˆ°pæˆ–q,å°±è¿”å›žä»–ä»¬çš„èŠ‚ç‚¹. å¦‚æžœä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½ä¸ä¸ºç©ºè¯´æ˜Žå½“å‰èŠ‚ç‚¹æ˜¯ä»–ä»¬çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ. è¿˜ä¸€ç§æƒ…å†µï¼Œæœ‰ä¸€ä¸ªèŠ‚ç‚¹på°±æ˜¯ç¥–å…ˆèŠ‚ç‚¹ debugè°ƒè¯•ï¼Œæ‹¼å‡‘æŠŠä»£ç å†™å‡ºæ¥äº† 123456789101112131415161718 fun lowestCommonAncestor(root: TreeNode?, p: TreeNode?, q: TreeNode?): TreeNode? &#123; if (root == null) return null // éšæƒ³å½•è¿™é‡Œæ”¹æˆ ç¢°åˆ°èŠ‚ç‚¹åˆ¤æ–­ï¼Œç›´æŽ¥åœ¨è¿™é‡Œè¿”å›ž// val printData = root.`val`// println(printData) val leftNode = lowestCommonAncestor(root.left, p, q) val rightNode = lowestCommonAncestor(root.right, p, q) if (leftNode != null &amp;&amp; rightNode != null) &#123; // å¦‚æžœå·¦å³å­æ ‘éƒ½ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ return root &#125; if (p != null &amp;&amp; root.`val` == p.`val`) &#123; //ç¢°åˆ°äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹è¿”å›ž return root &#125; else if (q != null &amp;&amp; root.`val` == q.`val`) &#123; return root //ç¢°åˆ°äº†å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹è¿”å›ž &#125; if (leftNode != null) return leftNode //å›žæº¯ä¹‹å‰ç¢°åˆ°çš„èŠ‚ç‚¹ if (rightNode != null) return rightNode return null &#125; ç»ˆæ­¢æ¡ä»¶å†™æ³• éšæƒ³å½•è¿™é‡Œæ”¹æˆ ç¢°åˆ°èŠ‚ç‚¹åˆ¤æ–­ï¼Œç›´æŽ¥åœ¨è¿™é‡Œè¿”å›žï¼Œä¸‹æ¬¡å¯ä»¥æ”¹æˆåœ¨ç»ˆæ­¢æ¡ä»¶è¿™é‡Œï¼Œæ›´ç®€å• 235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆMy idea å¯ä»¥æ ¹æ®äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼Œ ç¥–å…ˆèŠ‚ç‚¹çš„å€¼å¤§å°æœ‰ä¸¤ç§æƒ…å†µ åœ¨på’Œqä¹‹å‰, å¦‚æžœp&lt;q, ç¥–å…ˆèŠ‚ç‚¹çš„å€¼ ç­‰äºŽp , å¤§äºŽq åªè¦æ»¡è¶³ä¸Šè¿°æ¡ä»¶ï¼Œç”¨å…ˆåºéåŽ†æˆ–è€…åŽåºéåŽ†éƒ½å¯ä»¥ï¼ŒæŠŠèŠ‚ç‚¹è¿”å›ž å®˜æ–¹å’Œéšæƒ³å½•è§£æ³•éƒ½æ˜¯ç»™å‡ºäº†ç›¸åçš„æ¡ä»¶ ï¼Œå½“å‰èŠ‚ç‚¹&lt;p , &gt;q,åœ¨å¤–é¢çš„æƒ…å†µï¼ˆå…¶å®žè¿™é‡Œæ²¡æƒ³æ¸…æ¥š,ä¸å­˜åœ¨è¿™æ ·çš„&lt;2 &gt;4çš„èŠ‚ç‚¹ï¼‰, ä½†æ˜¯æˆ‘è¿™é‡Œide testcaseä¹Ÿæ²¡é—®é¢˜ã€‚ https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/solution/er-cha-sou-suo-shu-de-zui-jin-gong-gong-zu-xian-26/ 1234567891011121314151617181920212223242526272829303132/** * å¾ˆå¥‡æ€ªï¼ŒIDEå¯ä»¥è·‘è¿™ä¸ªtestcaseæ²¡é—®é¢˜ *[2,1] * 2 * 1 */fun lowestCommonAncestor(root: TreeNode?, p: TreeNode?, q: TreeNode?): TreeNode? &#123; if (root == null) return null if (p!!.`val` &gt; q!!.`val`) &#123; swap(p, q) &#125; if (root.`val` &gt; p.`val` &amp;&amp; root.`val` &lt; q.`val`) &#123; return root &#125; if (root.`val` == p.`val` &amp;&amp; root.`val` &lt; q.`val`) &#123; return root &#125; if (root.`val` == q.`val` &amp;&amp; root.`val` &gt; p.`val`) &#123; return root &#125; val leftNode = lowestCommonAncestor(root.left, p, q) if (leftNode != null) return leftNode val rightNode = lowestCommonAncestor(root.right, p, q) if (rightNode != null) return rightNode return null&#125;fun swap(p: TreeNode, q: TreeNode?) &#123; val temp = p.`val` p.`val` = q!!.`val` q.`val` = temp&#125; https://programmercarl.com/0235.%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88.html https://www.bilibili.com/video/BV1Zt4y1F7ww çœ‹äº†éšæƒ³å½•è§†é¢‘ï¼Œå…¶å®žç›¸åçš„å°±ä¸¤ç§æƒ…å†µ å½“å‰èŠ‚ç‚¹ &lt;p , &lt;qï¼Œ é‚£ä¹ˆp,qä¸€å®šåœ¨å³å­æ ‘ä¸Šï¼Œå°±åŽ»å³å­æ ‘åŽ»æ‰¾ å½“å‰èŠ‚ç‚¹ &gt; p , &gt;q ,é‚£ä¹ˆp,qä¸€å®šåœ¨å·¦å­æ ‘ä¸Šï¼Œå°±åŽ»å·¦å­æ ‘åŽ»æ‰¾ 12345678910111213fun lowestCommonAncestor(root: TreeNode?, p: TreeNode?, q: TreeNode?): TreeNode? &#123; if (root == null) return null if (root.`val` &lt; p!!.`val` &amp;&amp; root.`val` &lt; q!!.`val`) &#123; // å½“å‰èŠ‚ç‚¹æ¯”på’Œqçš„å€¼éƒ½å°ï¼Œé‚£ä¹ˆä¸€å®šp,qä¸€å®šåœ¨å³å­æ ‘ä¸Šï¼Œå°±å¾€å³è¾¹éåŽ† val rightNode = lowestCommonAncestor(root.right, p, q) if (rightNode != null) return rightNode &#125; if (root.`val` &gt; p.`val` &amp;&amp; root.`val` &gt; q!!.`val`) &#123; val leftNode = lowestCommonAncestor(root.left, p, q) if (leftNode != null) return leftNode &#125; return root&#125; 701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œDFSMy idea å¯ä»¥ç”¨åŽåºéåŽ†ï¼ŒæŒ‰ç…§äºŒå‰æ ‘çš„ç‰¹æ€§ï¼Œèµ°åˆ°å¶å­èŠ‚ç‚¹åŽï¼Œè¿žæŽ¥åˆ°å¶å­èŠ‚ç‚¹ï¼Œç„¶åŽå›žæº¯åˆ°æ ¹èŠ‚ç‚¹å¹¶è¿”å›ž åŽåºéåŽ†æ ¹æ®å¾…æ’å…¥å€¼å’Œå½“å‰èŠ‚ç‚¹æ¯”è¾ƒï¼Œæ‰¾åˆ°éœ€è¦æ’å…¥çš„ä½ç½®ã€‚ å¦‚æžœéœ€è¦æ’å…¥çš„ä½ç½®å·¦æˆ–å³èŠ‚ç‚¹åˆšå¥½ä¸ºç©ºï¼Œå°±æ’å…¥ã€‚ éšæƒ³å½•å…¶ä¸­ä¸€ä¸ªè§£æ³•å’Œæˆ‘çš„è¿™ä¸ªç±»ä¼¼ï¼Œä¸è¿‡æ„Ÿè§‰æ¯”æˆ‘è¿™ä¸ªæ›´å¤æ‚ç‚¹ è‡ªå·±çš„åšçš„è§£æ³• 123456789101112131415161718fun insertIntoBST(root: TreeNode?, `val`: Int): TreeNode? &#123; if (root == null) return TreeNode(`val`) //æœ‰ä¸€ä¸ªè¿™ä¸ªtest case [] 5 ,ç©ºæ ‘çš„è¯è¿”å›ž [5] if (`val` &lt; root.`val`) &#123; // æ’å…¥ç‚¹å°äºŽå½“å‰èŠ‚ç‚¹ï¼Œå¾€å·¦å­æ ‘ä¸­æ’å…¥ insertIntoBST(root.left, `val`) &#125; if (`val` &gt; root.`val`) &#123; insertIntoBST(root.right, `val`) &#125; // ä¸€å¼€å§‹è¿™ä¸ªæ”¾å‰é¢å¯¼è‡´æ·»åŠ äº†ä¸¤ä¸ª5çš„å·¦èŠ‚ç‚¹ï¼Œå› ä¸º insertIntoBST(root.left, `val`)åˆèµ°äº†ä¸€æ¬¡ val treeNode = TreeNode(`val`) // åªæœ‰ä¸€æ¬¡æœºä¼šèµ°è¿™ä¸ª if (root.right == null &amp;&amp; `val` &gt; root.`val`) &#123; // å¾…æ’å…¥ç‚¹å¤§äºŽå½“å‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¦æ’å…¥å³å­æ ‘ä¸­ï¼Œæ­¤æ—¶å³å­æ ‘ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æŽ¥æ’å…¥ root.right = treeNode &#125; else if (root.left == null &amp;&amp; `val` &lt; root.`val`) &#123; root.left = treeNode &#125; return root&#125; çœ‹äº†éšæƒ³å½•çš„è§£æ³•ï¼Œå…¶å®žè¿˜å¯ä»¥æ¯ä¸€ä¸ªéƒ½è¢«çˆ¶èŠ‚ç‚¹æŽ¥ä½æ›´ç®€å•,ä¹Ÿæ˜¯åŽåºéåŽ†çš„ç²¾é«“ 123456789101112fun insertIntoBST(root: TreeNode?, `val`: Int): TreeNode? &#123; if (root == null) &#123; return TreeNode(`val`) &#125; if (`val` &lt; root.`val`) &#123; // æ’å…¥ç‚¹å°äºŽå½“å‰èŠ‚ç‚¹ï¼Œå¾€å·¦å­æ ‘ä¸­æ’å…¥ root.left = insertIntoBST1(root.left, `val`) &#125; if (`val` &gt; root.`val`) &#123; root.right = insertIntoBST1(root.right, `val`) &#125; return root&#125; è¿­ä»£æ³•å®˜æ–¹ç”¨è¿­ä»£æ³• ,çœ‹èµ·æ¥ä¹Ÿä¸éš¾ https://leetcode.cn/problems/insert-into-a-binary-search-tree/solution/er-cha-sou-suo-shu-zhong-de-cha-ru-cao-zuo-by-le-3/ 450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹My idea å’Œä¸Šé¢æ€è·¯ç±»ä¼¼ï¼Œç”¨åŽåºéåŽ†çš„ çˆ¶èŠ‚ç‚¹æŽ¥ä½ï¼Œå½“å‰è¦åˆ é™¤èŠ‚ç‚¹çš„å·¦æˆ–è€…å³èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å°±åˆ é™¤äº†ï¼Œç„¶åŽå·¦å³èŠ‚ç‚¹å†æ”¹å˜æŒ‡å‘ã€‚ åŽåºéåŽ†åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹. å½“å‰èŠ‚ç‚¹çš„å³èŠ‚ç‚¹æŒ‡å‘å®ƒçš„å·¦èŠ‚ç‚¹ã€‚è¢«ä¸Šä¸€ä¸ªèŠ‚ç‚¹å›žæº¯çš„çˆ¶èŠ‚ç‚¹æŽ¥ä½ã€‚ è¿”å›žå½“å‰èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹ï¼Œ [5,3,6,2,4,null,7]5ä¼˜å…ˆè¿˜æ˜¯éœ€è¦å³èŠ‚ç‚¹ä¸ŠåŽ»ï¼Œå¦åˆ™å°±å¾ˆéº»çƒ¦ï¼Œéœ€è¦4ä¸ŠåŽ» åˆ é™¤èŠ‚ç‚¹ä¸»è¦æœ‰è¿™5ç§æƒ…å†µ ç¬¬ä¸€ç§æƒ…å†µï¼šæ²¡æ‰¾åˆ°åˆ é™¤çš„èŠ‚ç‚¹ï¼ŒéåŽ†åˆ°ç©ºèŠ‚ç‚¹ç›´æŽ¥è¿”å›žäº† æ‰¾åˆ°åˆ é™¤çš„èŠ‚ç‚¹ ç¬¬äºŒç§æƒ…å†µï¼šåˆ é™¤çš„å·¦å³å­©å­éƒ½ä¸ºç©ºï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼Œç›´æŽ¥åˆ é™¤èŠ‚ç‚¹ï¼Œ è¿”å›žNULLä¸ºæ ¹èŠ‚ç‚¹ ç¬¬ä¸‰ç§æƒ…å†µï¼šåˆ é™¤èŠ‚ç‚¹çš„å·¦å­©å­ä¸ºç©ºï¼Œå³å­©å­ä¸ä¸ºç©ºï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œå³å­©å­è¡¥ä½ï¼Œè¿”å›žå³å­©å­ä¸ºæ ¹èŠ‚ç‚¹ ç¬¬å››ç§æƒ…å†µï¼šåˆ é™¤èŠ‚ç‚¹çš„å³å­©å­ä¸ºç©ºï¼Œå·¦å­©å­ä¸ä¸ºç©ºï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œå·¦å­©å­è¡¥ä½ï¼Œè¿”å›žå·¦å­©å­ä¸ºæ ¹èŠ‚ç‚¹ ç¬¬äº”ç§æƒ…å†µï¼šåˆ é™¤èŠ‚ç‚¹çš„å·¦å³å­©å­èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œåˆ™å°†åˆ é™¤èŠ‚ç‚¹çš„å·¦å­æ ‘å¤´ç»“ç‚¹ï¼ˆå·¦å­©å­ï¼‰æ”¾åˆ°åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘çš„æœ€å·¦é¢èŠ‚ç‚¹çš„å·¦å­©å­ä¸Šï¼Œè¿”å›žåˆ é™¤èŠ‚ç‚¹å³å­©å­ä¸ºæ–°çš„æ ¹èŠ‚ç‚¹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940fun deleteNode(root: TreeNode?, key: Int): TreeNode? &#123; if (root == null) return null //æƒ…å†µä¸€ if (key &lt; root.`val`) &#123; root.left = deleteNode(root.left, key) &#125; else if (key &gt; root.`val`) &#123; root.right = deleteNode(root.right, key) &#125; if (key == root.`val`) &#123; if (root.right == null &amp;&amp; root.left == null) &#123; return null // æƒ…å†µ2 [0] 0 å› ä¸ºè¿™ä¸ªtestcase ä¼šè¿”å›ž[0]å’Œé¢„æœŸä¸ä¸€è‡´ &#125; else if (root.left != null &amp;&amp; root.right == null) &#123; //æƒ…å†µä¸‰ å¦‚æžœå·¦èŠ‚ç‚¹ä¸ä¸ºç©º val node = root.left // å·¦èŠ‚ç‚¹ 2 æŽ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹ä½ç½® if(root.right!=null)&#123; //è¿™ä¸¤å¥å¯ä»¥åŽ»æŽ‰ ï¼Œç›´æŽ¥è¿”å›žèŠ‚ç‚¹ node.right = root.right //æ­¤æ—¶å·¦èŠ‚ç‚¹2åœ¨åœ¨åˆ é™¤èŠ‚ç‚¹ä½ç½®ï¼Œå®ƒçš„å³å­æ ‘æŒ‡å‘ä¹‹å‰å³èŠ‚ç‚¹4 &#125; return node &#125; else if (root.right != null &amp;&amp; root.left == null) &#123; //æƒ…å†µå›› å¦‚æžœå³èŠ‚ç‚¹ä¸ä¸ºç©º val node = root.right //å³èŠ‚ç‚¹4 æŽ¨åˆ°åˆ é™¤çš„èŠ‚ç‚¹ä½ç½® if(root.left!=null)&#123; //è¿™ä¸¤å¥å¯ä»¥åŽ»æŽ‰ node.left = root.left // æ­¤æ—¶å·¦èŠ‚ç‚¹4åœ¨åœ¨åˆ é™¤èŠ‚ç‚¹ä½ç½®ï¼Œå®ƒçš„å·¦å­æ ‘æŒ‡å‘ä¹‹å‰å³èŠ‚ç‚¹2 &#125; return node &#125; else &#123; val rightNode = root.right //æƒ…å†µäº” var leftNode = rightNode?.left while (leftNode?.left!= null) &#123; leftNode = leftNode.left &#125; if (leftNode != null) &#123; leftNode.left = root.left &#125; else &#123; rightNode.left = root.left &#125; root.left = null return rightNode // è¿™é‡Œè¿”å›žçš„èŠ‚ç‚¹ï¼Œå¯ä»¥è¢«ä¸Šé¢çš„å·¦å³å­æ ‘æŽ¥ä½ &#125; &#125; return root&#125; æ™®é€šäºŒå‰æ ‘çš„èŠ‚ç‚¹åˆ é™¤é€šç”¨äºŒå‰æ ‘èŠ‚ç‚¹åˆ é™¤ è¦åŠ if (leftNode != null)ï¼Œå¦åˆ™åˆ é™¤æŠ¥é”™ è¿™ä¸ªé¢˜ç›®çš„leetcodeçš„æµ‹è¯•ç”¨ä¾‹æœ‰é—®é¢˜,å•ç‹¬è·‘æŠ¥é”™. 108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘çœ‹äº†éšæƒ³å½•çš„è§£ç­”ï¼Œä»Žä¸­å–ä¸­é—´èŠ‚ç‚¹çš„ä½ç½®å°±å¯ä»¥äº†ï¼Œå¦‚æžœæ•°å­—æ˜¯å¶æ•°ï¼Œä¸­é—´èŠ‚ç‚¹çš„ä¸¤ä¸ªä¸­çš„ä¸€ä¸ªéƒ½å¯ä»¥ï¼Œ ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆå–ä¸­é—´èŠ‚ç‚¹æž„é€ çš„äºŒå‰æ ‘å°±æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘å‘¢? å…ˆæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼ŒæŠŠä»£ç å†™å‡ºæ¥ æŒ‰ç…§å…ˆåºéåŽ†æ€è·¯ï¼Œå…ˆæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œæž„é€ å‡ºä¸­é—´èŠ‚ç‚¹ã€‚ æ ¹æ®ä¸­é—´èŠ‚ç‚¹åˆ’å®šæ–°çš„æ•°ç»„çš„èŒƒå›´ï¼Œå·¦è¾¹å’Œå³è¾¹ï¼Œç„¶åŽé€’å½’æ‰¾åˆ°æ–°çš„æ•°ç»„çš„ä¸­é—´èŠ‚ç‚¹ç»§ç»­åˆ’å‡ºèŒƒå›´. åœ¨è¿™é‡Œ å·¦é—­å³é—­æ›´åˆç† è¿™é¢˜ä¸»è¦æ³¨æ„è¾¹ç•Œå€¼,if (left &gt; rightï¼‰è¿™ä¸ªè¦æ³¨æ„æ˜¯&gt; æ²¡æœ‰=,å› ä¸ºindex-1å’Œindex+1äº†ï¼Œæ‰€ä»¥æœ€ç»ˆä¸€å®šä¼šè¶…è¿‡right 123456789101112131415fun sortedArrayToBST(nums: IntArray): TreeNode? &#123; return buildSearchTree(nums, 0, nums.size - 1)&#125;private fun buildSearchTree(nums: IntArray, left: Int, right: Int): TreeNode? &#123; if (left &gt; right) &#123; return null &#125; val index = /*(start + end) / 2*/ left + (right - left) / 2 val node = TreeNode(nums[index]) // println(&quot;node $&#123;node.`val`&#125; : start $left end $right&quot;) node.left = buildSearchTree(nums, left, index - 1) node.right = buildSearchTree(nums, index + 1, right) return node&#125; 538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘ç´¯åŠ æ ‘: æŒ‰ç…§ä¸­åºéåŽ†çš„åˆ°çš„ ä»Žå°åˆ°å¤§çš„æ•°ç»„ [1,2,3,4] ,ç´¯åŠ æ ‘å°±æ˜¯å³åˆ°å·¦çš„å€¼ç›¸åŠ  [10,9,7,4] https://programmercarl.com/0538.%E6%8A%8A%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%B4%AF%E5%8A%A0%E6%A0%91.html#%E9%80%92%E5%BD%92 ä¸­åºéåŽ†çš„æ ‘ : å·¦ ä¸­ å³ 2 , 5, 13 åä¸­åºéåŽ†çš„: å³ ä¸­ å·¦ 13 , 5 , 2 ç„¶åŽæŒ‰ç…§åä¸­åºéåŽ†çš„åˆ°èŠ‚ç‚¹ç´¯åŠ å°±å¯ä»¥äº†ã€‚ è¿™ä¸€é¢˜ä¸€å¼€å§‹æ²¡æƒ³ä¸Šé¢çš„æ€è·¯ï¼Œçœ‹äº†éšæƒ³å½•çš„æ€è·¯åŽ,å†™å‡ºæ¥çš„ 123456789var sum = 0fun convertBST(root: TreeNode?): TreeNode? &#123; if (root == null) return null convertBST(root.right) sum += root.`val` root.`val` = sum convertBST(root.left) return root&#125; æ ¹æ®ä¸­åºéåŽ†çš„è§„åˆ™ï¼Œå†™å‡ºåä¸­åº å³ä¸­å·¦éåŽ†èŠ‚ç‚¹ã€‚ æ‹¿åˆ°æ¯æ¬¡ä¸­åºçš„åˆ°çš„èŠ‚ç‚¹ç´¯åŠ ï¼Œç„¶åŽèµ‹å€¼ç»™å½“å‰èŠ‚ç‚¹ã€‚ sum += root.`val` root.`val` = sum è¿™ä¸€æ®µå¯ä»¥æ”¹è¿›ï¼Œå¯ä»¥ä¿å­˜å‰ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼Œç„¶åŽåŠ ä¸Šå½“å‰èŠ‚ç‚¹å°±å¯ä»¥äº†ã€‚ 123456789var pre = 0fun convertBST1(root: TreeNode?): TreeNode? &#123; if (root == null) return null convertBST(root.right) root.`val` += pre pre = root.`val` convertBST(root.left) return root&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"Fragment_StateLoss","slug":"Fragment-StateLoss","date":"2022-09-15T02:25:12.000Z","updated":"2024-03-31T23:23:52.278Z","comments":true,"path":"2022/09/15/Fragment-StateLoss/","link":"","permalink":"https://noteforme.github.io/2022/09/15/Fragment-StateLoss/","excerpt":"","text":"é—®é¢˜ ï¼ŒActivityæ¢å¤åŽ mStateSaved,æ˜¯æ€Žä¹ˆæ¢å¤çš„ï¼Ÿ å°±æ˜¯onSavedInstanceState çš„å®˜æ–¹APIæ–‡æ¡£2 è¿™é‡Œé—®é¢˜çš„åœºæ™¯æ˜¯Activityå·²ç»å…³é—­äº†,rpcè¯·æ±‚å¾ˆä¹…å†å›žæ¥,å¯¼è‡´äº†è¿™ä¸ªé—®é¢˜,æ‰€ä»¥æˆ‘è§‰å¾—åˆ¤æ–­livedateæ¿€æ´»çŠ¶æ€å°±å¯ä»¥äº† å¯æ˜¯è¿™ä¸ªæ”¹åŠ¨åº”è¯¥åªèƒ½åœ¨resumeå§ï¼Ÿ LiveData started å’Œ resumed éƒ½å¯ä»¥ Livedata ä¼šæ„ŸçŸ¥activityç”Ÿå‘½å‘¨æœŸ è¿™ä¸ªæœ‰å¯èƒ½ activity ä¹Ÿåœ¨ started / resumed çŠ¶æ€ä¸‹å‘å‡ºå§ï¼Ÿ è¿™æ ·çš„è¯ï¼ŒshowDialog åº”è¯¥ä¹Ÿè¿˜ä¼šå´©æºƒï¼Œå› ä¸ºonSavedInstanceState æ˜¯åœ¨ paused æ—¶å€™å‘ç”Ÿçš„ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥è¿˜æ˜¯ started çŠ¶æ€ã€‚ 12345678910111213141516171819/*** åŽç»­è€ƒè™‘åšä¸ªæŠ€æ”¹æŠŠå®ƒåŠ åˆ°[BaseDialogFragment]é‡Œé¢*/fun showWithLifecycle(fragmentActivity: FragmentActivity, tag: String? = null) &#123; val liveData = showWithLifecycleLiveData ?: MutableLiveData&lt;Boolean&gt;().also &#123; it.observe(fragmentActivity) &#123; this.show(fragmentActivity.supportFragmentManager, tag) &#125; showWithLifecycleLiveData = it &#125; liveData.value = true&#125; onSaveInstanceStateä¿å­˜åˆ†æž https://juejin.cn/post/6995791487426363405 çŠ¶æ€æ¢å¤ https://www.jianshu.com/p/58579627f70a https://juejin.cn/post/7057564670567120903 can not perform this action after onsaveinstancestate dialogfragment show developer -&gt; ä¸ä¿ç•™æ´»åŠ¨ onSaveInstanceStateä»¥ä¸‹5ç§æƒ…å†µè¢«è°ƒç”¨ï¼š 1ã€å½“ç”¨æˆ·æŒ‰ä¸‹æ‰‹æœºhomeé”®çš„æ—¶å€™ã€‚ 2ã€é•¿æŒ‰æ‰‹æœºhomeé”®æˆ–è€…æŒ‰ä¸‹èœå•é”®æ—¶ã€‚ 3ã€æ‰‹æœºæ¯å±æ—¶ã€‚ 4ã€FirstActivityå¯åŠ¨SecondActivityï¼ŒFirstActivityå°±ä¼šè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰“å¼€æ–°Activityæ—¶ï¼ŒåŽŸActivityå°±ä¼šè°ƒç”¨ã€‚ 5ã€é»˜è®¤æƒ…å†µä¸‹æ¨ªç«–å±åˆ‡æ¢æ—¶ã€‚ æ‰“å¼€Activity -&gt; Home -&gt; å†ä»ŽåŽå°æ‹¿å‡ºæ¥ æ—¢ç„¶çŠ¶æ€çš„ä¿å­˜ä¸Žæ¢å¤éƒ½å¿…é¡»è¦æŠŠFragmentå¸¦ä¸Šï¼Œé‚£ä¹ˆä¸€æ—¦å½“Fragmentçš„çŠ¶æ€å·²ä¿å­˜è¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥å†æ”¹å˜Fragmentçš„çŠ¶æ€ã€‚å› æ­¤FragmentManagerçš„æ¯ä¸€ä¸ªæ“ä½œå‰ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥æ£€æŸ¥çŠ¶æ€æ˜¯å¦ä¿å­˜è¿‡äº†ï¼š 12345678910private void checkStateLoss() &#123; if (mStateSaved) &#123; throw new IllegalStateException( &quot;Can not perform this action after onSaveInstanceState&quot;); &#125; if (mNoTransactionsBecause != null) &#123; throw new IllegalStateException( &quot;Can not perform this action inside of &quot; + mNoTransactionsBecause); &#125;&#125; 12345678910111213141516171819/** * This is the same as &#123;@link #onSaveInstanceState&#125; but is called for activities * created with the attribute &#123;@link android.R.attr#persistableMode&#125; set to * &lt;code&gt;persistAcrossReboots&lt;/code&gt;. The &#123;@link android.os.PersistableBundle&#125; passed * in will be saved and presented in &#123;@link #onCreate(Bundle, PersistableBundle)&#125; * the first time that this activity is restarted following the next device reboot. * * @param outState Bundle in which to place your saved state. * @param outPersistentState State which will be saved across reboots. * * @see #onSaveInstanceState(Bundle) * @see #onCreate * @see #onRestoreInstanceState(Bundle, PersistableBundle) * @see #onPause */public void onSaveInstanceState(@NonNull Bundle outState, @NonNull PersistableBundle outPersistentState) &#123; onSaveInstanceState(outState);&#125; ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªå¼‚å¸¸ https://blog.csdn.net/lzf_acraftsman/article/details/108831949 https://juejin.cn/post/6844903458605105160 fragmenté‡å åŽŸå›  Fragmentæ‡’åŠ è½½Fragmentå’ŒViewPagerä¸€èµ·ä½¿ç”¨ä¼šæœ‰ä¸ªé¢„åŠ è½½æœºåˆ¶ï¼Œä¼šæŠŠæ—ç™½çš„Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å‰åŠæ®µå…ˆæ‰§è¡Œï¼Œç„¶åŽæ‰§è¡Œè‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• åœ¨é¡¹ç›®ç»ˆä»Žå…¶ä»–é¡µé¢å›žåˆ°MainAcitivtyçš„æ—¶å€™ï¼Œä¸‰ä¸ªé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½è·‘äº†ä¸€é 123456 D/FinanceFragment Test: onStart()D/WealthFragment Test: onStart()D/MineFragment Test: onStart()D/FinanceFragment Test: onResume()D/WealthFragment Test: onResume()D/MineFragment Test: onResume() 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475 private boolean isPrepared; //åˆ¤æ–­viewæ˜¯å¦åŠ è½½å®Œæˆ,åœ¨è§†å›¾æœªåˆå§‹åŒ–çš„æ—¶å€™ï¼Œåœ¨lazyLoadå½“ä¸­å°±ä½¿ç”¨çš„è¯ï¼Œå°±ä¼šæœ‰ç©ºæŒ‡é’ˆçš„å¼‚å¸¸ private boolean isVisible; //åˆ¤æ–­å½“å‰Fragmentæ˜¯å¦å¯è§çŠ¶æ€,æ ‡å¿—å·²ç»åˆå§‹åŒ–å®Œæˆï¼Œå› ä¸ºsetUserVisibleHintæ˜¯åœ¨onCreateViewä¹‹å‰è°ƒç”¨çš„ @Override public void onViewCreated(View view, @Nullable Bundle savedInstanceState) &#123; super.onViewCreated(view, savedInstanceState); isPrepared = true; lazyLoad(); &#125; @Nullable @Override public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) &#123;// Log.d(TAG + &quot; Test&quot;, &quot; onCreateView()&quot;); if (rootView == null) &#123; int view = setLayoutId(); if (view != 0) &#123; rootView = inflater.inflate(view, container, false); &#125; &#125; else &#123; ViewGroup parent = (ViewGroup) rootView.getParent(); if (parent != null) &#123; parent.removeView(rootView); &#125; &#125; initView(rootView); return rootView; &#125; // http://www.10tiao.com/html/565/201702/2247483988/1.html // æ ‡å¿—ä½ï¼Œæ ‡å¿—å·²ç»åˆå§‹åŒ–å®Œæˆï¼Œå› ä¸ºsetUserVisibleHintæ˜¯åœ¨onCreateViewä¹‹å‰è°ƒç”¨çš„ï¼Œ // åœ¨è§†å›¾æœªåˆå§‹åŒ–çš„æ—¶å€™ï¼Œåœ¨lazyLoadå½“ä¸­å°±ä½¿ç”¨çš„è¯ï¼Œå°±ä¼šæœ‰ç©ºæŒ‡é’ˆçš„å¼‚å¸¸ private boolean isPrepared; //æ ‡å¿—å½“å‰é¡µé¢æ˜¯å¦å¯è§ private boolean isVisible; @Override public void setUserVisibleHint(boolean isVisibleToUser) &#123; super.setUserVisibleHint(isVisibleToUser);// Log.d(TAG + &quot; Test&quot;, &quot; setUserVisibleHint() is Visible : ? &quot; + isVisibleToUser); if (getUserVisibleHint()) &#123; isVisible = true; onVisible(); &#125; else &#123; isVisible = false; onInvisible(); &#125; &#125; protected void onInvisible() &#123; &#125; protected void onVisible() &#123; lazyLoad(); &#125; private void lazyLoad() &#123; if (!isVisible || !isPrepared) &#123; return; &#125; requestData(); &#125; /** * è¯·æ±‚æ•°æ® */ protected void requestData() &#123; Log.d(TAG + &quot; Test&quot;, &quot; requestData &quot;); &#125; http://www.10tiao.com/html/565/201702/2247483988/1.html Activity dialogFragment çš„äº‹ä»¶å›žè°ƒ12345678910111213141516interface ISelectListener &#123; fun getItemPosition(position: Int)&#125;var mListener: ISelectListener? = nulloverride fun onAttach(context: Context) &#123; super.onAttach(context) if (parentFragment is ISelectListener)&#123; mListener = parentFragment as ISelectListener &#125;else if (context is ISelectListener) &#123; mListener = context &#125; else &#123; throw RuntimeException(context!!.toString() + &quot; must implement ISelectListener&quot;) &#125;&#125; https://developer.android.com/guide/components/fragments.html onHiddenChangedåˆ‡æ¢åˆ·æ–° ä½¿ç”¨hide()/show()å‘çŽ°ç”Ÿå‘½å‘¨æœŸåŸºæœ¬ä¸æ‰§è¡Œï¼Œä¸è¿‡å¯ä»¥ç”¨åˆ°è¿™ä¸ªonHiddenChanged(); çœ‹ä¸‹æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸ; ä»Ž SecondFragment é¡µé¢å¼€å§‹åˆ° -&gt;FirstFragment 07-18 15:53:25.128 7758-7758/com.mineutils D/SecondFragment: onAttach(Context context)07-18 15:53:25.129 7758-7758/com.mineutils D/SecondFragment: onCreate()07-18 15:53:25.142 7758-7758/com.mineutils D/SecondFragment: onCreateView()07-18 15:53:25.148 7758-7758/com.mineutils D/SecondFragment: onViewCreated onActivityCreated() onStart()â€‹ onResume() 07-18 15:53:34.200 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden true07-18 15:53:34.207 7758-7758/com.mineutils D/FirstFragment: onCreateView()07-18 15:53:34.208 7758-7758/com.mineutils D/FirstFragment: onViewCreated onActivityCreated()â€‹ onStart() 07-18 15:53:53.968 7758-7758/com.mineutils D/FirstFragment: onHiddenChanged hidden true07-18 15:53:53.968 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden false https://blog.csdn.net/cml_blog/article/details/41411451 å¯¼èˆªæ https://wizardforcel.gitbooks.io/w3school-android/content/77.html https://juejin.im/post/5901b564570c35005804424b Fragment not attached to a contexthttps://weidianhuang.medium.com/android-fragment-not-attached-to-a-context-24d00fac4f3d","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"Fragment","slug":"Fragment","permalink":"https://noteforme.github.io/tags/Fragment/"}]},{"title":"LC_TREE08","slug":"LC-TREE08","date":"2022-09-11T07:39:49.000Z","updated":"2023-01-02T03:31:39.080Z","comments":true,"path":"2022/09/11/LC-TREE08/","link":"","permalink":"https://noteforme.github.io/2022/09/11/LC-TREE08/","excerpt":"","text":"101. å¯¹ç§°äºŒå‰æ ‘å±‚åºéåŽ†å±‚åºéåŽ†æ˜¯æ²¡æ³•å®žçŽ°çš„ 123456789101112131415161718192021 fun isSymmetric3(root: TreeNode?): Boolean &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size for (i in 0 until layerSize) &#123;// val lastIndex = layerSize - 1 - i // è¿™æ ·ä¸å¯ä»¥,pollå–å‡ºå…ƒç´ åŽï¼Œå°±å°‘äº†å…ƒç´ è¶Šç•Œäº† val headNode = queue.poll() val lastNode = queue.lastOrNull() if (headNode.`val` != lastNode?.`val`) &#123; return false &#125; headNode.left?.let &#123; queue.offer(it) &#125; headNode.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return true &#125; é€’å½’// ä¸èƒ½åˆ¤æ–­true,åˆ¤æ–­trueç›´æŽ¥è¿”å›žäº†ï¼Œåˆ¤æ–­falseè¿”å›žæ²¡é—®é¢˜ï¼Œtrueè¿”å›žå°±ä¸ä¼šå¾€ä¸‹èµ°äº† 12345678910private fun leftRightSymmetric(nodeLeft: TreeNode?, nodeRight: TreeNode?): Boolean &#123; if (nodeLeft?.`val` == nodeRight?.`val`) &#123; // ä¸èƒ½åˆ¤æ–­true,åˆ¤æ–­trueç›´æŽ¥è¿”å›žäº†ï¼Œåˆ¤æ–­falseè¿”å›žæ²¡é—®é¢˜ï¼Œtrueè¿”å›žå°±ä¸ä¼šå¾€ä¸‹èµ°äº† return true &#125; else if (nodeLeft == nodeRight) &#123; // = null return true &#125; leftRightSymmetric(nodeLeft?.left, nodeRight?.right) leftRightSymmetric(nodeLeft?.right, nodeRight?.left) return false&#125; https://programmercarl.com/0101.%E5%AF%B9%E7%A7%B0%E4%BA%8C%E5%8F%89%E6%A0%91.html#%E9%80%92%E5%BD%92%E6%B3%95 ä»Žæ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘å¼€å§‹ï¼Œæ·±åº¦éåŽ†æ¯”è¾ƒ 123456789101112131415161718fun isSymmetric(root: TreeNode?): Boolean &#123; return leftRightSymmetric(root?.left, root?.right)&#125;private fun leftRightSymmetric(nodeLeft: TreeNode?, nodeRight: TreeNode?): Boolean &#123; if (nodeLeft == null &amp;&amp; nodeRight != null) &#123; return false &#125; else if (nodeLeft != null &amp;&amp; nodeRight == null) &#123; return false &#125; else if (nodeLeft?.`val` != nodeRight?.`val`) &#123; return false &#125; else if (nodeLeft == null &amp;&amp; nodeRight == null) &#123; return true //è¿™é‡Œéœ€è¦ï¼Œå¦åˆ™å°±é€’å½’ æº¢å‡ºäº†,å¦‚æžœæ ¹èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹ä¸ºnull,é€€å‡ºä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ &#125; val leftFlag = leftRightSymmetric(nodeLeft?.left, nodeRight?.right) val rightFlag = leftRightSymmetric(nodeLeft?.right, nodeRight?.left) return leftFlag &amp;&amp; rightFlag&#125; é˜Ÿåˆ— é˜Ÿåˆ—ï¼Œä¸€ç›´å‘ä¸‹æŒ‰ç…§å¯¹ç§°çš„æ¡ä»¶æ·»åŠ  12345678910111213141516171819202122fun isSymmetric1(root: TreeNode?): Boolean &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; root.left?.let &#123; queue.offer(it) &#125; // å®˜æ–¹è§£æ³•ä¸­ï¼Œæ ¹èŠ‚ç‚¹å…¥é˜Ÿ2æ¬¡ä¹Ÿå¯ä»¥ root.right?.let &#123; queue.offer(it) &#125; &#125; while (queue.isNotEmpty()) &#123; val node1 = queue.poll() val node2 = queue.poll() if(node1==null&amp;&amp;node2==null)&#123; // ä¸€å¼€å§‹æ²¡å†™è¿™ä¸ªæ¡ä»¶ï¼Œæç¤ºè¶…å‡ºæ—¶é—´é™åˆ¶ return true &#125; if (node1?.`val` != node2?.`val`) &#123; return false &#125; queue.offer(node1?.left) // ä¸¤è¾¹çš„èŠ‚ç‚¹æ¯”è¾ƒ queue.offer(node2?.right) queue.offer(node1?.right) //ä¸­é—´çš„èŠ‚ç‚¹æ¯”è¾ƒ queue.offer(node2?.left) &#125; return true&#125; æ ˆä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦ä¿è¯ä½ç½®é è¿‘ 100. ç›¸åŒçš„æ ‘é€’å½’12345678910fun isSameTree(p: TreeNode?, q: TreeNode?): Boolean &#123; if (p == null &amp;&amp; q != null) &#123; return false &#125; else if (p != null &amp;&amp; q == null) &#123; return false &#125; else if (p == null &amp;&amp; q == null) &#123; return true &#125; return p?.`val` == q?.`val` &amp;&amp; isSameTree(p?.left, q?.left) &amp;&amp; isSameTree(p?.right, q?.right)&#125; é˜Ÿåˆ— 1234567891011121314151617181920212223242526fun isSameTree1(p: TreeNode?, q: TreeNode?): Boolean &#123; if (p == null &amp;&amp; q != null) &#123; return false &#125; else if (p != null &amp;&amp; q == null) &#123; return false &#125; val queue = LinkedList&lt;TreeNode&gt;() queue.offer(p) queue.offer(q) while (queue.isNotEmpty()) &#123; val node1 = queue.poll() val node2 = queue.poll() if (node1 == null &amp;&amp; node2 == null) &#123; // continueåŽï¼Œå› ä¸ºnull,å°±ä¸ä¼šåŠ å…¥æ–°çš„èŠ‚ç‚¹ continue &#125; if (node1?.`val` != node2?.`val`) &#123; return false &#125; queue.offer(node1?.left) queue.offer(node2?.left) queue.offer(node1?.right) queue.offer(node2?.right) &#125; return true&#125; 572. å¦ä¸€æ£µæ ‘çš„å­æ ‘123456789101112131415161718192021222324fun isSubtree(root: TreeNode?, subRoot: TreeNode?): Boolean &#123; if (root == null &amp;&amp; subRoot == null) &#123; return true &#125; else if (root == null &amp;&amp; subRoot != null) &#123; return false &#125; else if (root != null &amp;&amp; subRoot == null) &#123; return false &#125; return isSameTree(root, subRoot) || isSubtree(root?.left, subRoot) || isSubtree(root?.right, subRoot) //subRootå’Œrootç›¸åŒ,subRootå’Œrootå·¦å­æ ‘ç›¸åŒï¼ŒsubRootå’Œå³å­æ ‘ç›¸åŒ&#125;private fun isSameTree(node1: TreeNode?, node2: TreeNode?): Boolean &#123; if (node1 == null &amp;&amp; node2 == null) &#123; return true &#125; else if (node1 == null &amp;&amp; node2 != null) &#123; return false &#125; else if (node1 != null &amp;&amp; node2 == null) &#123; return false &#125; return node1?.`val` == node2?.`val` &amp;&amp; isSameTree(node1?.left, node2?.left) &amp;&amp; isSameTree( node1?.right, node2?.right )&#125; 222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°DFS æ™®é€šäºŒå‰æ ‘è§£æ³•123456fun countNodes(root: TreeNode?): Int &#123; if (root == null) return 0 val leftCount = countNodes(root.left) val rightCount = countNodes(root.right) return leftCount + rightCount + 1&#125; BFS1234567891011121314151617fun countNodes1(root: TreeNode?): Int &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; var count = 0 while (queue.isNotEmpty()) &#123; val size = queue.size for (i in 0 until size) &#123; val treeNode = queue.poll() count++ treeNode.left?.let &#123; queue.offer(it) &#125; treeNode.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return count&#125; DFS å®Œå…¨äºŒå‰æ ‘ç‰¹æ€§ä¸€å¼€å§‹æ‰“ç®—ç”¨å…ˆåºéåŽ†ï¼Œä½†æ˜¯è¿™æ ·ä¸è¡Œ, å¦‚æžœä¸€é¢—æ ‘ æ˜¯å¹³è¡¡çš„ï¼Œæ°¸è¿œæ˜¯å¾—åˆ° 1, æƒ³äº†ä¸€ä¸‹ï¼Œè¿™ç§ä¹Ÿä¸å±žäºŽ å…ˆåºéåŽ† 12345678910111213fun countNodes(root: TreeNode?): Int &#123; val depth = 0 return postTraversal(root, depth)&#125;private fun postTraversal(root: TreeNode?, depth: Int): Int &#123; if (isBalanced(root)) &#123; return 2 shl (depth - 1) &#125; val leftNums = postTraversal(root?.left, depth + 1) val rightNums = postTraversal(root?.right, depth + 1) return leftNums + rightNums + 1&#125; å…ˆåºéåŽ†123456789101112131415161718192021fun countNodes(root: TreeNode?): Int &#123; if (root == null) return 0 var leftNode = root.left var depthLeft = 0 //å·¦å­æ ‘æ·±åº¦ while (leftNode != null) &#123; leftNode = leftNode.left depthLeft++ &#125; var rightNode = root.right var depthRight = 0 while (rightNode != null) &#123; rightNode = rightNode.right depthRight++ &#125; if (depthLeft == depthRight) &#123; return (2 shl depthLeft) - 1 // èŠ‚ç‚¹æ•° &#125; val leftNums = countNodes(root.left) val rightNums = countNodes(root.right) return leftNums + rightNums + 1&#125; åŽåºéåŽ†123456789101112131415161718192021fun countNodes3(root: TreeNode?): Int &#123; if (root == null) return 0 var leftNode = root.left var depthLeft = 0 //å·¦å­æ ‘æ·±åº¦ while (leftNode != null) &#123; leftNode = leftNode.left depthLeft++ &#125; var rightNode = root.right var depthRight = 0 while (rightNode != null) &#123; rightNode = rightNode.right depthRight++ &#125; val leftNums = countNodes(root.left) val rightNums = countNodes(root.right) if (depthLeft == depthRight) &#123; return (2 shl depthLeft) - 1 // èŠ‚ç‚¹æ•° &#125; return leftNums + rightNums + 1&#125; 110. å¹³è¡¡äºŒå‰æ ‘ä¸€å¼€å§‹é”™è¯¯çš„è§£ç­”æ˜¯è¿™æ ·çš„ 123456789101112131415 fun isBalanced(root: TreeNode?): Boolean &#123; return postTraversal(root) != -1 &#125; private fun postTraversal(node: TreeNode?): Int &#123; if (node == null) return 0 val leftDepth = postTraversal(node.left) val rightDepth = postTraversal(node.right) val isBalance = Math.abs(leftDepth - rightDepth) &lt;= 1 if (isBalance) &#123; return Math.max(leftDepth, rightDepth) + 1 &#125; return -1 &#125;&#125; è¿™é‡Œé—®é¢˜æ˜¯ return -1ï¼Œä½œä¸ºçˆ¶èŠ‚ç‚¹çš„æ·±åº¦è¿”å›žç»™äº† depthï¼Œç„¶åŽç»§ç»­è®¡ç®— Math.abs(leftDepth - rightDepth) &lt;= 1ï¼Œå‡ºçŽ°äº†é—®é¢˜ æ”¹è¿›è§£æ³• 1234567891011121314151617fun isBalanced(root: TreeNode?): Boolean &#123; return postTraversal(root) != -1&#125;private fun postTraversal(node: TreeNode?): Int &#123; if (node == null) return 0 val leftDepth = postTraversal(node.left) val rightDepth = postTraversal(node.right) if (leftDepth == -1 || rightDepth == -1) &#123; // å­èŠ‚ç‚¹å·²ç»æœ‰ä¸æ˜¯å¹³è¡¡çš„èŠ‚ç‚¹ ç›´æŽ¥è¿”å›žï¼Œæ¥åˆ¤æ–­ return -1 &#125; val isBalance = Math.abs(leftDepth - rightDepth) &lt;= 1 if (isBalance) &#123; return Math.max(leftDepth, rightDepth) + 1 &#125; return -1&#125; éšæƒ³å½•è¿­ä»£éåŽ†ï¼Œçœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œçœ‹èµ·æ¥æ˜¯ç»Ÿä¸€è§£æ³•. https://programmercarl.com/0110.%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91.html#%E9%A2%98%E5%A4%96%E8%AF%9D 257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„éšè—å›žæº¯è¿‡ç¨‹è¿™ä¸€é¢˜ æ²¡ç†è§£é€å­—ç¬¦ä¸²æ€Žä¹ˆå½¢æˆçš„å’Œå›žæº¯çš„, ç”¨åˆ°äº†å…ˆåºéåŽ†ï¼Œ https://www.bilibili.com/video/BV1ZG411G7Dh è§†é¢‘åŒ…å«äº†å›žæº¯è¿‡ç¨‹ å¯ä»¥çœ‹ä¸‹éšæƒ³å½•å›žæº¯è¿‡ç¨‹ 12345678910111213141516171819202122232425262728fun binaryTreePaths(root: TreeNode?): List&lt;String&gt; &#123; val result = LinkedList&lt;String&gt;() if (root == null) return result dfs(root, result, root.`val`.toString()) return result&#125;/** * https://www.youtube.com/watch?v=swG70SQBJ-A * * 1. Stringä¸èƒ½ç”¨ StringBuilder,å­˜åœ¨å¼•ç”¨ä¼ é€’é—®é¢˜ï¼Œä¼šè¾“å‡º * [&quot;1-&gt;2-&gt;5&quot;,&quot;1-&gt;2-&gt;5-&gt;3&quot;] * * 2. åœ¨å…ˆåºä½ç½® valå­˜åˆ°pathä¹Ÿæœ‰é—®é¢˜,å¤´èŠ‚ç‚¹ä¼šå­˜åœ¨é‡å¤çš„æƒ…å†µ [&quot;1-&gt;1-&gt;2-&gt;5&quot;,&quot;1-&gt;1-&gt;2-&gt;5-&gt;3&quot;] */private fun dfs(node: TreeNode?, result: LinkedList&lt;String&gt;, path: String) &#123; if (node == null) return if (node.left == null &amp;&amp; node.right == null) &#123; result.add(path) &#125; if (node.left != null) &#123; dfs(node.left, result, &quot;$path-&gt;$&#123;node.left.`val`&#125;&quot;) &#125; if (node.right != null) &#123; dfs(node.right, result, &quot;$path-&gt;$&#123;node.right.`val`&#125;&quot;) &#125;&#125; ä¸Šé¢2çš„æƒ…å†µæ¼”ç¤º 12345678910111213private fun dfs(node: TreeNode?, result: LinkedList&lt;String&gt;, path: String?) &#123; if (node == null) return val mPath = &quot;$path-&gt; $&#123;node.`val`&#125;&quot; if (node.left == null &amp;&amp; node.right == null) &#123; result.add(mPath) &#125; if (node.left != null) &#123; dfs(node.left, result, mPath) &#125; if (node.right != null) &#123; dfs(node.right, result, mPath) &#125;&#125; ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œå›žæº¯éšè—åœ¨å‚æ•°é‡Œé¢. æ˜¾ç¤ºå›žæº¯è¿™æ˜¯éšæƒ³å½•çš„ä»£ç ï¼ŒäºŒåˆ·å¯ä»¥è‡ªå·±å†™, 1234567891011121314151617181920212223242526272829303132fun binaryTreePaths(root: TreeNode?): List&lt;String&gt;? &#123; val res: MutableList&lt;String&gt; = ArrayList() if (root == null) &#123; return res &#125; val paths: MutableList&lt;Int&gt; = ArrayList() traversal(root, paths, res) return res&#125;private fun traversal(root: TreeNode, paths: MutableList&lt;Int&gt;, res: MutableList&lt;String&gt;) &#123; paths.add(root.`val`) // å¶å­ç»“ç‚¹ if (root.left == null &amp;&amp; root.right == null) &#123; // ç¢°åˆ°å¶å­èŠ‚ç‚¹ï¼Œå¼€å§‹æŠŠpathéåŽ†æ”¾è¿›stringä¸­ // è¾“å‡º val sb = StringBuilder() for (i in 0 until paths.size - 1) &#123; sb.append(paths[i]).append(&quot;-&gt;&quot;) &#125; sb.append(paths[paths.size - 1]) //ä¹Ÿå¯ä»¥æ”¾åˆ°ä¸Šé¢ä¸€èµ·å†æŠŠ&quot;-&gt;&quot; åˆ é™¤ res.add(sb.toString()) return &#125; if (root.left != null) &#123; traversal(root.left, paths, res) paths.removeAt(paths.size - 1) // å›žæº¯ &#125; if (root.right != null) &#123; traversal(root.right, paths, res) paths.removeAt(paths.size - 1) // å›žæº¯ &#125;&#125; 1paths.removeAt(paths.size - 1) æœ€åˆè¿™é‡Œæ²¡ç†è§£ï¼Œéƒ½åˆ é™¤äº†ï¼Œä¸ºä»€ä¹ˆ,ä¸Šé¢è¿˜èƒ½éåŽ†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå…¶å®žé€’å½’æ˜¯ä¸€è‡´å…ˆèµ°çš„ï¼Œç¢°åˆ°å¶å­èŠ‚ç‚¹çš„æ—¶å€™ï¼ŒéåŽ†path, æœ€åŽæ‰å¼€å§‹ paths.removeAt(paths.size - 1) å›žæº¯ åˆ°ä¸Šé¢. https://programmercarl.com/0257.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%89%80%E6%9C%89%E8%B7%AF%E5%BE%84.html https://www.bilibili.com/video/BV1ZG411G7Dh è¿­ä»£æ³• åŽé¢å†è¯´å§ 404. å·¦å¶å­ä¹‹å’Œè¿™ä¸€é¢˜å’Œã€ 222 å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‘å¾ˆåƒï¼Œè¿™é‡Œæ˜¯æ™®é€šçš„äºŒå‰æ ‘ï¼Œæ‰€ä»¥æˆ‘çš„æƒ³æ³•å°±å‰ä¸¤ç§åšæ³• åŽåºéåŽ† å±‚åºéåŽ† æŠŠæ ¹èŠ‚ç‚¹æ¢æˆå·¦å­æ ‘çš„èŠ‚ç‚¹ çœ‹é”™äº†é¢˜ç›®ï¼Œå…¶å®žæ˜¯å·¦å­æ ‘å¶å­å€¼çš„å’Œ https://programmercarl.com/0404.%E5%B7%A6%E5%8F%B6%E5%AD%90%E4%B9%8B%E5%92%8C.html#%E6%80%9D%E8%B7%AF åªçœ‹äº†éšæƒ³å½•é¢˜è§£ï¼Œè‡ªå·±è¿™æ ·å†™çš„ä»£ç  é€’å½’æ³•12345678910111213141516fun sumOfLeftLeaves(root: TreeNode?): Int &#123; return dfsLeaves(root, 0)&#125;/** * @param direction 0 å³å­æ ‘ï¼Œ 1ï¼šå·¦å­æ ‘ */private fun dfsLeaves(node: TreeNode?, direction: Int): Int &#123; if (node == null) return 0 if (node.left == null &amp;&amp; node.right == null &amp;&amp; direction == 1) &#123; // å·¦å³å­æ ‘ä¸ºç©ºï¼Œæ ¹æ®çˆ¶äº²èŠ‚ç‚¹çš„ä¼ å…¥ï¼Œåˆ¤æ–­å®ƒæ˜¯å·¦å­æ ‘ return node.`val` //è¿™ç§æƒ…å†µè¿”å›žå€¼ï¼Œæ ¹æ®åŽåºè§„åˆ™ï¼Œä¸Šå±‚èŠ‚ç‚¹å åŠ  &#125; val leftCount = dfsLeaves(node.left, 1) val rightCount = dfsLeaves(node.right, 0) return leftCount + rightCount&#125; çœ‹äº†éšæƒ³å½•è§£æ³•ï¼Œå¯ä»¥ç›´æŽ¥çœ‹æ›´ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼Œå°±ä¸ç”¨å†ä¼ å…¥æ–¹å‘äº† 123if (root-&gt;left != NULL &amp;&amp; root-&gt;left-&gt;left == NULL &amp;&amp; root-&gt;left-&gt;right == NULL) &#123; leftValue = root-&gt;left-&gt;val;&#125; è¿­ä»£æ³• éšæƒ³å½•ç»Ÿä¸€è¿­ä»£æ³• 513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼æƒ³äº†ä¸‹ å±‚åºéåŽ†å¯ä»¥è§£å†³ é€’å½’æ³•è¿˜æ²¡æƒ³é“ï¼Œåˆ°äº†æœ€åº•å±‚ï¼Œæ²¡æƒ³åˆ°å¦‚ä½•åˆ¤æ–­ å“ªä¸ªæ˜¯æœ€å·¦è¾¹çš„ã€‚ BFSå…ˆå­˜ä¸‹æ¥æ¯ä¸€å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒçŸ¥é“queueä¸ºç©ºï¼Œé‚£ä¹ˆæœ€åŽä¸€å±‚çš„å¤´èŠ‚ç‚¹å°±æ˜¯è¦è¿”å›žçš„. 1234567891011121314151617fun findBottomLeftValue1(root: TreeNode?): Int &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; var leftNodeVal = root?.`val` while (queue.isNotEmpty()) &#123; val size = queue.size leftNodeVal = queue.peek().`val` //æ¯ä¸€å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ for (i in 0 until size) &#123; val node = queue.poll() node?.left?.let &#123; queue.offer(it) &#125; node?.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return leftNodeVal!! // queueä¸ºemptyçš„æ—¶å€™é€€å‡ºï¼Œæ­¤æ—¶ä¸Šä¸€å±‚å­˜çš„èŠ‚ç‚¹å°±æ˜¯æœ€å·¦è¾¹çš„èŠ‚ç‚¹&#125; DFSMy idea ä¸€å¼€å§‹ä»¥ä¸ºæ ‘çš„å±‚çº§é‡Œï¼Œæ ‘çš„å·¦è¾¹çš„å€¼å°äºŽå³è¾¹ï¼Œæ¥å¾—å‡ºç»“æžœï¼Œä½†æ˜¯è¿™æ˜¯äºŒå‰æ ‘ï¼Œä¸æ˜¯å¹³è¡¡å½¢çš„ï¼Œå³ä½¿å¹³è¡¡è¿™ç§æ€è·¯ä¹Ÿä¸ä¸€å®šå¯¹. ç„¶åŽåˆçœ‹äº†æ ‘ç»“æž„,æƒ³äº†ä¸‹å¯ä»¥ç”¨ inorder traversal ,ä¸­åºéåŽ†, å±‚æ•°æœ€æ·±ï¼Œç„¶åŽæœ€å…ˆå¾—åˆ°çš„æ•°æ®å°±æ˜¯è¦æ‹¿åˆ°çš„ç»“æžœ. æƒ³ä¸‹é¢8è‚¯å®šæ˜¯åŽé¢éåŽ†åˆ°çš„ ä¸€å¼€å§‹ä¸çŸ¥é“leetcodeå¯ä»¥ç”¨å…¨å±€å˜é‡ï¼Œç”¨å¯¹è±¡è¿”å›žè¿˜å¾ˆéº»çƒ¦ï¼Œåˆ æŽ‰äº† åˆ¤æ–­å±‚çº§ï¼Œå¦‚æžœå¤§äºŽä¹‹å‰çš„æ·±åº¦ï¼Œé‚£ä¹ˆå°±æ›´æ–°æ·±åº¦å’Œå€¼ ä¸­åºå’ŒåŽåºè‚¯å®šæ²¡é—®é¢˜ï¼Œä½†æ˜¯å…ˆåºä¸ç¡®å®šï¼ˆéšæƒ³å½•è¯´æ˜¯å¯ä»¥çš„ï¼‰è€Œä¸”éšæƒ³å½• depth + 1 å±•å¼€äº†ç”¨å›žæº¯ 12345678910111213141516171819var mDepth = 0 //ä¸€å¼€å§‹ä¸çŸ¥é“leetcodeå¯ä»¥ç”¨å…¨å±€å˜é‡ï¼Œç”¨å¯¹è±¡è¿”å›žè¿˜å¾ˆéº»çƒ¦ï¼Œåˆ æŽ‰äº†var result = -1fun findBottomLeftValue(root: TreeNode?): Int &#123; if (root == null) return 0 inOrderTraversal(root, mDepth) return result&#125;// æœ€å·¦è¾¹çš„èŠ‚ç‚¹æœ€å…ˆè®¿é—®åˆ°private fun inOrderTraversal(node: TreeNode?, depth: Int) &#123; if (node == null) return inOrderTraversal(node.left, depth + 1) if (depth + 1 &gt; mDepth) &#123; // åˆ¤æ–­å±‚çº§ï¼Œå¦‚æžœå¤§äºŽä¹‹å‰çš„æ·±åº¦ï¼Œé‚£ä¹ˆå°±æ›´æ–°æ·±åº¦å’Œå€¼ mDepth = depth + 1 result = node.`val` &#125; inOrderTraversal(node.right, depth + 1)&#125; 112. è·¯å¾„æ€»å’Œè§£å†³æ‰€æœ‰äºŒå‰æ ‘è·¯å¾„çš„é—®é¢˜æ–‡ç«  https://leetcode.cn/problems/path-sum-ii/solution/yi-pian-wen-zhang-jie-jue-suo-you-er-cha-oo63/ è¿™ä¸€é¢˜å’Œ [112. è·¯å¾„æ€»å’Œ] ç±»ä¼¼ ä½¿ç”¨å›žæº¯å†™æ³•ï¼Œå› ä¸ºæ·»åŠ å’Œåˆ é™¤ï¼Œå›žæº¯çš„è§„åˆ™ï¼Œé‚£ä¹ˆæ„Ÿè§‰ç”¨æ ˆæ¯”è¾ƒåˆé€‚. ç»ˆæ­¢æ¡ä»¶å°±æ˜¯ åˆ°è¾¾äº†å¶å­èŠ‚ç‚¹ï¼Œæ­¤æ—¶å¼€å§‹è®¡ç®—å½“å‰è·¯å¾„å’Œ æ˜¯å¦æ»¡è¶³æ¡ä»¶ æ‰‹å†™åˆ¤æ–­æ˜¯å¦æœ‰å·¦å­æ ‘ï¼Œæœ‰çš„è¯ç»§ç»­åˆ¤æ–­ï¼Œåˆç»§ç»­preOrderTraversal, è¿™é‡Œç”¨çš„æ˜¯å…ˆåºéåŽ†,æ–¹æ³•æŸ¥çœ‹æ¡ä»¶ éåŽ†å®Œå¶å­èŠ‚ç‚¹åŽåˆ¤æ–­ï¼Œæ­¤æ—¶è¿™æ¡è·¯å¾„å®Œæˆï¼Œå¼€å§‹å›žæº¯ï¼Œå›žé€€ä¸Šä¸€å±‚preOrderTraversalï¼Œç»§ç»­åˆ¤æ–­å³å­æ ‘ 12345678910111213141516171819202122232425262728293031323334353637fun hasPathSum(root: TreeNode?, targetSum: Int): Boolean &#123; val pathStack = Stack&lt;Int&gt;() if (root != null) &#123; pathStack.push(root.`val`) // rootéœ€è¦æ”¾åœ¨éåŽ†å¤–é¢ï¼Œå¦åˆ™ä¼špushå¤šæ¬¡ &#125;else&#123; return false //æŒ‰ç…§å‰é¢çš„è§„åˆ™ root==null ,0 åº”è¯¥æ˜¯å¯¹çš„,ä½†æ˜¯é¢˜ç›®è¯´false,å°±å•ç‹¬åŠ ä¸€å¥ &#125; return preOrderTraversal(root, targetSum, pathStack) // pathstackå¿…é¡»ä¼ è¿›åŽ»ï¼Œå¦åˆ™æ¯æ¬¡éƒ½new&#125;private fun preOrderTraversal(root: TreeNode?, targetSum: Int, pathStack: Stack&lt;Int&gt;): Boolean &#123; if (root?.left == null &amp;&amp; root?.right == null) &#123; var pathSum = 0 pathStack.forEach &#123; pathSum += it &#125; println(&quot;pathSum $pathSum&quot;) if (pathSum == targetSum) &#123; return true &#125; &#125; if (root?.left != null) &#123; pathStack.push(root.left.`val`) // æœ‰å·¦èŠ‚ç‚¹ï¼ŒåŠ å…¥å½“å‰è·¯å¾„ if (preOrderTraversal(root.left, targetSum, pathStack)) &#123; //æœ‰è·¯å¾„æ˜¯å’Œ == targetSum ç›´æŽ¥è¿”å›ž return true &#125; pathStack.pop() // ä¸ä¼šç›´æŽ¥æŠŠä¸Šé¢çš„å›žé€€äº†ï¼Œéœ€è¦ä¸Šä¸€å¥éåŽ†æ‰§è¡Œå®Œå›žé€€åŽï¼Œæ‰æŠŠè‡ªå·±å›žé€€äº†ï¼Œæ­¤æ—¶å·²ç»åˆ°äº†å¶å­åˆ¤æ–­äº† root?.left == null &amp;&amp; root?.right == null &#125; if (root?.right != null) &#123; pathStack.push(root.right.`val`) if (preOrderTraversal(root.right, targetSum, pathStack)) &#123; //æœ‰è·¯å¾„æ˜¯å’Œ == targetSum ç›´æŽ¥è¿”å›ž return true &#125; pathStack.pop() &#125; return false&#125; 1234567891011121314151617181920212223242526fun hasPathSum1(root: TreeNode?, targetSum: Int): Boolean &#123; if (root == null) &#123; return false //æŒ‰ç…§å‰é¢çš„è§„åˆ™ root==null ,0 åº”è¯¥æ˜¯å¯¹çš„,ä½†æ˜¯é¢˜ç›®è¯´false,å°±å•ç‹¬åŠ ä¸€å¥ &#125; val pathSum = root.`val` return preOrderDFS(root, pathSum, targetSum) // pathstackå¿…é¡»ä¼ è¿›åŽ»ï¼Œå¦åˆ™æ¯æ¬¡éƒ½new&#125;private fun preOrderDFS(node: TreeNode, pathSum: Int, targetSum: Int): Boolean &#123; val nodeValue = node.`val` println(&quot;nodeValue $nodeValue&quot;) if (node.left == null &amp;&amp; node.right == null &amp;&amp; targetSum == pathSum) &#123; return true &#125; if (node.left != null) if (preOrderDFS(node.left, pathSum + node.left.`val`, targetSum)) &#123; // è¿™ä¸ªç›´æŽ¥æ”¾å›žï¼Œå®¹æ˜“å¿˜äº† return true &#125; if (node.right != null) if (preOrderDFS(node.right, pathSum + node.right.`val`, targetSum)) &#123; return true &#125; return false&#125; 113. è·¯å¾„æ€»å’Œ IIå¦‚æžœæ˜¯æ‰¾è·¯å¾„å’Œç­‰äºŽç»™å®štargetçš„è·¯å¾„çš„ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ç”¨æ–°å¢žä¸€ä¸ªä¸´æ—¶å˜é‡cursumæ¥åˆ¤æ–­å½“å‰è·¯å¾„å’Œï¼Œåªéœ€è¦ç”¨ç»™å®šå’Œtargetå‡åŽ»èŠ‚ç‚¹å€¼ï¼Œæœ€ç»ˆç»“æŸæ¡ä»¶åˆ¤æ–­target==0å³å¯ DFSè¿™ä¸€é¢˜çš„æ€è·¯å’Œå‰é¢çš„å·®ä¸å¤šï¼Œå°±æ˜¯ä»–è¦æ±‚è¿”å›žæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„é›†åˆï¼Œæ‰€ä»¥ç›´æŽ¥æ·»åŠ å€¼è§‰å¾—ä¸åˆé€‚ï¼Œé™¤éžå¤šåŠ ä¸€ä¸ªå‚æ•°ï¼Œä¸åŠ ä¸€ä¸ªå‚æ•°å°±ä¸å¥½å¼„ã€‚ //è¿™ç§è§£æ³•è¦æ³¨æ„ å€¼å¼•ç”¨é—®é¢˜ï¼Œå³ä½¿æœ€åˆåŠ å…¥åˆ°resultListçš„pathListæ˜¯æ­£ç¡®çš„ï¼ŒåŽåºçš„å›žé€€ä¹Ÿä¼šæŠŠå€¼ç»™ä¿®æ”¹äº†. 12345678910111213141516171819202122232425262728293031323334val resultList = LinkedList&lt;List&lt;Int&gt;&gt;()fun pathSum(root: TreeNode?, targetSum: Int): List&lt;List&lt;Int&gt;&gt; &#123; if (root == null) return resultList val stackList = Stack&lt;Int&gt;() stackList.add(root.`val`) preDFS(root, stackList, targetSum) return resultList&#125;private fun preDFS(node: TreeNode, pathList: Stack&lt;Int&gt;, targetSum: Int) &#123; val data = node.`val` println(data) if (node.left == null &amp;&amp; node.right == null &amp;&amp; pathSum(pathList) == targetSum) &#123; resultList.add(pathList.toMutableList().toList()) // æ³¨æ„å¼•ç”¨ä¼ é€’ &#125; if (node.left != null) &#123; pathList.push(node.left.`val`) preDFS(node.left, pathList, targetSum) pathList.pop() &#125; if (node.right != null) &#123; pathList.push(node.right.`val`) preDFS(node.right, pathList, targetSum) pathList.pop() &#125;&#125;fun pathSum(pathList: Stack&lt;Int&gt;): Int &#123; var sum = 0 pathList.forEach &#123; sum += it &#125; return sum&#125; è¿™ä¸€é¢˜çš„å®˜æ–¹DFSè§£æ³•æ²¡çœ‹æ‡‚ï¼Œæ„Ÿè§‰ä¸å¥½ç†è§£. è¿™æ˜¯çœ‹å®Œå®˜æ–¹å†™æ³•è‡ªå·±å†™çš„ 1234567891011121314151617181920212223val pathList = LinkedList&lt;Int&gt;()fun pathSum1(root: TreeNode?, targetSum: Int): List&lt;List&lt;Int&gt;&gt; &#123; if (root == null) return resultList val stackList = Stack&lt;Int&gt;() stackList.add(root.`val`) preTraversal(root, targetSum - root.`val`) return resultList&#125;private fun preTraversal(node: TreeNode?, targetSum: Int) &#123; if (node == null) return val data = node.`val` println(data) pathList.offer(node.`val`) if (node.left == null &amp;&amp; node.right == null &amp;&amp; targetSum == 0) &#123; resultList.add(pathList.toMutableList()) &#125; if (node.left != null) preTraversal(node.left, targetSum - node.left.`val`) if (node.right != null) preTraversal(node.right, targetSum - node.right.`val`) pathList.pop()&#125; è¿™æ˜¯å®˜æ–¹è§£æ³•ï¼Œä¹Ÿå¾ˆæ£’ 123456789101112131415161718192021fun pathSum2(root: TreeNode?, targetSum: Int): List&lt;List&lt;Int&gt;&gt; &#123; if (root == null) return resultList val stackList = Stack&lt;Int&gt;() stackList.add(root.`val`) preDFSTraversal(root, targetSum) return resultList&#125;private fun preDFSTraversal(node: TreeNode?, targetSum: Int) &#123; if (node == null) return val data = node.`val` println(data) val targetSum = targetSum - node.`val` pathList.offer(node.`val`) if (node.left == null &amp;&amp; node.right == null &amp;&amp; targetSum == 0) &#123; resultList.add(pathList.toMutableList()) &#125; preDFSTraversal(node.left, targetSum) preDFSTraversal(node.right, targetSum) pathList.pop()&#125; å®˜æ–¹BFS å°±å¾ˆä¸å¥½ç†è§£ æž„å»ºæ ‘å…ˆåºï¼Œä¸­åº åŽåºï¼Œä¸­åº inOrder [L, 3 ,R ] PostOrder [L, R, 3] PreOrder [3,L ,R]å¯ä»¥çœ‹åˆ° åªæœ‰PostOrder ,PreOrderå·¦å³æ˜¯åˆ†ä¸æ¸…çš„. 123456 1 1 2 2 3 3 PreOrder 1,2,3 PreOrder 1,2,3PostOrder 3,2,1 PostOrder 3,2,1 106. ä»Žä¸­åºä¸ŽåŽåºéåŽ†åºåˆ—æž„é€ äºŒå‰æ ‘æ•ˆçŽ‡ä½Žï¼Œä½†æ˜¯å¥½ç†è§£çš„æ–¹æ³• https://www.bilibili.com/video/BV1pp4y1k75Q/ ä¸ºä»€ä¹ˆpostå³å­æ ‘æ˜¯ä»Ž , [i , n-1],å› ä¸ºä»–æ˜¯åŽåºéåŽ†ï¼Œæ‰€ä»¥ä»Ž iå¼€å§‹ 12inorder &#x3D; [9,3,15,20,7]postorder &#x3D; [9,15,7,20,3] æ ¹æ®åŽåºpostorder å¾—åˆ°root 3, ç„¶åŽæ ¹æ®ä¸­åºçŸ¥é“ left branch [9] , right branch [15 , 20 , 7] æ ¹æ® left branch çš„9,å¯ä»¥æŠŠ postorderåŽåºåˆ†æˆ[9], [15 , 20 , 7]ä¸¤éƒ¨åˆ† ç„¶åŽ inorder= [15 , 20 , 7] , postorder=[15 , 20 , 7] ç»§ç»­è¿›è¡ŒéåŽ† æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯è¿™æ · ç¡®å®šç»ˆæ­¢æ¡ä»¶ æž„é€ èŠ‚ç‚¹ æž„é€ å·¦å­æ ‘ï¼Œ æž„é€ å³å­æ ‘ 123456789101112131415161718192021fun buildTree(inorder: IntArray, postorder: IntArray): TreeNode? &#123; if (inorder.isEmpty() &amp;&amp; postorder.isEmpty()) &#123; return null &#125; val node = TreeNode(postorder[postorder.size - 1]) //postorder.sizeç”¨çš„åœ°æ–¹å¤šï¼Œå¯ä»¥æå–å‡ºæ¥ val index = getIndex(node, inorder) node.left = buildTree(inorder.copyOfRange(0, index), postorder.copyOfRange(0, index)) // copyOfRangeæ•°ç»„æ•ˆçŽ‡ä½Ž node.right = buildTree( inorder.copyOfRange(index + 1, inorder.size), postorder.copyOfRange(index, postorder.size - 1) ) // æ³¨æ„copyOfRange(0,2)èŽ·å–çš„æ˜¯index 0,1ä¸¤ä¸ªå…ƒç´  return node&#125;private fun getIndex(node: TreeNode, inorder: IntArray): Int &#123; for (i in inorder.indices) &#123; if (node.`val` == inorder[i]) &#123; return i &#125; &#125; return 0&#125; ä¼˜åŒ–æ–¹æ³•å†™å‡ºæ¥è¿˜æœ‰é—®é¢˜,å…ˆpassè¿™é¢˜è€—æ—¶å¤ªä¹…äº†,è¾¹ç•Œä¸å¥½æŽŒæ¡å¯ä»¥è€ƒè™‘ç”¨æ—¥å¿—è°ƒè¯• è¿˜å¯ä»¥å†çœ‹ä¸‹éšæƒ³å½•çš„è§†é¢‘è®²è§£ https://www.bilibili.com/video/BV1vW4y1i7dn éšæƒ³å½•ä»£ç ä¼˜åŒ–å‰çš„å†™æ³•ï¼Œå’Œä¸Šé¢ä»£ç å†™æ³•æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç”¨äº†C++è¯­è¨€ https://programmercarl.com/0106.%E4%BB%8E%E4%B8%AD%E5%BA%8F%E4%B8%8E%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97%E6%9E%84%E9%80%A0%E4%BA%8C%E5%8F%89%E6%A0%91.html æœ€åˆé”™è¯¯çš„è§£æ³•,ä¸Šé¢çš„è§£æ³•æ•°ç»„æœ‰å˜åŒ–æ‰€ä»¥ endä½ç½®å°±æ˜¯æ•°ç»„çš„å¤§å°ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒï¼Œæ•°ç»„æ˜¯æ²¡å˜åŒ–ï¼Œå°±ä¸èƒ½è¿™æ ·åš 12345678910111213141516171819&#x2F;&#x2F; æ•°ç»„ä¸å˜ï¼Œåªæ”¹å˜ä¸‹æ ‡private fun buildDFSTree( inorder: IntArray, postorder: IntArray, inStart: Int, inEnd: Int, postStart: Int, postEnd: Int): TreeNode? &#123; if (inStart &gt; inEnd || postStart &gt; postEnd || inEnd &lt; 0 || postEnd &lt; 0) &#123; return null &#125; val node &#x3D; TreeNode(postorder[postEnd]) &#x2F;&#x2F;postorder.sizeç”¨çš„åœ°æ–¹å¤šï¼Œå¯ä»¥æå–å‡ºæ¥ val index &#x3D; getIndex(node, inorder) node.left &#x3D; buildDFSTree(inorder, postorder, inStart, index - 1, 0, index - 1) &#x2F;&#x2F;[0,index) å·¦é—­å³å¼€ node.right &#x3D; buildDFSTree(inorder, postorder, index + 1, inEnd, index + 1, postEnd) return node&#125; è¿™ä¸€é¢˜èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œæ€è·¯ä¸éš¾ï¼Œä¸»è¦æ˜¯ åˆ‡å‰²åŽåºçš„æ•°ç»„çš„æ—¶å€™ï¼Œå·¦å³å­æ ‘çš„è¾¹ç•Œå€¼ä¸å¥½å¤„ç†, mapç”¨æ¥å­˜å‚¨ï¼Œä¸­åºvalueå€¼å’Œpositionçš„å¯¹åº”å…³ç³»ï¼Œè¿™é‡Œvalueåº”è¯¥æ˜¯å”¯ä¸€çš„. é‡‡ç”¨çš„æ˜¯å·¦é—­å³é—­çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥inStart &gt; inEnd ä¸èƒ½ç”¨ &gt;=, å¦åˆ™returnäº†ï¼Œå¶å­èŠ‚ç‚¹æ— æ³•æž„é€ å‡ºæ¥. æ ¹æ®åŽåºrootèŠ‚ç‚¹ï¼Œåˆ†å‰²ä¸­åºæ•°ç»„ï¼Œæ‹¿åˆ°å·¦å­æ ‘åŽï¼Œå†ç”¨å·¦å­æ ‘æ ‘çš„åˆ†å‰²åŽåºæ•°ç»„,å› ä¸ºå·¦å­æ ‘çš„é•¿åº¦æ˜¯ä¸€æ ·çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960val map = HashMap&lt;Int, Int&gt;()fun buildTree1(inorder: IntArray, postorder: IntArray): TreeNode? &#123; if (inorder.isEmpty() &amp;&amp; postorder.isEmpty()) &#123; return null &#125; val inStart = 0 val inEnd = inorder.size - 1 val postStart = 0 val postEnd = postorder.size - 1 inorder.forEachIndexed &#123; position, item -&gt; map[item] = position &#125; return buildDFSTree(inStart, inEnd, postStart, postEnd, inorder, postorder)&#125;// æ•°ç»„ä¸å˜ï¼Œåªæ”¹å˜ä¸‹æ ‡private fun buildDFSTree( inStart: Int, inEnd: Int, postStart: Int, postEnd: Int, inorderArr: IntArray, postorderArr: IntArray): TreeNode? &#123; println(&quot; inStart $inStart inEnd $inEnd postStart $postStart postEnd $postEnd&quot;) if (inStart &gt; inEnd || postStart &gt; postEnd) &#123; // å› ä¸ºæ˜¯å·¦é—­å³é—­çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥è¿™é‡Œä¸èƒ½ç”¨ &gt;= ,å¦åˆ™å¶å­èŠ‚ç‚¹æ— æ³•æž„é€ å‡ºæ¥ return null &#125; val node = TreeNode(postorderArr[postEnd]) //postorder.sizeç”¨çš„åœ°æ–¹å¤šï¼Œå¯ä»¥æå–å‡ºæ¥ val index = map[postorderArr[postEnd]] ?: 0 // è¿™é‡Œè¦æ”¹ /** * åˆ‡å‰²å·¦å­æ ‘,è¿™ç§åæ ‡å®šä¹‰å¥½æ›´æ¸…æ™° */ val leftInBegin = inStart val leftInEnd = index - 1 // å·¦é—­å³é—­ val leftPostBegin = postStart val leftPostEnd = postStart + (index - inStart - 1) //(index - inStart) å·¦å­æ ‘çš„é•¿åº¦, å› ä¸ºé€‰æ‹©æ˜¯å·¦é—­å³é—­çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥è‡ªèº«ä¹Ÿ-1 node.left = buildDFSTree( leftInBegin, leftInEnd, leftPostBegin, leftPostEnd, inorderArr, postorderArr ) /** * åˆ‡å‰²å³å­æ ‘ */ val rightInBegin = index + 1 val rightInEnd = inEnd val rightPostBegin = postStart + index - inStart //(index - inStart) è¿™é‡Œä¸ç”¨-1,å› ä¸ºå·¦å­æ ‘çš„å³è¾¹å°±æ˜¯å³å­æ ‘ï¼Œæ‰€ä»¥å³å­æ ‘å°±æ˜¯ä»Žè¿™ä¸ªä½ç½®å¼€å§‹çš„ val rightPostEnd = postEnd - 1 node.right = buildDFSTree( rightInBegin, rightInEnd, rightPostBegin, rightPostEnd, inorderArr, postorderArr ) return node&#125; å®˜æ–¹ å…ˆæž„å»ºå³å­æ ‘çš„æƒ³æ³•å¥½å·§å¦™ï¼Œè¦æ˜¯å…ˆæž„å»ºçš„æ˜¯å·¦å­æ ‘è¿˜æœ‰ä¸ªç¡®å®šåŽåºåŒºé—´çš„æ­¥éª¤ã€‚ https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/solution/cong-zhong-xu-yu-hou-xu-bian-li-xu-lie-gou-zao-14/ å®˜æ–¹è§£æ³•å¾ˆå¦™ï¼Œæ ¹æ®åŽåºæ•°ç»„popï¼Œpost_idxâ€“;å…ˆå¼€å§‹å³å­æ ‘,ç„¶åŽå·¦å­æ ‘,æž„é€ æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œè¿™æ ·ä¸ç”¨æ‰¾åŽåºæ•°ç»„çš„ å¼€å§‹å’Œç»“æŸä½ç½®åœ¨å“ª. åšäº†ä¸Šé¢çš„è§£æ³•ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªåŽåºçš„è¾¹ç•Œå€¼æœ€éš¾æž. è¿™ç§æ–¹å¼ç›´æŽ¥ç»™çœåŽ»äº†ã€‚ ä¸å¾—ä¸è¯´å¤ªå¦™äº† å®˜æ–¹è¿­ä»£æ³•åŽé¢å†çœ‹å§ ã€‚ 654. æœ€å¤§äºŒå‰æ ‘è¾“å…¥ï¼šnums = [3,2,1,6,0,5]è¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1]è§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚ [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚ ,3çš„å·¦è¾¹æ˜¯[]æ²¡æœ‰èŠ‚ç‚¹, å³è¾¹æ˜¯[0,5],æ‰€ä»¥æ ‘ä¹Ÿæ˜¯è¿™æ ·æž„é€ çš„. ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚ ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚ [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚ åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚ ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚ preTraversalæ€è·¯ : å› ä¸ºéœ€è¦æž„é€ ä¸­é—´èŠ‚ç‚¹ï¼Œæ‰€ä»¥ç”¨å…ˆåºéåŽ† å…ˆæ‰¾åˆ°æ•°ç»„ä¸­æœ€å¤§å€¼ï¼Œç„¶åŽåˆ‡å‰²æˆå·¦å³å­æ ‘ã€‚ åœ¨åˆ‡å‰²åŽçš„å·¦å³å­æ ‘ä¸­ç»§ç»­åˆ‡å‰²ï¼Œç›´è‡³æ— æ³•åˆ‡å‰²ä¸ºæ­¢ è‡ªå·±å†™çš„ï¼Œåšæ³•å’Œéšæƒ³å½•ç±»ä¼¼ https://programmercarl.com/0654.%E6%9C%80%E5%A4%A7%E4%BA%8C%E5%8F%89%E6%A0%91.html#java 1234567891011121314151617181920212223fun constructMaximumBinaryTree(nums: IntArray): TreeNode? &#123; return buildTree(nums, 0, nums.size - 1)&#125;private fun buildTree(nums: IntArray, start: Int, end: Int): TreeNode? &#123; println(&quot;buildTree start $start end $end&quot;) if (start &gt; end) return null //åˆ†å‰²çš„å·¦å³ä¸‹æ ‡è¶Šç•Œå°±é€€å‡º ,ä¸èƒ½åŠ ==ï¼Œå¦åˆ™å¶å­èŠ‚ç‚¹æž„é€ ä¸åˆ°. val maxIndex = getMaxIndex(nums, start, end) val node = TreeNode(nums[maxIndex]) // æž„é€ å…ˆåºçš„çˆ¶èŠ‚ç‚¹ node.left = buildTree(nums, start, maxIndex - 1) // æž„é€ å·¦èŠ‚ç‚¹ node.right = buildTree(nums, maxIndex + 1, end) return node&#125;fun getMaxIndex(nums: IntArray, start: Int, end: Int): Int &#123; var maxIndex = start for (i in start..end) &#123; // åœ¨å¯¹åº”çš„æ•°ç»„èŒƒå›´å†…ï¼Œæ‰¾åˆ°æœ€å¤§å€¼ if (nums[maxIndex] &lt; nums[i]) &#123; maxIndex = i &#125; &#125; return maxIndex&#125; å•è°ƒæ ˆå®˜æ–¹è¿˜æœ‰ä¸€ç§å•è°ƒæ ˆçš„å†™æ³•ï¼ŒåŽé¢å†çœ‹å§ https://leetcode.cn/problems/maximum-binary-tree/solution/zui-da-er-cha-shu-by-leetcode-solution-lbeo/ 105. ä»Žå‰åºä¸Žä¸­åºéåŽ†åºåˆ—æž„é€ äºŒå‰æ ‘Idea åªåˆ†å‰²ä¸­åºæ•°ç»„æŒ‰ç…§ä¸Šé¢106å®˜æ–¹å¾ˆå¦™çš„æ€è·¯ï¼Œä¸‹é¢è§£æ³• æ ¹æ®ä¸­åºéåŽ†ã€‚valueå’Œindexæž„é€ hash map,æ–¹ä¾¿åŽé¢èŽ·å–ä¸­åºä½ç½® æ ¹æ®å…ˆåºéåŽ†æ•°ç»„ä»Ž å·¦å­æ ‘åˆ°å³å­æ ‘æž„é€ èŠ‚ç‚¹, è¿™æ ·å°±ä¸ç”¨åˆ†å‰²å…ˆåºæ•°ç»„ï¼Œä¹Ÿæ˜¯å¾ˆéº»çƒ¦çš„ æ ¹æ®å…ˆåºæ•°ç»„çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œåˆ†å‰²ä¸­åºéåŽ†æ•°ç»„ï¼Œæ‹¿åˆ°å·¦å³å­æ ‘ ç„¶åŽæ˜¯é€’å½’åˆ†å‰². 123456789101112131415161718192021val map = HashMap&lt;Int, Int&gt;()var preNodeIndex = 0fun buildTree(preorder: IntArray, inorder: IntArray): TreeNode? &#123; inorder.forEachIndexed &#123; position, item -&gt; // map[item] = position &#125; return buildDFS(preorder, inorder, 0, inorder.size - 1)&#125;private fun buildDFS(preorder: IntArray, inorder: IntArray, inBegin: Int, inEnd: Int): TreeNode? &#123; if (inBegin &gt; inEnd) &#123; return null &#125; val node = TreeNode(preorder[preNodeIndex]) // æ ¹æ®å…ˆåºéåŽ†æ•°ç»„ä»Ž å·¦å­æ ‘åˆ°å³å­æ ‘æž„é€ èŠ‚ç‚¹ val inIndex = map[preorder[preNodeIndex]]!! // æ ¹æ®å…ˆåºæ•°ç»„çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œåˆ†å‰²ä¸­åºéåŽ†æ•°ç»„ï¼Œæ‹¿åˆ°å·¦å³å­æ ‘ println(&quot;$&#123;preorder[preNodeIndex]&#125; inBegin $inBegin inEnd $inEnd&quot;) preNodeIndex++ node.left = buildDFS(preorder, inorder, inBegin, inIndex - 1) node.right = buildDFS(preorder, inorder, inIndex + 1, inEnd) return node&#125; åˆ†å‰²å…ˆåº ä¸­åºæ•°ç»„ æ ¹æ®ä¸­åºæ•°ç»„æž„é€ ï¼Œä½ç½®å’Œå€¼çš„hashmap ã€‚ æ ¹æ®å…ˆåºæ•°ç»„çš„ä¸­èŠ‚ç‚¹ä½ç½®ï¼Œåˆ†å‰²ä¸­åºæ•°ç»„ï¼Œå¾—åˆ°å·¦å³å­æ ‘ã€‚ æ ¹æ®ä¸­åºæ•°ç»„å¾—åˆ°çš„å·¦å­æ ‘çš„é•¿åº¦ï¼Œåˆ†å‰² å…ˆåºæ•°ç»„çš„å·¦å³å­æ ‘. æž„é€ å·¦å³å­æ ‘. å·¦é—­å³é—­çš„æƒ…å†µ 12345678910111213141516171819202122232425262728293031323334353637val map = HashMap&lt;Int, Int&gt;()var preNodeIndex = 0fun buildTree1(preorder: IntArray, inorder: IntArray): TreeNode? &#123; inorder.forEachIndexed &#123; position, item -&gt; map[item] = position // èŽ·å¾— ä¸­åº valueå’Œindex hash map.put(item,position) &#125; return splitPreInOrder(preorder, 0, preorder.size - 1, inorder, 0, inorder.size - 1)&#125;private fun splitPreInOrder( preorderArr: IntArray, preStart: Int, preEnd: Int, inorderArr: IntArray, inStart: Int, inEnd: Int): TreeNode? &#123; println(&quot; preStart $preStart preEnd $preEnd inStart $inStart inEnd $inEnd&quot;) if (preStart &gt; preEnd || inStart &gt; inEnd) return null val inIndex = map[preorderArr[preStart]]!! // åˆ†å‰²ä¸­åºæ•°ç»„ val node = TreeNode(preorderArr[preStart]) val leftInBegin = inStart //å·¦é—­ val leftInEnd = inIndex-1 // å³é—­ val leftPreBegin = preStart + 1 // å…ˆåºä¸­èŠ‚ç‚¹çš„åŽä¸€ä¸ªä½ç½®ï¼Œå°±æ˜¯å·¦å­æ ‘çš„å¼€å§‹ä½ç½® val leftPreEnd = preStart + (inIndex - inStart) // å…¶å®žä½ç½® + ä¸­åºä¸­å·¦å­æ ‘çš„é•¿åº¦ node.left = splitPreInOrder(preorderArr, leftPreBegin, leftPreEnd, inorderArr, leftInBegin, leftInEnd) val rightInBegin = inIndex + 1 // åˆ†å‰²ç‚¹çš„åŽä¸€ä¸ªä½ç½® val rightInEnd = inEnd val rightPreBegin = preStart + (inIndex - inStart) + 1 // å…ˆåºæ•°ç»„ å·¦å­æ ‘ä½ç½®+1 åŽä¸€ä¸ªä½ç½® val rightPreEnd = preEnd node.right = splitPreInOrder(preorderArr, rightPreBegin, rightPreEnd, inorderArr, rightInBegin, rightInEnd) return node&#125; æ„Ÿè§‰è¿˜æ˜¯å·¦é—­å³é—­å¥½ç‚¹ï¼Œå³å¼€çš„æƒ…å†µå®¹æ˜“è¶Šç•Œ. 617. åˆå¹¶äºŒå‰æ ‘DFS åˆå¹¶äºŒå‰æ ‘ï¼Œé€šè¿‡å…ˆåºéåŽ†ï¼Œå…ˆæž„é€ æ ¹èŠ‚ç‚¹ ç„¶åŽå†åˆ†åˆ«æž„é€ å·¦å³å­æ ‘ 1234567fun mergeTrees(root1: TreeNode?, root2: TreeNode?): TreeNode? &#123; if (root1 == null &amp;&amp; root2 == null) return null //è¿™é‡Œè¿˜å¯ä»¥ä¼˜åŒ–, çœ‹å®˜æ–¹è§£æ³•å’Œéšæƒ³å½•çš„ä¼˜åŒ–ä¸€æ ·çš„ val node = TreeNode((root1?.`val` ?: 0) + (root2?.`val` ?: 0)) node.left = mergeTrees(root1?.left, root2?.left) node.right = mergeTrees(root1?.right, root2?.right) return node&#125; BFS è¿™é¢˜å®˜æ–¹æœ‰ä¸€ç§BFSçš„è§£æ³•,æ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼ŒåŽé¢ç»§ç»­ https://leetcode.cn/problems/merge-two-binary-trees/solution/he-bing-er-cha-shu-by-leetcode-solution/","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"view_custom_attr","slug":"view_custom_attr","date":"2022-08-27T13:53:08.000Z","updated":"2023-12-17T13:10:53.515Z","comments":true,"path":"2022/08/27/view_custom_attr/","link":"","permalink":"https://noteforme.github.io/2022/08/27/view_custom_attr/","excerpt":"","text":"è‡ªå®šä¹‰å±žæ€§ç±»åˆ« boolean è¡¨ç¤ºattrå–å€¼ä¸ºtrueæˆ–è€…falsecolor è¡¨ç¤ºattrå–å€¼æ˜¯é¢œè‰²ç±»åž‹ï¼Œä¾‹å¦‚#ff3344,æˆ–è€…æ˜¯ä¸€ä¸ªæŒ‡å‘colorçš„èµ„æºidï¼Œä¾‹å¦‚R.color.colorAccent.dimension è¡¨ç¤º attr å–å€¼æ˜¯å°ºå¯¸ç±»åž‹ï¼Œä¾‹å¦‚ä¾‹å¦‚å–å€¼16spã€16dpï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŒ‡å‘dimençš„èµ„æºidï¼Œä¾‹ å¦‚R.dimen.dp_16float è¡¨ç¤ºattrå–å€¼æ˜¯æ•´å½¢æˆ–è€…æµ®ç‚¹åž‹fraction è¡¨ç¤º attrå–å€¼æ˜¯ç™¾åˆ†æ•°ç±»åž‹ï¼Œåªèƒ½ä»¥%ç»“å°¾ï¼Œä¾‹å¦‚30%integer è¡¨ç¤ºattrå–å€¼æ˜¯æ•´åž‹string è¡¨ç¤ºattrå–å€¼æ˜¯Stringç±»åž‹ï¼Œæˆ–è€…ä¸€ä¸ªæŒ‡å‘Stringçš„èµ„æºidï¼Œä¾‹å¦‚R.string.testStringreference è¡¨ç¤ºattrå–å€¼åªèƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘èµ„æºçš„idã€‚enum è¡¨ç¤ºattrå–å€¼åªèƒ½æ˜¯æžšä¸¾ç±»åž‹ã€‚ CustomView.kt 12345678910111213&lt;declare-styleable name=&quot;CustomView&quot;&gt; &lt;attr name=&quot;attr_boolean&quot; format=&quot;boolean&quot; /&gt; &lt;attr name=&quot;attr_color&quot; format=&quot;color&quot; /&gt; &lt;attr name=&quot;attr_dimension&quot; format=&quot;dimension&quot; /&gt; &lt;attr name=&quot;attr_float&quot; format=&quot;float&quot; /&gt; &lt;attr name=&quot;attr_fraction&quot; format=&quot;fraction&quot; /&gt; &lt;attr name=&quot;attr_string&quot; format=&quot;string&quot; /&gt; &lt;attr name=&quot;attr_reference&quot; format=&quot;reference&quot; /&gt; &lt;attr name=&quot;attr_enum&quot; format=&quot;enum&quot; &gt; &lt;enum name=&quot;left&quot; value=&quot;0&quot;/&gt; &lt;enum name=&quot;right&quot; value=&quot;1&quot;/&gt; &lt;/attr&gt;&lt;/declare-styleable&gt; 123456789101112val a = context.obtainStyledAttributes(attrs, R.styleable.CustomView, 0, defStyleAttr)val boolean = a.getBoolean(R.styleable.CustomAttribute_customBoolean, false)val color = a.getColor(R.styleable.CustomAttribute_customColorValue, R.color.colorPrimary)val dimension = a.getDimension(R.styleable.CustomAttribute_customDimension, 20F)val float = a.getFloat(R.styleable.CustomView_attr_float, 20f)val fraction = a.getFraction(R.styleable.CustomView_attr_fraction, 1, 2, 0f)val integer = a.getInteger(R.styleable.CustomAttribute_customIntegerValue, 0)val string = a.getString(R.styleable.CustomView_attr_string)resourceId = a.getResourceId(R.styleable.CustomAttribute_customReference, R.drawable.meitu13333)var textPos = a.getInteger(R.styleable.CustomView_attr_enum, 0)a.recycle() refrence , è¡¨ç¤ºattrå–å€¼åªèƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘èµ„æºçš„idã€‚ https://github.com/GcsSloop/AndroidNote/tree/master/CustomView https://segmentfault.com/a/1190000012253911 onDraw dispatchDrawhttps://www.jianshu.com/p/89efaf8bd3dd https://juejin.cn/post/6844903997917102093","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"ADB","slug":"ADB","date":"2022-08-18T10:07:29.000Z","updated":"2023-01-02T03:31:38.914Z","comments":true,"path":"2022/08/18/ADB/","link":"","permalink":"https://noteforme.github.io/2022/08/18/ADB/","excerpt":"","text":"12345adb shell dumpsys window | grep mCurrentFocus &#x2F;&#x2F;å½“å‰Activityadb shell dumpsys activity | grep com.john.kotadb shell dumpsys activity | grep com.comm.util","categories":[],"tags":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/tags/TOOL/"}]},{"title":"view_round_image","slug":"view-round-image","date":"2022-08-14T02:55:00.000Z","updated":"2023-12-20T14:52:26.395Z","comments":true,"path":"2022/08/14/view-round-image/","link":"","permalink":"https://noteforme.github.io/2022/08/14/view-round-image/","excerpt":"","text":"https://blog.csdn.net/xiaohanluo/article/details/52945791 https://guides.codepath.com/android/Working-with-the-ImageView https://guides.codepath.com/android/Working-with-the-ImageView å…¨åœ†è§’OutLine12345&lt;ImageView android:id=&quot;@+id/img_test&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:src=&quot;@drawable/music&quot; /&gt; 123456789mImg = findViewById(R.id.img_test);ViewOutlineProvider viewOutlineProvider = new ViewOutlineProvider() &#123; @Override public void getOutline(View view, Outline outline) &#123; outline.setOval(0,0,mImg.getWidth(), mImg.getHeight()); &#125;&#125;;mImg.setOutlineProvider(viewOutlineProvider);mImg.setClipToOutline(true); https://blog.csdn.net/weixin_43499030/article/details/92799689 CardViewéƒ¨åˆ†åœ†è§’ShapeableImageViewè¿™ç§æ–¹å¼å®˜æ–¹çš„æ— é£Žé™© 123456789&lt;!-- layout.xml å°±æ˜¯åœ¨å¸ƒå±€ä¸­å®šä¹‰--&gt;&lt;com.google.android.material.imageview.ShapeableImageView android:layout_width=&quot;200dp&quot; android:layout_height=&quot;wrap_content&quot; android:scaleType=&quot;fitXY&quot; android:strokeWidth=&quot;10dp&quot; android:strokeColor=&quot;@color/purple&quot; android:src=&quot;@drawable/ic_launcher_background&quot; app:shapeAppearance=&quot;@style/RoundAndCutImageStyle&quot; /&gt; éœ€è¦é€šè¿‡è®¾ç½® app:shapeAppearance æ‰æœ‰ç”¨ 12345678910&lt;!-- style.xml å¯ä»¥å•ç‹¬ç»™æ¯ä¸ªè§’è®¾ç½®å±žæ€§--&gt; &lt;style name=&quot;RoundAndCutImageStyle&quot;&gt; &lt;item name=&quot;cornerFamilyTopLeft&quot;&gt;rounded&lt;/item&gt; &lt;item name=&quot;cornerFamilyBottomLeft&quot;&gt;rounded&lt;/item&gt; &lt;item name=&quot;cornerFamilyTopRight&quot;&gt;cut&lt;/item&gt; &lt;item name=&quot;cornerFamilyBottomRight&quot;&gt;cut&lt;/item&gt; &lt;item name=&quot;cornerSize&quot;&gt;50%&lt;/item&gt; &lt;item name=&quot;cornerSizeBottomLeft&quot;&gt;20dp&lt;/item&gt; &lt;item name=&quot;cornerSizeTopLeft&quot;&gt;20dp&lt;/item&gt; &lt;/style&gt; å·¦è¾¹æ˜¯åœ†è§’ï¼Œå³è¾¹æ˜¯â€œåˆ‡è§’â€ https://juejin.cn/post/6913083202387050509 BitmapShadersetShader setShaderï¼Œé¡¾åæ€ä¹‰ï¼Œè®¾ç½®ç€è‰²å™¨ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨Canvasä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨drawXXXå¯ä»¥ç»˜åˆ¶å‡ºå„ç§å„æ ·çš„å›¾å½¢ï¼Œå¦‚åœ†å½¢ã€çŸ©å½¢ã€æ‰‡å½¢ç­‰ç­‰ï¼Œè€ŒShaderæ˜¯ç»™Paintè®¾ç½®çš„å±žæ€§ï¼Œå†³å®špaintç»˜åˆ¶å›¾å½¢çš„æ—¶å€™å¦‚ä½•ç»™å›¾å½¢ä¸Šè‰²ï¼Œæ¯”å¦‚ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ï¼Œæˆ‘æƒ³è¦çŸ©å½¢ä¸­é“ºæ»¡ä¸€å¼ å›¾ç‰‡ï¼Œé‚£è¿™äº›å¹³é“ºçš„å›¾ç‰‡å°±ç›¸å½“äºŽæ˜¯ç»™è¿™ä¸ªçŸ©å½¢ä¸Šè‰²äº†ã€‚å¥½äº†ï¼Œæ¦‚å¿µå…ˆè¯´åˆ°è¿™ï¼ŒShaderæ˜¯ä¸€ä¸ªåŸºç±»ï¼ŒsetShaderä¸­è®¾ç½®çš„éƒ½æ˜¯Shaderçš„å­ç±»https://blog.csdn.net/huxin1875/article/details/89133025 12345678 Call this to create a new shader that will draw with a bitmap. Params: bitmap â€“ The bitmap to use inside the shader tileX â€“ The tiling mode for x to draw the bitmap in. tileY â€“ The tiling mode for y to draw the bitmap in.public BitmapShader(@NonNull Bitmap bitmap, @NonNull TileMode tileX, @NonNull TileMode tileY) &#123; this(bitmap, tileX.nativeInt, tileY.nativeInt);&#125; 12345678910111213141516171819202122232425262728class BitmapShaderView @JvmOverloads constructor( context: Context?, attrs: AttributeSet?, defStyleAttr: Int = 0) : View(context, attrs, defStyleAttr) &#123; private var mWidth by Delegates.notNull&lt;Int&gt;() private var mHeight by Delegates.notNull&lt;Int&gt;() private lateinit var bmpShader: BitmapShader private lateinit var mPaint: Paint private lateinit var bmpRect: RectF override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) &#123; super.onSizeChanged(w, h, oldw, oldh) mWidth = w //å±å¹•å®½ mHeight = h //å±å¹•é«˜ bmpRect = RectF(0f, 0f, mWidth.toFloat(), mHeight.toFloat()) val bitmap = BitmapFactory.decodeResource(resources, R.drawable.meitu122822234759011) //Shader.TileModeé‡Œæœ‰ä¸‰ç§æ¨¡å¼ï¼šCLAMPï¼ˆæ‹‰ä¼¸ï¼‰ã€MIRRORï¼ˆé•œåƒï¼‰ã€REPETAï¼ˆé‡å¤ï¼‰ bmpShader = BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP) mPaint = Paint(Paint.ANTI_ALIAS_FLAG) mPaint.shader = bmpShader &#125; override fun onDraw(canvas: Canvas?) &#123; super.onDraw(canvas) canvas?.drawRect(bmpRect, mPaint) &#125;&#125; å…ˆæ¥çœ‹çœ‹BitmapShaderå±žæ€§çš„ä½œç”¨ bitmap æŒ‡çš„æ˜¯è¦ä½œä¸ºçº¹ç†çš„å›¾ç‰‡ï¼Œ tileX æŒ‡çš„æ˜¯åœ¨ï½˜æ–¹å‘çº¹ç†çš„ç»˜åˆ¶æ¨¡å¼ tileY æŒ‡çš„æ˜¯ï¼¹æ–¹å‘ä¸Šçš„ç»˜åˆ¶æ¨¡å¼ã€‚ 1234567891011121314151617181920212223242526public enum TileMode &#123; /** * Replicate the edge color if the shader draws outside of its * original bounds. */ CLAMP (0), /** * Repeat the shader&#x27;s image horizontally and vertically. */ REPEAT (1), /** * Repeat the shader&#x27;s image horizontally and vertically, alternating * mirror images so that adjacent images always seam. */ MIRROR(2), /** * Render the shader&#x27;s image pixels only within its original bounds. If the shader * draws outside of its original bounds, transparent black is drawn instead. */ DECAL(3); TileMode(int nativeInt) &#123; this.nativeInt = nativeInt; &#125; final int nativeInt;&#125; *CLAMP æ‹‰ä¼¸*:è®¾ç½®x , æ¨ªå‘çš„æœ€åŽä¸€ä¸ªæ¨ªè¡Œåƒç´ ï¼Œä¸æ–­çš„é‡å¤ï¼Œè®¾ç½®yï¼Œé‚£ä¹ˆçºµé¡¹çš„é‚£ä¸€åˆ—åƒç´ ï¼Œä¸æ–­çš„é‡å¤ï¼›*REPEAT é‡å¤*:å°±æ˜¯æ¨ªå‘ã€çºµå‘ä¸æ–­é‡å¤è¿™ä¸ªbitmap*MIRROR é•œåƒ*:æ¨ªå‘ä¸æ–­ç¿»è½¬é‡å¤ï¼Œçºµå‘ä¸æ–­ç¿»è½¬é‡å¤ï¼› CLAMP1BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP) REPEAT 1BitmapShader(bitmap, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT) MIRROR1BitmapShader(bitmap, Shader.TileMode.MIRROR, Shader.TileMode.MIRROR) å¯ä»¥çœ‹åˆ°ï¼Œ x y é•œåƒæ˜ å°„ DECALæœ€åŽè¿™ç§å°±æ˜¯æ­£å¸¸æ˜¾ç¤ºçš„äº† https://juejin.cn/post/6844903480809766920 å…¨éƒ¨åœ†è§’æœ‰äº†scaleï¼Œå°±å¯ä»¥è®¾ç½®ç»™æˆ‘ä»¬çš„matrixï¼› ç„¶åŽä½¿ç”¨mBitmapShader.setLocalMatrix(mMatrix); æœ€åŽå°†bitmapShaderè®¾ç½®ç»™paintã€‚ å…³äºŽdrawableè½¬bitmapçš„ä»£ç ï¼š 1Math.max(width / bmp.width.toFloat(), height / bmp.height.toFloat()) Viewå®½åº¦ / å›¾ç‰‡å®½åº¦ , Viewçš„é«˜åº¦/å›¾ç‰‡é«˜åº¦ ä»–ä»¬å–æœ€å¤§å€¼ï¼Œè¿›è¡Œç¼©æ”¾ï¼Œå›¾ç‰‡çŸ­çš„é‚£ä¸€éƒ¨åˆ†å°±ä¼šå¡«æ»¡View,é•¿çš„é‚£ä¸€éƒ¨åˆ†ä¼šè¢«æˆªæŽ‰,æ˜¾ç¤ºä¸å…¨ è®¡ç®—scale æ¯”å¦‚ï¼šviewçš„å®½é«˜ä¸º50 * 100ï¼›å›¾ç‰‡çš„å®½é«˜ä¸º5*100 ï¼› æœ€ç»ˆæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å®½çš„æ¯”ä¾‹æ”¾å¤§ï¼Œè€Œä¸æ˜¯æŒ‰ç…§é«˜çš„æ¯”ä¾‹ç¼©å°ï¼›å› ä¸ºæˆ‘ä»¬éœ€è¦è®©ç¼©æ”¾åŽçš„å›¾ç‰‡ï¼Œè‡ªå®šå¤§äºŽæˆ‘ä»¬çš„viewå®½é«˜ï¼Œå¹¶ä¿è¯åŽŸå›¾æ¯”ä¾‹ã€‚ é‚£ä¹ˆé«˜åº¦å°±è¢«æ”¾å¤§10å€åˆ°1000,å€¼èƒ½æ˜¾ç¤ºåˆ°1/10 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657class RoundImageShaderView @JvmOverloads constructor( context: Context, attrs: AttributeSet?, defStyleAttr: Int = 0) : AppCompatImageView(context, attrs, defStyleAttr) &#123; private val TAG = &quot;RoundImageShaderView&quot; private lateinit var mRoundRect: RectF private lateinit var mBitmapShader: BitmapShader private val mMatrix = Matrix() private val mBitmapPaint = Paint(); override fun onDraw(canvas: Canvas?) &#123; canvas?.drawRoundRect(mRoundRect, 20f, 20f, mBitmapPaint) &#125; override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) &#123; super.onSizeChanged(w, h, oldw, oldh) setUpShader() mRoundRect = RectF(0f, 0f, width.toFloat(), height.toFloat()) &#125; /** * åˆå§‹åŒ–BitmapShader */ private fun setUpShader() &#123; val drawable: Drawable = drawable ?: return val bmp = drawableToBitamp(drawable) // å°†bmpä½œä¸ºç€è‰²å™¨ï¼Œå°±æ˜¯åœ¨æŒ‡å®šåŒºåŸŸå†…ç»˜åˆ¶bmp mBitmapShader = BitmapShader(bmp!!, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP) // å¦‚æžœå›¾ç‰‡çš„å®½æˆ–è€…é«˜ä¸Žviewçš„å®½é«˜ä¸åŒ¹é…ï¼Œè®¡ç®—å‡ºéœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹ï¼›ç¼©æ”¾åŽçš„å›¾ç‰‡çš„å®½é«˜ï¼Œä¸€å®šè¦å¤§äºŽæˆ‘ä»¬viewçš„å®½é«˜ï¼›æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå–å¤§å€¼ï¼› val scale = Math.max(width / bmp.width.toFloat(), height / bmp.height.toFloat()) // shaderçš„å˜æ¢çŸ©é˜µï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ç”¨äºŽæ”¾å¤§æˆ–è€…ç¼©å° mMatrix.setScale(scale, scale) // è®¾ç½®å˜æ¢çŸ©é˜µ mBitmapShader.setLocalMatrix(mMatrix) // è®¾ç½®shader mBitmapPaint.shader = mBitmapShader &#125; /** * drawableè½¬bitmap * * @param drawable * @return */ private fun drawableToBitamp(drawable: Drawable): Bitmap? &#123; if (drawable is BitmapDrawable) &#123; val bd: BitmapDrawable = drawable return bd.bitmap &#125; val w = drawable.intrinsicWidth val h = drawable.intrinsicHeight return Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888) &#125;&#125; 12345678910111213141516171819&lt;com.john.kot.view.RoundImageShaderView android:id=&quot;@+id/iv_girl1&quot; android:layout_width=&quot;200dp&quot; android:layout_height=&quot;200dp&quot; android:layout_marginStart=&quot;20dp&quot; android:layout_marginTop=&quot;20dp&quot; android:src=&quot;@drawable/meitu122822234759011&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;com.john.kot.view.RoundImageShaderView android:id=&quot;@+id/iv_girl2&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;200dp&quot; android:layout_marginStart=&quot;20dp&quot; android:layout_marginTop=&quot;20dp&quot; android:src=&quot;@drawable/meitu122822234759011&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toBottomOf=&quot;@+id/iv_girl1&quot; /&gt; å¯ä»¥çœ‹åˆ°ï¼Œé«˜åº¦éƒ¨åˆ†æˆªå–äº† https://blog.csdn.net/lmj623565791/article/details/41967509 https://developer.android.com/reference/android/graphics/PorterDuff.Mode https://segmentfault.com/a/1190000012253911 éƒ¨åˆ†åœ†è§’ ç¬¬äºŒå¼ å›¾å°±å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·åšçš„åŽŸç† 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071class RoundBottomBitmapShaderView @JvmOverloads constructor( context: Context, attrs: AttributeSet?, defStyleAttr: Int = 0) : AppCompatImageView(context, attrs, defStyleAttr) &#123; private lateinit var mBitmapShader: BitmapShader private val mMatrix = Matrix() private val mBitmapPaint = Paint(); val radius = resources.getDimension(R.dimen.round_bitmap_radius) private var outHeight by Delegates.notNull&lt;Int&gt;() private var outWidth by Delegates.notNull&lt;Int&gt;() override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) &#123; super.onSizeChanged(w, h, oldw, oldh) setUpShader() outWidth = w outHeight = h &#125; override fun onDraw(canvas: Canvas?) &#123;// super.onDraw(canvas) è¦åˆ é™¤ super.onDraw(canvas)ï¼šå¦åˆ™Canvasåˆä¼šåœ¨ImageViewä¸­é‡æ–°ç»˜åˆ¶ï¼Œå°†æˆ‘ä»¬ä¹‹å‰çš„æ“ä½œéƒ½è¦†ç›–äº† //ç»˜åˆ¶åœ†è§’ canvas?.drawRoundRect( RectF( 0f, (outHeight - 2 * radius), outWidth.toFloat(), outHeight.toFloat() ), radius, radius, mBitmapPaint )// åˆ©ç”¨ç”»ç¬”ç»˜åˆ¶é¡¶éƒ¨ä¸Šé¢ç›´è§’éƒ¨åˆ† canvas?.drawRect( RectF( 0f, 0f, outWidth.toFloat(), (outHeight - radius) ), mBitmapPaint ) &#125; /** * åˆå§‹åŒ–BitmapShader */ private fun setUpShader() &#123; val drawable: Drawable = drawable ?: return val bmp = drawableToBitmap(drawable) // å°†bmpä½œä¸ºç€è‰²å™¨ï¼Œå°±æ˜¯åœ¨æŒ‡å®šåŒºåŸŸå†…ç»˜åˆ¶bmp mBitmapShader = BitmapShader(bmp, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP) // å¦‚æžœå›¾ç‰‡çš„å®½æˆ–è€…é«˜ä¸Žviewçš„å®½é«˜ä¸åŒ¹é…ï¼Œè®¡ç®—å‡ºéœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹ï¼›ç¼©æ”¾åŽçš„å›¾ç‰‡çš„å®½é«˜ï¼Œä¸€å®šè¦å¤§äºŽæˆ‘ä»¬viewçš„å®½é«˜ï¼›æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå–å¤§å€¼ï¼› val scale = Math.max(width / bmp.width.toFloat(), height / bmp.height.toFloat()) // shaderçš„å˜æ¢çŸ©é˜µï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ç”¨äºŽæ”¾å¤§æˆ–è€…ç¼©å° mMatrix.setScale(scale, scale) // è®¾ç½®å˜æ¢çŸ©é˜µ mBitmapShader.setLocalMatrix(mMatrix) // è®¾ç½®shader mBitmapPaint.shader = mBitmapShader &#125; /** * drawableè½¬bitmap * * @param drawable * @return */ private fun drawableToBitmap(drawable: Drawable): Bitmap &#123; if (drawable is BitmapDrawable) &#123; val bd: BitmapDrawable = drawable return bd.bitmap &#125; val w = drawable.intrinsicWidth val h = drawable.intrinsicHeight return Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888) &#125;&#125; ä¸€ä¸ªè„šå‰ä¸¤æ­¥ç»˜åˆ¶çš„æ•ˆæžœ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677class RoundSingleBitmapShaderView @JvmOverloads constructor( context: Context, attrs: AttributeSet?, defStyleAttr: Int = 0) : AppCompatImageView(context, attrs, defStyleAttr) &#123; private lateinit var mBitmapShader: BitmapShader private val mMatrix = Matrix() private val mBitmapPaint = Paint(); val mRadius = resources.getDimension(R.dimen.round_bitmap_radius) private var outHeight by Delegates.notNull&lt;Int&gt;() private var outWidth by Delegates.notNull&lt;Int&gt;() override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) &#123; super.onSizeChanged(w, h, oldw, oldh) setUpShader() outWidth = w outHeight = h &#125; override fun onDraw(canvas: Canvas?) &#123;// super.onDraw(canvas) //å¦åˆ™Canvasåˆä¼šåœ¨ImageViewä¸­é‡æ–°ç»˜åˆ¶ï¼Œå°†æˆ‘ä»¬ä¹‹å‰çš„æ“ä½œéƒ½è¦†ç›–äº† //ç»˜åˆ¶åœ† canvas?.drawRoundRect( RectF(0f, 0f, 2 * mRadius, 2 * mRadius), mRadius, mRadius, mBitmapPaint ) //ç»˜åˆ¶çŸ©å½¢ç«–çº¿ canvas?.drawRect(RectF(0f, mRadius, mRadius, height.toFloat()), mBitmapPaint) //ç»˜åˆ¶ä¸»è¦çš„å›¾ canvas?.drawRect( RectF( mRadius, 0f, width.toFloat(), height.toFloat() ), mBitmapPaint ) &#125; /** * åˆå§‹åŒ–BitmapShader */ private fun setUpShader() &#123; val drawable: Drawable = drawable ?: return val bmp = drawableToBitmap(drawable) // å°†bmpä½œä¸ºç€è‰²å™¨ï¼Œå°±æ˜¯åœ¨æŒ‡å®šåŒºåŸŸå†…ç»˜åˆ¶bmp mBitmapShader = BitmapShader(bmp, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP) // å¦‚æžœå›¾ç‰‡çš„å®½æˆ–è€…é«˜ä¸Žviewçš„å®½é«˜ä¸åŒ¹é…ï¼Œè®¡ç®—å‡ºéœ€è¦ç¼©æ”¾çš„æ¯”ä¾‹ï¼›ç¼©æ”¾åŽçš„å›¾ç‰‡çš„å®½é«˜ï¼Œä¸€å®šè¦å¤§äºŽæˆ‘ä»¬viewçš„å®½é«˜ï¼›æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå–å¤§å€¼ï¼› val scale = Math.max(width / bmp.width.toFloat(), height / bmp.height.toFloat()) // shaderçš„å˜æ¢çŸ©é˜µï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ç”¨äºŽæ”¾å¤§æˆ–è€…ç¼©å° mMatrix.setScale(scale, scale) // è®¾ç½®å˜æ¢çŸ©é˜µ mBitmapShader.setLocalMatrix(mMatrix) // è®¾ç½®shader mBitmapPaint.shader = mBitmapShader &#125; /** * drawableè½¬bitmap * * @param drawable * @return */ private fun drawableToBitmap(drawable: Drawable): Bitmap &#123; if (drawable is BitmapDrawable) &#123; val bd: BitmapDrawable = drawable return bd.bitmap &#125; val w = drawable.intrinsicWidth val h = drawable.intrinsicHeight return Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888) &#125;&#125; Xfermodeç»˜åˆ¶åœ†è§’æ¦‚è§ˆå…ˆç»˜åˆ¶ ç»˜åˆ¶é»„è‰²çš„åœ† ç„¶åŽç»˜åˆ¶è“è‰²æ­£æ–¹å½¢ æ¨¡å¼ è¯´æ˜ŽPorterDuff.Mode.CLEAR æ‰€æœ‰ç»˜åˆ¶ä¸ä¼šç»˜åˆ¶åˆ°ç”»å¸ƒä¸ŠPorterDuff.Mode.SRC æ˜¾ç¤ºä¸Šå±‚ç»˜åˆ¶å›¾å½¢PorterDuff.Mode.DST æ˜¾ç¤ºä¸‹å±‚ç»˜åˆ¶å›¾å½¢PorterDuff.Mode.SRC_OVER å›¾å½¢å åŠ ï¼Œä¸Šå±‚ç›–ä½ä¸‹å±‚PorterDuff.Mode.DST_OVER å›¾å½¢å åŠ ï¼Œä¸‹å±‚ç›–ä½ä¸Šå±‚PorterDuff.Mode.SRC_IN æ˜¾ç¤ºä¸Šå±‚äº¤é›†éƒ¨åˆ†PorterDuff.Mode.DST_IN æ˜¾ç¤ºä¸‹å±‚äº¤é›†éƒ¨åˆ†PorterDuff.Mode.SRC_OUT æ˜¾ç¤ºä¸Šå±‚éžäº¤é›†éƒ¨åˆ†PorterDuff.Mode.DST_OUT æ˜¾ç¤ºä¸‹å±‚éžäº¤é›†éƒ¨åˆ†PorterDuff.Mode.SRC_ATOP æ˜¾ç¤ºä¸‹å±‚éžäº¤é›†éƒ¨åˆ†å’Œä¸Šå±‚äº¤é›†éƒ¨åˆ†PorterDuff.Mode.DST_ATOP æ˜¾ç¤ºä¸‹å±‚äº¤é›†éƒ¨åˆ†ä¸Žä¸Šå±‚éžäº¤é›†éƒ¨åˆ†PorterDuff.Mode.XOR åŽ»é™¤äº¤é›†éƒ¨åˆ†PorterDuff.Mode.DARKEN äº¤é›†éƒ¨åˆ†é¢œè‰²åŠ æ·±PorterDuff.Mode.LIGHTEN äº¤é›†éƒ¨åˆ†é¢œè‰²å˜äº®PorterDuff.Mode.MULTIPLY æ˜¾ç¤ºäº¤é›†éƒ¨åˆ†ï¼Œé¢œè‰²æ··åˆå åŠ PorterDuff.Mode.SCREEN å–ä¸¤å›¾å±‚å…¨éƒ¨åŒºåŸŸï¼Œäº¤é›†éƒ¨åˆ†å˜ä¸ºé€æ˜Žè‰² https://blog.csdn.net/xiaohanluo/article/details/52945791 https://developer.android.google.cn/reference/android/graphics/PorterDuff.Mode 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126 private class SampleXfermodeView(context: Context?) : View(context) &#123; private val mSrcB: Bitmap private val mDstB: Bitmap private val mBG // background checker-board pattern : Shader private val modeIndex = 1 // æ¨¡å¼ override fun onDraw(canvas: Canvas) &#123; canvas.drawColor(Color.WHITE) val labelP = Paint(Paint.ANTI_ALIAS_FLAG) labelP.textAlign = Paint.Align.CENTER val paint = Paint() paint.isFilterBitmap = false canvas.translate(15F, 35F) var x = 0f var y = 0f// for (modeIndex in sModes.indices) &#123; // draw the border paint.style = Paint.Style.STROKE paint.shader = null canvas.drawRect( x - 0.5f, y - 0.5f, x + W + 0.5f, y + H + 0.5f, paint ) // å¤–å±‚æ­£æ–¹å½¢é»‘è‰²æ¡†æ¡† // draw the checker-board pattern paint.style = Paint.Style.FILL paint.shader = mBG canvas.drawRect(x, y, x + W, y + H, paint) // æ­£æ–¹å½¢æ¡†æ¡†é‡Œçš„ç°è‰²å°æ ¼å­ // draw the src/dst example into our offscreen bitmap val sc: Int = canvas.saveLayer( x, y, x + W, y + H, null, ) // ä¿å­˜ å›¾å±‚ canvas.translate(x, y) canvas.drawBitmap(mDstB, 0f, 0f, paint) // ç»˜åˆ¶é»„è‰²çš„åœ† paint.xfermode = sModes[modeIndex] canvas.drawBitmap(mSrcB, 0f, 0f, paint) //ç»˜åˆ¶è“è‰²æ­£æ–¹å½¢ paint.xfermode = null // æˆ‘çŒœå¦åˆ™ä¸‹æ¬¡å¾ªçŽ¯ä¼šç”¨åˆ° canvas.restoreToCount(sc) // draw the label canvas.drawText( sLabels[modeIndex], x + W / 2, y - labelP.textSize / 2, labelP ) x += W + 10 // wrap around when we&#x27;ve drawn enough for one row if ((modeIndex % ROW_MAX) == ROW_MAX - 1) &#123; x = 0f y += H + 30 &#125;// &#125; &#125; companion object &#123; private val W = 200 private val H = 200 private val ROW_MAX = 4 // number of samples per row private val sModes: Array&lt;Xfermode&gt; = arrayOf&lt;Xfermode&gt;( PorterDuffXfermode(PorterDuff.Mode.CLEAR), PorterDuffXfermode(PorterDuff.Mode.SRC), PorterDuffXfermode(PorterDuff.Mode.DST), PorterDuffXfermode(PorterDuff.Mode.SRC_OVER), PorterDuffXfermode(PorterDuff.Mode.DST_OVER), PorterDuffXfermode(PorterDuff.Mode.SRC_IN), PorterDuffXfermode(PorterDuff.Mode.DST_IN), PorterDuffXfermode(PorterDuff.Mode.SRC_OUT), PorterDuffXfermode(PorterDuff.Mode.DST_OUT), PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP), PorterDuffXfermode(PorterDuff.Mode.DST_ATOP), PorterDuffXfermode(PorterDuff.Mode.XOR), PorterDuffXfermode(PorterDuff.Mode.DARKEN), PorterDuffXfermode(PorterDuff.Mode.LIGHTEN), PorterDuffXfermode(PorterDuff.Mode.MULTIPLY), PorterDuffXfermode(PorterDuff.Mode.SCREEN) ) private val sLabels = arrayOf( &quot;Clear&quot;, &quot;Src&quot;, &quot;Dst&quot;, &quot;SrcOver&quot;, &quot;DstOver&quot;, &quot;SrcIn&quot;, &quot;DstIn&quot;, &quot;SrcOut&quot;, &quot;DstOut&quot;, &quot;SrcATop&quot;, &quot;DstATop&quot;, &quot;Xor&quot;, &quot;Darken&quot;, &quot;Lighten&quot;, &quot;Multiply&quot;, &quot;Screen&quot; ) &#125; init &#123; mSrcB = makeSrc(W, H) mDstB = makeDst(W, H) // make a ckeckerboard pattern val bm: Bitmap = Bitmap.createBitmap( intArrayOf( -0x1, -0x333334, -0x333334, -0x1 ), 2, 2, Bitmap.Config.RGB_565 ) mBG = BitmapShader( bm, Shader.TileMode.REPEAT, Shader.TileMode.REPEAT ) val m = Matrix() m.setScale(6f, 6f) mBG.setLocalMatrix(m) &#125; &#125; companion object &#123; // create a bitmap with a circle, used for the &quot;dst&quot; image fun makeDst(w: Int, h: Int): Bitmap &#123; val bm: Bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888) val c = Canvas(bm) val p = Paint(Paint.ANTI_ALIAS_FLAG) p.color = -0x33bc c.drawOval(RectF(0f, 0f, w * 3f / 4, h * 3f / 4), p) return bm &#125; // create a bitmap with a rect, used for the &quot;src&quot; image fun makeSrc(w: Int, h: Int): Bitmap &#123; val bm: Bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888) val c = Canvas(bm) val p = Paint(Paint.ANTI_ALIAS_FLAG) p.color = -0x995501 c.drawRect(w / 3f, h / 3f, w * 19f / 20, h * 19f / 20, p) return bm &#125; &#125;&#125; åœ†è§’å›¾ç‰‡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117private const val TYPE_CIRCLE = 0private const val TYPE_ROUND = 1class XfermodeView @JvmOverloads constructor( context: Context?, attrs: AttributeSet? = null, defStyleAttr: Int = 0) : View(context, attrs, defStyleAttr) &#123; private var src: Bitmap? = null private var out: Bitmap? = null private var mWidth = 0 private var mHeight = 0 private var type = TYPE_ROUND //è®¾ç½®ç±»åž‹ï¼Œæ˜¯åœ†è§’å›¾ç‰‡è¿˜æ˜¯åœ†è§’çŸ©å½¢ init &#123; // ç¦æ­¢ç¡¬ä»¶åŠ é€Ÿï¼Œç¡¬ä»¶åŠ é€Ÿä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œç¦ç”¨æŽ‰ setLayerType(LAYER_TYPE_SOFTWARE, null) &#125; override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) &#123; super.onMeasure(widthMeasureSpec, heightMeasureSpec) //è‡ªå·±è®¡ç®—æŽ§ä»¶çš„å®½é«˜ val widthSize = MeasureSpec.getSize(widthMeasureSpec) val widthMode = MeasureSpec.getMode(widthMeasureSpec) val heightSize = MeasureSpec.getSize(heightMeasureSpec) val heightMode = MeasureSpec.getMode(heightMeasureSpec) mWidth = if (widthMode == MeasureSpec.EXACTLY) &#123; widthSize &#125; else &#123; val imgWidth = (src!!.width + paddingLeft + paddingRight) if (widthMode == MeasureSpec.AT_MOST) &#123; Math.min(widthSize, imgWidth) &#125; else &#123; imgWidth &#125; &#125; mHeight = if (heightMode == MeasureSpec.EXACTLY) &#123; heightSize &#125; else &#123; val imgHeight = (src!!.height + paddingTop + paddingBottom) if (heightMode == MeasureSpec.AT_MOST) &#123; Math.min(heightSize, imgHeight) &#125; else &#123; imgHeight &#125; &#125; when (type) &#123; TYPE_CIRCLE -&gt; &#123; val min = Math.min(mWidth, mHeight) setMeasuredDimension(min, min) &#125; TYPE_ROUND -&gt; setMeasuredDimension(mWidth, mHeight) &#125; &#125; override fun onDraw(canvas: Canvas) &#123; xmodeImage() //æŠŠç”»å¥½ç”»çš„ç”»å¸ƒæ”¾åˆ°è‡ªå®šä¹‰çš„ç”»æ¿ä¸Šé¢ canvas.drawBitmap(out!!, 0f, 0f, null) &#125; private fun xmodeImage() &#123; //æ ¹æ®åŽŸå§‹çš„å›¾ç‰‡åˆ›å»ºä¸€ä¸ªç”»å¸ƒ out = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.ARGB_8888) //åˆ›å»ºä¸€ä¸ªç”»æ¿ï¼Œåœ¨ç”»å¸ƒçš„åŸºç¡€ä¸Š val canvas = Canvas(out!!) //åˆ›å»ºä¸€ä¸ªç”»ç¬” val paint = Paint(Paint.ANTI_ALIAS_FLAG) when (type) &#123; TYPE_ROUND -&gt; //å¼€å§‹åœ¨æœ‰ç”»æ¿çš„ç”»å¸ƒä¸Šç”¨ç”»ç¬”ä½œç”»äº†ï¼Œè¿™é‡Œç”»äº†ä¸€ä¸ªåœ†è§’çŸ©å½¢ canvas.drawRoundRect( RectF(0f, 0f, mWidth.toFloat(), mHeight.toFloat()), 60f, 60f, paint ) TYPE_CIRCLE -&gt; &#123; //ç”»åœ†ï¼Œå–å®½é«˜çš„æœ€å°å€¼ä½œä¸ºåœ†çš„ç›´å¾„ val min = Math.min(mWidth, mHeight) //å¼€å§‹ç”»åœ† canvas.drawCircle( (min / 2).toFloat(), (min / 2).toFloat(), (min / 2).toFloat(), paint ) &#125; &#125; src = BitmapFactory.decodeResource(resources, R.drawable.meitu110468869) //è®¾ç½®Xfermodeç”»ç¬”æ¨¡å¼ä¸ºSRC_IN paint.xfermode = PorterDuffXfermode(PorterDuff.Mode.SRC_IN) //ç„¶åŽæœ‰ç”»äº†ä¸€ä¸ªå›¾ç‰‡ï¼Œæœ€ç»ˆå®žçŽ°ä¸¤ä¸ªå›¾åƒçš„å åŠ  val zoomImg = zoomImg(src!!, mWidth, mHeight) canvas.drawBitmap(zoomImg!!, 0f, 0f, paint) &#125; fun zoomImg(bm: Bitmap, newWidth: Int, newHeight: Int): Bitmap? &#123; // èŽ·å¾—å›¾ç‰‡çš„å®½é«˜ val width = bm.width val height = bm.height // è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ val scaleWidth = newWidth.toFloat() / width val scaleHeight = newHeight.toFloat() / height // å–å¾—æƒ³è¦ç¼©æ”¾çš„matrixå‚æ•° val matrix = Matrix() matrix.postScale(scaleWidth, scaleHeight) // å¾—åˆ°æ–°çš„å›¾ç‰‡ return Bitmap.createBitmap(bm, 0, 0, width, height, matrix, true) &#125;&#125;","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"leetcode","slug":"Leetcode","date":"2022-07-26T06:58:38.000Z","updated":"2023-07-17T13:33:07.152Z","comments":true,"path":"2022/07/26/Leetcode/","link":"","permalink":"https://noteforme.github.io/2022/07/26/Leetcode/","excerpt":"","text":"20. æœ‰æ•ˆçš„æ‹¬å·123456789101112131415161718192021222324252627//å®˜æ–¹ HashMap è§£æ³•æ›´å¥½ æ›´æ¸…æ™°public boolean isValid(String s) &#123; Stack stack = new Stack(); for (int i = 0; i &lt; s.length(); i++) &#123; char c = s.charAt(i); if ((c == &#x27;(&#x27;) || c == &#x27;[&#x27; || c == &#x27;&#123;&#x27;) &#123; stack.push(c); &#125; else &#123; if (stack.isEmpty()) &#123; return false; &#125; boolean p1 = (c == &#x27;)&#x27; &amp;&amp; (char) stack.peek() == &#x27;(&#x27;); boolean p2 = (c == &#x27;]&#x27; &amp;&amp; (char) stack.peek() == &#x27;[&#x27;); boolean p3 = (c == &#x27;&#125;&#x27; &amp;&amp; (char) stack.peek() == &#x27;&#123;&#x27;); if (p1 || p2 || p3) &#123; stack.pop(); &#125;else &#123; stack.push(c); &#125; &#125; &#125; if (stack.isEmpty()) &#123; return true; &#125; return false;&#125; 21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨é€’å½’è§£æ³•12345678910111213141516171819202122public ListNode mergeTwoLists(ListNode l1, ListNode l2) &#123; ListNode prevHead &#x3D; new ListNode(-1); ListNode prev &#x3D; prevHead; while (l1 !&#x3D; null &amp;&amp; l2 !&#x3D; null) &#123; if (l1.val &lt; l2.val) &#123; prev.next &#x3D; l1; l1 &#x3D; l1.next; &#125; else &#123; prev.next &#x3D; l2; l2 &#x3D; l2.next; &#125; prev &#x3D; prev.next; &#125; if (l1 &#x3D;&#x3D; null) &#123; prev.next &#x3D; l2; &#125; if (l2 &#x3D;&#x3D; null) &#123; prev.next &#x3D; l1; &#125; return prevHead.next;&#125; è¿­ä»£è§£æ³•å¾…å­¦ä¹  160. ç›¸äº¤é“¾è¡¨ç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›žä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æžœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å›ž null ã€‚ å›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ï¼š 123456789101112public class Solution_160 &#123; public ListNode getIntersectionNode(ListNode headA, ListNode headB) &#123; ListNode la = headA; ListNode lb = headB; while(la!=lb)&#123; la = (la==null) ? headB : la.next; lb = (lb==null) ? headA : lb.next ; &#125; return la; &#125;&#125; å…ˆèµ°è‡ªå·±çš„è·¯ï¼Œå†èµ°å¯¹æ–¹çš„è·¯ï¼Œæœ€ç»ˆè·¯ç¨‹ä¸€æ · å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œaï¼Œbä¸¤ä¸ªé“¾è¡¨ï¼Œå˜æ›´ä¸º a+b å’Œ b+aï¼Œé•¿åº¦å°±ç›¸ç­‰äº†ï¼Œç„¶åŽç­‰æ­¥éåŽ†åˆ¤æ–­æ˜¯å¦ç›¸ç­‰å°±è¡Œäº† åŽŸå§‹çš„æ•°æ® ä¿®æ”¹åŽçš„æ•°æ®ç¤ºæ„å›¾ !() 101. å¯¹ç§°äºŒå‰æ ‘è¿­ä»£æ³•éœ€è¦å†å†™ä¸‹","categories":[],"tags":[]},{"title":"Gradle","slug":"Gradle","date":"2022-07-26T06:58:38.000Z","updated":"2023-07-25T14:20:54.814Z","comments":true,"path":"2022/07/26/Gradle/","link":"","permalink":"https://noteforme.github.io/2022/07/26/Gradle/","excerpt":"","text":"å¯ä»¥ç ”ç©¶ä¸‹ Project Api DEBUG1.&#x2F;gradlew &quot;-Dorg.gradle.daemon&#x3D;false&quot; &quot;-Dorg.gradle.debug&#x3D;true&quot; :tasks 9:37 Gradle Lifecyclehttps://docs.gradle.org/current/userguide/build_lifecycle.html Initialization Detects the settings file.Evaluates the settings file to determine which projects and included builds participate in the build.Creates a Project instance for every project. Configuration Evaluates the build scripts of every project participating in the build.Creates a task graph for requested tasks. æœ¬è´¨ä¸ŠæŠŠbuild.gradleä»Žä¸Šåˆ°ä¸‹è·‘ä¸€éã€‚ Execution Schedules and executes each of the selected tasks in the order of their dependencies. ä»»åŠ¡https://www.bilibili.com/video/BV1m54y1L7vK/ https://www.bilibili.com/video/BV1dK411K7Pg https://www.bilibili.com/video/BV1DE411Z7nt https://www.bilibili.com/video/BV1dp4y1e7W4 æ³¨æ„Android stuioé»˜è®¤å…³é—­task æŒ‰é’® é™æ€ä»»åŠ¡123456789println(&quot;gradle study&quot;)task(&quot;helloworld&quot;,&#123; println(&#x27;configure&#x27;) doLast &#123;&#123; println(&quot;Executing task&quot;) &#125;&#125;&#125;) ./gradlew helloworld åŠ¨æ€ä»»åŠ¡ â€œconfigureâ€ åœ¨ç”Ÿå‘½å‘¨æœŸConfiguration é˜¶æ®µå°±æ‰§è¡Œã€‚ dolast dofirståªæ˜¯åŠ å…¥åˆ°ä»»åŠ¡ä¸­ï¼Œåªæœ‰æŒ‡å®šå…·ä½“æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ‰ä¼šæ‰§è¡Œï¼Œå°±åƒä¸Šé¢çš„ ./gradlew helloworldï¼ŒæŒ‡æ˜Žhelloworldä»»åŠ¡ã€‚ é—­åŒ… 1234567891011121314151617181920212223242526task testGrdele&#123; println(&quot;testGrdele&quot;)&#125;&#x2F;&#x2F;é—­åŒ…çš„æ¦‚å¿µ, åƒkotlinåŒ¿åå‡½æ•°task closure&#123; mEach&#123; println it &#125; mEachWithParams &#123; m, n -&gt;&#x2F;&#x2F; -&gt; å°†é—­åŒ…çš„å‚æ•°å’Œä¸»ä½“åˆ†ç¦»å¼€ println &quot;$&#123;m&#125; is $&#123;n&#125;&quot; &#125;&#125;def mEach(closure)&#123; for (int i in 1..5)&#123; closure(i) &#125;&#125;def mEachWithParams(closure)&#123; def map &#x3D; [&#39;name&#39;:&#39;groovy&#39;,&#39;age&#39;:10] map.each &#123; closure(it.key,it.value) &#125;&#125; PluginScrpit PluginCustomGradlePlugin ./gradlew CustomGradlePlugin 12345678910111213//1.è„šæœ¬æ’ä»¶//appæ¨¡å—ä¸‹çš„build.gradleæ–‡ä»¶ä¸­å®šä¹‰çš„å¯¹è±¡æ’ä»¶class CustomGradlePlugin implements Plugin&lt;Project&gt; &#123; @Override void apply(Project target) &#123; target.task(&quot;showCustomPlugin&quot;) &#123; doLast &#123; println(&quot;this is CustomGradlePlugin&quot;) &#125; &#125; &#125;&#125; ./gradlew scriptPlugin 1apply from: &quot;config.gradle&quot; 12345project.task(&quot;scriptPlugin&quot;) &#123; doLast &#123; println(&quot;$project.name:this is a scriptPlugin&quot;) &#125;&#125; ankotlin:this is a scriptPlugin MyAwesomePlugin1234567891011121314class MyAwesomePlugin implements Plugin&lt;Project&gt;&#123; @Override void apply(Project project) &#123; task(&quot;helloworld22&quot;,&#123; println(&#x27;configure&#x27;) doLast &#123;&#123; println(&quot;Executing task&quot;) &#125;&#125; &#125;) &#125;&#125;apply plugins : MyAwesomePlugin buildscript å¯ä»¥æŠŠjava complileçš„classpathåŠ å…¥åˆ°build.gradleä¸­ Use Plungin in build.gradle123456789101112131415161718192021222324buildscript &#123; repositories &#123; mavenCentral() &#125; dependencies &#123; classpath group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.5&#39; &#125;&#125;allprojects &#123; repositories &#123; mavenCentral() &#125;&#125;apply plugin: &#39;java&#39;dependencies &#123; implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.5&#39;&#125;if (StringUtils.isNoneEmpty())&#123; &#125; è¿™æ ·å°±èƒ½ä½¿ç”¨javaçš„æ–¹æ³•åœ¨build.gradleä¸­ã€‚ https://stackoverflow.com/questions/60550107/gradle-share-repository-configuration-between-settings-gradle-kts-and-buildsrc","categories":[],"tags":[]},{"title":"kotlin-inline","slug":"kotlin-inline","date":"2022-07-24T03:54:53.000Z","updated":"2023-01-02T03:31:39.282Z","comments":true,"path":"2022/07/24/kotlin-inline/","link":"","permalink":"https://noteforme.github.io/2022/07/24/kotlin-inline/","excerpt":"","text":"inline4:00åˆ†é’Ÿ 12345fun main() &#123; hello &#123; println(&quot;Bye&quot;) &#125;&#125; ä¸åŠ inline1234fun hello(postAction: () -&gt; Unit) &#123; println(&quot;Hello!&quot;) postAction()&#125; å®žé™…ç¼–è¯‘ç»“æžœå¤§è‡´ 1234567fun main()&#123; val post. = object: Function0&lt;Unit&gt;&#123; override fun nvoke()&#123; return prinltn(&quot;Bye!&quot;) &#125; &#125;&#125; å¦‚æžœåœ¨for(i in 1.. 100) å°±ä¼šåˆ›å»ºå¾ˆå¯¹ä¸ªå¯¹è±¡ åŠ  inline1234fun hello(postAction: () -&gt; Unit) &#123; println(&quot;Hello!&quot;) postAction()&#125; ä¸ä»…æŠŠå‡½æ•°å†…è¿žè¿‡æ¥,ä¹Ÿä¼šæŠŠå®ƒå†…éƒ¨çš„å‡½æ•°çš„ç±»åž‹çš„å‚æ•° ï¼Œlambdaè¡¨è¾¾å¼ä¹Ÿå†…è”è¿‡æ¥. //ç¼–è¯‘ä»£ç  ç±»ä¼¼ 1234fun main()&#123; println(&quot;Hello!&quot;); println(&quot;Bye!&quot;)&#125; è¿™æ ·å°±ä¸å­˜åœ¨ï¼Œå¯¹è±¡çš„åˆ›å»º noinline crossinline https://www.bilibili.com/video/BV1kz4y1f7sf","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"LC-Tree","slug":"LC-Tree","date":"2022-07-17T10:51:21.000Z","updated":"2023-01-02T03:31:39.081Z","comments":true,"path":"2022/07/17/LC-Tree/","link":"","permalink":"https://noteforme.github.io/2022/07/17/LC-Tree/","excerpt":"","text":"äºŒå‰æ ‘ç®—æ³•æ€ç»´ https://www.bilibili.com/video/BV1nG411x77H TreeOperation.javaæ‰“å°æ ‘ Tree https://www.bilibili.com/video/BV1JW411i731 å®Œå…¨äºŒå‰æ ‘æ•°ç»„å­˜å‚¨æ–¹å¼ i æ˜¯æ•°ç»„ä¸‹æ ‡ éåŽ† æ¯ä¸ªNodeéƒ½æœ‰3æ¬¡è®¿é—®æœºä¼šï¼Œè°å…ˆå‡ºçŽ°å°±ä»£è¡¨ä»€ä¹ˆåº. ä¸­é—´èŠ‚ç‚¹ åœ¨å“ª,ä»£è¡¨çš„éåŽ†æ–¹å¼ å…ˆåºéåŽ† preorder traversal ï¼šä¸­å·¦å³ ä¸­åºéåŽ† inorder traversalï¼šå·¦ä¸­å³ åŽåºéåŽ† postorder traversalï¼šå·¦å³ä¸­ https://github.com/azl397985856/leetcode/blob/master/thinkings/tree.md preorder traversal é€’å½’ äºŒå‰æ ‘çš„éåŽ†åŠ¨ç”» https://www.bilibili.com/video/BV1RR4y1j7kh Bçš„å·¦è¾¹éåŽ†å®ŒæˆåŽï¼Œå¼€å§‹éåŽ†Bçš„å³å­æ ‘ éåŽ†è¿‡ç¨‹ è®¿é—®æ ¹èŠ‚ç‚¹ å…ˆåºéåŽ†å…¶å·¦å­æ ‘ å…ˆåºéåŽ†å…¶å³å­æ ‘ 1234567void PreOrderTraversal(BinTree BT)&#123; if(BT)&#123; printf(&quot;%d&quot;, BT -&gt; Data); PreOrderTraversal(BT-&gt;Left) PreOrderTraversal(BT-&gt;Right) &#125;&#125; https://www.bilibili.com/video/BV1JW411i731?p=34&amp;vd_source=d4c5260002405798a57476b318eccac9 éžé€’å½’https://www.bilibili.com/video/BV15f4y1W7i2 æž„å»ºå’Œæ‰“å°æ ‘https://blog.nowcoder.net/n/f3799d64ed764fd49c63947d617d4cd5 https://leetcode.cn/playground/VDCGQ8Ds/ https://leetcode.cn/circle/discuss/vpcMyM/ ä¸­åºéåŽ† å±‚åºéåŽ†ä¹Ÿå« å¹¿åº¦ä¼˜å…ˆéåŽ† ç”¨é˜Ÿåˆ—å®žçŽ° whileéåŽ†çºµå‘å±‚æ•° foréåŽ†æ¨ªå‘ ç¡®å®šäºŒå‰æ ‘å¿…é¡»æœ‰ä¸­åºéåŽ†ï¼Œå’Œå…ˆ åŽ åºéåŽ†ä¹‹ä¸€ äºŒå‰æœç´¢æ ‘ BST. Binary Search Tree 144. äºŒå‰æ ‘çš„å‰åºéåŽ†é€’å½’ 123456789101112fun preorderTraversal(root: TreeNode?): List&lt;Int&gt; &#123; val linkedList = LinkedList&lt;Int&gt;() preTraversal(root, linkedList) return linkedList&#125;private fun preTraversal(node: TreeNode?, linkedList: LinkedList&lt;Int&gt;) &#123; if (node == null) return // è¿™æ ·çš„é€’å½’åŸºæ›´å¥½ linkedList.add(node.`val`) preTraversal(node.left, linkedList) preTraversal(node.right, linkedList)&#125; è¿­ä»£ éšæƒ³å½• å‰åºéåŽ†æ˜¯ä¸­å·¦å³ï¼Œæ¯æ¬¡å…ˆå¤„ç†çš„æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆå°†æ ¹èŠ‚ç‚¹æ”¾å…¥æ ˆä¸­ï¼Œç„¶åŽå°†å³å­©å­åŠ å…¥æ ˆï¼Œå†åŠ å…¥å·¦å­©å­ã€‚ ä¸ºä»€ä¹ˆè¦å…ˆåŠ å…¥ å³å­©å­ï¼Œå†åŠ å…¥å·¦å­©å­å‘¢ï¼Ÿ å› ä¸ºè¿™æ ·å‡ºæ ˆçš„æ—¶å€™æ‰æ˜¯ä¸­å·¦å³çš„é¡ºåºã€‚ 5 4 1 2 6 1234567891011121314151617181920fun preorderTraversal1(root: TreeNode?): List&lt;Int&gt; &#123; val linkedList = LinkedList&lt;Int&gt;() val stack = Stack&lt;TreeNode&gt;() root?.let&#123; stack.push(it) &#125; while (!stack.empty()) &#123; val popNode = stack.pop() popNode.`val`.let&#123; linkedList.add(it) &#125; popNode.right?.let &#123; stack.push(it) &#125; popNode.left?.let &#123; stack.push(it) &#125; &#125; return linkedList&#125; 94. äºŒå‰æ ‘çš„ä¸­åºéåŽ†é€’å½’ 123456789101112fun inorderTraversal(root: TreeNode?): List&lt;Int&gt; &#123; val linkedList = LinkedList&lt;Int&gt;() orderRecursive(root, linkedList) return linkedList&#125;private fun orderRecursive(node: TreeNode?, linkedList: LinkedList&lt;Int&gt;) &#123; if (node == null) return orderRecursive(node.left, linkedList) linkedList.add(node.`val`) orderRecursive(node.right, linkedList)&#125; è¿­ä»£æ³• éšæƒ³å½• 1234567891011121314151617fun inorderTraversal1(root: TreeNode?): List&lt;Int&gt; &#123; val linkedList = LinkedList&lt;Int&gt;() if (root == null) return linkedList val stack = Stack&lt;TreeNode&gt;() var node = root while (node != null || !stack.empty()) &#123; //node != null ç¬¬ä¸€æ¬¡å¯ä»¥è¿›æ¥ if (node != null) &#123; stack.push(node) node = node.left &#125; else &#123; val resultNode = stack.pop() linkedList.add(resultNode.`val`) node = resultNode.right &#125; &#125; return linkedList&#125; 145. äºŒå‰æ ‘çš„åŽåºéåŽ†é€’å½’ 12345678910111213//recurivefun postorderTraversal(root: TreeNode?): List&lt;Int&gt; &#123; val linkedList = LinkedList&lt;Int&gt;() recursiveTraversal(root, linkedList) return linkedList&#125;private fun recursiveTraversal(node: TreeNode?, linkedList: LinkedList&lt;Int&gt;) &#123; if (node == null) return recursiveTraversal(node.left, linkedList) recursiveTraversal(node.right, linkedList) linkedList.add(node.`val`)&#125; è¿­ä»£æ³• 12345678910111213141516171819202122fun postorderTraversal(root: TreeNode?): List&lt;Int&gt; &#123; var mRoot = root val resultList = LinkedList&lt;Int&gt;() val stack = Stack&lt;TreeNode&gt;() var preNode: TreeNode? = null while (mRoot != null || !stack.isEmpty()) &#123; while (mRoot != null) &#123; stack.push(mRoot) mRoot = mRoot.left &#125; mRoot = stack.pop() if (mRoot?.right == null || mRoot.right == preNode) &#123; // ä¸€å¼€å§‹å†™æˆè¿™æ · mRoot == preNode,å¯¼è‡´æ­»å¾ªçŽ¯ resultList.add(mRoot.`val`) preNode = mRoot mRoot = null &#125; else &#123; stack.push(mRoot) mRoot = mRoot.right &#125; &#125; return resultList &#125; https://leetcode.cn/problems/binary-tree-postorder-traversal/solution/er-cha-shu-de-hou-xu-bian-li-by-leetcode-solution/ åŠ¨å›¾ å®˜æ–¹é¢˜è§£ è¿­ä»£æ³•ç»Ÿä¸€å†™æ³• https://leetcode.cn/problems/binary-tree-inorder-traversal/solution/dai-ma-sui-xiang-lu-che-di-chi-tou-qian-xjof1/ è¿™ä¸ªç»Ÿä¸€æ³•è¿˜æ²¡ç ”ç©¶ï¼Œå…ˆå¾€åŽå­¦å§ï¼Œåœ°é“ä¸Šçœ‹äº†ä¸‹ï¼Œå…¶å®žä¹Ÿä¸éš¾ 102. äºŒå‰æ ‘çš„å±‚åºéåŽ† æŒ‰ç…§é¡ºåºï¼Œä¸‹ä¸€å±‚çš„æ”¾åœ¨åŽé¢. è¿­ä»£å†™æ³•12345678910111213141516171819fun levelOrder(root: TreeNode?): List&lt;List&lt;Int&gt;&gt; &#123; val layerList = LinkedList&lt;List&lt;Int&gt;&gt;() val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size // queueå¤§å°ï¼Œä¸‹é¢å¾ªçŽ¯åœ¨ä¸æ–­å˜åŒ–ï¼Œæ‰€ä»¥è¦å…ˆå®šä¹‰å‡ºæ¥ val linkedList = LinkedList&lt;Int&gt;() for (i in 0 until layerSize) &#123; val headNode = queue.poll() linkedList.add(headNode.`val`) headNode.left?.let &#123; queue.offer(it) &#125; headNode.right?.let &#123; queue.offer(it) &#125; &#125; layerList.add(linkedList) &#125; return layerList&#125; é€’å½’è§£æ³•é€’å½’è§£æ³•ä¸€å¼€å§‹æ²¡ç†è§£ï¼Œå†çœ‹äº†ä¸‹ï¼Œæ€è·¯å¾ˆå¦™ 123456789101112131415161718192021222324fun levelOrder1(root: TreeNode?): List&lt;List&lt;Int&gt;&gt; &#123; val layerList = LinkedList&lt;LinkedList&lt;Int&gt;&gt;() if (root==null)&#123; return layerList &#125; val depth = 0 // å±‚çº§ return recursive(layerList, root, depth)&#125;private fun recursive(layerList: LinkedList&lt;LinkedList&lt;Int&gt;&gt;, node: TreeNode?, depth: Int): List&lt;List&lt;Int&gt;&gt; &#123; if (layerList.size &lt;= depth) &#123; //äºŒç»´æ•°ç»„é•¿åº¦ä¸è¶…è¿‡è¿™ä¸ªå±‚çº§,éšæƒ³å½•è¿™é‡Œæ˜¯ç”¨ ==,ä¸è¿‡æˆ‘è§‰å¾—&lt;=æ›´å¥½ val linkedList = LinkedList&lt;Int&gt;() layerList.add(linkedList) &#125; node?.`val`?.let &#123; layerList[depth].add(it) &#125; // æ‹¿åˆ°å½“å‰å±‚çº§èŠ‚ç‚¹çš„å€¼ val mDepth = depth + 1 if (node?.left != null) &#123; recursive(layerList, node.left, mDepth) &#125; if (node?.right != null) &#123; recursive(layerList, node.right, mDepth) &#125; return layerList&#125; https://leetcode.cn/problems/binary-tree-level-order-traversal/solution/er-cha-shu-de-ceng-xu-bian-li-by-leetcode-solution/ https://programmercarl.com/0102.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86.html 107. äºŒå‰æ ‘çš„å±‚åºéåŽ† II123456789101112131415161718192021fun levelOrderBottom(root: TreeNode?): List&lt;List&lt;Int&gt;&gt; &#123; val resultList = LinkedList&lt;ArrayList&lt;Int&gt;&gt;() val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size // queueå¾ªçŽ¯ä¸­ ä¸æ–­çš„å˜åŒ– val arrayList = ArrayList&lt;Int&gt;() for (i in 0 until layerSize) &#123; val headNode = queue.poll() if (headNode != null) &#123; arrayList.add(headNode.`val`) headNode.left?.let &#123; queue.offer(it) &#125; headNode.right?.let &#123; queue.offer(it) &#125; &#125; &#125; resultList.addFirst(arrayList) &#125; return resultList&#125; 199. äºŒå‰æ ‘çš„å³è§†å›¾å¹¿åº¦ä¼˜å…ˆéåŽ†12345678910111213141516171819fun rightSideView(root: TreeNode?): List&lt;Int&gt; &#123; val resultList = LinkedList&lt;Int&gt;() val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.add(root) &#125; while (queue.isNotEmpty()) &#123; val layoutSize = queue.size for (i in 0 until layoutSize) &#123; val headNode = queue.poll() if (i == layoutSize - 1) &#123; resultList.add(headNode.`val`) &#125; headNode?.left?.let &#123; queue.offer(it) &#125; headNode?.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return resultList&#125; DFS æ·±åº¦ä¼˜å…ˆéåŽ†è¿™ä¸ªDFSå¾ˆå¦™ï¼Œè¿™æ¬¡åªæ˜¯å…ˆç†è§£,äºŒåˆ·çš„æ—¶å€™å¯ä»¥è‡ªå·±å†™å†™ 123456789101112131415161718class Solutions&#123; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; rightSideView(TreeNode root)&#123; dfs(root,0) return res; &#125; prvidate void dfs(TreeNode root, int depth)&#123; if(root ==null)&#123; return; &#125; if(depth == res.size())&#123; // å½“å‰å±‚çº§ç¬¬ä¸€ä¸ªå³èŠ‚ç‚¹è¿˜æ²¡æœ‰ï¼Œæ·»åŠ åˆ°ç»“æžœä¸­ res.add(root.val) &#125; depth++; dfs(root.right,depth) dfs(root.left,depth) &#125;&#125; ç†è§£åœ¨å®˜æ–¹è§†é¢‘ä¸­. https://leetcode.cn/problems/binary-tree-right-side-view/solution/er-cha-shu-de-you-shi-tu-by-leetcode-solution/ 637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼12345678910111213141516171819fun averageOfLevels(root: TreeNode?): DoubleArray &#123; val resultList = ArrayList&lt;Double&gt;() val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layoutSize = queue.size var layerSum = 0.toDouble() for (i in 0 until layoutSize) &#123; val node = queue.poll() layerSum += node.`val` node?.left?.let &#123; queue.offer(it) &#125; node?.right?.let &#123; queue.offer(it) &#125; &#125; val average = resultList.add(layerSum * 1.00000 / layoutSize) &#125; return resultList.toDoubleArray()&#125; 429. N å‰æ ‘çš„å±‚åºéåŽ†1234567891011121314151617181920fun levelOrder(root: Node?): List&lt;List&lt;Int&gt;&gt; &#123; val result = LinkedList&lt;ArrayList&lt;Int&gt;&gt;() val queue = LinkedList&lt;Node&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layoutSize = queue.size // è¯¥å±‚çº§çš„èŠ‚ç‚¹æ•° val layerResult = ArrayList&lt;Int&gt;() for (i in 0 until layoutSize) &#123; val pollNode = queue.poll() layerResult.add(pollNode.`val`) pollNode.children.forEach &#123; // åªæœ‰è¿™é‡Œæœ‰ç‚¹ä¸åŒ queue.offer(it) &#125; &#125; result.add(layerResult) &#125; return result&#125; 515. åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼12345678910111213141516171819fun largestValues(root: TreeNode?): List&lt;Int&gt; &#123; val answer = ArrayList&lt;Int&gt;() val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size var maxValue = Int.MIN_VALUE //æœ€å°å€¼ , æ¯ä¸€å±‚çº§éƒ½è¦åˆå§‹åŒ–ï¼Œå¦åˆ™æ‹¿åˆ°ä¸Šä¸€å±‚çº§çš„å€¼ï¼Œå°±ä¸æ˜¯æœ€å°å€¼ï¼Œä¼šæœ‰é—®é¢˜ for (i in 0 until layerSize) &#123; val pollNode = queue.poll() maxValue = pollNode.`val`.coerceAtLeast(maxValue) // æ¯”è¾ƒå–æœ€å¤§å€¼ pollNode?.left?.let &#123; queue.offer(it) &#125; pollNode?.right?.let &#123; queue.offer(it) &#125; &#125; answer.add(maxValue) &#125; return answer&#125; 116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ ä¸€å¼€å§‹ç”¨è¿™ç§æ–¹å¼ï¼Œä½†æ˜¯ä¼šæç¤º â€œè¶…å‡ºå†…å­˜é™åˆ¶â€ 123456789101112131415161718192021222324252627 fun connect(root: Node?): Node? &#123;// val answerList = ArrayList&lt;String&gt;() //æ ¹æ®é¢˜æ„, ä¸€å¼€å§‹ä»¥ä¸ºè¦è¿”å›žè¿™ä¸ªç­”æ¡ˆ,å…¶å®žåªè¦è¿žæŽ¥åŽ è¿”å›žrootå°±å¥½äº† val queue = LinkedList&lt;Node&gt;() if (root != null) &#123; queue.offer(root) &#125; var preNode: Node?=null while (queue.isNotEmpty()) &#123; val layerSize = queue.size preNode = null for (i in 0 until layerSize) &#123; val curNode = queue.poll() preNode = curNode if (preNode != null) &#123; preNode.next = curNode &#125;// answerList.add(curNode.`val`.toString()) if (i == layerSize - 1) &#123; curNode.next = null // æœ€åŽä¸ªnode æŒ‡å‘null // answerList.add(&quot;#&quot;) &#125; curNode?.left?.let &#123; queue.offer(it) &#125; curNode?.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return root &#125; å®˜æ–¹è§£æ³• è¿˜æœ‰å¦ä¸€ç§è§£æ³•ï¼ŒäºŒåˆ·æ—¶å¯ä»¥ç ”ç©¶ç ”ç©¶ 123456789101112131415161718fun connect(root: Node?): Node? &#123; val queue = LinkedList&lt;Node&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size for (i in 0 until layerSize) &#123; val curNode = queue.poll() if (i &lt; layerSize - 1) &#123; curNode.next = queue.peek() &#125; curNode?.left?.let &#123; queue.offer(it) &#125; curNode?.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return root&#125; https://leetcode.cn/problems/populating-next-right-pointers-in-each-node/solution/tian-chong-mei-ge-jie-dian-de-xia-yi-ge-you-ce-2-4/ 117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ IIå’Œ116é¢˜å”¯ä¸€çš„åŒºåˆ«ï¼Œ116æ˜¯å®Œç¾ŽäºŒå‰æ ‘ 104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¹¿åº¦ä¼˜å…ˆ Breadth-First-Search12345678910111213141516171819fun maxDepth(root: TreeNode?): Int &#123; val queue = LinkedList&lt;TreeNode&gt;() var depth = 0 if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty()) &#123; val layerSize = queue.size for (i in 0 until layerSize) &#123; val pollNode = queue.poll() pollNode?.left?.let &#123; queue.add(it) &#125; pollNode?.right?.let &#123; queue.add(it) &#125; if (i == layerSize - 1) &#123; depth++ &#125; &#125; &#125; return depth&#125; é€’å½’ Depth First Searchè¿™é¢˜ç”¨ä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥äº†ï¼ŒéåŽ†å·¦å³å­æ ‘å–æœ€å¤§å€¼åŽ å†åŠ  1 è¿™ä¸ªå…¶å®žä¹Ÿæ˜¯å…ˆåºéåŽ†,å·¦å³ä¸­ https://programmercarl.com/0104.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6.html#%E9%80%92%E5%BD%92%E6%B3%95 1234int leftdepth = getdepth(node-&gt;left); // å·¦int rightdepth = getdepth(node-&gt;right); // å³int depth = 1 + max(leftdepth, rightdepth); // ä¸­return depth; å¯ä»¥çœ‹çœ‹éšæƒ³å½•çš„è§£æ³•ï¼Œé‡Œé¢æœ‰å›žæº¯çš„è¿‡ç¨‹ï¼Œè¿‡ç¨‹æ›´è¯¦ç»† ä¸‹é¢è§£æ³•åšäº†ç®€åŒ– 1234567891011fun maxDepth(root: TreeNode?): Int &#123; val depth = 0 if (root == null) return depth return dfsDepth(root, depth)&#125;private fun dfsDepth(node: TreeNode?, depth: Int): Int &#123; if (node == null) return depth val maxDepth = Math.max(dfsDepth(node.left, depth + 1), dfsDepth(node.right, depth + 1)) // ç”¨maxå‡½æ•°æ›´ç›´è§‚ return maxDepth&#125; https://leetcode.cn/problems/maximum-depth-of-binary-tree/solution/er-cha-shu-de-zui-da-shen-du-by-leetcode-solution/ 559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦DFS è¿™ä¸ªDFSè§£æ³• çœ‹äº†å®˜æ–¹é¢˜è§£ç­”æ¡ˆï¼Œè‡ªå·±å†åšä¸€æ¬¡ https://leetcode.cn/problems/maximum-depth-of-n-ary-tree/solution/n-cha-shu-de-zui-da-shen-du-by-leetcode-n7qtv/ 123456789fun maxDepth(root: Node?): Int &#123; if (root == null) return 0 var maxDepth = 0 root.children.forEach &#123; val depth = maxDepth(it) maxDepth = Math.max(maxDepth, depth) &#125; return maxDepth +1&#125; BFS 123456789101112131415161718192021fun maxDepth1(root: Node?): Int &#123; val queue = LinkedList&lt;Node&gt;() if (root != null) &#123; queue.offer(root) &#125; var maxDepth = 0 while (queue.isNotEmpty()) &#123; val layerSize = queue.size for (i in 0 until layerSize) &#123; val pollNode = queue.poll() if (i == 0) &#123; // è¿™ä¸ªæ¡ä»¶å¯ä»¥åŽ»æŽ‰ maxDepth++ &#125; pollNode.children.forEach &#123; if (it != null) queue.offer(it) &#125; &#125; &#125; return maxDepth&#125; 12345678910111213141516171819fun maxDepth1(root: Node?): Int &#123; val queue = LinkedList&lt;Node&gt;() if (root != null) &#123; queue.offer(root) &#125; var maxDepth = 0 while (queue.isNotEmpty()) &#123; val layerSize = queue.size maxDepth++ //æ‹¿åˆ°å¤–é¢æ›´å¥½ï¼Œä¸ç”¨åˆ¤æ–­i==1äº†,æ¯æ¬¡layerSize éåŽ†å®Œå°±æ˜¯ä¸€å±‚äº† for (i in 0 until layerSize) &#123; val pollNode = queue.poll() pollNode.children.forEach &#123; if (it != null) queue.offer(it) &#125; &#125; &#125; return maxDepth&#125; 111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦BFS 1234567891011121314151617181920fun minDepth(root: TreeNode?): Int &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; var depth = 0 while (queue.isNotEmpty()) &#123; val layerSize = queue.size depth++ // ä¸ç”¨æ”¾ä¸‹é¢åˆ¤æ–­ï¼Œç›´æŽ¥æ˜¯ä¸€å±‚æ–°çš„ for (i in 0 until layerSize) &#123; val pollNode = queue.poll() if (pollNode.left == null &amp;&amp; pollNode.right == null) &#123; return depth &#125; pollNode?.left?.let &#123; queue.offer(it) &#125; pollNode?.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return depth&#125; å®˜æ–¹é¢˜è§£çœ‹èµ·æ¥ï¼Œæ›´å¥½ https://leetcode.cn/problems/minimum-depth-of-binary-tree/solution/er-cha-shu-de-zui-xiao-shen-du-by-leetcode-solutio/ DFS https://leetcode.cn/problems/minimum-depth-of-binary-tree/solution/bfshe-dfsliang-chong-fang-shi-jie-jue-by-g4eh/ ç”¨äº†è¿™ä¸ªè§†é¢‘çš„è§£æ³• 1234567891011fun minDepth(root: TreeNode?): Int &#123; if (root == null) return 0 //å·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹éƒ½ä¸ä¸ºç©ºï¼Œç„¶åŽå–æœ€å°å€¼æ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™å°±æ˜¯é”™çš„ if (root.left != null &amp;&amp; root.right != null) &#123; // å·¦å³éƒ½ä¸ä¸ºç©º return Math.min(minDepth(root.left), minDepth(root.right)) + 1 &#125; else if (root.left == null) &#123; //å·¦ä¸ä¸ºç©º return minDepth(root.right) + 1 &#125; return minDepth(root.left) + 1 //å³ä¸ä¸ºç©º&#125; ç†è§£äº†è¿™ä¸ªè§£æ³•ï¼Œå†çœ‹å®˜æ–¹çš„DFSè§£æ³•ï¼Œä¹Ÿç®€å•æ˜Žäº† https://leetcode.cn/problems/minimum-depth-of-binary-tree/solution/er-cha-shu-de-zui-xiao-shen-du-by-leetcode-solutio/ 226. ç¿»è½¬äºŒå‰æ ‘é€’å½’ 123456789101112131415//ä½¿ç”¨å…ˆåºéåŽ†fun invertTree(root: TreeNode?): TreeNode? &#123; if (root == null) return null swapNode(root) invertTree(root.left) invertTree(root.right) return root&#125;private fun swapNode(node: TreeNode?) &#123; val temp = node?.left node?.left = node?.right node?.right = temp&#125; 123456789public TreeNode invertTree(TreeNode root) &#123; if(root == null) return null; invertTree(root.left);//æ³¨æ„è¿™é‡Œæ˜¯left TreeNode temp = root.left; root.left = root.right; root.right = temp; invertTree(root.left);//è¿™é‡Œè¿˜æ˜¯left return root;&#125; â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç‰ˆæƒå£°æ˜Žï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œxsybgã€çš„åŽŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŽŸæ–‡å‡ºå¤„é“¾æŽ¥åŠæœ¬å£°æ˜Žã€‚åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/xsybg/article/details/122687168 æ³¨æ„ä¸¤ä¸ªé€’å½’è°ƒç”¨çš„å‚æ•°éƒ½æ˜¯root.left, å› ä¸ºåœ¨ç¬¬äºŒæ­¥æ˜¯äº¤æ¢rootçš„å·¦å³å­©å­ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸‰æ­¥è¦å¤„ç†çš„å³å­©å­å…¶å®žå·²ç»å˜æˆäº†rootçš„å·¦å­©å­ï¼Œæ˜¯ä¸æ˜¯å¾ˆæœ‰è¶£ï¼Ÿè¿™ä¸ªé¢˜ç›®å¾ˆç®€å•ï¼Œä½†æ˜¯ç¡®å®žä¼šç¨€é‡Œç³Šæ¶‚åœ°é€šè¿‡ï¼Œæ²¡æžæ¸…æ¥šæ˜¯æ ‘çš„å“ªä¸€ç§éåŽ†ï¼Œçœ‹äº†ä»£ç éšæƒ³å½•çš„è§£æžæ„Ÿè§‰è¿˜æŒºæƒŠå–œçš„ã€‚ä»£ç éšæƒ³å½•çš„é“¾æŽ¥è´´åœ¨è¿™é‡Œï¼šâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç‰ˆæƒå£°æ˜Žï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œxsybgã€çš„åŽŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŽŸæ–‡å‡ºå¤„é“¾æŽ¥åŠæœ¬å£°æ˜Žã€‚åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/xsybg/article/details/122687168 æ ¹æ®ä¸‹é¢æ‰“å° 4çš„åå­æ ‘ä¸­çš„1,3äº¤æ¢äº†ä¸¤æ¬¡ï¼Œ 6,9ä¸€æ¬¡éƒ½æ²¡äº¤æ¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162 4 &#x2F; \\ 2 7 &#x2F; \\ &#x2F; \\ 1 3 6 9 node 4 4 &#x2F; \\ 2 7 &#x2F; \\ &#x2F; \\ 1 3 6 9 node 2 4 &#x2F; \\ 2 7 &#x2F; \\ &#x2F; \\ 1 3 6 9 node 1 4 &#x2F; \\ 2 7 &#x2F; \\ &#x2F; \\ 1 3 6 9 node 1 4 &#x2F; \\ 2 7 &#x2F; \\ &#x2F; \\ 3 1 6 9 node 2 4 &#x2F; \\ 7 2 &#x2F; \\ &#x2F; \\ 6 9 3 1 node 3 4 &#x2F; \\ 7 2 &#x2F; \\ &#x2F; \\ 6 9 3 1 node 3 4 &#x2F; \\ 7 2 &#x2F; \\ &#x2F; \\ 6 9 1 3 å¹¿åº¦ä¼˜å…ˆéåŽ†(å±‚åºéåŽ†)éåŽ†å·¦å³èŠ‚ç‚¹å°±å¯ä»¥.ç„¶åŽäº¤æ¢å°±å¯ä»¥äº† 12345678910111213141516fun invertTree1(root: TreeNode?): TreeNode? &#123; val queue = LinkedList&lt;TreeNode&gt;() if (root != null) &#123; queue.offer(root) &#125; while (queue.isNotEmpty())&#123; val layerSize = queue.size for (i in 0 until layerSize)&#123; val pollNode = queue.poll() swapNode(pollNode) pollNode.left?.let &#123; queue.offer(it) &#125; pollNode.right?.let &#123; queue.offer(it) &#125; &#125; &#125; return root&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"LC-stack-queue","slug":"LC-stack-queue","date":"2022-07-03T04:16:17.000Z","updated":"2023-01-02T03:31:39.091Z","comments":true,"path":"2022/07/03/LC-stack-queue/","link":"","permalink":"https://noteforme.github.io/2022/07/03/LC-stack-queue/","excerpt":"","text":"232. ç”¨æ ˆå®žçŽ°é˜Ÿåˆ—æœ€åˆå†™çš„ 1234567891011121314151617181920212223242526272829303132333435363738val stack = Stack&lt;Int&gt;() // å…ƒç´ æ ˆval tempStack = Stack&lt;Int&gt;() // å¤‡ç”¨fun push(x: Int) &#123; stack.push(x)&#125;fun pop(): Int &#123; while (!stack.empty()) &#123; tempStack.push(stack.pop()) &#125; var pop = 0 if (!tempStack.isEmpty()) &#123; pop = tempStack.pop() // è¿™é‡Œå–çš„å°±æ˜¯å¤´å…ƒç´  &#125; while (!tempStack.empty()) &#123; stack.push(tempStack.pop()) &#125; return pop&#125;fun peek(): Int &#123; while (!stack.empty()) &#123; tempStack.push(stack.pop()) &#125; var peek = 0 if (!tempStack.isEmpty()) &#123; peek = tempStack.peek() // è¿™é‡Œå–çš„å°±æ˜¯å¤´å…ƒç´ ,ä¸ä¼šåˆ é™¤ &#125; while (!tempStack.empty()) &#123; stack.push(tempStack.pop()) &#125; return peek&#125;fun empty(): Boolean &#123; return stack.empty()&#125; åœ¨LC232åŸºç¡€ä¸Šè¿›è¡Œçš„ä¼˜åŒ–ï¼Œä¹‹å‰æ¯æ¬¡popåŽï¼Œè¿˜å¾—æŠŠå…ƒç´ æ”¾å›žåŽ»,è¿™é‡Œåªæœ‰pushåˆ¤æ–­ tempStackæœ‰æ²¡æœ‰å…ƒç´  https://leetcode.cn/problems/implement-queue-using-stacks/solution/wen-zi-shi-pin-de-fang-shi-xiang-xi-jiang-jie-li-2/ 123456789101112131415161718192021222324252627282930val stackIn = Stack&lt;Int&gt;() // å…ƒç´ æ ˆval tempStack = Stack&lt;Int&gt;() // å¤‡ç”¨fun push(x: Int) &#123; while (!tempStack.empty())&#123; // stackIn.push(tempStack.pop()) &#125; stackIn.push(x)&#125;fun pop(): Int &#123; while (!stackIn.empty()) &#123; tempStack.push(stackIn.pop()) &#125; var pop = -1 // éœ€è¦-1 if (!tempStack.isEmpty()) &#123; pop = tempStack.pop() // è¿™é‡Œå–çš„å°±æ˜¯å¤´å…ƒç´  &#125; return pop&#125;fun peek(): Int &#123; val pop = this.pop() stackIn.push(pop) // å¤ç”¨popï¼Œæ‹¿å‡ºæ¥ å†æ”¾å›žåŽ» return pop&#125;fun empty(): Boolean &#123; return tempStack.empty()&amp;&amp;stackIn.empty()&#125; éšæƒ³å½•å†™æ³• https://programmercarl.com/0232.%E7%94%A8%E6%A0%88%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97.html#%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC åœ¨LC232_01åŸºç¡€ä¸Šè¿›è¡Œçš„ä¼˜åŒ–ï¼Œpushçš„æ—¶å€™ä¸ç”¨æ¯æ¬¡éƒ½åˆ¤æ–­ï¼Œåªæœ‰stackOutæ˜¯ç©ºçš„æ—¶å€™ï¼Œæ‰éœ€è¦å–åŽé¢çš„å…ƒç´  1234567891011121314151617181920212223242526272829private val stackIn = Stack&lt;Int&gt;() // è¾“å…¥æ ˆprivate val stackOut = Stack&lt;Int&gt;() // è¾“å‡ºæ ˆfun push(x: Int) &#123; stackIn.push(x)&#125;fun pop(): Int &#123; if (stackOut.isEmpty()) &#123; while (!stackIn.empty()) &#123; stackOut.push(stackIn.pop()) &#125; &#125; var data = -1 if (!stackOut.isEmpty()) &#123; data = stackOut.pop() &#125; return data&#125;fun peek(): Int &#123; val pop = this.pop() stackOut.push(pop) // å¤ç”¨popï¼Œæ‹¿å‡ºæ¥ å†æ”¾å›žåŽ» return pop&#125;fun empty(): Boolean &#123; return stackOut.empty() &amp;&amp; stackIn.empty()&#125; 225. ç”¨é˜Ÿåˆ—å®žçŽ°æ ˆæˆ‘çš„è§£æ³•123456789101112131415161718192021222324252627282930313233343536private val mainDeque = ArrayDeque&lt;Int&gt;()private val tempDeque = ArrayDeque&lt;Int&gt;()fun push(x: Int) &#123; while (!tempDeque.isEmpty()) &#123; mainDeque.offerLast(tempDeque.poll()) &#125; mainDeque.offerLast(x)&#125;fun pop(): Int &#123; var data = -1 while (!mainDeque.isEmpty()) &#123; if (mainDeque.size == 1) &#123; data = mainDeque.poll() &#125; else &#123; data = mainDeque.poll() tempDeque.offerLast(data) &#125; &#125; while (!tempDeque.isEmpty()) &#123; mainDeque.offerLast(tempDeque.poll()) &#125; return data&#125;fun top(): Int &#123; val pop = this.pop() mainDeque.offerLast(pop) return pop&#125;fun empty(): Boolean &#123; return tempDeque.isEmpty() &amp;&amp; mainDeque.isEmpty()&#125; ä¸¤ä¸ªé˜Ÿåˆ—https://programmercarl.com/0225.%E7%94%A8%E9%98%9F%E5%88%97%E5%AE%9E%E7%8E%B0%E6%A0%88.html https://leetcode.cn/problems/implement-stack-using-queues/solution/yong-dui-lie-shi-xian-zhan-by-leetcode-solution/ è¿™é‡Œçš„è§†é¢‘æ•™ç¨‹æ›´å¥½ç†è§£. 1234567891011121314151617181920212223242526private var mainDeque = LinkedList&lt;Int&gt;()private var tempDeque = LinkedList&lt;Int&gt;()fun push(x: Int) &#123; tempDeque.offer(x) while (!mainDeque.isEmpty()) &#123; tempDeque.offerLast(mainDeque.poll()) &#125; val temp = mainDeque //æ­¤æ—¶mainDequeä¸€å®šæ˜¯ç©ºçš„,ä¸è¿‡æ²¡å…³ç³»ï¼Œä¸ç”¨å†åˆ›å»ºä¸€ä¸ª mainDeque = tempDeque //äº¤æ¢é˜Ÿåˆ—å…ƒç´ , tempDequeçš„å…ƒç´ ç»™mainDeque tempDeque = temp&#125;fun pop(): Int &#123; return mainDeque.poll() //åˆ é™¤å¹¶è¿”å›žå…ƒç´ &#125;fun top(): Int &#123; return mainDeque.peek() // è¿”å›žå…ƒç´ &#125;fun empty(): Boolean &#123; return tempDeque.isEmpty() &amp;&amp; mainDeque.isEmpty()&#125; ä¸€ä¸ªé˜Ÿåˆ—ä¹Ÿæ˜¯ä¸Šé¢å®˜æ–¹æ•™ç¨‹ 1234567891011121314151617181920private var mainDeque = LinkedList&lt;Int&gt;()fun push(x: Int) &#123; mainDeque.offer(x) for (i in 0 until mainDeque.size - 1) &#123; // æ³¨æ„è¿™é‡Œè¦-1,è¿™æ ·æœ€åŽå…¥é˜Ÿçš„å°±åœ¨å¤´éƒ¨.å¦åˆ™å°±æ²¡æœ‰æ„ä¹‰äº† mainDeque.offer(mainDeque.poll()) &#125;&#125;fun pop(): Int &#123; return mainDeque.poll() //åˆ é™¤å¹¶è¿”å›žå…ƒç´ &#125;fun top(): Int &#123; return mainDeque.peek() // è¿”å›žå…ƒç´ &#125;fun empty(): Boolean &#123; return mainDeque.isEmpty()&#125; 123456789101112131415val queue = LinkedList&lt;Int&gt;()queue.offer(0)queue.offer(1)queue.offer(2)queue.offer(3)for (i in 0 until queue.size - 1) &#123; queue.offer(queue.poll()) println(queue)&#125;//çœ‹åˆ°è¿™ä¸ªå…¥é˜Ÿç»“æžœ// [1, 2, 3, 0]//[2, 3, 0, 1]//[3, 0, 1, 2] 20. æœ‰æ•ˆçš„æ‹¬å·123456789101112fun isValid(s: String): Boolean &#123; val mapOf = mapOf(&#x27;(&#x27; to &#x27;)&#x27;, &#x27;&#123;&#x27; to &#x27;&#125;&#x27;, &#x27;[&#x27; to &#x27;]&#x27;) val stack = Stack&lt;Char&gt;() s.chars().forEach &#123; if (!stack.empty() &amp;&amp; mapOf[stack.peek()] == it.toChar()) &#123; //stack ä¸ºç©º å–å‡ºä¼šæŠ›å‡ºå¼‚å¸¸, mapOfåº”è¯¥å–å·¦è¾¹çš„ç¬¦å·ä¹Ÿå°±æ˜¯stacké‡Œçš„ stack.pop() &#125; else &#123; stack.push(it.toChar()) &#125; &#125; return stack.empty()&#125; 1047. åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹è€Œä¸”åœ¨ä¼ä¸šé¡¹ç›®å¼€å‘ä¸­ï¼Œå°½é‡ä¸è¦ä½¿ç”¨é€’å½’ï¼åœ¨é¡¹ç›®æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œç”±äºŽå‚æ•°å¤šï¼Œå…¨å±€å˜é‡ç­‰ç­‰ï¼Œä½¿ç”¨é€’å½’å¾ˆå®¹æ˜“åˆ¤æ–­ä¸å……åˆ†returnçš„æ¡ä»¶ï¼Œéžå¸¸å®¹æ˜“æ— é™é€’å½’ï¼ˆæˆ–è€…é€’å½’å±‚çº§è¿‡æ·±ï¼‰ï¼Œé€ æˆæ ˆæº¢å‡ºé”™è¯¯ï¼ˆè¿™ç§é—®é¢˜è¿˜ä¸å¥½æŽ’æŸ¥ï¼ï¼‰ 1234567891011fun removeDuplicates(s: String): String &#123; val stack = Stack&lt;Char&gt;() s.chars().forEach &#123; if(!stack.empty()&amp;&amp;stack.peek()==it.toChar())&#123; stack.pop() &#125;else&#123; stack.push(it.toChar()) &#125; &#125; return stack.joinToString(separator = &quot;&quot;)&#125; 150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼1234567891011121314151617181920212223242526fun evalRPN(tokens: Array&lt;String&gt;): Int &#123; val stack = Stack&lt;Int&gt;() tokens.forEach &#123; if (it == &quot;+&quot; || it == &quot;-&quot; || it == &quot;*&quot; || it == &quot;/&quot;) &#123; val pop1 = stack.takeUnless &#123; p1 -&gt; p1.empty() &#125;?.pop() val pop2 = stack.takeUnless &#123; p2 -&gt; p2.empty() &#125;?.pop() if (pop1 != null &amp;&amp; pop2 != null) &#123; val result = getResult(it, pop2.toInt(), pop1.toInt()) // stackå–çš„ç¬¬äºŒä¸ªæ•°æ”¾å‰é¢ stack.push(result) &#125; &#125; else &#123; stack.push(it.toInt()) &#125; &#125; return stack.peek()&#125;private fun getResult(operator: String, pop1: Int, pop2: Int): Int &#123; return when (operator) &#123; &quot;+&quot; -&gt; pop1 + pop2 &quot;-&quot; -&gt; pop1 - pop2 &quot;*&quot; -&gt; pop1 * pop2 &quot;/&quot; -&gt; pop1 / pop2 else -&gt; throw RuntimeException(&quot;oh something went wrong&quot;) &#125;&#125; 239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼å­˜å‚¨å…ƒç´ åæ ‡https://programmercarl.com/0239.%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%80%E5%A4%A7%E5%80%BC.html nums[index - k]æ˜¯é˜Ÿåˆ—å¤´éƒ¨æœ€å¤§å…ƒç´ ï¼Œæ­¤æ—¶æœ€å¤§å…ƒç´ å‡ºé˜Ÿåˆ—,å› ä¸ºæœ€å¤§å…ƒç´ ä¸€å®šæ”¹çª—å£çš„æœ€å·¦ä¾§å…ƒç´ ï¼Œ å¦‚æžœä¸æ˜¯æœ€å¤§å…ƒç´ ï¼Œå› ä¸ºæ»‘åŠ¨çª—å£å¯èƒ½æ²¡æœ‰kä¸ªå…ƒç´ ,ä¹Ÿä¸ç”¨æ‹…å¿ƒæ˜¯ä¸æ˜¯ç•™åœ¨çª—å£é‡Œï¼Œè¿™ç§æƒ…å†µä¸‹å…¶å®žåœ¨ä¸‹é¢pushå·²ç»æ—©å‡ºåŽ»äº† è¿™æ ·æ›´å¥½ç†è§£ ç§»åŠ¨çª—å£,é˜Ÿåˆ—å¤´ç»“ç‚¹éœ€è¦åœ¨[i - k + 1, i]èŒƒå›´å†…ï¼Œä¸ç¬¦åˆåˆ™è¦å¼¹å‡º è¿™ç§ä¹Ÿæ˜¯å®˜æ–¹è§£æ³• 123456789101112131415161718fun maxSlidingWindow2(nums: IntArray, k: Int): IntArray &#123; val linkedList = LinkedList&lt;Int&gt;() val resultArray = IntArray(nums.size - (k - 1)) // å¦‚æžœçª—å£æ˜¯3ä¸ªå…ƒç´ ï¼Œç»“æž„æ•°ç»„å°±éœ€è¦å°‘ä¸¤ä¸ªå…ƒç´  var i = 0 nums.forEachIndexed &#123; index, value -&gt; if (!linkedList.isEmpty() &amp;&amp; linkedList.peek() &lt; index - (k - 1)) &#123; //è¿™æ ·æ›´å¥½ç†è§£ ç§»åŠ¨çª—å£,é˜Ÿåˆ—å¤´ç»“ç‚¹éœ€è¦åœ¨[i - k + 1, i]èŒƒå›´å†…ï¼Œä¸ç¬¦åˆåˆ™è¦å¼¹å‡º linkedList.pop() &#125; while (!linkedList.isEmpty() &amp;&amp; value &gt; nums[linkedList.last()]) &#123; // å¦‚æžœå¤§äºŽæœ€åŽä¸€ä¸ªå…ƒç´  linkedList.removeLast() //æœ€åŽä¸€ä¸ªå…ƒç´ å‡ºé˜Ÿåˆ— &#125; linkedList.offer(index) //å¦åˆ™ç›´æŽ¥å…¥é˜Ÿ,è¿™æ ·ä¿æŒé˜Ÿåˆ—å…ƒç´ å•è°ƒé€’å‡ if (index &gt;= (k - 1)) &#123; //å¦‚æžœæ˜¯3ä¸ªå…ƒç´ ï¼Œä»Žä½ç½®2å¼€å§‹å­˜æœ€å¤§å€¼ï¼Œå¦‚æžœæ˜¯1ä¸ªå…ƒç´ ï¼Œå°±ä»Ž0å­˜æœ€å¤§å€¼ resultArray[i++] = nums[linkedList.peek()] &#125; &#125; return resultArray&#125; https://leetcode.cn/problems/sliding-window-maximum/solution/hua-dong-chuang-kou-de-zui-da-zhi-bao-mu-9eci/ MyQueueéšæƒ³å½•å®šä¹‰Myquue,æ›´å¥½ï¼Œå•ä¸€æŒ‡è´£ï¼Œæ›´æœ‰å±‚æ¬¡æ„Ÿ // æ³¨æ„å…ˆå°†å‰kçš„å…ƒç´ æ”¾è¿›é˜Ÿåˆ—,æ­¤æ—¶pushæ–¹æ³•ï¼Œæ”¾å®ŒåŽå·²ç»æ˜¯æŒ‰ç…§å•è°ƒé€’å‡é˜Ÿåˆ—æ¥çš„äº† äºŒåˆ·æ¥åˆ·åˆ·åˆ· 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ å¤§é¡¶å † çœ‹å®˜æ–¹é¢˜è§£ç†è§£äº† ä½†æ˜¯å¤§é¡¶å † å°é¡¶å †åŒºåˆ«ä¸æ˜¯å¾ˆæ˜Žç™½ï¼Œå­¦å®Œæ ‘å†æ¥ç»§ç»­åšè¿™ä¸ªé¢˜ç›®","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"","slug":"TouchEvent1","date":"2022-06-12T03:17:58.728Z","updated":"2024-06-03T11:28:15.725Z","comments":true,"path":"2022/06/12/TouchEvent1/","link":"","permalink":"https://noteforme.github.io/2022/06/12/TouchEvent1/","excerpt":"","text":"ä»Šå¤©å­¦ä¹ Androidçš„æ˜¯äº‹ä»¶åˆ†å‘æœºåˆ¶çš„éƒ¨åˆ†å†…å®¹ã€‚ Androidäº‹ä»¶åˆ†å‘æœºåˆ¶æ˜¯æŒ‡åœ¨Androidç³»ç»Ÿä¸­ï¼Œå¦‚ä½•å°†è§¦æ‘¸äº‹ä»¶ï¼ˆTouchEventï¼‰ä»Žç³»ç»Ÿåˆ†å‘åˆ°å„ä¸ªViewç»„ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ¶‰åŠä¸‰ä¸ªæ–¹æ³•ï¼šdispatchTouchEventã€onInterceptTouchEventã€onTouchEventã€‚ä¸‹é¢æ˜¯å¯¹è¿™ä¸‰ä¸ªæ–¹æ³•åŠå…¶å·¥ä½œæµç¨‹çš„è¯¦ç»†ä»‹ç»ï¼š 1. dispatchTouchEvent å®šä¹‰ï¼šæ‰€æœ‰çš„ViewGroupå’ŒViewéƒ½ä¼šé‡å†™è¿™ä¸ªæ–¹æ³•ã€‚å®ƒæ˜¯æ•´ä¸ªäº‹ä»¶åˆ†å‘é“¾çš„èµ·ç‚¹ã€‚ ä½œç”¨ï¼šå†³å®šæ˜¯å¦å°†äº‹ä»¶ä¼ é€’ç»™å­Viewï¼Œå¦‚æžœå­Viewæ²¡æœ‰å¤„ç†ï¼Œåˆ™è°ƒç”¨è‡ªå·±çš„onTouchEventæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ 2. onInterceptTouchEvent å®šä¹‰ï¼šåªæœ‰ViewGroupæœ‰è¿™ä¸ªæ–¹æ³•ã€‚æ™®é€šçš„Viewæ˜¯æ²¡æœ‰çš„ã€‚ ä½œç”¨ï¼šç”¨äºŽå†³å®šæ˜¯å¦æ‹¦æˆªå­Viewçš„äº‹ä»¶ã€‚å¦‚æžœè¿”å›žtrueï¼Œè¡¨ç¤ºæ‹¦æˆªäº‹ä»¶ï¼Œä¸å†å‘å­Viewä¼ é€’ï¼Œè€Œæ˜¯ç”±å½“å‰ViewGroupå¤„ç†ã€‚ 3. onTouchEvent å®šä¹‰ï¼šæ‰€æœ‰çš„Viewå’ŒViewGroupéƒ½æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ ä½œç”¨ï¼šæœ€ç»ˆå¤„ç†è§¦æ‘¸äº‹ä»¶çš„åœ°æ–¹ã€‚å¯ä»¥åœ¨è¿™é‡Œå®šä¹‰å…·ä½“çš„è§¦æ‘¸äº‹ä»¶å“åº”é€»è¾‘ï¼Œå¦‚ç‚¹å‡»ã€é•¿æŒ‰ã€æ»‘åŠ¨ç­‰ã€‚ äº‹ä»¶åˆ†å‘æµç¨‹ Activityçº§åˆ«ï¼š Activity.dispatchTouchEvent()æŽ¥æ”¶åˆ°äº‹ä»¶ã€‚ å¦‚æžœè¿”å›žtrueï¼Œè¡¨ç¤ºäº‹ä»¶è¢«å¤„ç†ï¼Œåœæ­¢å‘ä¸‹ä¼ é€’ã€‚ å¦‚æžœè¿”å›žfalseï¼Œäº‹ä»¶ç»§ç»­ä¼ é€’ç»™å½“å‰çª—å£çš„é¡¶çº§Viewã€‚ ViewGroupçº§åˆ«ï¼š ViewGroup.dispatchTouchEvent()æŽ¥æ”¶åˆ°äº‹ä»¶ã€‚ è°ƒç”¨onInterceptTouchEvent()æ¥åˆ¤æ–­æ˜¯å¦æ‹¦æˆªäº‹ä»¶ã€‚ å¦‚æžœonInterceptTouchEvent()è¿”å›žtrueï¼Œåˆ™è°ƒç”¨è‡ªèº«çš„onTouchEvent()è¿›è¡Œå¤„ç†ã€‚ å¦‚æžœè¿”å›žfalseï¼Œåˆ™å°†äº‹ä»¶ä¼ é€’ç»™å­Viewçš„dispatchTouchEvent()ã€‚ Viewçº§åˆ«ï¼š View.dispatchTouchEvent()æŽ¥æ”¶åˆ°äº‹ä»¶ã€‚ è°ƒç”¨è‡ªèº«çš„onTouchEvent()è¿›è¡Œå¤„ç†ã€‚ ç¤ºä¾‹ä»£ç ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†äº‹ä»¶åˆ†å‘æœºåˆ¶çš„åŸºæœ¬å·¥ä½œåŽŸç†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041public class CustomViewGroup extends ViewGroup &#123; @Override public boolean dispatchTouchEvent(MotionEvent ev) &#123; Log.d(&quot;CustomViewGroup&quot;, &quot;dispatchTouchEvent: &quot; + ev.getAction()); return super.dispatchTouchEvent(ev); &#125; @Override public boolean onInterceptTouchEvent(MotionEvent ev) &#123; Log.d(&quot;CustomViewGroup&quot;, &quot;onInterceptTouchEvent: &quot; + ev.getAction()); return true; // æ‹¦æˆªæ‰€æœ‰äº‹ä»¶ &#125; @Override public boolean onTouchEvent(MotionEvent ev) &#123; Log.d(&quot;CustomViewGroup&quot;, &quot;onTouchEvent: &quot; + ev.getAction()); return true; // å¤„ç†äº‹ä»¶ &#125; // çœç•¥å¸ƒå±€ç›¸å…³ä»£ç ...&#125;public class CustomView extends View &#123; public CustomView(Context context) &#123; super(context); &#125; @Override public boolean dispatchTouchEvent(MotionEvent ev) &#123; Log.d(&quot;CustomView&quot;, &quot;dispatchTouchEvent: &quot; + ev.getAction()); return super.dispatchTouchEvent(ev); &#125; @Override public boolean onTouchEvent(MotionEvent ev) &#123; Log.d(&quot;CustomView&quot;, &quot;onTouchEvent: &quot; + ev.getAction()); return true; // å¤„ç†äº‹ä»¶ &#125;&#125; é¡¹ç›®ä¸­guideviewç”¨åˆ°äº† ShouldDelayChildPressedState è¿™ä¸ªä½ ä¹Ÿçœ‹ä¸€ä¸‹æ˜¯å¦è¦åŠ  ç³»ç»Ÿçº§åˆ«çš„å»¶è¿Ÿ,åˆ«çœ‹äº† ä½ ç»§æ‰¿çš„class ä¸ä¼šå»¶è¿Ÿ Questionæ‰‹æœºå±å¹•æ˜¯ç”±ä¸€ä¸ªä¸ªåƒç´ ç‚¹æ¸²æŸ“è€Œæˆçš„ï¼Œä¸åŒçš„å¸ƒå±€ç±»ä¼¼äºŽå¹•å¸ƒä¸€å±‚å±‚å ä¸ŠåŽ»å½¢æˆäº†å±å¹•ä¸Šæ˜¾ç¤ºçš„æ•ˆæžœï¼ŒThe action is from DOWNã€MOVEã€UP, How they formed while we used like longClick , touch, click? a button on the listview itemï¼Œwhy the listview item donâ€™t response while we click the button in a interview ? but I cannâ€™t answer the key point. multible listview or recycleview in a Scrollview ,how to resolve it? Android provide NestedScrollView for us now,how does it work? AnswerImage clear I found it very useful when i looked it.it make me have global view.and then I read Activity ViewGroup and View source code from framework. But I found some place could do better ,so I draw another Image. å¼€å‘ä¸­å¸¸ç”¨çš„äº‹ä»¶åˆ†å‘ ListView item ä¸Šæœ‰Button ,itemä¸Šçš„onItemClickäº‹ä»¶å¾—ä¸åˆ°å“åº”ï¼Œå¯ä»¥çœ‹çœ‹å®˜æ–¹ViewGroup æè¿° item Button é¡µé¢æœç´¢ android:descendantFocusability android:descendantFocusabilityå±žæ€§å…±æœ‰ä¸‰ä¸ªå–å€¼ï¼Œåˆ†åˆ«ä¸ºbeforeDescendantsï¼šviewgroupä¼šä¼˜å…ˆå…¶å­ç±»æŽ§ä»¶è€ŒèŽ·å–åˆ°ç„¦ç‚¹afterDescendantsï¼šviewgroup åªæœ‰å½“å…¶å­ç±»æŽ§ä»¶ä¸éœ€è¦èŽ·å–ç„¦ç‚¹æ—¶æ‰èŽ·å–ç„¦ç‚¹blocksDescendantsï¼šviewgroup ä¼šè¦†ç›–å­ç±»æŽ§ä»¶è€Œç›´æŽ¥èŽ·å¾—ç„¦ç‚¹ åŽŸå›  : åœ¨View onTouchEvent(MotionEvent event) ä¸­,åªè¦viewå¯ç‚¹å‡»å°±è¿”å›žtrue,äº‹ä»¶å°±è¢«æ¶ˆè´¹æŽ‰äº†, set isClickable &#x3D; true æ‰å¯ä»¥æ”¶åˆ° action move upäº‹ä»¶ 1234567891011121314151617181920public boolean onTouchEvent(MotionEvent event) &#123; final float x = event.getX(); final float y = event.getY(); final int viewFlags = mViewFlags; final int action = event.getAction(); final boolean clickable = ((viewFlags &amp; CLICKABLE) == CLICKABLE || (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE) || (viewFlags &amp; CONTEXT_CLICKABLE) == CONTEXT_CLICKABLE; if ((viewFlags &amp; ENABLED_MASK) == DISABLED) &#123; if (action == MotionEvent.ACTION_UP &amp;&amp; (mPrivateFlags &amp; PFLAG_PRESSED) != 0) &#123; setPressed(false); &#125; mPrivateFlags3 &amp;= ~PFLAG3_FINGER_DOWN; // A disabled view that is clickable still consumes the touch // events, it just doesn&#x27;t respond to them. return clickable; &#125; &#125; æŒ‰é’®æ˜¯å¯ä»¥ç‚¹å‡»çš„ç›´æŽ¥è¢«onTouchEventæ¶ˆè´¹","categories":[],"tags":[]},{"title":"PerformanceJank","slug":"PerformanceJank","date":"2022-06-09T03:23:50.000Z","updated":"2022-07-16T15:07:08.241Z","comments":true,"path":"2022/06/09/PerformanceJank/","link":"","permalink":"https://noteforme.github.io/2022/06/09/PerformanceJank/","excerpt":"","text":"https://www.bilibili.com/video/BV1T44y1u7g6 6:41 æ•°æ®åˆ°å±å¹•ï¼Œæ¸²æŸ“æœºåˆ¶ https://www.jianshu.com/p/8a296b75d95f https://juejin.cn/post/6844904062610046990 https://testerhome.com/topics/29134 å¡é¡¿ä¼˜åŒ–https://blog.csdn.net/JArchie520/article/details/106710663 å¸ƒå±€ä¼˜åŒ–å¸ƒå±€åŠ è½½åŽŸç† https://blog.csdn.net/JArchie520/article/details/106563639 https://androidperformance.com/2019/10/22/Android-Choreographer/#/%E5%B8%A7%E7%BB%98%E5%88%B6%E4%BC%98%E5%8C%96","categories":[],"tags":[{"name":"Performance","slug":"Performance","permalink":"https://noteforme.github.io/tags/Performance/"}]},{"title":"PerformanceANR","slug":"PerformanceANR","date":"2022-06-07T06:41:30.000Z","updated":"2023-01-02T03:31:39.095Z","comments":true,"path":"2022/06/07/PerformanceANR/","link":"","permalink":"https://noteforme.github.io/2022/06/07/PerformanceANR/","excerpt":"","text":"ANR https://play.google.com/console/u/0/developers/5313279702199603526/app/4975846927718251228/vitals/crashes?installedFrom=PLAY_STORE&amp;days=30 https://developer.android.com/topic/performance/vitals/anr.html ANR å…¨ç§° Application Nor Responding,åœ¨debugçš„æ—¶å€™ç»å¸¸ä¼šå‡ºçŽ°çš„ä¸€ä¸ªæ¡†æ¡†ï¼Œè¯¢é—®å…³é—­æˆ–ç­‰å¾…ï¼Œåœ¨æ­£å¸¸çŽ¯å¢ƒä¸‹å‡ºçŽ°çš„æƒ…å†µ ä¸»çº¿ç¨‹IO æ“ä½œ ä¸»çº¿ç¨‹è€—æ—¶ä»»åŠ¡ ä¸»çº¿ç¨‹é”™è¯¯çš„æ“ä½œ Thread.waitæˆ–Thread.sleepAndroidç³»ç»Ÿç›‘æŽ§ç¨‹åºçš„å“åº”çŠ¶å†µï¼Œå‡ºçŽ°ä¸‹é¢ä¸¤ç§æƒ…å†µå¼¹å‡ºANRå¯¹è¯æ¡†*åº”ç”¨åœ¨5ç§’å†…æœªå“åº”ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶(æŒ‰é”®æˆ–è€…è§¦æ‘¸)*BroadcastReceiveræœªåœ¨ 10ç§’å†…å®Œæˆç›¸å…³çš„å¤„ç† Android Vitals å°†è¿žç»­ä¸¢å¸§è¶…è¿‡ 700 æ¯«ç§’å®šä¹‰ä¸ºå†»å¸§ï¼Œä¹Ÿå°±æ˜¯è¿žç»­ä¸¢å¸§ 42 å¸§ä»¥ä¸Š https://time.geekbang.org/column/article/72642 å¡é¡¿ä¼˜åŒ– https://www.bilibili.com/video/BV1T44y1u7g6?spm_id_from=333.337.search-card.all.click Block canary https://blog.csdn.net/JArchie520/article/details/106710663 è¿™é‡Œæœ‰ANRåœºæ™¯æ¨¡æ‹Ÿ ANRäº§ç”ŸåŽŸå› å’Œç±»åž‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š 1ã€Activityåœ¨5ç§’é’Ÿä¹‹å†…æ— æ³•å“åº”å±å¹•è§¦æ‘¸äº‹ä»¶æŒ¥ç€é”®ç›˜è¾“å…¥äº‹ä»¶å°±ä¼šäº§ç”ŸANRã€‚KeyDispatchTimeout Reasonï¼šInput event dispatching timed out 2ã€BroadcastReceiveråœ¨10ç§’é’Ÿä¹‹å†…è¿˜æœªæ‰§è¡Œå®Œæˆå°±ä¼šäº§ç”ŸANRã€‚BroadcastTimeout Reasonï¼šTimeout of broadcast BroadcastRecord 3ã€Serviceå„ä¸ªç”Ÿå‘½å‘¨æœŸåœ¨20ç§’é’Ÿä¹‹å†…æ²¡æœ‰æ‰§è¡Œå®Œæˆå°±ä¼šäº§ç”ŸANRã€‚ServiceTimeout Reasonï¼šTimeout executing service 4ã€ContentProvideråœ¨10ç§’é’Ÿä¹‹å†…æ²¡æœ‰æ‰§è¡Œå®Œæˆå°±ä¼šäº§ç”ŸANRã€‚ContentProviderTimeout Reasonï¼štimeout publishing content providers åœ¨ä»¥ä¸Šè¿™å‡ ç§åŽŸå› ä¸­å‡ºçŽ°æœ€å¤šçš„ä¸€èˆ¬æ˜¯ç¬¬ä¸€ç§ï¼Œè€Œä¸”å¾€å¾€éƒ½æ˜¯å› ä¸ºåœ¨å†™ä»£ç æ—¶ä¸æ³¨æ„ï¼Œåœ¨ä¸»çº¿ç¨‹åšäº†è€—æ—¶çš„æ“ä½œã€‚ é“¾æŽ¥ï¼šhttps://juejin.cn/post/6844904069731975176 å„ä¸»æµæ–¹æ¡ˆ BlockCanary ä¸»è¦æ˜¯æ£€æµ‹ä¸»çº¿ç¨‹çš„è€—æ—¶æ“ä½œï¼ŒåŽé¢ä¼šå†™å¡é¡¿ç›‘æŽ§ï¼Œä¸»è¦åŸºäºŽHandlerçš„æ‰“å° æŸäº›åœºæ™¯ç›‘æŽ§ä¸åˆ°, ANR-WatcheDogä¸»è¦æ˜¯å¾€ä¸»çº¿ç¨‹æ’å…¥ä¸€æ¡ç›‘æŽ§æ¶ˆæ¯ï¼Œ éš”ä¸€æ®µæ—¶é—´æ¥å¼•çˆ†è¿™ä¸ªç‚¸å¼¹,ä»Šå¤©æ‰‹å†™ è½®è¯¢æ—¶é—´ä¸å¥½å®šå‘€,æ—¶é—´5s, 5s - 10sçš„æœ‰å¯èƒ½ç›‘æŽ§ä¸åˆ° SafeLooeråŽ»ä»£ç†äº†ä¸»çº¿ç¨‹Looperï¼Œè¿™ä¸ªä¸è®² FileObserveré«˜ç‰ˆæœ¬æ²¡æœ‰æƒé™,æ‰€ä»¥ç”¨ä¸äº†","categories":[],"tags":[{"name":"Performance","slug":"Performance","permalink":"https://noteforme.github.io/tags/Performance/"}]},{"title":"PerformanceMemory","slug":"PerformanceMemory","date":"2022-06-07T02:34:22.000Z","updated":"2022-06-12T03:17:58.711Z","comments":true,"path":"2022/06/07/PerformanceMemory/","link":"","permalink":"https://noteforme.github.io/2022/06/07/PerformanceMemory/","excerpt":"","text":"https://developer.android.com/studio/profile/memory-profiler?hl=zh-cn æŸ¥çœ‹å†…å­˜é™åˆ¶ï¼Œä¸‹é¢çš„å‘½ä»¤ä¸èµ·ä½œç”¨ 1234adb shell cat&#x2F;system&#x2F;build.prop &#x2F;&#x2F; éœ€è¦rootæƒé™ï¼Œæ²¡ç”¨adb shell getprop &#x2F;&#x2F; å¯ä»¥çœ‹å…¨éƒ¨çš„adb shell getprop dalvik.vm.heapsize &#x2F;&#x2F;è¿·ä½ è£™å¯ä»¥çœ‹åˆ° å†…å­˜æŠ–åŠ¨åˆ†æžAndroid profile https://www.bilibili.com/video/BV1n44y1K7xS?p=5&amp;spm_id_from=pageDriver https://www.bilibili.com/video/BV1oz4y1m7Gw?p=6 https://www.youtube.com/watch?v=7ls28uGMBEs&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=73 Android å†…å­˜æ³„æ¼ https://www.bilibili.com/video/BV1n44y1K7xS?p=6 video 25åˆ†é’Ÿæ³„æ¼åˆ†æž leakcanary https://github.com/square/leakcanary AndroidStudio Profilerå·¥å…· è¿™ä¸ªè§†é¢‘ è®²è§£äº†æ‰¾å‡ºå†…å­˜æ³„æ¼çš„æ­¥éª¤ è¿˜æœ‰AndroidStudio3.0çš„å›¾æ–‡æ–¹æ³• https://mp.weixin.qq.com/s/b_lFfL1mDrNVKj_VAcA2ZA æŠ–éŸ³å†…å­˜ç›‘æŽ§æ¡†æž¶ (kenzo) å†…å­˜ä¼˜åŒ–æ“ä½œ1:25åˆ†é’Ÿ https://www.bilibili.com/video/BV1T44y1u7g6?p=4&amp;spm_id_from=pageDriver https://juejin.cn/post/6844904099998089230#heading-6 https://blog.csdn.net/JArchie520/article/details/106418561","categories":[],"tags":[{"name":"Performance","slug":"Performance","permalink":"https://noteforme.github.io/tags/Performance/"}]},{"title":"LC-string","slug":"LC-string","date":"2022-06-05T03:06:28.000Z","updated":"2023-01-02T03:31:39.091Z","comments":true,"path":"2022/06/05/LC-string/","link":"","permalink":"https://noteforme.github.io/2022/06/05/LC-string/","excerpt":"","text":"344. åè½¬å­—ç¬¦ä¸²åŒæŒ‡é’ˆ 123456789101112131415fun reverseString(s: CharArray): Unit &#123; var left = 0 var right = s.size - 1 while (left &lt; right) &#123; swap(s, left, right) left++ right-- &#125;&#125;fun swap(s: CharArray, left: Int, right: Int) &#123; val temp = s[left] s[left] = s[right] s[right] = temp&#125; 541. åè½¬å­—ç¬¦ä¸² II12345678910111213141516fun reverseStr(s: String, k: Int): String &#123; val charArray = s.toCharArray() for (i in s.indices step 2 * k) &#123; var left = i // æ¯æ¬¡çš„leftæŒ‡é’ˆè®¾ç½®å¥½ var right = (i + k - 1) //æŽ¥ç€è®¾ç½®æ¯æ¬¡çš„ å³æŒ‡é’ˆ if (right &gt; s.length - 1) &#123; // å¦‚æžœå­—ç¬¦ä¸²é•¿åº¦å°äºŽ è¿™æ¬¡çš„å³æŒ‡é’ˆï¼Œä½¿ç”¨å­—ç¬¦ä¸²çš„å³è¾¹ç•Œä½œä¸ºå³æŒ‡é’ˆ right = s.length - 1 &#125; while (left &lt; right) &#123; //åè½¬ LC344().swap(charArray, left, right) left++ right-- &#125; &#125; return String(charArray)&#125; éšæƒ³å½•æ„Ÿè§‰è§£æ³•ä¸å¤ªå¥½ https://leetcode.cn/problems/reverse-string-ii/solution/gong-shui-san-xie-jian-dan-zi-fu-chuan-m-p88f/ è¿™ä¸ªè§£æ³•å’Œæˆ‘çš„å·®ä¸å¤šï¼Œæ›´ä¼˜é›… å‰‘æŒ‡ Offer 05. æ›¿æ¢ç©ºæ ¼https://leetcode.cn/problems/ti-huan-kong-ge-lcof/solution/zhe-dao-ti-mu-zhen-de-you-zhe-yao-jian-dan-ma-qing/ 151. é¢ å€’å­—ç¬¦ä¸²ä¸­çš„å•è¯è¿™é¢˜çš„éš¾ç‚¹ï¼Œä¸»è¦å°±æ˜¯åŽ»é™¤ å­—ç¬¦ä¸²ä¸­é—´çš„ç©ºæ ¼ æ ˆæˆ–åŒç«¯é˜Ÿåˆ—è§£æ³•123456789101112131415161718192021222324252627282930313233 /* æ ˆæˆ–åŒç«¯é˜Ÿåˆ—è§£æ³• * 1. è®¾ç½®left , rightæŒ‡é’ˆï¼Œç§»åŠ¨æŒ‡é’ˆï¼Œç±»ä¼¼ç§»é™¤ä¸¤ç«¯çš„ç©ºæ ¼ * 2. ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éåŽ†,æ·»åŠ åˆ°StringBuilder,ç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼ï¼ŒStringBuilderçš„æ•°æ®åŠ å…¥é˜Ÿåˆ—,æ¸…ç©ºStringBuilder * 3. ç›´åˆ°æœ€åŽä¸€ä¸ªåŠ å…¥é˜Ÿåˆ— * * if (s[left] != &#x27; &#x27;) ä¸­çš„&#x27; &#x27;æ˜¯Asciiåè¿›åˆ¶32,å•æµ‹ä¸­æœ‰éªŒè¯ * */ fun reverseWords(s: String): String &#123; var left = 0 var right = s.length - 1 while (s[left] == &#x27; &#x27;) &#123; left++ &#125; while (s[right] == &#x27; &#x27;) &#123; right-- &#125; val deque: Deque&lt;String&gt; = ArrayDeque() val sb = StringBuilder() for (i in left..right) &#123; if (s[left] != &#x27; &#x27;) &#123; sb.append(s[left])// &#125; else if (s[left] == &#x27; &#x27; &amp;&amp; sb[sb.length - 1] != &#x27; &#x27;) &#123; // ä¸€å¼€å§‹ä»¥ä¸ºå®˜æ–¹ä¹Ÿæ˜¯è¿™æ ·å†™çš„ï¼Œå…¶å®žä¹Ÿæ˜¯ä¸‹é¢æˆ‘è¿™ç§çš„ &#125; else if (s[left] == &#x27; &#x27; &amp;&amp; sb.isNotEmpty()) &#123; // è¿™é‡Œæ”¹æˆè¿™æ ·æ˜¯å› ä¸ºåŠ å…¥ &quot;the sky is blue&quot; ï¼Œ left==3èµ°åˆ°äº†ç©ºæ ¼ï¼Œ deque.offerFirst(sb.toString()) //å°±åˆå§‹åŒ–sb,ç„¶åŽleft==4èµ°åˆ°äº†s,å¦‚æžœä¸¤ä¸ªç©ºæ ¼ï¼Œsb[sb.length - 1]å°±ä¼šè¶Šç•Œ sb.setLength(0) &#125; left++ &#125; deque.offerFirst(sb.toString()) return java.lang.String.join(&quot; &quot;, deque) &#125; å®˜æ–¹é¢˜è§£ï¼Œæ–‡å­—ç‰ˆçš„æ„Ÿè§‰æ›´å¥½ç‚¹ï¼Œå› ä¸ºæœ‰javaçš„ç‰ˆæœ¬çš„ï¼Œè§†é¢‘çš„c++çš„ä¸ç”¨stringbuilder https://leetcode.cn/problems/reverse-words-in-a-string/solution/fan-zhuan-zi-fu-chuan-li-de-dan-ci-by-leetcode-sol/ ä¸¤æ¬¡åè½¬å­—ç¬¦ä¸²123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * 1. åŽ»é™¤ç©ºæ ¼ï¼Œå¹¶ä¸”ç”¨StringBuilderç»„åˆ * 2. ç¿»è½¬æ•´ä¸ªStringBuilder * 3. ç¿»è½¬StringBuilderä¸­çš„å•ä¸ªå­—ç¬¦ */fun reverseWords2(s: String): String &#123; val sb = deleteStartEndSpace(s) reverseStringBuilder(sb, 0, sb.length - 1) var wStart = 0 var wEnd = 0 while (wStart &lt; sb.length) &#123; if (sb.getOrElse(wEnd) &#123; &#x27; &#x27; &#125; == &#x27; &#x27;) &#123; reverseStringBuilder(sb, wStart, wEnd - 1) wStart = ++wEnd &#125; else &#123; wEnd++ &#125; &#125; return sb.toString()&#125;private fun deleteStartEndSpace(s: String): StringBuilder &#123; var left = 0 var right = s.length - 1 while (s[left] == &#x27; &#x27;) &#123; left++ &#125; while (s[right] == &#x27; &#x27;) &#123; right-- &#125; val sb = StringBuilder() while (left &lt;= right) &#123; // æ³¨æ„è¿™é‡Œæœ€å³è¾¹çš„å­—ç¬¦æ˜¯éœ€è¦æ·»åŠ çš„ if (s[left] != &#x27; &#x27;) &#123; sb.append(s[left]) &#125; else if (s[left] == &#x27; &#x27; &amp;&amp; s[left - 1] != &#x27; &#x27;) &#123; //ä¸æå‰åŽ»æŽ‰ç©ºæ ¼ï¼Œå¦‚æžœå­—ç¬¦å·¦è¾¹&quot; hello world &quot;æœ‰ç©ºæ ¼å°±ä¼šè¶Šç•Œï¼Œ sb.append(s[left]) //è€Œä¸”StringBuilderå³è¾¹ç©ºæ ¼ä¹Ÿä¼šæ·»åŠ ç©ºæ ¼ï¼Œè€Œä¸”ä¸å¥½åŽ»æŽ‰ &#125; left++ &#125; return sb&#125;private fun reverseStringBuilder(sb: StringBuilder, leftP: Int, rightP: Int) &#123; var left = leftP var right = rightP while (left &lt; right) &#123; val temp = sb[left] sb.setCharAt(left, sb[right]) sb.setCharAt(right, temp) left++ right-- &#125;&#125; å®˜æ–¹è§£æ³•ï¼Œç¿»è½¬å­å­—ç¬¦ä¸²è¿™ç§æ›´å¦™ public void reverseEachWord(StringBuilder sb) &#123; int n = sb.length(); int start = 0, end = 0; while (start &lt; n) &#123; // å¾ªçŽ¯è‡³å•è¯çš„æœ«å°¾ while (end &lt; n &amp;&amp; sb.charAt(end) != &#39; &#39;) &#123; ++end; &#125; // ç¿»è½¬å•è¯ reverse(sb, start, end - 1); // æ›´æ–°startï¼ŒåŽ»æ‰¾ä¸‹ä¸€ä¸ªå•è¯ start = end + 1; ++end; &#125; &#125; å‰‘æŒ‡ Offer 58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²æ•°ç»„System.arraycopyæ·±å…¥åˆ†æžç”¨åˆ°äº†æ±‡ç¼–æŒ‡ä»¤,åŽé¢å¯ä»¥åŠ å¼ºå­¦ä¹ ,å…¶å®žåº•å±‚çš„çŸ¥è¯†è¿˜æ˜¯éœ€è¦çš„ï¼Œè¦ä¸ç„¶æ²¡æ³•æ·±å…¥ä¸‹åŽ»äº† https://blog.csdn.net/jackgo73/article/details/111866491 12345678fun reverseLeftWords(s: String, n: Int): String &#123; val sb = StringBuilder(s) for (i in 0 until n) &#123; sb.append(s[i]) sb.deleteCharAt(0) &#125; return sb.toString()&#125; ä¸èƒ½ç”³è¯·é¢å¤–ç©ºé—´ï¼Œåªèƒ½åœ¨æœ¬ä¸²ä¸Šæ“ä½œ æˆ‘è§‰å¾—ç”¨carlçš„æ–¹æ³•æ›´å¥½ åè½¬åŒºé—´ä¸ºå‰nçš„å­ä¸² åè½¬åŒºé—´ä¸ºnåˆ°æœ«å°¾çš„å­ä¸² åè½¬æ•´ä¸ªå­—ç¬¦ä¸² https://programmercarl.com/%E5%89%91%E6%8C%87Offer58-II.%E5%B7%A6%E6%97%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2.html#%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC 28. å®žçŽ° strStr()æš´åŠ›è§£æ³•aabaabaaf aabaaf æ•´ä½“ç§»åŠ¨åº•ä¸‹çš„å­—ä¸²ï¼Œç„¶åŽåŒ¹é… 1234567891011121314151617fun strStr(haystack: String, needle: String): Int &#123; var needleIndex = 0 for (i in haystack.indices) &#123; var hayIndex = i while (needleIndex &lt; needle.length) &#123; if (haystack.getOrNull(hayIndex) == needle[needleIndex]) &#123; if (needleIndex == needle.length - 1) return i hayIndex++ needleIndex++ &#125; else &#123; needleIndex = 0 break &#125; &#125; &#125; return -1&#125; è¿™ä¸ªæš´åŠ›è§£æ³•ï¼Œä¹Ÿæœ‰æ›´å¥½çš„å†™æ³• kmphttps://noteforme.github.io/2021/06/17/kmp/ 12345678910111213141516171819202122232425262728293031323334fun strStrKmp(haystack: String, needle: String): Int &#123; var j = 0 var nextArray = initNext(needle) // åˆå§‹åŒ–nextæ•°ç»„ for (i in haystack.indices) &#123; // æ–‡æœ¬ä¸²æŒ‡é’ˆi ç§»åŠ¨ while (j &gt; 0 &amp;&amp; haystack[i] != needle[j]) &#123; j = nextArray[j - 1] // æ¨¡å¼ä¸² æŒ‡é’ˆ æ ¹æ®nextæ•°ç»„çš„ä¸‹æ ‡å›žé€€ &#125; if (haystack[i] == needle[j]) &#123; // æ–‡æœ¬ä¸² æ¨¡å¼ä¸²å¯¹åº”çš„å­—ç¬¦ç›¸ç­‰ j++ &#125; if (j == needle.length) &#123; return i - j + 1 &#125; &#125; return -1&#125;/** * æ¨¡å¼ä¸² * iæŒ‡å‘åŽç¼€æœ«å°¾ä½ç½® * j æŒ‡å‘å‰ç¼€æœ«å°¾ä½ç½®ï¼Œ ä¹Ÿä»£è¡¨ iå’Œiä¹‹å‰çš„ æœ€é•¿å…¬å…±å‰åŽç¼€çš„é•¿åº¦ */fun initNext(needle: String): IntArray &#123; var nextArray = IntArray(needle.length) var j = 0 // j å‰ç¼€0å¼€å§‹åˆå§‹åŒ– for (i in 1 until needle.length) &#123; // iåŽç¼€æœ«å°¾ ï¼Œä»Ž1å¼€å§‹åˆå§‹åŒ– while (j &gt; 0 &amp;&amp; needle[i] != needle[j]) &#123; j = nextArray[j - 1] // å‰ä¸€ä¸ªä½ç½®ä¸‹æ ‡ å›žé€€ &#125; if (needle[i] == needle[j]) j++ // æ‰¾åˆ°æ–°çš„ç›¸ç­‰å­—ç¬¦ï¼Œ åœ¨ä¹‹å‰æœ€é•¿å…¬å…±å‰åŽç¼€é•¿åº¦ +1 nextArray[i] = j // æ›´æ–°nextä¸‹æ ‡ &#125; return nextArray&#125; 459. é‡å¤çš„å­å­—ç¬¦ä¸²è¿™é¢˜æ ¹æ®éšæƒ³å½•çš„ å…¬å¼ å¥—çš„ https://programmercarl.com/0459.%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2.html#%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC next[len - 1] = 7ï¼Œnext[len - 1] + 1 = 8 è¿™å¥è¯çš„æ„æ€æ˜¯. è¿™é‡Œæ•°ç»„ç»Ÿä¸€å‡1ï¼Œæ‰€ä»¥éœ€è¦åŠ 1 == 8 12345678910111213141516171819202122fun repeatedSubstringPattern(s: String): Boolean &#123; val nxtArrr = initNext(s) val len = s.length if (nxtArrr[len - 1] != 0 &amp;&amp; len % (len - nxtArrr[len - 1]) == 0) &#123; //è¿™ä¸¤å¥ æ˜¯æ ¹æ®éšæƒ³å½•çš„å…¬å¼æŠ„çš„ return true &#125; return false&#125;private fun initNext(s: String): IntArray &#123; var j = 0 val nxt = IntArray(s.length) nxt[0] = 0 for (i in 1 until s.length) &#123; while (j &gt; 0 &amp;&amp; s[i] != s[j]) &#123; j = nxt[j - 1] &#125; if (s[i] == s[j]) j++ nxt[i] = j &#125; return nxt&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"location","slug":"location","date":"2022-05-24T06:48:58.000Z","updated":"2025-01-01T06:32:08.888Z","comments":true,"path":"2022/05/24/location/","link":"","permalink":"https://noteforme.github.io/2022/05/24/location/","excerpt":"","text":"Location Permission changesBackground locationThe background location precision is the same as the foreground location precision, which depends on the location permissions that your app declares. user closes the app or uses the home button to return to their main screen. On Android 10 (API level 29) and higher, you must declare the ACCESS_BACKGROUND_LOCATION permission in your appâ€™s manifest in order to request background location access at runtime. On earlier versions of Android, when your app receives foreground location access, it automatically receives background location access as well. 12345&lt;manifest ... &gt; &lt;!-- Required only when requesting background location access on Android 10 (API level 29) and higher. --&gt; &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;&lt;/manifest&gt; https://support.google.com/googleplay/android-developer/answer/9799150#zippy= foregroundwhile an app is open and visible to the user. https://www.youtube.com/watch?v=xTVeFJZQ28c https://github.com/baurine/android-location-study/blob/master/note/location-note.md https://blog.csdn.net/dxiaolai/article/details/81588921 https://blog.csdn.net/qq_32770809/article/details/115914021 https://blog.csdn.net/u013334392/article/details/91971758 å…¶å®žåœ¨ä¸Šé¢æˆ‘å·²ç»æåˆ°äº†ï¼Œæ‰€æœ‰ä¸Šé¢çš„è§£å†³çš„æ–¹æ¡ˆéƒ½æ²¡æœ‰è§£å†³æ ¹æœ¬é—®é¢˜ï¼Œé‚£å°±æ˜¯å½“ä½ åœ¨å®¤å†…å¼€å‘æ—¶ï¼Œä½ çš„æ‰‹æœºæ ¹æœ¬å°±æ²¡æ³•èŽ·å–ä½ç½®ä¿¡æ¯ï¼Œä½ å«ç³»ç»Ÿå¦‚ä½•å°†ä½ç½®ä¿¡æ¯é€šçŸ¥ç»™ä½ çš„ç¨‹åºã€‚æ‰€ä»¥è¦ä»Žæ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¦è§£å†³ä½ç½®ä¿¡æ¯èŽ·å–é—®é¢˜ã€‚åˆšåˆšä¹Ÿæåˆ°äº†ï¼Œåªæœ‰NETWORK_PROVIDERè¿™ç§æ¨¡å¼æ‰æ˜¯å®¤å†…å®šä½å¯é çš„æ–¹å¼ï¼Œåªä¸è¿‡ç”±äºŽå¤§é™†çš„æ€ªæ€ªç½‘ç»œï¼Œä¸”å¤§éƒ¨åˆ†åŽ‚å•†ä¹Ÿä¸ä¼šç”¨googleçš„æœåŠ¡ï¼Œè¿™ç§å®šä½æ–¹å¼é»˜è®¤æ˜¯æ²¡æ³•ç”¨çš„ã€‚é‚£æ€Žä¹ˆåŠžï¼Ÿå¥½åŠžï¼Œæ‰¾ä¸ªæ›¿ä»£çš„æœåŠ¡å•†å°±å¯ä»¥äº†ï¼Œç™¾åº¦çš„ä½ç½®ä¿¡æ¯sdkå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„åŸºæœ¬åŽŸç†åœ¨ä¸Šé¢å·²ç»æåˆ°è¿‡äº†ï¼Œå°±æ˜¯æœé›†ä½ çš„wifièŠ‚ç‚¹ä¿¡æ¯å’Œä½ çš„æ‰‹æœºåŸºç«™ä¿¡æ¯æ¥å®šä½ã€‚ #detect installed app https://stackoverflow.com/questions/72123141/how-to-check-exists-app-in-device-on-android https://medium.com/@GoogleDroids/how-to-check-if-an-android-app-is-installed-on-your-device-f8f0f1d4fb6a 123456789101112131415161718fun isPackageInstalled(context: Context, packagename: String): Boolean &#123; var result = false try &#123; // is the application installed? context.packageManager.getPackageInfo(packagename, PackageManager.GET_ACTIVITIES) result = true &#125; catch (e: PackageManager.NameNotFoundException) &#123; //Not installed &#125; return result&#125; val checkInstallation = isPackageInstalled(this, &quot;com.google.android.apps.maps&quot;) Log.i(TAG, &quot;googleMap: $checkInstallation&quot;) Log.i(TAG, &quot;gaodemap: $&#123;isPackageInstalled(this, &quot;com.autonavi.minimap&quot;)&#125;&quot;) Log.i(TAG, &quot;baidumap: $&#123;isPackageInstalled(this, &quot;com.baidu.BaiduMap&quot;)&#125;&quot;) Log.i(TAG, &quot;waze: $&#123;isPackageInstalled(this, &quot;com.waze&quot;)&#125;&quot;) Androidmanifest.xml 12345678910 &lt;queries&gt; &lt;package android:name=&quot;com.google.android.apps.maps&quot; /&gt; &lt;package android:name=&quot;com.google.android.youtube&quot; /&gt;&lt;!-- &lt;package android:name=&quot;com.autonavi.minimap&quot; /&gt; &lt;package android:name=&quot;com.baidu.BaiduMap&quot; /&gt; --&gt; &lt;package android:name=&quot;com.waze&quot; /&gt; &lt;/queries&gt; it also can be used , but it seems not recommend in office 12345678&lt;uses-permission android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot; tools:ignore=&quot;QueryAllPackagesPermission&quot; /&gt;&lt;queries&gt; &lt;intent&gt; &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt; &lt;/intent&gt;&lt;/queries&gt; huawei OS install others map , except google mapresult: googleMap: falsegaodemap: falsebaidumap: falsewaze: true if remove Androidmanifest comment googleMap: falsegaodemap: truebaidumap: truewaze: true AccuracyApproximateProvides a device location estimate. If this location estimate is from the LocationManagerService or FusedLocationProvider, this estimate is accurate to within about 3 square kilometers (about 1.2 square miles). Your app can receive locations at this level of accuracy when you declare the ACCESS_COARSE_LOCATION permission but not the ACCESS_FINE_LOCATION permission. PreciseProvides a device location estimate that is as accurate as possible. If the location estimate is from LocationManagerService or FusedLocationProvider, this estimate is usually within about 50 meters (160 feet) and is sometimes as accurate as within a few meters (10 feet) or better. Your app can receive locations at this level of accuracy when you declare the ACCESS_FINE_LOCATION permission. Google play Policyhttps://support.google.com/googleplay/android-developer/answer/10144311#zippy=%2Cexamples-of-common-violations An app that accesses a userâ€™s inventory of installed apps and doesnâ€™t treat this data as personal or sensitive data subject to the above Privacy Policy, data handling, and Prominent Disclosure and Consent requirements. Android 11 introduced changes related to package visibility. These changes affect applications, only if they target Android 11 and above. For more information on these changes, please view the official documentation about package visibility on Android. https://developer.android.com/training/package-visibility https://developer.android.com/about/versions/11/privacy/package-visibility But be aware that Play Store has new policy and common apps with this perm declared wonâ€™t be pulished in there. You have to provide good reason for accepting your app - this permission must be used for starting user-initiated key feature of app https://stackoverflow.com/questions/72123141/how-to-check-exists-app-in-device-on-android lanuch Google MapMaps URLs (recommended)Using Maps URLs, you can build a universal, cross-platform URL to launch Google Maps and perform searches, get directions and navigation, and display map views and panoramic images. These universal URLs allow for broader handling of the maps requests no matter which platform the user is on. Google Maps Intents for AndroidUsing intents in your Android app, you can start an activity in another app by describing a simple action youâ€™d like to perform (such as â€œdisplay a mapâ€ or â€œshow directions to the airportâ€) in an Intent object. The Google Maps app for Android supports several different intents, allowing you to launch the Google Maps app in display, search, navigation, or Street View modes. https://developers.google.com/maps/documentation/android-sdk/intents","categories":[],"tags":[]},{"title":"LC-hash","slug":"LC-hash","date":"2022-05-21T13:53:24.000Z","updated":"2023-01-02T03:31:39.088Z","comments":true,"path":"2022/05/21/LC-hash/","link":"","permalink":"https://noteforme.github.io/2022/05/21/LC-hash/","excerpt":"","text":"242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯1234567891011121314151617fun isAnagram(s: String, t: String): Boolean &#123; val record = IntArray(26) // å­˜æ•´æ•°ï¼Œå°±ç”¨æ•´å½¢æ•° s.toCharArray().forEachIndexed &#123; _, char -&gt; record[char - &#x27;a&#x27;]++ &#125; t.toCharArray().forEachIndexed &#123; _, char -&gt; record[char - &#x27;a&#x27;]-- &#125; record.forEach &#123; if (it != 0) &#123; return false &#125; &#125; return true&#125; 383. èµŽé‡‘ä¿¡https://blog.csdn.net/c15158032319/article/details/78209740 12345678910111213141516fun canConstruct(ransomNote: String, magazine: String): Boolean &#123; val record = IntArray(26) magazine.toCharArray().forEach &#123; char -&gt; record[char - &#x27;a&#x27;] += 1 // è¿™é‡Œå¯ä»¥ä¼˜åŒ–ä¸‹ &#125; ransomNote.toCharArray().forEach &#123; char -&gt; record[char - &#x27;a&#x27;] -= 1 //åŒä¸Š &#125; record.forEach &#123; if (it &lt; 0) &#123; //å°±è¿™é‡Œå’Œ242.æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ ä¸ä¸€æ ·ï¼Œæ•°é‡ä¸å¤Ÿå°±&lt;0 return false &#125; &#125; return true&#125; //è‹¥ a = i++; åˆ™ç­‰ä»·äºŽ a=i;i=i+1;//è€Œ a = ++i; åˆ™ç­‰ä»·äºŽ i=i+1;a=i;//a += 1 å’Œ a = a + 1 12345678910111213141516fun canConstruct(ransomNote: String, magazine: String): Boolean &#123; val record = IntArray(26) magazine.toCharArray().forEach &#123; char -&gt; record[char - &#x27;a&#x27;] ++ &#125; ransomNote.toCharArray().forEach &#123; char -&gt; record[char - &#x27;a&#x27;] -- &#125; record.forEach &#123; if (it &lt; 0) &#123; //å°±è¿™é‡Œå’Œ242.æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯ ä¸ä¸€æ ·ï¼Œæ•°é‡ä¸å¤Ÿå°±&lt;0 return false &#125; &#125; return true&#125; 49. å­—æ¯å¼‚ä½è¯åˆ†ç»„ç”¨çš„å®˜æ–¹é¢˜è§£ https://leetcode.cn/problems/group-anagrams/solution/zi-mu-yi-wei-ci-fen-zu-by-leetcode-solut-gyoc/ é¢˜è§£ä¸€1234567891011121314fun groupAnagrams(strs: Array&lt;String&gt;): List&lt;List&lt;String&gt;&gt; &#123; val ansMap = HashMap&lt;String, ArrayList&lt;String&gt;&gt;() // ç›¸åŒå¼‚ä½è¯çš„key, å’Œæ‰€æœ‰å¼‚ä½è¯çš„æ•°ç»„ strs.forEach &#123; str -&gt; val char = str.toCharArray() // String to char è¿›è¡ŒæŽ’åºï¼Œç»“æžœç›¸åŒå¼‚ä½è¯keyä¸€è‡´ Arrays.sort(char) val key = String(char) if (!ansMap.containsKey(key)) &#123; // mapä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºæ–°çš„ArrayList() ansMap[key] = ArrayList() &#125; ansMap[key]?.add(str) //æ‹¿åˆ°ArrayList(),æ·»åŠ å…ƒç´  &#125; return ArrayList(ansMap.values)&#125; é¢˜è§£äºŒå®˜æ–¹é¢˜è§£2 å’Œé¢˜è§£ä¸€å·®ä¸å¤šï¼Œé¢˜è§£ä¸€è¿›è¡ŒæŽ’åºçš„ç›¸åŒkey,é¢˜è§£äºŒç”¨çš„æ•£åˆ—è®¡æ•°ï¼Œä¸­é—´ç”¨#é—´éš”ä½œä¸º key. å…¶ä»–çš„éƒ½ç±»ä¼¼ï¼ŒåŽé¢å†å†™å§ ã€‚ å¤æ‚åº¦åˆ†æž æ—¶é—´å¤æ‚åº¦ï¼šO(nk \\log k)O(nklogk)ï¼Œå…¶ä¸­ nn æ˜¯ \\textit{strs}strs ä¸­çš„å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œkk æ˜¯ \\textit{strs}strs ä¸­çš„å­—ç¬¦ä¸²çš„çš„æœ€å¤§é•¿åº¦ã€‚éœ€è¦éåŽ† nn ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹äºŽæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦ O(k \\log k)O(klogk) çš„æ—¶é—´è¿›è¡ŒæŽ’åºä»¥åŠ O(1)O(1) çš„æ—¶é—´æ›´æ–°å“ˆå¸Œè¡¨ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ O(nk \\log k)O(nklogk)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(nk)O(nk)ï¼Œå…¶ä¸­ nn æ˜¯ \\textit{strs}strs ä¸­çš„å­—ç¬¦ä¸²çš„æ•°é‡ï¼Œkk æ˜¯ \\textit{strs}strs ä¸­çš„å­—ç¬¦ä¸²çš„çš„æœ€å¤§é•¿åº¦ã€‚éœ€è¦ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…¨éƒ¨å­—ç¬¦ä¸²ã€‚ 438. æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯https://leetcode.cn/problems/find-all-anagrams-in-a-string/solution/zhao-dao-zi-fu-chuan-zhong-suo-you-zi-mu-xzin/ è§£æ³•ä¸€123456789101112131415161718192021222324252627282930fun findAnagrams(s: String, p: String): List&lt;Int&gt; &#123; val sLength = s.length val pLength = p.length if (sLength &lt; pLength) &#123; // å¦‚æžœå­—ç¬¦sçš„é•¿åº¦ å°äºŽp ç›´æŽ¥è¿”å›ž return emptyList() &#125; val ansList = arrayListOf&lt;Int&gt;() val sCount = IntArray(26) val pCount = IntArray(26) val sCharArray = s.toCharArray() val pCharArray = p.toCharArray() for (i in 0 until pLength) &#123; //åˆå§‹æƒ…å†µï¼Œ p så­—ç¬¦ç›¸åŒï¼Œçœ‹æ˜¯å¦ç›¸ç­‰. sCount[sCharArray[i] - &#x27;a&#x27;]++ // å¯¹äºŽä½ç½®å­—ç¬¦ä¸ªæ•° pCount[pCharArray[i] - &#x27;a&#x27;]++ &#125; if (sCount.contentEquals(pCount)) &#123; //æ¯”è¾ƒåˆå§‹æ•°é‡ ansList.add(0) &#125; for (i in 0 until (sLength - pLength)) &#123; // ä»Ž0å¼€å§‹ï¼Œsçš„å­—ç¬¦ å·¦è¾¹-1 å³è¾¹+1 å­—ç¬¦ï¼Œè°ƒæ•´ç›¸åº”ä½ç½®å­—ç¬¦æ•°é‡ï¼Œ sCount[sCharArray[i] - &#x27;a&#x27;]-- sCount[sCharArray[i + pLength] - &#x27;a&#x27;]++ if (sCount.contentEquals(pCount)) &#123; ansList.add(i + 1) //å¦‚æžœ i==0, é‚£ä¹ˆ0ä½ç½®å­—ç¬¦åŽ»æŽ‰ï¼Œ p.length + 0 å­—ç¬¦+1, æ–°çš„å­—ç¬¦å¼€å§‹ä½ç½®å°±æ˜¯1äº† &#125; &#125; return ansList&#125; è§£æ³•äºŒdiffæ–¹å¼ï¼Œæ„Ÿè§‰æ²¡å¤ªæ˜Žç™½ , è€Œä¸”æ„Ÿè§‰ä½œç”¨ä¸å¤§,åŽé¢å¯ä»¥è¯•è¯• è§£æ³•ä¸‰è¿™ä¸ªæ»‘åŠ¨çª—å£ï¼Œè§£æ³•å¾ˆé«˜çº§ï¼Œä½†æ˜¯æ²¡æ˜Žç™½ 12345678910111213141516171819202122232425262728public List&lt;Integer&gt; findAnagrams(String s, String p) &#123; int[] cnt = new int[128]; for (char c : p.toCharArray()) cnt[c]++; int lo = 0, hi = 0; List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); // è¯¥å¾ªçŽ¯ç¡®ä¿[lo, hi)çš„åŒºé—´ä¸­çš„å‡ºçŽ°çš„å­—ç¬¦æ€»æ˜¯pçš„ä¸€ä¸ªå­é›† // PS1: &quot;na&quot;æ˜¯&quot;and&quot;çš„å­é›†ï¼Œè€Œ&quot;nn&quot;åˆ™ä¸æ˜¯&quot;and&quot;çš„å­é›† // PS2: é™¤äº†è¯„è®ºä¸­é‚£ä¸ªè¾¹é™…æ¡ä»¶ï¼Œå‰é¢å·²ç»æœ‰è¯„è®ºè§£é‡Šè¿‡äº† while (hi &lt; s.length()) &#123; char c = s.charAt(hi); if (cnt[c] &gt; 0) &#123; // å­é›†æ¡ä»¶æ»¡è¶³ï¼Œå³ç§»å¢žå¤§çª—å£ char c1 = s.charAt(hi++); cnt[c1]--; // çª—å£é•¿åº¦ == p.lenï¼Œä¸”çª—å£å†…å­—ç¬¦æ˜¯pçš„å­é›† // &lt;=&gt; (å……è¦æ¡ä»¶) s.substring(lo, hi)æ˜¯pçš„åŒå­—æ¯å¼‚åºè¯ if (hi - lo == p.length())&#123; res.add(lo); &#125; &#125; else &#123; // å†å³ç§»hiä¸å¯èƒ½æ»¡è¶³å­é›†æ¡ä»¶ï¼Œ // å³ç§»å·¦è¾¹ç•Œloã€å¤ä½è®¡æ•°å™¨ï¼Œç›´åˆ°è¿™ä¸ªæ¡ä»¶ï¼ˆå­é›†æ¡ä»¶ï¼‰å†æ¬¡æ»¡è¶³ char c1 = s.charAt(lo++); cnt[c1]++; &#125; &#125; return res;&#125; 349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ï¼Œç›´è§‚çš„æ–¹æ³•æ˜¯éåŽ†æ•°ç»„ nums1ï¼Œå¯¹äºŽå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ŒéåŽ†æ•°ç»„ nums2 åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ nums2 ä¸­ï¼Œå¦‚æžœå­˜åœ¨ï¼Œåˆ™å°†è¯¥å…ƒç´ æ·»åŠ åˆ°è¿”å›žå€¼ã€‚å‡è®¾æ•°ç»„ nums1 å’Œ nums2 çš„é•¿åº¦åˆ†åˆ«æ˜¯ mm å’Œ nnï¼Œåˆ™éåŽ†æ•°ç»„ nums1 éœ€è¦ O(m)O(m) çš„æ—¶é—´ï¼Œåˆ¤æ–­ nums1 ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ nums2 ä¸­éœ€è¦ O(n)O(n) çš„æ—¶é—´ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ O(mn)O(mn)ã€‚ å¦‚æžœä½¿ç”¨å“ˆå¸Œé›†åˆå­˜å‚¨å…ƒç´ ï¼Œåˆ™å¯ä»¥åœ¨ O(1)çš„æ—¶é—´å†…åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ï¼Œä»Žè€Œé™ä½Žæ—¶é—´å¤æ‚åº¦ã€‚ if (set.contains(it))è¿™å¥æ˜¯o(1)? é¦–å…ˆä½¿ç”¨ä¸¤ä¸ªé›†åˆåˆ†åˆ«å­˜å‚¨ä¸¤ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œç„¶åŽéåŽ†è¾ƒå°çš„é›†åˆï¼Œåˆ¤æ–­å…¶ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦åœ¨å¦ä¸€ä¸ªé›†åˆä¸­ï¼Œå¦‚æžœå…ƒç´ ä¹Ÿåœ¨å¦ä¸€ä¸ªé›†åˆä¸­ï¼Œåˆ™å°†è¯¥å…ƒç´ æ·»åŠ åˆ°è¿”å›žå€¼ã€‚è¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥é™ä½Žåˆ° O(m+n) 1234567891011val set = hashSetOf&lt;Int&gt;()nums1.forEach &#123; set.add(it)&#125;val anSet = hashSetOf&lt;Int&gt;()nums2.forEach &#123; if (set.contains(it)) &#123; // hashmapæ˜¯æ€Žä¹ˆhashè¡¨æ˜¯æ€Žä¹ˆå­˜å‚¨çš„ï¼Œä¸ºä»€ä¹ˆè¿™æ ·æ—¶é—´å¤æ‚åº¦ä½Ž, å› ä¸ºåœ¨hashè¡¨ä¸­å­˜å‚¨ anSet.add(it) &#125;&#125;return anSet.toIntArray() https://programmercarl.com/0349.%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86.html#_349-%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86 https://leetcode.cn/problems/intersection-of-two-arrays/solution/liang-ge-shu-zu-de-jiao-ji-by-leetcode-solution/ 350. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›† IIè§£æ³•ä¸€è‡ªå·±çš„æ€è·¯ 12345678910111213141516171819202122232425262728fun intersect(nums1: IntArray, nums2: IntArray): IntArray &#123; val ansArray = arrayListOf&lt;Int&gt;() val map1 = hashMapOf&lt;Int, Int&gt;() nums1.forEach &#123; map1[it] = (map1[it] ?: 0).plus(1) // keyæ˜¯ nums1 æ•°ç»„çš„å€¼ï¼Œvalueæ˜¯ä¸ªæ•° &#125; val map2 = hashMapOf&lt;Int, Int&gt;() nums2.forEach &#123; map2[it] = (map2[it] ?: 0).plus(1) //keyæ˜¯ nums2 æ•°ç»„çš„å€¼ï¼Œvalueæ˜¯ä¸ªæ•° &#125; val map3 = hashMapOf&lt;Int, Int&gt;() val keySet2 = map2.keys map1.entries.forEach &#123; entry -&gt; if (keySet2.contains(entry.key)) &#123; if (entry.value &lt; map2[entry.key]!!) &#123; // å­˜åœ¨ç›¸åŒçš„å€¼ï¼Œæ¯”è¾ƒæ•°ç»„çš„ä¸ªæ•° map3[entry.key] = entry.value &#125; else &#123; map3[entry.key] = map2[entry.key]!! //è¾ƒå°çš„æ”¾ç»™æ–°çš„map &#125; &#125; &#125; map3.entries.forEach &#123; entry -&gt; for (i in 0 until entry.value) &#123; // entry.valueæ˜¯mapçš„ä¸ªæ•°ï¼Œç„¶åŽæ·»åŠ çš„list ansArray.add(entry.key) &#125; &#125; return ansArray.toIntArray()&#125; è§£æ³•äºŒ12345678910111213141516fun intersect1(nums1: IntArray, nums2: IntArray): IntArray &#123; val ansArray = arrayListOf&lt;Int&gt;() val map = hashMapOf&lt;Int, Int&gt;() nums1.forEach &#123; map[it] = (map[it] ?: 0).plus(1) // keyæ˜¯ nums1 æ•°ç»„çš„å€¼ï¼Œvalueæ˜¯ä¸ªæ•° &#125; nums2.forEach &#123; if ((map[it] ?: 0) &gt; 0) &#123; // åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›¸åŒçš„å…ƒç´  ansArray.add(it) // æ·»åŠ  map[it] = map[it]!!.minus(1) // åŽŸæ¥çš„å…ƒç´ -1 &#125; else &#123; map.remove(it) &#125; &#125; return ansArray.toIntArray()&#125; è§£æ³•ä¸‰12345678910111213141516171819fun intersect3(nums1: IntArray, nums2: IntArray): IntArray &#123; Arrays.sort(nums1) Arrays.sort(nums2) val ansArray = arrayListOf&lt;Int&gt;() var index1 = 0 var index2 = 0 // æŽ’åºåŽï¼Œè®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„å¤´èŠ‚ç‚¹ while (index1 &lt; nums1.size &amp;&amp; index2 &lt; nums2.size) if (nums1[index1] &gt; nums2[index2]) &#123; // è°å°ï¼Œè°èµ° index2++ &#125; else if (nums1[index1] &lt; nums2[index2]) &#123; index1++ &#125; else &#123; //ç›¸ç­‰çš„æƒ…å†µï¼Œå°±æ·»åŠ åˆ°ç»“æžœæ•°ç»„ä¸­ ansArray.add(nums1[index1]) index2++ index1++ &#125; return ansArray.toIntArray()&#125; è¿˜æœ‰è¿›é˜¶é¢˜ç›® https://leetcode.cn/problems/intersection-of-two-arrays-ii/solution/liang-ge-shu-zu-de-jiao-ji-ii-by-leetcode-solution/ 202. å¿«ä¹æ•°å¯ä»¥çœ‹ä½œä¸€ä¸ªé“¾è¡¨ï¼Œ ä¸æ˜¯å¿«ä¹æ•°ä¼šå½¢æˆçŽ¯, å¦åˆ™å°±æ˜¯å¿«ä¹æ•°äº† æœ€ç»ˆä¼šå¾—åˆ° 11ã€‚ æœ€ç»ˆä¼šè¿›å…¥å¾ªçŽ¯ã€‚ å€¼ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæœ€åŽæŽ¥è¿‘æ— ç©·å¤§ã€‚ æ ¹æ®é¢˜è§£çŒœæµ‹ï¼Œç¬¬3ç§æƒ…å†µä¸ä¼šå‘ç”Ÿ https://leetcode.cn/problems/happy-number/solution/kuai-le-shu-by-leetcode-solution/ Hashè¡¨è§£æ³•1234567891011121314151617181920212223fun isHappy(n: Int): Boolean &#123; val set = hashSetOf&lt;Int&gt;() var value = n while (!set.contains(value)) &#123; // æ²¡æœ‰çŽ¯ï¼Œå°±ç»§ç»­ä¸‹ä¸€ä¸ª if (value == 1) &#123; return true &#125; set.add(value) // æŠŠä¸­é—´æ•°åŠ å…¥hashè¡¨ï¼Œä¸ºäº†åˆ¤æ–­æ˜¯å¦æœ‰çŽ¯çš„æƒ…å†µ value = nextSquareSum(value) &#125; return false&#125;private fun nextSquareSum(n: Int): Int &#123; var sum = 0 var num = n while (num &gt; 0) &#123; val balance = num % 10 //æ¯æ¬¡éƒ½èŽ·å–ä½™æ•° sum += balance * balance num = (num / 10) // æ‹¿åˆ°ä¸Šä¸€ä½ï¼Œç„¶åŽæ±‚ä½™ &#125; return sum&#125; åŒæŒ‡é’ˆè§£æ³•123456789101112131415fun isHappy2(n: Int): Boolean &#123; var slow = n var fast = n do &#123; slow = nextSquareSum(slow) //æ¯ä¸ªæ•°æ®å¯ä»¥çœ‹ä½œä¸€ä¸ªnode, ç„¶åŽè®¾ç½®å¿«æ…¢èŠ‚ç‚¹ fast = nextSquareSum(fast) fast = nextSquareSum(fast) if (slow == 1 || fast == 1) &#123; return true &#125; &#125; while (slow != fast) return false&#125; 1. ä¸¤æ•°ä¹‹å’Œæš´åŠ›è§£æ³•å½“æˆ‘ä»¬ä½¿ç”¨éåŽ†æ•´ä¸ªæ•°ç»„çš„æ–¹å¼å¯»æ‰¾ target - x æ—¶ï¼Œéœ€è¦æ³¨æ„åˆ°æ¯ä¸€ä¸ªä½äºŽ x ä¹‹å‰çš„å…ƒç´ éƒ½å·²ç»å’Œ x åŒ¹é…è¿‡(è¿™ä¸ªä¸€å¥ä¸€å¼€å§‹ä¸ç†è§£ï¼Œå…¶å®žå¦‚æžœi = 6, j = 5+1(1+1 , 2+1.. 4+1) ä¹‹å‰çš„éƒ½æ²¡åŒ¹é…ä¸Šï¼Œæ‰€ä»¥è¯´xä¹‹å‰çš„éƒ½æ²¡åŒ¹é…)ï¼Œå› æ­¤ä¸éœ€è¦å†è¿›è¡ŒåŒ¹é…ã€‚è€Œæ¯ä¸€ä¸ªå…ƒç´ ä¸èƒ½è¢«ä½¿ç”¨ä¸¤æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ x åŽé¢çš„å…ƒç´ ä¸­å¯»æ‰¾ target - xã€‚ 1234567891011121314 public int[] twoSum(int[] nums, int target) &#123; int n = nums.length; for (int i = 0; i &lt; n; ++i) &#123; for (int j = i + 1; j &lt; n; ++j) &#123; if (nums[i] + nums[j] == target) &#123; return new int[]&#123;i, j&#125;; &#125; &#125; &#125; return new int[0]; &#125;é“¾æŽ¥ï¼šhttps://leetcode.cn/problems/two-sum/solution/liang-shu-zhi-he-by-leetcode-solution/ Hashæ³•2, 7, 11, 15 12345678910fun twoSum(nums: IntArray, target: Int): IntArray &#123; val map = hashMapOf&lt;Int, Int&gt;() nums.forEachIndexed &#123; index, value -&gt; if (map.containsKey(target - nums[index])) &#123; //å‡å¦‚index = 0åŠ å…¥map,å½“index==2æ—¶, 9 - 7 = 2 å°±å¯ä»¥åœ¨mapä¸­æ‰¾åˆ°ï¼Œå°±åŒ¹é…ä¸Šäº† return intArrayOf(index, map[target - nums[index]]!!) //ç›¸å½“äºŽå¦ä¸€ä¸ªæ•°å…ˆåŠ å…¥mapï¼Œæ‰¾å¯¹åº”çš„æ•° &#125; map[value] = index &#125; throw RuntimeException(&quot;do not have the array&quot;)&#125; 454. å››æ•°ç›¸åŠ  IIè¿™é¢˜ä¸æ˜¯å¾ˆæ˜Žç™½ 123456789101112131415161718fun fourSumCount(nums1: IntArray, nums2: IntArray, nums3: IntArray, nums4: IntArray): Int &#123; val map = hashMapOf&lt;Int, Int&gt;() nums1.forEach &#123; n1 -&gt; nums2.forEach &#123; n2 -&gt; map[n1 + n2] = map.getOrDefault(n1 + n2, 0) + 1 &#125; &#125; var ans = 0 nums3.forEach &#123; n3 -&gt; nums4.forEach &#123; n4 -&gt; if (map.containsKey(-n3 - n4)) &#123; // 6, 12 , -7 , -11 4ä¸ªæ•°2 2ç›¸åŠ  ä¸ç®¡æ€Žä¹ˆç»„åˆï¼Œç»“æžœéƒ½ä¸€æ · ans += map[-n3 - n4] ?: 0 // æ ¹æ®å½“å‰çš„key,åŒºå‰é¢num1 num2æ‰¾ä¸ªæ•° &#125; &#125; &#125; return ans&#125; 15. ä¸‰æ•°ä¹‹å’Œi ä½ç½®ä¸ºtarget = nuts[-i] , å‰©ä¸‹çš„left rightå°±æ˜¯ twosumçš„é—®é¢˜ è§£æ³•11234567891011121314151617181920212223 fun threeSum(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; Arrays.sort(nums) val hashSetOf &#x3D; hashSetOf&lt;List&lt;Int&gt;&gt;() nums.forEachIndexed &#123; i, value -&gt; val target &#x3D; -nums[i] var left &#x3D; i + 1 var right &#x3D; nums.size - 1 while (left &lt; right) &#123; if (nums[left] + nums[right] &lt; target) &#123; left++ &#125; else if (nums[left] + nums[right] &gt; target) &#123; right-- &#125; else &#123; val list &#x3D; arrayListOf(nums[i], nums[left], nums[right]) hashSetOf.add(list) right-- &#x2F;&#x2F; ä¸ºäº†é˜²æ­¢é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¹Ÿéœ€è¦ç§»åŠ¨ left++ &#125; &#125; &#125;&#x2F;&#x2F; return hashSetOf.toList() return ArrayList(hashSetOf) &#x2F;&#x2F; è¿™é‡Œæ—¶é—´å¤æ‚åº¦æ˜¯ o(n),ç¬¬2ç§è§£æ³•æ˜¯å¯¹è¿™é‡Œè¿›è¡Œä¼˜åŒ– &#125; è§£æ³•2ä¼˜åŒ–åŽçš„ç¬¬äºŒç§è§£æ³•ï¼Œç«Ÿç„¶è¶…å‡ºæ—¶é—´é™åˆ¶ï¼Œåˆ·ç¬¬2éå†çœ‹çœ‹ 12345678910111213141516171819202122232425262728&#x2F;&#x2F;è¶…å‡ºæ—¶é—´é™åˆ¶fun threeSum2(nums: IntArray): List&lt;List&lt;Int&gt;&gt; &#123; Arrays.sort(nums) val ans &#x3D; ArrayList&lt;List&lt;Int&gt;&gt;() for (i in nums.indices) &#123; if (i &gt; 0 &amp;&amp; nums[i] &#x3D;&#x3D; nums[i - 1]) &#123; &#x2F;&#x2F; ç›¸åŒçš„targetå…ƒç´ ç›´æŽ¥pass continue &#125; val target &#x3D; -nums[i] var left &#x3D; i + 1 var right &#x3D; nums.size - 1 while (left &lt; right) &#123; if (nums[left] + nums[right] &lt; target) &#123; left++ &#125; else if (nums[left] + nums[right] &gt; target) &#123; right-- &#125; else &#123; val list &#x3D; arrayListOf(nums[i], nums[left], nums[right]) ans.add(list) right-- &#x2F;&#x2F; ä¸ºäº†é˜²æ­¢é‡å¤å…ƒç´ ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¹Ÿéœ€è¦ç§»åŠ¨ left++ while (left &lt; right &amp;&amp; nums[left] &#x3D;&#x3D; nums[left - 1]) continue &#x2F;&#x2F; è¿™ä¸¤å¥æ”¾åœ¨whileå¾ªçŽ¯å¤–é¢ é€€å‡ºä¸äº†,æ‹¿åˆ°ç»“æžœåŽï¼Œ ç›¸åŒçš„å…ƒç´ pass while (left &lt; right &amp;&amp; nums[right] &#x3D;&#x3D; nums[right - 1]) continue &#125; &#125; &#125; return ans&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"fastjson","slug":"fastjson","date":"2022-05-13T08:13:34.000Z","updated":"2024-01-22T14:24:14.422Z","comments":true,"path":"2022/05/13/fastjson/","link":"","permalink":"https://noteforme.github.io/2022/05/13/fastjson/","excerpt":"","text":"https://zonghaishang.gitbooks.io/fastjson-source-code-analysis/content/ FastJsonä¸ºä»€ä¹ˆå¿«https://tobebetterjavaer.com/gongju/fastjson.html#_05%E3%80%81%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BF%AB ä¸ºä»€ä¹ˆè¦è¿›è¡Œåºåˆ—åŒ– æ¯ä¸ªå®žä½“beanéƒ½å¿…é¡»å®žçŽ°serializabelæŽ¥å£å— å®žçŽ°åºåˆ—åŒ–çš„ä¸¤ä¸ªåŽŸå› ï¼š1ã€å°†å¯¹è±¡çš„çŠ¶æ€ä¿å­˜åœ¨å­˜å‚¨åª’ä½“ä¸­ä»¥ä¾¿å¯ä»¥åœ¨ä»¥åŽé‡æ–°åˆ›å»ºå‡ºå®Œå…¨ç›¸åŒçš„å‰¯æœ¬ï¼›2ã€æŒ‰å€¼å°†å¯¹è±¡ä»Žä¸€ä¸ªåº”ç”¨ç¨‹åºåŸŸå‘é€è‡³å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºåŸŸã€‚å®žçŽ°serializableæŽ¥å£çš„ä½œç”¨æ˜¯å°±æ˜¯å¯ä»¥æŠŠå¯¹è±¡å­˜åˆ°å­—èŠ‚æµï¼Œç„¶åŽå¯ä»¥æ¢å¤ï¼Œæ‰€ä»¥ä½ æƒ³å¦‚æžœä½ çš„å¯¹è±¡æ²¡å®žçŽ°åºåˆ—åŒ–æ€Žä¹ˆæ‰èƒ½è¿›è¡ŒæŒä¹…åŒ–å’Œç½‘ç»œä¼ è¾“å‘¢ï¼Œè¦æŒä¹…åŒ–å’Œç½‘ç»œä¼ è¾“å°±å¾—è½¬ä¸ºå­—èŠ‚æµï¼Œæ‰€ä»¥åœ¨åˆ†å¸ƒå¼åº”ç”¨ä¸­åŠè®¾è®¡æ•°æ®æŒä¹…åŒ–çš„åœºæ™¯ä¸­ï¼Œä½ å°±å¾—å®žçŽ°åºåˆ—åŒ–ã€‚ ç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯æ¯ä¸ªå®žä½“beanéƒ½è¦å®žçŽ°åºåˆ—åŒ–ï¼Œç­”æ¡ˆå…¶å®žè¿˜è¦å›žå½’åˆ°ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä½ çš„beanæ˜¯å¦éœ€è¦æŒä¹…åŒ–å­˜å‚¨åª’ä½“ä¸­ä»¥åŠæ˜¯å¦éœ€è¦ä¼ è¾“ç»™å¦ä¸€ä¸ªåº”ç”¨ï¼Œæ²¡æœ‰çš„è¯å°±ä¸éœ€è¦ï¼Œä¾‹å¦‚æˆ‘ä»¬åˆ©ç”¨fastjsonå°†å®žä½“ç±»è½¬åŒ–æˆjsonå­—ç¬¦ä¸²æ—¶ï¼Œå¹¶ä¸æ¶‰åŠåˆ°è½¬åŒ–ä¸ºå­—èŠ‚æµï¼Œæ‰€ä»¥å…¶å®žè·Ÿåºåˆ—åŒ–æ²¡æœ‰å…³ç³»ã€‚ Fastjson ç¤ºä¾‹æ²¡æœ‰ å®žçŽ°serializabel 1234567891011121314public class AutoTypeTest0 extends TestCase &#123; public void test_0() throws Exception &#123; String text = &quot;&#123;\\&quot;@type\\&quot;:\\&quot;com.alibaba.json.bvt.parser.autoType.AutoTypeTest0$Model\\&quot;,\\&quot;id\\&quot;:123&#125;&quot;; Model model = JSON.parseObject(text, Model.class); assertEquals(123, model.id); Model model2 = (Model) JSON.parse(text); assertEquals(123, model2.id); &#125; public static class Model &#123; public int id; &#125;&#125; é’ˆå¯¹ç¬¬2ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆjsonå­—ç¬¦ä¸²æœ€ç»ˆç½‘ç»œä¼ è¾“æœ‰æ²¡æœ‰è½¬åŒ–æˆ å­—èŠ‚æµï¼Œæ˜¯æ€Žä¹ˆè½¬çš„å‘¢ï¼Ÿ,è¿˜æ˜¯åœ¨ç½‘ç»œåè®®ä¸­è½¬çš„ã€‚ https://blog.csdn.net/weixin_44203158/article/details/88382770 åŽŸç†FastJsonçš„åºåˆ—åŒ–è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå†…å­˜ä¸­çš„Java Beanè½¬æ¢æˆJSONå­—ç¬¦ä¸²ï¼Œå¾—åˆ°å­—ç¬¦ä¸²ä¹‹åŽå°±å¯ä»¥é€šè¿‡æ•°æ®åº“ç­‰æ–¹å¼è¿›è¡ŒæŒä¹…åŒ–äº†ã€‚ é‚£ä¹ˆï¼ŒFastJsonæ˜¯å¦‚ä½•æŠŠä¸€ä¸ªJava Beanè½¬æ¢æˆå­—ç¬¦ä¸²çš„ï¼Œä¸€ä¸ªJava Beanä¸­æœ‰å¾ˆå¤šå±žæ€§å’Œæ–¹æ³•ï¼Œå“ªäº›å±žæ€§è¦ä¿ç•™ï¼Œå“ªäº›è¦å‰”é™¤ï¼Œåˆ°åº•éµå¾ªä»€ä¹ˆæ ·çš„åŽŸåˆ™å‘¢ï¼Ÿ å…¶å®žï¼Œå¯¹äºŽJSONæ¡†æž¶æ¥è¯´ï¼Œæƒ³è¦æŠŠä¸€ä¸ªJavaå¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ï¼š åŸºäºŽæˆå‘˜å˜é‡ åŸºäºŽsetter/getteræ–¹æ³• å¸¸ç”¨çš„JSONåºåˆ—åŒ–æ¡†æž¶ä¸­ï¼ŒFastJsonå’Œjacksonåœ¨æŠŠå¯¹è±¡åºåˆ—åŒ–æˆjsonå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡éåŽ†å‡ºè¯¥ç±»ä¸­çš„æ‰€æœ‰getteræ–¹æ³•è¿›è¡Œçš„ã€‚Gsonæ˜¯é€šè¿‡åå°„éåŽ†è¯¥ç±»ä¸­çš„æ‰€æœ‰å±žæ€§ï¼Œå¹¶æŠŠå…¶å€¼åºåˆ—åŒ–æˆjsonã€‚ https://codeantenna.com/a/vGtiZACEWS https://codeantenna.com/a/JCFJvwdTsd æºç åˆ†æžhttps://blog.csdn.net/shangzonghai/article/details/79187455 https://github.com/zonghaishang/fastjson æ³¨é‡Šç‰ˆæœ¬ Androidç‰ˆæœ¬ https://github.com/alibaba/fastjson/wiki/Android%E7%89%88%E6%9C%AC Fastjsonä¿®bug è®²è§£æ€Žä¹ˆæ‰“å°ASMå­—èŠ‚æ•°æ® https://www.bilibili.com/video/BV1JJ41197UK?spm_id_from=333.337.search-card.all.click â€‹ Fastjson ä¸ºä»€ä¹ˆç”¨ IdentityHashMap åºåˆ—åŒ–æµç¨‹é€šè¿‡asm èŽ·å–å¯¹è±¡ä¸Šçš„å±žæ€§çš„getæ–¹æ³•é›†åˆï¼Œç„¶åŽé€šè¿‡è°ƒç”¨ç›¸åº”çš„æ–¹æ³•æ‹¼è£…å‡ºjsonå­—ç¬¦ä¸²ã€‚ 123456789101112131415161718public final void write(Object object) &#123; if (object == null) &#123; /** å¦‚æžœå¯¹è±¡ä¸ºç©ºï¼Œç›´æŽ¥è¾“å‡º &quot;null&quot; å­—ç¬¦ä¸² */ out.writeNull(); return; &#125; Class&lt;?&gt; clazz = object.getClass(); /** æ ¹æ®å¯¹è±¡çš„Classç±»åž‹æŸ¥æ‰¾å…·ä½“åºåˆ—åŒ–å®žä¾‹ */ ObjectSerializer writer = getObjectWriter(clazz); try &#123; /** ä½¿ç”¨å…·ä½“serializerå®žä¾‹å¤„ç†å¯¹è±¡ */ writer.write(this, object, null, null, 0); &#125; catch (IOException e) &#123; throw new JSONException(e.getMessage(), e); &#125;&#125; 123456789101112private ObjectSerializer getObjectWriter(Class&lt;?&gt; clazz, boolean create) &#123; if (create) &#123; /** æ²¡æœ‰ç²¾ç¡®åŒ¹é…ï¼Œä½¿ç”¨é€šç”¨JavaBeanSerializer åºåˆ—åŒ–(å‡è®¾ä¸å¯ç”¨asm) */ writer = createJavaBeanSerializer(clazz); put(clazz, writer); &#125; if (writer == null) &#123; /** å°è¯•åœ¨å·²æ³¨å†Œç¼“å­˜æ‰¾åˆ°ç‰¹å®šclassçš„åºåˆ—åŒ–å®žä¾‹ */ writer = serializers.get(clazz); &#125;&#125; User ASM åœ¨è¿™é‡Œç”Ÿæˆ 12345678910public JavaBeanSerializer createJavaBeanSerializer(SerializeBeanInfo beanInfo) throws Exception &#123; byte[] code = cw.toByteArray(); // è¿™é‡Œå°±æ˜¯åŠ¨æ€ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶ Class&lt;?&gt; serializerClass = classLoader.defineClassPublic(classNameFull, code, 0, code.length); Constructor&lt;?&gt; constructor = serializerClass.getConstructor(SerializeBeanInfo.class); Object instance = constructor.newInstance(beanInfo); return (JavaBeanSerializer) instance;&#125; è¿™æ˜¯ç”Ÿæˆçš„ASMç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class ASMSerializer_1_User extends JavaBeanSerializer implements ObjectSerializer &#123; public Type id_asm_fieldType = ASMUtils.getMethodType(User.class, &quot;getId&quot;); public ObjectSerializer id_asm_ser_; public ASMSerializer_1_User(SerializeBeanInfo var1) &#123; super(var1); &#125; public void write(JSONSerializer var1, Object var2, Object var3, Type var4, int var5) throws IOException &#123; if (var2 == null) &#123; var1.writeNull(); &#125; else &#123; SerializeWriter var9 = var1.out; if (!this.writeDirect(var1)) &#123; this.writeNormal(var1, var2, var3, var4, var5); &#125; else if (var9.isEnabled(32768)) &#123; this.writeDirectNonContext(var1, var2, var3, var4, var5); &#125; else &#123; User var10 = (User)var2; if (!this.writeReference(var1, var2, var5)) &#123; if (var9.isEnabled(2097152)) &#123; this.writeAsArray(var1, var2, var3, var4, var5); &#125; else &#123; SerialContext var11 = var1.getContext(); var1.setContext(var11, var2, var3, 0); char var12 = &#x27;&#123;&#x27;; String var6 = &quot;id&quot;; Long var13 = var10.getId(); if (var13 == null) &#123; if (var9.isEnabled(260)) &#123; var9.write(var12); var9.writeFieldNameDirect(var6); var9.writeNull(0, 256); var12 = &#x27;,&#x27;; &#125; &#125; else &#123; var9.write(var12); var9.writeFieldNameDirect(var6); var1.writeWithFieldName(var13, var6, this.id_asm_fieldType, 0); var12 = &#x27;,&#x27;; &#125; var6 = &quot;name&quot;; String var14 = var10.getName(); if (var14 == null) &#123; if (var9.isEnabled(132)) &#123; var9.write(var12); var9.writeFieldNameDirect(var6); var9.writeNull(0, 128); var12 = &#x27;,&#x27;; &#125; &#125; else &#123; var9.writeFieldValueStringWithDoubleQuoteCheck(var12, var6, var14); var12 = &#x27;,&#x27;; &#125; if (var12 == &#x27;&#123;&#x27;) &#123; var9.write(123); &#125; var9.write(125); var1.setContext(var11); &#125; &#125; &#125; &#125; &#125;&#125; https://www.jianshu.com/p/824f8f4df15d ååºåˆ—åŒ– é€šè¿‡asm èŽ·å–å¯¹è±¡ä¸Šçš„å±žæ€§çš„setæ–¹æ³•é›†åˆï¼Œç„¶åŽè°ƒç”¨setæ–¹æ³•é›†åˆï¼Œèµ‹å€¼åˆ°ç›¸åº”çš„å±žæ€§ã€‚ 1Files.write(code,new File(&quot;ASMDeserializer.class&quot;)) Tokenå®šä¹‰Tokenæ˜¯Fastjsonä¸­å®šä¹‰çš„jsonå­—ç¬¦ä¸²çš„åŒç±»åž‹å­—æ®µï¼Œå³â€{â€œã€â€[â€œã€æ•°å­—ã€å­—ç¬¦ä¸²ç­‰ï¼Œç”¨äºŽåˆ†éš”jsonå­—ç¬¦ä¸²ä¸åŒå­—æ®µã€‚ ä¾‹å¦‚ï¼Œ{â€œå§“åâ€ï¼šâ€œå¼ ä¸‰â€,â€œå¹´é¾„â€:â€œ20â€}æ˜¯ä¸€ä¸ªjsonå­—ç¬¦ä¸²ï¼Œåœ¨ååºåˆ—åŒ–ä¹‹å‰ï¼Œéœ€è¦å…ˆå°†å…¶è§£æžä¸º &#123; ã€ å§“åã€ ï¼šã€ å¼ ä¸‰ã€ ,ã€ å¹´é¾„ã€ ï¼šã€ 20ã€ &#125;è¿™äº›å­—æ®µçš„Tokenæµï¼ŒéšåŽå†æ ¹æ®classååºåˆ—åŒ–ä¸ºå“åº”çš„å¯¹è±¡ã€‚ åœ¨è¿›è¡ŒTokenè§£æžä¹‹å‰ï¼Œjsonå­—ç¬¦ä¸²å¯¹ç¨‹åºè€Œè¨€åªæ˜¯ä¸€ä¸ªæ— æ„ä¹‰çš„å­—ç¬¦ä¸²ã€‚éœ€è¦å°†jsonå­—ç¬¦ä¸²è§£æžä¸ºä¸€ä¸ªä¸ªçš„Tokenï¼Œå¹¶ä»¥Tokenä¸ºå•ä½è§£è¯»jsonæ•°æ®ã€‚ åœ¨package com.alibaba.fastjson.parseråŒ…ä¸­ï¼Œç»™å‡ºäº†æ‰€æœ‰Tokençš„å®šä¹‰ã€‚ ç¨åŽç»§ç»­åˆ†æž https://blog.csdn.net/qq_45854465/article/details/120626835 https://blog.csdn.net/lllhhhyyy999/article/details/120896574 https://blog.csdn.net/shangzonghai/article/details/79187455","categories":[],"tags":[]},{"title":"JVM-VALUE-DELIVER","slug":"JVM-VALUE-DELIVER","date":"2022-05-05T04:46:27.000Z","updated":"2022-06-12T03:17:58.660Z","comments":true,"path":"2022/05/05/JVM-VALUE-DELIVER/","link":"","permalink":"https://noteforme.github.io/2022/05/05/JVM-VALUE-DELIVER/","excerpt":"","text":"å†åšleetcodeæ—¶ä¹Ÿé‡åˆ°äº†ï¼Œjavaæ—¶å¼•ç”¨ä¼ é€’è¿˜æ˜¯å€¼ä¼ é€’çš„é—®é¢˜ï¼Œè¿™æ–¹é¢ æŒ‡é’ˆå°±å¾ˆæ¸…æ¥š, https://segmentfault.com/a/1190000016773324 è¿™é‡Œè®²è§£å¾ˆæ¸…æ¥š 1. åŸºæœ¬æ•°æ®ç±»åž‹çš„å­˜å‚¨ï¼š A. åŸºæœ¬æ•°æ®ç±»åž‹çš„å±€éƒ¨å˜é‡ B. åŸºæœ¬æ•°æ®ç±»åž‹çš„æˆå‘˜å˜é‡ C. åŸºæœ¬æ•°æ®ç±»åž‹çš„é™æ€å˜é‡ 2. å¼•ç”¨æ•°æ®ç±»åž‹çš„å­˜å‚¨ A.åŸºæœ¬æ•°æ®ç±»åž‹çš„å±€éƒ¨å˜é‡ å®šä¹‰åŸºæœ¬æ•°æ®ç±»åž‹çš„å±€éƒ¨å˜é‡ä»¥åŠæ•°æ®éƒ½æ˜¯ç›´æŽ¥å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ ˆä¸Šï¼Œä¹Ÿå°±æ˜¯å‰é¢è¯´åˆ°çš„â€œè™šæ‹Ÿæœºæ ˆâ€ï¼Œæ•°æ®æœ¬èº«çš„å€¼å°±æ˜¯å­˜å‚¨åœ¨æ ˆç©ºé—´é‡Œé¢ã€‚ 123456789101112131415161718public class JavaValue &#123; //æµ‹è¯• public static void main(String[] args) &#123; Person p = new Person(); p.setName(&quot;æˆ‘æ˜¯é©¬åŒ–è…¾&quot;); p.setAge(45); PersonCrossTest(p); System.out.println(&quot;æ–¹æ³•æ‰§è¡ŒåŽçš„nameï¼š&quot; + p.getName()); &#125; public static void PersonCrossTest(Person person) &#123; System.out.println(&quot;Before new Person ä¼ å…¥çš„personçš„nameï¼š&quot; + person.getName()); person = new Person(); System.out.println(&quot;After new Person ä¼ å…¥çš„personçš„nameï¼š&quot; + person.getName()); person.setName(&quot;æˆ‘æ˜¯å¼ å°é¾™&quot;); System.out.println(&quot;æ–¹æ³•å†…é‡æ–°èµ‹å€¼åŽçš„nameï¼š&quot; + person.getName()); &#125;&#125; person = new Person();ä¸€æ—¦æ‰§è¡Œè¿™ä¸€æ­¥æ“ä½œåŽï¼ŒæŠŠä¹‹å‰çš„æŒ‡å‘å°±åŽ»æŽ‰äº†","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"LC-LinkedList","slug":"LC-LinkedList","date":"2022-05-04T05:40:18.000Z","updated":"2023-01-02T03:31:39.079Z","comments":true,"path":"2022/05/04/LC-LinkedList/","link":"","permalink":"https://noteforme.github.io/2022/05/04/LC-LinkedList/","excerpt":"","text":"https://leetcode.cn/circle/discuss/jq9Zke/ 203. ç§»é™¤é“¾è¡¨å…ƒç´ è¿­ä»£æ³•12345678910111213fun removeElements(head: ListNode?, target: Int): ListNode? &#123; val dummyHead = ListNode() dummyHead.next = head var p: ListNode? = dummyHead while (p?.next != null) &#123; // ä»ŽçœŸæ­£çš„å¤´èŠ‚ç‚¹ å¼€å§‹åˆ¤æ–­ï¼Œå› ä¸ºå®žé™…æ²¡ç§»åŠ¨ï¼Œæ‰€ä»¥æ²¡é—®é¢˜ if (p.next?.`val` == target) &#123; p.next = p.next?.next &#125; else &#123; p = p.next // æ”¾æœ€å¤–é¢ä¼šè·³è¿‡è¿žç»­ä¸ºtargetçš„Node [7,7,7,7] 7 &#125; &#125; return dummyHead.next&#125; é€’å½’æ³•https://leetcode-cn.com/problems/remove-linked-list-elements/solution/yi-chu-lian-biao-yuan-su-by-leetcode-sol-654m/ 707. è®¾è®¡é“¾è¡¨some notice æ³¨æ„è¿™é‡Œä¸æ˜¯dummyHead.next // æ³¨æ„ï¼š ä¹‹å‰è¿™ä¸ªæ”¾åœ¨ä¸Šè¾¹çš„ifé‡Œé¢ æ³¨æ„è¿™é‡Œä¹‹å‰æ˜¯ index &gt;= size 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566class MyLinkedList() &#123; private val dummyHead = ListNode() var size = 0 //length fun get(index: Int): Int &#123; if (index &lt; -1 || index &gt; size - 1) return -1 // 3.æ³¨æ„è¿™é‡Œä¹‹å‰æ˜¯ index &gt;= size var pIndex = index var curr = dummyHead.next while (pIndex-- &gt; 0) &#123; curr = curr?.next &#125; return curr?.`val` ?: -1 &#125; fun addAtHead(`val`: Int) &#123; val newNode = ListNode(`val`) // æ–°çš„èŠ‚ç‚¹ val headNode = dummyHead.next // ä¹‹å‰çš„å¤´èŠ‚ç‚¹ dummyHead.next = newNode // è™šæ‹Ÿå¤´èŠ‚ç‚¹ æŒ‡å‘æ–°çš„å¤´èŠ‚ç‚¹ if (headNode != null) &#123; newNode.next = headNode // æ–°çš„å¤´èŠ‚ç‚¹æŒ‡å‘ ä¹‹å‰çš„å¤´èŠ‚ç‚¹ &#125; size++ // æ³¨æ„ï¼š ä¹‹å‰è¿™ä¸ªæ”¾åœ¨ä¸Šè¾¹çš„ifé‡Œé¢ &#125; fun addAtTail(`val`: Int) &#123; val newNode = ListNode(`val`) // æ–°çš„èŠ‚ç‚¹ var p: ListNode? = dummyHead // 1.æ³¨æ„è¿™é‡Œä¸æ˜¯dummyHead.next while (p != null) &#123; if (p.next == null) &#123; p.next = newNode size++ break // å¿…é¡»åœæ­¢ï¼Œå¦åˆ™ä¸€ç›´åœ¨å°¾éƒ¨æ·»åŠ  æ–°çš„èŠ‚ç‚¹ &#125; p = p.next &#125; &#125; fun addAtIndex(index: Int, `val`: Int) &#123; if (index &gt; size) return //2. æ³¨æ„è¿™é‡Œä¹‹å‰æ˜¯ index &gt;= size val newNode = ListNode(`val`) // æ–°çš„èŠ‚ç‚¹ var pIndex = index var curr = dummyHead // 1.æ³¨æ„è¿™é‡Œä¸æ˜¯dummyHead.next while (pIndex-- &gt; 0) &#123; curr = curr.next!! &#125; val temp = curr.next curr.next = newNode newNode.next = temp size++ &#125; fun deleteAtIndex(index: Int) &#123; if (index &gt;= size || index &lt; 0) &#123; return &#125; var pIndex = index var curr: ListNode? = dummyHead //1. æ³¨æ„è¿™é‡Œä¹‹å‰æ˜¯ index &gt;= size while (pIndex-- &gt; 0) &#123; curr = curr?.next &#125; if (curr?.next != null) &#123; curr.next = curr.next?.next &#125; size-- // æ³¨æ„ï¼š ä¹‹å‰è¿™ä¸ªæ”¾åœ¨ä¸Šè¾¹çš„ifé‡Œé¢ &#125;&#125; 206. åè½¬é“¾è¡¨åŒæŒ‡é’ˆ1234567891011121314fun reverseList(head: ListNode?): ListNode? &#123; var pre = head var curr: ListNode? = null while (pre != null) &#123; val termPre = pre.next pre.next = curr curr = pre if (termPre == null) &#123; // åˆ°äº†æœ€åŽä¸€ä¸ªnoteä¸‹ä¸€ä¸ªnote,ä¸èƒ½èµ‹å€¼äº†ï¼Œå¦åˆ™preå°±æ˜¯nullä½œä¸ºå¤´èŠ‚ç‚¹äº† return pre &#125; pre = termPre &#125; return pre // æœ€åŽä¸€ä¸ªnode,æŒ‡å‘å‰é¢çš„node&#125; after watching the https://leetcode.cn/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-shuang-zhi-zhen-di-gui-yao-mo-/ return curr point is better 12345678910111213141516171819202122/** * Example: * var li = ListNode(5) * var v = li.`val` * Definition for singly-linked list. * class ListNode(var `val`: Int) &#123; * var next: ListNode? = null * &#125; */class Solution &#123; fun reverseList(head: ListNode?): ListNode? &#123; var pre = head var curr: ListNode? = null while (pre != null) &#123; val termPre = pre.next pre.next = curr curr = pre pre = termPre &#125; return curr // æœ€åŽä¸€ä¸ªnode not null,æŒ‡å‘å‰é¢ &#125;&#125; é€’å½’å†™æ³•24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹è¿­ä»£æ³•1234567891011121314fun swapPairs(head: ListNode?): ListNode? &#123; val dumpNode = ListNode() dumpNode.next = head var temp = dumpNode while (temp.next?.next != null) &#123; val n1 = temp.next val n2 = n1?.next n1?.next = n2?.next temp.next = n2 n2?.next = n1 temp = n1!! &#125; return dumpNode.next&#125; accoding the idea https://leetcode.cn/problems/swap-nodes-in-pairs/solution/liang-liang-jiao-huan-lian-biao-zhong-de-jie-di-91/ the subject most inportant is temp = n1 , I didnâ€™t know how to do the next cycle before like author said å¦‚æžœ temp çš„åŽé¢æ²¡æœ‰èŠ‚ç‚¹æˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™æ²¡æœ‰æ›´å¤šçš„èŠ‚ç‚¹éœ€è¦äº¤æ¢ï¼Œå› æ­¤ç»“æŸäº¤æ¢. is also important 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹åŒæŒ‡é’ˆ fast Node go n steps firstly, then fast slow Node go , at last slow point at the delete Node that last Node (æ…¢æŒ‡é’ˆ æŒ‡å‘å¾…åˆ é™¤æŒ‡é’ˆçš„ä¸Šä¸€ä¸ªæŒ‡é’ˆ) 123456789101112131415161718192021fun removeNthFromEnd(head: ListNode?, n: Int): ListNode? &#123; val dumpNode = ListNode() dumpNode.next = head var fp = dumpNode var sp = dumpNode var lastIndex = n while (lastIndex-- &gt; 0) &#123; if (fp.next != null) &#123; fp = fp.next!! &#125; &#125; while (dumpNode.next != null) &#123; if (fp.next == null) &#123; // å¿…é¡»ç»ˆæ­¢ï¼Œå¦åˆ™ä¼šæ˜¯æ­»å¾ªçŽ¯ break &#125; fp = fp.next!! sp = sp.next!! &#125; sp.next = sp.next?.next return dumpNode.next&#125; æ ˆ https://leetcode.cn/problems/remove-nth-node-from-end-of-list/solution/shan-chu-lian-biao-de-dao-shu-di-nge-jie-dian-b-61/ 160. ç›¸äº¤é“¾è¡¨ èµ°å¯¹æ–¹çš„è·¯ï¼Œä¸¤æ¡é“¾è¡¨ç›¸åŠ  è·¯ç¨‹ç›¸ç­‰ ç›¸äº’ç¬¬2ä¸ªè¿žæŽ¥çš„é“¾è¡¨èµ°å®ŒåŽï¼Œä¸‹ä¸ªèŠ‚ç‚¹éƒ½æ˜¯null å¾ªçŽ¯å°±ç»“æŸäº† 123456789101112131415161718192021fun getIntersectionNode(headA: ListNode?, headB: ListNode?): ListNode? &#123; var pA = headA var pB = headB if (pA == null || pB == null) &#123; return null &#125; while (pA != pB) &#123; // ç›¸äº’ç¬¬2ä¸ªè¿žæŽ¥çš„é“¾è¡¨èµ°å®ŒåŽï¼Œä¸‹ä¸ªèŠ‚ç‚¹éƒ½æ˜¯null å¾ªçŽ¯å°±ç»“æŸäº† pA = if (pA == null) &#123; headB &#125; else &#123; pA.next &#125; pB = if (pB == null) &#123; headA &#125; else &#123; pB.next &#125; &#125; return pA&#125; https://leetcode.cn/problems/intersection-of-two-linked-lists/solution/xiang-jiao-lian-biao-by-leetcode-solutio-a8jn/ https://leetcode.cn/problems/intersection-of-two-linked-lists/solution/shuang-zhi-zhen-yyds-dai-ma-jian-ji-teng-0bch/ 142. çŽ¯å½¢é“¾è¡¨ IIhttps://leetcode.cn/problems/linked-list-cycle-ii/solution/142-huan-xing-lian-biao-ii-jian-hua-gong-shi-jia-2/ å¾ˆç”ŸåŠ¨çš„å›¾ å› ä¸ºfastå·²ç»åœ¨çŽ¯é‡Œ, Slowåªèƒ½èµ°ä¸€åœˆï¼Œfastä¸èƒ½è·³è¿‡ï¼Œæ‰€ä»¥ slowçš„ æ­¥æ•° æ˜¯ x+y è€Œä¸æ˜¯ x + è‹¥å¹²çŽ¯çš„é•¿åº¦ + y æ ¹æ®å…¬å¼æŽ¨åˆ°ç»“æžœ ,æœ‰çŽ¯çš„è¯ï¼Œå…ˆç›¸é‡ï¼Œç„¶åŽåˆ†åˆ«ä»Žhead ç›¸é‡ç‚¹ å¾€ç›¸äº¤ç‚¹èµ°. ä¸‹é¢è¿™ä¸ªç­”æ¡ˆå°±æ˜¯æ‹¼å‡ºæ¥çš„ è§£æ³•ä¸€1234567891011121314151617181920 fun detectCycle(head: ListNode?): ListNode? &#123;// val dumpNode: ListNode? = ListNode() // ä¸è®¾ç½®çš„è¯ï¼Œå¦‚æžœæœ‰æŒ‡é’ˆnextæ˜¯null,èµ‹å€¼å°±æœ‰é—®é¢˜,è¿™ä¸ªä¸èƒ½æœ‰ï¼Œå¿…é¡»ä»Žheadå‡ºå‘çš„,å› ä¸ºfast pointèµ°ä¸¤éƒ¨ var fp = head var sp = head while (true) &#123; fp = fp?.next?.next sp = sp?.next if (fp == null) &#123; return null // èµ°åˆ°åº•äº†ï¼Œno cycle, éœ€è¦æ”¾å‰é¢ï¼Œå¦åˆ™éƒ½æ˜¯nullçš„è¯ï¼Œä¸‹é¢çš„fp == spæ¡ä»¶å°±åŒ¹é…äº† &#125; else if (fp == sp) &#123; break &#125; &#125; var secondPoint = head while (sp?.next != null &amp;&amp; secondPoint != sp) &#123; // çœ‹äº†éšæƒ³å½•ç­”æ¡ˆï¼Œè¿™ä¸ªå¯ä»¥æ”¾åˆ°ä¸Šé¢çš„whileå¾ªçŽ¯é‡Œé¢,æ˜Žå¤©é‡å†™ä¸‹ secondPoint = secondPoint?.next!! sp = sp.next &#125; return secondPoint &#125; è§£æ³•äºŒä¸‹é¢å†™æ³•ï¼Œçœ‹äº†éšæƒ³å½•çš„æ€è·¯ï¼Œç¬¬äºŒå¤©é‡å†™çš„ã€‚ å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå¾ªçŽ¯çš„å†…éƒ¨ï¼Œhead point å’Œç›¸é‡ç‚¹å¼€å§‹èµ°. å…¬å¼æŽ¨å¯¼è¿‡ç¨‹ç†è§£äº†å°±å¥½äº†ï¼Œç„¶åŽè®°ä½ç»“è®ºã€‚ 123456789101112131415161718 fun detectCycle(head: ListNode?): ListNode? &#123;// val dumpNode: ListNode? = ListNode() // 1.ä¸è®¾ç½®?çš„è¯ï¼Œå¦‚æžœæœ‰æŒ‡é’ˆnextæ˜¯null,èµ‹å€¼å°±æœ‰é—®é¢˜,2.dumpNodeè¿™ä¸ªä¸èƒ½æœ‰ï¼Œå¿…é¡»ä»Žheadå‡ºå‘çš„,å› ä¸ºfast pointèµ°ä¸¤éƒ¨ var fp = head var sp = head while (fp != null &amp;&amp; sp != null) &#123; // å¾ªçŽ¯æ¡ä»¶ç›˜ç©ºå°±å¯ä»¥äº†ï¼Œæ²¡æœ‰çŽ¯å°±ä¸€å®šä¼šèµ°åˆ°null, ä¸€ç›´æƒ³åˆ°æ¡ä»¶ fp != sp fp = fp.next?.next sp = sp.next if (fp!=null&amp;&amp;fp == sp) &#123; // fp!=nullä¸åŠ ï¼Œæ²¡çŽ¯çš„è¯ï¼Œå°±null==null äº† var node1 = head while (sp?.next != null &amp;&amp; node1 != sp) &#123; node1 = node1?.next!! sp = sp.next &#125; return node1 &#125; &#125; return null &#125; å¤æ‚åº¦åˆ†æž æ—¶é—´å¤æ‚åº¦ï¼šO(N)O(N)ï¼Œå…¶ä¸­ NN ä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚åœ¨æœ€åˆåˆ¤æ–­å¿«æ…¢æŒ‡é’ˆæ˜¯å¦ç›¸é‡æ—¶ï¼Œ\\textit{slow}slow æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»ä¸ä¼šè¶…è¿‡é“¾è¡¨çš„æ€»é•¿åº¦ï¼›éšåŽå¯»æ‰¾å…¥çŽ¯ç‚¹æ—¶ï¼Œèµ°è¿‡çš„è·ç¦»ä¹Ÿä¸ä¼šè¶…è¿‡é“¾è¡¨çš„æ€»é•¿åº¦ã€‚å› æ­¤ï¼Œæ€»çš„æ‰§è¡Œæ—¶é—´ä¸º O(N)+O(N)=O(N)O(N)+O(N)=O(N)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ã€‚æˆ‘ä»¬åªä½¿ç”¨äº† \\textit{slow}, \\textit{fast}, \\textit{ptr}slow,fast,ptr ä¸‰ä¸ªæŒ‡é’ˆã€‚ ä½œè€…ï¼šLeetCode-Solutioné“¾æŽ¥ï¼šhttps://leetcode.cn/problems/linked-list-cycle-ii/solution/huan-xing-lian-biao-ii-by-leetcode-solution/æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚","categories":[],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"LC-array","slug":"LC-array","date":"2022-05-02T05:07:27.000Z","updated":"2023-10-21T14:43:16.486Z","comments":true,"path":"2022/05/02/LC-array/","link":"","permalink":"https://noteforme.github.io/2022/05/02/LC-array/","excerpt":"","text":"Arrayç»“æž„æ•°ç»„ä¸ºä»€ä¹ˆä»Ž0å¼€å§‹. 123int foo[5] = &#123;1,2,3,4,5&#125;;foo[0] *(foo + 0) // å› ä¸ºcè¯­è¨€æŒ‡é’ˆåç§»é‡ä»Ž0å¼€å§‹ 12a[3][4]a[0][0], a[0][1] , a[0][2] , a[0][3] https://developer.51cto.com/article/649423.html LEETCODE 26https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/ è§£æ³•ï¼š åŒæŒ‡é’ˆ é¦–å…ˆæ³¨æ„æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆé‡å¤çš„å…ƒç´ ä¸€å®šä¼šç›¸é‚»ã€‚ è¦æ±‚åˆ é™¤é‡å¤å…ƒç´ ï¼Œå®žé™…ä¸Šå°±æ˜¯å°†ä¸é‡å¤çš„å…ƒç´ ç§»åˆ°æ•°ç»„çš„å·¦ä¾§ã€‚ è€ƒè™‘ç”¨ 2 ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªåœ¨å‰è®°ä½œ pï¼Œä¸€ä¸ªåœ¨åŽè®°ä½œ qï¼Œç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š æ¯”è¾ƒ p å’Œ q ä½ç½®çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚ å¦‚æžœç›¸ç­‰ï¼Œq åŽç§» 1 ä½å¦‚æžœä¸ç›¸ç­‰ï¼Œå°† q ä½ç½®çš„å…ƒç´ å¤åˆ¶åˆ° p+1 ä½ç½®ä¸Šï¼Œp åŽç§»ä¸€ä½ï¼Œq åŽç§» 1 ä½é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ° q ç­‰äºŽæ•°ç»„é•¿åº¦ã€‚ è¿”å›ž p + 1ï¼Œå³ä¸ºæ–°æ•°ç»„é•¿åº¦ã€‚ Nums[p] == nums[q] q åŽç§»1ä½ Nums[p] != nums[q]. Nums[p+1] = nums[q]. p åŽç§»1ä½ï¼Œ qåŽç§»1ä½ Nums[p] != nums[q] ã€‚ã€‚ã€‚ã€‚ ä¸Šå›¾å‘ä¸‹çš„ç®­å¤´ï¼Œåªä»£è¡¨æ­¥éª¤ï¼Œä¸ä»£è¡¨æŒ‡é’ˆä½ç½® 123456789101112131415161718192021222324252627282930//è¿™ä¸ªæ›´å¥½ç†è§£ https://leetcode-cn.com/problems/remove-duplicates-from-sorted-array/solution/shuang-zhi-zhen-shan-chu-zhong-fu-xiang-dai-you-hu/fun removeDuplicates1(nums: IntArray): Int &#123; if (nums.isEmpty())&#123; return 0 &#125; var slowIndex = 0 for (fastIndex in 1 until nums.size) &#123; if (nums[fastIndex] != nums[slowIndex]) &#123; nums[slowIndex + 1] = nums[fastIndex] // æ…¢æŒ‡é’ˆçš„åŽä¸€ä¸ªä½ç½®ï¼Œæ”¾ä¸Š å¿«æŒ‡é’ˆä¸åŒçš„å€¼ slowIndex++ &#125; &#125; return slowIndex+1&#125;//å®˜æ–¹è§£æ³•ï¼Œä¸å¥½ç†è§£fun removeDuplicates(nums: IntArray): Int &#123; if (nums.isEmpty())&#123; return 0 &#125; var slowIndex = 1 for (fastIndex in 1 until nums.size) &#123; if (nums[fastIndex] != nums[slowIndex - 1]) &#123; nums[slowIndex] = nums[fastIndex] slowIndex++; &#125; &#125; return slowIndex&#125; 283. ç§»åŠ¨é›¶123456789101112fun moveZeroes(nums: IntArray): Unit &#123; var slowIndex = 0 for (fastIndex in 1 until nums.size) &#123; if (nums[fastIndex] != 0 &amp;&amp; nums[slowIndex] == 0) &#123; //ç¬¦åˆæ¡ä»¶å°±äº¤æ¢ä½ç½®ï¼Œæ…¢æŒ‡é’ˆè®©å®ƒåœ¨åŽé¢çš„æ¡ä»¶ç§»åŠ¨ nums[slowIndex] = nums[fastIndex] nums[fastIndex] = 0 &#125; if (nums[slowIndex] != 0) &#123; // æ…¢æŒ‡é’ˆ !=0å°±ç§»åŠ¨ slowIndex++ &#125; &#125;&#125; 844. æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²æ ˆ123456789101112131415161718192021222324fun backspaceCompare1(s: String, t: String): Boolean &#123; val sStack = Stack&lt;Char&gt;() for (i in s.indices) &#123; if (s[i] == &#x27;#&#x27;) &#123; if (sStack.isNotEmpty()) &#123; sStack.pop() &#125; &#125; else &#123; sStack.push(s[i]) &#125; &#125; val tStack = Stack&lt;Char&gt;() for (j in t.indices) &#123; if (t[j] == &#x27;#&#x27;) &#123; // å¤åˆ¶è¿˜ä¸å¦‚è‡ªå·±å†™ï¼Œä¸€å¼€å§‹å†™æˆs[i] if (tStack.isNotEmpty()) &#123; //æ”¾ä¸Šé¢if,tStackæ˜¯ç©ºçš„æƒ…å†µï¼Œä¼šæŠŠ #æ·»åŠ è¿›æ¥ tStack.pop() &#125; &#125; else &#123; tStack.push(t[j])// å¤åˆ¶è¿˜ä¸å¦‚è‡ªå·±å†™ï¼Œä¸€å¼€å§‹å†™æˆs[i] &#125; &#125; return sStack == tStack&#125; åŒæŒ‡é’ˆ112345678910111213141516171819202122232425262728293031323334353637383940414243fun backspaceCompare(s: String, t: String): Boolean &#123; var i = s.length - 1 var j = t.length - 1 var skipS = 0 var skipT = 0 while (i &gt;= 0 &amp;&amp; j &gt;= 0) &#123; while (i &gt;= 0) &#123; if (s[i] == &#x27;#&#x27;) &#123; // ç¢°åˆ°è¿™ä¸ªå…ˆç´¯è®¡ skipS++ i-- &#125; else if (skipS &gt; 0) &#123; // æŠŠ#å¤„ç† skipS-- i-- &#125; else &#123; break &#125; &#125; while (j &gt;= 0) &#123; if (t[j] == &#x27;#&#x27;) &#123; skipT++ j-- &#125; else if (skipT &gt; 0) &#123; skipT-- j-- &#125; else &#123; break &#125; &#125; if (i &gt;= 0 &amp;&amp; j &gt;= 0) &#123; //ä¸Šé¢æœ‰å¯èƒ½ i, jæœ‰å¯èƒ½åˆ°-1 if (s[i] != t[j]) &#123; return false &#125; &#125; else if (i &gt;= 0 || j &gt;= 0) &#123; // i ,jæœ‰å¤šä½™çš„ï¼Œä¹Ÿæœ‰é—®é¢˜ return false &#125; i-- j-- &#125; return true&#125; https://leetcode-cn.com/problems/backspace-string-compare/solution/shuang-zhi-zhen-bi-jiao-han-tui-ge-de-zi-8fn8/ åŒæŒ‡é’ˆ2è¿™ç§åŒæŒ‡é’ˆå†™æ³•ä¹Ÿä¸é”™,åªæ˜¯æœ€åŽçš„String.valueOfä¸åŒè¯­è¨€æœ‰å‡ºå…¥ï¼Œå’Œè¿™ä¸ªé¢˜ç›®æ„æ€æœ‰ç‚¹å¯¹ä¸ä¸Š 1234567891011121314151617181920212223242526class Solution &#123; public boolean backspaceCompare(String s, String t) &#123; // equals()åˆ¤æ–­è¿”å›žçš„ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ return changeString(s).equals(changeString(t)); &#125; public static String changeString (String str) &#123; // å…ˆå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œæ–¹ä¾¿ä½¿ç”¨åŒæŒ‡é’ˆæ³• char[] x = str.toCharArray(); int slow = 0; for (int fast = 0; fast &lt; x.length; fast++) &#123; // å½“x[fast] != &#x27;#&#x27;æ—¶ï¼Œx[fast]è¦†ç›–x[slow]ï¼Œç„¶åŽslow++ if (x[fast] != &#x27;#&#x27;) x[slow++] = x[fast]; // å½“x[fast] = &#x27;#&#x27;ä¸”slow!=0æ—¶ï¼Œslow-- else if(x[fast] == &#x27;#&#x27; &amp;&amp; slow != 0) slow--; &#125; // è¿”å›žå­—ç¬¦ä¸² return String.valueOf(x, 0, slow); &#125;&#125;https://leetcode-cn.com/problems/backspace-string-compare/solution/shuang-zhi-zhen-fa-si-lu-jian-dan-rong-y-bmn6/ æœ‰åºæ•°ç»„çš„å¹³æ–¹977. æœ‰åºæ•°ç»„çš„å¹³æ–¹left ,right å·¦å³ä¸¤ç«¯æ¯”è¾ƒå¤§å°ï¼Œå¤§çš„æ”¾æ–°æ•°ç»„çš„æœ€å³ç«¯ 123456789101112131415161718fun sortedSquares(nums: IntArray): IntArray &#123; var left = 0 var right = nums.size - 1 var index = nums.size - 1 val arrayNew = IntArray(nums.size) while (left &lt;= right) &#123; val leftSquare = nums[left] * nums[left] val rightSquare = nums[right] * nums[right] if (leftSquare &lt;= rightSquare) &#123; arrayNew[index--] = rightSquare right-- &#125; else &#123; arrayNew[index--] = leftSquare left++ &#125; &#125; return arrayNew&#125; https://leetcode-cn.com/problems/squares-of-a-sorted-array/solution/c-dong-hua-yan-shi-977-you-xu-shu-zu-de-gxlvm/ 209. é•¿åº¦æœ€å°çš„å­æ•°ç»„åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰æ»‘åŠ¨çª—å£ä¸»è¦æ‰¾åˆ°ç§»åŠ¨å·¦æŒ‡é’ˆçš„æ¡ä»¶ å…¶å®žå°±æ˜¯ç²¾ç®€å‡ºæš´åŠ›è§£æ³• 123456789101112131415fun minSubArrayLen(target: Int, nums: IntArray): Int &#123; var sum = 0 var leftP = 0; var result = Int.MAX_VALUE for (rightP in nums.indices) &#123; sum += nums[rightP] while (sum &gt;= target) &#123; val subLength = rightP - leftP + 1 if (subLength &lt; result) result = subLength sum -= nums[leftP++] &#125; &#125; if (result == Int.MAX_VALUE) result = 0 return result&#125; **ä¸€äº›å½•å‹ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆæ—¶é—´å¤æ‚åº¦æ˜¯O(n)**ã€‚ ä¸è¦ä»¥ä¸ºforé‡Œæ”¾ä¸€ä¸ªwhileå°±ä»¥ä¸ºæ˜¯O(n^2)å•Šï¼Œ ä¸»è¦æ˜¯çœ‹æ¯ä¸€ä¸ªå…ƒç´ è¢«æ“ä½œçš„æ¬¡æ•°ï¼Œæ¯ä¸ªå…ƒç´ åœ¨æ»‘åŠ¨çª—åŽè¿›æ¥æ“ä½œä¸€æ¬¡ï¼Œå‡ºåŽ»æ“ä½œä¸€æ¬¡ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯è¢«è¢«æ“ä½œä¸¤æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ 2 Ã— n ä¹Ÿå°±æ˜¯O(n)ã€‚ å¯¹äºŽè¿™ä¸ªè§£é‡Š o(n)å…¶å®žæˆ‘è¿˜æ˜¯æœ‰ä¸€äº›ä¸ç†è§£. https://leetcode-cn.com/problems/minimum-size-subarray-sum/solution/209-chang-du-zui-xiao-de-zi-shu-zu-hua-dong-chua-7/ æš´åŠ›è§£æ³•å…ˆç§»åŠ¨å‰é¢çš„ï¼Œå†ç§»åŠ¨åŽé¢çš„éåŽ†æ‰¾å‡ºã€‚ 1234567891011121314151617181920212223242526272829class Solution &#123;public: int minSubArrayLen(int s, vector&lt;int&gt;&amp; nums) &#123; int result = INT32_MAX; // æœ€ç»ˆçš„ç»“æžœ int sum = 0; // å­åºåˆ—çš„æ•°å€¼ä¹‹å’Œ int subLength = 0; // å­åºåˆ—çš„é•¿åº¦ for (int i = 0; i &lt; nums.size(); i++) &#123; // è®¾ç½®å­åºåˆ—èµ·ç‚¹ä¸ºi sum = 0; for (int j = i; j &lt; nums.size(); j++) &#123; // è®¾ç½®å­åºåˆ—ç»ˆæ­¢ä½ç½®ä¸ºj sum += nums[j]; if (sum &gt;= s) &#123; // ä¸€æ—¦å‘çŽ°å­åºåˆ—å’Œè¶…è¿‡äº†sï¼Œæ›´æ–°result subLength = j - i + 1; // å–å­åºåˆ—çš„é•¿åº¦ result = result &lt; subLength ? result : subLength; break; // å› ä¸ºæˆ‘ä»¬æ˜¯æ‰¾ç¬¦åˆæ¡ä»¶æœ€çŸ­çš„å­åºåˆ—ï¼Œæ‰€ä»¥ä¸€æ—¦ç¬¦åˆæ¡ä»¶å°±break &#125; &#125; &#125; // å¦‚æžœresultæ²¡æœ‰è¢«èµ‹å€¼çš„è¯ï¼Œå°±è¿”å›ž0ï¼Œè¯´æ˜Žæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­åºåˆ— return result == INT32_MAX ? 0 : result; &#125;&#125;;æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)ç©ºé—´å¤æ‚åº¦ï¼šO(1)ä½œè€…ï¼šcarlsun-2é“¾æŽ¥ï¼šhttps://leetcode-cn.com/problems/minimum-size-subarray-sum/solution/209-chang-du-zui-xiao-de-zi-shu-zu-hua-dong-chua-7/æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„. 904. æ°´æžœæˆç¯®åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰ é¢˜ç›®ä¸å¥½æ‡‚ [1,2,3,2,2]. , 1 ,2,3,æ•°å­—å¤§å°åˆ†åˆ«è¡¨ç¤ºæ°´æžœæ ‘ç±»åˆ« 1234567891011121314151617181920212223242526272829303132fun totalFruit(fruits: IntArray): Int &#123; var leftP = 0 var basketList = mutableMapOf&lt;Int, Int&gt;() // keyå­˜å…ƒç´ ï¼Œvalueå­˜å‡ºçŽ°çš„æ¬¡æ•° var result = 0 var subLength: Int for (rightP in fruits.indices) &#123; val element = fruits[rightP] //å¿«æŒ‡é’ˆæ‰«åˆ°çš„å…ƒç´  if (basketList.containsKey(element)) &#123; //åŒ…å«è¿™ä¸ªå…ƒç´  ä¸ªæ•°+1 basketList[element] = basketList[element]!!.plus(1) &#125; else &#123; basketList[element] = 1 &#125; while (true) &#123; if (basketList.size &gt; 2) &#123; // å…ƒç´ ç±»åž‹&gt;2,å°±å¼€å§‹ç§»åŠ¨å·¦æŒ‡é’ˆ basketList[fruits[leftP]] = basketList[fruits[leftP]]!!.minus(1) //å·¦æŒ‡é’ˆæ¬¡æ•°-1 if (basketList[fruits[leftP]] == 0) &#123; basketList.remove(fruits[leftP]) //åˆ é™¤ç§»åŠ¨çš„å·¦æŒ‡é’ˆ &#125; leftP++ &#125; else &#123; subLength = rightP - leftP + 1 // å­åºåˆ—é•¿åº¦ if (subLength &gt; result) &#123; //æ¯”è¾ƒæ‰¾å‡ºæœ€é•¿çš„å­åºåˆ— result = subLength &#125; break &#125; &#125; &#125; return result&#125; 123456789ä¸Šé¢è§£æ³• if (basketList.containsKey(element)) &#123; //åŒ…å«è¿™ä¸ªå…ƒç´  ä¸ªæ•°+1 basketList[element] = basketList[element]!!.plus(1) &#125; else &#123; basketList[element] = 1 &#125;å¯ä»¥ç”¨è¿™ä¸€å¥æ›¿æ¢basketList[element] = basketList.getOrDefault(element, 0).plus(1) 76. æœ€å°è¦†ç›–å­ä¸²æ»‘åŠ¨çª—å£ (sliding window) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253** * æ ¸å¿ƒæ€æƒ³: sçš„ left right,å·²ç»è¦†ç›–äº†tå­—ä¸²ï¼Œé‚£ä¹ˆå°±ç§»åŠ¨left,çœ‹çœ‹æ˜¯å¦è¿˜åœ¨èŒƒå›´å†… * é€šè¿‡åˆ¤æ–­Tä¸­A B Céƒ½ &gt;0æ²¡è¢«æŠµæ¶ˆï¼Œ &lt;0è¯´æ˜Ž sæœ‰å¤šä½™è¿™ä¸ªå­—ç¬¦ä¸ªæ•° */class LC76 &#123; fun minWindow(s: String, t: String): String &#123; val map = mutableMapOf&lt;Char, Int&gt;() for (element in t) &#123; map[element] = map.getOrDefault(element, 0).plus(1) &#125; var leftP = 0 // å·¦æŒ‡é’ˆ var rightLast = 0 //æœ€åŽåŒ¹é…çš„æœ€çŸ­çš„å³æŒ‡é’ˆ var resultLength = Int.MAX_VALUE var resultStr = &quot;&quot; // æœ€çŸ­ç»“æžœå­—ç¬¦ for (rightP in s.indices) &#123; if (map.containsKey(s[rightP])) &#123; // tå­—ç¬¦åŒ…å«è¯¥å…ƒç´ ï¼Œ å…ƒç´ +1 map[s[rightP]] = map.getOrDefault(s[rightP], 0).minus(1) &#125; while (isMatch(map, t)) &#123; // åˆ¤æ–­è¿™ä¸ªSçš„left rightä¸­æ˜¯å¦å«æœ‰tæ‰€æœ‰å­—ç¬¦ val subLength = rightP - leftP + 1 if (subLength &lt; resultLength) &#123; rightLast = rightP resultLength = subLength resultStr = s.substring( leftP, rightLast + 1 ) &#125; if (map.containsKey(s[leftP])) &#123; // å‘å³ç§»åŠ¨left,å¦‚æžœå…ƒç´ æ˜¯ map tä¸­çš„ï¼Œå°±+1ï¼Œå› ä¸ºè¿™ä¸ªä¸ç®—äº† map[s[leftP]] = map.getOrDefault(s[leftP], 0).plus(1) &#125; leftP++ &#125; &#125; return resultStr// the beginning index, inclusive ,endIndex â€“ the ending index, exclusive. [begin,end) &#125; /** * mapä¸­æœ‰å…ƒç´ &gt;0,è¯´æ˜Žæœ‰å…ƒç´ è¿˜æ²¡æœ‰,map&lt;0æ‰å…¨éƒ¨æŠµæ¶ˆäº† */ private fun isMatch(map: Map&lt;Char, Int&gt;, t: String): Boolean &#123; for (element in t) &#123; if (map[element]!! &gt; 0) &#123; return false &#125; &#125; return true &#125;&#125; è§†é¢‘è®²è§£å¾ˆæ¸…æ™° https://leetcode-cn.com/problems/minimum-window-substring/solution/zui-xiao-fu-gai-zi-chuan-by-leetcode-solution/ è¿™é“é¢˜å‚è€ƒåŽ»çœ‹çœ‹ labuladongè§£æ³•,æˆ‘æ²¡æ‰¾åˆ°ï¼ŒåŽé¢å†çœ‹çœ‹, èžºæ—‹çŸ©é˜µ59. èžºæ—‹çŸ©é˜µ II12345678910111213141516171819202122fun generateMatrix(n: Int): Array&lt;IntArray&gt; &#123; var left = 0 var top = 0 var right = n - 1 var bottom = n - 1 var num = 1 val target = n * n var arr = Array(n) &#123; IntArray(n) &#125; while (num &lt;= target) &#123; for (i in left..right) arr[top][i] = num++ // ä»Žå·¦åˆ°å³ // è¿™é‡Œä¸æ˜¯ä»Ž0å¼€å§‹ï¼Œæ˜¯ä»Žleftå¼€å§‹ top++ // ä¸Šè¾¹å‘ä¸‹æ”¶çª„1 for (i in top..bottom) arr[i][right] = num++ // ä»Žä¸Šåˆ°ä¸‹ right-- // å³è¾¹æ”¶çª„1 for (i in right downTo left) arr[bottom][i] = num++ // ä»Žå³åˆ°å·¦ bottom-- for (i in bottom downTo top)&#123; // ä»Žåº•åˆ°ä¸Š arr[i][left] = num++ &#125; left++ //æ”¶ç¼©å·¦è¾¹ &#125; return arr&#125; é¢˜è§£æ ¹æ®ä¸‹é¢è¿™ä¸ªè§£æ³•ï¼Œç®€å•å·§å¦™ https://leetcode-cn.com/problems/spiral-matrix-ii/solution/spiral-matrix-ii-mo-ni-fa-she-ding-bian-jie-qing-x/","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"}]},{"title":"Animation-Lottie","slug":"Animation-Lottie","date":"2022-04-27T01:56:05.000Z","updated":"2022-05-06T11:24:51.147Z","comments":true,"path":"2022/04/27/Animation-Lottie/","link":"","permalink":"https://noteforme.github.io/2022/04/27/Animation-Lottie/","excerpt":"","text":"anim in RecycleView https://www.jianshu.com/p/af6df7e55834 https://developer.android.com/topic/libraries/architecture/lifecycle","categories":[],"tags":[{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/tags/anim/"}]},{"title":"coroutie_channel6","slug":"coroutie_channel6","date":"2022-04-23T13:16:43.000Z","updated":"2024-04-28T13:56:27.523Z","comments":true,"path":"2022/04/23/coroutie_channel6/","link":"","permalink":"https://noteforme.github.io/2022/04/23/coroutie_channel6/","excerpt":"","text":"channelThere are four types of channels Unlimited channel , Buffered channel , Rendezvous channel , Conflated channel Rendezvous channelBy default, a â€œRendezvousâ€ channel is created. 12345678910111213141516171819202122232425import kotlinx.coroutines.channels.Channelimport kotlinx.coroutines.*fun main() = runBlocking&lt;Unit&gt; &#123; val channel = Channel&lt;String&gt;() launch &#123; channel.send(&quot;A1&quot;) channel.send(&quot;A2&quot;) log(&quot;A done&quot;) &#125; launch &#123; channel.send(&quot;B1&quot;) log(&quot;B done&quot;) &#125; launch &#123; repeat(3) &#123; val x = channel.receive() log(x) &#125; &#125;&#125;fun log(message: Any?) &#123; println(&quot;[$&#123;Thread.currentThread().name&#125;] $message&quot;)&#125; Watch this video for a better understanding of channels. https://www.youtube.com/watch?v=HpWQUoVURWQ channelæ˜¯å¹¶å‘å®‰å…¨çš„é˜Ÿåˆ—,é˜Ÿåˆ—ä¸€å®šå­˜åœ¨ç¼“å†²åŒºæ»¡äº†ï¼Œå¹¶ä¸”æ²¡æœ‰äººè°ƒç”¨receiveå–èµ°å‡½æ•°ï¼Œsendå°±æŒ‚èµ· produceä¸Žactor å¤ç”¨å¤šä¸ªawaitå¤šè·¯å¤ç”¨ ç½‘ç»œå’Œæœ¬åœ°ç¼“å­˜èŽ·å–æ•°æ®ï¼Œå“ªä¸€ä¸ªå…ˆè¿”å›žå°±å…ˆç”¨é‚£ä¸ªåšå±•ç¤º 1234567891011121314151617181920212223fun CoroutineScope.getUserFromLocal() = async(Dispatchers.IO) &#123; // æ¨¡æ‹Ÿè¯»å–æœ¬åœ°æ•°æ® delay(1000) &quot;getUserFromLocal&quot;&#125;fun CoroutineScope.getUserFromNetwork() = async(Dispatchers.IO) &#123; // æ¨¡æ‹Ÿè¯»å–ç½‘ç»œæ•°æ® delay(500) &quot;getUserFromNetwork&quot;&#125;fun testSelectAwait() = runBlocking &#123; GlobalScope.launch &#123; val userFromLocal = getUserFromLocal() val userFromNetwork = getUserFromNetwork() val select = select&lt;String&gt; &#123; userFromLocal.onAwait &#123; it &#125; userFromNetwork.onAwait &#123; it &#125; &#125; println(select) &#125;.join()&#125; https://kotlinlang.org/docs/coroutines-and-channels.html#channels","categories":[],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"coroutie_operator4","slug":"coroutie-operator4","date":"2022-04-23T13:03:37.000Z","updated":"2023-01-02T03:31:39.121Z","comments":true,"path":"2022/04/23/coroutie-operator4/","link":"","permalink":"https://noteforme.github.io/2022/04/23/coroutie-operator4/","excerpt":"","text":"å…ˆçœ‹å°ç»“ è½¬æ¢æ“ä½œç¬¦ transform é™é•¿æ“ä½œç¬¦ take(2) æœ«ç«¯æ“ä½œç¬¦ Collect tolist toset first single reduce fold ç»„åˆæ“ä½œç¬¦ zip å±•å¹³æµ flatmapconcat è¿žæŽ¥æ¨¡å¼ Flatmapmerge åˆå¹¶æ¨¡å¼ faltMapLatest æœ€æ–°å±•å¹³æ¨¡å¼ æµçš„å¼‚å¸¸å¤„ç† Try/ catchå— catchå‡½æ•° æµçš„å®Œæˆ æµæ‰‹æœºå®Œæˆæ—¶(æ™®é€šæƒ…å†µæˆ–å¼‚å¸¸æƒ…å†µ) å‘½ä»¤å¼finallyå— onCompletionå£°æ˜Žå¼å¤„ç† â€‹","categories":[],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"coroutie-flow5","slug":"coroutie-flow5","date":"2022-03-20T12:46:54.000Z","updated":"2023-01-02T03:31:39.097Z","comments":true,"path":"2022/03/20/coroutie-flow5/","link":"","permalink":"https://noteforme.github.io/2022/03/20/coroutie-flow5/","excerpt":"","text":"å¦‚ä½•è¡¨ç¤ºå¤šä¸ªå€¼ æŒ‚èµ·å‡½æ•°å¯ä»¥å¼‚æ­¥çš„è¿”å›žå•ä¸ªå€¼ï¼Œä½†æ˜¯è¯¥å¦‚ä½•å¼‚æ­¥çš„è¿”å›žå¤šä¸ªè®¡ç®—å¥½çš„å€¼å‘¢ï¼Ÿ å¼‚æ­¥è¿”å›žå¤šä¸ªå€¼çš„æ–¹æ¡ˆ é›†åˆ åºåˆ—ã€‚æŒ‚èµ·å‡½æ•°ã€‚Flow Flow å¼‚æ­¥æµ 56å¼‚æ­¥è¿”å›žå¤šä¸ªå€¼ é›†åˆ åºåˆ— æŒ‚èµ·å‡½æ•°é›†åˆ , åºåˆ— , æŒ‚èµ·å‡½æ•° ,Flow 1234567891011121314151617181920212223242526 fun simpleList(): List&lt;Int&gt; = listOf(1, 2, 3) fun simpleSequence(): Sequence&lt;Int&gt; = sequence &#123; for (i in 1..3) &#123;// Thread.sleep(1000) // é˜»å¡žï¼Œå‡è£…åœ¨è®¡ç®—// delay(1000) yield(i) &#125; &#125; suspend fun simpleList2(): List&lt;Int&gt; &#123; delay(1000) return listOf(1, 2, 3) &#125; @Test fun `test multiple values`() &#123;// simpleList().forEach &#123; values -&gt; println(values) &#125; // è¿”å›žäº†å¤šä¸ªå€¼ï¼Œä½†ä¸æ˜¯å¼‚æ­¥ simpleSequence().forEach &#123; value -&gt; println(value) &#125;// è¿”å›žäº†å¤šä¸ªå€¼ï¼Œæ˜¯åŒæ­¥ &#125; @Test fun `test multiple values2`() = runBlocking &#123; simpleList2().forEach &#123; values -&gt; println(values) &#125; // è¿”å›žäº†å¤šä¸ªå€¼ï¼Œæ˜¯å¼‚æ­¥ï¼Œä½†æ˜¯æ˜¯ä¸€æ¬¡æ€§è¿”å›žçš„ &#125; 57-é€šè¿‡Flowå¼‚æ­¥è¿”å›žå¤šä¸ªå€¼1234567891011121314151617suspend fun simpleFlow() = flow&lt;Int&gt; &#123; for (i in 1..3) &#123; delay(1000) // æ€Žä¹ˆè¯æ˜Žæ²¡æœ‰é˜»å¡žï¼Œè€Œæ˜¯æŒ‚èµ· emit(i) // å‘ç”Ÿï¼Œäº§ç”Ÿä¸€ä¸ªå…ƒç´  &#125;&#125;@Testfun `test multiple values3`() = runBlocking &#123; launch &#123; //å†èµ·ä¸€ä¸ªä»»åŠ¡ï¼Œç¡®è®¤çº¿ç¨‹æ˜¯å¦é˜»å¡ž for (k in 1..3)&#123; println(&quot;I am not blocked $k&quot;) delay(1500) &#125; &#125; simpleFlow().collect &#123; value -&gt; println(value) &#125;&#125; è¿”å›žå¤šä¸ªå€¼ è€Œä¸”æ˜¯å¼‚æ­¥çš„ I am not blocked 11I am not blocked 22I am not blocked 33 58 Flowä¸Žå…¶ä»–æ–¹å¼çš„åŒºåˆ« 59 Flowåº”ç”¨ æµçš„ç‰¹æ€§60 å†·æµFlowæ˜¯ä¸€ç§ç±»ä¼¼äºŽåºåˆ—çš„å†·æµï¼Œflowå¤Ÿåšå¼ºä¸­çš„ä»£ç çŸ¥é“æµè¢«æ”¶é›†çš„æ—¶å€™æ‰è¿è¡Œ ç±»ä¼¼äºŽæ‡’åŠ è½½, ç‚¹äº†Buttonï¼Œcollectæ‰å¼€å§‹ä¸‹è½½ 12345678910111213141516fun simpleFlow2() = flow&lt;Int&gt; &#123; println(&quot;Flow started&quot;) for (i in 1..3) &#123; delay(1000) // æ€Žä¹ˆè¯æ˜Žæ²¡æœ‰é˜»å¡žï¼Œè€Œæ˜¯æŒ‚èµ· emit(i) // å‘ç”Ÿï¼Œäº§ç”Ÿä¸€ä¸ªå…ƒç´  &#125;&#125;@Testfun `test flow is cold`() = runBlocking &#123; val flow = simpleFlow2() println(&quot;Calling collect...&quot;) flow.collect &#123; value -&gt; println(value) &#125; println(&quot;Calling collect again&quot;) flow.collect &#123; value -&gt; println(value) &#125;&#125; åªè¦æ‰§è¡Œ è¿˜ä¼šå†æ‰§è¡Œä¸€æ¬¡ã€‚ 12345678910Calling collect...Flow started123Calling collect againFlow started123 61.æµçš„è¿žç»­æ€§ 1234567(1..5).asFlow().filter &#123; it % 2 == 0&#125;.map &#123; &quot;string $it&quot;&#125;.collect&#123; println(&quot;Collect $&#123;it&#125;&quot;)&#125; 12Collect string 2Collect string 4 æµæž„å»ºå™¨flowOfæž„å»ºå™¨å®šä¹‰äº†ä¸€ä¸ªå‘å°„å›ºå®šå€¼é›†çš„æµ ä½¿ç”¨asFlow()æ‹“å±•å‡½æ•°ï¼Œå¯ä»¥å°†å„ç§é›†åˆä¸Žåºåˆ—è½¬æ¢ä¸ºæµ 123456789flowOf(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;) .onEach &#123; delay(1000) &#125; .collect &#123; println(it) &#125;(1..3).asFlow().collect &#123; println(it)&#125; 123456onetwothree123 63.æµä¸Šä¸‹æ–‡flowOn 1234567891011121314fun simpleFlow3()= flow&lt;Int&gt; &#123; println(&quot;Flow started $&#123;Thread.currentThread().name&#125;&quot;) for (i in 1..3)&#123; delay(1000) emit(i) &#125;&#125; @Test fun `test flow context`() = runBlocking &#123; simpleFlow3().collect&#123; println(&quot;Collected $it $&#123;Thread.currentThread().name&#125;&quot;) &#125; &#125; æž„å»ºæµå’Œä¿å­˜æµåœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ æž„å»ºçš„æ—¶å€™ç”¨åç¨‹å¯åŠ¨çš„åŽå°çº¿ç¨‹ 1234567891011121314151617fun simpleFlow4() = flow&lt;Int&gt; &#123; withContext(Dispatchers.IO) &#123; println(&quot;Flow started $&#123;Thread.currentThread().name&#125;&quot;) for (i in 1..3) &#123; delay(1000) emit(i) &#125; &#125;&#125;@Testfun `test flow context4`() = runBlocking &#123; simpleFlow4().collect &#123; println(&quot;Collected $it $&#123;Thread.currentThread().name&#125;&quot;) &#125;&#125; Flow started DefaultDispatcher-worker-1 @coroutine#1 Flow invariant is violated: // æŠ¥é”™ ç”¨flowOnå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚flowonå¯ä»¥æ›´æ”¹æµå‘å°„çš„ä¸Šä¸‹æ–‡ã€‚ 1234567891011121314fun simpleFlow5() = flow&lt;Int&gt; &#123; println(&quot;Flow started $&#123;Thread.currentThread().name&#125;&quot;) for (i in 1..3) &#123; delay(1000) emit(i) &#125;&#125;.flowOn(Dispatchers.Default)@Testfun `test flow context5`() = runBlocking &#123; simpleFlow5().collect &#123; println(&quot;Collected $it $&#123;Thread.currentThread().name&#125;&quot;) &#125;&#125; 1234Flow started DefaultDispatcher-worker-1 @coroutine#2Collected 1 Test worker @coroutine#1Collected 2 Test worker @coroutine#1Collected 3 Test worker @coroutine#1 å‘é€åœ¨åŽå°çº¿ç¨‹ï¼Œæ”¶é›†åœ¨ä¸»çº¿ç¨‹ 64.åœ¨æŒ‡å®šåç¨‹ä¸­æ”¶é›†æµä½¿ç”¨launchIn(),æ›¿æ¢collect æˆ‘ä»¬å¯ä»¥åœ¨å•ç‹¬çš„åç¨‹ä¸­å¯åŠ¨æµçš„æ”¶é›† 1234567891011121314151617 fun events() = (1..3) .asFlow() .onEach &#123; delay(100) &#125; .flowOn(Dispatchers.Default) @Test fun `test flow launch`() = runBlocking&lt;Unit&gt; &#123; val job = events().onEach &#123; events -&gt; println(&quot;Event: $events $&#123;Thread.currentThread().name&#125;&quot;) &#125;// .collect() .launchIn(CoroutineScope(Dispatchers.IO)) // å•ç‹¬çš„åç¨‹ä¸­ï¼Œå¯åŠ¨æµçš„æ”¶é›† .join() delay(200)// job.cancelAndJoin() &#125; Event: 1 DefaultDispatcher-worker-3 @coroutine#2Event: 2 DefaultDispatcher-worker-3 @coroutine#2Event: 3 DefaultDispatcher-worker-2 @coroutine#2 65. æµçš„å–æ¶ˆ 12345678910111213141516fun simpleFlow6() = flow&lt;Int&gt; &#123; println(&quot;Flow started $&#123;Thread.currentThread().name&#125;&quot;) for (i in 1..3) &#123; delay(1000) emit(i) println(&quot;Emitting $i&quot;) &#125;&#125;.flowOn(Dispatchers.Default)@Testfun `test cancel flow`() = runBlocking&lt;Unit&gt; &#123; withTimeoutOrNull(2500)&#123; // 2.5sè¶…æ—¶ simpleFlow6().collect&#123;value-&gt; println(value)&#125; &#125; println(&quot;Done&quot;)&#125; withTimeoutOrNull 123456Flow started DefaultDispatcher-worker-1 @coroutine#2Emitting 11Emitting 22Done åç¨‹è¢«å–æ¶ˆ 3æ²¡æœ‰æ‰“å° 66æµçš„å–æ¶ˆæ£€æµ‹ 1234567891011121314151617fun simpleFlow7() = flow&lt;Int&gt; &#123; for (i in 1..5) &#123; delay(1000) emit(i) println(&quot;Emitting $i&quot;) &#125;&#125;@Testfun `test cancel flow check`() = runBlocking&lt;Unit&gt; &#123; withTimeoutOrNull(2500) &#123; // 2.5sè¶…æ—¶ simpleFlow7().collect &#123; value -&gt; println(value) if (value == 3) cancel() &#125; &#125;&#125; 1Emitting 12Emitting 2BUILD SUCCESSFUL in 3s èƒŒåŽ‹ buffer stateFlow sharedFlow","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"Corouties_context","slug":"Corouties-context3","date":"2022-03-20T09:48:54.000Z","updated":"2023-01-02T03:31:38.956Z","comments":true,"path":"2022/03/20/Corouties-context3/","link":"","permalink":"https://noteforme.github.io/2022/03/20/Corouties-context3/","excerpt":"","text":"åç¨‹çš„ä¸Šä¸‹æ–‡ P38 åç¨‹çš„ä¸Šä¸‹æ–‡ P39 123456@Testfun `test CoroutineContext `() = runBlocking&lt;Unit&gt; &#123; launch (Dispatchers.Default + CoroutineName(&quot;test&quot;))&#123; println(&quot;you are great $&#123;Thread.currentThread().name&#125;&quot;) &#125;&#125; you are great DefaultDispatcher-worker-1 @test#2 P40åç¨‹ä¸Šä¸‹æ–‡çš„ç»§æ‰¿ 12345678val scope = CoroutineScope(Job() + Dispatchers.IO + CoroutineName(&quot;test&quot;))val job = scope.launch &#123; println(&quot;$&#123;coroutineContext[Job]&#125; $&#123;Thread.currentThread().name&#125;&quot;) val result = async &#123; println(&quot;$&#123;coroutineContext[Job]&#125; $&#123;Thread.currentThread().name&#125;&quot;) &#125;.await()&#125;job.join() â€œtest#2â€:StandaloneCoroutine{Active}@4d3fac66 DefaultDispatcher-worker-1 @test#2â€œtest#3â€:DeferredCoroutine{Active}@43e36bfa DefaultDispatcher-worker-3 @test#3 P41åç¨‹ä¸Šä¸‹æ–‡ç»§æ‰¿å…¬å¼ 1234567val coroutineExceptionHandler = CoroutineExceptionHandler &#123; _, exception -&gt; println(&quot;caught $exception&quot;)&#125;val scope = CoroutineScope(Job() + Dispatchers.Main + coroutineExceptionHandler)val job = scope.launch(Dispatchers.IO) &#123; //æ–°åç¨‹&#125; å¼‚å¸¸P42å­¦ä¹ åç¨‹å¼‚å¸¸å¤„ç†çš„å¿…è¦æ€§ 43è‡ªåŠ¨ä¼ æ’­å¼‚å¸¸ ä¸Žå‘ç”¨æˆ·æš´éœ²å¼‚å¸¸ 1234567891011121314151617 val job = GlobalScope.launch &#123; try &#123; throw IndexOutOfBoundsException() &#125; catch (e: Exception) &#123; println(&quot;Caught IndexOutOfBoundsException&quot;) &#125; &#125; job.join() val deferred = GlobalScope.async &#123; throw ArithmeticException() &#125;// try &#123;// deferred.await()// &#125; catch (e: Exception) &#123;// println(&quot;Caught ArithmeticException&quot;)// &#125; delay(1000) å¯¹äºŽasync ï¼Œæ ¹åç¨‹GlobalScope è°ƒç”¨.waitæ‰ä¼šæŠ›å‡ºå¼‚å¸¸,æ‰èƒ½æ•èŽ·å¼‚å¸¸ 44 éžæ ¹åç¨‹çš„å¼‚å¸¸ä¼ æ’­123456val scope = CoroutineScope(Job())val job = scope.launch &#123; throw IllegalArgumentException() //å¦‚æžœasyncæŠ›å‡ºå¼‚å¸¸ï¼Œlaunchå°±ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œéœ€è¦è°ƒç”¨ .await&#125;job.join() Exception in thread â€œDefaultDispatcher-worker-1 @coroutine#2â€ java.lang.IllegalArgumentException at com.john.kot.coroutine.dongnao.CoroutineTest44$test CoroutineContext $1$job$1.invokeSuspend(CoroutineTest44.kt:24) 45å¼‚å¸¸çš„ä¼ æ’­ç‰¹æ€§ 46 SupervisorJobæ‰“ç ´P45çš„å¼‚å¸¸ä¼ æ’­ç‰¹æ€§ ä¸€ä¸ªåç¨‹æœ‰é—®é¢˜ ä¸ä¼šå½±å“å…¶ä»–çš„åç¨‹ 123456789101112131415val supervisor = CoroutineScope(SupervisorJob())val job1 = supervisor.launch &#123; delay(100) println(&quot;child 1&quot;) throw IllegalArgumentException()&#125;val job2 = supervisor.launch &#123; try &#123; delay(Long.MAX_VALUE) &#125; finally &#123; println(&quot;child 2 finished.&quot;) &#125; throw IllegalArgumentException()&#125;joinAll(job1, job2) SupervisorJob()ç¼“å­˜ job(),éƒ½èƒ½æ­£å¸¸æ‰“å°äº†. Supervisor.cancel() ,åŽæ‰€æœ‰åç¨‹éƒ½ä¼šå–æ¶ˆ 47 SupervisorScopeå½“ä½œä¸šè‡ªèº«æ‰§è¡Œå¤±è´¥çš„æ—¶å€™ï¼Œæ‰€æœ‰å­ä½œä¸šå°†ä¼šè¢«å…¨éƒ¨å–æ¶ˆ 123456789101112val child = supervisorScope &#123; launch &#123; try &#123; println(&quot;The child is sleeping&quot;) delay(Long.MAX_VALUE) &#125; finally &#123; println(&quot;The child is cancelled&quot;) &#125; &#125; yield() println(&quot;Throwing an exception from the scope&quot;) throw AssertionError() The child is sleepingThrowing an exception from the scopeThe child is cancelled ä½œç”¨åŸŸæŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´å­åç¨‹å–æ¶ˆ å¼‚å¸¸çš„æ•èŽ·P48-å¼‚å¸¸çš„æ•èŽ·çš„æ—¶æœºä¸Žä½ç½® P49- å¼‚å¸¸æ•èŽ·å¸¸è§é”™è¯¯12345678val handler = CoroutineExceptionHandler &#123; _, exception -&gt; println(&quot;Caught $exception&quot;) &#125;val job = GlobalScope.launch(handler) &#123; throw AssertionError()&#125;val deferred = GlobalScope.async(handler) &#123; throw ArithmeticException() &#125;job.join()deferred.await() è¢«æ•èŽ· Caught java.lang.AssertionError java.lang.ArithmeticException at com.john.kot.coroutine.dongnao.CoroutineTest48$test SupervisorJob $1$deferred$1.invokeSuspend(CoroutineTest48.kt:28) 123456789val handler = CoroutineExceptionHandler &#123; _, exception -&gt; println(&quot;Caught $exception&quot;) &#125;val scope = CoroutineScope(Job())val job = scope.launch(handler) &#123; launch &#123; throw IllegalArgumentException() &#125;&#125;job.join() Caught java.lang.IllegalArgumentException handleræ”¾åœ¨å†…éƒ¨çš„æƒ…å†µ 123456789val handler = CoroutineExceptionHandler &#123; _, exception -&gt; println(&quot;Caught $exception&quot;) &#125;val scope = CoroutineScope(Job())val job = scope.launch &#123; launch(handler) &#123; throw IllegalArgumentException() &#125;&#125;job.join() è¿™ç§æƒ…å†µæ•èŽ·ä¸åˆ°, å¼‚å¸¸å¤„ç†å™¨ä¸èƒ½å®‰è£…åˆ°å†…éƒ¨åç¨‹ï¼Œè¦å®‰è£…åˆ°å¤–éƒ¨åç¨‹ 50 å¼‚å¸¸æ•èŽ· é˜²æ­¢Appé—ªé€€ 51Androidå…¨å±€å¼‚å¸¸å¤„ç† 52å–æ¶ˆä¸Žå¼‚å¸¸ å¼‚å¸¸å–æ¶ˆé¡ºåºï¼Œ å…ˆè‡ªå·± 12345678910111213141516171819202122@Testfun `test cancel and exception`() = runBlocking &#123; val job = launch &#123; val child = launch &#123; try &#123; try &#123; delay(Long.MAX_VALUE) &#125; catch (e: Exception) &#123; e.printStackTrace() &#125; &#125; finally &#123; println(&quot;Child is cancelled.&quot;) &#125; &#125; yield() println(&quot;Cancelling child&quot;) child.cancelAndJoin() yield() println(&quot;Parent is cancelled.&quot;) &#125; job.join()&#125; Cancelling child Child is cancelled.Parent is cancelled. 1234567891011121314151617181920212223val handler = CoroutineExceptionHandler &#123; _, exception -&gt; println(&quot;Caught $exception&quot;)&#125;val job = GlobalScope.launch(handler) &#123; launch &#123; try &#123; delay(Long.MAX_VALUE) &#125; finally &#123; withContext(NonCancellable)&#123; println(&quot;Children are cancelled , but exception is not handled until &quot;) delay(100) println(&quot;The first child finished its non cancellable block&quot;) &#125; &#125; &#125; launch &#123; delay(10) println(&quot;Second child throws an exception&quot;) throw ArithmeticException() &#125;&#125;job.join() Second child throws an exceptionChildren are cancelled , but exception is not handled untilThe first child finished its non cancellable blockCaught java.lang.ArithmeticException ç¬¬2ä¸ªåç¨‹å–æ¶ˆï¼Œç¬¬1ä¸ªä¹Ÿè¢«å–æ¶ˆï¼Œæœ€åŽå¤„ç†å¤–é¢çš„å¼‚å¸¸ p53å¼‚å¸¸èšåˆsuppressed æ•èŽ·å¤šä¸ªå¼‚å¸¸ 12345678910111213141516171819202122232425val handler = CoroutineExceptionHandler &#123; _, excetption -&gt; println(&quot;Caught $excetption $&#123;excetption.suppressed.contentToString()&#125;&quot;)&#125;val job = GlobalScope.launch(handler) &#123; launch &#123; try &#123; delay(Long.MAX_VALUE) &#125; finally &#123; throw ArithmeticException() // 2 &#125; &#125; launch &#123; try &#123; delay(Long.MAX_VALUE) &#125; finally &#123; throw ArithmeticException() // 2 &#125; &#125; launch &#123; delay(100) throw IndexOutOfBoundsException() // 3 &#125;&#125;job.join() ä¸€åºŠå­˜åœ¨æ•°ç»„ä¸­ Caught java.lang.IndexOutOfBoundsException [java.lang.ArithmeticException, java.lang.ArithmeticException]","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"battery-research","slug":"battery-research","date":"2022-03-13T12:39:05.000Z","updated":"2022-05-06T11:24:51.271Z","comments":true,"path":"2022/03/13/battery-research/","link":"","permalink":"https://noteforme.github.io/2022/03/13/battery-research/","excerpt":"","text":"è€—ç”µæé†’ è€—ç”µé—®é¢˜éš¾ç‚¹ ç¼ºä¹çŽ°åœºï¼Œæ— æ³•å¤çŽ°ã€‚ ç”¨æˆ·ä¸Šä¼ æŸä¸ªæˆªå›¾ï¼Œä½ çš„åº”ç”¨è€—ç”µå æ¯” 30%ã€‚é€šè¿‡ç”µé‡çš„è¯¦ç»†ä½¿ç”¨æƒ…å†µï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸€äº›çŒœæµ‹ã€‚ä½†æ˜¯ç”¨æˆ·ä¹Ÿæ— æ³•ç»™å‡ºæ›´ä¸°å¯Œçš„ä¿¡æ¯ï¼Œä»¥åŠå…·ä½“æ˜¯åœ¨ä»€ä¹ˆåœºæ™¯å‘ç”Ÿçš„ï¼Œå¯ä»¥è¯´æ˜¯æ¯«æ— å¤´ç»ªã€‚ ä¿¡æ¯ä¸å…¨ï¼Œéš¾ä»¥å®šä½ã€‚ å¦‚æžœæ˜¯å¼€å‘äººå‘˜æˆ–è€…åŽ‚å•†å¯ä»¥æä¾› bug reportï¼Œåˆ©ç”¨ Battery Historian å¯ä»¥å¾—åˆ°éžå¸¸å…¨çš„è€—ç”µç»Ÿè®¡ä¿¡æ¯ã€‚ä½†æ˜¯ Battery Historian ç¼ºå¤±äº†æœ€é‡è¦çš„å †æ ˆä¿¡æ¯ï¼Œä»£ç è°ƒç”¨é‚£ä¹ˆå¤æ‚ï¼Œå¯èƒ½è¿˜æœ‰å¾ˆå¤šçš„ç¬¬ä¸‰æ–¹ SDKï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“æ˜¯å“ªä¸€è¡Œä»£ç ç”³è¯·äº† WakeLockã€ä½¿ç”¨äº† Sensorã€è°ƒç”¨äº†ç½‘ç»œç­‰ã€‚ æ— æ³•è¯„ä¼°ç»“æžœã€‚ é€šè¿‡çŒœæµ‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°è¯•ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯ä»Ž Android 4.4 å¼€å§‹ï¼Œæˆ‘ä»¬æ— æ³•æ‹¿åˆ°åº”ç”¨çš„è€—ç”µä¿¡æ¯ã€‚å°½ç®¡æˆ‘ä»¬è§£å†³äº†æŸä¸ªè€—ç”µé—®é¢˜ï¼Œä¹Ÿå¾ˆéš¾åŽ»è¯„ä¼°å®ƒæ˜¯å¦å·²ç»ç”Ÿæ•ˆï¼Œä»¥åŠå¯¹ç”¨æˆ·äº§ç”Ÿçš„ä»·å€¼æœ‰å¤šå¤§ã€‚ ä¿¡æ¯ä¸å…¨ï¼Œéš¾ä»¥å®šä½ å¦‚æžœæ˜¯å¼€å‘äººå‘˜æˆ–è€…åŽ‚å•†å¯ä»¥æä¾› bug reportï¼Œåˆ©ç”¨ Battery Historian å¯ä»¥å¾—åˆ°éžå¸¸å…¨çš„è€—ç”µç»Ÿè®¡ä¿¡æ¯ã€‚ä½†æ˜¯ Battery Historian ç¼ºå¤±äº†æœ€é‡è¦çš„å †æ ˆä¿¡æ¯ï¼Œä»£ç è°ƒç”¨é‚£ä¹ˆå¤æ‚ï¼Œå¯èƒ½è¿˜æœ‰å¾ˆå¤šçš„ç¬¬ä¸‰æ–¹ SDKï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“æ˜¯å“ªä¸€è¡Œä»£ç ç”³è¯·äº† WakeLockã€ä½¿ç”¨äº† Sensorã€è°ƒç”¨äº†ç½‘ç»œç­‰ã€‚ ç³»ç»Ÿå¦‚ä½•è®¡ç®— App ç”µé‡ç”µé‡ = åŠŸçŽ‡ * æ—¶é—´ = ç”µåŽ‹ * ç”µæµ * æ—¶é—´ æ¨¡å—ç”µé‡ï¼ˆmAhï¼‰ = æ¨¡å—ç”µæµï¼ˆmAï¼‰* æ¨¡å—è€—æ—¶ï¼ˆhï¼‰ Appç”µé‡ = SUM(æ¨¡å—åŠŸçŽ‡ * æ¨¡å—æ—¶é—´) å„æ¨¡å—çš„åŠŸçŽ‡ BatteryStatusServiceï¼šç”¨æ¥ç»Ÿè®¡ç”µé‡å·¥ä½œçš„ï¼Œå„æ¨¡å—çš„åŠŸçŽ‡åœ¨ power_profile.xml ä¸­ï¼Œå†åŠ ä¸Šå„æ¨¡å—çš„ä½¿ç”¨è€—æ—¶å°±èƒ½ç»Ÿè®¡å‡ºç”µé‡äº† https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/xml/power_profile.xml åŠŸçŽ‡ï¼šåŠŸçŽ‡åœ¨ power_profile.xml ä¸­ æ—¶é•¿ï¼šStopWatch ç”¨æ¥è®¡ç®— App å„ç¡¬ä»¶æ¨¡å—çš„ä½¿ç”¨æ—¶é•¿ï¼Œæ€Žä¹ˆè®¡ç®— Wifi ä½¿ç”¨äº†å¤šä¹…ï¼Ÿ WifiManager.startScan() â€“&gt; WifiscanningServiceImp â€“&gt; BatteryStatsImpl.noteWifiScanStartedFromSource(mScanWorkSource); åŸ‹ç‚¹ è®¡ç®—ï¼šPowerCalculators ï¼Œæ¯ä¸ªç¡¬ä»¶éƒ½æœ‰ç›¸åº”çš„å‘½åå¯¹è±¡ï¼Œ ä¸»è¦ç”¨æ¥è®¡ç®—ç”µé‡ WifiPowerCalculator -&gt; calculateApp https://www.jianshu.com/p/672d008c4ad3 https://juejin.cn/post/6844904195523346439 ç³»ç»Ÿé™åˆ¶æé†’æƒ…å†µä»Ž Android 9.0 å¼€å§‹,ï¼ŒGoogle å¯¹ç”µæºç®¡ç†å¼•å…¥äº†å‡ ä¸ªæ›´åŠ ä¸¥æ ¼çš„é™åˆ¶ã€‚ åº”ç”¨åˆ†ç»„æ ¹æ®DeepMindè°ƒæ•´åº”ç”¨å¾…æœºåˆ†ç»„ï¼Œå„ä¸ªåŽ‚å•†å¯é€‰æ‹©ä½¿ç”¨DeepMindçš„æä¾›çš„æ¨¡åž‹. Active : AppåŸºæœ¬ä¸ä¼šå—åˆ°åŽå°é™åˆ¶ã€‚ Rare : Jobså’ŒAlarmséƒ½ä¼šå—åˆ°å»¶è¿Ÿ,è®¿é—®ç½‘ç»œçš„é¢‘çŽ‡ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ Frequent rare ï¼š å‘é€è¿‡é‡çš„é«˜ä¼˜å…ˆçº§FCM message, ç³»ç»Ÿä¼šæŠŠè¿™äº›ä¿¡æ¯é™çº§ä¸º æ™®é€šä¼˜å…ˆçº§. åŽå°é™åˆ¶ Android Vitals çš„è§„åˆ™ : Android P æ˜¯é€šè¿‡ Android Vitals ç›‘æŽ§åŽå°è€—ç”µ https://developer.android.google.cn/topic/performance/vitals Android Vitals æ ¸å¿ƒæŒ‡æ ‡ï¼š ANR å‘ç”ŸçŽ‡å´©æºƒçŽ‡å”¤é†’æ¬¡æ•°è¿‡å¤šéƒ¨åˆ†å”¤é†’é”å®šè¢«å¡ä½ å…¶ä»–æŒ‡æ ‡ï¼š åŽå° Wi-Fi æ‰«ææ¬¡æ•°è¿‡å¤šåŽå°ç½‘ç»œä½¿ç”¨é‡è¿‡é«˜åº”ç”¨å¯åŠ¨æ—¶é—´å‘ˆçŽ°é€Ÿåº¦ç¼“æ…¢å†»ç»“çš„å¸§æƒé™é­æ‹’ å¯å‚è€ƒè§„åˆ™ åŽä¸ºå…¬å¼€è¿‡ä»–ä»¬åŽå°èµ„æºä½¿ç”¨çš„â€œçº¢çº¿â€ ä¾‹å¦‚é•¿æ—¶é—´èŽ·å– WakeLockã€WiFi å’Œè“ç‰™çš„æ‰«æç­‰ã€‚ä¸ºä»€ä¹ˆè¯´è€—ç”µä¼˜åŒ–ç¬¬ä¸€ä¸ªæ–¹å‘å°±æ˜¯ä¼˜åŒ–åº”ç”¨åŽå°è€—ç”µï¼Œå› ä¸ºå¤§éƒ¨åˆ†åŽ‚å•†é¢„è£…é¡¹ç›®è¦æ±‚æœ€ä¸¥æ ¼çš„æ­£æ˜¯åº”ç”¨åŽå°å¾…æœºè€—ç”µã€‚ â€‹ è™½ç„¶ä¸Šé¢çš„æ ‡å‡†å¯èƒ½éšæ—¶ä¼šæ”¹å˜ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°ï¼ŒAndroid ç³»ç»Ÿç›®å‰æ¯”è¾ƒå…³å¿ƒåŽå° Alarm å”¤é†’ã€åŽå°ç½‘ç»œã€åŽå° WiFi æ‰«æä»¥åŠéƒ¨åˆ†é•¿æ—¶é—´ WakeLock é˜»æ­¢ç³»ç»ŸåŽå°ä¼‘çœ ã€‚ https://blog.dreamtobe.cn/2016/08/15/android_scheduler_and_battery/ åŽå°æ“ä½œåŽŸåˆ™ å‡å°‘ : å‡å°‘åŽå°è¿è¡Œ å»¶è¿Ÿ : å»¶è¿Ÿåˆ°åˆé€‚çš„æ—¶é—´ï¼Œä¾‹å¦‚è®¾å¤‡å……ä¸Šç”µ åˆå¹¶: åˆå¹¶åŽå°æ“ä½œ â€‹ WorkManager : åŽå°æ“ä½œçš„é¦–é€‰ è€—ç”µä¼˜åŒ–æ–¹å¼ ç­å±æ—¶åœæ­¢åŠ¨ç”» æˆ‘ä»¬å¯ä»¥ç›‘å¬ç­å±ä»¥åŠäº®å±çš„å¹¿æ’­ï¼Œåœ¨ç­å±çš„æ—¶å€™åœæ­¢ surfaceView çš„åŠ¨ç”»ç»˜åˆ¶ã€‚åœ¨äº®å±çš„æ—¶å€™ï¼Œæ¢å¤åŠ¨ç”»çš„ç»˜åˆ¶ã€‚ ç›‘å¬æ‰‹æœºå……ç”µçŠ¶æ€ è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦æ€è€ƒï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡ï¼Œè€ƒè™‘å°†ä¸€äº›ä¸éœ€è¦åŠæ—¶åœ°å’Œç”¨æˆ·äº¤äº’çš„æ“ä½œæ”¾åˆ°å……ç”µ çš„æ—¶å€™åŽ»åšã€‚æ¯”å¦‚ï¼š360 æ‰‹æœºåŠ©æ‰‹ï¼Œå½“å……ä¸Šç”µçš„æ—¶å€™ï¼Œæ‰ä¼šè‡ªåŠ¨æ¸…ç†æ‰‹æœºåžƒåœ¾ï¼Œè‡ªåŠ¨å¤‡ä»½ä¸Šä¼ å›¾ç‰‡ã€è”ç³»äºº ç­‰åˆ°äº‘ç«¯ï¼Œä»Žè€Œé¿å…å½“ç”¨æˆ·æ‰‹æœºä½Žç”µé‡æ—¶ï¼Œä»»ç„¶ç»§ç»­è¿›è¡Œè€—ç”µæ“ä½œã€‚ 123456IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);Intent batteryStatus = context.registerReceiver(null, ifilter);//èŽ·å–ç”¨æˆ·æ˜¯å¦åœ¨å……ç”µçš„çŠ¶æ€æˆ–è€…å·²ç»å……æ»¡ç”µäº†int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);boolean isCharging = status == BatteryManager.BATTERY_STATUS_CHARGING || status == BatteryManager.BATTERY_STATUS_FULL; Sync Adapter ç”¨äºŽåŒæ­¥æœåŠ¡ç«¯ä¸Žæœ¬åœ°è®¾å¤‡ä¸­çš„æ•°æ®ã€‚é€šå¸¸æ˜¯ç”¨äºŽåŒæ­¥è¾ƒå¤šçš„æ•°æ®ï¼Œå¦‚ç³»ç»Ÿè”ç³»äººä¿¡æ¯ã€Dropboxç­‰ã€‚ æ‰¾åˆ°éœ€æ±‚åœºæ™¯çš„æ›¿ä»£æ–¹æ¡ˆ ä»¥æŽ¨é€ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ›´å¤šåœ°åˆ©ç”¨åŽ‚å•†é€šé“ï¼Œæˆ–è€…å®šæ—¶çš„æ‹‰å–æœ€æ–°æ¶ˆæ¯è¿™ç§æ¨¡å¼ã€‚å¦‚æžœçœŸæ˜¯è¿«ä¸å¾—å·²ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä½¿ç”¨ foreground service æˆ–è€…å¼•å¯¼ç”¨æˆ·åŠ å…¥ç™½åå•ã€‚åŽå°ä»»åŠ¡çš„æ€»ä½“æŒ‡å¯¼æ€æƒ³æ˜¯å‡å°‘ã€å»¶è¿Ÿå’Œåˆå¹¶ï¼Œå¯ä»¥å‚è€ƒå¾®ä¿¡ä¸€ä¸ªå°ä¼™å†™çš„ã€ŠAndroid åŽå°è°ƒåº¦ä»»åŠ¡ä¸Žçœç”µã€‹ã€‚åœ¨åŽå°è¿è¡ŒæŸä¸ªä»»åŠ¡ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç»è¿‡ä¸‹é¢çš„æ€è€ƒï¼š æ’æ¡©å†™ä¸€ä¸ªåŸºç¡€ç±»ï¼Œç„¶åŽåœ¨ç»Ÿä¸€çš„è°ƒç”¨æŽ¥å£ä¸­å¢žåŠ ç›‘æŽ§é€»è¾‘ã€‚ ä»¥ WakeLock ä¸ºä¾‹ï¼š 12345678910111213public class WakelockMetrics &#123; // Wakelock ç”³è¯· public void acquire(PowerManager.WakeLock wakelock) &#123; wakeLock.acquire(); // åœ¨è¿™é‡Œå¢žåŠ Wakelock ç”³è¯·ç›‘æŽ§é€»è¾‘ &#125; // Wakelock é‡Šæ”¾ public void release(PowerManager.WakeLock wakelock, int flags) &#123; wakelock.release(); // åœ¨è¿™é‡Œå¢žåŠ Wakelock é‡Šæ”¾ç›‘æŽ§é€»è¾‘ &#125;&#125; ç”µé‡ç›‘æŽ§å·¥å…· Battery Historian â€‹ æ— æ³•è¯„ä¼°ç»“æžœ Energy Profiler XHook(çˆ±å¥‡è‰º), æ‹¿åˆ°æ‰€æœ‰çº¿ç¨‹çš„ cpu è€—æ—¶æ—¶é—´ ã€‚ facebook Battery-Metrics å®ƒç›‘æŽ§çš„æ•°æ®éžå¸¸å…¨ï¼ŒåŒ…æ‹¬ Alarmã€WakeLockã€Cameraã€CPUã€Network ç­‰ï¼Œè€Œä¸”ä¹Ÿæœ‰æ”¶é›†ç”µé‡å……ç”µçŠ¶æ€ã€ç”µé‡æ°´å¹³ç­‰ä¿¡æ¯ã€‚Battery-Metrics åªæ˜¯æä¾›äº†ä¸€ç³»åˆ—çš„åŸºç¡€ç±»ï¼Œåœ¨å®žé™…ä½¿ç”¨ä¸­ï¼ŒæŽ¥å…¥è€…å¯èƒ½éœ€è¦ä¿®æ”¹å¤§é‡çš„æºç ã€‚ä½†å¯¹äºŽä¸€äº›ç¬¬ä¸‰æ–¹ SDK æˆ–è€…åŽç»­å¢žåŠ çš„ä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½å°±ä¸å¤ªèƒ½ä¿è¯å¯ä»¥ç›‘æŽ§åˆ°äº†ã€‚è¿™äº›åœºæ™¯ä¹Ÿå°±æ— æ³•ç›‘æŽ§äº†ï¼Œæ‰€ä»¥ Facebook å†…éƒ¨æ˜¯ä½¿ç”¨æ’æ¡©æ¥åŠ¨æ€æ›¿æ¢ã€‚ Facebook å¹¶æ²¡æœ‰å¼€æºå®ƒä»¬å†…éƒ¨çš„æ’æ¡©å…·ä½“å®žçŽ°æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ ASMã€Aspectj è¿™ä¸¤ç§æ’æ¡©æ–¹æ¡ˆäº†ã€‚ matrix BatteryCanary ANR å†…å­˜ä½¿ç”¨ ä¼˜åŒ–å¥½äº†ï¼Œ ç”µé‡è‚¯å®šæ²¡é—®é¢˜ï¼Œ å¦‚æžœç”µé‡ä¸è¡Œï¼Œç¨‹åºæœ‰é—®é¢˜","categories":[],"tags":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/tags/ANDROID/"}]},{"title":"deeplink","slug":"deeplink","date":"2022-02-25T05:51:15.000Z","updated":"2024-02-25T09:03:32.160Z","comments":true,"path":"2022/02/25/deeplink/","link":"","permalink":"https://noteforme.github.io/2022/02/25/deeplink/","excerpt":"","text":"deeplink same as arouer, ç»´æŠ¤äº†ä¸€ä¸ªid(ä¸€ä¸ªdeeplink)å’ŒmicroAppçš„æ˜ å°„è¡¨ï¼Œappå¯åŠ¨åŽ è¯»å–æ˜ å°„è¡¨,idå’Œmicroapp. 123456789101112private void parseApps(Context context, InputStream is, String routerScheme, String routerDomain) &#123; JSONArray jsonArray = new JSONArray(read(is)); int length = jsonArray.length(); for(int i = 0; i &lt; length; ++i) &#123; MetaData metaData = (MetaData)JSON.parseObject(jsonArray.getString(i), MetaData.class); String scheme = String.format(&quot;%s://%s/app/%s&quot;, routerScheme, routerDomain, metaData.id); this.parseMicroApp(context, metaData, metaData.entry.android, scheme); &#125; &#125; &#125; è§£æžidå’Œappï¼Œé€šè¿‡åå°„æ‹¿åˆ°microapp,æŠŠæ˜ å°„è¡¨çš„idå’Œappè¿›è¡Œæ˜ å°„ã€‚ 1234567891011121314private boolean parseMicroApp(Context context, MetaData metaData, String clazzName, String scheme) &#123; Resources resources = context.getResources(); Class clazz = Class.forName(clazzName); Constructor constructor = clazz.getDeclaredConstructor(); Object object = constructor.newInstance(); BaseMicroApp microApp = (BaseMicroApp)object; microApp.setMetaData(metaData); microApp.setApplicationContext(context); microApp.setIcon(metaData.icon); microApp.setScheme(scheme); microApp.setAppDisplayName(metaData.getDisplayName(resources.getConfiguration().locale, &quot;Unknown&quot;)); MicroAppManagerImpl.getInstance().registerMicroApp(metaData.id, microApp); return true;&#125; äº‹ä»¶å‘å‡ºåŽï¼Œé€šè¿‡å¯åŠ¨id,linkæ‹¿åˆ°microapp,å¯åŠ¨è¿˜æœ‰ä¸€ä¸ªåˆ¤æ–­å¯åŠ¨webè¿˜æ˜¯uriHandler,acitivty,è¿™é‡Œå¯åŠ¨activity,æ¥é€šè¿‡è°ƒç”¨microappçš„æ–¹æ³•ï¼Œæ¥è§¦å‘activity. 123456789101112131415 public boolean dispatchURI(@Nullable Activity activity, String uriString) &#123; Uri uri = Uri.parse(uriString); URIHandler uriHandler = this.findDispatchHandler(uri); List&lt;String&gt; pathComponents = uri.getPathSegments(); if (pathComponents.size() &gt; 0) &#123; Map&lt;String, String&gt; parameters = URIDispatcherUtils.calcParameters(uri); boolean shouldIntercept = this.mInterceptor.shouldIntercept(activity, pathComponents, parameters, uriString); if (shouldIntercept) &#123; return false; &#125; &#125; boolean result = uriHandler.handleURI(activity, uriString); &#125;&#125;","categories":[],"tags":[]},{"title":"battery","slug":"battery","date":"2022-02-23T05:50:10.000Z","updated":"2022-06-12T03:17:58.729Z","comments":true,"path":"2022/02/23/battery/","link":"","permalink":"https://noteforme.github.io/2022/02/23/battery/","excerpt":"","text":"æ€§èƒ½ä¸ŽåŠŸè€—https://github.com/JsonChao/Awesome-Android-Performance https://developer.android.google.cn/topic/performance battery historyhttps://developer.android.com/topic/performance/power/setup-battery-historian?hl=zh-cn 123adb shell dumpsys batterystats &gt; &#x2F;Users&#x2F;m&#x2F;Documents&#x2F;BATTELY&#x2F;batterystats.txtadb bugreport &#x2F;Users&#x2F;m&#x2F;Documents&#x2F;BATTELY&#x2F;bugreport.zip æŒ‡æ ‡æŸ¥çœ‹ https://juejin.cn/post/6844903779268034574 ä¸‰ç§æƒ…å†µ çœç”µæ¨¡å¼ åº”ç”¨å¾…æœºåˆ†ç»„ åŽå°é™åˆ¶ è¿™ä¸‰ç§æƒ…å†µï¼Œå¼€å‘è€…éƒ½éœ€è¦å¯¹Appè¿›è¡Œæµ‹è¯•ï¼Œä¿è¯æ­£å¸¸è¿è¡Œ https://www.bilibili.com/video/BV1Ut411d7U3/ åº”ç”¨åˆ†ç»„ å¼€å‘è€…ä¿è¯æ— è®ºå“ªä¸ªåˆ†ç»„ Appéƒ½æ²¡é—®é¢˜ æµ‹è¯•é€šçŸ¥æ˜¯å¦å‘é€ ApiæŽ¥å£ï¼š èŽ·å–è¿è¡Œæ—¶åº”ç”¨æ‰€åœ¨çš„åˆ†ç»„ çœç”µæ¨¡å¼è¯¥æ¨¡å¼Appæ­£å¸¸è¿è¡Œ ![Screen Shot 2022-03-08 at 2.27.35 PM](/Users/m/Documents/BLOG/source/_posts/battery/Screen Shot 2022-03-08 at 2.27.35 PM.png) åŽŸåˆ™å‡å°‘ : å‡å°‘åŽå°è¿è¡Œ å»¶è¿Ÿ : å»¶è¿Ÿåˆ°åˆé€‚çš„æ—¶é—´ï¼Œä¾‹å¦‚è®¾å¤‡å……ä¸Šç”µ åˆå¹¶: å°½é‡åˆå¹¶åŽå°æ“ä½œ WorkManager : åŽå°æ“ä½œçš„é¦–é€‰ å·¥å…·Android Vitalsæ ¹æ®æè¿°çš„ä¸è‰¯è¡Œä¸ºæ¥ä¼˜åŒ–åˆ†ç»„ https://developer.android.google.cn/topic/performance/vitals Energy profiler åœºæ™¯æ“ä½œç›‘å¬æ‰‹æœºå……ç”µçŠ¶æ€è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦æ€è€ƒï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡ï¼Œè€ƒè™‘å°†ä¸€äº›ä¸éœ€è¦åŠæ—¶åœ°å’Œç”¨æˆ·äº¤äº’çš„æ“ä½œæ”¾åˆ°å……ç”µ çš„æ—¶å€™åŽ»åšã€‚æ¯”å¦‚ï¼š360 æ‰‹æœºåŠ©æ‰‹ï¼Œå½“å……ä¸Šç”µçš„æ—¶å€™ï¼Œæ‰ä¼šè‡ªåŠ¨æ¸…ç†æ‰‹æœºåžƒåœ¾ï¼Œè‡ªåŠ¨å¤‡ä»½ä¸Šä¼ å›¾ç‰‡ã€è”ç³»äºº ç­‰åˆ°äº‘ç«¯ï¼Œä»Žè€Œé¿å…å½“ç”¨æˆ·æ‰‹æœºä½Žç”µé‡æ—¶ï¼Œä»»ç„¶ç»§ç»­è¿›è¡Œè€—ç”µæ“ä½œã€‚ å±å¹•å”¤é†’ (ç»§ç»­ç ”ç©¶æˆ‘ä»¬Appç»†èŠ‚)å½“ Android è®¾å¤‡ç©ºé—²æ—¶ï¼Œå±å¹•ä¼šå˜æš—ï¼Œç„¶åŽå…³é—­å±å¹•ï¼Œæœ€åŽä¼šåœæ­¢ CPU çš„è¿è¡Œï¼Œè¿™æ ·å¯ä»¥é˜² æ­¢ç”µæ± ç”µé‡æŽ‰çš„å¿«ã€‚ä½†æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦æ”¹å˜ Android ç³»ç»Ÿé»˜è®¤çš„è¿™ç§çŠ¶æ€:æ¯”å¦‚çŽ©æ¸¸æˆæ—¶æˆ‘ ä»¬éœ€è¦ä¿æŒå±å¹•å¸¸äº®ï¼Œæ¯”å¦‚ä¸€äº›ä¸‹è½½æ“ä½œä¸éœ€è¦å±å¹•å¸¸äº®ä½†éœ€è¦ CPU ä¸€ç›´è¿è¡Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚ ä¿æŒå±å¹•å¸¸äº®æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯åœ¨ Activity ä¸­ä½¿ç”¨ FLAG_KEEP_SCREEN_ON çš„ Flagã€‚ è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯ä¸åƒå”¤é†’é”(wake locks)ï¼Œéœ€è¦ä¸€äº›ç‰¹å®šçš„æƒé™(permission)ã€‚å¹¶ä¸”èƒ½ æ­£ç¡®ç®¡ç†ä¸åŒ app ä¹‹é—´çš„åˆ‡æ¢ï¼Œä¸ç”¨æ‹…å¿ƒæ— ç”¨èµ„æºçš„é‡Šæ”¾é—®é¢˜ã€‚ å¦ä¸€ä¸ªæ–¹å¼æ˜¯åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨ android:keepScreenOn å±žæ€§: android:keepScreenOn = â€œtrueâ€çš„ä½œç”¨å’Œ FLAG_KEEP_SCREEN_ON ä¸€æ ·ï¼Œä½¿ç”¨ä»£ç çš„å¥½ å¤„æ˜¯ä½ å…è®¸ä½ åœ¨éœ€è¦çš„åœ°æ–¹å…³é—­å±å¹•ã€‚ æ³¨æ„:ä¸€èˆ¬ä¸éœ€è¦äººä¸ºçš„åŽ»æŽ‰ FLAG_KEEP_SCREEN_ON çš„ flagï¼ŒwindowManager ä¼šç®¡ç†å¥½ç¨‹åºè¿›å…¥ åŽå°å›žåˆ°å‰å°çš„çš„æ“ä½œã€‚å¦‚æžœç¡®å®žéœ€è¦æ‰‹åŠ¨æ¸…æŽ‰å¸¸äº®çš„ flagï¼Œä½¿ç”¨ æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„ APP å®žé™…æƒ…å†µï¼Œæ ¹æ®ä¸šåŠ¡æ¥æŽ§åˆ¶å¥½æ˜¯å¦ä¿æŒå±å¹•å¸¸é‡ã€‚æ¯”å¦‚ APP éœ€è¦æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚é‚£ä¹ˆåœ¨æ’­æ”¾çš„ç•Œé¢éœ€è¦æŽ§åˆ¶å¥½ä¸ç†„å±ï¼Œå½“é€€å‡ºæ’­æ”¾æ—¶ï¼Œå½“ç„¶å°±æ²¡æœ‰äº† è¿™ä¸ªè®¾ç½®ã€‚ JobScheduler (çŽ°åœ¨åº”è¯¥ç”¨WorkManger)è‡ª Android 5.0 å‘å¸ƒä»¥æ¥ï¼ŒJobScheduler å·²æˆä¸ºæ‰§è¡ŒåŽå°å·¥ä½œçš„å¾ˆå¥½çš„æ–¹å¼ï¼Œå…¶å·¥ä½œæ–¹å¼æœ‰ åˆ©äºŽç”¨æˆ·åœ¨é€‚å½“çš„æ—¶æœºæ‰§è¡Œæ­£ç¡®çš„äº‹æƒ…ã€‚åº”ç”¨å¯ä»¥åœ¨å®‰æŽ’ä½œä¸šçš„åŒæ—¶å…è®¸ç³»ç»ŸåŸºäºŽå†…å­˜ã€ç”µæº å’Œè¿žæŽ¥æƒ…å†µè¿›è¡Œä¼˜åŒ–ã€‚JobSchedule çš„å®—æ—¨å°±æ˜¯æŠŠä¸€äº›ä¸æ˜¯ç‰¹åˆ«ç´§æ€¥çš„ä»»åŠ¡æ”¾åˆ°æ›´åˆé€‚çš„æ—¶æœº æ‰¹é‡å¤„ç†ã€‚è¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„: é¿å…é¢‘ç¹çš„å”¤é†’ç¡¬ä»¶æ¨¡å—ï¼Œé€ æˆä¸å¿…è¦çš„ç”µé‡æ¶ˆè€—ã€‚ é¿å…åœ¨ä¸åˆé€‚çš„æ—¶é—´(ä¾‹å¦‚ä½Žç”µé‡æƒ…å†µä¸‹ã€å¼±ç½‘ç»œæˆ–è€…ç§»åŠ¨ç½‘ç»œæƒ…å†µä¸‹çš„)æ‰§è¡Œè¿‡å¤šçš„ ä»»åŠ¡æ¶ˆè€—ç”µé‡ã€‚ GPSAndroid ç³»ç»Ÿæ”¯æŒå¤šä¸ª Location Provider: GPS_PROVIDER: GPS å®šä½ï¼Œåˆ©ç”¨ GPS èŠ¯ç‰‡é€šè¿‡å«æ˜ŸèŽ·å¾—è‡ªå·±çš„ä½ç½®ä¿¡æ¯ã€‚å®šä½ç²¾å‡†åº¦é«˜ï¼Œä¸€èˆ¬åœ¨ 10 ç±³å·¦å³ï¼Œ è€—ç”µé‡å¤§;ä½†æ˜¯åœ¨å®¤å†…ï¼ŒGPS å®šä½åŸºæœ¬æ²¡ç”¨ã€‚ NETWORK_PROVIDER: ç½‘ç»œå®šä½ï¼Œåˆ©ç”¨æ‰‹æœºåŸºç«™å’Œ WIFI èŠ‚ç‚¹çš„åœ°å€æ¥å¤§è‡´å®šä½ä½ç½®ï¼Œè¿™ç§å®šä½æ–¹å¼å–å†³äºŽæœåŠ¡å™¨ï¼Œ å³å–å†³äºŽå°†åŸºç«™æˆ– WIF èŠ‚ç‚¹ä¿¡æ¯ç¿»è¯‘æˆä½ç½®ä¿¡æ¯çš„æœåŠ¡å™¨çš„èƒ½åŠ›ã€‚ PASSIVE_PROVIDER: è¢«åŠ¨å®šä½ï¼Œå°±æ˜¯ç”¨çŽ°æˆçš„ï¼Œå½“å…¶ä»–åº”ç”¨ä½¿ç”¨å®šä½æ›´æ–°äº†å®šä½ä¿¡æ¯ï¼Œç³»ç»Ÿä¼šä¿å­˜ä¸‹æ¥ï¼Œè¯¥åº”ç”¨æŽ¥ æ”¶åˆ°æ¶ˆæ¯åŽç›´æŽ¥è¯»å–å°±å¯ä»¥äº†ã€‚ å¦‚æžœ App åªæ˜¯éœ€è¦ä¸€ä¸ªç²—ç•¥çš„å®šä½é‚£ä¹ˆå°±ä¸éœ€è¦ä½¿ç”¨ GPS è¿›è¡Œå®šä½ï¼Œæ—¢è€—è´¹ç”µé‡ï¼Œå®šä½çš„è€— æ—¶ä¹Ÿä¹…ã€‚ åŠæ—¶æ³¨é”€å®šä½ç›‘å¬ (æ€Žä¹ˆæ³¨é”€å®šä½) é“¾æŽ¥ï¼šhttps://juejin.cn/post/6844903779268034574 ç”µé‡åˆ†æž https://developer.android.google.cn/topic/performance/vitals https://www.youtube.com/watch?v=dx6LBaFqEHU&amp;t=3s https://tech.meituan.com/2018/03/11/dianping-shortvideo-battery-testcase.html https://www.jianshu.com/p/3dc2ea40ed5a docker â€“ run -p 1234:9999 gcr.io/android-battery-historian/stable:3.0 â€“port 9999 YouTuBe VideoBattery HistorianBattery Historian Part 1: Basics and Installation Using Docker Tool-box https://www.youtube.com/watch?v=6NQwtj0GZRo Battery Historian Part 2: Steps to Collect BatteryStat logs and Creating Report on Console https://www.youtube.com/watch?v=ZTzdrvYO8sM Battery Historian Part 3: Report Analysis and Error Checks https://www.youtube.com/watch?v=d_VFXzBhuuc Battery Historian Parthttps://www.youtube.com/watch?v=11aJfiqqBAk https://www.youtube.com/watch?v=PK2VBuMMkn8 https://www.youtube.com/watch?v=6LuPsbwH3HE https://www.youtube.com/watch?v=-v4NL5oqBq0 è€—ç”µä¼˜åŒ–å»ºè®®ï¼ˆå®žç”¨ï¼‰https://juejin.cn/post/7034751791866576904 https://github.com/JsonChao/Awesome-Android-Notebook/blob/master/notes/Android%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.md#APP%E7%94%B5%E9%87%8F%E4%BC%98%E5%8C%96 https://www.bilibili.com/video/BV1Ut411d7U3/ å…·ä½“å¤„ç†ä¸»è¦æ˜¯ä¼˜åŒ–åŽå°ï¼šAlarm ä¸€å®šæ—¶é—´å†…çš„å¯åŠ¨æ¬¡æ•°ï¼ŒWakeLock ä¸€å®šæ—¶é—´å†…çš„æ—¶é—´/æ¬¡æ•°ï¼ŒSensorï¼ŒWifi Scans ï¼ŒBluetooth , GPSï¼ŒCameraï¼ŒNetWorkï¼ŒCPU ï¼Œé€€åˆ°åŽå°ç›‘æŽ§æ¬¡æ•°å’Œæ—¶é—´ï¼Œå®šä¹‰ä¸€ä¸ªé˜€å€¼è¶…è¿‡æé†’è¾“å‡º å…¶æ¬¡æ˜¯ç›‘æŽ§ä¼˜åŒ–å‰å°ï¼šç›‘æŽ§çº¿ç¨‹ Cpu æ—¶é—´ï¼ŒGpu ç»˜åˆ¶ï¼Œæ‹¿åˆ°æ‰€æœ‰çº¿ç¨‹çš„ cpu è€—æ—¶æ—¶é—´ ANR dump å¾®ä¿¡ï¼šä¼˜åŒ–ï¼Œå¼‚æ­¥åŠ è½½ï¼ˆæ¯”è¾ƒé•¿ï¼‰1 åˆ†é’Ÿï¼Œio è¯»å– ANR ï¼ˆå­çº¿ç¨‹ï¼‰æžç«¯æƒ…å†µä¸‹æ­»å¾ªçŽ¯ è€—ç”µé‡æ˜¯æ€Žä¹ˆè®¡ç®—çš„ï¼Ÿ å¦‚æžœ app éœ€è¦ç›‘æŽ§åº”è¯¥æ€Žä¹ˆç›‘æŽ§ï¼Ÿ æ€Žä¹ˆç›‘æŽ§å¼‚å¸¸è€—ç”µå¹¶ä¸”è¾“å‡ºæ–¹ä¾¿æŽ’æŸ¥çš„ä¿¡æ¯ï¼Ÿ ç›‘æŽ§å·¥å…·wechat matrixhttps://kaedea.com/2021/08/14/android-apm-battery-stats-opt/ https://blog.csdn.net/chuyouyinghe/article/details/117223373 åˆ†äº«åšä¸šåŠ¡æ€Žä¹ˆè„±é¢–è€Œå‡ºï¼Ÿé“ç†éƒ½æ˜¯ä¸€æ ·ï¼Œæœ€åŽè¿›æ¥çš„ï¼Œé¡¹ç›®åŸºæœ¬å®Œå·¥äº†ï¼Œä¸è€ƒæ ¸çš„ä¸‰æµä¸šåŠ¡ï¼Œç»©æ•ˆä¸šåŠ¡ã€‚ å°½æœ€å¤§çš„åŠªåŠ›åŽ»æ”¯æŒä»–ï¼Œ1200æ¡+ï¼Œé‚®ç®± WXG ï¼ŒæŽ¨èäº†æˆ‘ï¼Œå°½å¯èƒ½ç§¯æžä¹è§‚ä¸»åŠ¨ã€‚ ç†¬ï¼Œä½Žè°ƒåŽšç§¯è–„å‘ï¼Œåšåˆ«äººä¸æ„¿æ„åšçš„äº‹æƒ…ï¼Œæ‘†æ­£å¥½å¿ƒæ€ http://www.moyck.com/articles/2019/10/14/1571046711964.html http://www.woshipm.com/it/855066.html https://xiaojianchen.gitbook.io/performance-optimization/android-xing-neng-you-hua-zhi-dian-liang https://juejin.cn/post/6844904195523346439 https://www.bilibili.com/video/BV1st411N7cC?p=5","categories":[],"tags":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/tags/ANDROID/"}]},{"title":"DateTime","slug":"DateTime","date":"2022-01-23T14:56:05.000Z","updated":"2022-01-23T15:05:11.747Z","comments":true,"path":"2022/01/23/DateTime/","link":"","permalink":"https://noteforme.github.io/2022/01/23/DateTime/","excerpt":"","text":"","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"RecyclerView_Divider","slug":"RecyclerView-Divider","date":"2021-12-19T13:12:53.000Z","updated":"2023-02-23T14:17:11.782Z","comments":true,"path":"2021/12/19/RecyclerView-Divider/","link":"","permalink":"https://noteforme.github.io/2021/12/19/RecyclerView-Divider/","excerpt":"","text":"RecyclerView åˆ†å‰²çº¿https://juejin.cn/post/6998712972856000543 ItemDecorationonDrawvoid onDraw(Canvas c, RecyclerView parent, State state) å‚æ•°çš„å«ä¹‰ï¼š Canvas c ã€‹ canvas ç»˜åˆ¶å¯¹è±¡ RecyclerView ã€‹ parent RecyclerView å¯¹è±¡æœ¬èº« State state ã€‹ å½“å‰ RecyclerView çš„çŠ¶æ€ ä½œç”¨å°±æ˜¯ç»˜åˆ¶ï¼Œå¯ä»¥åœ¨ä»»ä½•ä½ç½®ç»˜åˆ¶ï¼Œå¦‚æžœåªæ˜¯æƒ³ç»˜åˆ¶åˆ°æ¯ä¸€é¡¹é‡Œé¢ï¼Œé‚£ä¹ˆå°±éœ€è¦è®¡ç®—å‡ºå¯¹åº”çš„ä½ç½®ã€‚ void onDrawOver(Canvas c, RecyclerView parent, State state) è·Ÿä¸Šé¢ä¸€æ ·ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºŽç»˜åˆ¶çš„æ€»æ˜¯åœ¨æœ€ä¸Šé¢ï¼Œä¹Ÿå°±æ˜¯ç»˜åˆ¶å‡ºæ¥çš„ä¸ä¼šè¢«é®æŒ¡ã€‚ getItemOffsetsvoid getItemOffsets(Rect outRect, View view, RecyclerView parent, State state) å‚æ•°çš„å«ä¹‰ï¼š Rect outRect ã€‹item å››å‘¨çš„è·ç¦»å¯¹è±¡ View view ã€‹ å½“å‰ view RecyclerView ã€‹ parent RecyclerView æœ¬èº« State state ã€‹ RecyclerView çŠ¶æ€ è¿™é‡Œå¯ä»¥è®¾ç½® item åˆ° RecyclerView å„è¾¹çš„è·ç¦»ã€‚è¿™é‡Œéœ€è¦è¯´æ˜Žä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œè¯´çš„åˆ°å„è¾¹çš„è·ç¦»æŒ‡çš„æ˜¯å•¥ï¼Ÿ 1234567891011121314151617181920212223class SimpleItemDecoration : RecyclerView.ItemDecoration() &#123; /** * @param outRect å…¨ä¸º0çš„rectï¼Œç”¨æ¥æŒ‡å®šåç§»åŒºåŸŸ * @param view æŒ‡RecyclerViewä¸­çš„Item * @param parent æŒ‡RecyclerViewæœ¬èº« * @param state çŠ¶æ€ */ override fun getItemOffsets( outRect: Rect, view: View, parent: RecyclerView, state: RecyclerView.State ) &#123; super.getItemOffsets(outRect, view, parent, state) if (parent.getChildAdapterPosition(view) == 0) &#123; outRect.top = 10 outRect.left = 30 outRect.right = 60 outRect.bottom = 90 &#125; &#125;&#125; 1234567891011121314151617181920212223biding.recyclerView.addItemDecoration(object : RecyclerView.ItemDecoration() &#123; override fun onDraw(c: Canvas, parent: RecyclerView, state: RecyclerView.State) &#123; super.onDraw(c, parent, state) paint.color = (Color.BLUE) c.drawRect(0F, 0f, 400f, 200f, paint) &#125; override fun onDrawOver(c: Canvas, parent: RecyclerView, state: RecyclerView.State) &#123; super.onDrawOver(c, parent, state) paint.color = Color.RED c.drawRect(0F, 0f, 200f, 100f, paint) &#125; override fun getItemOffsets( outRect: Rect, view: View, parent: RecyclerView, state: RecyclerView.State ) &#123; super.getItemOffsets(outRect, view, parent, state) outRect.set(20, 100, 0, 20) &#125;&#125;) https://blog.csdn.net/w855227/article/details/80973321 https://www.jianshu.com/p/4eff036360da https://www.jianshu.com/p/b2ef4f8e859f https://github.com/YoKeyword/IndexableRecyclerView https://juejin.im/post/5eae33a26fb9a043586c7f19 https://juejin.cn/post/6844903855335931911 åˆ†å‰²çº¿é«˜åº¦å’Œé¢œè‰²123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:shape=&quot;rectangle&quot;&gt; &lt;size android:height=&quot;1dp&quot; /&gt; &lt;solid android:color=&quot;@color/color_FFE4E7EA&quot; /&gt;&lt;/shape&gt; ItemDividerRfid.kt 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class ItemDividerRfid(var context: Context, val orientation: Int = VERTICAL_LIST) : RecyclerView.ItemDecoration() &#123; companion object &#123; const val HORIZONTAL_LIST = LinearLayoutManager.HORIZONTAL const val VERTICAL_LIST = LinearLayoutManager.VERTICAL &#125; private var mDivider: Drawable? = null init &#123; mDivider = context.getDrawable(R.drawable.transportation_divider_item_color) &#125; override fun onDraw(c: Canvas, parent: RecyclerView, state: RecyclerView.State) &#123; if (orientation == VERTICAL_LIST) &#123; drawVertical(c, parent) &#125; &#125; private fun drawVertical(c: Canvas, parent: RecyclerView) &#123; val left = parent.paddingLeft val right = parent.width - parent.paddingRight val childCount = parent.childCount for (i in 0 until childCount) &#123; val child = parent.getChildAt(i) val params = child.layoutParams as RecyclerView.LayoutParams val top = child.bottom + params.bottomMargin val bottom = top + (mDivider?.intrinsicHeight ?: 0) mDivider?.setBounds(left +ITEM_DIVIDER_HEIGHT_16, top, right-ITEM_DIVIDER_HEIGHT_16, bottom) mDivider?.draw(c) &#125; &#125; override fun getItemOffsets( outRect: Rect, view: View, parent: RecyclerView, state: RecyclerView.State ) &#123; if (orientation == VERTICAL_LIST) &#123; outRect.set(0, 0, 0, mDivider?.intrinsicHeight ?: 0) &#125; &#125;&#125; https://blog.51cto.com/zhaoyanjun/3814502#3_453","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"RecyclerView","slug":"RecyclerView","permalink":"https://noteforme.github.io/tags/RecyclerView/"}]},{"title":"coroutie-start2","slug":"coroutie-start2","date":"2021-12-14T00:05:39.000Z","updated":"2023-01-02T03:31:39.122Z","comments":true,"path":"2021/12/14/coroutie-start2/","link":"","permalink":"https://noteforme.github.io/2021/12/14/coroutie-start2/","excerpt":"","text":"runblockingä¼šç­‰å¾…å­åç¨‹æ‰§è¡Œå®Œæˆ. https://www.bilibili.com/video/BV1uo4y1y7ZF?p=24&amp;spm_id_from=pageDriver P20 launch asyncLaugh è¿”å›žä¸€ä¸ªJob Async , è¿”å›žDeffrred. Async è¿”å›žæ‰§è¡Œç»“æžœ 12345Job1 finished.Job2 finishedJob2 finished P21 joinä¸Žawaitç­‰å¾…åç¨‹çš„ä½œä¸š12345678910111213141516171819202122232425262728293031323334@Testfun `test coroutine join`() = runBlocking &#123; val job1 = launch() &#123; delay(200) println(&quot;One&quot;) &#125; job1.join() // job1æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œjob2 job3 val job2 = launch() &#123; delay(200) println(&quot;Two&quot;) &#125; val job3 = launch() &#123; delay(200) println(&quot;Three&quot;) &#125;&#125;@Testfun `test coroutine await`() = runBlocking &#123; // åˆ·æ–°ç•Œé¢ï¼Œæ‹¿åˆ°æ‰§è¡Œç»“æžœåŽï¼Œå†æ‰§è¡Œå…¶ä»–çš„ã€‚ val job1 = async() &#123; delay(200) println(&quot;One&quot;) &#125; job1.await() // job1æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œjob2 job3 val job2 = async() &#123; delay(200) println(&quot;Two&quot;) &#125; val job3 = async() &#123; delay(200) println(&quot;Three&quot;) &#125;&#125; åŒºåˆ«æ˜¯awaitå¯ä»¥æ‹¿åˆ°æ‰§è¡Œç»“æžœï¼Œ æŽ¥å£1è¯·æ±‚æˆåŠŸï¼Œæ‹¿åˆ°æŽ¥å£ï¼Œå†è¯·æ±‚å…¶ä»–æŽ¥å£ã€‚ launchå¯åŠ¨ç”¨ join() asyncå¯åŠ¨ç”¨ await() P22 asyncç»„åˆå¹¶å‘1234567891011121314151617181920212223242526272829@Testfun `test sync`() = runBlocking &#123; val time = measureTimeMillis &#123; val one = doOne() // åŒæ­¥ï¼Œä¸²è¡Œä»»åŠ¡ val two = doTwo() println(&quot;The result : $&#123;one + two&#125;&quot;) &#125; println(&quot;completed in $time ms&quot;)&#125;@Testfun `test combine async`() = runBlocking &#123; val time = measureTimeMillis &#123; val one = async&#123;doOne()&#125; // å¹¶å‘çš„ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ val two = async&#123;doTwo()&#125; println(&quot;The result : $&#123;one.await() + two.await()&#125;&quot;) &#125; println(&quot;completed in $time ms&quot;)&#125;private suspend fun doOne(): Int &#123; delay(1000) return 14&#125;private suspend fun doTwo(): Int &#123; delay(1000) return 25&#125; æ‰§è¡Œçš„ç»“æžœç›¸åŠ  åç¨‹çš„å¯åŠ¨æ¨¡å¼ CoroutineStart.DEFAULT p24 åç¨‹çš„ä½œç”¨åŸŸæž„å»ºå™¨runBlockingé˜»å¡žå½“å‰çº¿ç¨‹ç­‰å¾… 12345678910coroutineScope &#123; val job1 = launch &#123; delay(1000) println(&quot;Job1 finished.&quot;) &#125; val job2 = async &#123; delay(1000) println(&quot;Job2 finished.&quot;) &#125;&#125; coroutineScope ä¹Ÿéœ€è¦ç­‰å¾…å­åç¨‹æ‰§è¡Œç»“æŸï¼Œå’Œ runBlockingå¾ˆåƒ. åŒºåˆ«coroutineScopeæ˜¯æŒ‚èµ·å‡½æ•°. coroutineScopeä¸ŽsupervisorScope è¿˜æœ‰SupervisorJob 1234567891011coroutineScope &#123; val job1 = launch &#123; delay(400) println(&quot;Job1 finished.&quot;) &#125; val job2 = async &#123; delay(200) println(&quot;Job2 finished.&quot;) &quot;job2 result&quot; &#125;&#125; Job2 finished.Job1 finished. job2ä¸­æ–­ job1ä¹Ÿä¸­æ–­ 12345678910111213141516@Testfun `test coroutineScope scope builder`() = runBlocking &#123; coroutineScope &#123; val job1 = launch &#123; delay(400) println(&quot;job1 finished.&quot;) &#125; val job2 = launch &#123; delay(200) println(&quot;job2 finished.&quot;) &quot;job2 result&quot; throw IllegalArgumentException() &#125; &#125;&#125; job2 finished. java.lang.IllegalArgumentException ä¸¤ä¸ªåç¨‹éƒ½é€€å‡º job2ä¸­æ–­ job1ç»§ç»­ 123456789101112131415@Testfun &#96;test supervisorScope scope builder&#96;() &#x3D; runBlocking &#123; supervisorScope &#123; val job1 &#x3D; launch &#123; delay(400) println(&quot;job1 finished.&quot;) &#125; val job2 &#x3D; launch &#123; delay(200) println(&quot;job2 finished.&quot;) &quot;job2 result&quot; throw IllegalArgumentException() &#125; &#125;&#125; job2 finished.Exception in thread â€œTest worker @coroutine#3â€ Job1 finished. 25 Jobçš„ç”Ÿå‘½å‘¨æœŸ åç¨‹çš„å–æ¶ˆ 26-å–æ¶ˆä½œç”¨åŸŸ1234567891011121314 @Test fun `test scope cancel`() = runBlocking&lt;Unit&gt; &#123; val scope = CoroutineScope(Dispatchers.Default) scope.launch &#123; delay(1000) println(&quot;Job 1.&quot;) &#125; scope.launch &#123; delay(1000) println(&quot;Job 2.&quot;) &#125;// delay(2000) //éœ€è¦åŠ è¿™ä¸ªæ‰èƒ½çœ‹åˆ° æ‰“å°,CoroutineScopeæ²¡æœ‰ç»§æ‰¿runBlockingçš„ä¸Šä¸‹æ–‡ &#125; 12345678910111213141516@Testfun `test scope cancel`() = runBlocking&lt;Unit&gt; &#123; val scope = CoroutineScope(Dispatchers.Default) scope.launch &#123; delay(1000) println(&quot;Job 1.&quot;) &#125; scope.launch &#123; delay(1000) println(&quot;Job 2.&quot;) &#125; delay(100) //éœ€è¦åŠ è¿™ä¸ªæ‰èƒ½çœ‹åˆ° æ‰“å° scope.cancel() delay(2000)&#125; CorountineScopeå’ŒcorountineScopeçš„åŒºåˆ«(å¤§å°å†™çš„åŒºåˆ«ï¼Œå¤§å†™çš„å¯ä»¥å–æ¶ˆ) P27-å–æ¶ˆå…„å¼Ÿåç¨‹12345678910111213141516@Testfun `test scope cancel`() = runBlocking&lt;Unit&gt; &#123; val scope = CoroutineScope(Dispatchers.Default) val job1 = scope.launch &#123; delay(1000) println(&quot;Job 1.&quot;) &#125; val job2=scope.launch &#123; delay(1000) println(&quot;Job 2.&quot;) &#125; delay(100) //éœ€è¦åŠ è¿™ä¸ªæ‰èƒ½çœ‹åˆ° æ‰“å° job1.cancel() delay(2000)&#125; è¢«å–æ¶ˆçš„åç¨‹ï¼Œä¸ä¼šå½±å“å…¶ä½™çš„å…„å¼Ÿåç¨‹ 1Job 2. 28-åç¨‹å–æ¶ˆçš„å¼‚å¸¸1234567891011121314@Testfun `test CancellationException `() = runBlocking&lt;Unit&gt; &#123; val job1 = GlobalScope.launch &#123; try &#123; delay(1000) println(&quot;Job 1.&quot;) &#125;catch (e:Exception)&#123; e.printStackTrace() &#125; &#125; delay(100) job1.cancel(CancellationException(&quot;å–æ¶ˆ&quot;)) job1.join() // å¦åˆ™ä¸ä¼šæ‰“å°GlobalScopeä¸åœ¨runBlockingä¸Šä¸‹æ–‡&#125; java.util.concurrent.CancellationException: å–æ¶ˆ cpuå¯†é›†åž‹ä»»åŠ¡å–æ¶ˆ29cpuå¯†é›†åž‹ä»»åŠ¡å–æ¶ˆ isActive isActiveåˆ¤æ–­å–æ¶ˆï¼Œå¦åˆ™è¿˜æ˜¯è®¡ç®—5æ¬¡,è¿™ä¸ªå’Œçº¿ç¨‹whileæ“ä½œå¾ˆåƒ p30- cpuå¯†é›†åž‹ä»»åŠ¡å–æ¶ˆ - ensureActive é€€å‡ºå¾ªçŽ¯ p31-yiledå–æ¶ˆ p32-coroutineå–æ¶ˆå‰¯ä½œç”¨ p33 æ ‡å‡†å‡½æ•°useè‡ªåŠ¨å…³é—­æ–‡ä»¶å¯¹è±¡ 34ä¸èƒ½å–æ¶ˆçš„ä»»åŠ¡NonCancellable 35è¶…æ—¶ä»»åŠ¡ç½‘ç»œè¯·æ±‚è¶…æ—¶ è¶…æ—¶1300åŽçš„å¤„ç†","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"Font","slug":"Font","date":"2021-11-23T14:15:14.000Z","updated":"2021-12-05T12:11:41.185Z","comments":true,"path":"2021/11/23/Font/","link":"","permalink":"https://noteforme.github.io/2021/11/23/Font/","excerpt":"","text":"https://segmentfault.com/a/1190000011299402 https://www.jianshu.com/p/4f9db19d9383 https://github.com/WaterYuanData/Camera2New/tree/SwitchLanguage/testlanguage https://www.jianshu.com/p/7a81e5ef268d https://blog.csdn.net/jdfkldjlkjdl/article/details/106279151 https://proandroiddev.com/change-language-programmatically-at-runtime-on-android-5e6bc15c758","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"coroutine_begin1","slug":"coroutine-begin1","date":"2021-11-08T13:18:20.000Z","updated":"2023-01-02T03:31:39.184Z","comments":true,"path":"2021/11/08/coroutine-begin1/","link":"","permalink":"https://noteforme.github.io/2021/11/08/coroutine-begin1/","excerpt":"","text":"åç¨‹æ˜¯ä»€ä¹ˆ 03 åç¨‹çš„æŒ‚èµ·ä¸Žæ¢å¤ 08 æŒ‚èµ·é˜»å¡žçš„åŒºåˆ« 09 åç¨‹çš„è°ƒåº¦å™¨ P13 Dispatchers.Main Dispatchers.IO Dispatchers.Default ä»»åŠ¡æ³„æ¼ P14 ç»“æž„åŒ–å¹¶å‘ p15ä½¿ç”¨ç»“æž„åŒ–å¹¶å‘å¯ä»¥åšåˆ° CoutineScope P16GlobalScope mainscopeåç¨‹ å¯ä»¥é€šè¿‡æŠ›å‡ºå¼‚å¸¸å–æ¶ˆ.","categories":[],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"Language","slug":"Language","date":"2021-11-06T08:06:32.000Z","updated":"2021-11-07T08:19:37.360Z","comments":true,"path":"2021/11/06/Language/","link":"","permalink":"https://noteforme.github.io/2021/11/06/Language/","excerpt":"","text":"æ–¹å¼Android &lt; 7.0ä¸€ä¸‹å’Œä»¥ä¸Šä¸åŒ, 7.0ä»¥ä¸‹åªè¦è®¾ç½®ä¸€æ¬¡è¯­è¨€å°±å¯ä»¥ 7.0æˆ–ä»¥ä¸Šï¼Œå¿…é¡»åœ¨BaseActivityè®¾ç½® BaseActivityå¤„ç†æ‰€æœ‰çš„çœäº‹çš„åšæ³•ï¼Œè°ƒç”¨attachBaseContext,ä¸€èµ·è®¾ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354object LanguageUtil &#123; @JvmStatic fun attachBaseContext(context: Context, language: String?): Context? &#123; val resources = context.resources val configuration = resources.configuration val locale = getLocaleByLanguage(language!!) configuration.setLocale(locale) return if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123; configuration.setLocales(LocaleList(locale)) context.createConfigurationContext(configuration) &#125; else &#123; //èŽ·å–æƒ³è¦åˆ‡æ¢çš„è¯­è¨€ç±»åž‹ // updateConfiguration val dm = resources.displayMetrics resources.updateConfiguration(configuration, dm) context &#125; &#125; fun getLocaleByLanguage(language: String): Locale &#123; var locale: Locale if (language == TNGLanguageEnumType.CN.language) &#123; locale = Locale.SIMPLIFIED_CHINESE &#125; else if (language == TNGLanguageEnumType.MY.language) &#123; locale = Locale.forLanguageTag(&quot;ms&quot;) &#125; else &#123; locale = Locale.ENGLISH &#125; return locale &#125; @TargetApi(Build.VERSION_CODES.N) private fun updateResources(context: Context, language: String): Context &#123; val resources = context.resources val locale = getLocaleByLanguage(language) val configuration = resources.configuration configuration.setLocale(locale) configuration.setLocales(LocaleList(locale)) return context.createConfigurationContext(configuration) &#125; @JvmStatic fun setFontScaleLimit(context: Context): Context? &#123; val config = Configuration(context.resources.configuration) if (config.fontScale &gt; 1.2f || config.fontScale &lt; 1.0f) &#123; config.setToDefaults() config.fontScale = 1.1f &#125; return context.createConfigurationContext(config) &#125;&#125; å°äºŽ7.0è®¾ç½®ä¸€æ¬¡changeAppLanguage() è°ƒè¿™ä¸ªæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374public class LanguageUtil &#123; private static final String TAG = &quot;LanguageUtil&quot;; /** * @param context * @param newLanguage æƒ³è¦åˆ‡æ¢çš„è¯­è¨€ç±»åž‹ æ¯”å¦‚ &quot;en&quot; ,&quot;zh&quot; */ @SuppressWarnings(&quot;deprecation&quot;) public static void changeAppLanguage(Context context, String newLanguage) &#123; if (TextUtils.isEmpty(newLanguage)) &#123; return; &#125; Resources resources = context.getResources(); Configuration configuration = resources.getConfiguration(); //èŽ·å–æƒ³è¦åˆ‡æ¢çš„è¯­è¨€ç±»åž‹ Locale locale = getLocaleByLanguage(newLanguage); configuration.setLocale(locale); // updateConfiguration DisplayMetrics dm = resources.getDisplayMetrics(); resources.updateConfiguration(configuration, dm); &#125; public static Locale getLocaleByLanguage(String language) &#123; Locale locale = Locale.ENGLISH; if (language.equals(LanguageType.CHINESE.getLanguage())) &#123; locale = Locale.SIMPLIFIED_CHINESE; &#125; else if (language.equals(LanguageType.ENGLISH.getLanguage())) &#123; locale = Locale.ENGLISH; &#125; else if (language.equals(LanguageType.MY.getLanguage())) &#123; locale = Locale.forLanguageTag(language); &#125; Log.d(TAG, &quot;getLocaleByLanguage: &quot; + locale.getDisplayCountry()); return locale; &#125; public static Context attachBaseContext(Context context, String language) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123; return updateResources(context, language); &#125; else &#123; return context; &#125; &#125; @RequiresApi(api = VERSION_CODES.N) private static Context updateResources(Context context, String language) &#123; Resources resources = context.getResources(); Locale locale = LanguageUtil.getLocaleByLanguage(language); Configuration configuration = resources.getConfiguration(); configuration.setLocale(locale); configuration.setLocales(new LocaleList(locale)); return context.createConfigurationContext(configuration); &#125; public static Context updateBaseContext(Context context, String language) &#123; Resources resources = context.getResources(); Configuration configuration = resources.getConfiguration(); Locale locale = LanguageUtil.getLocaleByLanguage(language); configuration.setLocale(locale); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123; configuration.setLocales(new LocaleList(locale)); return context.createConfigurationContext(configuration); &#125;else &#123; //èŽ·å–æƒ³è¦åˆ‡æ¢çš„è¯­è¨€ç±»åž‹ // updateConfiguration DisplayMetrics dm = resources.getDisplayMetrics(); resources.updateConfiguration(configuration, dm); return context; &#125; &#125;&#125; https://github.com/wisnukurniawan/changelanguage.git https://www.jianshu.com/p/4f9db19d9383","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"LC_binary_search_1","slug":"LC_binary_search_1","date":"2021-10-31T09:01:21.000Z","updated":"2023-11-07T14:28:55.924Z","comments":true,"path":"2021/10/31/LC_binary_search_1/","link":"","permalink":"https://noteforme.github.io/2021/10/31/LC_binary_search_1/","excerpt":"","text":"correct sentence grammar 704. Binary Searché˜²æ­¢æº¢å‡º è®¡ç®— mid æ—¶éœ€è¦é˜²æ­¢æº¢å‡ºï¼Œä»£ç ä¸­ left + (right - left) / 2 å°±å’Œ (left + right) / 2 çš„ç»“æžœç›¸åŒï¼Œä½†æ˜¯æœ‰æ•ˆé˜²æ­¢äº† left å’Œ right å¤ªå¤§ç›´æŽ¥ç›¸åŠ å¯¼è‡´æº¢å‡ºã€‚ è¾¹ç•Œ leetcodeæ”¶è—äº† åŠ›æ‰£ï¼ˆLeetCodeï¼‰å®˜ç½‘ - å…¨çƒæžå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å° åŠ›æ‰£ï¼ˆLeetCodeï¼‰å®˜ç½‘ - å…¨çƒæžå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å° ä»£ç éšæƒ³å½• First, solve the problem, and then review the one below. https://www.youtube.com/watch?v=6ysjqCUv3K4 https://www.youtube.com/watch?v=KXJSjte_OAI è€ƒè™‘åˆ°è¾¹ç•Œæƒ…å†µï¼Œæ³¨æ„æ˜¯ mid æ˜¯val mid = left + (right - left) / 2 , è€Œä¸æ˜¯ val mid = right - (right - left) / 2 è§£æ³•ä¸€ [left,right] while(left&lt;=right) 0 1 2 3 4 5 -1 0 3 5 9 12 left mid right target = 0 In my opinion, when the target is not equal to the midpoint, itâ€™s better to understand left and right as open intervals. 12345678910111213141516fun search(nums: IntArray, target: Int): Int &#123; var left = 0 var right = nums.size -1 while (left &lt;= right) &#123; val mid = left + (right - left) / 2 // consider left right border if (target == nums[mid]) &#123; return mid &#125; else if (target &gt; mid) &#123; left = mid + 1 &#125; else &#123; right = mid - 1 &#125; println(&quot;mid $mid left $left right $right&quot;) &#125; return -1&#125; I was thinking about the above answer, but if left = 0 and right = 1, if (1 == target), you will never get the right answer because (left + right) / 2 equals 0, so right cannot use nums.size -1. â€œIt was incorrect in this scenario because when left is set to mid + 1, which is 1, it will correctly hit the desired result on the next iteration.â€ 1 2 3 4 7 9 10 find 2 0 1 2 3 4 5 6 1 2 3 4 7 9 10 Left Middle Right Middle Right [0,6] 12345678910111213141516//è§£æ³•1 [0,nums.length-1]public int binarySearch1(int[] nums, int target) &#123; int left = 0; int right = nums.length - 1; while (left &lt;= right) &#123; int middle = (left + right) / 2; if (target == nums[middle]) &#123; return middle; &#125; else if (target &lt; nums[middle]) &#123; right = middle - 1; &#125; else &#123; left = middle + 1; &#125; &#125; return -1;&#125; è§£æ³•äºŒwhile (left &lt; right)left == rightåœ¨åŒºé—´[left, right) [0,7) the size is 7, so while (left &lt; right) can easily understand, if (nums[middle]&gt;target) right = middle can not understand at first,but we need consider outside condition is while (left &lt; right) , next time is same , so right = middle , not middle - 1. target ==2 0 1 2 3 4 5 6 7 1 2 3 4 7 9 10 Left Middle Right Left Middle Right (0+7)/2 = 3 (0+3)/2=1 1234567891011121314// è§£æ³•2 [0,nums.length) fun search(nums: IntArray, target: Int): Int &#123; var left = 0 var right = nums.size while (left &lt; right) &#123; val mid = left + (right - left) / 2 if (nums[mid] &gt; target) &#123; right = mid &#125; else if (nums[mid] &lt; target) &#123; left = mid + 1 &#125; else return mid &#125; return -1 &#125; æ„Ÿè§‰è¿˜æ˜¯è§£æ³•1æ›´å¥½ç†è§£ ,ä¸ä¼šå®¹æ˜“å‡ºé”™ã€‚ 35. æœç´¢æ’å…¥ä½ç½®(right - left) / 2 å¦‚æžœç”¨ ((right - left) shr 2) é‚£ä¹ˆ(right - left)è¦æ‹¬èµ·æ¥ï¼Œå¦åˆ™ä¼šç¬¦å·ä¼˜å…ˆçº§æœ‰é—®é¢˜. è¿™é¢˜æ²¡æƒ³åˆ°æ˜¯æ’å…¥leftä½ç½®ï¼Œæœ€åŽä¸€æ­¥rightæ˜¯å¯ä»¥ç§»åˆ° leftä½ç½®æˆ–è¶…è¿‡left, åŠ›æ‰£ï¼ˆLeetCodeï¼‰å®˜ç½‘ - å…¨çƒæžå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å° I am thinking that, after the while loop finishes, we compare the last â€˜midâ€™ value to the target. If the target is less than the â€˜midâ€™ value, then return â€˜mid - 1â€™. 12345678910111213141516171819fun searchInsert(nums: IntArray, target: Int): Int &#123; var left = 0 var right = nums.size - 1 var mid = 0 while (left &lt;= right) &#123; // 1. missing &quot;==&quot; at firstly println(&quot;before left $left right $right&quot;) mid = left + (right - left) / 2 println(&quot;mid $mid &quot;) if (nums[mid] == target) &#123; return mid &#125; else if (target &lt; nums[mid]) &#123; right = mid - 1 &#125; else if (target &gt; nums[mid]) &#123; left = mid + 1 &#125; println(&quot;after left $left right $right&quot;) &#125; return left //æˆ–è€…right+1 &#125; 69.x çš„å¹³æ–¹æ ¹â€‹ è¿™é¢˜æˆ‘çš„è§£æ³•æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯è¿˜æœ‰é—®é¢˜ æ²¡é€šè¿‡ mid * mid.toLong() ,ä¸ºä»€ä¹ˆ right - left + 1 å³ä½¿é€€å‡ºå¾ªçŽ¯ 123456789101112131415161718192021222324 fun mySqrt(x: Int): Int &#123; var left = 0 var right = x while (left &lt; right) &#123; val mid = left + (right - left + 1) / 2 // è°ƒè¯•è¯­å¥å¼€å§‹// try &#123;// Thread.sleep(1000);// &#125; catch (e: InterruptedException) &#123;// e.printStackTrace()// &#125;// println(&quot;left = $left, right = $right, mid = $mid&quot;)// é“¾æŽ¥ï¼šhttps://leetcode-cn.com/problems/sqrtx/solution/er-fen-cha-zhao-niu-dun-fa-python-dai-ma-by-liweiw/ if (mid * mid == x) &#123; return mid &#125; else if (mid * mid.toLong() &lt; x) &#123; left = mid &#125; else if (mid * mid.toLong() &gt; x) &#123; right = mid - 1 &#125; &#125; return left; &#125; åŠ›æ‰£ï¼ˆLeetCodeï¼‰å®˜ç½‘ - å…¨çƒæžå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å° æœ‰ä¸ºä»€ä¹ˆäº§ç”Ÿæ­»å¾ªçŽ¯çš„è®²è§£ 367.æœ‰æ•ˆçš„å®Œå…¨å¹³æ–¹æ•° è§£ç­”1234567891011121314151617class LC367 &#123; fun isPerfectSquare(num: Int): Boolean &#123; var left = 1 var right = num while (left &lt;= right) &#123; var mid = left + (right - left) / 2 if (mid * mid == num) &#123; return true &#125; else if (mid * mid &gt; num) &#123; right = mid - 1 &#125; else if (mid * mid &lt; num) &#123; left = mid + 1 &#125; &#125; return false &#125;&#125; â€‹ æµ‹è¯•ç”¨ä¾‹è¶…å‡ºé™åˆ¶ 2147483647. , å› ä¸ºmid *mid è¶…å‡ºint â€‹ 34.åœ¨æŽ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åŽä¸€ä¸ªä½ç½®(opens new window)https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/solution/zai-pai-xu-shu-zu-zhong-cha-zhao-yuan-su-de-di-3-4/ æœ‰ç¬¦å· æ— ç¬¦å·çš„åŒºåˆ« å¯¹äºŽæœ‰ç¬¦å·æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å³ç§»æ“ä½œï¼Œé«˜ä½è¡¥å……çš„æ˜¯1ï¼› å¯¹äºŽæ— ç¬¦å·æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å³ç§»æ“ä½œï¼Œé«˜ä½è¡¥å……çš„åˆ™æ˜¯0ï¼› 0x80000000 0xc0000000 0x40000000 https://juejin.cn/post/6844903969915944973","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"kotlin-senior2","slug":"kotlin-senior2","date":"2021-09-11T10:04:06.000Z","updated":"2021-11-30T01:40:14.920Z","comments":true,"path":"2021/09/11/kotlin-senior2/","link":"","permalink":"https://noteforme.github.io/2021/09/11/kotlin-senior2/","excerpt":"","text":"Lambdaè¡¨è¾¾å¼Lambdaè¡¨è¾¾å¼ã€åŒ¿åå‡½æ•°ã€åŒå†’å·+å‡½æ•°åè¿™ä¸‰ä¸ªä¸œè¥¿ï¼Œéƒ½æ˜¯å‡½æ•°ç±»åž‹çš„å¯¹è±¡ï¼Œä»–ä»¬éƒ½èƒ½å¤Ÿèµ‹å€¼ç»™å˜é‡ä»¥åŠå½“ä½œå‡½æ•°çš„å‚æ•°ä¼ é€’ï¼ Lambdaè¡¨è¾¾å¼çš„æ ¼å¼ Lambdaè¡¨è¾¾å¼è¢«å¤§æ‹¬å·åŒ…å›´ç€ Lambdaè¡¨è¾¾å¼çš„å‚æ•°åœ¨-&gt;çš„å·¦è¾¹ï¼Œå¦‚æžœæ²¡æœ‰å‚æ•°ï¼Œåˆ™åªä¿ç•™å‡½æ•°ä½“ Lambdaè¡¨è¾¾å¼çš„å‡½æ•°ä½“åœ¨-&gt;çš„åŽé¢ Lambdaè¡¨è¾¾å¼çš„è¿”å›žç±»åž‹å€¼æ€»ä¸ºå‡½æ•°ä½“æœ€åŽä¸€è¡Œä»£ç çš„è¿”å›žå€¼ç±»åž‹ æ— å‚æ•°ï¼Œæ— è¿”å›žå€¼çš„Lambdaè¡¨è¾¾å¼123val test01Lambda = &#123; print(&quot;æ— å‚æ•°,æ— è¿”å›žå€¼&quot;)&#125; æˆ‘ä»¬åŒæ ·å°†Lambdaè¡¨è¾¾å¼èµ‹å€¼ç»™äº†å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯å‡½æ•°ç±»åž‹ï¼ˆ() -&gt; Unitï¼‰çš„å¯¹è±¡ã€‚ æœ‰å‚æ•°ï¼Œæ— è¿”å›žå€¼çš„Lambdaè¡¨è¾¾å¼123val test02Lambda = &#123; name: String -&gt; print(&quot;æœ‰å‚æ•°,æ— è¿”å›žå€¼ï¼Œå‚æ•°å€¼ä¸ºï¼š$name&quot;)&#125; è¿™ä¸ªå˜é‡æ˜¯å‡½æ•°ç±»åž‹ï¼ˆ(String) -&gt; Unitï¼‰çš„å¯¹è±¡ã€‚ å¦‚æžœæˆ‘ä»¬æ‰‹åŠ¨ç»™è¿™ä¸ªå˜é‡æŒ‡æ˜Žäº†ç±»åž‹ï¼Œé‚£ä¹ˆLambdaçš„å‚æ•°ç±»åž‹è¿˜å¯ä»¥ä¸å†™ï¼š æ³¨æ„è¿™ä¸ªnameå‚æ•° æ˜¯å›žè°ƒæ–¹æ³•ä¼ è¿‡æ¥çš„å‚æ•°. 123val test02Lambda: (String) -&gt; Unit = &#123; name -&gt; print(&quot;æœ‰å‚æ•°,æ— è¿”å›žå€¼ï¼Œå‚æ•°å€¼ä¸ºï¼š$name&quot;)&#125; è¿™ä¸ªæ—¶å€™ï¼ŒKotlinå¯ä»¥è‡ªåŠ¨ä¸ºæˆ‘ä»¬æŽ¨æ–­å‡ºLambdaä¸­è¿™ä¸ªå‚æ•°çš„ç±»åž‹æ˜¯Stringç±»åž‹ã€‚ å¦‚æžœLambdaè¡¨è¾¾å¼çš„å‚æ•°åªæœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬ç”šè‡³è¿žè¿™ä¸ªå‚æ•°éƒ½å¯ä»¥çœç•¥ä¸å†™ï¼Œé‚£â€¦æˆ‘æƒ³ä½¿ç”¨è¿™ä¸ªå‚æ•°çš„æ—¶å€™æ€Žä¹ˆåŠžå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨itæ¥ä»£æ›¿ï¼š 123val test02Lambda: (String) -&gt; Unit = &#123; print(&quot;æœ‰å‚æ•°,æ— è¿”å›žå€¼ï¼Œå‚æ•°å€¼ä¸ºï¼š$it&quot;)&#125; æœ‰å‚æ•°ï¼Œæœ‰è¿”å›žå€¼çš„Lambdaè¡¨è¾¾å¼12345val test03Lambda = &#123; doubleValue: Double -&gt; print(&quot;parameter is Double,Value is:$doubleValue&quot;) print(&quot;now parse Double into String&quot;) doubleValue.toString()&#125; Lambdaè¡¨è¾¾å¼çš„æœ€åŽä¸€è¡Œä»£ç å°†ä½œä¸ºè¿”å›žå€¼ï¼Œå› æ­¤å®ƒå¯¹åº”çš„å‡½æ•°ç±»åž‹ä¸ºï¼š(Double) -&gt; Stringã€‚åŒæ ·ï¼Œå¦‚æžœå˜é‡å·²ç»ç¡®åˆ‡çš„æŒ‡å®šäº†ç±»åž‹ï¼Œåˆ™Lambdaè¡¨è¾¾å¼çš„å‚æ•°ç±»åž‹å¯ä»¥çœç•¥ï¼Œåˆç”±äºŽåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è¿žå‚æ•°éƒ½å¯ä»¥çœç•¥ï¼ŒKotlinå°†ä½¿ç”¨itä»£æ›¿è¿™ä¸ªå‚æ•°åã€‚ 123456789101112131415161718192021222324252627val method: (String, String) -&gt; Unit = &#123; aStr, bStr -&gt; println(&quot;a : $aStr, b:$bStr&quot;) &#125;method(&quot;john&quot;,&quot;ç”·&quot;)val method02 = &#123; println(&quot;john&quot;)&#125;val method03:(String)-&gt;Unit=&#123; println(&quot;ä¼ å…¥çš„æ˜¯:$it&quot;)&#125;method03(&quot;Jon&quot;)val method04:(Int)-&gt;Unit=&#123; when(it)&#123; 1-&gt; println(&quot;ç­‰äºŽ1&quot;) in 20.. 30 -&gt; println(&quot;20 - 30çš„æ•°å­—&quot;) else -&gt; println(&quot;éƒ½ä¸æ»¡è¶³&quot;) &#125;&#125;method04(1)val method05 : (Int,Int)-&gt; Unit = &#123;aNumber,bNumber-&gt; println(&quot;ç¬¬ä¸€ä¸ª: $aNumber, ç¬¬äºŒä¸ª : $bNumber&quot;)&#125;method05(1,9)val method06 : (Int,Int)-&gt; Unit = &#123;aNumber,_-&gt; println(&quot;ç¬¬ä¸€ä¸ª: $aNumber&quot;)&#125;method06(99,88)val method07 : (String)-&gt;String = &#123;str -&gt; str&#125;println(method07(&quot;Jon&quot;)) å‡½æ•°ç±»åž‹å‡½æ•°ç±»åž‹çš„ä¹¦å†™æ ¼å¼æ‰€æœ‰å‡½æ•°ç±»åž‹éƒ½æœ‰ä¸€ä¸ªåœ†æ‹¬å·æ‹¬èµ·æ¥çš„å‚æ•°ç±»åž‹åˆ—è¡¨ï¼Œä»¥åŠä¸€ä¸ªè¿”å›žç±»åž‹ï¼š(A, B) -&gt; C ï¼Œå‚æ•°åˆ—è¡¨ä¸Žè¿”å›žå€¼ç±»åž‹ä¹‹é—´é€šè¿‡ -&gt; ç¬¦å·è¿žæŽ¥ã€‚(A, B) -&gt; Cè¡¨ç¤ºæŽ¥æ”¶ç±»åž‹åˆ†åˆ«ä¸º A ä¸Ž B ä¸¤ä¸ªå‚æ•°å¹¶è¿”å›žä¸€ä¸ª C ç±»åž‹å€¼çš„å‡½æ•°ç±»åž‹ã€‚ 1val f: (Int) -&gt; String (Int) -&gt; Stringè¿™å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç±»åž‹ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿å‡½æ•°ç±»åž‹çš„å‚æ•°åˆ—è¡¨ä¸ºç©ºï¼Œä¹Ÿå¿…é¡»ä¿ç•™å°æ‹¬å·ï¼Œä¾‹å¦‚() -&gt; Stringï¼›å³ä½¿å‡½æ•°ç±»åž‹çš„è¿”å›žå€¼ç±»åž‹ä¸ºUnitï¼Œä¹Ÿä¸å¯çœç•¥Unitä¸å†™ï¼Œä¾‹å¦‚ï¼š(Int) -&gt; Unitã€‚ å‡½æ•°ç±»åž‹çš„å¯¹è±¡ä½¿ç”¨sum(1, 2)è¿™æˆ‘å¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿsumæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯block(1, 2)è¿™æ ·ä¹Ÿè¡Œï¼Ÿblockå¯æ˜¯ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å¯¹è±¡å•Šï¼Œå‡½æ•°ç±»åž‹çš„å¯¹è±¡åŽé¢å¯ä»¥åŠ æ‹¬å·è°ƒç”¨ï¼Ÿ æ²¡é”™ï¼Œåªæœ‰å‡½æ•°ç±»åž‹çš„å¯¹è±¡å¯ä»¥ï¼Œå…¶å®žè¿™æ˜¯Kotlinä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ä¼šåŽ»è°ƒç”¨invokeå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ 12345val block: (Int, Int) -&gt; Int = ::sumfun sum(firstNumber: Int, secondNumber: Int): Int &#123; return firstNumber + secondNumber&#125; 12345678910val block: (Int, Int) -&gt; Int = ::sum// ä»¥ä¸‹è°ƒç”¨éƒ½æ˜¯æœ‰è¿”å›žå€¼çš„,å› ä¸º(Int, Int) -&gt; Intè¿™ä¸ªå‡½æ•°ç±»åž‹æ˜¯æœ‰è¿”å›žå€¼çš„block(1, 2)// ç­‰ä»·äºŽblock.invoke(1, 2)// ç­‰ä»·äºŽ(::sum)(1, 2)// ç­‰ä»·äºŽ(::sum).invoke(1, 2) Kotlinä½¿ç”¨è¿™ç§ï¼ˆå‡½æ•°ç±»åž‹å¯¹è±¡èƒ½å¤Ÿä½¿ç”¨æ‹¬å·è®¿é—®ï¼‰è¯­æ³•è®©æˆ‘ä»¬æ„Ÿè§‰ï¼Œå—¯ï¼Œblockå°±æ˜¯sumå‡½æ•°çš„æ›¿èº«ï¼Œè€Œå®žé™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å¯¹è±¡ã€‚ é«˜é˜¶å‡½æ•°ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°12345btn.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; &#125;&#125;); æœ‰æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆéœ€è¦ä¼ ä¸€ä¸ªåŒ¿åç±»è¿‡åŽ»ï¼Ÿå› ä¸ºFrameworkä¼šåœ¨è¯¥Viewè¢«ç‚¹å‡»çš„æ—¶å€™è°ƒç”¨æˆ‘ä»¬åœ¨åŒ¿åç±»ä¸­å®žçŽ°çš„é‚£ä¸ªonClickæ–¹æ³•ï¼Œä»¥ä¾¿äºŽæ‰§è¡Œæˆ‘ä»¬è‡ªå·±çš„å¤„ç†é€»è¾‘ã€‚ è¦æ˜¯æˆ‘ä»¬èƒ½ç›´æŽ¥å°†æ–¹æ³•ä¼ è¿‡åŽ»å°±å¥½äº†â€¦æ¢¦è¯¥é†’äº†ï¼Œè¿™æ˜¯Javaï¼Œåªèƒ½é€šè¿‡æŽ¥å£ + åŒ¿åå†…éƒ¨ç±»è¿™ç§æŠ˜ä¸­çš„æ–¹æ¡ˆæ¥å®žçŽ°è¿™æ ·çš„éœ€æ±‚ã€‚ è€ŒKotlinæœ‰äº†å‡½æ•°ç±»åž‹ï¼Œåˆæœ‰äº†é«˜é˜¶å‡½æ•°ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€æ®µä»£ç ç»™å‡½æ•°äº†ï¼Œå‡½æ•°å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™æ‰§è¡Œæˆ‘ä»¬ä¼ å…¥çš„é‚£æ®µä»£ç ï¼Œå®Œç¾Žçš„è§£å†³äº†è¿™ä¸€ç—›ç‚¹ã€‚ é«˜é˜¶å‡½æ•°çš„ä½¿ç”¨æ¡ˆä¾‹è™½ç„¶éƒ½æ˜¯è¿‡æ»¤æ‰¾å‡ºç¬¦åˆè¦æ±‚çš„è‹¹æžœï¼Œä½†æ˜¯æ¡ä»¶æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™ä¸ªæ€Žä¹ˆåšå‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å†™ä¸‰ä¸ªå¾ªçŽ¯ï¼Œæ¯ä¸ªå¾ªçŽ¯ä¸­é’ˆå¯¹ä¸åŒçš„æ¡ä»¶å¯¹è‹¹æžœé›†åˆè¿›è¡Œç­›é€‰ã€‚ä½†æ˜¯æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨é«˜é˜¶å‡½æ•°å’Œå‡½æ•°ç±»åž‹ä¼˜é›…çš„å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼š 1data class AppleBean(val color:Int, val weight:Int) 123456789private fun filterApple(appleList: List&lt;AppleBean&gt;, predicate: (AppleBean) -&gt; Boolean): List&lt;AppleBean&gt; &#123; val destination = mutableListOf&lt;AppleBean&gt;() for (appleBean in appleList) &#123; if (predicate(appleBean))&#123; destination.add(appleBean) &#125; &#125; return destination&#125; ï¼ŒfilterAppleå‡½æ•°ä¸»è¦çš„åŠŸèƒ½åªæ˜¯éåŽ†é›†åˆï¼Œä»¥åŠæŠŠç¬¦åˆæ¡ä»¶çš„è‹¹æžœæ·»åŠ åˆ°æ–°çš„é›†åˆä¸­è¿”å›žï¼Œè‡³äºŽç­›é€‰çš„æ¡ä»¶ï¼ŒfilterAppleå‡½æ•°å¹¶ä¸çŸ¥é“ï¼Œè€Œæ˜¯å®Œå…¨å–å†³äºŽpredicateè¿™ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ï¼Œåªè¦predicateè¿”å›žtrueï¼Œåˆ™ç¬¦åˆæ¡ä»¶ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶åŠ¨æ€åœ°ä¼ å…¥ä¸åŒçš„è¿‡æ»¤è§„åˆ™ 123456789101112131415161718192021fun main() &#123; filterApple(appleList, ::filterColorPredicate) filterApple(appleList, ::filterWeightPredicate) filterApple(appleList, ::filterColorAndWeightPredicate)&#125;private fun filterColorPredicate(appleBean: AppleBean): Boolean = appleBean.color == 0xFF0000private fun filterWeightPredicate(appleBean: AppleBean): Boolean = appleBean.weight &gt; 6private fun filterColorAndWeightPredicate(appleBean: AppleBean): Boolean = appleBean.color == 0xFF0000 &amp;&amp; appleBean.weight &gt; 6private fun filterApple(appleList: List&lt;AppleBean&gt;, predicate: (AppleBean) -&gt; Boolean): List&lt;AppleBean&gt; &#123; val destination = mutableListOf&lt;AppleBean&gt;() for (appleBean in appleList) &#123; if (predicate(appleBean)) &#123; destination.add(appleBean) &#125; &#125; return destination&#125; è¿™â€¦å¤ªéº»çƒ¦äº†å§ï¼Œæˆ‘æ¯æ¬¡è°ƒç”¨é«˜é˜¶å‡½æ•°ï¼Œä¼ å…¥å‡½æ•°ç±»åž‹çš„æ—¶å€™ï¼Œè¿˜å¿…é¡»è¦å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åŽå†ä½¿ç”¨::å‡½æ•°åä¼ å…¥å—ï¼Ÿå…¶å®žä¸å¿…è¿™ä¹ˆéº»çƒ¦çš„ï¼ŒçŽ°åœ¨æˆ‘ä»¬å­¦ä¹ çš„åªä¸è¿‡æ˜¯å…¶ä¸­çš„ä¸€ç§æ–¹å¼è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬å°±è¦æ¥å­¦ä¹ æ›´åŠ ç®€å•çš„æ–¹å¼ï¼šåŒ¿åå‡½æ•°ã€‚ Lambdaè¡¨è¾¾å¼ä¸Žé«˜é˜¶å‡½æ•°çŽ°åœ¨å¤§å®¶å·²ç»å¯¹Lambdaè¡¨è¾¾å¼çš„å†™æ³•äº†å¦‚æŒ‡æŽŒäº†ï¼ŒçŽ°åœ¨æ˜¯æ—¶å€™æ¥çœ‹çœ‹Lambdaè¡¨è¾¾å¼å¦‚ä½•ä¸Žé«˜é˜¶å‡½æ•°é…åˆä½¿ç”¨äº†ã€‚è¿˜è®°å¾—ä¹‹å‰çš„é‚£ä¸ªç­›é€‰è‹¹æžœçš„ä¾‹å­å—ï¼Ÿæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒçš„åå­—å«ï¼šfilterAppleï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789private fun filterApple(appleList: List&lt;AppleBean&gt;, predicate: (AppleBean) -&gt; Boolean): List&lt;AppleBean&gt; &#123; val destination = mutableListOf&lt;AppleBean&gt;() for (appleBean in appleList) &#123; if (predicate(appleBean)) &#123; destination.add(appleBean) &#125; &#125; return destination&#125; è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æŽ¥æ”¶äº†ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ï¼Œåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨äº†ä¸¤ç§æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼š åŒå†’å·çš„æ–¹å¼ï¼š 12345fun main() &#123; filterApple(appleList, ::filterColorPredicate)&#125;private fun filterColorPredicate(appleBean: AppleBean): Boolean = appleBean.color == 0xFF0000 åŒ¿åå‡½æ•°çš„æ–¹å¼ï¼š 1filterApple(appleList, fun(appleBean: AppleBean): Boolean = appleBean.weight &gt; 6) å®Œæ•´çš„å†™æ³• 1filterApple(appleList, &#123; appleBean: AppleBean -&gt; appleBean.weight &gt; 6 &#125;) ç®€åŒ–çš„å†™æ³• æˆ‘ä»¬æ€Žä¹ˆçŸ¥é“å“ªä¸ªå‚æ•°éœ€è¦ä¼ å…¥Lambdaè¡¨è¾¾å¼å‘¢ï¼Ÿå½“ç„¶æ˜¯çœ‹è¢«è°ƒç”¨çš„è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„å®šä¹‰å•Šï¼Œè¿˜è®°çš„è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„æ ·å­å—ï¼Ÿ æˆ‘ä»¬æ€Žä¹ˆçŸ¥é“å“ªä¸ªå‚æ•°éœ€è¦ä¼ å…¥Lambdaè¡¨è¾¾å¼å‘¢ï¼Ÿå½“ç„¶æ˜¯çœ‹è¢«è°ƒç”¨çš„è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„å®šä¹‰å•Šï¼Œè¿˜è®°çš„è¿™ä¸ªé«˜é˜¶å‡½æ•°çš„æ ·å­å—ï¼Ÿ 123private fun filterApple(appleList: List&lt;AppleBean&gt;, predicate: (AppleBean) -&gt; Boolean): List&lt;AppleBean&gt; &#123; // ...&#125; æ˜¾ç„¶ç¬¬äºŒä¸ªå½¢å‚æ˜¯ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ï¼Œå¹¶ä¸”å·²ç»æ˜Žç¡®çš„æŒ‡å‡ºäº†å½¢å‚çš„å‡½æ•°ç±»åž‹ï¼š(AppleBean) -&gt; Booleanï¼ˆå®žé™…ä¸Šä¹Ÿå¿…é¡»æ˜Žç¡®æŒ‡å‡ºï¼Œå¦åˆ™æŠ¥é”™ï¼‰ã€‚æ ¹æ®æˆ‘ä»¬å‰é¢æ‰€å­¦ä¹ çš„çŸ¥è¯†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥çœç•¥Lambdaè¡¨è¾¾å¼ä¸­çš„å‚æ•°ç±»åž‹ï¼ŒKotlinä¼šæ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨æŽ¨æ–­ï¼š 1filterApple(appleList, &#123; appleBean -&gt; appleBean.weight &gt; 6 &#125;) å†ç®€åŒ–çš„å†™æ³• ç”±äºŽè¿™ä¸ªå‡½æ•°ç±»åž‹åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å¯ä»¥çœç•¥å‚æ•°çš„åå­—ï¼ŒKotlinä¼šä½¿ç”¨itä»£æ›¿ï¼Œè¿™åœ¨ä¹‹å‰çš„Lambdaè®²è§£ä¸­ï¼Œéƒ½æ˜¯è®²è¿‡çš„ï¼š 1filterApple(appleList, &#123; it.weight &gt; 6 &#125;) å†å†ç®€åŒ–çš„å†™æ³• ç¬¬ä¸€ä¸ªæ˜¯ï¼šå¦‚æžœLambdaè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å•ç‹¬æ”¾åœ¨è°ƒç”¨å‡½æ•°çš„æ‹¬å·åŽé¢ï¼š 1filterApple(appleList) &#123; it.weight &gt; 6 &#125; ç¬¬äºŒä¸ªæ˜¯ï¼šå¦‚æžœå‡½æ•°åªæŽ¥æ”¶ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ï¼Œæˆ‘ä»¬ä¼ å…¥Lambdaè¡¨è¾¾å¼æ—¶ï¼Œè¿žå‡½æ•°è°ƒç”¨çš„æ‹¬å·éƒ½å¯ä»¥åŽ»æŽ‰ï¼š 123456789fun main() &#123; test &#123; num1, num2 -&gt; // ... &#125;&#125;private fun test(block: (Int, Int) -&gt; Unit) &#123; // ...&#125; â€‹ ä½œè€…ï¼šHurryYu_YZHâ€‹ é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/8eb0623f08c6 é¡¹ç›®å®žä¾‹Login01.kt123456789101112131415161718//ä¼ å…¥ä¸€ä¸ªå…·åå‡½æ•°ï¼Œè¢«è°ƒç”¨åŽï¼ŒèŽ·å–å‚æ•°fun test(resModel: ResModel)&#123; println(resModel.int)&#125;class LoginModelImpl &#123; fun loginOptions( mobileNo: String, metaInfo: String, block: (model: ResModel) -&gt; Unit ) &#123; val model = ResModel(8) block(model) // block.invoke(model) è¿™æ ·å†™ä¹Ÿå¯ä»¥ &#125;&#125;class ResModel(val int: Int) 1234567 val loginModelImpl = LoginModelImpl() val responseModel = ResModel(0) loginModelImpl.loginOptions(&quot;&quot;,&quot;&quot;,::test) // å¯ä»¥çœ‹åˆ° fun test(resModel: ResModel)ä¹Ÿè¢«è°ƒç”¨,å¯ä»¥ç†è§£è¢«å›žè°ƒ// loginModelImpl.loginOptions(&quot;&quot;,&quot;&quot;,&#123;model: ResModel -&gt; model.toString() &#125;)// loginModelImpl.loginOptions(&quot;&quot;,&quot;&quot;,&#123;model -&gt; model.toString() &#125;) loginModelImpl.loginOptions(&quot;&quot;,&quot;&quot;,&#123;println(it.int)&#125;) //lambdaåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¼ å…¥å‚æ•°ä¹Ÿå¯ä»¥çœç•¥,&#123;&#125;é‡Œé¢ç”¨itä»£æ›¿// loginModelImpl.loginOptions(&quot;&quot;,&quot;&quot;,&#123;&#125;) // itå¯ä»¥ç”¨ä¹Ÿå¯ä»¥ä¸ç”¨ Login02.kt1234567891011121314151617181920fun main() &#123; loginAction(&quot;Jo1n&quot;, &quot;123456&quot;) &#123; if (it) &#123; println(&quot;ç™»å½•æˆåŠŸ&quot;) &#125; else println(&quot;ç™»å½•å¤±è´¥&quot;) &#125;&#125;fun loginAction(userName: String, pwd: String, loginResponseResult: (Boolean) -&gt; Unit) &#123; if (userName == null || pwd == null) return loginEngine(userName, pwd, loginResponseResult)&#125;fun loginEngine(userName: String, pwd: String, loginResponseResult: (Boolean) -&gt; Unit) &#123; if (&quot;Jon&quot; == userName &amp;&amp; &quot;123456&quot; == pwd) &#123; loginResponseResult(true) &#125; else loginResponseResult(false)&#125; https://www.bilibili.com/video/BV1xv411k7Dd?p=3&amp;spm_id_from=pageDriver updateFastClickTimeè¿™ä¸ªæ–¹æ³•å¾ˆå½¢è±¡, åŒ¿åå‡½æ•°çš„å‚æ•° ,æ˜¯å›žè°ƒæ—¶å€™ä¼ çš„ 123456789fun updateFastClickTime(callback: ((currentTime: Long, lastClickTime: Long) -&gt; Unit)? = null): Long &#123; val curClickTime = System.currentTimeMillis() callback?.invoke( curClickTime, lastClickTime ) lastClickTime = curClickTime return curClickTime&#125; getOrElse åŒ¿åå‡½æ•°çš„å‚æ•° ,æ˜¯å›žè°ƒæ—¶å€™ä¼ çš„,è¿”å›žTç±»åž‹. 12345678910111213inline fun &lt;T&gt; List&lt;T&gt;.getOrElse( index: Int, defaultValue:(Int) -&gt; T //è¿™ä¸ª (Int) -&gt; T çœ‹ä¸æ˜Žç™½): Tpublic inline fun &lt;T&gt; Array&lt;out T&gt;.getOrElse(index: Int, defaultValue: (Int) -&gt; T): T &#123; return if (index &gt;= 0 &amp;&amp; index &lt;= lastIndex) get(index) else defaultValue(index)&#125; https://bbs.csdn.net/topics/399173319","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"Dagger","slug":"Dagger","date":"2021-08-29T12:45:53.000Z","updated":"2023-01-02T03:31:39.066Z","comments":true,"path":"2021/08/29/Dagger/","link":"","permalink":"https://noteforme.github.io/2021/08/29/Dagger/","excerpt":"","text":"https://developer.android.google.cn/training/dependency-injection/dagger-basics https://www.bilibili.com/video/BV1hF411W7aj åŠ¨è„‘ æ³¨å…¥3è¦ç´  æ³¨å…¥æµç¨‹ æž„é€ æ–¹æ³•å¯¹è±¡æ³¨å…¥ åˆ›å»ºUser4å¯¹è±¡ 1class User4 @Inject constructor() åˆ›å»ºApplicationComponent4 1234@Componentinterface ApplicationComponent4 &#123; fun inject(mainActivity: MainActivity4?)&#125; æ‰§è¡Œæ³¨å…¥. 123456789101112class MainActivity4 : AppCompatActivity() &#123; var TAG = javaClass.simpleName @Inject lateinit var user:User4 override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_main3) DaggerApplicationComponent4.create().inject(this) Log.i(TAG, &quot;onCreate: user= $user&quot;) &#125;&#125; ç¬¬ä¸‰æ–¹å¯¹è±¡æ³¨å…¥(ä¸€)Module :Moduleå¯ä»¥æä¾›å¤šä¸ªå¯¹è±¡ï¼Œè¿”å›žç±»åž‹è¦ä¸ä¸€æ · ã€‚ Component :IOCå®¹å™¨, ç”¨æ¥æ³¨å…¥å¯¹è±¡,moduleé›†æˆåˆ°componentèº«ä¸Š,å†ç”±ComponentæŠŠå¯¹è±¡æ³¨å…¥åˆ°å¹³æ—¶ç”¨çš„Activityæˆ–è€…ç›®çš„ç±»èº«ä¸Šã€‚ ä¾èµ–çš„æŸ¥æ‰¾é¡ºåºä¸ºï¼šå…ˆæ‰¾@Moduleï¼Œå¦‚æžœæ‰¾åˆ°äº†å°±åœæ­¢ï¼Œå¦‚æžœæ‰¾ä¸åˆ°å°±åŽ»æ‰¾@Inject 1234567891011121314151617181920212223242526272829303132333435class HttpObject // ä¹Ÿå¯ç›´æŽ¥åœ¨è¿™é‡Œæä¾›å¯¹è±¡,ä¸ç”¨Module@Moduleclass HttpModule &#123; @Provides fun provideHttpObject():HttpObject&#123; // é’ˆå¯¹ç¬¬ä¸‰æ–¹sdkçš„å¯¹è±¡ï¼Œå¯ä»¥çµæ´»æä¾› return HttpObject() &#125;&#125;@Component(modules = [HttpModule::class, DataBaseModule::class])interface MyComponent &#123; //æ³¨å…¥ç‚¹ fun inject(activity: DaggerxxActivity)&#125;class DaggerxxActivity : AppCompatActivity() &#123; private val binding by lazy &#123; ActivityDaggerXxBinding.inflate(layoutInflater) &#125; private val TAG = &quot;DaggerxxActivity&quot; @Inject lateinit var httpObject: HttpObject @Inject lateinit var databaseObject: DatabaseObject override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(binding.root) DaggerMyComponent.create().inject(this) Log.i(TAG, &quot;onCreate: httpObject $httpObject databaseObject $databaseObject &quot;) &#125;&#125; https://juejin.cn/post/6844903850319544328 ç¬¬ä¸‰æ–¹å¯¹è±¡æ³¨å…¥(ä¸€)1class User6 1234567@Moduleclass AppModule6 &#123; @Provides fun provideUser(): User6 &#123; return User6() &#125;&#125; 12345@Singleton@Component(modules = [AppModule6::class])interface ApplicationComponent6 &#123; fun inject(mainActivity: MainActivity6)&#125; 1234567class MainActivity6 : AppCompatActivity() &#123; @Inject lateinit var user: User6 override fun onCreate(savedInstanceState: Bundle?) &#123; DaggerApplicationComponent6.create().inject(this) &#125;&#125; ä¾èµ–æ³¨å…¥æ¦‚å¿µ æž„é€ æ–¹æ³•æ³¨å…¥ Setteræ³¨å…¥(å­—æ®µæ³¨å…¥) 123456789101112131415161718192021public class Car &#123; Engine engine; //æž„é€ æ–¹æ³•æ³¨å…¥ public Car(Engine engine) &#123; this.engine = engine; &#125; // setteræ³¨å…¥(å­—æ®µæ³¨å…¥) public void setEngine(Engine engine) &#123; this.engine = engine; &#125; public void start()&#123; engine = new Engine(); engine.start(); &#125; &#125;class Engine&#123; public void start()&#123;&#125;&#125; IOCæ¡†æž¶ åŸºäºŽåå°„çš„æ–¹å¼å®žçŽ°ï¼š Spring IOC(åŠ¨æ€çš„è¿›è¡Œä¾èµ–å…³ç³»çš„å»ºç«‹) é™æ€æ–¹å¼ ï¼š ç¨‹åºåœ¨ç¼–è¯‘æ—¶å°±å·²ç»æä¾›å¥½äº†å»ºç«‹ä¾èµ–å…³ç³»çš„ç±»ã€‚Dagger2 ä¸¤ç§æ³¨å…¥æ–¹å¼ Daggeræ³¨å…¥æž„é€ æ–¹æ³•æ³¨å…¥æž„é€ æ–¹æ³•æž„é€ å®žä¾‹æ³¨å…¥æ­¥éª¤ ä½¿ç”¨ @Injectæ³¨è§£åœ¨æž„é€ æ–¹æ³•ä¸Šï¼›å°±æ˜¯å‘ŠçŸ¥Daggerå¯ä»¥é€šè¿‡æž„é€ æ–¹æ³•æ¥åˆ›å»ºå¹¶èŽ·å–åˆ°Userçš„å®žä¾‹ 12// 1.ä½¿ç”¨ @Injectæ³¨è§£åœ¨æž„é€ æ–¹æ³•ä¸Šï¼›å°±æ˜¯å‘ŠçŸ¥Daggerå¯ä»¥é€šè¿‡æž„é€ æ–¹æ³•æ¥åˆ›å»ºå¹¶èŽ·å–åˆ°Userçš„å®žä¾‹class User @Inject constructor() å½“ä½œIOCå®¹å™¨,æŠŠå¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­ 12345// 2. Componentå¯ä»¥å½“ä½œIOCå®¹å™¨,ç„¶åŽæŠŠå¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­@Componentinterface ApplicationComponent &#123; fun inject(daggerActivity: DaggerActivity?) //æŒ‡å®šDaggerActivityä½œä¸ºè¦æ³¨å…¥çš„ç›®æ ‡ç±»&#125; è®¾ç½®Injectæ³¨è§£ DaggerActivity.java 123//3.è®¾ç½®Injectæ³¨è§£@InjectUser user; æ‰§è¡Œæ³¨å…¥åŠ¨ä½œ 12345678910111213 //3.è®¾ç½®Injectæ³¨è§£@InjectUser user; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_dagger2);//4.æ‰§è¡Œæ³¨å…¥åŠ¨ä½œ DaggerApplicationComponent.create().inject(this);//DaggerApplicationComponentç›¸å½“äºŽDaggerApplicationçš„å®žçŽ°ç±» // DaggerApplicationComponent.create()èŽ·å–åˆ°å®žä¾‹,inject(this)æ³¨å…¥åˆ°Activityä¸­ Log.i(TAG, &quot;user: &quot; + user); &#125; Dagger Moduleæ³¨å…¥ç¬¬ä¸‰æ–¹æ¡†æž¶çš„ç±»ï¼Œå®žçŽ°ä¾èµ–æ³¨å…¥ï¼Œ ä¸Šé¢Useræ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ï¼Œ ç¬¬äºŒç§æ–¹å¼å‘ŠçŸ¥Dagger,å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•æ¥èŽ·å–åˆ°æ³¨å…¥å¯¹è±¡çš„å®žä¾‹ 1234567891011121314@Moduleclass NetModule &#123; fun providerUser(): User &#123; return User() &#125; //ç¬¬äºŒç§æ–¹å¼å‘ŠçŸ¥Dagger,å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•æ¥èŽ·å–åˆ°æ³¨å…¥å¯¹è±¡çš„å®žä¾‹ @Provides fun provideRetrofit(): Retrofit &#123; return Retrofit.Builder() .baseUrl(&quot;http://www.google.com&quot;) .build() &#125;&#125; compoent 123456&#x2F;&#x2F; 2. Componentå¯ä»¥å½“ä½œIOCå®¹å™¨,ç„¶åŽæŠŠå¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­&#x2F;&#x2F; è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´@Component(modules &#x3D; [NetModule::class]) &#x2F;&#x2F;æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»interface ApplicationComponent &#123; fun inject(daggerActivity: DaggerActivity?) &#x2F;&#x2F;æŒ‡å®šDaggerActivityä½œä¸ºè¦æ³¨å…¥çš„ç›®æ ‡ç±»&#125; DaggerActivity.java 1234567891011public class DaggerActivity extends AppCompatActivity &#123; String TAG = &quot;DaggerActivity&quot;; //3.è®¾ç½®Injectæ³¨è§£ @Inject Retrofit retrofit; Log.i(TAG, &quot;retrofit: &quot; + retrofit);&#125; Retrofitæ³¨å…¥12345public interface ApiService &#123; @GET(&quot;/user/info&quot;) Call&lt;String&gt; requestInfo();&#125; 12345678//Moduleå·²ç»çŸ¥é“æ€Žä¹ˆèŽ·å–retrofitå®žä¾‹//æŽ¥ç€åŒä¸€ä¸ªModuleä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½œä¸ºå‚æ•°ç›´æŽ¥ä¼ å…¥ ä½¿ç”¨// æ¯”å¦‚provideApiServiceéœ€è¦Retrofitå®žä¾‹ï¼Œä¼šä»Žå½“å‰å®¹å™¨æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰Retrofitå®žä¾‹// ç„¶åŽä»Žå½“å‰å®¹å™¨ç›´æŽ¥èŽ·å–@Providespublic ApiService provideApiService(Retrofit retrofit)&#123; return retrofit.create(ApiService.class);&#125; 12345@InjectApiService apiService;Log.i(TAG, &quot;apiService: &quot; +apiService); Moduleå·²ç»çŸ¥é“æ€Žä¹ˆèŽ·å–retrofitå®žä¾‹æŽ¥ç€åŒä¸€ä¸ªModuleä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½œä¸ºå‚æ•°ç›´æŽ¥ä¼ å…¥ ä½¿ç”¨// æ¯”å¦‚provideApiServiceéœ€è¦Retrofitå®žä¾‹ï¼Œä¼šä»Žå½“å‰å®¹å™¨æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰Retrofitå®žä¾‹// ç„¶åŽä»Žå½“å‰å®¹å™¨ç›´æŽ¥èŽ·å– 123456789101112131415161718192021222324252627@Modulepublic class NetModule &#123; //ç¬¬äºŒç§æ–¹å¼å‘ŠçŸ¥Dagger,å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•æ¥èŽ·å–åˆ°æ³¨å…¥å¯¹è±¡çš„å®žä¾‹ @Provides public Retrofit provideRetrofit()&#123; return new Retrofit.Builder() .baseUrl(&quot;http://www.google.com&quot;) .build(); &#125; //Moduleå·²ç»çŸ¥é“æ€Žä¹ˆèŽ·å–retrofitå®žä¾‹ //æŽ¥ç€åŒä¸€ä¸ªModuleä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½œä¸ºå‚æ•°ç›´æŽ¥ä¼ å…¥ ä½¿ç”¨ // æ¯”å¦‚provideApiServiceéœ€è¦Retrofitå®žä¾‹ï¼Œä¼šä»Žå½“å‰å®¹å™¨æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰Retrofitå®žä¾‹ // ç„¶åŽä»Žå½“å‰å®¹å™¨ç›´æŽ¥èŽ·å– @Provides public ApiService provideApiService(Retrofit retrofit)&#123; return retrofit.create(ApiService.class); &#125; @Provides public OkHttpClient provideOkHttpClient() &#123; return new OkHttpClient.Builder().build(); &#125;&#125; å±€éƒ¨å•ä¾‹å®žçŽ° ä½œç”¨åŸŸ å°†æŸä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸé™å®šä¸ºå…¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä¸‹é¢Userï¼ŒRetrofit ,ApiService, OkHttpClientå¯¹è±¡å®žä¾‹æŒ‡å®šäº†ä½œç”¨åŸŸæ˜¯Singleton,é‚£ä¹ˆè½½å…¥è¿™äº›å¯¹è±¡çš„ç»„å»ºApplicationComponent1ä¹Ÿå¿…é¡»ç”¨ä½œç”¨åŸŸæ˜¯Singleton. è¦ä¹ˆä¸ä½¿ç”¨ ä½œç”¨åŸŸ å³é»˜è®¤çš„ä½œç”¨åŸŸï¼Œ å¦‚æžœä½¿ç”¨çš„è¯ï¼Œå°±å¿…é¡»ä¿è¯ä»–ä»¬çš„ä½œç”¨åŸŸä¸€è‡´ã€‚ å±€éƒ¨å®žä¾‹112345678910111213141516171819202122232425262728293031323334353637383940414243//Daggeræ¨¡å—@Modulepublic class NetModule1 &#123; public User providerUser() &#123; return new User(); &#125; //ç¬¬äºŒç§æ–¹å¼å‘ŠçŸ¥Dagger,å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•æ¥èŽ·å–åˆ°æ³¨å…¥å¯¹è±¡çš„å®žä¾‹ //@Provides //public Retrofit provideRetrofit() &#123; // return new Retrofit.Builder() // .baseUrl(&quot;http://www.google.com&quot;) // .build(); //&#125; @Singleton @Provides public Retrofit provideRetrofit(OkHttpClient okHttpClient) &#123; return new Retrofit.Builder() .client(okHttpClient) .baseUrl(&quot;http://www.google.com&quot;) .build(); &#125; //Moduleå·²ç»çŸ¥é“æ€Žä¹ˆèŽ·å–retrofitå®žä¾‹ //æŽ¥ç€åŒä¸€ä¸ªModuleä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½œä¸ºå‚æ•°ç›´æŽ¥ä¼ å…¥ ä½¿ç”¨ // æ¯”å¦‚provideApiServiceéœ€è¦Retrofitå®žä¾‹ï¼Œä¼šä»Žå½“å‰å®¹å™¨æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰Retrofitå®žä¾‹ // ç„¶åŽä»Žå½“å‰å®¹å™¨ç›´æŽ¥èŽ·å– @Singleton @Provides public ApiService provideApiService(Retrofit retrofit) &#123; return retrofit.create(ApiService.class); &#125; //@Singletonæ˜¯Daggeræä¾›çš„ä¸€ç§ä½œç”¨åŸŸ // ä½œç”¨åŸŸå°±æ˜¯ç”¨æ¥ç®¡ç†Componentæ¥èŽ·å–å¯¹è±¡å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸ @Singleton @Provides public OkHttpClient provideOkHttpClient() &#123; return new OkHttpClient.Builder().build(); &#125;&#125; 12345678// 2. å½“ä½œIOCå®¹å™¨,æŠŠå¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­@Singleton // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´@Component(modules = &#123;NetModule1.class&#125;) //æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»public interface ApplicationComponent1 &#123; void inject(DaggerActivity daggerActivity);//æŒ‡å®šç›®æ ‡ç±» void inject(SecondActivity secondActivity);&#125; 1234567891011121314151617181920212223242526272829303132333435public class DaggerActivity extends AppCompatActivity &#123; String TAG = &quot;DaggerActivity&quot;; //3.è®¾ç½®Injectæ³¨è§£ @Inject User user; @Inject User user2; @Inject Retrofit retrofit; @Inject ApiService apiService; @Inject ApiService apiService2; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_dagger2); //4.æ‰§è¡Œæ³¨å…¥åŠ¨ä½œ DaggerApplicationComponent.create().inject(this);//DaggerApplicationComponentç›¸å½“äºŽDaggerApplicationçš„å®žçŽ°ç±» Log.i(TAG, &quot;user: &quot; + user); Log.i(TAG, &quot;user2: &quot; + user2); Log.i(TAG, &quot;retrofit: &quot; + retrofit); Log.i(TAG, &quot;apiService: &quot; +apiService); Log.i(TAG, &quot;apiService2: &quot; +apiService2); &#125;&#125; è¿è¡Œç»“æž„ 123452092-2092&#x2F;com.comm.util I&#x2F;DaggerActivity: user: com.comm.util.dagger.dn.di.User@2129cef2092-2092&#x2F;com.comm.util I&#x2F;DaggerActivity: user2: com.comm.util.dagger.dn.di.User@d97d3fc2092-2092&#x2F;com.comm.util I&#x2F;DaggerActivity: retrofit: retrofit2.Retrofit@d243a852092-2092&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService: retrofit2.Retrofit$1@a1fa0da2092-2092&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService2: retrofit2.Retrofit$1@a1fa0da å¯ä»¥çœ‹åˆ° user æ˜¯2ä¸ªå®žä¾‹ apiServiceç”¨äº†åŒä¸€ä¸ªå¯¹è±¡å®žä¾‹,æ‰€ä»¥å¯ä»¥çœ‹åˆ°å’ŒDaggerApplicationComponentç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸€è‡´ã€‚ å±€éƒ¨å®žä¾‹2æ·»åŠ ä¸€ä¸ªActivity 1234567891011121314151617public class SecondActivity extends AppCompatActivity &#123; String TAG = &quot;SecondActivity&quot;; @Inject ApiService apiService3; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_second2); //DaggerApplicationComponentç›¸å½“äºŽDaggerApplicationçš„å®žçŽ°ç±» DaggerApplicationComponent.create().inject(this); Log.i(TAG, &quot;apiService3: &quot; + apiService3); &#125;&#125; 1void inject(SecondActivity secondActivity); 1startActivity(new Intent(this,SecondActivity.class)); 1237410-7410&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService: retrofit2.Retrofit$1@a1fa0da7410-7410&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService2: retrofit2.Retrofit$1@a1fa0da2021-08-29 22:28:35.812 7410-7410&#x2F;com.comm.util I&#x2F;SecondActivity: apiService3: retrofit2.Retrofit$1@84eb79a ä¸åŒçš„DaggerApplicationComponentç»„ä»¶ï¼Œä¸åŒçš„å®žä¾‹ å…¨å±€å®žä¾‹ä¿è¯ç»„ä»¶å…¨å±€å®žä¾‹ Moduleä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸå’Œ ApplicationComponentä¿æŒä¸€è‡´ã€‚ MyApplication.java 12345static ApplicationComponent applicationComponent = DaggerApplicationComponent.create();public static ApplicationComponent getApplicationComponent() &#123; return applicationComponent;&#125; 1MyApplication.getApplicationComponent().inject(this); 1238044-8044&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService: retrofit2.Retrofit$1@516190b8044-8044&#x2F;com.comm.util I&#x2F;DaggerActivity: apiService2: retrofit2.Retrofit$1@516190b8044-8044&#x2F;com.comm.util I&#x2F;SecondActivity: apiService3: retrofit2.Retrofit$1@516190b ä½¿ç”¨ä½œç”¨åŸŸéµå¾ªçš„è§„åˆ™ ç»„ä»¶ApplicationComponentæŒ‡å®šäº†ä½œç”¨åŸŸ,ç»„ä»¶ä¸­çš„æ¨¡å—modules = {NetModule.class}ï¼Œä¹Ÿè¦æŒ‡å®šç›¸åŒçš„ä½œç”¨åŸŸã€‚ NetModuleä¸­çš„æ–¹æ³•è®¾ç½®@Singleton é‚£ä¹ˆApplicationComponentä¹Ÿå¿…é¡»è®¾ç½®@Singleton NetModuleä¸­çš„æ–¹æ³•è®¾ç½®@MyScope é‚£ä¹ˆApplicationComponentä¹Ÿå¿…é¡»è®¾ç½®@MyScope 12345678@Singleton // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼Œ@Component(modules = &#123;NetModule.class&#125;)public interface ApplicationComponent &#123; void inject(DaggerActivity daggerActivity);//æŒ‡å®šç›®æ ‡ç±» void inject(SecondActivity secondActivity);&#125; ç»„ä»¶ä¾èµ–å› ä¸º,ä¸€ä¸ªAcitivtyä¸èƒ½æœ‰ä¸¤ä¸ªç»„ä»¶ç›´æŽ¥æ³¨å…¥,ä¸å¦‚ApplicationComponent å’ŒUserComponent. ç»„å»ºä¾èµ–ä¸Žå­ç»„å»ºä¸»è¦è§£å†³äº†ä¸åŒä½œç”¨åŸŸæ—¶ç»„å»ºä¹‹é—´å¤ç”¨é—®é¢˜. åœ¨ä¸€ä¸ªç»„ä»¶ç½®é¡¶ä½œç”¨åŸŸåŽï¼Œå°±å·²ç»ç¡®å®šäº†è¯¥ç»„å»ºåˆ›å»ºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä½†æ˜¯æœ‰äº›å¯¹è±¡çš„å®žä¾‹å¯èƒ½ç”Ÿå‘½å‘¨æœŸæ›´çŸ­ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦å®šä¹‰æ–°çš„ç»„å»ºã€‚ æ–°ç»„ä»¶éœ€è¦ä½¿ç”¨åŽŸç»„å»ºçš„éƒ¨åˆ†èµ„æº ä¸¤ç§å®žçŽ°æ–¹å¼ ä¸º@Componentæ·»åŠ dependencieså‚æ•°,æŒ‡å®šè¯¥ç»„å»ºä¾èµ–æ–°çš„ç»„ä»¶ã€‚ ç›´æŽ¥ä½¿ç”¨@Subcomponentæ³¨è§£åˆ›å»ºæ–°çš„ç»„ä»¶ï¼Œå¹¶è£…è½½åˆ°çˆ¶ç»„ä»¶ä¸­ã€‚ https://www.bilibili.com/video/BV1Ki4y1A7hA?p=07 æ¥çœ‹æ–¹å¼ä¸€ å®žä¾‹éƒ¨åˆ†å…¨å±€å®žçŽ° Retrofit ,ApiService è¿›ç¨‹ä¸‹å…¨å±€, User2ç±» Activityå…¨å±€ MyScopeæ˜¯è‡ªå®šä¹‰çš„ä½œç”¨åŸŸï¼Œç”¨Singletonä¹Ÿå¯ä»¥ï¼Œä¸»è¦æ˜¯ä¿è¯ç»„å»ºä½œç”¨åŸŸå…¨å±€å•ä¾‹ï¼Œæ„Ÿè§‰å’Œhiltæœ‰ç‚¹ä¸åŒ 12345678910@MyScope // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´,å¦‚æžœApplicationComponentæ˜¯å…¨å±€çš„ï¼Œé‚£ä¹ˆå°±æ˜¯å…¨å±€çš„@Component(modules = &#123;NetModule2.class&#125;) //æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»public interface ApplicationComponent2 &#123; void inject(DaggerUserActivity daggerActivity);//æŒ‡å®šç›®æ ‡ç±» //dependencies = &#123;ApplicationComponent1.class&#125; Retrofit retrofit(); ApiService apiService();&#125; 123456@UserScope@Component(modules = [UserModule2::class], dependencies = [ApplicationComponent2::class])interface UserComponent2 &#123; fun inject(activity: DaggerUserActivity2) fun inject(activity: DaggerSecondActivity2)&#125; 12345678910111213141516171819202122232425262728293031323334353637383940@Moduleclass NetModule2 &#123; fun providerUser(): User2 &#123; return User2() &#125; //ç¬¬äºŒç§æ–¹å¼å‘ŠçŸ¥Dagger,å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•æ¥èŽ·å–åˆ°æ³¨å…¥å¯¹è±¡çš„å®žä¾‹ //@Provides //public Retrofit provideRetrofit() &#123; // return new Retrofit.Builder() // .baseUrl(&quot;http://www.google.com&quot;) // .build(); //&#125; @MyScope @Provides fun provideRetrofit(okHttpClient: OkHttpClient?): Retrofit &#123; return Retrofit.Builder() .client(okHttpClient) .baseUrl(&quot;http://www.google.com&quot;) .build() &#125; //Moduleå·²ç»çŸ¥é“æ€Žä¹ˆèŽ·å–retrofitå®žä¾‹ //æŽ¥ç€åŒä¸€ä¸ªModuleä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ä½œä¸ºå‚æ•°ç›´æŽ¥ä¼ å…¥ ä½¿ç”¨ // æ¯”å¦‚provideApiServiceéœ€è¦Retrofitå®žä¾‹ï¼Œä¼šä»Žå½“å‰å®¹å™¨æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰Retrofitå®žä¾‹ // ç„¶åŽä»Žå½“å‰å®¹å™¨ç›´æŽ¥èŽ·å– @MyScope @Provides fun provideApiService(retrofit: Retrofit): ApiService &#123; return retrofit.create(ApiService::class.java) &#125; //@Singletonæ˜¯Daggeræä¾›çš„ä¸€ç§ä½œç”¨åŸŸ // ä½œç”¨åŸŸå°±æ˜¯ç”¨æ¥ç®¡ç†Componentæ¥èŽ·å–å¯¹è±¡å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸ @MyScope @Provides fun provideOkHttpClient(): OkHttpClient &#123; return OkHttpClient.Builder().build() &#125;&#125; æ³¨æ„ApplicationComponent2è¦æä¾›å¯¹åº”Moduleçš„æ–¹æ³• 123456789@MyScope // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼ŒNetModuleè®¾ç½®@Singleton é‚£ä¹ˆApplicationComponentä¹Ÿå¿…é¡»è®¾ç½®@Component(modules = [NetModule2::class]) //æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»interface ApplicationComponent2 &#123; fun inject(daggerActivity: DaggerUserActivity) //æŒ‡å®šç›®æ ‡ç±» //dependencies = &#123;ApplicationComponent1.class&#125; fun retrofit(): Retrofit fun apiService(): ApiService fun provideContext(): Context&#125; 12345678910111213public class MyApplication extends Application &#123; static ApplicationComponent2 applicationComponent = DaggerApplicationComponent2.create(); private static MyApplication app; public static ApplicationComponent2 getApplicationComponent2() &#123; return applicationComponent; &#125; //Dagger public static MyApplication getInstance() &#123; return app; &#125;&#125; 1234567891011121314151617181920212223242526272829303132class DaggerUserActivity2 : AppCompatActivity() &#123; var TAG = javaClass.simpleName @Inject lateinit var user1: User2 @Inject lateinit var user2: User2 @Inject lateinit var apiService1: ApiService @Inject lateinit var apiService2: ApiService var userComponent: UserComponent2? = null override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_dagger_user) userComponent = DaggerUserComponent2.builder().applicationComponent2( MyApplication.getApplicationComponent2() ).build() userComponent?.inject(this) Log.i(TAG, &quot;user1: $user1&quot;) Log.i(TAG, &quot;user2: $user2&quot;) Log.i(TAG, &quot;apiService1: $apiService1&quot;) Log.i(TAG, &quot;apiService2: $apiService2&quot;) startActivity(Intent(this, DaggerSecondActivity2::class.java)) &#125;&#125; ä»Žç»“æžœä¸Š, Retrofit æ˜¯å…¨å±€å•ä¾‹ï¼ŒUser2å¯¹è±¡æ˜¯Activityå•ä¾‹ 123456399 10821-10821&#x2F;com.comm.util I&#x2F;DaggerUserActivity2: user1: com.comm.util.dagger.dn.di.User2@1da0e9b399 10821-10821&#x2F;com.comm.util I&#x2F;DaggerUserActivity2: user2: com.comm.util.dagger.dn.di.User2@1da0e9b399 10821-10821&#x2F;com.comm.util I&#x2F;DaggerUserActivity2: apiService1: retrofit2.Retrofit$1@12da238399 10821-10821&#x2F;com.comm.util I&#x2F;DaggerUserActivity2: apiService2: retrofit2.Retrofit$1@12da238438 10821-10821&#x2F;com.comm.util I&#x2F;DaggerSecondActivity2: user3: com.comm.util.dagger.dn.di.User2@8233396438 10821-10821&#x2F;com.comm.util I&#x2F;DaggerSecondActivity2: apiService3: retrofit2.Retrofit$1@12da238 æä¾›å…¨å±€Applicationdemoä»£ç æœ‰é—®é¢˜ NPR å­ç»„ä»¶æ–¹å¼ä¼˜åŠ¿ 12345ä¸‹é¢çš„interface ApplicationComponent3 çˆ¶ç»„ä»¶ä¸ç”¨å®šä¹‰ è¿™äº›æ–¹æ³• fun retrofit(): Retrofit fun apiService(): ApiService fun context(): Context 12345678// 2. å½“ä½œIOCå®¹å™¨,æŠŠå¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ç±»ä¸­@MyScope // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´ï¼ŒNetModuleè®¾ç½®@Singleton é‚£ä¹ˆApplicationComponentä¹Ÿå¿…é¡»è®¾ç½®@Component(modules = [SubComponentModule::class]) //æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»interface ApplicationComponent3 &#123; fun inject(daggerActivity: DaggerUserActivity) //æŒ‡å®šç›®æ ‡ç±» fun studentComponent():StudentComponent.Factory&#125; 12@Module(subcomponents = [StudentComponent::class])class SubComponentModule 1234567@Moduleclass StudentModule &#123; @Provides fun provideStudent(): Student &#123; return Student() &#125;&#125; 12345678910@Subcomponent(modules = [StudentModule::class])interface StudentComponent &#123; @Subcomponent.Factory interface Factory &#123; fun create(): StudentComponent &#125; fun inject(activity: DaggerSecondActivity3)&#125; 123456789101112131415class DaggerSecondActivity3 : AppCompatActivity() &#123; var TAG &#x3D; javaClass.simpleName @Inject lateinit var student: Student override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_second2) DaggerApplicationComponent3.create().studentComponent().create().inject(this) Log.i(TAG, &quot;student: $student &quot;) &#125;&#125; ç»“æžœåŒæ ·æ³¨å…¥æˆåŠŸ /com.comm.util I/DaggerSecondActivity3: student: com.comm.util.dagger.dn.di.Student@6c29d80 Bindsæ³¨å…¥æŽ¥å£å®žä¾‹ä¹‹å‰ç”¨çš„æ˜¯ moduleæ€» provideå¯¹è±¡æä¾›æ–¹å¼ ,æƒ³ä¸‹é¢è¿™ç§çš„ã€‚ 1234567@Moduleclass StudentModule &#123; @Provides fun provideStudent(): Student &#123; return Student() &#125;&#125; é€šè¿‡è¿™ç§æ–¹å¼æ³¨å…¥çš„ä¼˜åŠ¿æ˜¯,ç›´æŽ¥ä½¿ç”¨æŽ¥å£ï¼Œä¸éœ€è¦å…·ä½“çš„å®žçŽ°, AInterfaceImpl01æ”¹æˆAInterfaceImpl02å°±èƒ½æ”¹æ³¨å…¥å®žä¾‹ 12@Injectlateinit var aInterface: AInterface è¿˜ä¸€ä¸ªä¼˜åŠ¿æ˜¯å­ç»„ä»¶StudentComponentä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†æ³¨å…¥ 1234567891011@Subcomponent(modules = [StudentModule::class])interface StudentComponent &#123; @Subcomponent.Factory interface Factory &#123; fun create(): StudentComponent &#125; fun inject(activity: DaggerSecondActivity3) fun inject(activity: DaggerSecondActivity4)&#125; 12class AInterfaceImpl01 : AInterfaceclass AInterfaceImpl02 : AInterface 1234567891011121314151617181920@Moduleabstract class TestModule &#123; @Binds abstract fun bindAInterface(impl: AInterfaceImpl01): AInterface // AInterfaceImpl01æ”¹æˆAInterfaceImpl02å°±èƒ½æ”¹æ³¨å…¥ companion object &#123; @JvmStatic @Provides fun provideAInterfaceImpl01(): AInterfaceImpl01 &#123; return AInterfaceImpl01() &#125; @JvmStatic @Provides fun provideAInterfaceImpl02(): AInterfaceImpl02 &#123; return AInterfaceImpl02() &#125; &#125;&#125; 1234567@MyScope // è®¾ç½®ä½œç”¨åŸŸå’ŒApplicationComponentç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´@Component(modules = [SubComponentModule::class,TestModule::class]) //æ¨¡å—è£…è½½åˆ°ç»„ä»¶ä¸ŠåŽ»interface ApplicationComponent3 &#123; fun inject(daggerActivity: DaggerUserActivity) //æŒ‡å®šç›®æ ‡ç±» fun studentComponent():StudentComponent.Factory&#125; 123456789101112131415161718class DaggerSecondActivity4 : AppCompatActivity() &#123; var TAG = javaClass.simpleName @Inject lateinit var student: Student @Inject lateinit var aInterface: AInterface override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_second2) DaggerApplicationComponent3.create().studentComponent().create().inject(this) Log.i(TAG, &quot;student: $student &quot;) Log.i(TAG, &quot;aInterface: $aInterface &quot;) &#125;&#125; ç›¸åŒç±»åˆ›å»ºä¸åŒçš„å¯¹è±¡123456789101112131415@Moduleclass StudentModule &#123; @Named(&quot;student1&quot;) // @Named æ˜¯Qualifierçš„å®žçŽ° @Provides fun provideStudent(): Student &#123; return Student() &#125; @Named(&quot;student2&quot;) @Provides fun provideStudent2(): Student &#123; return Student(&quot;John&quot;) &#125;&#125; 1234567891011121314151617181920212223class DaggerSecondActivity4 : AppCompatActivity() &#123; var TAG = javaClass.simpleName @Named(&quot;student1&quot;) @Inject lateinit var student1: Student @Named(&quot;student2&quot;) @Inject lateinit var student2: Student override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_second2) DaggerApplicationComponent3.create().studentComponent().create().inject(this) Log.i(TAG, &quot;StudentQualifier1: $StudentQualifier1 &quot;) Log.i(TAG, &quot;StudentQualifier2: $StudentQualifier2 &quot;) &#125;&#125; ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ ‡è¯†,æ³¨è§£æ ‡è¯†ï¼Œé€šè¿‡æ ‡è¯†æ‰¾åˆ°å¯¹è±¡ 12345@Qualifier@Documented@Retention(RUNTIME)public @interface StudentQualifier1 &#123;&#125; 123456789101112131415161718192021222324252627282930313233@Moduleclass StudentModule &#123; @Provides fun provideStudent1(): Student &#123; return Student() &#125; @Named(&quot;student1&quot;) // @Named æ˜¯Qualifierçš„å®žçŽ° @Provides fun provideStudent(): Student &#123; return Student() &#125; @Named(&quot;student2&quot;) @Provides fun provideStudent2(): Student &#123; return Student(&quot;John&quot;) &#125; @StudentQualifier1 // @Named æ˜¯Qualifierçš„å®žçŽ° @Provides fun provideQualifierStudent(): Student &#123; return Student() &#125; @StudentQualifier2 @Provides fun provideQualifierStudent2(): Student &#123; return Student(&quot;Qualifier2 John&quot;) &#125;&#125; 123456789101112131415161718192021class DaggerSecondActivity4 : AppCompatActivity() &#123; var TAG = javaClass.simpleName @StudentQualifier1 @Inject lateinit var StudentQualifier1: Student @StudentQualifier2 @Inject lateinit var StudentQualifier2: Student override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_second2) DaggerApplicationComponent3.create().studentComponent().create().inject(this) Log.i(TAG, &quot;StudentQualifier1: $StudentQualifier1 &quot;) Log.i(TAG, &quot;StudentQualifier2: $StudentQualifier2 &quot;) Log.i(TAG, &quot;aInterface: $aInterface &quot;) &#125;&#125;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"kotlin-ext-func","slug":"kotlin-ext-func","date":"2021-08-22T05:27:15.000Z","updated":"2023-01-02T03:31:39.226Z","comments":true,"path":"2021/08/22/kotlin-ext-func/","link":"","permalink":"https://noteforme.github.io/2021/08/22/kotlin-ext-func/","excerpt":"","text":"æ‹“å±•å‡½æ•° 1234567891011//ç»™å­—ç¬¦ä¸²è¿½åŠ è‹¥å¹²ä¸ª !fun String.addExt(amount:Int=1)= this + &quot; !&quot;.repeat(amount)fun Any.easyPrint() = println(this) //é»˜è®¤æ˜¯public//fun Any.easyPrint() = println(this) //ä¸èƒ½å®šä¹‰ä¸¤æ¬¡fun main() &#123; println(&quot;abc&quot;.addExt(2)) &quot;abc&quot;.easyPrint() 15.easyPrint()&#125; ç±»åž‹åˆ«å typealias å¦‚æžœç±»åž‹åç§°å¤ªé•¿ï¼Œä½ å¯ä»¥å¦å¤–å¼•å…¥è¾ƒçŸ­çš„åç§°ï¼Œå¹¶ä½¿ç”¨æ–°çš„åç§°æ›¿ä»£åŽŸç±»åž‹åã€‚ https://www.kotlincn.net/docs/reference/type-aliases.html æ³›åž‹æ‹“å±•å‡½æ•° 1234567891011121314//ç»™å­—ç¬¦ä¸²è¿½åŠ è‹¥å¹²ä¸ª !fun String.addExt(amount:Int=1)= this + &quot; !&quot;.repeat(amount)fun &lt;T&gt; T.easyPrint():T&#123; println(this) return this&#125;fun main() &#123; &quot;abc&quot;.addExt(2).easyPrint() 15.easyPrint() 15.also &#123; &#125; val let = &quot;abc&quot;.let &#123; 50 &#125;&#125; Letæºç 12345678// &quot;abc&quot;è°ƒç”¨letï¼Œä¼ è¿›æ¥å‚æ•°å°±æ˜¯&quot;abc&quot;ç±»åž‹Tä¸ºString// letè¿”å›žlambdaè¡¨è¾¾å¼æ‰§è¡Œçš„ç»“æžœ 50 ç±»åž‹Rä¸ºIntpublic inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R &#123; contract &#123; callsInPlace(block, InvocationKind.EXACTLY_ONCE) &#125; return block(this)&#125; æ‹“å±•å±žæ€§ç»™Stringç±»æ·»åŠ ä¸€ä¸ªæ‹“å±• 12345678910111213141516//ç»™å­—ç¬¦ä¸²è¿½åŠ è‹¥å¹²ä¸ª !fun String.addExt(amount: Int = 1) = this + &quot; !&quot;.repeat(amount)val String.numVowels get() = count &#123; &quot;aeiou&quot;.contains(it) &#125;fun &lt;T&gt; T.easyPrint(): T &#123; println(this) return this&#125;fun main() &#123; &quot;abc&quot;.addExt(2).easyPrint() &quot;The people&#x27;s Republic of China&quot;.numVowels.easyPrint()&#125; å¯ç©ºç±»æ‹“å±•å¯ä»¥å®šä¹‰æ‹“å±•å‡½æ•°ç”¨äºŽå¯ç©ºç±»åž‹ï¼Œåœ¨å¯ç©ºç±»åž‹ä¸Šå®šä¹‰æ‹“å±•å‡½æ•°ï¼Œä½ å¯ä»¥ç›´æŽ¥åœ¨æ‹“å±•å‡½æ•°ä½“å†…å€Ÿé‰´å¯èƒ½å‡ºçŽ°çš„ç©ºå€¼é—®é¢˜ã€‚ 12345678//å°±æ˜¯StringåŽåŠ ?fun String?.printWithDefault(default:String) =print(this ?: default) //nullæ‰“å°é»˜è®¤å€¼,ä¸ä¸ºnull æ‰“å°è‡ªèº«fun main() &#123;// val nullableString:String? = null val nullableString:String? = &quot;hehe&quot; nullableString.printWithDefault(&quot;abc&quot;) // nullableString?å°±ä¸ä¼šè®¾ç½®é»˜è®¤å€¼&#125; Infix 12345678910infix fun String?.printWithDefault(default:String) =print(this ?: default) //nullæ‰“å°é»˜è®¤å€¼,ä¸ä¸ºnull æ‰“å°è‡ªèº«fun main() &#123;// val nullableString:String? = null val nullableString:String? = &quot;hehe&quot; nullableString.printWithDefault(&quot;abc&quot;) // nullableString?å°±ä¸ä¼šè®¾ç½®é»˜è®¤å€¼ nullableString printWithDefault &quot;abc&quot; // åŠ äº†infixå¯ä»¥ç®€åŒ–æˆè¿™æ · &quot;girl&quot;.to(18) mapOf(&quot;girl&quot; to 18)&#125; 12//toæ˜¯æ‹“å±•å‡½æ•°ï¼Œè¿”å›ž Pair&lt;A,B&gt;public infix fun &lt;A, B&gt; A.to(that: B): Pair&lt;A, B&gt; = Pair(this, that) å®šä¹‰æ‹“å±•æ–‡ä»¶1234567891011package com.util.kotin.extensionfun &lt;T&gt; Iterable&lt;T&gt;.randomTake(): T = this.shuffled().first()fun main() &#123; var list = listOf(&quot;Jack&quot;, &quot;Json&quot;, &quot;John&quot;) var set = listOf(&quot;Jack&quot;, &quot;Json&quot;, &quot;John&quot;) list.shuffled().first() list.randomTake()&#125; é‡å‘½åæ‹“å±•123456789import com.util.kotin.extension.randomTake as Randomizerfun main() &#123; var list = listOf(&quot;Jack&quot;, &quot;Json&quot;, &quot;John&quot;) var set = listOf(&quot;Jack&quot;, &quot;Json&quot;, &quot;John&quot;) list.shuffled().first()// list.randomTake() list.Randomizer()&#125; Applyæºç T.()ä»€ä¹ˆæ„æ€ è¿™ä¸ªå°±æ˜¯ å¸¦æŽ¥æ”¶è€…çš„å‡½æ•°å­—é¢é‡ï¼Œæ‹“å±•å‡½æ•°é‡Œè‡ªå¸¦äº†æŽ¥æ”¶è€…å¯¹è±¡çš„thiséšå¼è°ƒç”¨ 123456public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T &#123; block() return this&#125;T.() -&gt; Unit //T.() è¡¨ç¤º ä»»ä½•ç±»åž‹æ— å‚æ•°çš„æ‹“å±•å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥æ˜¯æ‹“å±•å‡½æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768import java.io.File//fun String.addExt(amount: Int = 1) = this + &quot; !&quot;.repeat(amount)fun String.addExt() = &quot; !&quot;.repeat(this.count())// æ³›åž‹çš„æ‹“å±•å‡½æ•°fun &lt;T&gt; T.easyPrint(): Unit = println(this)// T.apply è¿”å›žçš„è¿˜æ˜¯T// T.() -&gt; Unit ä¼ å…¥æ‹“å±•å‡½æ•°(æ³›åž‹), è€Œä¸æ˜¯æ™®é€šçš„åŒ¿åå‡½æ•°() -&gt; Unit ,æ²¡ç”¨æ³›åž‹Tå°±ä¼šæŠ¥é”™,Tè¡¨ç¤ºå¯ä»¥ç”¨ä»»æ„ç±»åž‹// æ‹“å±•å‡½æ•°é‡Œè‡ªå¸¦äº†æŽ¥æ”¶è€…å¯¹è±¡çš„thiséšå¼è°ƒç”¨// åŒ¿åå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ æ‹“å±•å‡½æ•°//æ™®é€šçš„åŒ¿åå‡½æ•° ()-&gt;Unit//åŒ¿åå‡½æ•°å†…éƒ¨thisæŒ‡å‘ä¸€ä¸ªFileå¯¹è±¡,éšå¼è°ƒç”¨ï¼ŒFile.() -&gt; Unitpublic inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T &#123; block() return this&#125;/*public inline fun &lt;File&gt; File.apply(block: File.() -&gt; Unit): File &#123; block() return this&#125;*/fun main() &#123; val file = File(&quot;xx&quot;).apply &#123; this.setReadable(true) //é»˜è®¤åˆä¸€ä¸ªå¯¹è±¡æŒ‡å‘File &#125; val file = File(&quot;xx&quot;).apply &#123; this.setReadable(true) //å¦‚æžœæ˜¯ () -&gt; Unitè¿™æ ·ï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™ï¼Œæ²¡æœ‰Fileç±»åž‹äº† &#125; //è¿™é‡Œåˆ†è§£ä¸€ä¸‹ //1. å®šä¹‰æ‹“å±•å‡½æ•° fun File.ext(): Unit &#123; setReadable(true) &#125; //2.ç»™blockå˜é‡èµ‹å€¼ val block = File::ext //3.ä¼ å…¥applyå‡½æ•° File(&quot;xxx&quot;).apply &#123; block &#125; doSomething &#123; goFix() &#125; &quot;abcefg&quot;.addExt().easyPrint() // &quot;abcefg&quot;è°ƒç”¨addExt() ,addExt()æœ‰ä¸€ä¸ªå¯¹è±¡æŒ‡å‘&quot;abcefg&quot; &quot;abc&quot;.apply &#123; &#125;&#125;fun doSomething(fix: () -&gt; Unit) &#123; fix&#125;fun goFix(): Unit &#123; &quot;goFxi&quot;&#125; æ¡ˆä¾‹LoginModel.kt1234RpcExpress.pack &#123; request.mobileNo = mobileNo request.metaInfo = metaInfo&#125; 12345678inline fun &lt;reified T : RpcRequest, reified R : RpcResult, reified E : RpcTask&gt; pack( build: RpcPackage&lt;T, R, E&gt;.() -&gt; Unit): RpcExecutor&lt;T, R, E&gt; &#123; val rpcPackage = RpcPackage&lt;T, R, E&gt;(T::class.java.newInstance(), R::class.java, E::class.java) build(rpcPackage) // ä¹Ÿå¯ä»¥å†™æˆ rpcPackage?.build() , ç»™rpcPackageèµ‹å€¼ return this.pack(rpcPackage)&#125; å‡½æ•°å¼ç¼–ç¨‹ å‡½æ•°ç±»åˆ« Mapå˜æ¢ 123456789val animals = listOf(&quot;zebra&quot;, &quot;giraffe&quot;, &quot;elephant&quot;, &quot;rat&quot;)val banies = animals.map &#123; animal -&gt; &quot;A baby $animal&quot;&#125;.map &#123; baby -&gt; &quot;$baby , with the cutest little tail ever!&quot;&#125;println(animals)println(banies) 12val animalsLength = animals.map &#123; it.length &#125;println(animalsLength) flatMapfaltMapå‡½æ•°æ“ä½œä¸€ä¸ªé›†åˆçš„é›†åˆï¼Œå°†å…¶ä¸­å¤šä¸ªé›†åˆä¸­çš„å…ƒç´ çš„åˆå¹¶åŽè¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„å•ä¸€é›†åˆã€‚ 12val result = listOf(listOf(1, 2, 3), listOf(4, 5, 6)).flatMap &#123; it &#125;println(result) è¿‡æ»¤ 1234val result = listOf(&quot;Jack&quot;,&quot;Jimmy&quot;,&quot;Rose&quot;,&quot;Tom&quot;).filter &#123; it.contains(&quot;J&quot;)&#125;println(result) 1234567val items = listOf( listOf(&quot;rea apple&quot;, &quot;green apple&quot;, &quot;blue apple&quot;), listOf(&quot;red fish&quot;, &quot;blue fish&quot;), listOf(&quot;yellow banana&quot;, &quot;teal banana&quot;))val redItems = items.flatMap &#123; it.filter &#123; it.contains(&quot;red&quot;) &#125; &#125;println(redItems) æ‰¾ç´ æ•°æ‰¾ç´ æ•°ï¼Œé™¤äº†1å’Œå®ƒæœ¬èº«ï¼Œä¸èƒ½è¢«ä»»ä½•æ•°æ•´é™¤çš„æ•°ã€‚ 1234567// é™¤äº†1å’Œå®ƒæœ¬èº«ï¼Œ ä¸æ¢¦è¢«ä»»ä½•æ•°æ•´é™¤çš„æ•°// å–æ¨¡ç­‰äºŽ0ï¼Œè¯´æ˜Žèƒ½å¤Ÿæ•´é™¤ï¼Œå¦‚æžœæ²¡æœ‰ä¸€ä¸ªæ˜¯ç­‰äºŽ0çš„ï¼Œè¯´æ˜Žæ˜¯ç´ æ•°ã€‚val numbers = listOf(7, 4, 8, 4, 3, 22, 18, 11)val primes = numbers.filter &#123; number -&gt; (2 until number).map &#123; number % it &#125;.none &#123; it == 0 &#125;&#125;println(primes) åˆå¹¶åˆå¹¶æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç¬¬ä¸‰å¤§ç±»å‡½æ•°ï¼Œåˆå¹¶èƒ½å°†ä¸åŒçš„é›†åˆåˆå¹¶æˆä¸€ä¸ªæ–°çš„é›†åˆã€‚è¿™ä¸ªæŽ¥æ”¶è€…æ˜¯åŒ…å«é›†åˆçš„çš„é›†åˆçš„flatmapå‡½æ•°ä¸åŒã€‚ zip12345val list1 = listOf(&quot;jon&quot;, &quot;john1&quot;, &quot;john2&quot;)val list2 = listOf(&quot;l1&quot;, &quot;l2&quot;, &quot;l3&quot;)val toMap = list1.zip(list2).toMap()println(toMap) {jon=l1, john1=l2, john2=l3} Foldå¯ä»¥ç”¨æ¥åˆå¹¶å€¼çš„åˆå¹¶å‡½æ•°æ˜¯foldï¼Œè¿™ä¸ªåˆå¹¶å‡½æ•°æŽ¥å—ä¸€ä¸ªåˆå§‹ç´¯åŠ å™¨å€¼ï¼ŒéšåŽä¼šæ ¹æ®åŒ¿åå‡½æ•°çš„ç»“æž„æ›´æ–°ã€‚ fold(0) accumulatorä»Ž0å¼€å§‹ 123456//å°†æ¯ä¸ªå…ƒç´ å€¼ ä¹˜ä»¥3åŽç´¯åŠ èµ·æ¥val foldedValue = listOf(1, 2, 3, 4).fold(0) &#123; accumulator, number -&gt; println(&quot;Accmulator value: $accumulator&quot;) accumulator + (number * 3)&#125;println(&quot;Find value: $foldedValue&quot;) Accmulator value: 0Accmulator value: 3Accmulator value: 9Accmulator value: 18Find value: 30 åºåˆ— 123456789101112131415161718192021//åˆ¤æ–­æ˜¯å¦æ˜¯ç´ æ•°fun Int.isPrime(): Boolean &#123; (2 until this).map &#123; if (this % it == 0) &#123; return false &#125; &#125; return true&#125;fun main() &#123; //äº§ç”Ÿå¤´1000ä¸ªå…ƒç´  //å‡å®š 0 - 5000ä¹‹å†…ï¼Œå¯ä»¥æ‰¾åˆ°1000ä¸ªå…ƒç´  val toList = (1..5009).toList().filter &#123; it.isPrime() &#125;.take(1000) println(toList.size) val oneThousandPrimes = generateSequence(2) &#123; value -&gt; value + 1 &#125;.filter &#123; it.isPrime() &#125;.take(1000) println(oneThousandPrimes.toList().size)&#125; äº’æ“ä½œæ€§ä¸Žå¯ç©ºæ€§ 1234567891011121314151617181920212223public class Jhava &#123; private int hitPoints = 3232320; public int getHitPoints() &#123; System.out.println(&quot;----hitPoints-----&quot;); return hitPoints; &#125; public String utterGreeting() &#123; return &quot;HELLO&quot;; &#125; public static void main(String[] args) &#123;// System.out.println(HeroKt.makeProclamation()); &#125; @Nullable public String determineFriends() &#123; return null; &#125;&#125; 123456789fun main() &#123; val adversary = Jhava() println(adversary.utterGreeting()) // determineFriends String! å¹³å°ç±»åž‹// val level = adversary.determineFriends().toLong()// level?.toLong() println(adversary.hitPoints)&#125; HELLOâ€”-hitPointsâ€”â€“3232320 @JvmNameæ³¨è§£æŒ‡å®šç¼–è¯‘ç±»çš„åå­—â€‹ 12345@file:JvmName(&quot;Hero&quot;)import senior.Jhavafun makeProclamation() = &quot;Greetings , beast!&quot; @JvmField 123456class SpellBook &#123; val spells = listOf(&quot;Magic Ms . L&quot;, &quot;Lay onHans&quot;) @JvmField val spells1 = listOf(&quot;Magic Ms . L&quot;, &quot;Lay onHans&quot;)&#125; 1234SpellBook spellBook = new SpellBook();List&lt;String&gt; spells = spellBook.getSpells();List&lt;String&gt; spells1 = spellBook.spells1; // ç›´æŽ¥ç”¨è¿™ä¸ªå±žæ€§åï¼Œä¸ç”¨åŠ getå‰ç¼€ @JvmOverloads12345//è°ƒç”¨è€…å¯ä»¥æŒ‡å®šè‹±é›„å·¦æ‰‹æˆ–å³æ‰‹æ‹¿ä»€ä¹ˆé£Ÿç‰©ï¼Œæˆ–è€…ä½¿ç”¨é»˜è®¤çš„é…ç½® - å·¦æ‰‹æ‹¿æµ†æžœï¼Œå³æ‰‹æ‹¿ç‰›è‚‰@JvmOverloadsfun handoverFood(leftHand: String = &quot;berries&quot;, rightHand: String = &quot;beef&quot;) &#123; println(&quot;Mmmm... you hand over some delicious $leftHand and $rightHand&quot;)&#125; å¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨é»˜è®¤å¯¹ç±»æ·»åŠ äº†é‡è½½ 123456789@JvmOverloadspublic static final void handoverFood(@NotNull String leftHand) &#123; handoverFood$default(leftHand, (String)null, 2, (Object)null);&#125;@JvmOverloadspublic static final void handoverFood() &#123; handoverFood$default((String)null, (String)null, 3, (Object)null);&#125; ä½†æ˜¯ä»£ç ä¸­æˆ‘èŽ·å–ä¸åˆ° Herokt ç±»ã€‚ https://www.bilibili.com/video/BV1wf4y1s7TG?p=144&amp;spm_id_from=pageDriver @JvmStatic@JvmFieldæ³¨è§£è¿˜èƒ½ç”¨æ¥ä»¥é™æ€æ–¹å¼æä¾›ä¼´ç”Ÿå¯¹è±¡é‡Œå®šä¹‰çš„å€¼ @JvmStaticæ³¨è§£çš„ä½œç”¨ç±»ä¼¼äºŽ@JvmField, å…è®¸ä½ ç›´æŽ¥è°ƒç”¨ä¼´ç”Ÿå¯¹è±¡é‡Œçš„å‡½æ•° 12345678class SpellBook &#123; companion object&#123; @JvmField val MAX_SPELL_COUNT = 10 fun getSpellbookGreeting() = println(&quot;I am the Great man!&quot;) &#125;&#125; åŠ äº†@JvmFieldæ³¨è§£ å°±ä¸ç”¨åŠ  Companionè°ƒç”¨ 12345//ä¼´ç”Ÿå¯¹è±¡SpellBook.Companion.getSpellbookGreeting();//æ·»åŠ @JvmField æ”¯æŒé™æ€è°ƒç”¨int maxSpellCount = SpellBook.MAX_SPELL_COUNT; @Throws â€‹ 123456public class Jhava &#123; public void extendHandInFriendship() throws IOException &#123; throw new IOException(); &#125;&#125; Javaå¼‚å¸¸ javaå¤„ç†123456try &#123; //åœ¨javaé‡Œé¢å¼ºåˆ¶ åœ¨ç¼–è¯‘å™¨å¤„ç†çš„å¼‚å¸¸ new Jhava().extendHandInFriendship();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; Javaå¼‚å¸¸ kotlinå¤„ç†Hero.kt 12345try &#123; adversary.extendHandInFriendship()&#125;catch (e:Exception)&#123; println(&quot;exception&quot;)&#125; kotlinå¼‚å¸¸Javaå¤„ç† Hero.kt 123fun acceptApology() &#123; throw IOException()&#125; 12345try &#123; HeroKt.acceptApology();&#125; catch (IOException e) &#123; //æŠ¥é”™ Exception &#x27;java.io.IOException&#x27; is never thrown in the corresponding try block e.printStackTrace();&#125; ç¼–è¯‘å™¨æŠŠkotlinè½¬æˆäº†Throwable 123public static final void acceptApology() &#123; throw (Throwable)(new IOException());&#125; æ‰€ä»¥catch Throwableå¼‚å¸¸æ²¡é—®é¢˜ 12345try &#123; HeroKt.acceptApology();&#125; catch (Throwable e) &#123; e.printStackTrace();&#125; æ·»åŠ throwsæ³¨è§£å¤„ç†1234@Throws(IOException::class)fun acceptApology1() &#123; throw IOException()&#125; 12345try &#123; HeroKt.acceptApology1();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; Function 12345//æ·»åŠ ä¸€ä¸ªtranslatorçš„å‡½æ•°ï¼ŒæŽ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²//å°†å…¶æ”¹ä¸ºå°å†™å­—é¢ï¼Œå†å¤§å†™ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæœ€åŽæ‰“å°ç»“æž„var translator : (String)-&gt;Unit = &#123; utterance: String -&gt; println(utterance.toLowerCase().capitalize())&#125; 12Function1&lt;String, Unit&gt; translator &#x3D; HeroKt.getTranslator();translator.invoke(&quot;TRUECE&quot;);","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"kotlin-object-generic","slug":"kotlin-object-generic","date":"2021-08-21T13:02:57.000Z","updated":"2023-01-02T03:31:39.283Z","comments":true,"path":"2021/08/21/kotlin-object-generic/","link":"","permalink":"https://noteforme.github.io/2021/08/21/kotlin-object-generic/","excerpt":"","text":"https://www.bilibili.com/video/BV1wf4y1s7TG?p=95 generic objectç›®å½•ä¸‹ å¯¹è±¡ç›¸å…³ç»§æ‰¿ç±»é»˜è®¤æ˜¯å°é—­çš„ï¼Œè¦è®©æŸä¸ªç±»å¼€æ”¾ç»§æ‰¿ï¼Œå¿…é¡»ä½¿ç”¨opemå…³é”®å­—ä¿®é¥°å®ƒ 123456789101112open class Product(val name:String) &#123; fun description() = &quot;Product: $name&quot; open fun load() = &quot;Nothing..&quot;&#125;class LuxuryProduct : Product(&quot;Luxury&quot;)&#123; override fun load() =&quot; LuxuryProduct loading&quot;&#125;fun main() &#123; val p : Product = LuxuryProduct() println(p.load())&#125; ç±»åž‹æ£€æµ‹ æ™ºèƒ½ç±»åž‹è½¬æ¢ 12345678println(p is Product)println(p is LuxuryProduct)println(p is File)if (p is LuxuryProduct)&#123; println((p as LuxuryProduct).special()) println(p.special()) //åªè¦è½¬æ¢ä¸€æ¬¡ï¼ŒåŽé¢å°±ç›´æŽ¥å¯ä»¥ä½¿ç”¨ï¼Œä¸ç”¨è½¬æ¢&#125; Kotlinå±‚æ¬¡æ— é¡»åœ¨ä»£ç é‡Œæ˜¾ç¤ºæŒ‡å®šï¼Œæ¯ä¸€ä¸ªç±»éƒ½ä¼šç»§æ‰¿ä¸€ä¸ªå…±åŒçš„å«åšAnyçš„è¶…ç±»ã€‚ Objectå…³é”®å­—å®šä¹‰ä¸€ä¸ªèƒ½äº§ç”Ÿä¸€ä¸ªå®žä¾‹çš„ç±»- å•ä¾‹ Objectå…³é”®å­—æœ‰ä¸‰ç§æ–¹å¼ å¯¹è±¡å£°æ˜Ž æœ‰åˆ©äºŽç»„ç»‡ä»£ç å’Œç®¡ç†çŠ¶æ€ï¼Œå°¤å…¶æ˜¯ç®¡ç†æ•´ä¸ªåº”ç”¨è¿è¡Œç”Ÿå‘½å‘¨æœŸå†…çš„æŸäº›ä¸€è‡´æ€§çŠ¶æ€ å¯¹è±¡è¡¨è¾¾å¼ 1234567891011open class Player &#123; open fun load() = &quot;loading nothing..&quot;&#125;fun main() &#123; //åŒ¿åå†…éƒ¨ç±»ï¼Œå®žä¾‹på¯¹è±¡ val p = object : Player()&#123; override fun load()= &quot;anonymous nothing..&quot; &#125; println(p.load())&#125; ä¼´ç”Ÿå¯¹è±¡ 123456789101112131415/** * åªè¦è°ƒç”¨load() æˆ–è€…å®žä¾‹åŒ–ConfigMap, è¿™ä¸ªcompanion objectæ‰ä¼šè¢«å®žä¾‹åŒ– * è€Œä¸”ä¹Ÿæ˜¯å•ä¾‹çš„ */class ConfigMap &#123; companion object&#123; private const val PATH = &quot;xxxx&quot; fun load() = File(PATH).readBytes() &#125;&#125;fun main() &#123; // ç±»ä¼¼äºŽJava static ConfigMap.load()&#125; ç±»ç›¸å…³åµŒå¥—ç±» åœ¨Javaä¸­ï¼Œå½“ä½ åœ¨å¦ä¸€ä¸ªç±»ä¸­å£°æ˜Žä¸€ä¸ªç±»æ—¶ï¼Œå®ƒä¼šé»˜è®¤å˜æˆå†…éƒ¨ç±»ã€‚è€Œåœ¨Kotlinä¸­ï¼Œæ²¡æœ‰æ˜¾å¼ä¿®é¥°ç¬¦çš„åµŒå¥—ç±»ä¸ŽJavaä¸­çš„staticåµŒå¥—ç±»æ˜¯ä¸€æ ·çš„ã€‚è¦æŠŠå®ƒå˜æˆä¸€ä¸ªå†…éƒ¨ç±»æ¥æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨çš„è¯éœ€è¦ä½¿ç”¨innerä¿®é¥°ç¬¦ã€‚ åµŒå¥—ç±»å’Œå†…éƒ¨ç±»åœ¨Javaä¸ŽKotlinä¸­çš„å¯¹åº”å…³ç³» ç±»Aåœ¨å¦ä¸€ä¸ªç±»Bä¸­å£°æ˜Ž åœ¨Javaä¸­ åœ¨Kotlinä¸­ åµŒå¥—ç±»ï¼ˆä¸å­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼‰ static class A class A å†…éƒ¨ç±»ï¼ˆå­˜å‚¨å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼‰ class A inner class A https://blog.csdn.net/weixin_41953808/article/details/112450204 https://juejin.cn/post/6844903910084182030 123456789101112class InnerClassTest &#123; class Equipment(var name:String)&#123; fun show() = println(&quot;equipment:$name&quot;) &#125; fun battle()&#123; &#125;&#125;fun main() &#123; InnerClassTest.Equipment(&quot;shap knife&quot;).show()&#125; åœ¨Kotlinä¸­å¼•ç”¨å¤–éƒ¨ç±»å®žä¾‹çš„è¯­æ³•ï¼Œéœ€è¦ä½¿ç”¨this@Outerä»ŽInnerç±»åŽ»è®¿é—®Outerç±»ï¼š 12345class Outer &#123; inner class Inner&#123; fun getOuterReference():Outer = this@Outer &#125;&#125; æ•°æ®ç±» æ•°æ®ç±»ä½¿ç”¨æ¡ä»¶ 12345678data class Coordinate(var x:Int,var y:Int) &#123; val isInBounds = x &gt; 0 &amp;&amp; y &gt; 0&#125;fun main() &#123; println(Coordinate(10,20)) println(Coordinate(10,20)==Coordinate(10,20)) //dataé»˜è®¤é‡å†™equalsæ–¹æ³•&#125; ç»“æžœ Coordinate(x=10, y=20) // è¯´æ˜Žé»˜è®¤æä¾›äº†toStringæ–¹æ³• é‡å†™äº†equalsæ–¹æ³• 123456789101112131415 public boolean equals(@Nullable Object var1) &#123; if (this != var1) &#123; if (var1 instanceof Coordinate) &#123; Coordinate var2 = (Coordinate)var1; if (this.x == var2.x &amp;&amp; this.y == var2.y) &#123; return true; &#125; &#125; return false; &#125; else &#123; return true; &#125; &#125;&#125; Copy æ³¨æ„:æ¬¡æž„é€ å‡½æ•°æ•°æ®ä¸ä¼šcopyè¿‡æ¥ 1234567891011121314151617181920212223242526272829data class Student( var name: String, val age: Int //age ä¸»æž„é€ å‡½æ•°é‡Œå£°æ˜Žçš„å±žæ€§)&#123; private val hobby = &quot;music&quot; val subject:String var score = 0 init &#123; println(&quot;initializing student&quot;) subject = &quot;english&quot; //Initåˆå§‹åŒ–å—é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ &#125; constructor(_name: String):this(_name,10)&#123; score = 10; //æ¬¡æž„é€ å‡½æ•°æ•°æ®ä¸ä¼šcopyè¿‡æ¥ &#125; override fun toString(): String &#123; return &quot;Student(name=&#x27;$name&#x27;, age=$age, hobby=&#x27;$hobby&#x27;, subject=&#x27;$subject&#x27;, score=$score)&quot; &#125;&#125;fun main() &#123; val s = Student(&quot;Jon&quot;) val copy = s.copy(&quot;girl&quot;) var s2 = s.copy(name = &quot;girl2&quot;, age = 18) println(s) println(s2) println(copy)&#125; è§£æž„å£°æ˜Ž æ™®é€šç±» 123456789class PlayerScore(val experience:Int,val level:Int) &#123; operator fun component1() = experience operator fun component2() = level&#125;fun main() &#123; val (x,y) = PlayerScore(10, 20) println(&quot;$x, $y&quot;)&#125; Dataæ•°æ®ç±» æ•°æ®ç±»è‡ªåŠ¨ç”Ÿæˆè§£æž„è¯­æ³• 1234567891011data class Coordinate(var x:Int,var y:Int) &#123; val isInBounds = x &gt; 0 &amp;&amp; y &gt; 0&#125;fun main() &#123; println(Coordinate(10,20)) println(Coordinate(10,20)==Coordinate(10,20)) val(x,y) = Coordinate(10,20) //æ•°æ®ç±»è‡ªåŠ¨ç”Ÿæˆè§£æž„è¯­æ³• println(&quot;$x , $y&quot;)&#125; è¿ç®—ç¬¦é‡è½½å¦‚æžœè¦å°†å†…ç½®è¿ç®—ç¬¦åº”ç”¨åœ¨è‡ªå®šä¹‰ç±»èº«ä¸Šï¼Œä½ å¿…é¡»é‡å†™è¿ç®—ç¬¦å‡½æ•°ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨è¯¥å¦‚ä½•æ“ä½œè‡ªå®šä¹‰ç±» 1234567891011data class Coordinate2(var x:Int,var y:Int) &#123; val isInBounds = x &gt; 0 &amp;&amp; y &gt; 0 operator fun plus(other:Coordinate2) = Coordinate2(x + other.x,y+other.y)&#125;fun main() &#123; val c1=Coordinate2(10, 20) val c2=Coordinate2(10, 20) println(c1 + c2)&#125; æžšä¸¾ç±»ç”¨æ¥å®šä¹‰å¸¸é‡é›†åˆç‰¹æ®Šçš„ç±» æžšä¸¾ç±»æ˜¯ä¸€ä¸ªå®žä¾‹ 1234567891011enum class Direction &#123; EAST, WEST, SOUTH, NORTH&#125;fun main() &#123; println(Direction.EAST) println(Direction.EAST is Direction)&#125; æžšä¸¾ç±»å®šä¹‰å‡½æ•°123456789101112131415enum class Direction2(private val coordinate: Coordinate) &#123; // æžšä¸¾é‡Œå¯ä»¥æœ‰å±žæ€§ EAST(Coordinate(1, 0)), //EAST()æ˜¯Direction2çš„å®žä¾‹ WEST(Coordinate(-1, 0)), SOUTH(Coordinate(-1, 0)), NORTH(Coordinate(1, 0)); //æžšä¸¾é‡Œå¯ä»¥å®šä¹‰å‡½æ•° fun updateCoordinate(playerCoordinate: Coordinate) = Coordinate(playerCoordinate.x + coordinate.x, playerCoordinate.y + coordinate.y)&#125;fun main() &#123; println(Direction2.EAST.updateCoordinate(Coordinate(10, 20)))&#125;//æ‰“å° 11 20 ä»£æ•°æ•°æ®ç±»åž‹å¯ä»¥ç”¨æ¥è¡¨ç¤ºä¸€ç»„å­ç±»åž‹çš„é—­é›†ï¼Œæžšä¸¾ç±»å°±æ˜¯ä¸€ç§ç®€å•çš„ADT å¯†å°ç±» class Qualified(val licenseId:String):LicenseStatus2() ä¿å­˜æ•°æ®ï¼Œå¦‚æžœç”¨emumç±» ä¼šå¾ˆéº»çƒ¦ 123456789101112131415161718192021222324//å¯†å°ç±»sealed class LicenseStatus2 &#123; //ä¸‹é¢3ä¸ªç±»éƒ½æ˜¯ å¯†å°ç±»çš„å­ç±» object UnQualified:LicenseStatus2() // æ²¡æœ‰å±žæ€§ ç”¨å•ä¾‹ï¼Œå¦åˆ™æ¯æ¬¡å¤Ÿæž„å»ºæ–°çš„å¯¹è±¡ object Learning:LicenseStatus2() class Qualified(val licenseId:String):LicenseStatus2() //å¯†å°ç±»çš„ç‰¹æ€§ ç”¨æ¥ä¿å­˜æ•°æ®,å¯èƒ½licenseIdä¸ä¸€æ ·ï¼Œæ‰€ä»¥ç”¨class&#125;class Driver2(var status: LicenseStatus2)&#123; fun checkLicense():String&#123; return when(status)&#123; is LicenseStatus2.UnQualified -&gt; &quot;æ²¡èµ„æ ¼&quot; is LicenseStatus2.Learning -&gt; &quot;åœ¨å­¦&quot; is LicenseStatus2.Qualified -&gt; &quot;æœ‰èµ„æ ¼ï¼Œé©¾é©¶è¯ç¼–å·: $&#123;((this.status as LicenseStatus2.Qualified).licenseId)&#125;&quot; &#125; &#125;&#125;fun main() &#123; val status1 = LicenseStatus2.Learning val status = LicenseStatus2.Qualified(&quot;2333003&quot;) // å¯ä»¥ç›´æŽ¥ä¼ é©¾é©¶è¯ç¼–å· val driver = Driver2(status) println(driver.checkLicense())&#125; æŽ¥å£ InterfaceTest.kt 123456789101112131415interface Movable&#123; var maxSpeed:Int var wheels:Int fun move(movable:Movable):String&#125;class Car(_name:String,override var wheels:Int=4):Movable&#123; override var maxSpeed: Int get() = TODO(&quot;Not yet implemented&quot;) set(value) &#123;&#125; override fun move(movable: Movable): String &#123; TODO(&quot;Not yet implemented&quot;) &#125;&#125; é»˜è®¤å®žçŽ°å¯ä»¥åœ¨æŽ¥å£é‡Œæä¾›é»˜è®¤å±žæ€§getteræ–¹æ³•å’Œå‡½æ•°å®žçŽ° 123456789101112131415161718interface Movable&#123; val maxSpeed:Int get() = (1..500).shuffled().last() var wheels:Int fun move(movable:Movable):String&#125;class Car(_name:String,override var wheels:Int=4):Movable&#123; override var maxSpeed: Int get() = super.maxSpeed set(value) &#123;&#125; override fun move(movable: Movable): String &#123; TODO(&quot;Not yet implemented&quot;) &#125;&#125; æŠ½è±¡ç±» 123456789101112abstract class Gun(val range: Int) &#123; abstract fun pullTrigger(): String protected fun doSomething() &#123; println(&quot;doSomething&quot;) &#125;&#125;class AK47(val price: Int) : Gun(range = 500)&#123; override fun pullTrigger(): String &#123; TODO() &#125;&#125; æ³›åž‹å®šä¹‰æ³›åž‹ç±» magicBox1.kt 12345678910class MagicBox&lt;T&gt;(item:T)&#123; protected var subject:T = item&#125;class Boy(val name:String,val age:Int)class Dog(val weight:Int)fun main() &#123; val box1 = MagicBox(Boy(&quot;John&quot;, 20)) val box2 = MagicBox(Dog( 20))&#125; æ³›åž‹å‡½æ•° æ³›åž‹å‚æ•°ä¹Ÿå¯ä»¥ç”¨äºŽå‡½æ•°ã€‚ å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨äºŽèŽ·å–å…ƒç´ ï¼Œå½“ä¸”ä»…å½“MagicBoxå¯ç”¨æ—¶ï¼Œæ‰èƒ½èŽ·å–å…ƒç´ ã€‚ magicBox2.kt 12345678910111213141516171819class MagicBox&lt;T&gt;(item: T) &#123; var available = false protected var subject: T = item fun fetch(): T? &#123; // æ³›åž‹å‡½æ•° return subject.takeIf &#123; available &#125; //å½“available =trueï¼Œè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ &#125;&#125;class Boy(val name: String, val age: Int)class Dog(val weight: Int)fun main() &#123; val box1 = MagicBox(Boy(&quot;John&quot;, 20)) val box2 = MagicBox(Dog(20)) box1.available = true box1.fetch()?.run &#123; println(&quot;you find $name&quot;) &#125;&#125; å¤šæ³›åž‹å‚æ•°magicBox3.kt 12345678910111213141516171819202122232425262728293031class MagicBox&lt;T&gt;(item: T) &#123; var available = false protected var subject: T = item fun fetch(): T? &#123; return subject.takeIf &#123; available &#125; //å½“available =trueï¼Œè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ &#125; // return Rç¼©å†™ // ä¸šåŠ¡ï¼ŒæŠŠå…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œé­”ç›’é‡Œæ”¾çš„æ˜¯ç”·å­©ï¼Œå–å‡ºæ¥ï¼Œå˜æˆç”·äºº //ä¼ å…¥subjectModfunctionæ˜¯åŒ¿åå‡½æ•°ç±»åž‹ (T)-&gt;(R), è¿™ä¸ªåŒ¿åå‡½æ•°ä¼ å…¥çš„æ˜¯ T è¿”å›žçš„æ˜¯R,fetchæ‰§è¡Œè¿”å›žçš„æ˜¯Rç±»åž‹ fun &lt;R&gt; fetch(subjectModFunction: (T) -&gt; R): R? &#123; return subjectModFunction(subject).takeIf &#123; available &#125; &#125;&#125;class Boy(val name: String, val age: Int)class Man(val name: String, val age: Int)class Dog(val weight: Int)fun main() &#123; val box1 = MagicBox(Boy(&quot;John&quot;, 20)) val box2 = MagicBox(Dog(20)) box1.available = true box1.fetch()?.run &#123; println(&quot;you find $name&quot;) &#125; val fetch = box1.fetch &#123; Man(it.name, it.age.plus(15)) // Boy è½¬æˆManäº† &#125;&#125; æ³›åž‹ç±»åž‹çº¦æŸç¡®ä¿MagicBoxåªèƒ½è£…æŒ‡å®šç±»åž‹çš„ç‰©å“ï¼Œ å¦‚Humanç±»åž‹ï¼Œå’‹å¼„? magicBox4.kt 1234567891011121314151617181920212223242526272829303132class MagicBox4&lt;T:Human&gt;(item: T) &#123; //è¿™é‡Œæ·»åŠ çº¦æŸ var available = false protected var subject: T = item fun fetch(): T? &#123; return subject.takeIf &#123; available &#125; //å½“available =trueï¼Œè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ &#125; // return Rç¼©å†™ // ä¸šåŠ¡ï¼ŒæŠŠå…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œé­”ç›’é‡Œæ”¾çš„æ˜¯ç”·å­©ï¼Œå–å‡ºæ¥ï¼Œå˜æˆç”·äºº //ä¼ å…¥subjectModfunctionæ˜¯åŒ¿åå‡½æ•°ç±»åž‹ (T)-&gt;(R), è¿™ä¸ªåŒ¿åå‡½æ•°ä¼ å…¥çš„æ˜¯ T è¿”å›žçš„æ˜¯R,fetchæ‰§è¡Œè¿”å›žçš„æ˜¯Rç±»åž‹ fun &lt;R&gt; fetch(subjectModFunction: (T) -&gt; R): R? &#123; return subjectModFunction(subject).takeIf &#123; available &#125; &#125;&#125;open class Human(val age: Int)class Boy(val name: String, age: Int) : Human(age)class Man(val name: String, age: Int):Human(age)class Dog(val weight: Int)fun main() &#123; val box1 = MagicBox4(Boy(&quot;John&quot;, 20))// val box2 = MagicBox4(Dog(20)) //å› ä¸ºçº¦æŸç±»åž‹ï¼Œå¯¼è‡´è¿™é‡Œä¼šæŠ¥é”™ box1.available = true box1.fetch()?.run &#123; println(&quot;you find $name&quot;) &#125; val fetch = box1.fetch &#123; Man(it.name, it.age.plus(15)) &#125;&#125; varargå…³é”®å­—ä¸Žgetå‡½æ•°MagicBoxèƒ½å­˜æ”¾ä»»ä½•ç±»åž‹çš„Humanå®žä¾‹ï¼Œä½†ä¸€æ¬¡åªèƒ½æ”¾ä¸€ä¸ªï¼Œå¦‚æžœè¦å­˜æ”¾å¤šä¸ªå®žä¾‹å‘¢ï¼Ÿ 12345678910111213141516171819202122232425262728293031class MagicBox&lt;T : Human&gt;(vararg item: T) &#123; var available = false protected var subject: Array&lt;out T&gt; = item //å¯å˜å‚æ•° å¿…é¡»å†™out fun fetch(index: Int): T? &#123; return subject[index].takeIf &#123; available &#125; //å½“available =trueï¼Œè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ &#125; // return Rç¼©å†™ // ä¸šåŠ¡ï¼ŒæŠŠå…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œé­”ç›’é‡Œæ”¾çš„æ˜¯ç”·å­©ï¼Œå–å‡ºæ¥ï¼Œå˜æˆç”·äºº //ä¼ å…¥subjectModfunctionæ˜¯åŒ¿åå‡½æ•°ç±»åž‹ (T)-&gt;(R), è¿™ä¸ªåŒ¿åå‡½æ•°ä¼ å…¥çš„æ˜¯ T è¿”å›žçš„æ˜¯R,fetchæ‰§è¡Œè¿”å›žçš„æ˜¯Rç±»åž‹ fun &lt;R&gt; fetch(index: Int, subjectModFunction: (T) -&gt; R): R? &#123; return subjectModFunction(subject[index]).takeIf &#123; available &#125; &#125;&#125;open class Human(val age: Int)class Boy(val name: String, age: Int) : Human(age)class Man(val name: String, age: Int) : Human(age)class Dog(val weight: Int)fun main() &#123; val box1 = MagicBox(Boy(&quot;John&quot;, 20), Boy(&quot;Jack&quot;, 20), Boy(&quot;Jon&quot;, 20)) box1.available = true box1.fetch(1)?.run &#123; println(&quot;you find $name&quot;) &#125; val fetch = box1.fetch(2) &#123; Man(it.name, it.age.plus(15)) &#125;&#125; []æ“ä½œç¬¦è¿ç®—ç¬¦é‡è½½ 12345678910111213141516171819202122232425262728293031323334class MagicBox&lt;T : Human&gt;(vararg item: T) &#123; var available = false protected var subject: Array&lt;out T&gt; = item //å¯å˜å‚æ•° å¿…é¡»å†™out fun fetch(index: Int): T? &#123; return subject[index].takeIf &#123; available &#125; //å½“available =trueï¼Œè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ &#125; // return Rç¼©å†™ // ä¸šåŠ¡ï¼ŒæŠŠå…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œé­”ç›’é‡Œæ”¾çš„æ˜¯ç”·å­©ï¼Œå–å‡ºæ¥ï¼Œå˜æˆç”·äºº //ä¼ å…¥subjectModfunctionæ˜¯åŒ¿åå‡½æ•°ç±»åž‹ (T)-&gt;(R), è¿™ä¸ªåŒ¿åå‡½æ•°ä¼ å…¥çš„æ˜¯ T è¿”å›žçš„æ˜¯R,fetchæ‰§è¡Œè¿”å›žçš„æ˜¯Rç±»åž‹ fun &lt;R&gt; fetch(index: Int, subjectModFunction: (T) -&gt; R): R? &#123; return subjectModFunction(subject[index]).takeIf &#123; available &#125; &#125; operator fun get(index: Int): T? = subject[index]?.takeIf &#123; available &#125; //è¿ç®—ç¬¦é‡è½½&#125;open class Human(val age: Int)class Boy(val name: String, age: Int) : Human(age)class Man(val name: String, age: Int) : Human(age)class Dog(val weight: Int)fun main() &#123; val box1 = MagicBox(Boy(&quot;John&quot;, 20), Boy(&quot;Jack&quot;, 20), Boy(&quot;Jon&quot;, 20)) box1.available = true box1.fetch(1)?.run &#123; println(&quot;you find $name&quot;) &#125; val fetch = box1.fetch(2) &#123; Man(it.name, it.age.plus(15)) &#125; box1[0] //è¿ç®—ç¬¦é‡è½½åŽ é‡å†™getï¼Œå°±èƒ½è¿™æ ·æ“ä½œäº†&#125; invariant ä¸å˜å¦‚æžœæ³›åž‹ç±»å³å°†æ³›åž‹ç±»åž‹ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œåˆå°†æ³›åž‹ç±»åž‹ä½œä¸ºå‡½æ•°çš„è¾“å‡ºï¼Œé‚£ä¹ˆå³ä¸ç”¨outä¹Ÿä¸ç”¨in. 1234interface ProductionConsumer&lt;T&gt; &#123; fun product(): T fun consume(item: T)&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859// outinterface Production&lt;out T&gt; &#123; fun product(): T&#125;// ininterface Consumer&lt;in T&gt; &#123; // fun consume(item:T):T //Type parameter T is declared as &#x27;in&#x27; but occurs in &#x27;out&#x27; position in type T fun consume(item: T)&#125;//ä¸å˜interface ProductionConsumer&lt;T&gt; &#123; fun product(): T fun consume(item: T)&#125;open class Foodopen class FastFood:Food()open class Burger :FastFood()//ç”Ÿäº§è€…class FoodStore : Production&lt;Food&gt;&#123; override fun product(): Food &#123; println(&quot;Product food&quot;) return Food() &#125;&#125;class FastFoodStore : Production&lt;FastFood&gt;&#123; override fun product(): FastFood &#123; println(&quot;Product FastFood&quot;) return FastFood() &#125;&#125;class BurgerFoodStore : Production&lt;Burger&gt;&#123; override fun product(): Burger &#123; println(&quot;Product Burger&quot;) return Burger() &#125;&#125;//æ¶ˆè´¹è€…class EveryBody : Consumer&lt;Food&gt;&#123; override fun consume(item: Food) &#123; println(&quot;Eat food.&quot;) &#125;&#125;class ModernPeople : Consumer&lt;FastFood&gt;&#123; override fun consume(item: FastFood) &#123; println(&quot;Eat fastFood&quot;) &#125;&#125;class AmericanPeople : Consumer&lt;Burger&gt;&#123; override fun consume(item: Burger) &#123; println(&quot;Eat Burger&quot;) &#125;&#125; Outç”Ÿäº§123interface Production&lt;out T&gt; &#123; fun product(): T&#125; å­ç±»æ³›åž‹å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»æ³›åž‹å¯¹è±¡ å¦‚ ä¸‹é¢production2 java. T extends Food ç­‰äºŽkotlin T : Food æ³›åž‹æœ‰ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥ç›´æŽ¥èµ‹å€¼ï¼Œjavaåšä¸åˆ°,åªèƒ½å¼ºè½¬ ArrayList list = new ArrayList(); // javaé‡Œé¢è¿™ç§å†™æ³•æŠ¥é”™ javaåªæœ‰ ? super Food å’Œ ? extends Food , æ²¡æœ‰å¯¹æ³›åž‹T , in outè¿™ç§æ“ä½œ 123456fun main() &#123; val production1 : Production&lt;Food&gt; = FoodStore() // ç†è§£æ—¶ï¼Œåˆ«çœ‹æ–¹æ³•åªçœ‹ç±»å°±å¯ä»¥äº†ï¼Œçˆ¶å­ç±»å…³ç³» //å­ç±»æ³›åž‹å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»æ³›åž‹å¯¹è±¡ï¼Œç”¨out val production2 : Production&lt;Food&gt; = FastFoodStore() // å°±æ˜¯å› ä¸ºæœ‰ outï¼Œoutåˆ é™¤å°±æŠ¥é”™, javaè¿™ç§å†™æ³•ç›´æŽ¥æŠ¥é”™&#125; ä¸ºä»€ä¹ˆéœ€è¦ out å¦‚æžœæ³›åž‹æœ‰ç»§æ‰¿å…³ç³»ï¼Œå¯ä»¥ç›´æŽ¥èµ‹å€¼, Javaåªèƒ½ç”¨å…·ä½“ç±» 123456public class GenericTypeTest &#123; public static void main(String[] args) &#123; //Stringæ˜¯CharSequenceçš„å­ç±»// ArrayList&lt;CharSequence&gt; list = new ArrayList&lt;String&gt;(); // javaé‡Œé¢è¿™ç§å†™æ³•æŠ¥é”™ &#125;&#125; In è¾“å…¥ 1234interface Consumer&lt;in T&gt; &#123; // fun consume(item:T):T //Type parameter T is declared as &#x27;in&#x27; but occurs in &#x27;out&#x27; position in type T fun consume(item: T)&#125; çˆ¶ç±»æ³›åž‹å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™å­ç±»æ³›åž‹å¯¹è±¡ ï¼Œ ç”¨in 12345678910fun main()&#123; //çˆ¶ç±»æ³›åž‹å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™å­ç±»æ³›åž‹å¯¹è±¡ ï¼Œ ç”¨in val consumer1:Consumer&lt;Burger&gt; = EveryBody()// val consumer2:Consumer&lt;Food&gt; = ModernPeople()//Required:Consumer&lt;Food&gt; Found : ModernPeople javaé‡Œé¢å¿…é¡»è¦å…·ä½“çš„ç±»åž‹,åƒä¸Šé¢çš„ArrayList val consumer2:Consumer&lt;Burger&gt; = ModernPeople() consumer2.consume(Burger())// consumer2.consume(Food()) val consumer3:Consumer&lt;Burger&gt; = AmericanPeople()&#125; Reified 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class MagicBox&lt;T : Human&gt;() &#123; // è¿™é‡Œçš„Tç±»åž‹æ²¡ç”¨ //éšæœºäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æžœä¸æ˜¯æŒ‡å®šç±»åž‹çš„å¯¹è±¡ï¼Œå°±é€šè¿‡backupå‡½æ•°ç”Ÿæˆä¸€ä¸ªæŒ‡å®šç±»åž‹çš„å¯¹è±¡// fun &lt;T&gt; randomOrBackup(backup: () -&gt; T): T &#123; // backup: ()-&gt;T å‡½æ•° å’ŒrandomOrBackupè¿”å›žçš„éƒ½æ˜¯Tç±»åž‹// val items = listOf(Boy(&quot;jocnk&quot;, 20), Man(&quot;john&quot;, 20))// val random = items.shuffled().first()// return if (random is T) &#123;// random// &#125; else &#123;// backup()// &#125;// &#125; //éšæœºäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æžœä¸æ˜¯æŒ‡å®šç±»åž‹Tçš„å¯¹è±¡ï¼Œå°±é€šè¿‡backupå‡½æ•°ç”Ÿæˆä¸€ä¸ªæŒ‡å®šç±»åž‹Tçš„å¯¹è±¡ // æ ¹æ®ä¼ è¿›æ¥çš„Manå¯¹è±¡ç±»åž‹ï¼ŒæŽ¨æ–­Tç±»åž‹ä¸ºMan // backup: ()-&gt;T å‡½æ•° å’ŒrandomOrBackupè¿”å›žçš„éƒ½æ˜¯Tç±»åž‹ //inline reifiedä¸€èµ·ä½¿ç”¨ inline fun &lt;reified T&gt; randomOrBackup(backup: () -&gt; T): T &#123; val items = listOf(Boy(&quot;jocnk&quot;, 20), Man(&quot;john&quot;, 20)) val random = items.shuffled().first() println(random) return if (random is T) &#123; random &#125; else &#123; backup() &#125; &#125;&#125;fun main() &#123; val box1: MagicBox&lt;Man&gt; = MagicBox() // è¿™é‡ŒTç±»åž‹ä¸èµ·ä½œç”¨ // ç”±backupå‡½æ•°æŽ¨æ–­å‡ºæ¥Tçš„ç±»åž‹ val subject = box1.randomOrBackup &#123; Man(&quot;Jimmy&quot;, 28) &#125; //æ ¹æ®ä¼ è¿›æ¥çš„Manå¯¹è±¡ç±»åž‹ï¼ŒæŽ¨æ–­Tç±»åž‹ä¸ºMan println(subject)&#125;open class Human(val age: Int)class Boy(val name: String, age: Int) : Human(age)&#123; override fun toString(): String &#123; return &quot;Boy(name=&#x27;$name&#x27;)&quot; &#125;&#125;class Man(val name: String, age: Int) : Human(age)&#123; override fun toString(): String &#123; return &quot;Man(name=&#x27;$name&#x27;)&quot; &#125;&#125;","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"kotlin-collection-class","slug":"kotlin-collection-class","date":"2021-08-21T08:48:52.000Z","updated":"2023-01-02T03:31:39.214Z","comments":true,"path":"2021/08/21/kotlin-collection-class/","link":"","permalink":"https://noteforme.github.io/2021/08/21/kotlin-collection-class/","excerpt":"","text":"é›†åˆListList.kt Liståˆ›å»ºä¸Žå…ƒç´ èŽ·å– 1234val list = listOf(&quot;girl1&quot;, &quot;girl2&quot;, &quot;girl3&quot;)println(list.getOrElse(3) &#123; &quot;Unknown&quot; &#125;)println(list.getOrNull(3))println(list.getOrNull(3) ?: &quot;Unknown&quot;) å¯å˜åˆ—è¡¨ 1234567val mutableList = mutableListOf(&quot;Jason&quot;, &quot;Jack&quot;, &quot;girl1&quot;)mutableList.add(&quot;Jimmy&quot;)mutableList.remove(&quot;Jack&quot;)println(mutableList)list.toMutableList() // ä¸å¯å˜è½¬å¯å˜mutableList.toList() // å¯å˜è½¬ä¸å¯å˜ mutatorå‡½æ•° 1234mutableList += &quot;John&quot;mutableList -= &quot;girl1&quot;mutableList.removeIf&#123;it.contains(&quot;Jack&quot;)&#125; //åŒ…å«Jackå°±æŠŠ Jackç§»é™¤println(mutableList) é›†åˆéåŽ† for in forEach forEachIndexedéåŽ†æ—¶è¦èŽ·å–ç´¢å¼• 123456789for (s in list)&#123; println(s)&#125;list.forEach&#123; println(it)&#125;list.forEachIndexed&#123;index,item-&gt; println(&quot;$index $item&quot;)&#125; è§£æž„é€šè¿‡_ç¬¦å·è¿‡æ»¤ä¸æƒ³è¦çš„å…ƒç´  12// val(girl1,girl2,girl3) = list val(girl1,_,girl3) = list //å¦‚æžœä¸éœ€è¦girl2,ç”¨_ï¼Œè¿™ä¸ªå­—èŠ‚ç ä¹Ÿä¸ä¼šå–å‡º Seté›†åˆelementAtèŽ·å–å…ƒç´ 12345val set = setOf(&quot;girl1&quot;, &quot;girl2&quot;, &quot;girl3&quot;, &quot;girl1&quot;)println(set.elementAt(2))val mutableSet = mutableSetOf(&quot;girl1&quot;, &quot;girl2&quot;, &quot;girl3&quot;, &quot;girl1&quot;)mutableSet += &quot;girl5&quot; ListåŽ»é‡é€šè¿‡toSetåŽ»é‡ 12345val list = mutableSetOf(&quot;girl1&quot;, &quot;girl2&quot;, &quot;girl3&quot;, &quot;girl1&quot;).toSet().toList()println(list)val distinct = mutableSetOf(&quot;girl1&quot;, &quot;girl2&quot;, &quot;girl3&quot;, &quot;girl1&quot;).distinct()println(distinct) æ•°ç»„ç±»åž‹ kotlinæä¾›äº†å„ç§Array,è™½ç„¶æ˜¯å¼•ç”¨ç±»åž‹ï¼Œä½†æœ€ç»ˆç¼–è¯‘æˆJavaåŸºæœ¬æ•°æ®ç±»åž‹ 123val intArray = intArrayOf(10, 30, 40)listOf(10, 30, 40).toIntArray()val array = arrayOf(File(&quot;xxx&quot;), File(&quot;yyyy&quot;)) Mapé›†åˆ mapèŽ·å–1234println(map[&quot;lucy1&quot;])println(map.getValue(&quot;lucy2&quot;))println(map.getOrElse(&quot;Jon&quot;)&#123;&quot;Unknown&quot;&#125;) //æ²¡æœ‰Jonï¼Œè¿”å›žUnknownprintln(map.getOrDefault(&quot;Jon&quot;,0)) //æ²¡æœ‰Jonï¼Œè¿”å›žé»˜è®¤å€¼0 mapéåŽ†123456map.forEach&#123; println(&quot;$&#123;it.key&#125;, $&#123;it.value&#125;&quot;)&#125;map.forEach&#123;(key:String,value:Int)-&gt; println(&quot;$&#123;key&#125;, $&#123;value&#125;&quot;)&#125; mutableMap12345val mutableMap = mutableMapOf(&quot;lucy1&quot; to 18, &quot;lucy2&quot; to 19, &quot;lucy3&quot; to 20)mutableMap += &quot;jon&quot; to 22mutableMap.put(&quot;jon2&quot;,35)mutableMap.getOrPut(&quot;Rose&quot;)&#123;30&#125; // å¦‚æžœæ²¡æœ‰Rose,å°±æ·»åŠ è¿›æ¥println(mutableMap) å®šä¹‰ç±» 12345678Class Player&#123; var name:String? = &quot;jack&quot; // ç¼–è¯‘åŽç”Ÿæˆäº†get. setæ–¹æ³•&#125;fun main()&#123; var p = Player() p.name = &quot;rose&quot; //ç¼–è¯‘ç”Ÿæˆäº† setNameæ–¹æ³•&#125; è®¡ç®—å±žæ€§12345678910111213class Player &#123; var name: String = &quot;jack&quot; get() = field.capitalize() set(value) &#123; field = value.trim() &#125; //è®¡ç®—å±žæ€§æ˜¯é€šè¿‡ä¸€ä¸ªè¦†ç›–çš„getæˆ–setè¿ç®—ç¬¦æ¥å®šä¹‰ï¼Œè¿™æ—¶fieldå°±ä¸éœ€è¦äº†ã€‚ val rolledValue get() = (1..6).shuffled().first() &#125; é˜²èŒƒç«žæ€æ¡ä»¶1234567// å¦‚æžœä¸€ä¸ªç±»å±žæ€§å³å¯ç©ºåˆå¯å˜ï¼Œé‚£ä¹ˆå¼•ç”¨å®ƒä¹‹å‰å¿…é¡»ä¿è¯å®ƒéžç©ºï¼Œä¸€ä¸ªåŠžæ³•æ˜¯ç”¨alsoæ ‡å‡†å‡½æ•° var words:String? = &quot;hello&quot; fun saySomething()&#123; words?.also &#123; println(&quot;Hello $&#123;it.uppercase()&#125;&quot;) &#125; &#125; æž„é€ å‡½æ•°12345678910111213141516171819202122class Student( _name: String, _age: Int, _isNormal: Boolean) &#123; var name = _name //ä¸´æ—¶å˜é‡ç”¨ _è¡¨ç¤º åªç”¨ä¸€æ¬¡ get() = field.capitalize() private set(value) &#123; value.trim() &#125; var age = _age //ä¸´æ—¶å˜é‡ç”¨ _è¡¨ç¤º åªç”¨ä¸€æ¬¡ get() = age.absoluteValue set(value) &#123; field = value.absoluteValue &#125; var isNormal = _isNormal&#125;fun main() &#123; val p = Student(&quot;john&quot;, 19, true)// p.name = &quot;rose&quot; //Cannot assign to &#x27;name&#x27;: the setter is private in &#x27;Student&#x27;&#125; ä¸»æž„é€ å‡½æ•°é‡Œå®šä¹‰å±žæ€§12345678910111213141516class Student2( _name: String, val age: Int, val isNormal: Boolean) &#123; var name = _name //ä¸´æ—¶å˜é‡ç”¨ _è¡¨ç¤º åªç”¨ä¸€æ¬¡ get() = field.capitalize() private set(value) &#123; value.trim() &#125;&#125;fun main() &#123; val p = Student2(&quot;john&quot;, 19, true)// p.name = &quot;rose&quot; //Cannot assign to &#x27;name&#x27;: the setter is private in &#x27;Student&#x27;&#125; æ¬¡æž„é€ å‡½æ•°Student2.kt 123456789constructor(_name:String):this(_name,age=100,isNormal = false)constructor(_name:String,age: Int):this(_name,age=100,isNormal = false)&#123; //å®šä¹‰åˆå§‹åŒ–ä»£ç é€»è¾‘ this.name = name.uppercase()&#125;fun main()&#123; val p2 = Student2(&quot;Rose&quot;) val p3 = Student2(&quot;Rose&quot;,20)&#125; æž„é€ å‡½æ•°ç»™é»˜è®¤å€¼123456789101112131415class Student3( _name: String, val age: Int = 20, val isNormal: Boolean) &#123; var name = _name //ä¸´æ—¶å˜é‡ç”¨ _è¡¨ç¤º åªç”¨ä¸€æ¬¡ get() = field.capitalize() private set(value) &#123; value.trim() &#125;&#125;fun main() &#123; Student3(isNormal = false, _name = &quot;Jon&quot;)&#125; åˆå§‹åŒ–å—åˆå§‹åŒ–å—å¯ä»¥è®¾ç½®å˜é‡æˆ–å€¼ï¼Œä»¥åŠæ‰§è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œå¦‚æžœæ£€æŸ¥ä¼ ç»™æŸæž„é€ å‡½æ•°çš„å€¼æ˜¯å¦æœ‰æ•ˆï¼Œåˆå§‹åŒ–å—ä»£ç ä¼šåœ¨æž„é€ ç±»å®žä¾‹æ—¶æ‰§è¡Œã€‚ 12345678910111213141516171819202122class Student3( _name: String, val age: Int = 20, val isNormal: Boolean) &#123; var name = _name //ä¸´æ—¶å˜é‡ç”¨ _è¡¨ç¤º åªç”¨ä¸€æ¬¡ get() = field.capitalize() private set(value) &#123; value.trim() &#125; init&#123; require(age&gt;0)&#123;&quot;age must be positive&quot;&#125; require(name.isNotBlank())&#123;&quot;player must have a name.&quot;&#125; &#125;&#125;fun main() &#123; Student3(isNormal = false, _name = &quot;Jon&quot;) Student3(isNormal = false, _name = &quot;&quot;)&#125; åˆå§‹åŒ–é¡ºåº ä¸»æž„é€ å‡½æ•°é‡Œå£°æ˜Žçš„å±žæ€§ ç±»çº§åˆ«çš„å±žæ€§èµ‹å€¼ Initåˆå§‹åŒ–å—é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ æ¬¡æž„é€ å‡½æ•°é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ 123456789101112131415161718192021class Student4( _name: String, val age: Int //age ä¸»æž„é€ å‡½æ•°é‡Œå£°æ˜Žçš„å±žæ€§)&#123; var name = _name //ç±»çº§åˆ«çš„å±žæ€§èµ‹å€¼ name , score, hobby var score = 10; private val hobby = &quot;music&quot; val subject:String init &#123; println(&quot;initializing student&quot;) subject = &quot;english&quot; //Initåˆå§‹åŒ–å—é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ &#125; constructor(_name: String):this(_name,10)&#123; score = 20 //æ¬¡æž„é€ å‡½æ•°é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ &#125;&#125;fun main()&#123; Student4(&quot;jon&quot;)&#125; åç¼–è¯‘å­—èŠ‚ç åŽ 123456789101112131415161718public Student4(@NotNull String _name, int age) &#123; Intrinsics.checkNotNullParameter(_name, &quot;_name&quot;); super(); this.age = age; //ä¸»æž„é€ å‡½æ•°é‡Œå£°æ˜Žçš„å±žæ€§ this.name = _name; //ç±»çº§åˆ«çš„å±žæ€§èµ‹å€¼ name , score, hobby this.score = 10; this.hobby = &quot;music&quot;; String var3 = &quot;initializing student&quot;; //Initåˆå§‹åŒ–å—é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨ boolean var4 = false; System.out.println(var3); this.subject = &quot;english&quot;; &#125;public Student4(@NotNull String _name) &#123; //è°ƒç”¨è¿™ä¸ªæž„é€ æ–¹æ³• Intrinsics.checkNotNullParameter(_name, &quot;_name&quot;); this(_name, 10); this.score = 20; //æ¬¡æž„é€ å‡½æ•°é‡Œçš„å±žæ€§èµ‹å€¼å’Œå‡½æ•°è°ƒç”¨&#125; å»¶è¿Ÿåˆå§‹åŒ– 123456789101112131415class Player4 &#123; lateinit var equipment:String fun ready()&#123; equipment = &quot;sharp knife&quot; &#125; fun battle()&#123; if (::equipment.isInitialized) println(equipment) &#125;&#125;fun main() &#123; val p = Player4() p.ready() p.battle()&#125; æƒ°æ€§åˆå§‹åŒ–å»¶è¿Ÿåˆå§‹åŒ–å¹¶ä¸æ˜¯æŽ¨åŽåˆå§‹åŒ–çš„å”¯ä¸€æ–¹å¼ï¼Œä¹Ÿå¯ä»¥æš‚æ—¶ä¸åˆå§‹åŒ–æŸä¸ªå˜é‡ï¼Œç›´åˆ°é¦–æ¬¡ä½¿ç”¨å®ƒæ‰åˆå§‹åŒ–ï¼Œè¿™ä¸ªå«åšæƒ°æ€§åˆå§‹åŒ–ã€‚ 1234567891011121314151617class Player5(_name: String) &#123; var name = _name val config by lazy &#123; loadConfig() &#125; // æ‡’æ±‰å¼// val config = loadConfig() //é¥¿æ±‰å¼ private fun loadConfig(): String &#123; println(&quot;loading...&quot;) return &quot;beauty girl&quot; &#125;&#125;fun main() &#123; val p = Player5(&quot;girl&quot;) Thread.sleep(5000) println(p.config)&#125; Javaä¸ä¼šæœ‰è¿™ç§é™·é˜± åˆå§‹åŒ–é™·é˜±1é¡ºåºéžå¸¸é‡è¦ï¼Œå¿…é¡»ä¿è¯å—ä¸­çš„æ‰€æœ‰å±žæ€§å·²å®Œæˆåˆå§‹åŒ– 1234init &#123; val bloodBonus = blood.times(4)&#125;val blood = 100 //å¿…é¡»ä¿è¯å—ä¸­çš„æ‰€æœ‰å±žæ€§å·²å®Œæˆåˆå§‹åŒ– åˆå§‹åŒ–é™·é˜±2123456789101112class Player7 &#123; val name:String //ç±»çº§åˆ«å±žæ€§ private fun firstLetter() = name[0] init &#123; println(firstLetter()) name= &quot;john&quot; //åˆå§‹åŒ–å—ä»£ç æŽ’ç¬¬ä¸‰ &#125;&#125;fun main() &#123; Player7()&#125; åˆå§‹åŒ–é™·é˜±3initPlayerName() åˆå§‹åŒ– playerNameæ—¶ï¼Œnameå±žæ€§è¿˜æœªå®Œåˆå§‹åŒ–ã€‚ 123456789class InitTrapTest3(_name:String) &#123; val playerName:String = initPlayerName() val name:String = _name //è¿™ä¸ªè¦æ”¾ç¬¬ä¸€å¥ private fun initPlayerName() = name&#125;fun main() &#123; println(InitTrapTest3(&quot;John&quot;).playerName)&#125;","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"kotlin-func","slug":"kotlin-func","date":"2021-08-19T14:29:06.000Z","updated":"2023-01-02T03:31:39.256Z","comments":true,"path":"2021/08/19/kotlin-func/","link":"","permalink":"https://noteforme.github.io/2021/08/19/kotlin-func/","excerpt":"","text":"https://www.jianshu.com/p/8eb0623f08c6 ç±»åž‹Kotlinå†…ç½®æ•°æ®ç±»åž‹ ç±»åž‹æŽ¨æ–­å¯¹äºŽå·²ç»å£°æ˜Žå¹¶èµ‹å€¼çš„å˜é‡ï¼Œå®ƒå…è®¸ä½ çœç•¥ç±»åž‹å®šä¹‰. ç¼–è¯‘æ—¶å¸¸é‡ç¼–è¯‘æ—¶å¸¸é‡åªèƒ½å†å‡½æ•°å¤–å®šä¹‰ï¼Œå› ä¸ºç¼–è¯‘æ—¶å¸¸é‡å¿…é¡»åœ¨ç¼–è¯‘æ—¶èµ‹å€¼ï¼Œè€Œå‡½æ•°æ—¶åœ¨è¿è¡Œæ—¶æ‰è°ƒç”¨ï¼Œå‡½æ•°å†…çš„å˜é‡ä¹Ÿæ˜¯åœ¨è¿è¡Œæ—¶èµ‹å€¼ï¼Œç¼–è¯‘æ—¶å¸¸é‡è¦åœ¨è¿™äº›å˜é‡èµ‹å€¼å‰å°±å·²å­˜åœ¨ã€‚ 1234const val MAX =200;fun main() &#123; const val MAX =200;//æŠ¥é”™ Modifier &#x27;const&#x27; is not applicable to &#x27;local variable&#x27;&#125; åŸºæœ¬è¡¨è¾¾å¼ageè¡¨è¾¾å¼1234567891011val score = 6;if (score in 9..10)&#123; println(&quot;Bigç¾Žå¥³&quot;)&#125;else if (score in 6..8)&#123; println(&quot;ç¾Žå¥³&quot;)&#125;else&#123; println(&quot;who knows&quot;)&#125;if(score !in 1..5)&#123; println(&quot;good&quot;)&#125; ç¾Žå¥³good when123456789val school = &quot;0å°å­¦&quot;;val level = when (school) &#123; &quot;å¹¼å„¿å›­&quot; -&gt; &quot;å¹¼å„¿&quot; &quot;å°å­¦&quot; -&gt; &quot;å°‘å„¿&quot; &quot;ä¸­å­¦&quot; -&gt; &quot;é’å°‘å¹´&quot; else -&gt; &#123; &quot;æœªçŸ¥&quot; &#125;&#125; ç±»ä¼¼äºŽ if elseæ¡ä»¶è¯­å¥ 1234567var osd = when &#123; isOdd() -&gt; print(&quot;x is odd&quot;) isEven() -&gt; print(&quot;y is even&quot;) else -&gt; print(&quot;x+y is odd&quot;)&#125;println(&quot;osd $osd&quot;) 123456fun isOdd():Boolean&#123; return false&#125;fun isEven():Boolean&#123; return false&#125; Stringæ¨¡ç‰ˆ12val flag = falseprintln(&quot;Answer is : $&#123;if (flag) &quot;æˆ‘å¯ä»¥&quot; else &quot;I can play&quot;&#125;&quot;) å‡½æ•°,å‡½æ•°å‚æ•°12345printUser(&quot;Jon&quot;)printUser(name = &quot;john&quot;)fun printUser(name:String,age:Int=2)&#123; println(name+age)&#125; Nothingç±»åž‹ç»ˆæ­¢ä»£ç è¿è¡Œ 1TODO(&quot;nothing&quot;) åå¼•å· ``å¯ä»¥ç”¨æ¥æµ‹è¯• æŸä¸€æ®µä»£ç  123fun `**~ special function with test util ~**`()&#123;&#125; Kotlinå’ŒJavaä¿ç•™ä¸åŒçš„å…³é”®å­—ï¼Œä½¿ç”¨åå¼•å·æ‹¬ä½å‡½æ•°åèƒ½é¿å…ä»»ä½•å†²çª 12345public class KeyWordJava &#123; public static void is()&#123; //isæ—¶å…³é”®å­— System.out.println(&quot;is invoked&quot;); &#125;&#125; 1KeyWordJava.`is`() åŒ¿åå‡½æ•°åŒ¿åå‡½æ•°å¯ä»¥å½“ä½œå˜é‡èµ‹å€¼ç»™å‡½æ•°ç±»åž‹å˜é‡ã€‚å‡½æ•°çš„ç±»åž‹ï¼Œç”±ä¼ å…¥çš„å‚æ•°å’Œè¿”å›žå€¼ç±»åž‹å†³å®šã€‚ å’Œå…·åå‡½æ•°ä¸ä¸€æ ·ï¼Œé™¤æžå°‘æƒ…å†µå¤–ï¼ŒåŒ¿åå‡½æ•°ä¸éœ€è¦returnå…³é”®å­—ï¼Œæ¥è¿”å›žæ•°æ®ï¼ŒåŒ¿åå‡½æ•°ä¼šéšå¼æˆ–è‡ªåŠ¨è¿”å›žå‡½æ•°ä½“æœ€åŽä¸€è¡Œè¯­å¥çš„ç»“æžœã€‚ é€šè¿‡åŒ¿åå‡½æ•°ç»™æ ‡å‡†å‡½æ•° åˆ¶å®šè§„åˆ™ 1234567val total = &quot;Mississippi&quot;.count()//é€šè¿‡åŒ¿åå‡½æ•°ç»™æ ‡å‡†å‡½æ•° åˆ¶å®šè§„åˆ™val totalS = &quot;Mississippi&quot;.count(&#123;letter-&gt; //letterå˜é‡ letter ==&#x27;s&#x27;//å‡½æ•°ä½“&#125;)println(total)println(totalS) å‡½æ•°ç±»åž‹ä¸Žéšå¼è¿”å›ž 123456789101112131415//å˜é‡çš„ç±»åž‹æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°,ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å˜é‡val helloFunction:()-&gt;String //ä»»æ„å‡½æ•° æ— ä¼ å…¥å‚æ•°ï¼Œè¿”å›žç±»åž‹String ,éƒ½å¯ä»¥ =helloFunctionhelloFunction = &#123; val greet = &quot; how is going. &quot; &quot;hello girl , $greet &quot; //é»˜è®¤è¿”å›žè¿™è¡Œè¯­å¥çš„ç»“æžœ&#125;val helloFunction1:()-&gt;String = &#123;//ä»»æ„å‡½æ•° æ— ä¼ å…¥å‚æ•°ï¼Œè¿”å›žç±»åž‹String ,éƒ½å¯ä»¥ =helloFunction val greet = &quot; how is going. &quot; val hah = &quot;haha&quot; &quot;hello beauty girl, $greet &quot; //é»˜è®¤è¿”å›žè¿™è¡Œè¯­å¥çš„ç»“æžœ&#125;println(helloFunction())println(helloFunction1()) hello girl , how is going.hello beauty girl, how is going. åŒ¿åå‡½æ•°å‚æ•° 12345val helloFunction2:(String)-&gt;String = &#123;name-&gt; // nameä¼ å…¥å‚æ•°,Stringå‚æ•°ç±»åž‹ val hah = &quot;haha&quot; &quot;hello beauty girl, I am $&#123;name&#125; &quot; //é»˜è®¤è¿”å›žè¿™è¡Œè¯­å¥çš„ç»“æžœ&#125;println(helloFunction2(&quot;Jon&quot;)) itå…³é”®å­—å®šä¹‰åªæœ‰ä¸€ä¸ªå‚æ•°çš„åŒ¿åå‡½æ•°æ—¶ï¼Œå¯ä»¥ç”¨itæ¥è¡¨ç¤ºå‚æ•°åã€‚å½“éœ€è¦ä¼ å…¥ä¸¤ä¸ªå€¼å‚ï¼Œå°±ä¸èƒ½ç”¨äº†ã€‚ 12345val helloFunction3:(String)-&gt;String = &#123; // nameä¼ å…¥å‚æ•°,Stringå‚æ•°ç±»åž‹, åªæœ‰ä¸€ä¸ªå‚æ•°nameå¯ä»¥çœç•¥ï¼Œç”¨itæ›¿ä»£ val hah = &quot;haha&quot; &quot;hello beauty girl, I am $&#123;it&#125; &quot; //é»˜è®¤è¿”å›žè¿™è¡Œè¯­å¥çš„ç»“æžœ&#125;println(helloFunction3(&quot;John&quot;)) ç±»åž‹æŽ¨æ–­å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¦‚æžœå·²æŠŠåŒ¿åå‡½æ•°ä½œä¸ºå˜é‡èµ‹å€¼ç»™å®ƒ, å°±ä¸éœ€è¦æ˜¾ç¤ºæŒ‡æ˜Žå˜é‡ç±»åž‹äº†ã€‚ 12345val helloFunction4 = &#123; val holiday = &quot;New Year&quot; &quot;Happy $holiday&quot;&#125;println(helloFunction4()) ç±»åž‹æŽ¨æ–­ä¹Ÿæ”¯æŒå¸¦å‚æ•°çš„åŒ¿åå‡½æ•°ï¼Œä½†ä¸ºäº†å¸®åŠ©ç¼–è¯‘å™¨æ›´å‡†ç¡®çš„æŽ¨æ–­å˜é‡ç±»åž‹ï¼ŒåŒ¿åå‡½æ•°çš„å‚æ•°åå’Œå‚æ•°ç±»åž‹å¿…é¡»æœ‰ã€‚ 123456789101112val helloFunction5:(String,Int) -&gt; String = &#123;name,year -&gt; val holiday = &quot;New Year&quot; &quot;$name Happy $holiday $year&quot;&#125;println(helloFunction5(&quot;jon&quot;,2023))//ä½¿ç”¨ç±»åž‹æŽ¨æ–­val helloFunction6 = &#123;name:String,year:Int -&gt; val holiday = &quot;New Year&quot; &quot;$name Happy $holiday $year&quot;&#125;println(helloFunction6(&quot;jon&quot;,2023)) åŒ¿åå‡½æ•°æˆä¸ºlambda,å°†å®ƒçš„å®šä¹‰æˆä¸ºlambdaè¡¨è¾¾å¼ï¼Œå®ƒè¿”å›žçš„æ•°æ®æˆä¸ºlambdaç»“æžœã€‚ lambdaç”±æ¥ï¼šåœ¨å®šä¹‰åŒ¿åå‡½æ•°æ—¶ï¼Œä½¿ç”¨äº†lambdaæ¼”ç®—è®°æ³•ã€‚ ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°123456789101112131415fun main() &#123; //å®šä¹‰å‚æ•°æ˜¯å‡½æ•° çš„å‡½æ•° val disCountWord = &#123; goodsName: String, hour: Int -&gt; val currentYear = 2023; &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot; &#125; showOnBoard(&quot;å°çŽ©å…·&quot;, disCountWord)&#125;//getDiscountWordæ˜¯ç¬¬äºŒä¸ªå‚æ•°,ç±»åž‹æ—¶æ˜¯(String, Int) -&gt; String å‡½æ•°ç±»åž‹fun showOnBoard(goodsName: String, getDiscountWords: (String, Int) -&gt; String) &#123; val hour = (1..24).shuffled().last(); print(getDiscountWords(goodsName, hour))&#125; javaå®žçŽ°ä¼ é€’å‡½æ•°1234567891011121314public static void main(String[] args) &#123; showOnBoard(&quot;ç‰™è†&quot;,((goodsName, hour) -&gt; &#123; int currentYear = 2023; return String.format(&quot;%så¹´ï¼ŒåŒ11 %s ä¿ƒé”€å€’è®¡æ—¶ %då°æ—¶ &quot;,currentYear,goodsName,hour); &#125;));&#125;public interface DiscountWords&#123; String getDiscountWords(String goodsName,int hour);&#125;public static void showOnBoard(String goodsName,DiscountWords discountWords)&#123; int hour = new Random().nextInt(24); System.out.println(discountWords.getDiscountWords(goodsName,hour));&#125; ç®€ç•¥å†™æ³•å¦‚æžœä¸€ä¸ªå‡½æ•°çš„lambdaå‡½æ•°æŽ’åœ¨æœ€åŽï¼Œæˆ–è€…æ˜¯å”¯ä¸€çš„å‚æ•°ï¼Œé‚£ä¹ˆæ‹¬ä½çš„lambdaå€¼å‚çš„ä¸€å¯¹åœ†æ‹¬å·å°±å¯ä»¥çœç•¥. å”¯ä¸€çš„å‚æ•° AnonymousFunc2.kt 1234567val totalS = &quot;Mississippi&quot;.count(&#123;letter-&gt; //letterå˜é‡ letter ==&#x27;s&#x27;//å‡½æ•°ä½“&#125;)val totalS1 = &quot;Mississippi&quot;.count&#123;letter-&gt; //letterå˜é‡ letter ==&#x27;s&#x27;//å‡½æ•°ä½“&#125; AnonymousFunc2.kt æŽ’åœ¨æœ€åŽ,ä¸€å¯¹åœ†æ‹¬å·å°±å¯ä»¥çœç•¥ 123456789showOnBoard(&quot;å°çŽ©å…·&quot;, &#123; goodsName: String, hour: Int -&gt; val currentYear = 2023; &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot;&#125;)showOnBoard(&quot;å°çŽ©å…·&quot;) &#123; goodsName: String, hour: Int -&gt; val currentYear = 2023; &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot;&#125; å†…è”å‡½æ•°ç±»ä¼¼äºŽå®æ›¿æ¢ 1234567891011121314151617fun main() &#123; //å®šä¹‰å‚æ•°æ˜¯å‡½æ•° çš„å‡½æ•° val disCountWord = (&#123; goodsName: String, hour: Int -&gt; val currentYear = 2023; &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot; &#125;) showOnBoard(&quot;å°çŽ©å…·&quot;, disCountWord)&#125;//getDiscountWordæ˜¯ç¬¬äºŒä¸ªå‚æ•°,ç±»åž‹æ—¶æ˜¯(String, Int) -&gt; String å‡½æ•°ç±»åž‹ fun showOnBoard(goodsName: String, getDiscountWords: (String, Int) -&gt; String) &#123; val hour = (1..24).shuffled().last(); println(getDiscountWords(goodsName, hour))&#125; 123456789101112131415161718192021public final class AnonymousFunc2Kt &#123; public static final void main() &#123; Function2 disCountWord = (Function2)null.INSTANCE; showOnBoard(&quot;å°çŽ©å…·&quot;, disCountWord); &#125; // $FF: synthetic method public static void main(String[] var0) &#123; main(); &#125; public static final void showOnBoard(@NotNull String goodsName, @NotNull Function2 getDiscountWords) &#123; Intrinsics.checkNotNullParameter(goodsName, &quot;goodsName&quot;); Intrinsics.checkNotNullParameter(getDiscountWords, &quot;getDiscountWords&quot;); byte var3 = 1; int hour = ((Number)CollectionsKt.last(CollectionsKt.shuffled((Iterable)(new IntRange(var3, 24))))).intValue(); Object var5 = getDiscountWords.invoke(goodsName, hour); boolean var4 = false; System.out.println(var5); &#125;&#125; å†…è”åŽï¼Œä»£ç ç›´æŽ¥æ›¿æ¢ 12345678910111213141516171819202122232425262728public final class AnonymousFunc2Kt &#123; public static final void main() &#123; Function2 disCountWord = (Function2)null.INSTANCE; String goodsName$iv = &quot;å°çŽ©å…·&quot;; int $i$f$showOnBoard = false; byte var3 = 1; //è¿™é‡Œå¼€å§‹ åŽé¢ä»£ç ç›´æŽ¥å¤åˆ¶è¿‡æ¥äº† int hour$iv = ((Number)CollectionsKt.last(CollectionsKt.shuffled((Iterable)(new IntRange(var3, 24))))).intValue(); Object var6 = disCountWord.invoke(goodsName$iv, hour$iv); boolean var5 = false; System.out.println(var6); &#125; // $FF: synthetic method public static void main(String[] var0) &#123; main(); &#125; public static final void showOnBoard(@NotNull String goodsName, @NotNull Function2 getDiscountWords) &#123; int $i$f$showOnBoard = 0; Intrinsics.checkNotNullParameter(goodsName, &quot;goodsName&quot;); Intrinsics.checkNotNullParameter(getDiscountWords, &quot;getDiscountWords&quot;); byte var4 = 1; int hour = ((Number)CollectionsKt.last(CollectionsKt.shuffled((Iterable)(new IntRange(var4, 24))))).intValue(); Object var6 = getDiscountWords.invoke(goodsName, hour); boolean var5 = false; System.out.println(var6); &#125;&#125; å‡½æ•°å¼•ç”¨12345678910111213141516//å‡½æ•°å¼•ç”¨fun main() &#123; showOnBoard(&quot;å°çŽ©å…·&quot;,::getDiscountWords)&#125;//æ™®é€š å…·åå‡½æ•°private fun getDiscountWords(goodsName: String, hour: Int): String &#123; val currentYear = 2023; return &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot;&#125;//getDiscountWordæ˜¯ç¬¬äºŒä¸ªå‚æ•°,ç±»åž‹æ—¶æ˜¯(String, Int) -&gt; String å‡½æ•°ç±»åž‹private fun showOnBoard(goodsName: String, getDiscountWords: (String, Int) -&gt; String) &#123; val hour = (1..24).shuffled().last(); println(getDiscountWords(goodsName, hour))&#125; å‡½æ•°ç±»åž‹ä½œä¸ºè¿”å›žç±»åž‹ å‡½æ•°ç±»åž‹ä¹Ÿæ˜¯æœ‰æ•ˆçš„è¿”å›žç±»åž‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å®šä¹‰ä¸€ä¸ªèƒ½è¿”å›žå‡½æ•°çš„å‡½æ•°ã€‚ 123456789101112fun main() &#123; val getDiscountWords = configDiscountWords() println(getDiscountWords(&quot;å°çŽ©å…·&quot;))&#125;fun configDiscountWords(): (String) -&gt; String &#123;//è¿”å›žä¸€ä¸ªä¼ å…¥å­—ç¬¦ä¸² è¿”å›žç±»åž‹ä¹Ÿæ˜¯å‡½æ•°çš„å­—ç¬¦ä¸²,çš„è¿”å›žç±»åž‹ val currentYear = 2023; val hour = (1..24).shuffled().last(); return &#123; goodsName: String -&gt; &quot;$&#123;currentYear&#125;å¹´, åŒ11 $&#123;goodsName&#125;ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶&quot; &#125;&#125; é—­åŒ…ä½œç”¨: æŽ§åˆ¶ä½œç”¨åŸŸ åŒ¿åå‡½æ•°å¼•ç”¨ç€å®šä¹‰è‡ªèº«å‡½æ•°é‡Œçš„å˜é‡ kotlinä¸­çš„lambdaå°±æ˜¯é—­åŒ…,ä¸Šé¢ currentYear,hour åœ¨configDiscountWords()ä¸­å®šä¹‰ { goodsName: String -&gt; â€œ${currentYear}å¹´, åŒ11 ${goodsName}ä¿ƒé”€å€’è®¡æ—¶: $hour å°æ—¶} ä¹Ÿåœ¨configDiscountWords()å®šä¹‰ 2 å¼•ç”¨äº†currentYear,hourå˜é‡. æ‰€ä»¥å½¢æˆé—­åŒ… https://www.bilibili.com/video/BV1wf4y1s7TG?p=34&amp;spm_id_from=pageDriver 35 lambdaä¸ŽåŒ¿åå†…éƒ¨ç±» javaä¼ é€’å‡½æ•°çš„æ–¹å¼ 1234567891011121314151617181920public class JavaAnonymousClass &#123; public static void main(String[] args) &#123; showOnBoard(&quot;ç‰™è†&quot;, new DiscountWords() &#123; @Override public String getDiscountWords(String goodsName, int hour) &#123; int currentYear = 2023; return String.format(&quot;%så¹´ï¼ŒåŒ11 %s ä¿ƒé”€å€’è®¡æ—¶ %då°æ—¶ &quot;, currentYear, goodsName, hour); &#125; &#125;); &#125; public interface DiscountWords &#123; String getDiscountWords(String goodsName, int hour); &#125; public static void showOnBoard(String goodsName, DiscountWords discountWords) &#123; int hour = new Random().nextInt(24); System.out.println(discountWords.getDiscountWords(goodsName, hour)); &#125;&#125; Nullç¼–è¯‘æ—¶å‡ºé”™çš„æ–¹å¼ï¼Œæå‰åœ¨ç¼–è¯‘æœŸå¼ºè¿«å¼€å‘è€…é‡è§†èµ·æ¥ï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿è¡Œæ—¶æŠ¥é”™ã€‚ ?å˜é‡ä¸ºnullï¼Œä¸ä¼šæ‰§è¡ŒåŽé¢çš„æ–¹æ³• letåŒ¿åå‡½æ•°ï¼Œè¿”å›žlambdaæœ€åŽä¸€è¡Œ å¯ä»¥æ”¯æŒå‡½æ•°é“¾å¼è°ƒç”¨ 12345678910 var str:String? = &quot;butterfly&quot;// var str=&quot;&quot; str = str?.let &#123; if (it.isNotBlank())&#123; it.capitalize() &#125;else&#123; &quot;butterfly&quot; &#125; &#125; println(str) !!å½“å˜é‡ä¸ºnull,ä¼šæŠ›å‡ºKotlinNullPointerException ç©ºåˆå¹¶æ“ä½œç¬¦ ?:ç±»ä¼¼ä¸‰ç›®è¿ç®—ç¬¦ 1234str=nullstr=&quot;guy&quot;str = str?.let &#123; it.capitalize()&#125; ?:&quot;butterfly&quot; //å’Œletä¸€èµ·ä½¿ç”¨println(str ?: &quot;girl&quot;) // str=null,å°±æ˜¯girl,ä¸ä¸ºnullå°±æ˜¯è‡ªå·± å¼‚å¸¸æ‰§è¡Œä¹‹å‰ï¼Œå…ˆè¿›è¡Œæ£€æŸ¥ï¼Œå¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ 123456789101112131415fun main() &#123; var number: Int? = null try &#123; checkOperation(number) number!!.plus(1) &#125; catch (e: Exception) &#123; println(e) &#125;&#125;fun checkOperation(number: Int?) &#123; number ?: throw UnskilledException()&#125;//è‡ªå®šä¹‰å¼‚å¸¸class UnskilledException : IllegalArgumentException(&quot;æ“ä½œä¸å½“&quot;) å…ˆå†³æ¡ä»¶å‡½æ•°kotlinæ ‡å‡†åº“ æä¾›äº†ä¸€äº›ä¾¿åˆ©å‡½æ•°ï¼Œä½¿ç”¨è¿™äº›å†…ç½®å‡½æ•°ï¼Œå¯ä»¥è·‘å‡ºå¸¦è‡ªå®šä¹‰ä¿¡æ¯çš„å¼‚å¸¸ï¼Œè¿™äº›ä¾¿åˆ©å‡½æ•°å«åšå…ˆå†³æ¡ä»¶å‡½æ•°ã€‚ä¹Ÿå¯ä»¥ç”¨å®ƒå®šä¹‰å…ˆå†³æ¡ä»¶ï¼Œæ¡ä»¶å¿…é¡»æ»¡è¶³ï¼Œç›®æ ‡ä»£ç æ‰èƒ½æ‰§è¡Œã€‚ 1234fun checkOperation(number: Int?) &#123;// number ?: throw UnskilledException() checkNotNull(number,&#123;&quot;Something is no good.&quot;&#125;)&#125; å­—ç¬¦ä¸²String.kt substringsubstringæ”¯æŒIntRangeç±»åž‹çš„å‚æ•°ï¼Œuntilåˆ›å»ºçš„èŒƒå›´ä¸åŒ…æ‹¬ä¸Šé™å€¼ã€‚ 1234567const val NAME =&quot;Jimmy&#x27;s friend&quot;fun main() &#123; val index = NAME.indexOf(&#x27;\\&#x27;&#x27;) // \\è½¬ä¹‰ &#x27; NAME.substring(0,index) // javaå†™æ³• val str = NAME.substring(0 until index) println(str)&#125; spiltsiiltè¿”å›žçš„æ˜¯Listé›†åˆæ•°æ®ï¼ŒListé›†åˆåˆæ”¯æŒè§£æž„è¯­æ³•ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ åœ¨ä¸€ä¸ªè¡¨è¾¾å¼é‡Œç»™å¤šä¸ªå˜é‡èµ‹å€¼ï¼Œè§£æž„å¸¸ç”¨æ¥ç®€åŒ–å˜é‡çš„èµ‹å€¼ã€‚ 123val data = NAMES.split(&quot;,&quot;)val (girl1,girl2,girl3,girl4) = NAMES.split(&quot;,&quot;)println(&quot;$girl1 $girl2 $girl3 $girl4 &quot;) replcae123456789101112131415161718 /** * åŠ å¯†æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸² */val str1 = &quot;The people&#x27;s Republic of China.&quot; //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥å†³å®šè¦æ›¿æ¢å“ªäº›å­—ç¬¦ //ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŒ¿åå‡½æ•°ï¼Œç”¨æ¥ç¡®å®šå¦‚ä½•æ›¿æ¢æ­£åˆ™è¡¨è¾¾å¼æœç´¢åˆ°çš„å­—ç¬¦val str2 = str1.replace(Regex(&quot;[aeiou]&quot;)) &#123; when (it.value) &#123; &quot;a&quot; -&gt; &quot;8&quot; &quot;e&quot; -&gt; &quot;6&quot; &quot;i&quot; -&gt; &quot;9&quot; &quot;o&quot; -&gt; &quot;1&quot; &quot;u&quot; -&gt; &quot;3&quot; else -&gt; it.value &#125;&#125;println(str1)println(str2) ç»“æžœ The peopleâ€™s Republic of China.Th6 p61pl6â€™s R6p3bl9c 1f Ch9n8. å­—ç¬¦ä¸²çš„æ¯”è¾ƒç”¨ == æ£€æŸ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ˜¯å¦åŒ¹é…ï¼Œ ç”¨ === æ£€æŸ¥ä¸¤ä¸ªå˜é‡æ˜¯å¦æŒ‡å‘å†…å­˜å †ä¸Šçš„åŒä¸€å¯¹è±¡ï¼Œ è€Œåœ¨Javaä¸­ ==åšå¼•ç”¨æ¯”è¾ƒï¼Œåšç»“æž„æ¯”è¾ƒæ—¶ç”¨equalsæ–¹æ³•. 1234567val str3 = &quot;Jason&quot;val str4 = &quot;Jason&quot;println(str3==str4)println(str3===str4) //ç›¸åŒå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç›¸åŒçš„å¯¹è±¡val str5 = &quot;jason&quot;.capitalize() //è¿™ç§æƒ…å†µä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œwhy?println(str3===str5) ç»“æžœ truetruefalse å­—ç¬¦ä¸²éåŽ†123str1.forEach &#123; print(&quot;$it &quot;)&#125; æ•°å­—ç±»åž‹kotlinæ‰€æœ‰çš„æ•°å­—ç±»åž‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ï¼Œä¹Ÿå°±æ˜¯æ—¢å¯ä»¥è¡¨ç¤ºæ­£æ•°ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè´Ÿæ•°ã€‚ å®‰å…¨è½¬æ¢å‡½æ•°NumberConvert toDoubleOrNullå’ŒtoIntOrNullè¿™æ ·çš„å®‰å…¨è½¬æ¢å‡½æ•°ï¼Œå¦‚æžœæ•°å€¼ä¸èƒ½æ­£ç¡®è½¬æ¢ï¼Œä¸Žå…¶è§¦å‘å¼‚å¸¸ä¸å¦‚å¹²è„†è¿”å›žnullå€¼ã€‚ 12345678// val number1 = &quot;6.66&quot;.toInt() val number1:Int? = &quot;6.66&quot;.toIntOrNull() println(number1) println(8.956765.toInt()) println(8.956765.roundToInt()) //å››èˆäº”å…¥ val s = &quot;%.2f&quot;.format(8.956765) println(s) ç»“æžœ null898.96 æ ‡å‡†åº“å‡½æ•°StandLibFunc.kt applyapplyå‡½æ•°å¯çœ‹ä½œä¸€ä¸ªé…ç½®å‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæŽ¥æ”¶è€…ï¼Œç„¶åŽè°ƒç”¨ä¸€ç³»åˆ—çš„å‡½æ•°æ¥é…ç½®å®ƒä»¥ä¾¿ä½¿ç”¨ï¼Œå¦‚æžœæä¾›lambdaç»™applyå‡½æ•°æ‰§è¡Œï¼Œå®ƒä¼šè¿”å›žé…ç½®å¥½çš„æŽ¥æ”¶è€…ã€‚ é…ç½®fileå¯¹è±¡ï¼Œä¼ å…¥fileå¯¹è±¡é…ç½®å®ƒï¼Œé…ç½®å®Œfileå¯¹è±¡è¿”å›ž. 123456789101112// é…ç½®ä¸€ä¸ªFileå®žä¾‹val file = File(&quot;E// I have a dream.txt&quot;)file.setReadable(true)file.setWritable(true)file.setExecutable(false)//ä½¿ç”¨applyval file1 = File(&quot;E// I have a dream.txt&quot;).apply &#123; setReadable(true) setWritable(true) setExecutable(false)&#125; Lambdaè¡¨è¾¾å¼é‡Œï¼Œapplyèƒ½è®©æ¯ä¸ªé…ç½®å‡½æ•°éƒ½ä½œç”¨äºŽæŽ¥æ”¶è€…ï¼Œè¿™ç§è¡Œä¸ºåˆå«ç›¸å…³ä½œç”¨äºŽï¼Œå› ä¸ºlambdaè¡¨è¾¾å¼é‡Œçš„æ‰€æœ‰å‡½æ•°è°ƒç”¨éƒ½æ˜¯é’ˆå¯¹æŽ¥æ”¶è€…çš„ï¼Œæˆ–è€…è¯´ä»–ä»¬æ˜¯é’ˆå¯¹æŽ¥æ”¶è€…çš„éšå¼è°ƒç”¨ã€‚ letletå‡½æ•°èƒ½æ˜¯æŸä¸ªä¾¿åˆ©ä½œç”¨äºŽlambdaè¡¨è¾¾å¼é‡Œï¼Œè®©itå…³é”®å­—èƒ½å¼•ç”¨å®ƒã€‚letä¸Žapplyæ¯”è¾ƒï¼Œletä¼šæŠŠæŽ¥æ”¶è€…ä¼ ç»™lambdaï¼Œè€Œapplyä»€ä¹ˆéƒ½ä¸ä¼ ï¼ŒåŒ¿åå‡½æ•°æ‰§è¡Œå®Œï¼Œapplyä¼šå‘æŒ¥å½“å‰æŽ¥æ”¶è€…ï¼Œè€Œletä¼šè¿”å›žlambdaçš„æœ€åŽä¸€è¡Œã€‚ 12345678910111213141516171819202122 var result = listOf(3, 2, 1).first().let &#123; it * it &#125; // val firstElement = listOf(3, 2, 1).first() //java æ–¹å¼ // val result = firstElement * firstElement println(formatGreeting(null)) println(formatGreeting(&quot;Jack&quot;)) fun formatGreeting(guestNmae: String?): String &#123; return guestNmae?.let &#123; &quot;Welcom, $it&quot; &#125; ?: &quot;What&#x27;s your name&quot;&#125;// Javaæ–¹å¼fun formatGreeting2(guestNmae: String?): String &#123; return if (guestNmae != null) &#123; &quot;Welcom, $guestNmae&quot; &#125; else &#123; &quot;What&#x27;s your name&quot; &#125;&#125; run å…‰çœ‹ä½œç”¨åŸŸè¡Œä¸ºï¼Œ runå’Œapplyå·®ä¸å¤šï¼Œä½†ä¸Žapplyä¸åŒï¼Œrunå‡½æ•°ä¸è¿”å›žæŽ¥æ”¶è€…ï¼Œrunè¿”å›žçš„æ˜¯lambdaç»“æžœ. runä¹Ÿèƒ½ç”¨æ¥æ‰§è¡Œå‡½æ•°å¼•ç”¨Ã¥ 12345678910111213141516171819202122232425var file = File(&quot;THINKKOTLIN/I have a dream.txt&quot;)val result = file.run &#123; readText().contains(&quot;great&quot;) //æœ€åŽä¸€è¡Œæ‰§è¡Œç»“æžœè¿”å›ž &quot;xxx&quot;&#125;println(result)val result2 = &quot;The people&#x27;s Republic of china.&quot;.run(::isLong)println(result2)&quot;The people&#x27;s Republic of china.&quot; .run(::isLong) .run(::showMessage) .run(::println)fun isLong(name: String) = name.length&gt;10fun showMessage(isLong: Boolean): String &#123; return if(isLong)&#123; &quot;Name is too long.&quot; &#125;else&#123; &quot;Please rename.&quot; &#125;&#125; withwithå‡½æ•°æ˜¯runçš„å˜ä½“ï¼Œä»–ä»¬çš„åŠŸèƒ½è¡Œä¸ºæ˜¯ä¸€æ ·çš„ï¼Œä½†withçš„è°ƒç”¨æ–¹å¼ä¸åŒï¼Œè°ƒç”¨withæ—¶éœ€è¦å€¼å‚ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ã€‚ 12var result3 = &quot;The people&#x27;s Republic of china.&quot;.run &#123; length &gt; 10 &#125;val result4 = with(&quot;The people&#x27;s Republic of china.&quot;) &#123; length &gt;= 10 &#125; alsoâ€‹ alsoå’Œletç±»ä¼¼ï¼Œå’Œletä¸€æ ·ï¼Œalsoä¹Ÿæ˜¯æŠŠæŽ¥æ”¶è€…ä½œä¸ºå€¼å‚ä¼ ç»™lambda,ä½†æ˜¯æœ‰ç‚¹ä¸åŒ: alsoè¿”å›žæŽ¥æ”¶è€…å¯¹è±¡ï¼Œè€Œletè¿”å›žlambdaç»“æžœã€‚å› æ­¤alsoé€‚åˆé’ˆå¯¹åŒä¸€åŽŸå§‹å¯¹è±¡ï¼Œåˆ©ç”¨å‰¯ä½œç”¨åšäº‹ï¼Œè‚Œè‚‰alsoè¿”å›žçš„æ˜¯æŽ¥æ”¶è€…å¯¹è±¡ï¼Œå°±å¯ä»¥åŸºäºŽåŽŸå§‹æŽ¥æ”¶è€…å¯¹è±¡æ‰§è¡Œé¢å¤–çš„é“¾å¼è°ƒç”¨ã€‚ 12345678var fileContents: List&lt;String&gt;File(FILE_DREAM) .also &#123; println(it.name) &#125;.also &#123; fileContents = it.readLines() &#125;println(fileContents) takeif 123456//å¦‚æžœ it.exists() &amp;&amp; it.canRead() è¿”å›žtrue,è¿”å›žfileå¯¹è±¡ï¼ŒæŽ¥ç€æ‰§è¡ŒåŽé¢è¯­å¥ã€‚// å¦‚æžœä¸ºfalseï¼Œå°±è¿”å›žnull,å°±ä¸ä¼šæ‰§è¡ŒåŽé¢çš„è¯­å¥ã€‚val readText = File(FILE_DREAM) .takeIf &#123; it.exists() &amp;&amp; it.canRead() &#125; ?.readText()println(readText) takeUnlesså’Œtakeifæ˜¯åçš„ takeUnless, åªæœ‰åˆ¤æ–­ä½ ç»™å®šçš„æ¡ä»¶ç»“æžœæ˜¯ false æ—¶ï¼ŒtakeUnlessæ‰ä¼šè¿”å›žåŽŸå§‹æŽ¥æ”¶è€…å¯¹è±¡ã€‚ 1234val result5 = File(FILE_DREAM) .takeUnless &#123; it.isHidden &#125; //ä¸æ˜¯ ä¸å¯è§çš„ï¼Œæ‰€ä»¥æ˜¯false ?.readText()println(result5) flatmap ArrayList è½¬æˆ ArrayList 123val flatMap = limitServiceList?.flatMap &#123; mutableListOf(CategoryEditService(false, services = it))&#125; 12&#123; mutableListOf(CategoryEditService(false, services &#x3D; it))&#125; è¿™ä¸ªæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ç±»åž‹æ˜¯transform: (T) -&gt; Iterable&lt;R&gt; 1234567891011121314151617181920212223/** * Returns a single list of all elements yielded from results of [transform] function being invoked on each element of original collection. * * @sample samples.collections.Collections.Transformations.flatMap */public inline fun &lt;T, R&gt; Iterable&lt;T&gt;.flatMap(transform: (T) -&gt; Iterable&lt;R&gt;): List&lt;R&gt; &#123; return flatMapTo(ArrayList&lt;R&gt;(), transform)&#125;/** * Appends all elements yielded from results of [transform] function being invoked on each element of original collection, to the given [destination]. */public inline fun &lt;T, R, C : MutableCollection&lt;in R&gt;&gt; Iterable&lt;T&gt;.flatMapTo(destination: C, transform: (T) -&gt; Iterable&lt;R&gt;): C &#123; for (element in this) &#123;//è¿™é‡Œthisæ˜¯limitServiceList. val list = transform(element) // è¿™é‡Œå›žè°ƒ&#123;mutableListOf(CategoryEditService(false, services = it))&#125;æ–¹æ³• // ä¼ å…¥elementå€¼ï¼Œè¿”å›žlist destination.addAll(list) //æ·»åŠ æ–°çš„å¯¹è±¡,è¾¾åˆ°è½¬æ¢çš„ç›®çš„ &#125; return destination&#125;","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"kmp","slug":"kmp","date":"2021-06-17T14:44:42.000Z","updated":"2023-01-02T03:31:39.209Z","comments":true,"path":"2021/06/17/kmp/","link":"","permalink":"https://noteforme.github.io/2021/06/17/kmp/","excerpt":"","text":"è›®åŠ›ç®—æ³• i++ j++ 12345678910111213141516171819/****************************************************************************************** * Text : 0 1 2 . . . i-j . . . . i . . n-1 * ------------------------|-------------------|------------ * Pattern : 0 . . . . j . . * |-------------------| ******************************************************************************************/int match ( char* P, char* T ) &#123; //ä¸²åŒ¹é…ç®—æ³•ï¼ˆBrute-force-1ï¼‰ size_t n = strlen ( T ), i = 0; //æ–‡æœ¬ä¸²é•¿åº¦ã€å½“å‰æŽ¥å—æ¯”å¯¹å­—ç¬¦çš„ä½ç½® size_t m = strlen ( P ), j = 0; //æ¨¡å¼ä¸²é•¿åº¦ã€å½“å‰æŽ¥å—æ¯”å¯¹å­—ç¬¦çš„ä½ç½® while ( j &lt; m &amp;&amp; i &lt; n ) //è‡ªå·¦å‘å³é€ä¸ªæ¯”å¯¹å­—ç¬¦ /*DSA*/&#123;// /*DSA*/showProgress ( T, P, i - j, j ); getchar(); if ( T[i] == P[j] ) //è‹¥åŒ¹é… &#123; i ++; j++; &#125; //åˆ™è½¬åˆ°ä¸‹ä¸€å¯¹å­—ç¬¦ else //å¦åˆ™ &#123; i -= (j - 1); j = 0; &#125; //æ–‡æœ¬ä¸²å›žé€€ã€æ¨¡å¼ä¸²å¤ä½ // i j éƒ½åœ¨å¾€å³èµ°ï¼Œ i -= (j - 1) ç›¸å½“äºŽiåœ¨åˆå§‹ä½ç½® åˆå¾€å³èµ°äº†ä¸€æ­¥ /*DSA*/&#125; return i - j; //å¦‚ä½•é€šè¿‡è¿”å›žå€¼ï¼Œåˆ¤æ–­åŒ¹é…ç»“æžœï¼Ÿ&#125; i , j++ 123456789101112131415161718/****************************************************************************************** * Text : 0 1 2 . . . i i+1 . . . i+j . . n-1 * ------------------------|-------------------|------------ * Pattern : 0 1 . . . j . . * |-------------------| ******************************************************************************************/int match ( char* P, char* T ) &#123; //ä¸²åŒ¹é…ç®—æ³•ï¼ˆBrute-force-2ï¼‰ size_t n = strlen ( T ), i = 0; //æ–‡æœ¬ä¸²é•¿åº¦ã€ä¸Žæ¨¡å¼ä¸²é¦–å­—ç¬¦çš„å¯¹é½ä½ç½® size_t m = strlen ( P ), j; //æ¨¡å¼ä¸²é•¿åº¦ã€å½“å‰æŽ¥å—æ¯”å¯¹å­—ç¬¦çš„ä½ç½® for ( i = 0; i &lt; n - m + 1; i++ ) &#123; //æ–‡æœ¬ä¸²ä»Žç¬¬iä¸ªå­—ç¬¦èµ·ï¼Œä¸Ž for ( j = 0; j &lt; m; j++ ) //æ¨¡å¼ä¸²ä¸­å¯¹åº”çš„å­—ç¬¦é€ä¸ªæ¯”å¯¹ /*DSA*/&#123;showProgress ( T, P, i, j ); getchar(); if ( T[i + j] != P[j] ) break; //è‹¥å¤±é…ï¼Œæ¨¡å¼ä¸²æ•´ä½“å³ç§»ä¸€ä¸ªå­—ç¬¦ï¼Œå†åšä¸€è½®æ¯”å¯¹ /*DSA*/&#125; if ( j &gt;= m ) break; //æ‰¾åˆ°åŒ¹é…å­ä¸² &#125; return i; //å¦‚ä½•é€šè¿‡è¿”å›žå€¼ï¼Œåˆ¤æ–­åŒ¹é…ç»“æžœï¼Ÿ&#125; æ•°æ®ç»“æž„ä¸‹ ç¬¬åä¸‰ç«  ä¸² KMPç®—æ³•ç®—æ³•ä¸»ä½“ KMPæŽ’é™¤äº†ä¸‰ä¸ªä½ç½® 1234567891011121314151617int match ( char* P, char* T ) &#123; //KMPç®—æ³• int* next = buildNext ( P ); //æž„é€ nextè¡¨ int n = ( int ) strlen ( T ), i = 0; //æ–‡æœ¬ä¸²æŒ‡é’ˆ int m = ( int ) strlen ( P ), j = 0; //æ¨¡å¼ä¸²æŒ‡é’ˆ while ( j &lt; m &amp;&amp; i &lt; n ) //è‡ªå·¦å‘å³é€ä¸ªæ¯”å¯¹å­—ç¬¦ /*DSA*/&#123; /*DSA*/showProgress ( T, P, i - j, j ); /*DSA*/printNext ( next, i - j, strlen ( P ) ); /*DSA*/getchar(); printf ( &quot;\\n&quot; ); if ( 0 &gt; j || T[i] == P[j] ) //è‹¥åŒ¹é…ï¼Œæˆ–På·²ç§»å‡ºæœ€å·¦ä¾§ï¼ˆä¸¤ä¸ªåˆ¤æ–­çš„æ¬¡åºä¸å¯äº¤æ¢ï¼‰ &#123; i ++; j ++; &#125; //åˆ™è½¬åˆ°ä¸‹ä¸€å­—ç¬¦ else //å¦åˆ™ j = next[j]; //æ¨¡å¼ä¸²å³ç§»ï¼ˆæ³¨æ„ï¼šæ–‡æœ¬ä¸²ä¸ç”¨å›žé€€ï¼‰ /*DSA*/&#125; delete [] next; //é‡Šæ”¾nextè¡¨ return i - j;&#125; æž„å»ºnextè¡¨ 1234567891011121314int* buildNext ( char* P ) &#123; //æž„é€ æ¨¡å¼ä¸²Pçš„nextè¡¨ size_t m = strlen ( P ), j = 0; //â€œä¸»â€ä¸²æŒ‡é’ˆ int* N = new int[m]; //nextè¡¨ int t = N[0] = -1; //æ¨¡å¼ä¸²æŒ‡é’ˆ while ( j &lt; m - 1 ) if ( 0 &gt; t || P[j] == P[t] ) &#123; //åŒ¹é… j ++; t ++; N[j] = t; //æ­¤å¥å¯æ”¹è¿›... &#125; else //å¤±é… t = N[t]; /*DSA*/printString ( P ); printf ( &quot;\\n&quot; ); /*DSA*/printNext ( N, 0, m ); return N;&#125; https://www.bilibili.com/video/av3246487/ å‰ç¼€ : åŒ…å«é¦–ä½å­—ç¬¦ ä½†ä¸åŒ…å«æœ«ä½å­—ç¬¦çš„å­ä¸²ã€‚ åŽç¼€ï¼š åŒ…å«æœ«ä½å­—ç¬¦ä½†ä¸åŒ…å«é¦–ä½å­—ç¬¦çš„å­ä¸²ã€‚ è¿˜ä¸€ç§ç†è§£ Prefix é•¿åº¦ä¸ºkçš„å‰ç¼€ :èµ·å§‹äºŽé¦–å­—ç¬¦çš„å‰kä¸ªå­—ç¬¦ suffix é•¿åº¦ä¸ºkçš„åŽç¼€ : ç»ˆæ­¢ä¸Žæœ«å…ƒç´ çš„æœ€é åŽçš„kä¸ªå­—ç¬¦ å‰ç¼€ å­—ç¬¦ä¸² : ababacb å‰ç¼€é›†åˆ ï¼šä¸åŒ…æ‹¬æœ€åŽä¸€ä¸ªå­—ç¬¦ a , ab , aba , abab , ababa, ababac åŽç¼€é›†åˆ : ä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªå­—ç¬¦ , b, cb, acb,bacb,abacb,babacb æ‰¾åˆ°å…¬å…±å‰åŽç¼€, å‰ç¼€ç§»åŠ¨åˆ°åŽç¼€çš„ä½ç½® kmpç®—æ³• äº†è§£äº†å‰åŽç¼€ï¼Œå†çœ‹è¿™ä¸ªè§†é¢‘ï¼Œä¼šå¾ˆæ¸…æ™° https://www.bilibili.com/video/BV1AY4y157yL KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•1 è®²è§£åˆ†æžä¸é”™ ,è§†é¢‘2è¿è¡Œç¢°åˆ°ä¸€äº›é—®é¢˜ï¼Œä¹Ÿæ²¡å¬æ‡‚ https://www.bilibili.com/video/BV1Px411z7Yo ã€å®«æ°´ä¸‰å¶ã€‘ç®€å•é¢˜å­¦ KMP ç®—æ³•LeetCodeè¿™ä¸ªé¢˜è§£ï¼Œåˆ†æžèƒ½çœ‹æ‡‚ï¼Œnextæ•°ç»„æž„å»ºä¹Ÿèƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·æž„å»ºçš„, p[j] != p[i] ï¼Œä¸ºä»€ä¹ˆæ˜¯ j = next[j-1]? https://leetcode.cn/problems/implement-strstr/solution/shua-chuan-lc-shuang-bai-po-su-jie-fa-km-tb86/ ä»£ç éšæƒ³å½•https://programmercarl.com/0028.%E5%AE%9E%E7%8E%B0strStr.html#%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E7%89%88%E6%9C%AC å®«æ°´ä¸‰å¶ä¸­çš„é—®é¢˜ ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·æž„å»ºçš„, p[j] != p[i] ï¼Œä¸ºä»€ä¹ˆæ˜¯ j = next[j-1]? éšæƒ³å½•ä¸‹é¢æœ‰è¯´åˆ° ä¸ºä»€ä¹ˆè¦å‰ä¸€ä¸ªå­—ç¬¦çš„å‰ç¼€è¡¨çš„æ•°å€¼å‘¢ï¼Œå› ä¸ºè¦æ‰¾å‰é¢å­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒçš„å‰ç¼€å’ŒåŽç¼€ã€‚ å…³äºŽéšæƒ³å½•è§†é¢‘2ï¼Œè·Ÿç€ä»–è®²çš„ä»£ç æµç¨‹èµ°éƒ½æ¸…æ¥šç†è§£äº†ï¼Œå°±æ˜¯ nextä¸ºä»€ä¹ˆå›žé€€, åŽŸç†æ²¡å¤ªæ˜Žç™½. æœ‰ç©ºå¬å¬ä»–è®²çš„ 50åˆ†é’Ÿè®²åˆ°å›žæº¯,æ¯”è¾ƒæ¸…æ™°ï¼Œä¸è¿‡ç”¨æ±‰å­—æ¯”è¾ƒçœ‹äº†æ„Ÿè§‰ä¸å¤ªå¥½ https://www.bilibili.com/video/BV1S64y1u74P 22åˆ†é’Ÿè®²äº†å›žæº¯ https://www.bilibili.com/video/BV1CY4y14751 kmpä¼˜åŒ–å·æ‡’æŠ€å·§ ä¸­é—´åŠ ç‰¹æ®Šç¬¦å·# è¿žèµ·æ¥ æ²¡å¬æ‡‚ æœ€ç»ˆè¿˜æ˜¯çœ‹éšæƒ³å½•è§†é¢‘ç†è§£ i åŽç¼€æœ«ä½ï¼ˆä»Žå·¦åˆ°å³ï¼‰ ï¼Œ jå‰ç¼€æœ«ä½(ä¹Ÿæ˜¯æœ€é•¿å…¬å…±å‰åŽç¼€çš„é•¿åº¦)","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"Assembly","slug":"Assembly","date":"2021-05-21T03:13:41.000Z","updated":"2022-07-16T15:07:08.236Z","comments":true,"path":"2021/05/21/Assembly/","link":"","permalink":"https://noteforme.github.io/2021/05/21/Assembly/","excerpt":"","text":"8086 14ä¸ªå¯„å­˜å™¨AX , BX , CX , DX , SI , DI , SP , BP, IP , CS , SS, DS ,ES ,PSW å®žéªŒçŽ¯å¢ƒæ­å»º https://github.com/froginwell/assembly https://www.bilibili.com/s/video/BV1254y1B75r CS:IP ä»–ä»¬æŒ‡ç¤ºäº†CPUå½“å‰è¦è¯»å–æŒ‡ä»¤çš„åœ°å€ã€‚ CSä¸ºä»£ç æ®µåœ°å€ IP æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ jmp ax ,å«ä¹‰ä¸Šç±»ä¼¼ ï¼š mov IP , ax ç¬¬ä¸‰ç« DSå’Œaddressdebugä¸­ï¼Œå†…å­˜å•å…ƒä»Žå·¦åˆ°å³æ˜¯åœ°å€ä»Žä½Žåˆ°é«˜é¡ºåºæŽ’åˆ—çš„ã€‚ 8086CPUè‡ªåŠ¨å–dsä¸­çš„æ•°æ®ä¸ºå†…å­˜å•å…ƒçš„æ®µåœ°å€ move , add , sub [0] ï¼Œ 0è¡¨ç¤ºå†…å­˜å•å…ƒçš„åç§»åœ°å€ SS:SP æŒ‡å‘æ ˆé¡¶å…ƒç´ ï¼Œæ ˆé¡¶çš„æ®µåœ°å€å­˜æ”¾åœ¨æ ˆé¡¶ï¼Œåç§»åœ°å€å­˜æ”¾åœ¨SPä¸­ã€‚ Loop5.3 åœ¨Debugä¸­è·Ÿè¸ªç”¨loopæŒ‡ä»¤å®žçŽ°çš„å¾ªçŽ¯ç¨‹åº â€‹ å®žéªŒå›› å‘å†…å­˜0:200H0:23fHä¾æ¬¡ä¼ é€æ•°æ®063ï¼ˆ3FHï¼‰ å†…å­˜0:200H~0:23fHç©ºé—´ä¸Ž0020:0-0020:3få†…å­˜ç©ºé—´æ˜¯ä¸€æ ·çš„ (0:200 0020:0ç‰©ç†åœ°å€ç›¸åŒ) ç­”æ¡ˆ https://www.cnblogs.com/Base-Of-Practice/category/1005745.html https://blackdragonf.github.io/2017/03/09/%E7%8E%8B%E7%88%BD%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%AC%AC%E4%B8%89%E7%89%88%E5%AE%9E%E9%AA%8C/ è§†é¢‘ å°ç”²é±¼ å‰‘æŒ‡ Offer 58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²æ•°ç»„System.arraycopyæ·±å…¥åˆ†æžç”¨åˆ°äº†æ±‡ç¼–æŒ‡ä»¤,åŽé¢å¯ä»¥åŠ å¼ºå­¦ä¹ ,å…¶å®žåº•å±‚çš„çŸ¥è¯†è¿˜æ˜¯éœ€è¦çš„ï¼Œè¦ä¸ç„¶æ²¡æ³•æ·±å…¥ä¸‹åŽ»äº† https://blog.csdn.net/jackgo73/article/details/111866491","categories":[],"tags":[{"name":"Assembly","slug":"Assembly","permalink":"https://noteforme.github.io/tags/Assembly/"}]},{"title":"Data_LinkedList","slug":"Data-LinkedList","date":"2021-04-19T13:49:19.000Z","updated":"2022-05-06T11:24:51.238Z","comments":true,"path":"2021/04/19/Data-LinkedList/","link":"","permalink":"https://noteforme.github.io/2021/04/19/Data-LinkedList/","excerpt":"","text":"é“¾è¡¨ é¦–èŠ‚ç‚¹ ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ å°¾èŠ‚ç‚¹ æœ€åŽä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ å¤´èŠ‚ç‚¹ å¤´èŠ‚ç‚¹çš„æ•°æ®ç±»åž‹å’Œé¦–èŠ‚ç‚¹ç±»åž‹ä¸€æ · ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ä¹‹å‰çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œåªå­˜æ”¾äº† é¦–èŠ‚ç‚¹ çš„åœ°å€ å¤´èŠ‚ç‚¹å¹¶ä¸å­˜åœ¨æœ‰æ•ˆæ•°æ® åŠ å¤´èŠ‚ç‚¹çš„ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿å¯¹é“¾è¡¨çš„æ“ä½œ å¤´æŒ‡é’ˆ â€‹ æŒ‡å‘å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆå˜é‡ â€‹ åªå ç”¨4ä¸ªbyte,æ¯”å¤´èŠ‚ç‚¹å ç”¨ç©ºé—´å°. å°¾æŒ‡é’ˆ æŒ‡å‘å°¾èŠ‚ç‚¹çš„æŒ‡é’ˆå˜é‡ æ ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112#include &lt;printf.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;#include &lt;stdbool.h&gt;typedef struct Node &#123; int data; struct Node *pNext;&#125; NODE, *PNODE;typedef struct Stack &#123; PNODE pTop; PNODE pBottom;&#125; STACK, *PSTACK; //PSTACKç­‰ä»·äºŽ stuct STACK *void init(PSTACK);void push(STACK *pStack, int i);void traverse(STACK *pStack);bool pop(PSTACK pS, int *pVal);void clear(PSTACK ps);bool empty(PSTACK pStack);int main() &#123; STACK S; //ç­‰ä»·äºŽ struct Stack init(&amp;S); push(&amp;S, 1); push(&amp;S, 22); push(&amp;S, 88); traverse(&amp;S); int val;// if (pop(&amp;S, &amp;val)) &#123;// printf(&quot;å‡ºæ ˆæˆåŠŸ\\n&quot;);// printf(&quot;å‡ºæ ˆçš„æ•°æ® %d \\n&quot;, val);// &#125; else &#123;// printf(&quot;å‡ºæ ˆå¤±è´¥\\n&quot;);// &#125; clear(&amp;S); printf(&quot;æ¸…ç©ºæ•°æ®\\n&quot;); traverse(&amp;S);&#125;void push(STACK *pStack, int val) &#123; PNODE pNew = (PNODE) malloc(sizeof(NODE)); pNew-&gt;data = val; pNew-&gt;pNext = pStack-&gt;pTop; //å¦‚æžœæ˜¯ç©ºå¯ä»¥ç”¨pBottomï¼Œä½†æ˜¯åŽé¢ä¸ä¸ºç©º pStack-&gt;pTop = pNew;&#125;void init(PSTACK pS) &#123; pS-&gt;pTop = (PNODE) malloc(sizeof(NODE)); if (NULL == pS-&gt;pTop) &#123; printf(&quot;åŠ¨æ€å†…å­˜åˆ†é…å¤±è´¥!\\n&quot;); exit(-1); &#125; else &#123; pS-&gt;pBottom = pS-&gt;pTop; pS-&gt;pTop-&gt;pNext = NULL; &#125;&#125;void traverse(PSTACK pS) &#123; PNODE p = pS-&gt;pTop; while (p != pS-&gt;pBottom) &#123; printf(&quot;%d &quot;, p-&gt;data); p = p-&gt;pNext; &#125;&#125;//æŠŠpSæ‰€æŒ‡å‘çš„æ ˆå‡ºæ ˆä¸€æ¬¡ï¼Œå¹¶æŠŠå‡ºæ ˆçš„å…ƒç´ å­˜å…¥pValå½¢å‚æ‰€æŒ‡å‘çš„å˜é‡ä¸­ï¼Œå¦‚æžœå‡ºæ ˆå¤±è´¥ï¼Œè¿”å›žfalse,å¦åˆ™è¿”å›žtrue,bool pop(PSTACK pS, int *pVal) &#123; *pVal = pS-&gt;pTop-&gt;data; PNODE p = pS-&gt;pTop; if (pS-&gt;pTop != pS-&gt;pBottom) &#123; //æˆ–è€…å†™ä¸ªæ–¹æ³• isEmpty() pS-&gt;pTop = pS-&gt;pTop-&gt;pNext; return true; &#125; free(p); return false;&#125;//æ¸…ç©ºvoid clear(PSTACK pS)&#123; if(empty(pS))&#123; return; &#125; else&#123; PNODE p = pS-&gt;pTop; PNODE q = NULL; while(p!=pS-&gt;pBottom)&#123; q = p-&gt;pNext; free(p); p = q; &#125; pS-&gt;pTop = pS-&gt;pBottom; &#125;&#125;bool empty(PSTACK pS) &#123; if(pS-&gt;pTop==pS-&gt;pBottom)&#123; return true; &#125; return false;&#125; åº”ç”¨ å‡½æ•°è°ƒç”¨ ä¸­æ–­ è¡¨è¾¾å¼æ±‚å€¼ å†…å­˜åˆ†é… ç¼“å†²å¤„ç† è¿·å®« é“¾è¡¨é˜Ÿåˆ—é˜Ÿåˆ— ï¼š ä¸€ç§å¯ä»¥å®žçŽ°å…ˆè¿›å…ˆå‡ºçš„å­˜å‚¨ç»“æž„ é˜Ÿåˆ—é“¾å¼é˜Ÿåˆ— â€“ ç”¨é“¾è¡¨å®žçŽ°ã€‚ é™æ€é˜Ÿåˆ— â€“ ç”¨æ•°ç»„å®žçŽ°ã€‚ å¾ªçŽ¯é˜Ÿåˆ—ï¼ˆæ•°ç»„ï¼‰å®šä¹‰ é˜Ÿåˆ—åˆå§‹åŒ– frontå’Œrearçš„å€¼éƒ½æ˜¯0ã€‚ é˜Ÿåˆ—éžç©º frontä»£è¡¨é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ rearä»£è¡¨é˜Ÿåˆ—çš„æœ€åŽä¸€ä¸ªæœ‰æ•ˆ å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ é˜Ÿåˆ—ç©º frontå’Œrearçš„å€¼ç›¸ç­‰ï¼Œä½†ä»–ä»¬çš„å€¼ä¸ä¸€å®šæ—¶0ã€‚ æ“ä½œå…¥é˜Ÿ: å°†å€¼å­˜å…¥ræ‰€ä»£è¡¨çš„ä½ç½®ï¼ŒæŽ¥ç€råŽç§»ä¸€ä½ã€‚ å‡ºé˜Ÿ:fåŽç§»ä¸€ä½ã€‚ å¦‚ä½•åˆ¤æ–­å¾ªçŽ¯é˜Ÿåˆ—æ˜¯å¦å·²æ»¡â€‹ r==fæ—¶å€™ï¼Œå¯èƒ½ä¸ºç©ºï¼Œé¡µå¯èƒ½æ»¡çš„ã€‚ å¤šå¢žåŠ ä¸€ä¸ªæ ‡è¯†å‚æ•°ï¼Œå­˜æ”¾å…ƒç´ ä¸ªæ•° å°‘ç”¨ä¸€ä¸ªå…ƒç´  (r+1)%æ•°ç»„çš„é•¿åº¦ = f ![](Data-LinkedList/Screenshot from 2021-04-22 17-48-04_circleLinkedList.png) CircleQueue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108#include &lt;stdio.h&gt;#include &lt;stdbool.h&gt;#include &lt;stdlib.h&gt;typedef struct Queue &#123; int *pBase; int front; int rear;&#125; QUEUE;void init(QUEUE *);bool en_queue(QUEUE *, int val); //å…¥é˜Ÿvoid traverse_queue(QUEUE *);bool full_queue(QUEUE *pQueue);//é˜Ÿåˆ—æ˜¯å¦å·²æ»¡bool out_queue(QUEUE *pQueue, int *pInt); //å‡ºé˜Ÿbool empty_queue(QUEUE *pQueue);int main() &#123; QUEUE Q; init(&amp;Q); en_queue(&amp;Q, 2); en_queue(&amp;Q, 7); en_queue(&amp;Q, 33); en_queue(&amp;Q, 4); en_queue(&amp;Q, 9); traverse_queue(&amp;Q); //æ‰§è¡Œè¿™å¥ pQ-&gt;frontä¼šå˜ï¼Œæ‰€ä»¥å‡ºé˜Ÿåˆ—å¤±è´¥// int pVal;// if(out_queue(&amp;Q,&amp;pVal))&#123;// printf(&quot;å‡ºé˜ŸæˆåŠŸï¼Œå‡ºé˜Ÿå…ƒç´ æ˜¯ %d \\n&quot;,pVal);// &#125; else&#123;// printf(&quot;å‡ºé˜Ÿå¤±è´¥\\n&quot;);// &#125;// traverse_queue(&amp;Q);&#125;void init(QUEUE *pQ) &#123; pQ-&gt;pBase = malloc(sizeof(int) * 6); pQ-&gt;front = 0; pQ-&gt;rear = 0;&#125;bool full_queue(QUEUE *pQ) &#123; if ((pQ-&gt;rear + 1) % 6 == pQ-&gt;front) &#123; return true; &#125; return false;&#125;bool en_queue(QUEUE *pQ, int val) &#123; if (full_queue(pQ)) &#123; return false; &#125; else &#123; pQ-&gt;pBase[pQ-&gt;rear] = val; pQ-&gt;rear = (pQ-&gt;rear + 1) % 6; return true; &#125;&#125;//void traverse_queue(QUEUE *pQ) &#123;// int q = pQ-&gt;front;// while ((q) % 6 != pQ-&gt;rear) &#123;// printf(&quot; %d &quot;, pQ-&gt;pBase[(pQ-&gt;front++) % 6]);// q++;// &#125;// return;//&#125;//æˆ–è€…ä¸‹é¢æ–¹å¼void traverse_queue(QUEUE *pQ) &#123; int i = pQ-&gt;front; while (i!=pQ-&gt;rear)&#123; printf(&quot;%d &quot;,pQ-&gt;pBase[i]); i = (i+1)%6; &#125; printf(&quot;\\n&quot;); return;&#125;bool out_queue(QUEUE *pQ, int *pInt) &#123; if(empty_queue(pQ))&#123; return false; &#125; else&#123; *pInt = pQ-&gt;pBase[pQ-&gt;front]; pQ-&gt;front=(pQ-&gt;front+1)%6; return true; &#125;&#125;bool empty_queue(QUEUE *pQ) &#123; if(pQ-&gt;front==pQ-&gt;rear)&#123; return true; &#125; return false;&#125;","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"Data_Tree","slug":"Data-Tree","date":"2021-03-24T13:46:39.000Z","updated":"2021-08-19T11:11:43.778Z","comments":true,"path":"2021/03/24/Data-Tree/","link":"","permalink":"https://noteforme.github.io/2021/03/24/Data-Tree/","excerpt":"","text":"æ ‘åˆ†ç±» æ»¡äºŒå‰æ ‘ : â€‹ åœ¨ä¸å¢žåŠ æ ‘çš„å±‚æ•°çš„å‰æä¸‹ï¼Œæ— æ³•å†å¤šæ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘å°±æ˜¯æ»¡äºŒå‰æ ‘ã€‚ å®Œå…¨äºŒå‰æ ‘ : â€‹ å¦‚æžœåªæ˜¯åˆ é™¤äº†æ»¡äºŒå‰æ ‘æœ€åº•å±‚æœ€å³è¾¹çš„è¿žç»­è‹¥å¹²ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·å½¢æˆçš„äºŒå‰æ ‘æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚ æ ‘çš„å­˜å‚¨äºŒå‰æ ‘è¡¨ç¤ºæ³• â€‹ å…ˆæŠŠä¸€èˆ¬æ ‘è½¬åŒ–ä¸ºäºŒå‰æ ‘ï¼Œå†å­˜å‚¨äºŒå‰æ ‘ã€‚ â€‹ ä¸€èˆ¬æ ‘è½¬åŒ–ä¸ºäºŒå‰æ ‘çš„æ–¹æ³•æ˜¯:è®¾æ³•ä¿è¯ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„ å·¦æŒ‡é’ˆåŸŸæŒ‡å‘å®ƒçš„ç¬¬ä¸€ä¸ªå­©å­ å³æŒ‡é’ˆåŸŸæŒ‡å‘å®ƒçš„ä¸‹ä¸€ä¸ªå…„å¼Ÿ åªè¦èƒ½æ»¡è¶³æ­¤æ¡ä»¶ï¼Œå°±å¯ä»¥æŠŠä¸€ä¸ªæ™®é€šæ ‘è½¬åŒ–ä¸ºäºŒå‰æ ‘æ¥å­˜å‚¨ã€‚ BSTæ ‘- Binary search treeåˆ é™¤ 1234567891011121314151617181920212223template&lt;typename T&gt;static BinNodePosi&lt;T&gt; removeAt(BinNodePosi&lt;T&gt; &amp;x, BinNodePosi&lt;T&gt; &amp;hot) &#123; printf(&quot; x %d \\n&quot;,x-&gt;data); BinNodePosi&lt;T&gt; w = x; //å®žé™…è¢«æ‘˜é™¤çš„èŠ‚ç‚¹ï¼Œåˆå€¼åŒx BinNodePosi&lt;T&gt; succ = NULL; //å®žé™…è¢«åˆ é™¤èŠ‚ç‚¹çš„æŽ¥æ›¿è€… if (!HasLChild (*x)) //è‹¥*xçš„å·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™å¯ succ = x = x-&gt;rc; //ç›´æŽ¥å°†*xæ›¿æ¢ä¸ºå…¶å³å­æ ‘ else if (!HasRChild (*x)) //è‹¥å³å­æ ‘ä¸ºç©ºï¼Œåˆ™å¯ succ = x = x-&gt;lc; //å¯¹ç§°åœ°å¤„ç†â€”â€”æ³¨æ„ï¼šæ­¤æ—¶succ != NULL else &#123; //è‹¥å·¦å³å­æ ‘å‡å­˜åœ¨ï¼Œåˆ™é€‰æ‹©xçš„ç›´æŽ¥åŽç»§ä½œä¸ºå®žé™…è¢«æ‘˜é™¤èŠ‚ç‚¹ï¼Œä¸ºæ­¤éœ€è¦ w = w-&gt;succ(); //ï¼ˆåœ¨å³å­æ ‘ä¸­ï¼‰æ‰¾åˆ°*xçš„ç›´æŽ¥åŽç»§*w swap(x-&gt;data, w-&gt;data); //äº¤æ¢*xå’Œ*wçš„æ•°æ®å…ƒç´  BinNodePosi&lt;T&gt; u = w-&gt;parent; printf(&quot;u %d x %d \\n&quot;,u-&gt;data,x-&gt;data); ((u == x) ? u-&gt;rc : u-&gt;lc) = succ = w-&gt;rc; //éš”ç¦»èŠ‚ç‚¹*w // (u == x)æ„Ÿè§‰æ²¡ä½œç”¨å‘€ ??? &#125; hot = w-&gt;parent; //è®°å½•å®žé™…è¢«åˆ é™¤èŠ‚ç‚¹çš„çˆ¶äº² if (succ) succ-&gt;parent = hot; //å¹¶å°†è¢«åˆ é™¤èŠ‚ç‚¹çš„æŽ¥æ›¿è€…ä¸Žhotç›¸è” release(w-&gt;data); release(w); return succ; //é‡Šæ”¾è¢«æ‘˜é™¤èŠ‚ç‚¹ï¼Œè¿”å›žæŽ¥æ›¿è€…&#125; //rele â€‹ æ ‘çš„éåŽ† â€‹ M N ä½œä¸ºæ ¹èŠ‚ç‚¹ å…ˆåºéåŽ†[å…ˆè®¿é—®æ ¹èŠ‚ç‚¹] å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ å†å…ˆåºè®¿é—®å·¦å­æ ‘ å†å…ˆåºè®¿é—®å³å­æ ‘ A B Q M N L C D H K E F ä¸­åºéåŽ†[ä¸­é—´è®¿é—®æ ¹èŠ‚ç‚¹] ä¸­åºéåŽ†å·¦å­æ ‘ å†è®¿é—®æ ¹èŠ‚ç‚¹ å†ä¸­éåŽ†å³å­æ ‘ M Q N B L A H D K C E F åŽåºéåŽ†[æœ€åŽè®¿é—®æ ¹èŠ‚ç‚¹] å…ˆä¸­åºéåŽ†å·¦å­æ ‘ å†ä¸­åºéåŽ†å³å­æ ‘ å†è®¿é—®æ ¹èŠ‚ç‚¹ M N Q L B H K D F E C A æŽ¨å¯¼é€šè¿‡å…ˆåºå’Œä¸­åºæˆ–è€… ä¸­åºå’ŒåŽåºå¯ä»¥è¿˜åŽŸå‡º åŽŸå§‹çš„äºŒå‰æ ‘. ç¤ºä¾‹1 å…ˆåº: ABCDEFGH ä¸­åº:BDCEAFHG æ±‚åŽåº: DECBHGFA ç¤ºä¾‹2 å…ˆåº: ABDGHCEFI ä¸­åº:GDHBAECIF æ±‚åŽåº : G H D B E I F C A äºŒå‰æ ‘éåŽ†ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586#include &lt;zconf.h&gt;#include &lt;malloc.h&gt;struct BTNode &#123; int data; struct BTNode *pLchild; struct BTNode *pRchild;&#125;;struct BTNode *createBTree();void preTraverseBTree(struct BTNode *pNode);int main() &#123; struct BTNode *pT = createBTree();// preTraverseBTree(pT);// inTraverseBTree(pT); postTraverseBTree(pT); return 0;&#125;void preTraverseBTree(struct BTNode *pNode) &#123; if (pNode-&gt;data != NULL) &#123; printf(&quot;%c\\n&quot;, pNode-&gt;data); if (pNode-&gt;pLchild != NULL) &#123; preTraverseBTree(pNode-&gt;pLchild); &#125; if (pNode-&gt;pRchild != NULL) &#123; preTraverseBTree(pNode-&gt;pRchild); &#125; &#125;&#125;void inTraverseBTree(struct BTNode *pNode) &#123; if (pNode-&gt;data != NULL) &#123; if (pNode-&gt;pLchild != NULL) &#123; inTraverseBTree(pNode-&gt;pLchild); &#125; printf(&quot;%c\\n&quot;, pNode-&gt;data); if (pNode-&gt;pRchild != NULL) &#123; inTraverseBTree(pNode-&gt;pRchild); &#125; &#125;&#125;void postTraverseBTree(struct BTNode *pNode) &#123; if (pNode-&gt;data != NULL) &#123; if (pNode-&gt;pLchild != NULL) &#123; postTraverseBTree(pNode-&gt;pLchild); &#125; if (pNode-&gt;pRchild != NULL) &#123; postTraverseBTree(pNode-&gt;pRchild); &#125; printf(&quot;%c\\n&quot;, pNode-&gt;data); &#125;&#125;struct BTNode *createBTree() &#123; struct BTNode *pA = (struct BTNode *) malloc(sizeof(struct BTNode)); struct BTNode *pB = (struct BTNode *) malloc(sizeof(struct BTNode)); struct BTNode *pC = (struct BTNode *) malloc(sizeof(struct BTNode)); struct BTNode *pD = (struct BTNode *) malloc(sizeof(struct BTNode)); struct BTNode *pE = (struct BTNode *) malloc(sizeof(struct BTNode)); pA-&gt;data = &#x27;A&#x27;; pB-&gt;data = &#x27;B&#x27;; pC-&gt;data = &#x27;C&#x27;; pD-&gt;data = &#x27;D&#x27;; pE-&gt;data = &#x27;E&#x27;; pA-&gt;pLchild = pB; pA-&gt;pRchild = pC; pB-&gt;pLchild = pB-&gt;pRchild = NULL; pC-&gt;pLchild = pD; pC-&gt;pRchild = NULL; pD-&gt;pLchild = NULL; pD-&gt;pRchild = pE; pE-&gt;pLchild = pE-&gt;pRchild = NULL; return pA;&#125; AVLæ ‘å·¦å³å­æ ‘çš„é«˜åº¦å·® ä¸è¶…è¿‡1 é€šè¿‡å·¦æ—‹æˆ–è€…å³æ—‹(å·¦æ—‹å³æ—‹åŽä¸€å®šä¸ä¼šç ´åäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾è§„åˆ™ zig zagzig é¡ºæ—¶é’ˆ zag é€†æ—¶é’ˆ g : grandparentèŠ‚ç‚¹ p : parentèŠ‚ç‚¹ zigzig zigzagèŠ‚ç‚¹ ç±»ä¼¼å·¥äººç»„è£…é­”æ–¹ï¼Œç¡®å®šå¥½ G P V æ‰€å¯¹åº”çš„ a b c ,ä½• 0 1 2 3 æ‰€å¯¹åº”çš„ T0 T1 T2 T3,ç›´æŽ¥ç»„è£…ç¨‹å›¾1çš„æ ‘ 1234567891011121314151617181920template &lt;typename T&gt; BinNodePosi&lt;T&gt; BST&lt;T&gt;::rotateAt ( BinNodePosi&lt;T&gt; v ) &#123; //vä¸ºéžç©ºå­™è¾ˆèŠ‚ç‚¹ /*DSA*/if ( !v ) &#123; printf ( &quot;\\a\\nFail to rotate a null node\\n&quot; ); exit ( -1 ); &#125; BinNodePosi&lt;T&gt; p = v-&gt;parent; BinNodePosi&lt;T&gt; g = p-&gt;parent; //è§†vã€på’Œgç›¸å¯¹ä½ç½®åˆ†å››ç§æƒ…å†µ if ( IsLChild ( *p ) ) /* zig */ if ( IsLChild ( *v ) ) &#123; /* zig-zig */ //*DSA*/printf(&quot;\\tzIg-zIg: &quot;); p-&gt;parent = g-&gt;parent; //å‘ä¸Šè”æŽ¥ return connect34 ( v, p, g, v-&gt;lc, v-&gt;rc, p-&gt;rc, g-&gt;rc ); &#125; else &#123; /* zig-zag */ //*DSA*/printf(&quot;\\tzIg-zAg: &quot;); v-&gt;parent = g-&gt;parent; //å‘ä¸Šè”æŽ¥ return connect34 ( p, v, g, p-&gt;lc, v-&gt;lc, v-&gt;rc, g-&gt;rc ); &#125; else /* zag */ if ( IsRChild ( *v ) ) &#123; /* zag-zag */ //*DSA*/printf(&quot;\\tzAg-zAg: &quot;); p-&gt;parent = g-&gt;parent; //å‘ä¸Šè”æŽ¥ return connect34 ( g, p, v, g-&gt;lc, p-&gt;lc, v-&gt;lc, v-&gt;rc ); &#125; else &#123; /* zag-zig */ //*DSA*/printf(&quot;\\tzAg-zIg: &quot;); v-&gt;parent = g-&gt;parent; //å‘ä¸Šè”æŽ¥ return connect34 ( g, v, p, g-&gt;lc, v-&gt;lc, v-&gt;rc, p-&gt;rc ); &#125;&#125; ä¼¸ç¼©æ ‘ B-TreeBæ ‘è§£å†³ ä¸€æ®µä¸€æ®µä»ŽIOè¯»å–æ•°æ® åœ°å€ Bæ ‘æ’å…¥å› ä¸ºæ–°èŠ‚ç‚¹çš„æ’å…¥ï¼Œå¯¼è‡´æ‰€å±žèŠ‚ç‚¹çš„åˆ†æ”¯æ•°è¶…è¿‡Bæ ‘é˜¶æ¬¡mçš„æƒ…å†µç§°ä½œoverflow â€‹ m=5æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åˆ†æ”¯æ•°ä¸è¶…è¿‡5ï¼Œä¸€èˆ¬èŠ‚ç‚¹åˆ†æ”¯æ ‘ä¸å°‘äºŽæ˜¯3, (3,5) â€‹ m=6 å¯¹äºŽ6é˜¶Bæ ‘ï¼Œåˆ†æ”¯æ ‘çš„ä¸Šé™æ˜¯6ï¼Œä¸‹é™æ˜¯3ã€‚ (3,6) Bæ ‘ä¸Šæº¢åˆ†è£‚ A[n/2]èŠ‚ç‚¹ä¸­ç‚¹åˆ†è£‚ â€‹ æ’å…¥37ï¼Œç„¶åŽä¸Šæº¢åˆ†è£‚ ä¸‹æº¢ å…ˆä»Žå…„å¼Ÿæ ‘å€ŸèŠ‚ç‚¹ï¼Œå€Ÿä¸åˆ°çš„è¯å°±åˆå¹¶ 2-3-4æ ‘ç‰¹ç‚¹ æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½æ‹¥æœ‰ç›¸åŒçš„æ·±åº¦ã€‚ èŠ‚ç‚¹åªèƒ½æ˜¯ 2-èŠ‚ç‚¹ã€3-èŠ‚ç‚¹ã€4-èŠ‚ç‚¹ä¹‹ä¸€ã€‚ 2-èŠ‚ç‚¹:åŒ…å« 1 ä¸ªå…ƒç´ çš„èŠ‚ç‚¹ï¼Œæœ‰ 2 ä¸ªå­èŠ‚ç‚¹; 3-èŠ‚ç‚¹:åŒ…å« 2 ä¸ªå…ƒç´ çš„èŠ‚ç‚¹ï¼Œæœ‰ 3 ä¸ªå­èŠ‚ç‚¹; 4-èŠ‚ç‚¹:åŒ…å« 3 ä¸ªå…ƒç´ çš„èŠ‚ç‚¹ï¼Œæœ‰ 4 ä¸ªå­èŠ‚ç‚¹; æ‰€æœ‰èŠ‚ç‚¹å¿…é¡»è‡³å°‘åŒ…å«1ä¸ªå…ƒç´  å…ƒç´ å§‹ç»ˆä¿æŒæŽ’åºé¡ºåºï¼Œæ•´ä½“ä¸Šä¿æŒäºŒå‰æŸ¥æ‰¾æ ‘çš„æ€§è´¨ï¼Œå³çˆ¶ç»“ç‚¹å¤§äºŽå·¦å­ç»“ç‚¹ï¼Œå°äºŽå³å­ç»“ç‚¹; è€Œä¸”ç»“ç‚¹æœ‰å¤šä¸ªå…ƒç´ æ—¶ï¼Œæ¯ä¸ªå…ƒç´ å¿…é¡»å¤§äºŽå®ƒå·¦è¾¹çš„å’Œå®ƒçš„å·¦å­æ ‘ä¸­å…ƒç´ ã€‚ 2-3æ ‘çš„ç”Ÿé•¿å’Œæ ‡å‡†çš„äºŒå‰æŸ¥æ‰¾æ ‘ç”±ä¸Šå‘ä¸‹ç”Ÿé•¿ä¸åŒï¼Œ2-3æ ‘çš„ç”Ÿé•¿æ˜¯ç”±ä¸‹å‘ä¸Šçš„ã€‚ çº¢é»‘äºŒå‰æŸ¥æ‰¾æ ‘2-3-4æ ‘ä¸Žçº¢é»‘æ ‘çš„ç­‰ä»·å…³ç³» â€‹ â€‹ è£‚å˜çŠ¶æ€ 9å…ˆä»Žé»‘èŠ‚ç‚¹(ä»Ž4èŠ‚ç‚¹)å˜æˆçº¢èŠ‚ç‚¹ï¼Œ10ã€12å…ˆä»Žçº¢èŠ‚ç‚¹å˜æˆé»‘èŠ‚ç‚¹ã€‚ 2-3-4 æ ‘æ–°å¢žæ“ä½œï¼Œä»Žå¶å­èŠ‚ç‚¹å¼€å§‹ çº¢é»‘æ ‘ æ€§è´¨çº¢é»‘æ ‘æ˜¯ä¸€ç§ç»“ç‚¹å¸¦æœ‰é¢œè‰²å±žæ€§çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä½†å®ƒåœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹5å¤§æ€§è´¨: èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚ æ ¹æ˜¯é»‘è‰²ã€‚ æ‰€æœ‰å¶å­éƒ½æ˜¯é»‘è‰²(å¶å­æ˜¯NILèŠ‚ç‚¹ï¼Œè¿™ç±»èŠ‚ç‚¹ä¸å¯ä»¥å¿½è§†ï¼Œå¦åˆ™ä»£ç ä¼šçœ‹ä¸æ‡‚)ã€‚ æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹å¿…é¡»æœ‰ä¸¤ä¸ªé»‘è‰²çš„å­èŠ‚ç‚¹ã€‚(ä»Žæ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿žç»­çš„çº¢è‰²èŠ‚ç‚¹ã€‚) ä»Žä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰ç®€å•è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹(é»‘è‰²å¹³è¡¡)ã€‚// 2-3-4æ ‘å±‚çº§ç›¸ç­‰. https://www.cs.usfca.edu/~galles/visualization/RedBlack.html çº¢é»‘æ ‘ æ–°å¢žéƒ½æ˜¯çº¢è‰²èŠ‚ç‚¹ æ ¹æ®ä¸Šé¢çš„ç­‰ä»·å…³ç³»ï¼ŒæŠŠ2-3-4æ ‘è½¬æ¢æˆä¸‹é¢çš„çº¢é»‘æ ‘ã€‚ https://www.bilibili.com/video/BV135411h7wJ?p=4 æ—‹è½¬ 12345678910111213141516171819202122232425262728293031/** * å›´ç»•på·¦æ—‹ * pf pf * / / * p pr(r) * / \\ ==&gt; / \\ * pl pr(r) p rr * / \\ / \\ * rl rr pl rl * * @param p */ private void leftRotate(RBNode p) &#123; if (p != null) &#123; RBNode r = p.right; p.right = r.left; if (r.left != null) &#123; r.left.parent = p; &#125; r.parent = p.parent; if (p.parent == null) &#123; root = r; &#125; else if (p.parent.left == p) &#123; p.parent.left = r; &#125; else &#123; p.parent.right = r; &#125; r.left = p; p.parent = r; &#125; &#125; 12345678910111213141516171819202122232425262728293031/** * å³æ—‹ * pf pf * \\ \\ * p (l)pl * / \\ =&gt; / \\ *(l)pl pr ll p * / \\ / \\ * ll lr lr pr * * @param p */ private void rightRotate(RBNode p) &#123; if (p != null) &#123; RBNode l = p.left; p.left = l.right; if (l.right != null) &#123; l.right.parent = p; &#125; l.parent = p.parent; if (p.parent == null) &#123; root = l; &#125; else if (p.parent.right == p) &#123; p.parent.right = l; &#125; else &#123; p.parent.left = l; &#125; l.right = p; p.parent = l; &#125; &#125; æ–°å¢žçº¢é»‘æ ‘æ–°å¢žï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ æ˜¯çº¢èŠ‚ç‚¹ æ–°å¢žçš„èŠ‚ç‚¹éƒ½æ˜¯çº¢èŠ‚ç‚¹ çº¢é»‘æ ‘å½¢æˆè¿‡ç¨‹ï¼Œå¿˜äº†æ€Žä¹ˆå½¢æˆï¼ŒåŒ…æ‹¬æ—‹è½¬ ï¼Œ èŠ‚ç‚¹é¢œè‰²æ˜¯æ€Žä¹ˆå˜åŒ–çš„ã€‚ åˆ é™¤https://www.cs.usfca.edu/~galles/visualization/RedBlack.html å›¾æ‰¾åˆ°æœ€ä¼˜è·¯å¾„","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"Data_Sort","slug":"Data-Sort","date":"2021-03-21T05:04:53.000Z","updated":"2021-08-19T11:11:43.770Z","comments":true,"path":"2021/03/21/Data-Sort/","link":"","permalink":"https://noteforme.github.io/2021/03/21/Data-Sort/","excerpt":"","text":"æŽ’åºå†’æ³¡ 1234567891011public static void bubbleSort(int[] arr) &#123; for (int i = arr.length - 1; i &gt; 0; i--) &#123; //å‰©ä½™éœ€è¦æŽ’åºçš„é•¿åº¦ for (int j = 0; j &lt; i; j++) &#123; if (arr[j] &gt; arr[j + 1]) &#123; int t = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = t; &#125; &#125; &#125;&#125; æ€è·¯1: ç¬¬ä¸€æ¬¡éåŽ†æœ€å¤§çš„å…ƒç´ æ”¾åˆ°æœ€å³è¾¹ï¼Œç¬¬äºŒéæ”¾å€’æ•°ç¬¬äºŒä¸ªä½ç½®ï¼Œâ€¦ ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯i ä¹Ÿé€’å¢žï¼Œj&lt; arr.length - 1 - i ã€‚ä½†æ˜¯è¿™æ ·å¯è¯»æ€§å°±ä¸å¦‚ i é€’å‡çš„æ–¹å¼ï¼Œè¿˜è¦æ³¨æ„æ•°ç»„è¶Šç•Œçš„é—®é¢˜ï¼Œæ‰€ä»¥int i = arr.length - 1 æ€è·¯2 è¿˜å¯ä»¥é€šè¿‡å¢žåŠ  swapï¼ŒéåŽ†åŽåˆ¤æ–­æ˜¯å¦æœ‰åº,å½“å‰ä¸€è½®æ²¡æœ‰è¿›è¡Œäº¤æ¢æ—¶ï¼Œè¯´æ˜Žæ•°ç»„å·²ç»æœ‰åºï¼Œæ²¡æœ‰å¿…è¦å†è¿›è¡Œä¸‹ä¸€è½®çš„å¾ªçŽ¯äº†ï¼Œç›´æŽ¥é€€å‡º 1234567891011121314151617public static void bubbleSort2(int[] arr) &#123; boolean swap; for (int i = arr.length - 1; i &gt; 0; i--) &#123; //å‰©ä½™éœ€è¦æŽ’åºçš„é•¿åº¦ swap = false; for (int j = 0; j &lt; i; j++) &#123; if (arr[j] &gt; arr[j + 1]) &#123; int t = arr[j]; arr[j] = arr[j + 1]; arr[j + 1] = t; swap = true; &#125; &#125; if (!swap) &#123; break; &#125; &#125; &#125; é€‰æ‹©æŽ’åºé€šè¿‡æ¯”è¾ƒæ‰¾åˆ°å½“å‰çš„æœ€å¤§å…ƒç´ M,å¹¶é€šè¿‡äº¤æ¢ä½¿å€¼å°±ä½ 12345678910111213141516//é€‰æ‹©æŽ’åº public static void selectionSort(int[] arr) &#123; int maxIndex; //çŸ¥é“ä¸‹æ ‡å°±èƒ½å¾—åˆ°å€¼ int tmp; for (int i = arr.length - 1; i &gt; 0; i--) &#123; maxIndex = 0; for (int j = 1; j &lt;= i; j++) &#123; if (arr[j] &gt; arr[maxIndex]) &#123; maxIndex = j; &#125; &#125; tmp = arr[i]; arr[i] = arr[maxIndex]; arr[maxIndex] = tmp; &#125; &#125; å¿«é€ŸæŽ’åºæ€æƒ³ï¼š å‰ä¸€åºåˆ—çš„å…ƒç´  éƒ½å°äºŽç­‰äºŽåŽä¸€åºåˆ—çš„å…ƒç´ ï¼Œé€’å½’åŽ åªå‰©å•ä¸ªå…ƒç´ æ—¶ï¼Œè‡ªèº«å°±æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥ä½œä¸ºé€’å½’åŸºã€‚ å¿«é€ŸæŽ’åº1 åˆå§‹æƒ…å†µUæ˜¯æ•´ä¸ªåºåˆ—ï¼Œ L Gæ˜¯ç©º,ç„¶åŽ lo hiéƒ½å‘å†…ä¾§ç§»åŠ¨ï¼Œæœ€ç»ˆhi loæŒ‡å‘åŒä¸€ä¸ªä½ç½®m,ä¹Ÿå°±æ˜¯æœ€ç»ˆçš„è½´ç‚¹ã€‚ L &lt;= pivot &lt;= G; U = [lo,hi]ä¸­ï¼Œ[lo]å’Œ[hi]äº¤æ›¿ç©ºé—² å½“_elem[hi]&gt;pivotæ—¶ï¼Œhiå‘å·¦ç§»åŠ¨ï¼Œè‡ªåºåˆ—Gè·Ÿç€æ‹“å±•ã€‚ å½“_elem[hi]&lt;pivotæ—¶ï¼ŒæŠŠ_elem[hi]ç§»åŠ¨åˆ°loä½ç½®ä¸Šã€‚ å‘å³ç§»åŠ¨lo,æ‹“å±•å­åºåˆ—loã€‚ å½“elem[lo] &gt; pivotæ—¶ï¼ŒæŠŠelem[lo] ç§»åŠ¨åˆ°hiä½ç½®ä¸Šã€‚ æœ€ç»ˆhi loæŒ‡å‘åŒä¸€ä¸ªä½ç½®m,ä¹Ÿå°±æ˜¯æœ€ç»ˆçš„è½´ç‚¹pivotã€‚ 123456789101112131415161718public static void quickSort(int[] arr, int lo, int hi) &#123; if (lo&gt;=hi) return; int mi = partition(arr, lo, hi); quickSort(arr, lo, mi-1); quickSort(arr, mi + 1, hi);&#125;private static int partition(int[] elem, int lo, int hi) &#123; int pivot = elem[lo]; while (lo &lt; hi) &#123; while (lo&lt;hi&amp;&amp;elem[hi] &gt;= pivot) hi--; elem[lo] = elem[hi]; while (lo&lt;hi&amp;&amp;elem[lo] &lt; pivot) lo++; elem[hi] = elem[lo]; &#125; elem[lo]= pivot; return lo;&#125; å¿«é€ŸæŽ’åº2å¿«é€ŸæŽ’åºå˜ç§ æ’å…¥æŽ’åº å¸Œå°”æŽ’åº https://www.bilibili.com/video/BV1LT4y137cK?from=search&amp;seid=6852216660251002525 å½’å¹¶æŽ’åºä»£ç ä¸å¤ªç†è§£(å­¦å ‚åœ¨çº¿) ç¬¦å·è¡¨çš„å„ç§å®žçŽ°çš„ä¼˜ç¼ºç‚¹ å †æŽ’åºç»“åˆäº†æ•°ç»„ä¸Žé“¾è¡¨çš„ç‰¹æ€§ è‡ªä¸‹è€Œä¸Š 2 1 6 3 9 7 4 8 5 æœ€æœ«å°¾çš„å†…éƒ¨èŠ‚ç‚¹æ‰€å¯¹åº”çš„ç§©å¼€å§‹ floor(9/2)-1=3,ä¹Ÿå°±æ˜¯ç¬¬ä¸‰ä¸ªä½ç½®ï¼ŒæŽ¥ä¸‹æ¥æ˜¯å †6 1 2è¿›è¡Œä¸‹æ»¤æ“ä½œ ä¸€å¼€å§‹å¾ˆä¸ç†è§£ä¸ºä»€ä¹ˆæ˜¯ floor(9/2)-1ï¼Œå› ä¸ºå‰é¢æœ‰ parent(i) = (i-1)&gt;&gt;1 å…¶å®žè¿™ä¸ª9å°±æ˜¯ arr.length,è¿™é‡Œçš„ iæ˜¯ä¸‹æ ‡,ä¹Ÿå°±æ˜¯ arr.length-1,è¿™æ ·å°±å¾ˆå¥½ç†è§£ä¸ºä»€ä¹ˆ-1å¯ä»¥ç§»å‡ºæ¥ å»ºå † æŒ‰ç…§æ ‘çš„å±‚åºéåŽ†é¡ºåºï¼Œä»Žå·¦åˆ°å³å¼€å§‹å»ºå †ã€‚ æŽ¥ç€æ ¹æ®floydç®—æ³•å¼€å§‹è°ƒæ•´ï¼Œ 5/2 - 1 = 1,ç¬¬ä¸€ä¸ªä½ç½®å¯¹åº”çš„æ˜¯3ï¼Œ3ä¸Šç§» æŽ¥ç€æ˜¯5,ä¸Šç§»ï¼Œ ä¸Šé¢å·¦ä¸‹å›¾æ˜¯è°ƒæ•´ä¹‹åŽçš„ï¼Œå®Œå…¨äºŒå‰å † ä¸Šé¢çš„æ•°å­—å¤ªå°ï¼Œhttps://www.youtube.com/watch?v=WsNQuCa_-PU è¿™ä¸ªè§†é¢‘æœ‰ä¸¤æ¬¡è°ƒæ•´çš„æƒ…å†µ é€‰å–ä¸Žè°ƒæ•´ ç±»ä¼¼äºŽé€‰æ‹©æŽ’åº é€‰å–æ ¹èŠ‚ç‚¹5å’Œæœ«å°¾å…ƒç´ 2äº¤æ¢,æ”¾åˆ°å‘é‡æœ«å°¾ï¼Œ5æ”¾åˆ° å·²æŽ’åºåºåˆ—ï¼Œä»Žå®Œå…¨äºŒå‰å †ä¸­ç§»å‡ºã€‚ å¯¹æ ¹èŠ‚ç‚¹2ä¸‹æ»¤ é€‰å–æ ¹èŠ‚ç‚¹4å’Œæœ«ä½ç½®1äº¤æ¢ï¼Œ4æ”¾åˆ°å·²æŽ’åºåºåˆ—ï¼Œä¸‹é¢ä¾æ¬¡æ“ä½œ 123456789101112131415161718192021222324252627282930313233343536public static void heapSort(int[] arr) &#123; buildHeap(arr, arr.length); //å»ºå † selectSorted(arr); // äº¤æ¢ ä¸‹æ»¤&#125;private static void buildHeap(int[] arr, int length) &#123; for (int k = (length - 1) &gt;&gt; 1; k &gt;= 0; k--) &#123; //æœ€åŽçš„å†…éƒ¨èŠ‚ç‚¹ å¾€å‰éåŽ† addJustHeap(arr, k, length); &#125;&#125;private static void addJustHeap(int[] arr, int k, int length) &#123; for (int i = 2 * k + 1; i &lt;= length; i = 2 * i + 1) &#123; // ä¸Šé¢èŠ‚ç‚¹è°ƒæ•´åŽï¼Œå¯èƒ½æ¯”å­èŠ‚ç‚¹è¿˜å°ï¼Œéœ€è¦ç»§ç»­è°ƒæ•´ if ((i + 1) &lt; length &amp;&amp; arr[i] &lt; arr[i + 1]) &#123; i++; // å·¦å­æ ‘æ¯”å³å­æ ‘å°ï¼Œç”¨å³å­æ ‘æ¯”è¾ƒ &#125; if (i &lt; length &amp;&amp; arr[k] &lt; arr[i]) &#123; swap(arr, k, i); k = i; &#125; &#125;&#125;private static void selectSorted(int[] arr) &#123; for (int j = 0; j &lt; arr.length - 1; j++) &#123; swap(arr, 0, arr.length - 1 - j); //äº¤æ¢åˆ°å·²æŽ’åºä½ç½® addJustHeap(arr, 0, arr.length - 1 - j); //ç»§ç»­è°ƒæ•´ &#125;&#125;private static void swap(int[] arr, int k, int i) &#123; int tmp = arr[i]; arr[i] = arr[k]; arr[k] = tmp;&#125; https://zhuanlan.zhihu.com/p/42586566","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"Concurrency_SychronizedVolatile","slug":"Concurrency-SychronizedVolatile","date":"2021-03-08T07:37:45.000Z","updated":"2022-06-12T03:17:58.617Z","comments":true,"path":"2021/03/08/Concurrency-SychronizedVolatile/","link":"","permalink":"https://noteforme.github.io/2021/03/08/Concurrency-SychronizedVolatile/","excerpt":"","text":"MESIä¸ºä»€ä¹ˆéœ€è¦MESIåè®® : CPUçš„é«˜åº¦è¿ç®—éœ€è¦é«˜é€Ÿçš„æ•°æ®,ç„¶è€Œå†…å­˜å’Œç¡¬ç›˜çš„å‘å±•é€Ÿåº¦è¿œè¿œä¸åŠCPU ä¸€ä¸ªCPUçš„å˜é‡å‘ç”Ÿæ”¹å˜ï¼Œå…¶ä»–æ‹¥æœ‰è¿™ä¸ªå˜é‡CPUéœ€è¦åŒæ­¥. æŸ¥çœ‹å¦‚ä¸‹é“¾æŽ¥çš„ å¤šæ ¸ç¼“å­˜ååŒæ“ä½œæµç¨‹å›¾ https://www.bilibili.com/video/BV1fK4y1E7NCè§†é¢‘è®²è§£äº†è¿™ä¸ªçŠ¶æ€å›¾çš„å„ä¸ªæƒ…å†µ. https://www.cnblogs.com/yanlong300/p/8986041.html https://www.codenong.com/cs106520859/ Memory Barriers é€šè¿‡ Store Forwarding è§£å†³äº†å•ä¸ª CPU æ‰§è¡Œé¡ºåºæ€§å’Œå†…å­˜å¯è§æ€§é—®é¢˜ï¼Œä½†æ˜¯åœ¨å…¨å±€å¤š CPU çš„çŽ¯å¢ƒä¸‹ï¼Œè¿™ç§å†…å­˜å¯è§æ€§ææ€•å°±å¾ˆéš¾ä¿è¯äº†ã€‚ 1234567891011void foo(void)&#123; a = 1; b = 1;&#125;void bar(void)&#123; while (b == 0) continue; assert(a == 1);&#125; å‡è®¾ä¸Šé¢çš„ foo æ–¹æ³•è¢« CPU 0 æ‰§è¡Œï¼Œbar æ–¹æ³•è¢« CPU 1 æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å¤šçº¿ç¨‹çŽ¯å¢ƒã€‚è¯•æƒ³ï¼Œå³ä¾¿åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ï¼Œfoo å’Œ bar å¦‚è‹¥ä¸¥æ ¼æŒ‰ç…§ç†æƒ³çš„é¡ºåºæ‰§è¡Œï¼Œæ˜¯æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šå‡ºçŽ° assert failed çš„æƒ…å†µçš„ã€‚ä½†å¾€å¾€äº‹ä¸Žæ„¿è¿ï¼Œè¿™ç§çœ‹ä¼¼å¾ˆè¯¡å¼‚çš„ä¸”æœ‰ä¸€å®šå‡ çŽ‡å‘ç”Ÿçš„ assert failed ï¼Œç»“åˆä¸Šé¢æ‰€è¯´çš„ Store Buffer å°±ä¸€ç‚¹éƒ½ä¸éš¾ç†è§£äº†ã€‚ æˆ‘ä»¬æ¥è¿˜åŽŸ assert failed çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå‡è®¾ a,b åˆå§‹å€¼ä¸º 0 ï¼Œa è¢« CPU0 å’Œ CPU1 å…±åŒæŒæœ‰ï¼Œb è¢« CPU0 ç‹¬å ï¼› CPU0 å¤„ç† a=1 ä¹‹å‰å‘é€ Invalidate æ¶ˆæ¯ç»™ CPU1 ï¼Œå¹¶å°†å…¶æ”¾å…¥ Store Buffer ï¼Œå°šæœªåŠæ—¶åˆ·å…¥ç¼“å­˜ï¼› CPU 0 è½¬è€Œå¤„ç† b=1 ï¼Œæ­¤æ—¶ b=1 ç›´æŽ¥è¢«åˆ·å…¥ç¼“å­˜ï¼› CPU 1 å‘å‡º Read æ¶ˆæ¯è¯»å– b çš„å€¼ï¼Œå‘çŽ° b ä¸º 1 ï¼Œè·³å‡º while è¯­å¥ï¼› CPU 1 å‘å‡º Read æ¶ˆæ¯è¯»å– a çš„å€¼ï¼Œå‘çŽ° a å´ä¸ºæ—§å€¼ 0ï¼Œassert failedã€‚ åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å®Œå…¨æœ‰å¯èƒ½é‡åˆ°ä¸Šé¢çš„æƒ…å†µï¼Œç”±äºŽ a çš„å˜æ›´å¯¹ CPU1 ä¸å¯è§ï¼Œè™½ç„¶æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶åºæ²¡æœ‰çœŸæ­£è¢«æ‰“ä¹±ï¼Œä½†å¯¹äºŽ CPU1 æ¥è¯´ï¼Œè¿™é€ æˆäº† b=1 å…ˆäºŽ a=1 æ‰§è¡Œçš„å‡è±¡ï¼Œè¿™ç§çœ‹æ˜¯ä¹±åºçš„é—®é¢˜ï¼Œé€šå¸¸ç§°ä¸º â€œé‡æŽ’åºâ€ã€‚å½“ç„¶ä¸Šé¢æ‰€è¯´çš„æƒ…å†µï¼Œåªæ˜¯æŒ‡ä»¤é‡æŽ’åºçš„ä¸€ç§å¯èƒ½ã€‚ Javaå†…å­˜æ¨¡åž‹ å·¥ä½œå†…å­˜ä¸Žä¸»å†…å­˜ä¹‹é—´çš„åŽŸå­æ“ä½œlock( é”å®š )ï¼šä½œç”¨äºŽä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çš„çŠ¶æ€ã€‚ unlockï¼ˆè§£é”ï¼‰ï¼šä½œç”¨äºŽä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå¤„äºŽé”å®šçš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚ readï¼ˆè¯»å–ï¼‰ï¼šä½œç”¨äºŽä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»Žä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåŽçš„loadåŠ¨ä½œä½¿ç”¨ã€‚ loadï¼ˆè½½å…¥ï¼‰ï¼šä½œç”¨äºŽå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠreadæ“ä½œä»Žä¸»å†…å­˜ä¸­å¾—åˆ°çš„å˜é‡å€¼æ”¾å…¥å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­ã€‚ useï¼ˆä½¿ç”¨ï¼‰ï¼šä½œç”¨äºŽå·¥ä½œå†…å­˜ç§çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“Žï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨åˆ°å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ assignï¼ˆèµ‹å€¼ï¼‰ï¼šä½œç”¨äºŽå·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»Žæ‰§è¡Œå¼•æ“ŽæŽ¥æ”¶åˆ°çš„å€¼èµ‹ç»™å·¥ä½œå†…å­˜çš„å˜é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ storeï¼ˆå­˜å‚¨ï¼‰ï¼šä½œç”¨äºŽå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠå·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿éšåŽçš„writeæ“ä½œä½¿ç”¨ writeï¼ˆå†™å…¥ï¼‰ï¼šä½œç”¨äºŽä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠstoreæ“ä½œä»Žå·¥ä½œå†…å­˜ä¸­å¾—åˆ°çš„å€¼æ”¾å…¥ä¸»å†…å­˜çš„å˜é‡ä¸­ã€‚ æ·±å…¥ç†è§£javaè™šæ‹Ÿæœº(12.3.2 å†…å­˜é—´äº¤äº’æ“ä½œ) æ€»çº¿ä¸Šä¼ é€’çš„æ¶ˆæ¯é¦–å…ˆä¸åŒCPUä¹‹é—´ä¹Ÿæ˜¯éœ€è¦æ²Ÿé€šçš„ï¼Œè¿™é‡Œçš„æ²Ÿé€šæ˜¯é€šè¿‡åœ¨æ¶ˆæ¯æ€»çº¿ä¸Šä¼ é€’messageå®žçŽ°çš„ã€‚ Read: sent if CPU needs to read from an address Read Response: response to a read message, carries the data at the requested address Invalidate: asks others to evict a cache line Invalidate Acknowledge: reply indicating that an Read Invalidate: like Read + Invalidate (also called â€œread with intend to modifyâ€) â€‹ Writeback: info on what data has been sent to main memory â€‹ è¯¥æ¶ˆæ¯åŒ…å«ä¸€ä¸ªç‰©ç†å†…å­˜åœ°å€å’Œæ•°æ®å†…å®¹ï¼Œç›®çš„æ˜¯æŠŠè¿™å—æ•°æ®é€šè¿‡æ€»çº¿å†™å›žå†…å­˜é‡Œã€‚ Readï¼šå½“CPUåœ¨è‡ªå·±çš„cacheä¸­æ²¡æœ‰å‘çŽ°éœ€è¦çš„ç‰©ç†åœ°å€ï¼Œå°±ä¼šå‘é€ä¸€æ¡â€œREADâ€æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯åŒ…æ‹¬ç¼“å­˜è¡Œéœ€è¦è¯»çš„ç‰©ç†åœ°å€ã€‚ Read Response: é¡¾åæ€ä¹‰ï¼Œâ€Read Responseâ€æ¶ˆæ¯æ˜¯å›žå¤â€œReadâ€æ¶ˆæ¯çš„ã€‚â€œRead Responseâ€æ¶ˆæ¯æ˜¯ç”±å†…å­˜æˆ–è€…å…¶ä»–CPUç¼“å­˜æä¾›çš„ã€‚å¦‚æžœå…¶ä»–ç¼“å­˜è¯·æ±‚ä¸€ä¸ªå¤„äºŽâ€œmodifiedâ€çŠ¶æ€çš„æ•°æ®ï¼Œåˆ™æœ¬åœ°ç¼“å­˜å¿…é¡»æä¾›â€œRead Responseâ€æ¶ˆæ¯ã€‚è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œåˆ«çš„CPUåœ¨è¯·æ±‚æœ¬åœ°ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè€Œè¿™ä»½æ•°æ®è¿˜æ²¡æœ‰åˆ·æ–°åˆ°å†…å­˜ï¼Œæ‰€ä»¥å¿…é¡»å‘Šè¯‰å…¶ä»–CPUè¯¥æ•°æ®çš„æœ€æ–°å€¼ã€‚æŽ¥æ”¶åˆ°â€Read Responseâ€æ¶ˆæ¯åŽï¼Œè¯¥æ•°æ®çš„ç¼“å­˜çŠ¶æ€å°±ç”±â€invalidâ€å˜æˆäº†â€shareâ€æˆ–è€…â€exclusiveâ€ï¼Œè¿™å–å†³äºŽâ€Read Responseâ€çš„æä¾›è€…æ˜¯å†…å­˜è¿˜æ˜¯å…¶ä»–CPUç¼“å­˜ã€‚ Invalidateï¼šâ€œ invalidateâ€ æ¶ˆæ¯åŒ…å«è¦ä½¿æ— æ•ˆçš„ç¼“å­˜è¡Œçš„ç‰©ç†åœ°å€ã€‚å…¶ä»–çš„ç¼“å­˜å¿…é¡»ä»Žå®ƒä»¬çš„ç¼“å­˜ä¸­ç§»é™¤ç›¸åº”çš„æ•°æ®å¹¶ä¸”å“åº”æ­¤æ¶ˆæ¯ã€‚å½“CPUè¦å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œå†™æ“ä½œï¼Œè€Œæ­¤å˜é‡å¤„äºŽåªè¯»çŠ¶æ€(share)ï¼Œå°±éœ€è¦å‘é€â€œinvalidâ€æ¶ˆæ¯ã€‚ç”±äºŽä¸€ä¸ªå˜é‡è¢«å¤šä¸ªCPUç¼“å­˜ï¼Œæ‰€ä»¥å•ä¸ªCPUçš„æ”¹å†™ä¼šé€ æˆç¼“å­˜ä¸ä¸€è‡´ï¼Œæ‰€ä»¥åœ¨å†™ä¹‹å‰å¿…é¡»å‘Šè¯‰å…¶ä»–CPUä½ ä»¬ç¼“å­˜çš„å€¼é©¬ä¸Šå°±è¦è¿‡æ—¶äº†ã€‚æŽ¥å—åˆ°â€invalidateâ€æ¶ˆæ¯çš„CPUå°±ä¼šæŠŠæœ¬åœ°ç¼“å­˜ä¸­çš„å¯¹åº”æ•°æ®æ— æ•ˆæŽ‰ã€‚ Invalidate Acknowledgeï¼šä¸€ä¸ªæŽ¥æ”¶åˆ°â€œinvalidateâ€æ¶ˆæ¯çš„ CPUå¿…é¡»åœ¨ç§»é™¤æŒ‡å®šæ•°æ®åŽå“åº”ä¸€ä¸ªâ€œinvalidate acknowledgeâ€æ¶ˆæ¯ã€‚è¿™ä¸ªæ¶ˆæ¯å°±æ˜¯å‘Šè¯‰â€œinvalidateâ€æ¶ˆæ¯çš„æä¾›è€…â€œæˆ‘å·²ç»çŸ¥é“ä½ è¦æ›´æ”¹è¿™ä¸ªæ•°æ®äº†ï¼Œæˆ‘æ”¾å¼ƒä½¿ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„æ‹·è´ï¼â€ Read Invalidateï¼šâ€read invalidateâ€æ¶ˆæ¯åŒ…å«è¦ç¼“å­˜è¡Œè¯»å–çš„ç‰©ç†åœ°å€ã€‚åŒæ—¶æŒ‡ç¤ºå…¶ä»–ç¼“å­˜ç§»é™¤æ•°æ®ã€‚å› æ­¤ï¼Œå®ƒåŒ…å«ä¸€ä¸ªâ€readâ€å’Œä¸€ä¸ªâ€invalidateâ€ã€‚â€œread invalidateâ€ä¹Ÿéœ€è¦â€œread responseâ€ä»¥åŠâ€invalidate acknowledgeâ€æ¶ˆæ¯é›†ã€‚ â€œRead Invalidateâ€æ¶ˆæ¯çš„å‘é€æ—¶æœºæœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€ä¸ªæ˜¯CPUå¯¹ä¸€ä¸ªæ•°æ®è¿›è¡ŒåŽŸå­è¯»å†™æ“ä½œï¼Œä½†æ˜¯è¯¥æ•°æ®æ²¡æœ‰åœ¨æœ¬åœ°CPUçš„ç¼“å­˜ä¸­ï¼Œåœ¨å…¶ä»–CPUç¼“å­˜ä¸­å¯èƒ½æœ‰è¯¥æ•°æ®çš„æ‹·è´ã€‚æ‰€ä»¥å®ƒéœ€è¦å‘é€ä¸€æ¡â€œRead Invalidateâ€æ¶ˆæ¯ï¼Œå®ƒä¸ä»…éœ€è¦è¯»å–è¯¥æ•°æ®çš„æœ€æ–°å€¼ï¼Œè¿˜è¦æ— æ•ˆæŽ‰å…¶ä»–çš„CPUç¼“å­˜(å®ƒé©¬ä¸Šå°±è¦æ”¹å†™è¯¥æ•°æ®)ã€‚ Writebackï¼šâ€œwritebackâ€æ¶ˆæ¯åŒ…å«è¦å›žå†™åˆ°å†…å­˜çš„åœ°å€å’Œæ•°æ®ã€‚è¿™ä¸ªæ¶ˆæ¯å…è®¸ç¼“å­˜åœ¨å¿…è¦æ—¶æ¢å‡ºâ€œmodifiedâ€çŠ¶æ€çš„æ•°æ®ä»¥è…¾å‡ºç©ºé—´ã€‚æ¶ˆæ¯çš„å‘é€æ—¶æœºæ˜¯ï¼ŒCPUæŠŠæœ¬åœ°ç¼“å­˜ä¸­çš„æ•°æ®åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼Œè€Œè¯¥æ•°æ®æ˜¯shareçŠ¶æ€(åªè¯»)ï¼Œå®ƒéœ€è¦å‘Šè¯‰å…¶ä»–CPUâ€æˆ‘ä¸å†ä½¿ç”¨è¿™äº›ç¼“å­˜æ•°æ®äº†â€ http://intheworld.win/2015/07/16/%E5%A4%9A%E6%A0%B8%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AEmesi/ MESIä¸ºä»€ä¹ˆè¿˜éœ€è¦volatile?volatile å’ŒMESI ä¸­é—´å·®äº†å¥½å‡ å±‚æŠ½è±¡ï¼Œä¸­é—´ä¼šç»åŽ†javaç¼–è¯‘å™¨ï¼Œjavaè™šæ‹Ÿæœºå’ŒJITï¼Œæ“ä½œç³»ç»Ÿï¼ŒCPUæ ¸å¿ƒã€‚ volatile æ˜¯Java ä¸­æ ‡è¯†å˜é‡å¯è§æ€§çš„å…³é”®å­—ï¼Œè¯´ç›´æŽ¥ç‚¹ï¼šä½¿ç”¨volatile ä¿®é¥°çš„å˜é‡æ˜¯æœ‰å†…å­˜å¯è§æ€§çš„ï¼Œè¿™æ˜¯Java è¯­æ³•å®šçš„ï¼ŒJava ä¸å…³å¿ƒä½ åº•å±‚æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶CPU æ˜¯å¦‚ä½•å®žçŽ°å†…å­˜å¯è§çš„ï¼Œæˆ‘çš„è¯­æ³•è§„å®šå°±æ˜¯volatile ä¿®é¥°çš„å˜é‡å¿…é¡»æ˜¯å…·æœ‰å¯è§æ€§çš„ã€‚ CPU æœ‰X86ï¼ˆå¤æ‚æŒ‡ä»¤é›†ï¼‰ã€ARMï¼ˆç²¾ç®€æŒ‡ä»¤é›†ï¼‰ç­‰ä½“ç³»æž¶æž„ï¼Œç‰ˆæœ¬ç±»åž‹ä¹Ÿæœ‰å¾ˆå¤šç§ï¼ŒCPU å¯èƒ½é€šè¿‡é”æ€»çº¿ã€MESI åè®®å®žçŽ°å¤šæ ¸å¿ƒç¼“å­˜çš„ä¸€è‡´æ€§ã€‚å› ä¸ºæœ‰ç¡¬ä»¶çš„å·®å¼‚ä»¥åŠç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„æŒ‡ä»¤é‡æŽ’ä¼˜åŒ–çš„å­˜åœ¨ï¼Œæ‰€ä»¥Java éœ€è¦ä¸€ç§åè®®æ¥è§„é¿ç¡¬ä»¶å¹³å°çš„å·®å¼‚ï¼Œä¿éšœåŒä¸€æ®µä»£è¡¨åœ¨æ‰€æœ‰å¹³å°è¿è¡Œæ•ˆæžœä¸€è‡´ï¼Œè¿™ä¸ªåè®®å«åšJava å†…å­˜æ¨¡åž‹ï¼ˆJava Memory Modelï¼‰ã€‚ https://www.wwwbuild.net/java3y/5614.html å¯è§æ€§é—®é¢˜å­˜åœ¨çš„ä¸»è¦åŽŸå› å°±æ˜¯ï¼ŒStore Buffer ï¼Œå°šæœªåŠæ—¶åˆ·å…¥ç¼“å­˜ï¼Œç„¶åŽå…¶ä»–CPUè¿˜æ˜¯ä»Žå†…å­˜é‡Œé¢å–å‡ºæ—§å€¼.ä¸ºäº†æé«˜CPUæ•ˆçŽ‡ï¼ŒMESIå¼•å…¥äº†ç¼“å­˜å¤±æ•ˆæœºåˆ¶. https://www.cnblogs.com/xmzJava/p/11417943.html è¿™ç¯‡æ–‡ç« å¾ˆå¥½ è€Œå¯¹äºŽJAVAè€Œè¨€ï¼Œä»–å¿…é¡»è¦å±è”½å„ä¸ªå¤„ç†å™¨çš„å·®å¼‚ï¼Œæ‰€ä»¥æ‰æœ‰äº†javaå†…å­˜æ¨¡åž‹(JMM),volatileåªæ˜¯å†…å­˜æ¨¡åž‹çš„ä¸€å°éƒ¨åˆ†ï¼Œå®žçŽ°äº†å˜é‡çš„å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æŽ’åºä¼˜åŒ–çš„åŠŸèƒ½ã€‚æ•´ä¸ªå†…å­˜æ¨¡åž‹å¿…é¡»è¦å®žçŽ°å¯è§æ€§ï¼ŒåŽŸå­æ€§ï¼Œå’Œæœ‰åºæ€§ã€‚è€Œvolatileå®žçŽ°äº†å…¶ä¸­çš„å¯è§æ€§å’Œæœ‰åºæ€§ã€‚ æ€è€ƒä¸Šé¢è¯´çš„æ„æ€æ˜¯volitleæ˜¯ä¸Šå±‚å®žçŽ°ï¼Œä¸ç®¡åº•å±‚æ˜¯ä»€ä¹ˆï¼Œå…¶å®žMESI volatileè¿˜æ˜¯æ²¡æžæ‡‚ï¼Œä½†æ˜¯MESIæ˜¯CPUå…·ä½“å­˜åœ¨çš„ï¼Œè€Œä¸”MESIä¹Ÿå’Œå¯è§æ€§å·®ä¸å¤šåŽŸç†ï¼Œå¦‚æžœä¸ç”¨volatileå°±æ²¡æœ‰MESIäº†ï¼Ÿ https://www.scss.tcd.ie/jeremy.jones/VivioJS/caches/MESI.htm å„ç§æ–‡ç« äººäº‘äº¦äº‘ï¼Œè¦ä¹ˆç›´æŽ¥å›žé¿ä¸Šé¢é—®é¢˜ï¼Œæœ‰çš„è¿˜è¯´volatileä¿éšœMESI,è‡ªå·±ç›¸ä¿¡å—? https://www.youtube.com/watch?v=q8r7b1KMUlE çœ‹äº†è¿™ä¸ªè§†é¢‘æ„Ÿè§‰èƒ½è¯´é€šäº†ï¼Œvolatileæ˜¯åœ¨MESIåŸºç¡€ä¸Šï¼Œç¦æ­¢æŒ‡ä»¤é‡æŽ’åº(åŠ äº†æ …æ ),æ¥ä¿éšœå¯è§æ€§ã€‚ æœ‰ç©ºçœ‹çœ‹å…¶ä»–å‡ ä¸ªè§†é¢‘é“¾æŽ¥ï¼Œè¯¥åˆ çš„åˆ . CPUä»£ç æ‰§è¡Œé¡ºåº1234567891011121314151617181920212223242526public class VisibilityThread &#123; private static volatile boolean initFlag = true; public static void main(String[] args) throws InterruptedException &#123; new Thread(() -&gt; &#123; System.out.println(&quot;waiting data...&quot;); while (!initFlag) &#123; &#125; System.out.println(&quot;=========success&quot;); &#125;).start(); Thread.sleep(2000); initFlag = false; new Thread(()-&gt;prepareData()).start(); &#125; private static void prepareData() &#123; System.out.println(&quot;prepareData&quot;); initFlag = true; System.out.println(&quot;prepare data end..&quot;); &#125;&#125; æµç¨‹å›¾ https://www.bilibili.com/video/BV1XZ4y157Pj?p=4 Volatileç¦æ­¢é‡æŽ’åºå•ä¸ªçº¿ç¨‹ä¸­ï¼Œåªè¦é‡æŽ’åºä¸ä¼šå¯¹ç»“æžœäº§ç”Ÿå½±å“ï¼Œå°±ä¸èƒ½ä¿è¯å…¶ä¸­çš„æ“ä½œä¸€å®šæŒ‰ç…§ç¨‹åºå†™å®šçš„é¡ºåºæ‰§è¡Œâ€”â€”å³ä½¿é‡æŽ’åºå¯¹äºŽå…¶ä»–çº¿ç¨‹ä¼šäº§ç”Ÿå½±å“ã€‚javaå¹¶å‘ç¼–ç¨‹å®žæˆ˜3.1 è¿™ä¸ªè§†é¢‘è®²äº† Volatileé‡æŽ’åºçš„å®žçŽ°ï¼Œæ²¡è®²å¯è§æ€§ https://www.bilibili.com/video/BV1UD4y127Kw?p=4 https://blog.csdn.net/reliveIT/article/details/50450136 ç¬¬äº”ç«  Cache - å¤„ç†å™¨çš„è‚šé‡(å¤§è¯å¤„ç†å™¨-å¤„ç†å™¨åŸºç¡€çŸ¥è¯†è¯»æœ¬) https://zhuanlan.zhihu.com/p/148772753 https://www.bilibili.com/video/BV1tE411o7oj?p=2 https://wudaijun.com/2019/04/cpu-cache-and-memory-model/#valine-comments Sychronizedä¸‰ç§åº”ç”¨æ–¹å¼ ä¿®é¥°å®žä¾‹æ–¹æ³•ï¼Œä½œç”¨äºŽå½“å‰å®žä¾‹åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦èŽ·å¾—å½“å‰å®žä¾‹çš„é” ä¿®é¥°é™æ€æ–¹æ³•ï¼Œä½œç”¨äºŽå½“å‰ç±»å¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦èŽ·å¾—å½“å‰ç±»å¯¹è±¡çš„é” ä¿®é¥°ä»£ç å—ï¼ŒæŒ‡å®šåŠ é”å¯¹è±¡ï¼Œå¯¹ç»™å®šå¯¹è±¡åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç åº“å‰è¦èŽ·å¾—ç»™å®šå¯¹è±¡çš„é”ã€‚ ä½œç”¨äºŽå®žä¾‹æ–¹æ³• 123public synchronized void increase()&#123; i++;&#125; ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031public class AccountingSync implements Runnable&#123; //å…±äº«èµ„æº(ä¸´ç•Œèµ„æº) static int i=0; /** * synchronized ä¿®é¥°å®žä¾‹æ–¹æ³• */ public synchronized void increase()&#123; i++; &#125; @Override public void run() &#123; for(int j=0;j&lt;1000000;j++)&#123; increase(); &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; AccountingSync instance=new AccountingSync(); Thread t1=new Thread(instance); Thread t2=new Thread(instance); t1.start(); t2.start(); t1.join(); t2.join(); System.out.println(i); &#125; /** * è¾“å‡ºç»“æžœ: * 2000000 */ å½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„ synchronized å®žä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹ä¸èƒ½è®¿é—®è¯¥å¯¹è±¡çš„å…¶ä»– synchronized æ–¹æ³•ï¼Œæ¯•ç«Ÿä¸€ä¸ªå¯¹è±¡åªæœ‰ä¸€æŠŠé”ã€‚ å¦‚æžœæ˜¯ä¸€ä¸ªçº¿ç¨‹ A éœ€è¦è®¿é—®å®žä¾‹å¯¹è±¡ obj1 çš„ synchronized æ–¹æ³• f1(å½“å‰å¯¹è±¡é”æ˜¯obj1)ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ B éœ€è¦è®¿é—®å®žä¾‹å¯¹è±¡ obj2 çš„ synchronized æ–¹æ³• f2(å½“å‰å¯¹è±¡é”æ˜¯obj2)ï¼Œè¿™æ ·æ˜¯å…è®¸çš„ï¼Œå› ä¸ºä¸¤ä¸ªå®žä¾‹å¯¹è±¡é”å¹¶ä¸åŒç›¸åŒ synchronizedä½œç”¨äºŽé™æ€æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334public class synchronized_01 implements Runnable &#123; static int i = 0; /** * å¯¹äºŽå…¨å±€ */ public static synchronized void increase() &#123; i++; &#125; @Override public void run() &#123; for (int j = 0; j &lt; 1000000; j++) &#123; increase(); &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; //newæ–°å®žä¾‹ Thread t1 = new Thread(new AccountingSyncBad()); t1.start(); for (int j = 0; j &lt; 1000000; j++) &#123; increase(); &#125; TimeUnit.SECONDS.sleep(2); System.out.println(i); &#125;&#125; /** * è¾“å‡ºç»“æžœ: * 2000000 */ å…¶é”å¯¹è±¡æ˜¯å½“å‰ç±»çš„classå¯¹è±¡. å¯ä»¥çœ‹åˆ°ä¸»çº¿ç¨‹å’Œè‡ªçº¿ç¨‹å‘ç”Ÿäº’æ–¥ã€‚ synchronizedåŒæ­¥ä»£ç å— 1234567891011121314151617181920212223public class synchronized_03 implements Runnable &#123; static synchronized_03 instance=new synchronized_03(); static int i=0; @Override public void run() &#123; //çœç•¥å…¶ä»–è€—æ—¶æ“ä½œ.... //ä½¿ç”¨åŒæ­¥ä»£ç å—å¯¹å˜é‡iè¿›è¡ŒåŒæ­¥æ“ä½œ,é”å¯¹è±¡ä¸ºinstance synchronized(instance)&#123; for(int j=0;j&lt;1000000;j++)&#123; i++; &#125; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; //newæ–°å®žä¾‹ Thread t1 = new Thread(new synchronized_03()); t1.start(); System.out.println(i); &#125;&#125; å°†synchronizedä½œç”¨äºŽä¸€ä¸ªç»™å®šçš„å®žä¾‹å¯¹è±¡instanceï¼Œå³å½“å‰å®žä¾‹å¯¹è±¡å°±æ˜¯é”å¯¹è±¡.å½“ç„¶é™¤äº†instanceä½œä¸ºå¯¹è±¡å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨thiså¯¹è±¡(ä»£è¡¨å½“å‰å®žä¾‹)æˆ–è€…å½“å‰ç±»çš„classå¯¹è±¡ä½œä¸ºé” //this,å½“å‰å®žä¾‹å¯¹è±¡é” 123456789101112synchronized(this)&#123; for(int j&#x3D;0;j&lt;1000000;j++)&#123; i++; &#125;&#125;&#x2F;&#x2F;classå¯¹è±¡é”synchronized(AccountingSync.class)&#123; for(int j&#x3D;0;j&lt;1000000;j++)&#123; i++; &#125;&#125; https://blog.csdn.net/javazejian/article/details/72828483 Sychronized volatileåŒºåˆ«ï¼Ÿ Sychronized ä¿è¯åŽŸå­æ€§å’Œå¯è§æ€§ synchronizedå¯è§æ€§ï¼Œçº¿ç¨‹åŠ é”æ—¶ï¼Œå¿…é¡»æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ï¼Œä»Žè€Œä½¿ç”¨å…±äº«å˜é‡æ—¶éœ€è¦ä»Žä¸»å†…å­˜é‡æ–°è¯»å–ï¼›çº¿ç¨‹åœ¨è§£é”æ—¶ï¼Œéœ€è¦æŠŠå·¥ä½œå†…å­˜ä¸­æœ€æ–°çš„å…±äº«å˜é‡çš„å€¼å†™å…¥åˆ°ä¸»å­˜ï¼Œä»¥æ­¤æ¥ä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§ volatile åªèƒ½ä¿è¯å¯è§æ€§ CASåŽŸç†CASæ“ä½œæµç¨‹ CPU1å‘çŽ° å¾…ä¿®æ”¹çš„å˜é‡å€¼æ˜¯100ï¼ŒæœŸæœ›å€¼100ï¼Œå¯åŠ¨ä¿®æ”¹ Cpu2å‘çŽ°ä¸æ˜¯100äº†ï¼Œä¿®æ”¹å¤±è´¥ CASç¼ºç‚¹ ABAé—®é¢˜ ä»Žä¸Šä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªå€¼ä»¥æ¥åˆ°çŽ°åœ¨ï¼Œè¿™ä¸ªå€¼æ˜¯å¦å‘ç”Ÿè¿‡å˜åŒ–,ä»Ž A å˜æˆäº† Bï¼Œå†ç”± B å˜å›žäº† A,CAS å¹¶ä¸èƒ½æ£€æµ‹å‡ºåœ¨æ­¤æœŸé—´å€¼æ˜¯ä¸æ˜¯è¢«ä¿®æ”¹è¿‡ï¼Œå®ƒåªèƒ½æ£€æŸ¥å‡ºçŽ°åœ¨çš„å€¼å’Œæœ€åˆçš„å€¼æ˜¯ä¸æ˜¯ä¸€æ ·ã€‚ é€šè¿‡æ·»åŠ ç‰ˆæœ¬å·è§£å†³,Aâ†’Bâ†’A å˜æˆäº† 1Aâ†’2Bâ†’3A,atomic åŒ…ä¸­æä¾›äº† AtomicStampedReference è¿™ä¸ªç±»ï¼Œå®ƒæ˜¯ä¸“é—¨ç”¨æ¥è§£å†³ ABA é—®é¢˜çš„ è‡ªæ—‹æ—¶é—´è¿‡é•¿ CAS å¾€å¾€æ˜¯é…åˆç€å¾ªçŽ¯æ¥å®žçŽ°çš„ï¼Œæœ‰çš„æ—¶å€™ç”šè‡³æ˜¯æ­»å¾ªçŽ¯ï¼Œä¸åœåœ°è¿›è¡Œé‡è¯•ï¼Œç›´åˆ°çº¿ç¨‹ç«žäº‰ä¸æ¿€çƒˆçš„æ—¶å€™ï¼Œæ‰èƒ½ä¿®æ”¹æˆåŠŸ èŒƒå›´ä¸èƒ½çµæ´»æŽ§åˆ¶ æ‰§è¡Œ CAS çš„æ—¶å€™ï¼Œæ˜¯é’ˆå¯¹æŸä¸€ä¸ªï¼Œè€Œä¸æ˜¯å¤šä¸ªå…±äº«å˜é‡çš„ï¼Œè¿™ä¸ªå˜é‡å¯èƒ½æ˜¯ Integer ç±»åž‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ Long ç±»åž‹ã€å¯¹è±¡ç±»åž‹ç­‰ç­‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½é’ˆå¯¹å¤šä¸ªå…±äº«å˜é‡åŒæ—¶è¿›è¡Œ CAS æ“ä½œï¼Œå› ä¸ºè¿™å¤šä¸ªå˜é‡ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œç®€å•çš„æŠŠåŽŸå­æ“ä½œç»„åˆåˆ°ä¸€èµ·ï¼Œå¹¶ä¸å…·å¤‡åŽŸå­æ€§. è§£å†³æ–¹æ¡ˆ:é‚£å°±æ˜¯åˆ©ç”¨ä¸€ä¸ªæ–°çš„ç±»ï¼Œæ¥æ•´åˆåˆšæ‰è¿™ä¸€ç»„å…±äº«å˜é‡ï¼Œè¿™ä¸ªæ–°çš„ç±»ä¸­çš„å¤šä¸ªæˆå‘˜å˜é‡å°±æ˜¯åˆšæ‰çš„é‚£å¤šä¸ªå…±äº«å˜é‡ï¼Œç„¶åŽå†åˆ©ç”¨ atomic åŒ…ä¸­çš„ AtomicReference æ¥æŠŠè¿™ä¸ªæ–°å¯¹è±¡æ•´ä½“è¿›è¡Œ CAS æ“ä½œï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"concurrency","slug":"concurrency","permalink":"https://noteforme.github.io/tags/concurrency/"}]},{"title":"Concurrency_thread","slug":"Concurrency-thread","date":"2021-02-26T13:57:48.000Z","updated":"2021-08-20T05:10:09.195Z","comments":true,"path":"2021/02/26/Concurrency-thread/","link":"","permalink":"https://noteforme.github.io/2021/02/26/Concurrency-thread/","excerpt":"","text":"ç”¨æˆ·æ€ : åº”ç”¨ç¨‹åºè¿è¡Œ å†…æ ¸æ€ ï¼šæ“ä½œç³»ç»Ÿè¿è¡Œ çº¿ç¨‹çš„6ä¸­çŠ¶æ€ Newï¼ˆæ–°åˆ›å»ºï¼‰ Runnableï¼ˆå¯è¿è¡Œï¼‰ Blockedï¼ˆè¢«é˜»å¡žï¼‰ Waitingï¼ˆç­‰å¾…ï¼‰ Timed Waitingï¼ˆè®¡æ—¶ç­‰å¾…ï¼‰ Terminatedï¼ˆè¢«ç»ˆæ­¢ï¼‰ çŠ¶æ€åˆ†æž New â€‹ å½“æˆ‘ä»¬ç”¨ new Thread() æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æžœçº¿ç¨‹æ²¡æœ‰å¼€å§‹è¿è¡Œ start() æ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å¼€å§‹æ‰§è¡Œ run() æ–¹æ³•é‡Œé¢çš„ä»£ç ï¼Œé‚£ä¹ˆæ­¤æ—¶å®ƒçš„çŠ¶æ€å°±æ˜¯ Newã€‚è€Œä¸€æ—¦çº¿ç¨‹è°ƒç”¨äº† start()ï¼Œå®ƒçš„çŠ¶æ€å°±ä¼šä»Ž New å˜æˆ Runnable å¦‚æžœä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ˜¯ Runnable çŠ¶æ€ï¼Œå½“å®ƒè¿è¡Œåˆ°ä»»åŠ¡çš„ä¸€åŠæ—¶ï¼Œæ‰§è¡Œè¯¥çº¿ç¨‹çš„ CPU è¢«è°ƒåº¦åŽ»åšå…¶ä»–äº‹æƒ…ï¼Œå¯¼è‡´è¯¥çº¿ç¨‹æš‚æ—¶ä¸è¿è¡Œï¼Œå®ƒçš„çŠ¶æ€ä¾ç„¶ä¸å˜ï¼Œè¿˜æ˜¯ Runnableï¼Œå› ä¸ºå®ƒæœ‰å¯èƒ½éšæ—¶è¢«è°ƒåº¦å›žæ¥ç»§ç»­æ‰§è¡Œä»»åŠ¡ã€‚ Blocked â€‹ ä»Ž Runnable çŠ¶æ€è¿›å…¥ Blocked çŠ¶æ€åªæœ‰ä¸€ç§å¯èƒ½ï¼Œå°±æ˜¯è¿›å…¥ synchronized ä¿æŠ¤çš„ä»£ç æ—¶æ²¡æœ‰æŠ¢åˆ° monitor é”ï¼Œæ— è®ºæ˜¯è¿›å…¥ synchronized ä»£ç å—ï¼Œè¿˜æ˜¯ synchronized æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸€æ ·ã€‚ Waiting ç­‰å¾… æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Object.wait() æ–¹æ³•ã€‚ æ²¡æœ‰è®¾ç½® Timeout å‚æ•°çš„ Thread.join() æ–¹æ³•ã€‚ LockSupport.park() æ–¹æ³•ã€‚ Blocked ä»…ä»…é’ˆå¯¹ synchronized monitor é”ï¼Œå¯æ˜¯åœ¨ Java ä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é”ï¼Œæ¯”å¦‚ ReentrantLockï¼Œå¦‚æžœçº¿ç¨‹åœ¨èŽ·å–è¿™ç§é”æ—¶æ²¡æœ‰æŠ¢åˆ°è¯¥é”å°±ä¼šè¿›å…¥ Waiting çŠ¶æ€ï¼Œå› ä¸ºæœ¬è´¨ä¸Šå®ƒæ‰§è¡Œäº† LockSupport.park() æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ Waiting çŠ¶æ€ã€‚åŒæ ·ï¼ŒObject.wait() å’Œ Thread.join() ä¹Ÿä¼šè®©çº¿ç¨‹è¿›å…¥ Waiting çŠ¶æ€ã€‚ Blocked ä¸Ž Waiting çš„åŒºåˆ«æ˜¯ Blocked åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾ monitor é”ï¼Œè€Œ Waiting åˆ™æ˜¯åœ¨ç­‰å¾…æŸä¸ªæ¡ä»¶ï¼Œæ¯”å¦‚ join çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œæˆ–è€…æ˜¯ notify()/notifyAll() ã€‚ Timed Waiting é™æœŸç­‰å¾…åœ¨ Waiting ä¸Šé¢æ˜¯ Timed Waiting çŠ¶æ€ï¼Œè¿™ä¸¤ä¸ªçŠ¶æ€æ˜¯éžå¸¸ç›¸ä¼¼çš„ï¼ŒåŒºåˆ«ä»…åœ¨äºŽæœ‰æ²¡æœ‰æ—¶é—´é™åˆ¶ï¼ŒTimed Waiting ä¼šç­‰å¾…è¶…æ—¶ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨å”¤é†’ï¼Œæˆ–è€…åœ¨è¶…æ—¶å‰è¢«å”¤é†’ä¿¡å·å”¤é†’ã€‚ ä»¥ä¸‹æƒ…å†µä¼šè®©çº¿ç¨‹è¿›å…¥ Timed Waiting çŠ¶æ€ã€‚ è®¾ç½®äº†æ—¶é—´å‚æ•°çš„ Thread.sleep(long millis) æ–¹æ³•ï¼› è®¾ç½®äº†æ—¶é—´å‚æ•°çš„ Object.wait(long timeout) æ–¹æ³•ï¼› è®¾ç½®äº†æ—¶é—´å‚æ•°çš„ Thread.join(long millis) æ–¹æ³•ï¼› è®¾ç½®äº†æ—¶é—´å‚æ•°çš„ LockSupport.parkNanos(long nanos) æ–¹æ³•å’Œ LockSupport.parkUntil(long deadline) æ–¹æ³•ã€‚ æƒ³è¦ä»Ž Blocked çŠ¶æ€è¿›å…¥ Runnable çŠ¶æ€ï¼Œè¦æ±‚çº¿ç¨‹èŽ·å– monitor é”ï¼Œè€Œä»Ž Waiting çŠ¶æ€æµè½¬åˆ°å…¶ä»–çŠ¶æ€åˆ™æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºé¦–å…ˆ Waiting æ˜¯ä¸é™æ—¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºè¿‡äº†å¤šé•¿æ—¶é—´å®ƒéƒ½ä¸ä¼šä¸»åŠ¨æ¢å¤ã€‚ å¦‚æžœå…¶ä»–çº¿ç¨‹è°ƒç”¨ notify() æˆ– notifyAll()æ¥å”¤é†’å®ƒï¼Œå®ƒä¼šç›´æŽ¥è¿›å…¥ Blocked çŠ¶æ€ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå”¤é†’ Waiting çº¿ç¨‹çš„çº¿ç¨‹å¦‚æžœè°ƒç”¨ notify() æˆ– notifyAll()ï¼Œè¦æ±‚å¿…é¡»é¦–å…ˆæŒæœ‰è¯¥ monitor é”ï¼Œæ‰€ä»¥å¤„äºŽ Waiting çŠ¶æ€çš„çº¿ç¨‹è¢«å”¤é†’æ—¶æ‹¿ä¸åˆ°è¯¥é”ï¼Œå°±ä¼šè¿›å…¥ Blocked çŠ¶æ€ï¼Œç›´åˆ°æ‰§è¡Œäº† notify()/notifyAll() çš„å”¤é†’å®ƒçš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å¹¶é‡Šæ”¾ monitor é”ï¼Œæ‰å¯èƒ½è½®åˆ°å®ƒåŽ»æŠ¢å¤ºè¿™æŠŠé”ï¼Œå¦‚æžœå®ƒèƒ½æŠ¢åˆ°ï¼Œå°±ä¼šä»Ž Blocked çŠ¶æ€å›žåˆ° Runnable çŠ¶æ€ã€‚ åŒæ ·åœ¨ Timed Waiting ä¸­æ‰§è¡Œ notify() å’Œ notifyAll() ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œå®ƒä»¬ä¼šå…ˆè¿›å…¥ Blocked çŠ¶æ€ï¼Œç„¶åŽæŠ¢å¤ºé”æˆåŠŸåŽï¼Œå†å›žåˆ° Runnable çŠ¶æ€ã€‚ Terminated run() æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹æ­£å¸¸é€€å‡ºã€‚ å‡ºçŽ°ä¸€ä¸ªæ²¡æœ‰æ•èŽ·çš„å¼‚å¸¸ï¼Œç»ˆæ­¢äº† run() æ–¹æ³•ï¼Œæœ€ç»ˆå¯¼è‡´æ„å¤–ç»ˆæ­¢ã€‚ å¤šçº¿ç¨‹æ–¹æ³•notify()åªèƒ½å«é†’åˆ«äºº çŠ¶æ€å®žä¾‹WAITINGwait()WAITING.java 123456789101112final Object lock = new Object(); threadA = new Thread(() -&gt; &#123; synchronized (lock) &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadA.getState()); try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123;&#125; &#125; &#125;, &quot;Thread-A&quot;); threadA.start(); Thread.sleep(2000L); System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); joinWaitJOIN.java 12345678910111213141516171819202122232425262728final Object lock = new Object();threadA = new Thread(() -&gt; &#123; synchronized (lock) &#123; try &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadA.getState()); threadB.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;, &quot;Thread-A&quot;);threadB = new Thread(() -&gt; &#123; synchronized (lock) &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadB.getState()); try &#123; Thread.sleep(1000l); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;, &quot;Thread-B&quot;);threadA.start();threadB.start();Thread.sleep(2000);System.out.println(Thread.currentThread().getName() + &quot;è¿è¡Œ çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); è¿è¡Œç»“æžœ Thread-A RUNNABLEmainè¿è¡Œ çº¿ç¨‹Açš„çŠ¶æ€ WAITING waitWaitState.java 123456789101112131415161718192021222324final Object lock = new Object(); threadA = new Thread(() -&gt; &#123; synchronized (lock) &#123; try &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadA.getState()); lock.wait(); Thread.sleep(5000l); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;, &quot;BLOCKED-Thread-A&quot;); threadB = new Thread(() -&gt; &#123; synchronized (lock) &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadB.getState()); System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); try &#123; Thread.sleep(5000l); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;, &quot;BLOCKED-Thread-B&quot;); ç»“æžœ BLOCKED-Thread-A RUNNABLEBLOCKED-Thread-B RUNNABLEBLOCKED-Thread-B çº¿ç¨‹Açš„çŠ¶æ€ WAITING ä»Žç»“æžœå¯ä»¥å¾—åˆ°ä¸¤ä¸ªç»“è®º: çº¿ç¨‹Aè°ƒç”¨ lock.wait()åŽ Aå‡ºäºŽWAITINGçŠ¶æ€ã€‚ çº¿ç¨‹Aè°ƒç”¨ lock.wait()åŽï¼Œç«‹é©¬é‡Šæ”¾é”ï¼Œçº¿ç¨‹BèŽ·å¾—é”å¼€å§‹æ‰§è¡Œã€‚ park12345678910111213141516171819202122char[] aI = &quot;1234567&quot;.toCharArray();char[] aC = &quot;ABCDEFG&quot;.toCharArray();t1 = new Thread(() -&gt; &#123; for(char c : aI) &#123; System.out.print(c); LockSupport.unpark(t2); //å«é†’T2 LockSupport.park(); //T1é˜»å¡ž &#125;&#125;, &quot;t1&quot;);t2 = new Thread(() -&gt; &#123; for(char c : aC) &#123; LockSupport.park(); //t2é˜»å¡ž System.out.print(c); LockSupport.unpark(t1); //å«é†’t1 &#125;&#125;, &quot;t2&quot;); è½®æµæ‰“å°æ•°å­—å’Œå­—æ¯ TIMED_WAITINGwait(5000)WAITING_TIMEOUT.java 12345678910111213final Object lock = new Object();threadA = new Thread(() -&gt; &#123; synchronized (lock) &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadA.getState()); try &#123; lock.wait(5000); &#125; catch (InterruptedException e) &#123; &#125; &#125;&#125;, &quot;Thread-A&quot;);threadA.start();Thread.sleep(2000L);System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); è¿è¡Œç»“æžœ: Thread-A RUNNABLEmain çº¿ç¨‹Açš„çŠ¶æ€ TIMED_WAITING sleep(5000)TIMED_WAITING.java 12345678910threadA = new Thread(() -&gt; &#123; System.out.println(Thread.currentThread().getName() + &quot; &quot; + threadA.getState()); try &#123; Thread.sleep(5000); &#125; catch (InterruptedException e) &#123; &#125;&#125;, &quot;Thread-A&quot;);threadA.start();Thread.sleep(2000L);System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); è°ƒç”¨äº† Thread.sleep(5000l); è¿è¡Œç»“æžœ: Thread-A RUNNABLEmain çº¿ç¨‹Açš„çŠ¶æ€ TIMED_WAITING BLOCKED123456789101112131415161718192021222324final Object lock = new Object(); threadA = new Thread(() -&gt; &#123; synchronized (lock) &#123; try &#123; System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Bçš„çŠ¶æ€ &quot; + threadB.getState()); Thread.sleep(10000l); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;Thread-A&quot;); threadB = new Thread(() -&gt; &#123; synchronized (lock) &#123; System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Açš„çŠ¶æ€ &quot; + threadA.getState()); System.out.println(Thread.currentThread().getName() + &quot; çº¿ç¨‹Bçš„çŠ¶æ€ &quot; + threadB.getState()); try &#123; Thread.sleep(10000l); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;, &quot;Thread-B&quot;); è¿è¡Œç»“æžœ:çº¿ç¨‹Aå¾—åˆ°é”ï¼Œçº¿ç¨‹Bè¿›å…¥é˜»å¡žçŠ¶æ€ã€‚ Thread-A çº¿ç¨‹Açš„çŠ¶æ€ RUNNABLEThread-A çº¿ç¨‹Bçš„çŠ¶æ€ BLOCKEDThread-B çº¿ç¨‹Açš„çŠ¶æ€ TERMINATEDThread-B çº¿ç¨‹Bçš„çŠ¶æ€ RUNNABLE æ³¨æ„ çº¿ç¨‹çš„çŠ¶æ€æ˜¯éœ€è¦æŒ‰ç…§ç®­å¤´æ–¹å‘æ¥èµ°çš„ï¼Œæ¯”å¦‚çº¿ç¨‹ä»Ž New çŠ¶æ€æ˜¯ä¸å¯ä»¥ç›´æŽ¥è¿›å…¥ Blocked çŠ¶æ€çš„ï¼Œå®ƒéœ€è¦å…ˆç»åŽ† Runnable çŠ¶æ€ã€‚ çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸å¯é€†ï¼šä¸€æ—¦è¿›å…¥ Runnable çŠ¶æ€å°±ä¸èƒ½å›žåˆ° New çŠ¶æ€ï¼›ä¸€æ—¦è¢«ç»ˆæ­¢å°±ä¸å¯èƒ½å†æœ‰ä»»ä½•çŠ¶æ€çš„å˜åŒ–ã€‚æ‰€ä»¥ä¸€ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€æ¬¡ New å’Œ Terminated çŠ¶æ€ï¼Œåªæœ‰å¤„äºŽä¸­é—´çŠ¶æ€æ‰å¯ä»¥ç›¸äº’è½¬æ¢ã€‚ Thread sleep() yield()ç»“æŸåŽï¼Œå›žåˆ°å°±ç»ªçŠ¶æ€. https://www.geeksforgeeks.org/lifecycle-and-states-of-a-thread-in-java/ https://fangjian0423.github.io/2016/06/04/java-thread-state/ è®©æ­¥(yield) å¦‚æžœå·²ç»å®Œæˆäº†run()æ–¹æ³•å¾ªçŽ¯çš„ä¸€æ¬¡è¿­ä»£è¿‡ç¨‹æ‰€éœ€çš„å·¥ä½œï¼Œå¯ä»¥ç»™çº¿ç¨‹è°ƒåº¦æœºåˆ¶ä¸€ä¸ªæš—ç¤ºï¼šä½ çš„å·¥ä½œå·²ç»åšçš„å·®ä¸å¤šäº†ï¼Œå¯ä»¥è®©åˆ«çš„çº¿ç¨‹ä½¿ç”¨CPUäº†ï¼Œè¿™ä¸ªæš—ç¤ºå°‡é€šè¿‡è°ƒç”¨yield()æ¥åšåšå‡º(ä¸è¿‡è¿™åªæ˜¯ä¸€ä¸ªæš—ç¤ºï¼Œæ²¡æœ‰ä»»ä½•æœºåˆ¶ä¿è¯å®ƒå°‡è¢«é‡‡çº³)ï¼Œä¹Ÿåªæ˜¯å»ºè®®ç›¸åŒä¼˜å…ˆçº§çš„å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚ -ThinkInJava P661 åŠ å…¥ä¸€ä¸ªçº¿ç¨‹ (join) åœ¨Joinerçº¿ç¨‹é‡Œé¢è°ƒç”¨Sleeperçº¿ç¨‹ çš„join() , Joinerä»»åŠ¡å¿…é¡»ç­‰Sleeperä»»åŠ¡ç»“æŸæ´»è¢«æ‰“æ–­æˆ–ç»“æŸ æ‰æ¢å¤ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455class Sleeper extends Thread &#123; private int duration; public Sleeper(String name, int sleepTime) &#123; super(name); duration = sleepTime; start(); &#125; @Override public void run() &#123; super.run(); try &#123; sleep(duration);// Print.print(getName()+&quot;æ‰§è¡Œäº†&quot;); &#125; catch (InterruptedException e) &#123; Print.print(getName() + &quot; è¢«æ‰“æ–­&quot; + &quot;isInterrupted() &quot; + isInterrupted()); return; &#125; Print.print(getName() + &quot; has awakened&quot;); &#125;&#125;class Joiner extends Thread &#123; private Sleeper sleeper; public Joiner(String name, Sleeper sleeper) &#123; super(name); this.sleeper = sleeper; start(); &#125; @Override public void run() &#123; super.run(); try &#123; sleeper.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; Print.print(getName() + &quot; join completed&quot;); &#125;&#125;public class Joining &#123; public static void main(String[] args) &#123; Sleeper sleepy = new Sleeper(&quot;Sleepy&quot;, 1500), grumpy = new Sleeper(&quot;Grumpy&quot;, 1500); Joiner dopey = new Joiner(&quot;Dopey&quot;, sleepy), doc = new Joiner(&quot;Doc&quot;, grumpy); grumpy.interrupt(); å…¶ä»–å¯¹è±¡ä¸ŠåŒæ­¥ æœ‰æ—¶å€™å¿…é¡»åœ¨å¦ä¸€ä¸ªå¯¹è±¡ä¸ŠåŒæ­¥ï¼Œå¦‚æžœéœ€è¦è¿™æ ·ï¼Œå¿…é¡»ç¡®ä¿æ‰€æœ‰ç›¸å…³çš„ä»»åŠ¡éƒ½æ˜¯åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸ŠåŒæ­¥ã€‚ 123456789101112131415161718192021222324252627282930313233class DualSynch &#123; private Object syncObject = new Object(); public synchronized void f() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.print(&quot; f() &quot;); Thread.yield(); &#125; &#125; public void g() &#123; synchronized (syncObject) &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.print(&quot; g() &quot;); Thread.yield(); &#125; &#125; &#125;&#125;public class SyncObject &#123; public static void main(String[] args) &#123; DualSynch ds = new DualSynch(); new Thread() &#123; @Override public void run() &#123; super.run(); ds.f(); &#125; &#125;.start(); ds.g(); &#125;&#125; è¿™ä¸¤ä¸ªæ–¹å¼åœ¨åŒæ—¶è¿è¡Œï¼Œä»»ä½•ä¸€ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰å¯¹å¦ä¸€ä¸ªæ–¹æ³•åŒæ­¥è€Œé˜»å¡ž çº¿ç¨‹é—´çš„åä½œ wait() : åœ¨waitæœŸé—´ å¯¹è±¡é”æ˜¯é‡Šæ”¾çš„,è€ŒSleepæœŸé—´æ˜¯æ²¡æœ‰çš„ çº¿ç¨‹çš„åœæ­¢æ–¹æ³•åŽŸå› é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šæ‰‹åŠ¨åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯å…è®¸çº¿ç¨‹è¿è¡Œåˆ°ç»“æŸï¼Œ è´¸ç„¶å¼ºåˆ¶åœæ­¢çº¿ç¨‹å°±å¯èƒ½ä¼šé€ æˆä¸€äº›å®‰å…¨çš„é—®é¢˜ï¼Œä¸ºäº†é¿å…é€ æˆé—®é¢˜å°±éœ€è¦ç»™å¯¹æ–¹ä¸€å®šçš„æ—¶é—´æ¥æ•´ç†æ”¶å°¾å·¥ä½œã€‚æ¯”å¦‚ï¼šçº¿ç¨‹æ­£åœ¨å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ—¶æ”¶åˆ°ç»ˆæ­¢ä¿¡å·ï¼Œå®ƒå°±éœ€è¦æ ¹æ®è‡ªèº«ä¸šåŠ¡åˆ¤æ–­ï¼Œæ˜¯é€‰æ‹©ç«‹å³åœæ­¢ï¼Œè¿˜æ˜¯å°†æ•´ä¸ªæ–‡ä»¶å†™å…¥æˆåŠŸåŽåœæ­¢ï¼Œè€Œå¦‚æžœé€‰æ‹©ç«‹å³åœæ­¢å°±å¯èƒ½é€ æˆæ•°æ®ä¸å®Œæ•´ï¼Œä¸ç®¡æ˜¯ä¸­æ–­å‘½ä»¤å‘èµ·è€…ï¼Œè¿˜æ˜¯æŽ¥æ”¶è€…éƒ½ä¸å¸Œæœ›æ•°æ®å‡ºçŽ°é—®é¢˜ã€‚ æ­£ç¡®çš„åœæ­¢æ–¹å¼å¯¹äºŽ Java è€Œè¨€ï¼Œæœ€æ­£ç¡®çš„åœæ­¢çº¿ç¨‹çš„æ–¹å¼æ˜¯ä½¿ç”¨ interruptã€‚ä½† interrupt ä»…ä»…èµ·åˆ°é€šçŸ¥è¢«åœæ­¢çº¿ç¨‹çš„ä½œç”¨ã€‚è€Œå¯¹äºŽè¢«åœæ­¢çš„çº¿ç¨‹è€Œè¨€ï¼Œå®ƒæ‹¥æœ‰å®Œå…¨çš„è‡ªä¸»æƒï¼Œå®ƒæ—¢å¯ä»¥é€‰æ‹©ç«‹å³åœæ­¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¸€æ®µæ—¶é—´åŽåœæ­¢ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åŽ‹æ ¹ä¸åœæ­¢ã€‚é¦–å…ˆé€šè¿‡ Thread.currentThread().isInterrupt() åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼ŒéšåŽæ£€æŸ¥æ˜¯å¦è¿˜æœ‰å·¥ä½œè¦åšã€‚&amp;&amp; é€»è¾‘è¡¨ç¤ºåªæœ‰å½“ä¸¤ä¸ªåˆ¤æ–­æ¡ä»¶åŒæ—¶æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šåŽ»æ‰§è¡Œä¸‹é¢çš„å·¥ä½œã€‚ 123while (!Thread.currentThread().isInterrupted() &amp;&amp; cout&lt;1000) &#123; do more work&#125; ä¾‹å­1 1234567891011121314151617public class StopThread implements Runnable &#123; @Override public void run() &#123; int count = 0; while (!Thread.currentThread().isInterrupted() &amp;&amp; count &lt; 1000) &#123; System.out.println(&quot;count = &quot; + count++); &#125; System.out.println(&quot;sleep isInterrupted &quot; + Thread.currentThread().isInterrupted()); &#125; public static void main(String[] args) throws InterruptedException &#123; Thread thread = new Thread(new StopThread()); thread.start(); Thread.sleep(5); thread.interrupt(); &#125;&#125; è¿è¡Œç»“æžœ 123456789count = 0count = 1count = 2..count = 304count = 305count = 306sleep isInterrupted true sleep æœŸé—´èƒ½å¦æ„Ÿå—åˆ°ä¸­æ–­ try catchåœ¨whileå¤–é¢ 1234567891011121314151617181920public class StopDuringSleep &#123; public static void main(String[] args) throws InterruptedException &#123; Runnable runnable = () -&gt; &#123; int num = 0; try &#123; while (!Thread.currentThread().isInterrupted() &amp;&amp; num &lt;= 1000) &#123; System.out.println(num); num++; Thread.sleep(1000000); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;; Thread thread = new Thread(runnable); thread.start(); Thread.sleep(5); thread.interrupt(); &#125;&#125; åœ¨è¿˜æ²¡æ‰“å°å®Œ1000ä¸ªæ•°çš„æ—¶å€™å°±ä¼šåœä¸‹æ¥ï¼Œè¿™ç§å°±å±žäºŽé€šè¿‡ interrupt æ­£ç¡®åœæ­¢çº¿ç¨‹çš„æƒ…å†µã€‚ è¾“å‡º 0 try catchåœ¨whileé‡Œé¢ å¤–å±‚è®¾ç½®æ ‡å¿—ä¸­æ–­ 123456789101112131415161718192021222324public class StopDuringSleep_answer01 &#123; public static void main(String[] args) throws InterruptedException &#123; Runnable runnable = () -&gt; &#123; while (!Thread.currentThread().isInterrupted()) &#123; try &#123; subTas2(); &#125; catch (InterruptedException e) &#123;// Thread.currentThread().interrupt(); æ³¨é‡Š2 &#125; &#125; System.out.println(&quot;thread isInterrupted &quot; + Thread.currentThread().isInterrupted()); &#125;; Thread thread = new Thread(runnable); thread.start(); Thread.sleep(50); thread.interrupt(); &#125; private static void subTas2() throws InterruptedException &#123; System.out.println(&quot;subTas2 isInterrupted &quot; + Thread.currentThread().isInterrupted()); Thread.sleep(1000); &#125;&#125; è¾“å‡º subTas2 isInterrupted falsesubTas2 isInterrupted falsesubTas2 isInterrupted falsesubTas2 isInterrupted false æŠŠæ³¨é‡Šæ‰“å¼€è¾“å‡º subTas2 isInterrupted falsethread isInterrupted true ç»“è®º ï¼šå¦‚æžœ sleepã€wait ç­‰å¯ä»¥è®©çº¿ç¨‹è¿›å…¥é˜»å¡žçš„æ–¹æ³•ä½¿çº¿ç¨‹ä¼‘çœ äº†ï¼Œè€Œå¤„äºŽä¼‘çœ ä¸­çš„çº¿ç¨‹è¢«ä¸­æ–­ï¼Œé‚£ä¹ˆçº¿ç¨‹æ˜¯å¯ä»¥æ„Ÿå—åˆ°ä¸­æ–­ä¿¡å·çš„ï¼Œå¹¶ä¸”ä¼šæŠ›å‡ºä¸€ä¸ª InterruptedException å¼‚å¸¸ï¼ŒåŒæ—¶æ¸…é™¤ä¸­æ–­ä¿¡å·ï¼Œå°†ä¸­æ–­æ ‡è®°ä½è®¾ç½®æˆ falseã€‚è¿™æ ·ä¸€æ¥å°±ä¸ç”¨æ‹…å¿ƒé•¿æ—¶é—´ä¼‘çœ ä¸­çº¿ç¨‹æ„Ÿå—ä¸åˆ°ä¸­æ–­äº†ï¼Œå› ä¸ºå³ä¾¿çº¿ç¨‹è¿˜åœ¨ä¼‘çœ ï¼Œä»ç„¶èƒ½å¤Ÿå“åº”ä¸­æ–­é€šçŸ¥ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ try/catch çš„å¤„ç†é€»è¾‘ã€‚å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œcatch è¯­å¥å—é‡Œä»£ç æ˜¯ç©ºçš„ï¼Œå®ƒå¹¶æ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†ã€‚å‡è®¾çº¿ç¨‹æ‰§è¡Œåˆ°è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æ­£åœ¨ sleepï¼Œæ­¤æ—¶æœ‰çº¿ç¨‹å‘é€ interrupt é€šçŸ¥è¯•å›¾ä¸­æ–­çº¿ç¨‹ï¼Œå°±ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶æ¸…é™¤ä¸­æ–­ä¿¡å·ã€‚æŠ›å‡ºçš„å¼‚å¸¸è¢« catch è¯­å¥å—æ•æ‰ã€‚ ä½†æ˜¯ï¼Œæ•æ‰åˆ°å¼‚å¸¸çš„ catch æ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†é€»è¾‘ï¼Œç›¸å½“äºŽæŠŠä¸­æ–­ä¿¡å·ç»™éšè—äº†ï¼Œè¿™æ ·åšæ˜¯éžå¸¸ä¸åˆç†çš„ï¼Œé‚£ä¹ˆç©¶ç«Ÿåº”è¯¥æ€Žä¹ˆå¤„ç†å‘¢ï¼Ÿé¦–å…ˆï¼Œå¯ä»¥é€‰æ‹©åœ¨æ–¹æ³•ç­¾åä¸­æŠ›å‡ºå¼‚å¸¸ã€‚ å¦ä¸€ç§å¤„ç†æ–¹å¼ç±»ä¼¼ 123456789101112131415161718192021222324252627282930public class StopDuringSleep_answer01 &#123; public static void main(String[] args) throws InterruptedException &#123; Runnable runnable = () -&gt; &#123; while (!Thread.currentThread().isInterrupted()) &#123; subTas1(); &#125; System.out.println(&quot;thread isInterrupted &quot; + Thread.currentThread().isInterrupted()); &#125;; Thread thread = new Thread(runnable); thread.start(); Thread.sleep(50); thread.interrupt(); &#125; private static void subTas2() throws InterruptedException &#123; System.out.println(&quot;subTas2 isInterrupted &quot; + Thread.currentThread().isInterrupted()); Thread.sleep(1000); &#125; private static void subTas1() &#123; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; // åœ¨è¿™é‡Œä¸å¤„ç†è¯¥å¼‚å¸¸æ˜¯éžå¸¸ä¸å¥½çš„ Thread.currentThread().interrupt(); &#125; &#125;&#125; å†æ¬¡ä¸­æ–­æ–¹å¼ è®¾ç½®æ ‡å¿—,åœ¨æ–¹æ³•ä¸­å¤„ç†ï¼Œä¸Šä¸€ç§æ˜¯æŠ›å‡ºä¸Šä¸€å±‚,åœ¨ä¸Šä¸€å±‚è®¾ç½®æ ‡å¿—ä¸­æ–­ volatile ä¿®é¥°æ ‡è®°ä½ä¸é€‚ç”¨çš„åœºæ™¯ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºä¸ºä»€ä¹ˆè¯´ volatile æ ‡è®°ä½çš„åœæ­¢æ–¹æ³•æ˜¯ä¸å®Œç¾Žçš„ã€‚ç”Ÿäº§è€… 1234567891011121314151617181920212223242526public class Producer implements Runnable &#123; public volatile boolean canceled = false; BlockingQueue storage; public Producer(BlockingQueue storage) &#123; this.storage = storage; &#125; @Override public void run() &#123; int num = 0; try &#123; while (num &lt;= 100000 &amp;&amp; !canceled) &#123; if (num % 50 == 0) &#123; storage.put(num); System.out.println(num + &quot;æ˜¯50çš„å€æ•°,è¢«æ”¾åˆ°ä»“åº“ä¸­äº†ã€‚&quot;); &#125; num++; &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; System.out.println(&quot;ç”Ÿäº§è€…ç»“æŸè¿è¡Œ&quot;); &#125; &#125;&#125; æ¶ˆè´¹è€… 1234567891011121314public class Consumer &#123; BlockingQueue storage; public Consumer(BlockingQueue storage) &#123; this.storage = storage; &#125; public boolean needMoreNums() &#123; if (Math.random() &gt; 0.97) &#123; return false; &#125; return true; &#125;&#125; 1234567891011121314151617181920212223242526272829ArrayBlockingQueue storage = new ArrayBlockingQueue(8);Producer producer = new Producer(storage);Thread producerThread = new Thread(producer);producerThread.start();try &#123; Thread.sleep(500);&#125; catch (InterruptedException e) &#123; e.printStackTrace();&#125;Consumer consumer = new Consumer(storage);while (consumer.needMoreNums()) &#123; try &#123; System.out.println(consumer.storage.take() + &quot;è¢«æ¶ˆè´¹äº†&quot;); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;&#125;System.out.println(&quot;æ¶ˆè´¹è€…ä¸éœ€è¦æ›´å¤šæ•°æ®äº†ã€‚&quot;);//ä¸€æ—¦æ¶ˆè´¹ä¸éœ€è¦æ›´å¤šæ•°æ®äº†ï¼Œæˆ‘ä»¬åº”è¯¥è®©ç”Ÿäº§è€…ä¹Ÿåœä¸‹æ¥ï¼Œä½†æ˜¯å®žé™…æƒ…å†µå´åœä¸ä¸‹æ¥producer.canceled = true;System.out.println(producer.canceled); å½“ producer.canceled = trueæ—¶,ç”Ÿäº§è€…Producerè·³å‡ºå¾ªçŽ¯ while (num &lt;= 100000 &amp;&amp; !canceled) ,æ¥åˆ°è¿è¡Œ 1System.out.println(&quot;ç”Ÿäº§è€…ç»“æŸè¿è¡Œ&quot;); ç„¶è€Œç»“æžœå´ä¸æ˜¯æˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·ï¼Œå°½ç®¡å·²ç»æŠŠ canceled è®¾ç½®æˆ trueï¼Œä½†ç”Ÿäº§è€…ä»ç„¶æ²¡æœ‰åœæ­¢ï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…åœ¨æ‰§è¡Œ storage.put(num) æ—¶å‘ç”Ÿé˜»å¡žï¼Œåœ¨å®ƒè¢«å«é†’ä¹‹å‰æ˜¯æ²¡æœ‰åŠžæ³•è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªçŽ¯åˆ¤æ–­ canceled çš„å€¼çš„ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ç”¨ volatile æ˜¯æ²¡æœ‰åŠžæ³•è®©ç”Ÿäº§è€…åœä¸‹æ¥çš„ï¼Œç›¸åå¦‚æžœç”¨ interrupt è¯­å¥æ¥ä¸­æ–­ï¼Œå³ä½¿ç”Ÿäº§è€…å¤„äºŽé˜»å¡žçŠ¶æ€ï¼Œä»ç„¶èƒ½å¤Ÿæ„Ÿå—åˆ°ä¸­æ–­ä¿¡å·ï¼Œå¹¶åšå“åº”å¤„ç†ã€‚ ä¿®å¤ç‰ˆæœ¬1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class WrongWayVolatileFixed &#123; public static void main(String[] args) throws InterruptedException &#123; ArrayBlockingQueue storage = new ArrayBlockingQueue(10); WrongWayVolatileFixed body = new WrongWayVolatileFixed(); Producer producer = body.new Producer(storage); Thread producerThread = new Thread(producer); producerThread.start(); Thread.sleep(1000); Consumer consumer = body.new Consumer(storage); while (consumer.needMoreNums()) &#123; System.out.println(storage.take()+&quot;è¢«æ¶ˆè´¹&quot;); Thread.sleep(100); &#125; System.out.println(&quot;æ¶ˆè´¹è€…ä¸éœ€è¦æ›´å¤šæ•°æ®äº†&quot;); /** * ä¸€æ—¦æ¶ˆè´¹ä¸éœ€è¦æ›´å¤šæ•°æ®äº†ï¼Œæˆ‘ä»¬åº”è¯¥è®©ç”Ÿäº§è€…ä¹Ÿåœä¸‹æ¥ï¼Œ * ä½†æ˜¯å®žé™…æƒ…å†µ,åœ¨ storage.put(num);å¤„è¢«é˜»å¡žäº†ï¼Œæ— æ³•è¿›å…¥æ–°çš„ä¸€å±‚while()å¾ªçŽ¯ä¸­åˆ¤æ–­ï¼Œ!Canceled çš„å€¼ä¹Ÿå°±æ— æ³•åˆ¤æ–­ */ producerThread.interrupt(); &#125; class Producer implements Runnable&#123; BlockingQueue storage; public Producer(BlockingQueue storage) &#123; this.storage = storage; &#125; @Override public void run() &#123; int num = 0; try &#123; //canceledä¸ºtrueï¼Œåˆ™æ— æ³•è¿›å…¥ while (num &lt;= 100000 &amp;&amp; !Thread.currentThread().isInterrupted()) &#123; if (num % 100 == 0) &#123; storage.put(num); System.out.println(num + &quot;æ˜¯100çš„å€æ•°,è¢«æ”¾åˆ°ä»“åº“ä¸­äº†ã€‚&quot;); &#125; num++; &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; System.out.println(&quot;ç”Ÿäº§è€…ç»“æŸè¿è¡Œ&quot;); &#125; &#125; &#125; class Consumer &#123; BlockingQueue storage; public Consumer(BlockingQueue storage) &#123; this.storage = storage; &#125; public boolean needMoreNums() &#123; if (Math.random() &gt; 0.95) &#123; return false; &#125; return true; &#125; &#125;&#125; producerThread.interrupt();åŽ»æ‰“æ–­ çº¿ç¨‹æ± å…³é—­æ–¹å¼1234567891011121314151617181920212223242526272829303132public class ShutdownTest &#123; public static void main(String[] args) &#123; ExecutorService exec = Executors.newCachedThreadPool(); exec.submit(new ShutDownThread()); try &#123; TimeUnit.SECONDS.sleep(3); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; exec.shutdownNow(); &#125; static class ShutDownThread implements Runnable &#123; static int taskId = 0; @Override public void run() &#123; while (!Thread.currentThread().isInterrupted())&#123; try &#123; Thread.sleep(5000); System.out.println(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); Thread.currentThread().interrupt(); &#125; System.out.println(&quot;taskId Terminated&quot; + taskId++); &#125; System.out.println(&quot;&quot;); &#125; &#125;&#125; ä¸ºä»€ä¹ˆ wait å¿…é¡»åœ¨ synchronized ä¿æŠ¤çš„åŒæ­¥ä»£ç ä¸­ä½¿ç”¨? ä¸åœ¨synchronizedå°±ä¸èƒ½ä¿è¯åŽŸå­æ€§ï¼Œæ‰§è¡Œwaitä¹‹å‰çš„ä»£ç åŽï¼Œè¢«å…¶ä»–çº¿ç¨‹æŠ¢å æ‰§è¡Œäº†notifiy(æ­¤æ—¶æ²¡èµ·ä½œç”¨ï¼Œwaitæ–¹æ³•è¿˜æ²¡è°ƒç”¨)ï¼Œå›žæ¥ç»§ç»­æ‰§è¡Œwaitï¼Œè¿™æ ·è¯¥çº¿ç¨‹å°±å¾—ä¸åˆ°å”¤é†’. https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=242 https://github.com/Lvshujia/JUC","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"concurrency","slug":"concurrency","permalink":"https://noteforme.github.io/tags/concurrency/"}]},{"title":"Exception","slug":"Exception","date":"2021-01-14T09:29:14.000Z","updated":"2022-06-12T03:17:58.619Z","comments":true,"path":"2021/01/14/Exception/","link":"","permalink":"https://noteforme.github.io/2021/01/14/Exception/","excerpt":"","text":"å¼‚å¸¸ç»“æž„å›¾ https://www.cnblogs.com/aspirant/p/10790803.html ![2022-06-06 -8.53](Exception/2022-06-06 -8.53.png)","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"JVM_GC","slug":"JVM-GC","date":"2021-01-05T03:49:01.000Z","updated":"2024-07-19T00:08:55.383Z","comments":true,"path":"2021/01/05/JVM-GC/","link":"","permalink":"https://noteforme.github.io/2021/01/05/JVM-GC/","excerpt":"","text":"åžƒåœ¾å›žæ”¶å¯è¾¾æ€§åˆ†æžâ€‹ ä»ŽGC Rootså‘ä¸‹è¿½æº¯ã€æœç´¢ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªå«åšRefrence Chainçš„é“¾æ¡ã€‚å½“ä¸€ä¸ªå¯¹è±¡ä¸èƒ½å’Œä»»ä½•ä¸€ä¸ªGC Rootäº§ç”Ÿå…³ç³»æ—¶ï¼Œå°±ä¼šè¢«å›žæ”¶ã€‚ â€‹ å¦‚å›¾æ‰€ç¤ºï¼ŒObj5ã€Obj6ã€Obj7ï¼Œç”±äºŽä¸èƒ½å’Œ GC Root äº§ç”Ÿå…³è”ï¼Œå‘ç”Ÿ GC æ—¶ï¼Œå°±ä¼šè¢«æ‘§æ¯ã€‚ åžƒåœ¾å›žæ”¶å°±æ˜¯å›´ç»•ç€ GC Roots åŽ»åšçš„ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿæ˜¯å¾ˆå¤šå†…å­˜æ³„éœ²çš„æ ¹æºï¼Œå› ä¸ºå…¶ä»–å¼•ç”¨æ ¹æœ¬æ²¡æœ‰è¿™æ ·çš„æƒåˆ©ã€‚ é‚£ä¹ˆï¼Œä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œæ‰ä¼šæ˜¯ GC Root å‘¢ï¼Ÿè¿™ä¸åœ¨äºŽå®ƒæ˜¯ä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œè€Œåœ¨äºŽå®ƒæ‰€å¤„çš„ä½ç½®ã€‚ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=31#/detail/pc?id=1029 GC Roots æœ‰å“ªäº›GC Roots æ˜¯ä¸€ç»„å¿…é¡»æ´»è·ƒçš„å¼•ç”¨ã€‚ç”¨é€šä¿—çš„è¯æ¥è¯´ï¼Œå°±æ˜¯ç¨‹åºæŽ¥ä¸‹æ¥é€šè¿‡ç›´æŽ¥å¼•ç”¨æˆ–è€…é—´æŽ¥å¼•ç”¨ï¼Œèƒ½å¤Ÿè®¿é—®åˆ°çš„æ½œåœ¨è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ GC Roots åŒ…æ‹¬ï¼š Java çº¿ç¨‹ä¸­ï¼Œå½“å‰æ‰€æœ‰æ­£åœ¨è¢«è°ƒç”¨çš„æ–¹æ³•çš„å¼•ç”¨ç±»åž‹å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å€¼ç­‰ã€‚ä¹Ÿå°±æ˜¯ä¸Žæˆ‘ä»¬æ ˆå¸§ç›¸å…³çš„å„ç§å¼•ç”¨ã€‚ æ‰€æœ‰å½“å‰è¢«åŠ è½½çš„ Java ç±»ã€‚ Java ç±»çš„å¼•ç”¨ç±»åž‹é™æ€å˜é‡ã€‚ è¿è¡Œæ—¶å¸¸é‡æ± é‡Œçš„å¼•ç”¨ç±»åž‹å¸¸é‡ï¼ˆString æˆ– Class ç±»åž‹ï¼‰ã€‚ JVM å†…éƒ¨æ•°æ®ç»“æž„çš„ä¸€äº›å¼•ç”¨ï¼Œæ¯”å¦‚ sun.jvm.hotspot.memory.Universe ç±»ã€‚ ç”¨äºŽåŒæ­¥çš„ç›‘æŽ§å¯¹è±¡ï¼Œæ¯”å¦‚è°ƒç”¨äº†å¯¹è±¡çš„ wait() æ–¹æ³•ã€‚ JNI handlesï¼ŒåŒ…æ‹¬ global handles å’Œ local handlesã€‚ è¿™äº› GC Roots å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œä¸‹é¢è¿™ç§è¯´æ³•æ›´åŠ å¥½è®°ä¸€äº›ï¼š æ´»åŠ¨çº¿ç¨‹ç›¸å…³çš„å„ç§å¼•ç”¨ã€‚ ç±»çš„é™æ€å˜é‡çš„å¼•ç”¨ã€‚ JNI å¼•ç”¨ã€‚ â€‹ æ³¨æ„ æˆ‘ä»¬è¿™é‡Œè¯´çš„æ˜¯æ´»è·ƒçš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡æ˜¯ä¸èƒ½ä½œä¸º GC Roots çš„ã€‚ GC è¿‡ç¨‹æ˜¯æ‰¾å‡ºæ‰€æœ‰æ´»å¯¹è±¡ï¼Œå¹¶æŠŠå…¶ä½™ç©ºé—´è®¤å®šä¸ºâ€œæ— ç”¨â€ï¼›è€Œä¸æ˜¯æ‰¾å‡ºæ‰€æœ‰æ­»æŽ‰çš„å¯¹è±¡ï¼Œå¹¶å›žæ”¶å®ƒä»¬å ç”¨çš„ç©ºé—´ã€‚æ‰€ä»¥ï¼Œå“ªæ€• JVM çš„å †éžå¸¸çš„å¤§ï¼ŒåŸºäºŽ tracing çš„ GC æ–¹å¼ï¼Œå›žæ”¶é€Ÿåº¦ä¹Ÿä¼šéžå¸¸å¿«ã€‚ å¼•ç”¨è®¡æ•°ç®—æ³•(å¿½ç•¥)å½“å‰ä¸»æµçš„å•†ç”¨ç¨‹åºè¯­è¨€(Javaã€C#ï¼Œä¸Šæº¯è‡³å‰é¢æåˆ°çš„å¤è€çš„Lisp)çš„å†…å­˜ç®¡ç†å­ç³»ç»Ÿï¼Œéƒ½æ˜¯ é€šè¿‡å¯è¾¾æ€§åˆ†æž(Reachability Analysis)ç®—æ³•æ¥åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»çš„ã€‚è¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€è·¯å°±æ˜¯é€šè¿‡ ä¸€ç³»åˆ—ç§°ä¸ºâ€œGC Rootsâ€çš„æ ¹å¯¹è±¡ä½œä¸ºèµ·å§‹èŠ‚ç‚¹é›†ï¼Œä»Žè¿™äº›èŠ‚ç‚¹å¼€å§‹ï¼Œæ ¹æ®å¼•ç”¨å…³ç³»å‘ä¸‹æœç´¢ï¼Œæœç´¢è¿‡ ç¨‹æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€(Reference Chain)ï¼Œå¦‚æžœæŸä¸ªå¯¹è±¡åˆ°GC Rootsé—´æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿žï¼Œ æˆ–è€…ç”¨å›¾è®ºçš„è¯æ¥è¯´å°±æ˜¯ä»ŽGC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾æ—¶ï¼Œåˆ™è¯æ˜Žæ­¤å¯¹è±¡æ˜¯ä¸å¯èƒ½å†è¢«ä½¿ç”¨çš„ã€‚ 12345678910111213141516/*** testGC()æ–¹æ³•æ‰§è¡ŒåŽï¼ŒobjAå’ŒobjBä¼šä¸ä¼šè¢«GCå‘¢? * @author zzm*/public class ReferenceCountingGC &#123; public Object instance = null; private static final int _1MB = 1024 * 1024;/*** è¿™ä¸ªæˆå‘˜å±žæ€§çš„å”¯ä¸€æ„ä¹‰å°±æ˜¯å ç‚¹å†…å­˜ï¼Œä»¥ä¾¿èƒ½åœ¨GCæ—¥å¿—ä¸­çœ‹æ¸…æ¥šæ˜¯å¦æœ‰å›žæ”¶è¿‡ */ private byte[] bigSize = new byte[2 * _1MB]; public static void testGC() &#123; ReferenceCountingGC objA = new ReferenceCountingGC(); ReferenceCountingGC objB = new ReferenceCountingGC(); objA.instance = objB; objB.instance = objA; objA = null; objB = null; // å‡è®¾åœ¨è¿™è¡Œå‘ç”ŸGCï¼ŒobjAå’ŒobjBæ˜¯å¦èƒ½è¢«å›žæ”¶? System.gc(); &#125; &#125; èƒ½å¤Ÿæ‰¾åˆ° Reference Chain çš„å¯¹è±¡ï¼Œå°±ä¸€å®šä¼šå­˜æ´»ä¹ˆï¼Ÿå¼•ç”¨çº§åˆ« å°†å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨(Strongly Re-ference)ã€è½¯ å¼•ç”¨(Soft Reference)ã€å¼±å¼•ç”¨(Weak Reference)å’Œè™šå¼•ç”¨(Phantom Reference)4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼º åº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚ Â·å¼ºå¼•ç”¨æ˜¯æœ€ä¼ ç»Ÿçš„â€œå¼•ç”¨â€çš„å®šä¹‰ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼â€œObject obj&#x3D;new Object()â€è¿™ç§å¼•ç”¨å…³ç³»ã€‚æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜å­˜åœ¨ï¼Œåžƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›ž æ”¶æŽ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éžå¿…é¡»çš„å¯¹è±¡ã€‚åªè¢«è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†… å­˜æº¢å‡ºå¼‚å¸¸å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›žæ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›žæ”¶ï¼Œå¦‚æžœè¿™æ¬¡å›žæ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œ æ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚åœ¨JDK 1.2ç‰ˆä¹‹åŽæä¾›äº†SoftReferenceç±»æ¥å®žçŽ°è½¯å¼•ç”¨ã€‚ 12345// ä¼ªä»£ç Object object = new Object();SoftReference&lt;Object&gt; softRef = new SoftReference(object); å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éžå¿…é¡»å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åª èƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åžƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚å½“åžƒåœ¾æ”¶é›†å™¨å¼€å§‹å·¥ä½œï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›žæ”¶æŽ‰åª è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚åœ¨JDK 1.2ç‰ˆä¹‹åŽæä¾›äº†WeakReferenceç±»æ¥å®žçŽ°å¼±å¼•ç”¨ã€‚ 12345// ä¼ªä»£ç Object object = new Object();WeakReference&lt;Object&gt; softRef = new WeakReference(object); è™šå¼•ç”¨ä¹Ÿç§°ä¸ºâ€œå¹½çµå¼•ç”¨â€æˆ–è€…â€œå¹»å½±å¼•ç”¨â€ï¼Œè¿™æ˜¯ä¸€ç§å½¢åŒè™šè®¾çš„å¼•ç”¨ï¼Œåœ¨çŽ°å®žåœºæ™¯ä¸­ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚è™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åžƒåœ¾å›žæ”¶ã€‚ è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åžƒåœ¾å›žæ”¶çš„æ´»åŠ¨ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"OS","slug":"OS","date":"2020-12-28T07:32:28.000Z","updated":"2025-07-27T10:47:33.886Z","comments":true,"path":"2020/12/28/OS/","link":"","permalink":"https://noteforme.github.io/2020/12/28/OS/","excerpt":"","text":"xv6 è¡¥å……èµ„æº xv6 æ“ä½œç³»ç»Ÿçš„æ·±å…¥è®²è§£ xv6 ä¸­æ–‡æ–‡æ¡£ xv6 å…³é”®æºç é€è¡Œè§£è¯» + æ•´ä½“æž¶æž„åˆ†æž è¯¾ç¨‹æ•™æç¿»è¯‘ xv6-riscv-book-zh-cn è¯¾ç¨‹æ•™æç¿»è¯‘æºç  xv6-riscv-book-zh-cn èµ„æºæ±‡æ€»@PKUFlyingPig åœ¨å­¦ä¹ è¿™é—¨è¯¾ä¸­ç”¨åˆ°çš„æ‰€æœ‰èµ„æºå’Œä½œä¸šå®žçŽ°éƒ½æ±‡æ€»åœ¨ PKUFlyingPig&#x2F;MIT6.S081-2020fall - GitHub ä¸­ã€‚ @KuangjuX ç¼–å†™äº† MIT 6.S081 çš„ lab çš„é¢˜è§£ï¼Œé‡Œé¢æœ‰è¯¦ç»†çš„è§£æ³•å’Œè¡¥å……çŸ¥è¯†ã€‚å¦å¤–ï¼Œ@KuangjuX è¿˜ä½¿ç”¨ Rust è¯­è¨€é‡æ–°å®žçŽ°äº† xv6-riscv æ“ä½œç³»ç»Ÿï¼šxv6-rustï¼Œé‡Œé¢å¯¹äºŽ xv6-riscv æœ‰æ›´ä¸ºè¯¦ç»†çš„æ€è€ƒå’Œè®¨è®ºï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸€ä¸‹å“¦ã€‚ ä¸€äº›å¯ä»¥å‚è€ƒçš„åšå®¢ doraemonzzz Xiao Fan (æ¨Šæ½‡) Miigonâ€™s blog Zhou Fang Yichunâ€™s Blog è§£æžTa PKUFlyingPig æ˜Ÿé¥è§ tzyt çš„åšå®¢ å®žéªŒ + æ“ä½œç³»ç»Ÿå¯¼è®º https://github.com/woai3c/MIT6.828 https://pdos.csail.mit.edu/6.828/2018/index.html https://www.zhihu.com/question/40973610 RISC-V å¾®å¤„ç†å™¨ xv6 å®žéªŒçŽ¯å¢ƒé…ç½®https://pdos.csail.mit.edu/6.828/2021/tools.html https://pdos.csail.mit.edu/6.S081/2021/xv6.html GitHub - chaiqingao&#x2F;xv6-labs-2021: MIT 6.S081: Operating System Engineering &#x2F; Fall 2021 è¯¾ç¨‹å®žéªŒ https://zhuanlan.zhihu.com/p/343655412 https://zhuanlan.zhihu.com/p/272199762 https://zhuanlan.zhihu.com/p/331492444 https://www.bilibili.com/video/BV11K4y127Qk?from=search&amp;seid=8628043749223720261 issue112345678m@m:~/TESTLAB/xv6-labs-2021$ make qemuriscv64-linux-gnu-gcc -Wall -Werror -O -fno-omit-frame-pointer -ggdb -DSOL_UTIL -DLAB_UTIL -MD -mcmodel=medany -ffreestanding -fno-common -nostdlib -mno-relax -I. -fno-stack-protector -fno-pie -no-pie -c -o user/sh.o user/sh.cuser/sh.c:55:1: error: empty declaration [-Werror] 55 | __attribute__((noreturn)); | ^~~~~~~~~~~~~user/sh.c: In function â€˜runcmdâ€™:user/sh.c:59:1: error: infinite recursion detected [-Werror=infinite-recursion] 59 | runcmd(struct cmd *cmd) ä¿®æ”¹user&#x2F;sh.c :58å¤„ï¼Œæ·»åŠ  123456789101112diff --git a/user/sh.c b/user/sh.cindex 83dd513..c96dab0 100644--- a/user/sh.c+++ b/user/sh.c@@ -54,6 +54,7 @@ void panic(char*); struct cmd *parsecmd(char*); // Execute cmd. Never returns.__attribute__((noreturn)) // æ·»åŠ  void runcmd(struct cmd *cmd) &#123; è®°å½•MIT6.s081 ç¼–è¯‘QEMUä¸­çš„é”™è¯¯_error: pkg-config binary â€˜pkg-configâ€™ not found-CSDNåšå®¢ é”™è¯¯1 1234ERROR: glib-2.48 gthread-2.0 is required to compile QEMUå¤„ç†sudo apt-get install libglib2.0-dev é”™è¯¯2 12345ERROR: pixman &gt;= 0.21.8 not present. Please install the pixman devel package.å¤„ç†sudo apt-get install libpixman-1-dev å®žéªŒ åœ¨userç›®å½•ä¸‹åˆ›å»ºcopy.c åœ¨Makefile 152è¡Œæ·»åŠ é…ç½® æµ‹è¯•æ·»åŠ ç¨‹åº å¯åŠ¨xv6åŽï¼Œæ‰§è¡Œcopy https://blog.csdn.net/u013577996/article/details/108680888 LABlab1 123456789101112131415161718192021222324252627#include &quot;kernel/types.h&quot;#include &quot;user/user.h&quot;intmain(int argc, char *argv[])&#123; if(argc &lt; 2)&#123; fprintf(2 ,&quot;Usage: need at least one arugment...\\n&quot;); exit(1); &#125; printf(&quot;Number of arguments: %d\\n&quot;, argc); // Print each argument for (int i = 0; i &lt; argc; i++) &#123; printf(&quot;Argument %d: %s\\n&quot;, i, argv[i]); &#125; int time = atoi(argv[1]); // should notice argv[1] is first arugment. int ret = sleep(time); printf(&quot;Sleep time %d: \\n&quot;, time); exit(ret); return 0;&#125; $ sleep 5Number of arguments: 2Argument 0: sleepArgument 1: 5Sleep time 5: è¯¾ç¨‹å­¦ä¹ 3.4å†…æ ¸æ‰§è¡Œä»»ä½•å†…æ ¸æŒ‡ä»¤3.4 ä¹‹å‰æåˆ°ï¼Œè®¾ç½®å¤„ç†å™¨ä¸­kernel modeçš„bitä½çš„æŒ‡ä»¤æ˜¯ä¸€æ¡ç‰¹æ®Šæƒé™æŒ‡ä»¤ï¼Œé‚£ä¹ˆä¸€ä¸ªç”¨æˆ·ç¨‹åºæ€Žä¹ˆæ‰èƒ½è®©å†…æ ¸æ‰§è¡Œä»»ä½•å†…æ ¸æŒ‡ä»¤ï¼Ÿå› ä¸ºçŽ°åœ¨åˆ‡æ¢åˆ°kernel modeçš„æŒ‡ä»¤éƒ½æ˜¯ä¸€æ¡ç‰¹æ®Šæƒé™æŒ‡ä»¤äº†ï¼Œå¯¹äºŽç”¨æˆ·ç¨‹åºæ¥è¯´ä¹Ÿæ²¡æ³•ä¿®æ”¹é‚£ä¸ªbitä½ ç”¨æˆ·ç¨‹åºä¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥åˆ‡æ¢åˆ°kernel modeã€‚å½“ç”¨æˆ·ç¨‹åºæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œä¼šé€šè¿‡ECALLè§¦å‘ä¸€ä¸ªè½¯ä¸­æ–­ï¼ˆsoftware interruptï¼‰ï¼Œè½¯ä¸­æ–­ä¼šæŸ¥è¯¢æ“ä½œç³»ç»Ÿé¢„å…ˆè®¾å®šçš„ä¸­æ–­å‘é‡è¡¨ï¼Œå¹¶æ‰§è¡Œä¸­æ–­å‘é‡è¡¨ä¸­åŒ…å«çš„ä¸­æ–­å¤„ç†ç¨‹åºã€‚ä¸­æ–­å¤„ç†ç¨‹åºåœ¨å†…æ ¸ä¸­ï¼Œè¿™æ ·å°±å®Œæˆäº†user modeåˆ°kernel modeçš„åˆ‡æ¢ï¼Œå¹¶æ‰§è¡Œç”¨æˆ·ç¨‹åºæƒ³è¦æ‰§è¡Œçš„ç‰¹æ®Šæƒé™æŒ‡ä»¤ï¼Ÿ é’ˆå¯¹è¿™ä¸ªå›žç­”ï¼Œæˆ‘çš„ç–‘é—®æ˜¯ï¼Œæ€Žä¹ˆç¡®ä¿æ¶æ„ç¨‹åºä¸èµ°è¿™ç§ç³»ç»Ÿè°ƒç”¨å‘¢ 3.9 æ–­ç‚¹è°ƒè¯•12345678ä¸€ä¸ªçª—å£make CPUS=1 qemu-gdbæ–°å¼€çª—å£ gdb-multiarch kernel/kerneltarget remote localhost:26000 https://zhuanlan.zhihu.com/p/331492444 GDBç®€å•ä½¿ç”¨ 123ctrl x a æ˜¾ç¤ºä»£ç  b æ–­ç‚¹ rè¿è¡Œ https://www.bilibili.com/video/BV1ei4y1V758?from=search&amp;seid=4972450432119771986 4.3é¡µè¡¨ åœ¨æœ€é«˜çº§çš„page directoryä¸­çš„PPNï¼ŒåŒ…å«äº†ä¸‹ä¸€çº§page directoryçš„ç‰©ç†å†…å­˜åœ°å€ï¼Œ ç¬¬äºŒä¸ª9bitç”¨æ¥ç´¢å¼•ä¸­é—´çº§çš„page directoryï¼Œç¬¬ä¸‰ä¸ª9bitç”¨æ¥ç´¢å¼•æœ€ä½Žçº§çš„page directoryã€‚åœ¨æœ€ä½Žçº§page directoryï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å¾—åˆ°44bitçš„PPNï¼Œè¿™é‡ŒåŒ…å«äº†æˆ‘ä»¬å®žé™…ä¸Šæƒ³è¦ç¿»è¯‘çš„ç‰©ç†pageåœ°å€ï¼Œç„¶åŽå†åŠ ä¸Šè™šæ‹Ÿå†…å­˜åœ°å€çš„12bit offsetï¼Œå°±å¾—åˆ°äº†56bitç‰©ç†å†…å­˜åœ°å€ã€‚ ç¬¬ä¸€ä¸ªlevel1æœ‰äº†Level2é¡µè¡¨çš„ç‰©ç†åœ°å€ï¼ŒLevel2çš„ PPNå°±æ˜¯é¡µè¡¨çš„åç§»é‡,æŒ‡å‘Level3çš„ç‰©ç†åœ°å€. https://www.bilibili.com/video/BV1zt4y1U7rq?from=search&amp;seid=11572648099017443360 å¯åŠ¨æ¦‚è§ˆ â€‹ ç®€å•æ¥è¯´ å°±æ˜¯åŠ ç”µåŽï¼Œ1ã€‚å¯åŠ¨ä¸»æ¿BIOS ã€‹ 2. BIOSåˆå§‹åŒ–ä»Žç£ç›˜ä¸­æŠŠåŠ è½½ç¨‹åºbootloader åŠ è½½åˆ°å†…å­˜ä¸­ ã€‹3.æŠŠç£ç›˜é•œåƒæ“ä½œç³»ç»ŸåŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œ ä¸ºä»€ä¹ˆä¸åœ¨ç¬¬äºŒæ­¥ç›´æŽ¥åŠ è½½æ“ä½œç³»ç»Ÿå‘¢? 1. ä¸ºäº†å…¼å®¹ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿ 2. bootloaderåªèƒ½å­˜ 512å­—èŠ‚ï¼Œç³»ç»Ÿè¿œå¤§äºŽå®ƒã€‚ https://objectkuan.gitbooks.io/ucore-docs/content/lab1/lab1_3_booting.html BIOSåˆå§‹åŒ– ç¡¬ä»¶è‡ªæ£€POST,æ£€æµ‹ç³»ç»Ÿä¸­ï¼ˆå†…å­˜å’Œæ˜¾å¡ï¼Œè½¯ç›˜ ï¼Œå½±ç‰‡ å…‰ç›˜ USB)ç­‰å…³é”®éƒ¨ä»¶çš„å­˜åœ¨å’Œå·¥ä½œçŠ¶æ€æŸ¥æ‰¾å¹¶æ‰§è¡Œæ˜¾å¡ç­‰æŽ¥å£å¡BIOS,å¹¶è¿›è¡Œè®¾å¤‡åˆå§‹åŒ–ï¼› åŠ è½½ä¸Šè¿°è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼ˆä¸»å¼•å¯¼æ‰‡åŒºï¼ŒMaster Boot Record,or MBRï¼‰çš„512å­—èŠ‚çš„å†…å®¹è¯»åˆ°å†…å­˜å›ºå®šåœ°å€0x7c00ï¼Œè¿™ä¸ªå†…å®¹å°±æ˜¯bootloader,ç­‰å¾…å¯¹Ucoreæ“ä½œç³»ç»Ÿçš„åŠ è½½. bootloaderåšçš„äº‹æƒ… ä»Žå®žæ¨¡å¼åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼(protection mdoe) ï¼Œä¸ºåŽç»­æ“ä½œç³»ç»Ÿçš„æ‰§è¡Œåšå‡†å¤‡ã€‚ ä»Žç¡¬ç›˜ä¸Šè¯»å–kernel in ELFæ ¼å¼çš„ucore kernel(å°±æ˜¯ç³»ç»Ÿä»£ç ï¼Œè·Ÿåœ¨MBRåŽé¢çš„æ‰‡åŒº)å¹¶æ”¾åˆ°å†…å­˜ä¸­å›ºå®šä½ç½®ã€‚ è·³è½¬åˆ°ucore OSçš„å…¥å£ç‚¹(entry point)æ‰§è¡Œï¼Œè¿™æ—¶å€™æŽ§åˆ¶å™¨äº¤ç»™äº† ucore. ç¬¬äºŒéƒ¨ç»†èŠ‚ åŠ è½½ç¨‹åº![](OS\\2021-04-13at1.36.29 PM.png) â€‹ è®¡ç®—æœºå¯èƒ½æœ‰ä¸æ­¢ä¸€ä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºæœ‰ä¸åŒçš„ç³»ç»Ÿï¼Œä¸»å¼•å¯¼è®°å½•æ¥ç¡®å®šåŽ»å“ªä¸ªæ–‡ä»¶ç³»ç»Ÿè¯»åŠ è½½ç¨‹åº BIOSå¯åŠ¨è¿‡ç¨‹ å½“è®¡ç®—æœºåŠ ç”µåŽï¼Œä¸€èˆ¬ä¸ç›´æŽ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯æ‰§è¡Œç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶å®ŒæˆåŸºæœ¬IOåˆå§‹åŒ–å’Œå¼•å¯¼åŠ è½½åŠŸèƒ½(BIOS)ã€‚ç®€å•åœ°è¯´ï¼Œç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶å°±æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸è¿è¡Œä¹‹å‰è¿è¡Œçš„ä¸€æ®µå°è½¯ä»¶ã€‚é€šè¿‡è¿™æ®µå°è½¯ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ç¡¬ä»¶è®¾å¤‡ã€å»ºç«‹ç³»ç»Ÿçš„å†…å­˜ç©ºé—´æ˜ å°„å›¾ï¼Œä»Žè€Œå°†ç³»ç»Ÿçš„è½¯ç¡¬ä»¶çŽ¯å¢ƒå¸¦åˆ°ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸ºæœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸å‡†å¤‡å¥½æ­£ç¡®çš„çŽ¯å¢ƒã€‚æœ€ç»ˆå¼•å¯¼åŠ è½½ç¨‹åºæŠŠæ“ä½œç³»ç»Ÿå†…æ ¸æ˜ åƒåŠ è½½åˆ°RAMä¸­ï¼Œå¹¶å°†ç³»ç»ŸæŽ§åˆ¶æƒä¼ é€’ç»™å®ƒã€‚ å¯¹äºŽç»å¤§å¤šæ•°è®¡ç®—æœºç³»ç»Ÿè€Œè¨€ï¼Œæ“ä½œç³»ç»Ÿå’Œåº”ç”¨è½¯ä»¶æ˜¯å­˜æ”¾åœ¨ç£ç›˜ï¼ˆç¡¬ç›˜&#x2F;è½¯ç›˜ï¼‰ã€å…‰ç›˜ã€EPROMã€ROMã€Flashç­‰å¯åœ¨æŽ‰ç”µåŽç»§ç»­ä¿å­˜æ•°æ®çš„å­˜å‚¨ä»‹è´¨ä¸Šã€‚è®¡ç®—æœºå¯åŠ¨åŽï¼ŒCPUä¸€å¼€å§‹ä¼šåˆ°ä¸€ä¸ªç‰¹å®šçš„åœ°å€å¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ï¼Œè¿™ä¸ªç‰¹å®šçš„åœ°å€å­˜æ”¾äº†ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶ï¼Œè´Ÿè´£å®Œæˆè®¡ç®—æœºåŸºæœ¬çš„IOåˆå§‹åŒ–ï¼Œè¿™æ˜¯ç³»ç»ŸåŠ ç”µåŽè¿è¡Œçš„ç¬¬ä¸€æ®µè½¯ä»¶ä»£ç ã€‚å¯¹äºŽIntel 80386çš„ä½“ç³»ç»“æž„è€Œè¨€ï¼ŒPCæœºä¸­çš„ç³»ç»Ÿåˆå§‹åŒ–è½¯ä»¶ç”±BIOS (Basic Input Output Systemï¼Œå³åŸºæœ¬è¾“å…¥&#x2F;è¾“å‡ºç³»ç»Ÿï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªå›ºåŒ–åœ¨ä¸»æ¿Flash&#x2F;CMOSä¸Šçš„è½¯ä»¶)å’Œä½äºŽè½¯ç›˜&#x2F;ç¡¬ç›˜å¼•å¯¼æ‰‡åŒºä¸­çš„OS Boot Loaderï¼ˆåœ¨ucoreä¸­çš„bootasm.Så’Œbootmain.cï¼‰ä¸€èµ·ç»„æˆã€‚BIOSå®žé™…ä¸Šæ˜¯è¢«å›ºåŒ–åœ¨è®¡ç®—æœºROMï¼ˆåªè¯»å­˜å‚¨å™¨ï¼‰èŠ¯ç‰‡ä¸Šçš„ä¸€ä¸ªç‰¹æ®Šçš„è½¯ä»¶ï¼Œä¸ºä¸Šå±‚è½¯ä»¶æä¾›æœ€åº•å±‚çš„ã€æœ€ç›´æŽ¥çš„ç¡¬ä»¶æŽ§åˆ¶ä¸Žæ”¯æŒã€‚æ›´å½¢è±¡åœ°è¯´ï¼ŒBIOSå°±æ˜¯PCè®¡ç®—æœºç¡¬ä»¶ä¸Žä¸Šå±‚è½¯ä»¶ç¨‹åºä¹‹é—´çš„ä¸€ä¸ªâ€æ¡¥æ¢â€ï¼Œè´Ÿè´£è®¿é—®å’ŒæŽ§åˆ¶ç¡¬ä»¶ã€‚ ä»¥Intel 80386ä¸ºä¾‹ï¼Œè®¡ç®—æœºåŠ ç”µåŽï¼ŒCPUä»Žç‰©ç†åœ°å€0xFFFFFFF0ï¼ˆç”±åˆå§‹åŒ–çš„CSï¼šEIPç¡®å®šï¼Œæ­¤æ—¶CSå’ŒIPçš„å€¼åˆ†åˆ«æ˜¯0xF000å’Œ0xFFF0)ï¼‰å¼€å§‹æ‰§è¡Œã€‚åœ¨0xFFFFFFF0è¿™é‡Œåªæ˜¯å­˜æ”¾äº†ä¸€æ¡è·³è½¬æŒ‡ä»¤ï¼Œé€šè¿‡è·³è½¬æŒ‡ä»¤è·³åˆ°BIOSä¾‹è¡Œç¨‹åºèµ·å§‹ç‚¹ã€‚BIOSåšå®Œè®¡ç®—æœºç¡¬ä»¶è‡ªæ£€å’Œåˆå§‹åŒ–åŽï¼Œä¼šé€‰æ‹©ä¸€ä¸ªå¯åŠ¨è®¾å¤‡ï¼ˆä¾‹å¦‚è½¯ç›˜ã€ç¡¬ç›˜ã€å…‰ç›˜ç­‰ï¼‰ï¼Œå¹¶ä¸”è¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€æ‰‡åŒº(å³ä¸»å¼•å¯¼æ‰‡åŒºæˆ–å¯åŠ¨æ‰‡åŒº)åˆ°å†…å­˜ä¸€ä¸ªç‰¹å®šçš„åœ°å€0x7c00å¤„ï¼Œç„¶åŽCPUæŽ§åˆ¶æƒä¼šè½¬ç§»åˆ°é‚£ä¸ªåœ°å€ç»§ç»­æ‰§è¡Œã€‚è‡³æ­¤BIOSçš„åˆå§‹åŒ–å·¥ä½œåšå®Œäº†ï¼Œè¿›ä¸€æ­¥çš„å·¥ä½œäº¤ç»™äº†ucoreçš„bootloaderã€‚ bootloaderå¯åŠ¨è¿‡ç¨‹ BIOSå°†é€šè¿‡è¯»å–ç¡¬ç›˜ä¸»å¼•å¯¼æ‰‡åŒºåˆ°å†…å­˜ï¼Œå¹¶è½¬è·³åˆ°å¯¹åº”å†…å­˜ä¸­çš„ä½ç½®æ‰§è¡Œbootloaderã€‚bootloaderå®Œæˆçš„å·¥ä½œåŒ…æ‹¬ï¼š åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œå¯ç”¨åˆ†æ®µæœºåˆ¶ è¯»ç£ç›˜ä¸­ELFæ‰§è¡Œæ–‡ä»¶æ ¼å¼çš„ucoreæ“ä½œç³»ç»Ÿåˆ°å†…å­˜ æ˜¾ç¤ºå­—ç¬¦ä¸²ä¿¡æ¯ æŠŠæŽ§åˆ¶æƒäº¤ç»™ucoreæ“ä½œç³»ç»Ÿ å¯¹åº”å…¶å·¥ä½œçš„å®žçŽ°æ–‡ä»¶åœ¨lab1ä¸­çš„bootç›®å½•ä¸‹çš„ä¸‰ä¸ªæ–‡ä»¶asm.hã€bootasm.Så’Œbootmain.cã€‚ä¸‹é¢ä»ŽåŽŸç†ä¸Šä»‹ç»å®Œæˆä¸Šè¿°å·¥ä½œçš„è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶å’Œè½¯ä»¶èƒŒæ™¯çŸ¥è¯†ã€‚ æ“ä½œç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ å½“bootloaderé€šè¿‡è¯»å–ç¡¬ç›˜æ‰‡åŒºæŠŠucoreåœ¨ç³»ç»ŸåŠ è½½åˆ°å†…å­˜åŽï¼Œå°±è½¬è·³åˆ°ucoreæ“ä½œç³»ç»Ÿåœ¨å†…å­˜ä¸­çš„å…¥å£ä½ç½®ï¼ˆkern&#x2F;init.cä¸­çš„kern_initå‡½æ•°çš„èµ·å§‹åœ°å€ï¼‰ï¼Œè¿™æ ·ucoreå°±æŽ¥ç®¡äº†æ•´ä¸ªæŽ§åˆ¶æƒã€‚å½“å‰çš„ucoreåŠŸèƒ½å¾ˆç®€å•ï¼Œåªå®ŒæˆåŸºæœ¬çš„å†…å­˜ç®¡ç†å’Œå¤–è®¾ä¸­æ–­ç®¡ç†ã€‚ucoreä¸»è¦å®Œæˆçš„å·¥ä½œåŒ…æ‹¬ï¼š åˆå§‹åŒ–ç»ˆç«¯ï¼› æ˜¾ç¤ºå­—ç¬¦ä¸²ï¼› æ˜¾ç¤ºå †æ ˆä¸­çš„å¤šå±‚å‡½æ•°è°ƒç”¨å…³ç³»ï¼› åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ï¼Œå¯ç”¨åˆ†æ®µæœºåˆ¶ï¼› åˆå§‹åŒ–ä¸­æ–­æŽ§åˆ¶å™¨ï¼Œè®¾ç½®ä¸­æ–­æè¿°ç¬¦è¡¨ï¼Œåˆå§‹åŒ–æ—¶é’Ÿä¸­æ–­ï¼Œä½¿èƒ½æ•´ä¸ªç³»ç»Ÿçš„ä¸­æ–­æœºåˆ¶ï¼› æ‰§è¡Œwhileï¼ˆ1ï¼‰æ­»å¾ªçŽ¯ã€‚ ä»¥åŽçš„å®žéªŒä¸­ä¼šå¤§é‡æ¶‰åŠå„ä¸ªå‡½æ•°ç›´æŽ¥çš„è°ƒç”¨å…³ç³»ï¼Œä»¥åŠç”±äºŽä¸­æ–­å¤„ç†å¯¼è‡´çš„å¼‚æ­¥çŽ°è±¡ï¼Œå¯èƒ½å¯¹å¤§å®¶å®žçŽ°æ“ä½œç³»ç»Ÿå’Œæ”¹æ­£å…¶ä¸­çš„é”™è¯¯æœ‰å¾ˆå¤§å½±å“ã€‚è€Œç†è§£å¥½å‡½æ•°è°ƒç”¨å…³ç³»çš„å»ºç«‹æœºåˆ¶å’Œä¸­æ–­å¤„ç†æœºåˆ¶ï¼Œå¯¹åŽç»­å®žéªŒä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚ä¸‹é¢å°±ç»ƒä¹ 5æ¶‰åŠçš„å‡½æ•°æ ˆè°ƒç”¨å…³ç³»å’Œç»ƒä¹ 6ä¸­çš„ä¸­æ–­æœºåˆ¶çš„å»ºç«‹è¿›è¡Œé˜è¿°ã€‚ https://objectkuan.gitbooks.io/ucore-docs/content/lab1/lab1_3_booting.html ç³»ç»Ÿè°ƒç”¨POSIXPortable Operating System Interface of Unix(IEEEåˆ¶å®šçš„ä¸€ä¸ªæ ‡å‡†æ—) æ“ä½œç³»ç»Ÿç»™ä¸Šå±‚æä¾›çš„æŽ¥å£ï¼Œmacos,Linuxéƒ½éµå¾ªè¿™ä¸ªæŽ¥å£ã€‚ å†…æ ¸æ€ 0 ï¼Œ ç”¨æˆ·æ€ 3 GDTè¡¨å­˜äº†DPLä¸º0ï¼Œç”¨æˆ·è®¿é—®CPLä¸º3ï¼Œ 3 &gt; 0 æ²¡æ³•è®¿é—®ã€‚ 0x80åˆ°å†…æ ¸ä¸­ ä¸­æ–­ã€å¼‚å¸¸å’Œç³»ç»Ÿè°ƒç”¨ ä¸­æ–­ ç¡¬ä»¶è®¾å¯¹æ“ä½œç³»ç»Ÿå¤‡çš„å¤„ç†è¯·æ±‚ï¼ˆç¼“å­˜åŒºé‡Œæœ‰æ•°æ®ï¼Œéœ€è¦å†…æ ¸è¯»èµ°ã€‚æˆ–è€…ç¼“å†²åŒºé‡Œæ•°æ®ç”¨å®Œäº†ï¼Œéœ€è¦å†…æ ¸è¡¥å……æ–°çš„æ•°æ®ï¼‰ å¼‚å¸¸ éžæ³•æŒ‡ä»¤æˆ–è€…å…¶ä»–åŽŸå› å¯¼è‡´å½“å‰æŒ‡ä»¤æ‰§è¡Œå¤±è´¥ï¼ˆç¨‹åºå‡ºé”™åŽçš„å¤„ç†è¯·æ±‚ï¼‰ ç³»ç»Ÿè°ƒç”¨ åº”ç”¨ç¨‹åºä¸»åŠ¨å‘æ“ä½œç³»ç»Ÿå‘å‡ºçš„æœåŠ¡è¯·æ±‚ ç‰©ç†å†…å­˜ç®¡ç†ï¼š è¿žç»­å†…å­˜åˆ†é…æœ€å…ˆåŒ¹é…ï¼ˆFirst Fit Allocationï¼‰ï¼š ç©ºé—²åˆ†åŒºåˆ—è¡¨æŒ‰åœ°å€é¡ºåºæŽ’åº åˆ†é…è¿‡ç¨‹æ—¶ï¼Œæœç´¢ç¬¬ä¸€ä¸ªåˆé€‚çš„åˆ†åŒºï¼Œå¦‚æžœæœ‰å‰©ä¸‹çš„ç©ºé—²åˆ†åŒºï¼Œç»§ç»­æŠŠç©ºé—²åˆ†åŒºåˆ‡å‰²å‡ºæ¥ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿç¢Žç‰‡ã€‚ é‡Šæ”¾åˆ†åŒºæ—¶ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä¸Žä¸´è¿‘çš„ç©ºé—²åˆ†åŒºåˆå¹¶ æœ€ä½³åŒ¹é…ï¼ˆBest Fit Allocationï¼‰ ç©ºé—²åˆ†åŒºåˆ—è¡¨æŒ‰ç…§ å°åˆ°å¤§æŽ’åº åˆ†é…æ—¶ï¼ŒæŸ¥æ‰¾æ¯”éœ€è¦åˆ†åŒºå¤§çš„æœ€å°çš„åˆ†åŒºï¼Œå¯é¿å…å¤§çš„ç©ºé—²åˆ†åŒºè¢«æ‹†åˆ†ï¼Œå‡å°‘ç¢Žç‰‡å¤§å°ã€‚ é‡Šæ”¾æ—¶ï¼Œè¶…æ‰¾å¹¶ä¸”åˆå¹¶ä¸´è¿‘åœ°å€çš„ç©ºé—²åˆ†åŒºï¼ˆå¦‚æžœæ‰¾åˆ°ï¼‰ Screenshot from æœ€å·®åŒ¹é…(WORST Fit Allocation) ç©ºé—²åˆ†åŒºåˆ—è¡¨æŒ‰å¤§åˆ°å°æŽ’åº åˆ†é…æ—¶ï¼Œé€‰æœ€å¤§çš„åˆ†åŒºï¼ŒåŽç»­æ‰¾å¤§åˆ†åŒºæ¯”è¾ƒéš¾ã€‚ é‡Šæ”¾æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä¸Žä¸´è¿‘çš„ç©ºé—²åˆ†åŒºåˆå¹¶ï¼Œè¿›è¡Œå¯èƒ½çš„åˆå¹¶å¹¶è°ƒæ•´ç©ºé—²åˆ†åŒºåˆ—è¡¨é¡ºåºã€‚ ä¼™ä¼´ç³»ç»Ÿ éžè¿žç»­å†…å­˜åˆ†é… è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„è½¬æ¢ è½¯ä»¶å®žçŽ° ç¡¬ä»¶å®žçŽ° éžè¿žç»­åˆ†é…çš„ç¡¬ä»¶è¾…åŠ©è®°è€… æ®µå¼å­˜å‚¨ç®¡ç†ï¼ˆsegmentationï¼‰: åˆ†çš„æ¯”è¾ƒå¤§ é¡µå¼å­˜å‚¨ç®¡ç† ï¼ˆpagingï¼‰ æŠŠç‰©ç†åœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå¤§å°ç›¸åŒçš„åŸºæœ¬åˆ†é…å•ä½ï¼Œ2çš„næ¬¡æ–¹ï¼Œå¦‚512,4096 linuxå¯åŠ¨ http://c.biancheng.net/view/1013.html linuxç›®å½•ç»“æž„ ç›®å½• æè¿° &#x2F;bin å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶(ls,cat,mkdirç­‰)ï¼Œå¸¸ç”¨å‘½ä»¤ä¸€èˆ¬éƒ½åœ¨è¿™é‡Œ &#x2F;etc å­˜æ”¾ç³»ç»Ÿç®¡ç†å’Œé…ç½®æ–‡ä»¶ &#x2F;home å­˜æ”¾æ‰€æœ‰ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œæ˜¯ç”¨æˆ·ä¸»ç›®å½•çš„åŸºç‚¹ï¼Œæ¯”å¦‚ç”¨æˆ·userçš„ä¸»ç›®å½•å°±æ˜¯ &#x2F;home&#x2F;user &#x2F;usr ç”¨äºŽå­˜æ”¾ç³»ç»Ÿåº”ç”¨ç¨‹åºï¼Œæ¯”è¾ƒé‡è¦çš„ç›®å½•&#x2F;usr&#x2F;local æœ¬åœ°ç³»ç»Ÿç®¡ç†å‘˜è½¯ä»¶å®‰è£…ç›®å½• &#x2F;opt é¢å¤–å®‰è£…çš„å¯é€‰åº”ç”¨ç¨‹åºåŒ…æ‰€æ”¾ç½®çš„ä½ç½® &#x2F;proc è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼Œæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ã€‚å¯ç›´æŽ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥èŽ·å–ç³»ç»Ÿä¿¡æ¯ã€‚ &#x2F;root è¶…çº§ç”¨æˆ·(ç³»ç»Ÿç®¡ç†å‘˜)çš„ä¸»ç›®å½• &#x2F;sbin å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootæ‰èƒ½è®¿é—® &#x2F;dev ç”¨äºŽå­˜æ”¾è®¾å¤‡æ–‡ä»¶ &#x2F;mnt ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹ï¼Œç³»ç»Ÿæä¾›è¿™ä¸ªç›®å½•æ˜¯è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½å…¶ä»–çš„æ–‡ä»¶ç³» ç»Ÿã€‚ &#x2F;boot å­˜æ”¾ç”¨äºŽç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶ &#x2F;lib å­˜æ”¾è·Ÿæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„å…±äº«åº“åŠå†…æ ¸æ¨¡å— &#x2F;var ç”¨äºŽå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶ è¿›ç¨‹è¿›ç¨‹è°ƒåº¦ : FIFO , Priority è¿›ç¨‹åˆ‡æ¢è¿›ç¨‹å½“å‰çš„çŠ¶æ€å­˜æ”¾åˆ°PCB(Process Control Block)ä¸­ï¼ŒèŽ·å–ä¸‹ä¸€ä¸ªéœ€è¦æ‰§è¡Œè¿›ç¨‹çš„PCBä¿¡æ¯ï¼Œåˆ‡æ¢è¿›ç¨‹ã€‚ çº¿ç¨‹ çº¿ç¨‹ æŒ‡ä»¤çš„åˆ‡æ¢ï¼Œæ˜ å°„è¡¨ä¸ç”¨åˆ‡æ¢ 2ä¸ªçº¿ç¨‹ç”¨ä¸€ä¸ªæ ˆçš„æƒ…å†µ 12345678910//ç¬¬ä¸€ä¸ªYieldvoid Yield()&#123; æ‰¾åˆ°300ï¼› jmp 300;&#125;//ç¬¬äºŒä¸ªYieldvoid Yield()&#123; æ‰¾åˆ° ? ; 204 jmp ? ;&#125; æŒ‰ç…§ (1) -&gt; (2) -&gt; (3)çš„é¡ºåºæ‰§è¡Œï¼Œæ‰§è¡ŒçŽ©D()ä¸­çš„Yield()å›žåˆ°B()ä¸­ï¼Œåˆ°äº† å³æ‹¬å·ret å‡ºæ ˆï¼Œå‡ºåŽ»çš„æ˜¯404,æ­£ç¡®çš„æƒ…å†µæ—¶æ—¶å‡º204 ä¸¤ä¸ªçº¿ç¨‹ ä¸¤ä¸ªæ ˆ jmp 204åŽ»æŽ‰ï¼šå¦åˆ™ä¼šæ‰§è¡Œä¸¤æ¬¡ ç”¨æˆ·ç¨‹åº å†…æ ¸ç¨‹åºè°ƒç”¨ å¤šæ ¸å¤„ç† å¤šæ ¸æƒ…å†µå…±ç”¨ä¸€ä¸ªMMU,å‡å°‘åˆ‡æ¢èµ„æºè°ƒç”¨ã€‚ è¿›ç¨‹çº¿ç¨‹åŒºåˆ« è¿›ç¨‹ : æœ‰å¾ˆå¤§çš„ç‹¬ç«‹æ€§ çº¿ç¨‹ : æ‰€æœ‰çº¿ç¨‹éƒ½æœ‰å®Œå…¨ä¸€æ ·çš„åœ°å€ç©ºé—´,æ„å‘³ç€å®ƒä»¬ä¹Ÿå…±äº«åŒæ ·çš„å…¨å±€å˜é‡ã€‚ç”±äºŽçº¿ç¨‹å¯ä»¥è®¿é—®è¿›ç¨‹åœ°å€ç©ºé—´çš„æ¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¯»ã€å†™ç”šè‡³æ¸…é™¤å¦ä¸€ä¸ªçº¿ç¨‹çš„å †æ ˆã€‚ æ¯ä¸ªè¿›ç¨‹ä¸­çš„å†…å®¹ : åœ°å€ç©ºé—´ å…¨å±€å˜é‡ æ‰“å¼€æ–‡ä»¶ å­è¿›ç¨‹ å³å°†å‘ç”Ÿçš„å®šæ—¶å™¨ ä¿¡å·ä¸Žä¿¡å·å¤„ç†ç¨‹åº æ¯ä¸ªçº¿ç¨‹ä¸­çš„å†…å®¹ï¼šç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨ã€å †æ ˆã€çŠ¶æ€. åŒæ­¥åŽŸå­æ€§ åŽŸå­æ€§æ˜¯æŒ‡ä¸€ç³»åˆ—æ“ä½œä¸å¯è¢«ä¸­æ–­çš„ç‰¹æ€§,è¿™ä¸€ç³»åˆ—æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨æ²¡æœ‰æ‰§è¡Œ,ä¸å­˜åœ¨éƒ¨åˆ†æ‰§è¡Œéƒ¨åˆ†æœªæ‰§è¡Œçš„æƒ…å†µ äº’æ–¥é‡â€‹ äº’æ–¥é‡æ˜¯æœ€ç®€å•çš„çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•,å¤„äºŽä¸¤æ€ä¹‹ä¸€çš„å˜é‡:è§£é”å’ŒåŠ é”,ä¸¤ä¸ªçŠ¶æ€å¯ä»¥ä¿è¯èµ„æºè®¿é—®çš„ä¸²è¡Œ è‡ªæ—‹é”ä¸Žè‡ªé€‚åº”è‡ªæ—‹ è‡ªæ—‹é” â€‹ è‡ªæ—‹é”çš„çº¿ç¨‹ä¼šåå¤æ£€æŸ¥é”å˜é‡æ˜¯å¦å¯ç”¨,è‡ªæ—‹é”ä¸ä¼šè®©å‡ºCPUï¼Œæ˜¯ä¸€ç§å¿™ç­‰å¾…çŠ¶æ€, â€‹ è‡ªæ—‹é”é¿å…äº†è¿›ç¨‹æˆ–çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ â€‹ è‡ªæ—‹é”ä¸é€‚åˆåœ¨å•æ ¸CPUä½¿ç”¨ â€‹ è‡ªæ—‹é”çš„çº¿ç¨‹ä¼šåå¤æ£€æŸ¥é”å˜é‡æ˜¯å¦å¯ç”¨ è‡ªé€‚åº”è‡ªæ—‹ æåˆ°äº†äº’æ–¥åŒæ­¥å¯¹æ€§èƒ½æœ€å¤§çš„å½±å“æ˜¯é˜»å¡žçš„å®žçŽ°ï¼ŒæŒ‚èµ·çº¿ç¨‹å’Œæ¢ å¤çº¿ç¨‹çš„æ“ä½œéƒ½éœ€è¦è½¬å…¥å†…æ ¸æ€ä¸­å®Œæˆï¼Œè¿™äº›æ“ä½œç»™Javaè™šæ‹Ÿæœºçš„å¹¶å‘æ€§èƒ½å¸¦æ¥äº†å¾ˆå¤§çš„åŽ‹åŠ›ã€‚åŒ æ—¶ï¼Œè™šæ‹Ÿæœºçš„å¼€å‘å›¢é˜Ÿä¹Ÿæ³¨æ„åˆ°åœ¨è®¸å¤šåº”ç”¨ä¸Šï¼Œå…±äº«æ•°æ®çš„é”å®šçŠ¶æ€åªä¼šæŒç»­å¾ˆçŸ­çš„ä¸€æ®µæ—¶é—´ï¼Œä¸ºäº† è¿™æ®µæ—¶é—´åŽ»æŒ‚èµ·å’Œæ¢å¤çº¿ç¨‹å¹¶ä¸å€¼å¾—ã€‚çŽ°åœ¨ç»å¤§å¤šæ•°çš„ä¸ªäººç”µè„‘å’ŒæœåŠ¡å™¨éƒ½æ˜¯å¤šè·¯(æ ¸)å¤„ç†å™¨ç³» ç»Ÿï¼Œå¦‚æžœç‰©ç†æœºå™¨æœ‰ä¸€ä¸ªä»¥ä¸Šçš„å¤„ç†å™¨æˆ–è€…å¤„ç†å™¨æ ¸å¿ƒï¼Œèƒ½è®©ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„çº¿ç¨‹åŒæ—¶å¹¶è¡Œæ‰§è¡Œï¼Œæˆ‘ä»¬ å°±å¯ä»¥è®©åŽé¢è¯·æ±‚é”çš„é‚£ä¸ªçº¿ç¨‹â€œç¨ç­‰ä¸€ä¼šâ€ï¼Œä½†ä¸æ”¾å¼ƒå¤„ç†å™¨çš„æ‰§è¡Œæ—¶é—´ï¼Œçœ‹çœ‹æŒæœ‰é”çš„çº¿ç¨‹æ˜¯å¦å¾ˆ å¿«å°±ä¼šé‡Šæ”¾é”ã€‚ä¸ºäº†è®©çº¿ç¨‹ç­‰å¾…ï¼Œæˆ‘ä»¬åªé¡»è®©çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªå¿™å¾ªçŽ¯(è‡ªæ—‹)ï¼Œè¿™é¡¹æŠ€æœ¯å°±æ˜¯æ‰€è°“çš„è‡ª æ—‹é”ã€‚ è‡ªæ—‹é”åœ¨JDK 1.4.2ä¸­å°±å·²ç»å¼•å…¥ï¼Œåªä¸è¿‡é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¯ä»¥ä½¿ç”¨-XX:+UseSpinningå‚æ•°æ¥å¼€ å¯ï¼Œåœ¨JDK 6ä¸­å°±å·²ç»æ”¹ä¸ºé»˜è®¤å¼€å¯äº†ã€‚è‡ªæ—‹ç­‰å¾…ä¸èƒ½ä»£æ›¿é˜»å¡žï¼Œä¸”å…ˆä¸è¯´å¯¹å¤„ç†å™¨æ•°é‡çš„è¦æ±‚ï¼Œè‡ª æ—‹ç­‰å¾…æœ¬èº«è™½ç„¶é¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œä½†å®ƒæ˜¯è¦å ç”¨å¤„ç†å™¨æ—¶é—´çš„ï¼Œæ‰€ä»¥å¦‚æžœé”è¢«å ç”¨çš„æ—¶é—´å¾ˆ çŸ­ï¼Œè‡ªæ—‹ç­‰å¾…çš„æ•ˆæžœå°±ä¼šéžå¸¸å¥½ï¼Œåä¹‹å¦‚æžœé”è¢«å ç”¨çš„æ—¶é—´å¾ˆé•¿ï¼Œé‚£ä¹ˆè‡ªæ—‹çš„çº¿ç¨‹åªä¼šç™½ç™½æ¶ˆè€—å¤„ç† å™¨èµ„æºï¼Œè€Œä¸ä¼šåšä»»ä½•æœ‰ä»·å€¼çš„å·¥ä½œï¼Œè¿™å°±ä¼šå¸¦æ¥æ€§èƒ½çš„æµªè´¹ã€‚å› æ­¤è‡ªæ—‹ç­‰å¾…çš„æ—¶é—´å¿…é¡»æœ‰ä¸€å®šçš„é™ åº¦ï¼Œå¦‚æžœè‡ªæ—‹è¶…è¿‡äº†é™å®šçš„æ¬¡æ•°ä»ç„¶æ²¡æœ‰æˆåŠŸèŽ·å¾—é”ï¼Œå°±åº”å½“ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼åŽ»æŒ‚èµ·çº¿ç¨‹ã€‚è‡ªæ—‹æ¬¡æ•° çš„é»˜è®¤å€¼æ˜¯åæ¬¡ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•°-XX:PreBlockSp inæ¥è‡ªè¡Œæ›´æ”¹ã€‚ ä¸è¿‡æ— è®ºæ˜¯é»˜è®¤å€¼è¿˜æ˜¯ç”¨æˆ·æŒ‡å®šçš„è‡ªæ—‹æ¬¡æ•°ï¼Œå¯¹æ•´ä¸ªJavaè™šæ‹Ÿæœºä¸­æ‰€æœ‰çš„é”æ¥è¯´éƒ½æ˜¯ç›¸åŒçš„ã€‚åœ¨ JDK 6ä¸­å¯¹è‡ªæ—‹é”çš„ä¼˜åŒ–ï¼Œå¼•å…¥äº†è‡ªé€‚åº”çš„è‡ªæ—‹ã€‚è‡ªé€‚åº”æ„å‘³ç€è‡ªæ—‹çš„æ—¶é—´ä¸å†æ˜¯å›ºå®šçš„äº†ï¼Œè€Œæ˜¯ç”± å‰ä¸€æ¬¡åœ¨åŒä¸€ä¸ªé”ä¸Šçš„è‡ªæ—‹æ—¶é—´åŠé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€æ¥å†³å®šçš„ã€‚å¦‚æžœåœ¨åŒä¸€ä¸ªé”å¯¹è±¡ä¸Šï¼Œè‡ªæ—‹ç­‰å¾…åˆš åˆšæˆåŠŸèŽ·å¾—è¿‡é”ï¼Œå¹¶ä¸”æŒæœ‰é”çš„çº¿ç¨‹æ­£åœ¨è¿è¡Œä¸­ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±ä¼šè®¤ä¸ºè¿™æ¬¡è‡ªæ—‹ä¹Ÿå¾ˆæœ‰å¯èƒ½å†æ¬¡æˆ åŠŸï¼Œè¿›è€Œå…è®¸è‡ªæ—‹ç­‰å¾…æŒç»­ç›¸å¯¹æ›´é•¿çš„æ—¶é—´ï¼Œæ¯”å¦‚æŒç»­100æ¬¡å¿™å¾ªçŽ¯ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æžœå¯¹äºŽæŸä¸ªé”ï¼Œè‡ª æ—‹å¾ˆå°‘æˆåŠŸèŽ·å¾—è¿‡é”ï¼Œé‚£åœ¨ä»¥åŽè¦èŽ·å–è¿™ä¸ªé”æ—¶å°†æœ‰å¯èƒ½ç›´æŽ¥çœç•¥æŽ‰è‡ªæ—‹è¿‡ç¨‹ï¼Œä»¥é¿å…æµªè´¹å¤„ç†å™¨èµ„ æºã€‚æœ‰äº†è‡ªé€‚åº”è‡ªæ—‹ï¼Œéšç€ç¨‹åºè¿è¡Œæ—¶é—´çš„å¢žé•¿åŠæ€§èƒ½ç›‘æŽ§ä¿¡æ¯çš„ä¸æ–­å®Œå–„ï¼Œè™šæ‹Ÿæœºå¯¹ç¨‹åºé”çš„çŠ¶å†µ é¢„æµ‹å°±ä¼šè¶Šæ¥è¶Šç²¾å‡†ï¼Œè™šæ‹Ÿæœºå°±ä¼šå˜å¾—è¶Šæ¥è¶Šâ€œèªæ˜Žâ€äº†ã€‚ è¯»å†™é”â€‹ è¯»å†™é”æ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªæ—‹é”, â€‹ å…è®¸å¤šä¸ªè¯»è€…åŒæ—¶è®¿é—®èµ„æºä»¥æé«˜è¯»æ€§èƒ½ â€‹ å¯¹äºŽå†™æ“ä½œåˆ™æ˜¯äº’æ–¥çš„ æ¡ä»¶å˜é‡â€‹ æ¡ä»¶å˜é‡æ˜¯ä¸€ç§ç›¸å¯¹å¤æ‚çš„çº¿ç¨‹åŒæ­¥æ–¹æ³• â€‹ æ¡ä»¶å˜é‡å…è®¸çº¿ç¨‹ç¡çœ ï¼Œç›´åˆ°æ»¡è¶³æŸç§æ¡ä»¶ â€‹ å½“æ»¡è¶³æ¡ä»¶æ—¶ï¼Œå¯ä»¥å‘è¯¥çº¿ç¨‹ä¿¡å·ï¼Œé€šçŸ¥å”¤é†’ mooc-os-lab[çŽ°ä»£æ“ä½œç³»ç»Ÿ] ç¤ºä¾‹ p55 å…ˆå­¦ä¹ (çŽ°ä»£æ“ä½œç³»ç»Ÿ) é™ˆæ¸ å‘å‹‡ https://www.bilibili.com/video/BV1js411b7vg?from=search&amp;seid=2361361014547524697 é…å¥—ä¹¦ï¼š æ“ä½œç³»ç»Ÿæ¦‚å¿µ(ç¬¬ä¸ƒç‰ˆ) ï¼Œ æ“ä½œç³»ç»Ÿ-ç²¾é«“ä¸Žè®¾è®¡åŽŸç†ï¼ˆç¬¬ä¸ƒç‰ˆï¼‰william stallings å®žéªŒçŽ¯å¢ƒé…ç½®https://www.bilibili.com/video/BV1Zz4y1d7BK?from=search&amp;seid=14777231705696776183 http://os.cs.tsinghua.edu.cn/oscourse/OS2020spring ucoreå®žéªŒåŸºå‡†æºä»£ç  https://www.bilibili.com/s/video/BV1Zz4y1d7BK ubuntuçª—å£è°ƒæ•´ device -&gt; Insert Guest addtions CD Image https://blog.csdn.net/u012631731/article/details/79548621 ä¿®æ”¹Ubuntuç¡¬ç›˜å¤§å° https://my.oschina.net/u/4388335/blog/3321852 windows ubuntuæ–‡ä»¶å¤¹å…±äº« https://www.jianshu.com/p/4e73fd1c0c74?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation å¹¶å‘ : å¤šä¸ªäº‹ä»¶åœ¨åˆ†æ®µè¢«å•ä¸ªCPUåˆ†æ®µæ‰§è¡Œã€‚ å¹¶è¡Œï¼š å¤šä¸ªCPUåŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ã€‚ æ±‡ç¼–æ“ä½œç³»ç»Ÿhttps://fishc.com.cn/forum-39-1.html https://www.bilibili.com/video/av22872043/?p=2&amp;spm_id_from=pageDriver GCCå†…è”æ±‡ç¼–Cè¯­è¨€ä¸­åŠ å…¥ æ±‡ç¼–ä»£ç  2020 å—äº¬å¤§å­¦ â€œæ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸Žå®žçŽ°â€ (è’‹ç‚Žå²©) https://www.bilibili.com/video/BV1N741177F5?p=1&amp;vd_source=d4c5260002405798a57476b318eccac9 https://github.com/NJU-ProjectN/am-kernels GitHub - NJU-ProjectN&#x2F;abstract-machine: A minimal, modularized, and machine-independent hardware abstraction layer å®žéªŒä¸å¼€æº,å¯ä»¥äº†è§£ å®žéªŒæŒ‡å¯¼ä¹¦ Â· Issue #1 Â· mansicer&#x2F;NJU-OSlab-2019 Â· GitHub Introduction Â· GitBook","categories":[{"name":"OS","slug":"OS","permalink":"https://noteforme.github.io/categories/OS/"}],"tags":[]},{"title":"ComputerOrganization","slug":"ComputerOrganization","date":"2020-12-10T14:42:44.000Z","updated":"2021-08-19T11:11:43.751Z","comments":true,"path":"2020/12/10/ComputerOrganization/","link":"","permalink":"https://noteforme.github.io/2020/12/10/ComputerOrganization/","excerpt":"","text":"ç»„æˆåŽŸç† CPU è¿ç®—å™¨ æŽ§åˆ¶å™¨ é«˜é€Ÿç¼“å­˜ ä¸»å­˜å‚¨å™¨= å†…å­˜ æŽ§åˆ¶å™¨ ç¨‹åºè®¡æ•°å™¨: ç”¨äºŽæä¾›å…¶ä»–æŽ§åˆ¶å•å…ƒï¼Œå½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤åœ°å€ æ—¶åºå‘ç”Ÿå™¨: ç”¨äºŽå‘é€æ—¶åºè„‰å†²ï¼Œ ä¾æ®ä¸åŒçš„æ—¶åºè„‰å†²æœ‰èŠ‚å¥çš„è¿›è¡Œå·¥ä½œ å¯„å­˜å™¨ æŒ‡ä»¤å¯„å­˜å™¨ :ä»Žä¸»å­˜æˆ–é«˜é€Ÿç¼“å­˜å–è®¡ç®—æœºæŒ‡ä»¤ ä¸»å­˜åœ°å€å¯„å­˜å™¨ï¼šä¿å­˜å½“å‰CPUæ­£è¦è®¿é—®çš„å†…å­˜å•å…ƒçš„åœ°å€ ä¸»å­˜åœ°å€å¯„å­˜å™¨ï¼š ä¿å­˜å½“å‰CPUæ­£è¦è¯»æˆ–å†™çš„ä¸»å­˜æ•°æ® é€šç”¨å¯„å­˜å™¨: ç”¨äºŽæš‚å­˜æˆ–ä¼ é€æ•°æ®æˆ–æŒ‡ä»¤ å¯ä¿å­˜ALUçš„è¿ç®—ä¸­é—´ç»“æžœ å®¹é‡æ¯”ä¸€èˆ¬ä¸“ç”¨å¯„å­˜å™¨è¦å¤§ â€‹ è¿ç®—å™¨ æ•°æ®ç¼“å†²å™¨â€‹ åˆ†ä¸ºè¾“å…¥ç¼“å†²å’Œè¾“å‡ºç¼“å†² â€‹ è¾“å…¥ç¼“å†²æš‚æ—¶å­˜æ”¾å¤–è®¾é€è¿‡æ¥çš„æ•°æ® â€‹ è¾“å‡ºç¼“å†²æš‚æ—¶å­˜æ”¾é€å¾€å¤–è®¾çš„æ•°æ® ALUâ€‹ ALU:ç®—æœ¯é€»è¾‘å•å…ƒï¼Œæ˜¯è¿ç®—å™¨çš„ä¸»è¦ç»„æˆ â€‹ å¸¸è§çš„ä½è¿ç®—(å·¦å³ç§»ã€ä¸Žæˆ–éžç­‰) â€‹ ç®—æœ¯è¿ç®—(åŠ å‡ä¹˜é™¤ç­‰) é€šç”¨å¯„å­˜å™¨â€‹ ç”¨äºŽæš‚æ—¶å­˜æ”¾æˆ–ä¼ é€æ•°æ®æˆ–æŒ‡ä»¤ â€‹ å¯ä¿å­˜ALUçš„è¿ç®—ä¸­é—´ç»“æžœ â€‹ å®¹é‡æ¯”ä¸€èˆ¬ä¸“ç”¨å¯„å­˜å™¨è¦å¤§ çŠ¶æ€å­—å¯„å­˜å™¨â€‹ å­˜æ”¾è¿ç®—çŠ¶æ€(æ¡ä»¶ç ã€è¿›ä½ã€æº¢å‡ºã€ç»“æžœæ­£è´Ÿç­‰) â€‹ å­˜æ”¾è¿ç®—æŽ§åˆ¶ä¿¡æ¯(è°ƒè¯•è·Ÿè¸ªæ ‡è®°ä½ã€å…è®¸ä¸­æ–­ä½ç­‰) é«˜é€Ÿç¼“å­˜æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ é«˜é€Ÿç¼“å­˜å‘½ä¸­çŽ‡ ![](ComputerOrganization/Screen Shot 2021-03-03 at 10.10.02 PM.png) ä¸åœ¨ç¼“å­˜çš„æ•°æ®éœ€è¦åŽ»ä¸»å­˜æ‹¿ 4GBæ˜¯å¯»å€ç©ºé—´ä¸ºä»€ä¹ˆæ˜¯4G ,byteè€Œä¸æ˜¯ bitçŽ°åœ¨çš„å†…å­˜å¯ä»¥çœ‹ä½œä¸€ä¸ªå¾ˆé•¿çš„ï¼Œæ¯é¡¹å®½åº¦8ä½ï¼ˆå³1Bitï¼‰çš„å¾ˆé•¿çš„æ•°åˆ—,æ—¢ç„¶æ˜¯æ•°åˆ—ï¼Œé‚£ä¹ˆæ¯ä¸€é¡¹ä¾¿å¯¹åº”ä¸€ä¸ªåºå·ï¼Œè¿™ä¸ªåºå·ä¾¿æ˜¯åœ°å€ï¼Œå°±å¦‚åŒä½ å®¶åœ¨ä¸€æ¡å¤§è¡—çš„ç¬¬å‡ å·ä¸€æ · https://www.zhihu.com/question/61974351","categories":[{"name":"Organization","slug":"Organization","permalink":"https://noteforme.github.io/categories/Organization/"}],"tags":[]},{"title":"TouchEvent3","slug":"TouchEvent3","date":"2020-11-25T06:12:50.000Z","updated":"2022-05-06T11:24:51.266Z","comments":true,"path":"2020/11/25/TouchEvent3/","link":"","permalink":"https://noteforme.github.io/2020/11/25/TouchEvent3/","excerpt":"","text":"Button TextViewbutton clickable=true,æ‰€ä»¥ é»˜è®¤æ¶ˆè´¹äº‹ä»¶,TextViewä¸ä¼š value.xml 123456789&lt;style name=&quot;Base.Widget.AppCompat.Button&quot; parent=&quot;android:Widget&quot;&gt; &lt;item name=&quot;android:background&quot;&gt;@drawable/abc_btn_default_mtrl_shape&lt;/item&gt; &lt;item name=&quot;android:textAppearance&quot;&gt;?android:attr/textAppearanceButton&lt;/item&gt; &lt;item name=&quot;android:minHeight&quot;&gt;48dip&lt;/item&gt; &lt;item name=&quot;android:minWidth&quot;&gt;88dip&lt;/item&gt; &lt;item name=&quot;android:focusable&quot;&gt;true&lt;/item&gt; &lt;item name=&quot;android:clickable&quot;&gt;true&lt;/item&gt; &lt;item name=&quot;android:gravity&quot;&gt;center_vertical|center_horizontal&lt;/item&gt;&lt;/style&gt; å¤„ç†å¼€ç¯‡é—®é¢˜ å¤„ç†æ–¹æ³•å¤–éƒ¨æ‹¦æˆªæ³•:â€‹ éœ€è¦åœ¨çˆ¶ViewGroupï¼Œé‡å†™onInterceptTouchEvent( [ËŒÉªntÉ™rËˆsept])æ–¹æ³•ï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œåˆ¤æ–­å“ªäº›äº‹ä»¶æ˜¯çˆ¶Viewgroupéœ€è¦çš„ï¼Œéœ€è¦çš„è¯å°±å¯¹è¯¥äº‹ä»¶è¿›è¡Œæ‹¦æˆªï¼Œç„¶åŽäº¤ç”±onTouchEventæ–¹æ³•å¤„ç†ï¼Œè‹¥ä¸éœ€è¦ï¼Œåˆ™ä¸æ‹¦æˆªï¼Œç„¶åŽä¼ é€’ç»™å­viewæˆ–å­viewGroupã€‚ å†…éƒ¨æ‹¦æˆªæ³•ä¸»è¦ç”±å­viewæŽ§åˆ¶äº‹ä»¶ï¼Œé…åˆrequestDisallowInterceptTouchEvent(),çˆ¶Viewä¸æ‹¦æˆªä»»ä½•downäº‹ä»¶ ,æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œåœ¨ViewGroupAçš„Action_DownåŠ¨ä½œä¸­è®¾ç½®requestDisallowInterceptTouchEvent(true),è¿™æ ·RootViewä¸ä¼šèµ°æ‹¦æˆªæ–¹æ³•ï¼Œä¿è¯Action_Move,èƒ½è¿›å…¥ViewGroupA,ç„¶åŽåœ¨ViewGroupAçš„moveäº‹ä»¶ä¸­ï¼Œæ ¹æ®éœ€è¦æŽ§åˆ¶RootViewå‘é€è¿‡æ¥çš„åŽç»­Action_Moveäº‹ä»¶. ä»£ç  ViewGroupA 12345678910111213141516171819202122232425@Override public boolean dispatchTouchEvent(MotionEvent ev) &#123; Logger.d(ev.getAction(), TAG, Static.dispatchTouchEvent + &quot;è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?&quot;); int x &#x3D; (int) ev.getX(); int y &#x3D; (int) ev.getY(); switch (ev.getAction()) &#123; case MotionEvent.ACTION_DOWN: getParent().requestDisallowInterceptTouchEvent(true); break; case MotionEvent.ACTION_MOVE: int deltaX &#x3D; x - mLastX; int deltaY &#x3D; y - mLastY; if (Math.abs(deltaX) &gt; Math.abs(deltaY)) &#123; getParent().requestDisallowInterceptTouchEvent(false); &#125; else &#123; getParent().requestDisallowInterceptTouchEvent(true); &#125; break; &#125; mLastX &#x3D; x; mLastY &#x3D; y; return super.dispatchTouchEvent(ev); &#125; RootView 123456789@Overridepublic boolean onInterceptTouchEvent(MotionEvent ev) &#123; Logger.d(ev.getAction(), TAG, Static.onInterceptTouchEvent + &quot;(è€æ¿å¯èƒ½ç–¯äº†,ä½†åˆä¸æ˜¯æˆ‘åš.)&quot;); if (ev.getAction() &#x3D;&#x3D; MotionEvent.ACTION_DOWN) &#123; return false; &#125;else &#123; return true; &#125;&#125; å†…éƒ¨æ‹¦æˆªViewGroupAæ¶ˆè´¹äº‹ä»¶ è¿è¡Œç»“æžœ D/MainActivity [è€æ¿] ACTION_DOWN: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.D/RootView [ç»ç†] ACTION_DOWN: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.D/RootView [ç»ç†] ACTION_DOWN: onInterceptTouchEvent (è€æ¿å¯èƒ½ç–¯äº†,ä½†åˆä¸æ˜¯æˆ‘åš.)D/ViewGroupA [ç»„é•¿] ACTION_DOWN: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?D/ViewGroupA [ç»„é•¿] ACTION_DOWN: onInterceptTouchEvent (çœ‹ç€ä¸å¤ªé è°±,å…ˆé—®é—®å°çŽ‹æ€Žä¹ˆçœ‹)D/ViewGroupA [ç»„é•¿] ACTION_DOWN: onTouchEvent å°çŽ‹è¯´åšä¸äº† D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?D/ViewGroupA [ç»„é•¿] ACTION_MOVE: onTouchEvent å°çŽ‹è¯´åšä¸äº† D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?D/ViewGroupA [ç»„é•¿] ACTION_MOVE: onTouchEvent å°çŽ‹è¯´åšä¸äº† ä»£ç æµç¨‹ Action_downéƒ½ä¼šè¢«ViewGroupAæ¶ˆè´¹,æ‰€ä»¥ä¸»è¦åˆ†æžAction_Moveäº‹ä»¶æµç¨‹,ç”±äºŽAction_down requestDisallowInterceptTouchEvent(true)é‚£ä¹ˆ disallowIntercept =true, ç¬¬1æ¬¡ Action_Move åˆ†å‘ RootView : dispatchTouchEvent() 29 =&gt; 32=&gt;36 intercepted = false =&gt; 58 =&gt; ViewGroupA: dispatchTouchEvent() 29=&gt; è®¾ç½® getParent().requestDisallowInterceptTouchEvent(true) =&gt;view =&gt; dispatchTouchEventè¢«æ¶ˆè´¹ ç¬¬2æ¬¡Action_Move åˆ†å‘ RootView : dispatchTouchEvent() 29 =&gt; 32=&gt;36 intercepted = false =&gt; 58 =&gt; ViewGroupA: dispatchTouchEvent() 29=&gt; è®¾ç½®y&gt;x getParent().requestDisallowInterceptTouchEvent(true) =&gt;view =&gt; dispatchTouchEventè¢«æ¶ˆè´¹ è¿è¡Œç»“æžœ 225 24328-24328/ D/MainActivity [è€æ¿] ACTION_DOWN: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.226 24328-24328/ D/RootView [ç»ç†] ACTION_DOWN: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.226 24328-24328/ D/RootView [ç»ç†] ACTION_DOWN: onInterceptTouchEvent (è€æ¿å¯èƒ½ç–¯äº†,ä½†åˆä¸æ˜¯æˆ‘åš.)227 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_DOWN: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?227 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_DOWN: onInterceptTouchEvent (çœ‹ç€ä¸å¤ªé è°±,å…ˆé—®é—®å°çŽ‹æ€Žä¹ˆçœ‹)228 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_DOWN: onTouchEvent å°çŽ‹è¯´åšä¸äº† 237 24328-24328/ D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.237 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.237 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?237 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent dx:0 dy:0238 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent Math.abs(deltaX) &gt; Math.abs(deltaY) false238 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: onTouchEvent å°çŽ‹è¯´åšä¸äº† 287 24328-24328/ D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.287 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.287 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿?288 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent dx:2 dy:0288 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: dispatchTouchEvent Math.abs(deltaX) &gt; Math.abs(deltaY) true288 24328-24328/ D/ViewGroupA [ç»„é•¿] ACTION_MOVE: onTouchEvent å°çŽ‹è¯´åšä¸äº† 304 24328-24328/ D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.305 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.305 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: onInterceptTouchEvent (è€æ¿å¯èƒ½ç–¯äº†,ä½†åˆä¸æ˜¯æˆ‘åš.) 320 24328-24328/ D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.321 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.321 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: onTouchEvent æŠ¥å‘Šè€æ¿, æŠ€æœ¯éƒ¨è¯´åšä¸äº† 338 24328-24328/ D/MainActivity [è€æ¿] ACTION_MOVE: dispatchTouchEvent ç»ç†,æˆ‘å‡†å¤‡å‘å±•ä¸€ä¸‹ç”µå•†ä¸šåŠ¡,ä¸‹å‘¨ä¹‹å‰åšä¸€ä¸ªæ·˜å®å‡ºæ¥.338 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: dispatchTouchEvent å‘¼å«æŠ€æœ¯éƒ¨,è€æ¿è¦åšæ·˜å®,ä¸‹å‘¨ä¸Šçº¿.338 24328-24328/ D/RootView [ç»ç†] ACTION_MOVE: onTouchEvent æŠ¥å‘Šè€æ¿, æŠ€æœ¯éƒ¨è¯´åšä¸äº† ä»£ç æµç¨‹ ç™¾æ€ä¸å¾—å…¶å§ï¼Œ RootView dispatchTouchEvent åŽé¢çš„onInterceptTouchEvent() æ–¹æ³•æ—¥å¿—ä¸ºä»€ä¹ˆæ²¡æ‰“å°ï¼Œå…¶ä»–éƒ½èƒ½é€š 1MotionEvent.ACTION_DOWN requestDisallowInterceptTouchEvent(true),å¿…é¡»è®¾ç½®,å¦åˆ™åŽç»­çš„Action_Moveæ— æ³•è¿›å…¥ ViewGroupA https://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650237941&amp;idx=1&amp;sn=40bca69abe10015cc469132f8c76a910&amp;chksm=88639a9abf14138cae7409adec85c5496486a044d7f4ef102e513d9c052aaa30017fb37e3439&amp;scene=38#wechat_redirect","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[{"name":"TouchEvent","slug":"TouchEvent","permalink":"https://noteforme.github.io/tags/TouchEvent/"}]},{"title":"base64","slug":"base64","date":"2020-10-22T06:49:37.000Z","updated":"2021-08-19T11:11:44.298Z","comments":true,"path":"2020/10/22/base64/","link":"","permalink":"https://noteforme.github.io/2020/10/22/base64/","excerpt":"","text":"https://www.jianshu.com/p/313b73ee7d6f","categories":[{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"}],"tags":[]},{"title":"flutter_paint","slug":"flutter-paint","date":"2020-10-14T05:53:46.000Z","updated":"2021-08-19T11:11:44.298Z","comments":true,"path":"2020/10/14/flutter-paint/","link":"","permalink":"https://noteforme.github.io/2020/10/14/flutter-paint/","excerpt":"","text":"1Offset(size.width*0.5, size.height) //åæ ‡ https://codewithandrea.com/videos/2020-01-27-flutter-custom-painting-do-not-fear-canvas/ https://flutter.dev/docs/development/ui/widgets/painting","categories":[{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"}],"tags":[]},{"title":"flutter_layout","slug":"flutter-layout","date":"2020-09-24T07:43:26.000Z","updated":"2021-08-19T11:11:44.298Z","comments":true,"path":"2020/09/24/flutter-layout/","link":"","permalink":"https://noteforme.github.io/2020/09/24/flutter-layout/","excerpt":"","text":"https://jspang.com/detailed?id=43 https://book.flutterchina.club/chapter4/row_and_column.html ä¸»è½´å’Œçºµè½´å¯¹äºŽçº¿æ€§å¸ƒå±€ï¼Œæœ‰ä¸»è½´å’Œçºµè½´ä¹‹åˆ†ï¼Œå¦‚æžœå¸ƒå±€æ˜¯æ²¿æ°´å¹³æ–¹å‘(Row),é‚£ä¹ˆä¸»è½´å°±æ˜¯æŒ‡æ°´å¹³æ–¹å‘ï¼Œè€Œçºµè½´å³åž‚ç›´æ–¹å‘. å¦‚æžœå¸ƒå±€æ²¿åž‚ç›´æ–¹å‘(Colomn)ï¼Œé‚£ä¹ˆä¸»è½´å°±æ˜¯æŒ‡åž‚ç›´æ–¹å‘ï¼Œè€Œçºµè½´å°±æ˜¯æ°´å¹³æ–¹å‘ MainAxisAlignment è¡¨ç¤ºå­ç»„ä»¶åœ¨Rowæ‰€å ç”¨çš„æ°´å¹³ç©ºé—´å†…å¯¹é½æ–¹å¼ï¼Œå¦‚æžœmainAxisSizeå€¼ä¸ºMainAxisSize.minï¼Œåˆ™æ­¤å±žæ€§æ— æ„ä¹‰ crossAxisAlignment è¡¨ç¤ºå­ç»„ä»¶åœ¨çºµè½´æ–¹å‘çš„å¯¹é½æ–¹å¼ï¼ŒRowçš„é«˜åº¦ç­‰äºŽå­ç»„ä»¶ä¸­æœ€é«˜çš„å­å…ƒç´ é«˜åº¦ TextDirection : å­—ä½“æ–¹å‘ CrossAxisAlignment : è¡¨ç¤ºRowçºµè½´ï¼ˆåž‚ç›´ï¼‰çš„å¯¹é½æ–¹å‘ï¼Œé»˜è®¤æ˜¯VerticalDirection.downï¼Œè¡¨ç¤ºä»Žä¸Šåˆ°ä¸‹. Rowå’ŒColumnéƒ½åªä¼šåœ¨ä¸»è½´æ–¹å‘å ç”¨å°½å¯èƒ½å¤§çš„ç©ºé—´ï¼Œè€Œçºµè½´çš„é•¿åº¦åˆ™å–å†³äºŽä»–ä»¬æœ€å¤§å­å…ƒç´ çš„é•¿åº¦ ç‰¹æ®Šæƒ…å†µ : å¦‚æžœRowé‡Œé¢åµŒå¥—Rowï¼Œæˆ–è€…Columné‡Œé¢å†åµŒå¥—Columnï¼Œé‚£ä¹ˆåªæœ‰æœ€å¤–é¢çš„Rowæˆ–Columnä¼šå ç”¨å°½å¯èƒ½å¤§çš„ç©ºé—´ï¼Œé‡Œé¢Rowæˆ–Columnæ‰€å ç”¨çš„ç©ºé—´ä¸ºå®žé™…å¤§å°ï¼Œä¸‹é¢ä»¥Columnä¸ºä¾‹è¯´æ˜Ž","categories":[{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"}],"tags":[]},{"title":"flutterdev","slug":"flutterdev","date":"2020-08-26T03:56:46.000Z","updated":"2021-08-19T11:11:44.299Z","comments":true,"path":"2020/08/26/flutterdev/","link":"","permalink":"https://noteforme.github.io/2020/08/26/flutterdev/","excerpt":"","text":"â€‹ https://flutter.dev/docs/development/ui/layout Aligning widgetsMainAxisAlignmenthttps://blog.csdn.net/BINGXIHEART/article/details/95077098 å¯ä»¥æŽ¥ç€å®Œå–„ row 12345678Row( mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: [ Image.asset(&#x27;images/pic1.jpg&#x27;), Image.asset(&#x27;images/pic2.jpg&#x27;), Image.asset(&#x27;images/pic3.jpg&#x27;), ],); Column 12345678Widget buildRow() =&gt; Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Image.asset(&#x27;images/pic1.jpg&#x27;), Image.asset(&#x27;images/pic2.jpg&#x27;), Image.asset(&#x27;images/pic3.jpg&#x27;), ], ); constraintsConstrainedBox The ConstrainedBox imposes additional constraints from its constraints parameter onto its child . UnconstrainedBoxThe screen forces the UnconstrainedBox to be exactly the same size as the screen. However, the UnconstrainedBox lets its child Container be any size it wants https://resocoder.com/2019/08/15/flutter-custom-icons-automatic-manual-way-icon-font-or-svg/ https://www.fluttericon.com/ json and serializtion1234567891011dependencies: json_annotation: ^2.2.0dev_dependencies: flutter_test: sdk: flutter build_runner: ^1.0.0 json_serializable: ^2.0.0 json_model: flutter packages pub run json_model 123456789101112131415161718192021import &#x27;dart:convert&#x27;;import &#x27;dart:io&#x27;;import &#x27;package:flutteruse/models/user.dart&#x27;;void main() &#123; final jsonString = File(&#x27;jsons/user.json&#x27;).readAsStringSync(); print(jsonString); // var jsonString = &#x27;&#123;&quot;name&quot;: &quot;John Smith&quot;,&quot;email&quot;: &quot;john@example.com&quot;&#125;&#x27;; // Map&lt;String, dynamic&gt; user = jsonDecode(jsonString) as Map&lt;String, dynamic&gt;; // print(&#x27;Howdy, $&#123;user[&#x27;name&#x27;]&#125;!&#x27;); // print(&#x27;We sent the verification link to $&#123;user[&#x27;email&#x27;]&#125;.&#x27;); Map userMap = jsonDecode(jsonString); var user = User.fromJson(userMap); print(&#x27;Howdy, $&#123;user.name&#125;!&#x27;); print(&#x27;We sent the verification link to $&#123;user.email&#125;.&#x27;); print(user.toJson());&#125; é¡¹ç›®ä¸­é‡‡ç”¨ç¬¬ä¸‰ç§æ–¹æ³• ä½¿ç”¨json_modelè‡ªåŠ¨ç”Ÿæˆ 1.åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºjsonsæ–‡ä»¶å¤¹å¹¶å°†jsonæ•°æ®æ–°å»ºæˆä¸ºæ–‡ä»¶ï¼Œåœ¨libç›®å½•ä¸‹æ–°å»ºåŒ…åä¸ºmodels æ³¨æ„ï¼šè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„åå­—éƒ½å¿…é¡»ä¸ºjsonså’Œmodels 2ã€åŠ å…¥ä¾æ‡’ æ³¨æ„ï¼šè¿™é‡Œæ·»åŠ å®Œjson_serializableç›¸å…³ä¾èµ–ä¹‹åŽè¿˜æ·»åŠ äº†json_modelçš„ä¾èµ–ï¼Œè¿™å°±æ˜¯å¿«æ·ç”Ÿæˆçš„å…³é”®ï¼Œè¿˜æœ‰å¦‚æžœjsonä¸­å¼•ç”¨äº†å…¶ä»–modelå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ { â€œnameâ€:â€wenduxâ€, â€œfatherâ€:â€$userâ€,//å¯ä»¥é€šè¿‡â€$â€ç¬¦å·å¼•ç”¨å…¶å®ƒmodelç±» â€œfriendsâ€:â€$[]userâ€,//å¯ä»¥é€šè¿‡â€$[]â€æ¥å¼•ç”¨æ•°ç»„ â€œkeywordsâ€:â€$[]Stringâ€,//åŒä¸Š â€œageâ€:20 } 3.å®Œæˆä¸Šé¢çš„æ“ä½œä¹‹åŽ åœ¨å½“å‰é¡¹ç›®çš„æ ¹ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šflutter packages pub run json_model æŽ§åˆ¶å°æ‰“å°å¦‚ä¸‹æ—¥å¿—å°±æˆåŠŸäº† æ³¨æ„ï¼šå¦‚æžœjsonæ–‡ä»¶ä¸­åŠ äº†æ³¨é‡Šå¯èƒ½ä¼šæŠ¥é”™ï¼Œéœ€è¦åˆ é™¤æ³¨é‡Šï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ å…¶å®žï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼è‡ªåŠ¨ç”Ÿæˆï¼Œ ç”¨run([â€˜src=jsonsâ€™])çš„æ–¹æ³•ä¹Ÿå¯ä»¥ï¼Œrunæ–¹æ³•ä¸ºjson_modelæš´éœ²çš„æ–¹æ³• https://www.jianshu.com/p/f37d8546ab8f ä¿®æ”¹åŒ…ååŽ pubspec.yaml target file â€œlib/main_dev.dartâ€ not found 12345plugin: platforms: android: package: com.casanube.flutter_ble //è®°å¾—ä¿®æ”¹è¿™ä¸ªåŒ…å è¦ä¸ç„¶çˆ†å‡ºä¸Šé¢çš„é”™è¯¯ pluginClass: FlutterBlePlugin flutterè‡ªå®šä¹‰æŽ§ä»¶ https://mp.weixin.qq.com/s/aVvos5iWYVmiVZRv4hMQMQ https://juejin.im/post/6874061694491721736","categories":[{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"}],"tags":[]},{"title":"OS_PROCESS","slug":"OS-PROCESS","date":"2020-08-17T02:55:14.000Z","updated":"2025-10-01T04:37:34.575Z","comments":true,"path":"2020/08/17/OS-PROCESS/","link":"","permalink":"https://noteforme.github.io/2020/08/17/OS-PROCESS/","excerpt":"","text":"è¿›ç¨‹è¿›ç¨‹æœ‰å¾ˆå¤§çš„ç‹¬ç«‹æ€§ ä¸ºäº†å®žçŽ°è¿›ç¨‹æ¨¡åž‹ï¼Œæ“ä½œç³»ç»Ÿç»´æŠ¤ç€ä¸€å¼ è¡¨æ ¼ï¼Œè¿›ç¨‹è¡¨ã€‚æ¯ä¸ªè¿›ç¨‹å ç”¨ä¸€ä¸ªè¿›ç¨‹è¡¨é¡¹ã€‚ è¿›ç¨‹é€šä¿¡è¿›ç¨‹é€šä¿¡æ–¹å¼æ–‡ä»¶ AIDL ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ AIDL çš„ä½¿ç”¨ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ AIDL è§£æž Binder Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Binder æœºåˆ¶æµ…æž Messenger ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Messenger ä½¿ç”¨ä¸Žè§£æž ContentProvider ï¼ˆåŸºäºŽ Binderï¼‰ Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ ContentProvider å†…å®¹æä¾›è€… Socket Android è¿›é˜¶ï¼šè¿›ç¨‹é€šä¿¡ä¹‹ Socket ï¼ˆé¡ºä¾¿å›žé¡¾ TCP UDPï¼‰ åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/u011240877/article/details/72863432 ç®¡é“é€šä¿¡ æ— åç®¡é“ï¼Œ æœ‰åç®¡é“:æ–‡ä»¶ç³»ç»Ÿä¸­æœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶å ä¿¡å·é€šä¿¡ï¼š è¿›ç¨‹é€šä¿¡çš„æ€æƒ³ å…±äº«å†…å­˜ å…±äº«å­˜å‚¨å…è®¸ä¸ç›¸å…³çš„è¿›ç¨‹è®¿é—®åŒä¸€ç‰‡ç‰©ç†å†…å­˜ å…±äº«å†…å­˜æ˜¯ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«å’Œä¼ é€’æ•°æ®æœ€å¿«çš„æ–¹å¼ å…±äº«å†…å­˜æœªæä¾›åŒæ­¥æœºåˆ¶ï¼Œéœ€è¦å€ŸåŠ©å…¶ä»–æœºåˆ¶ç®¡ç†è®¿é—® å…±äº«å­˜å‚¨æ˜¯ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«å’Œä¼ é€’æ•°æ®æœ€å¿«çš„ä¸€ç§æ–¹å¼ å…±äº«å†…å­˜æœªæä¾›åŒæ­¥æœºåˆ¶ï¼Œéœ€è¦å€ŸåŠ©å…¶ä»–æœºåˆ¶ç®¡ç†è®¿é—® UnixåŸŸå¥—æŽ¥å­— åŸŸå¥—æŽ¥å­—æ˜¯ä¸€ç§é«˜çº§çš„è¿›ç¨‹é—´é€šä¿¡çš„æ–¹æ³• UnixåŸŸå¥—æŽ¥å­—å¯ä»¥ç”¨äºŽåŒä¸€æœºå™¨è¿›ç¨‹é—´é€šä¿¡ https://www.bilibili.com/video/BV1tJ41117ty?from=search&amp;seid=13006387505737298314 page tablehttps://www.bilibili.com/video/BV1jE411W7e8?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=5 3.19.å†…å­˜ç®¡ç†_éžè¿žç»­åˆ†é…ï¼šåŸºæœ¬åˆ†æ®µå­˜å‚¨ç®¡ç†_å“”å“©å“”å“©_bilibili Segmentationæ“ä½œç³»ç»ŸåŸºæœ¬åˆ†æ®µå­˜å‚¨æ¼”ç»ƒç¬¬ä¸€æ¬¡è¯•è®²_å“”å“©å“”å“©_bilibili multiple page tablehttps://www.bilibili.com/video/BV1uY411k73T/?spm_id_from=333.337.search-card.all.click&amp;vd_source=d4c5260002405798a57476b318eccac9","categories":[{"name":"OS","slug":"OS","permalink":"https://noteforme.github.io/categories/OS/"}],"tags":[]},{"title":"AutoDispose","slug":"AutoDispose","date":"2020-08-14T02:18:28.000Z","updated":"2021-08-19T11:11:43.695Z","comments":true,"path":"2020/08/14/AutoDispose/","link":"","permalink":"https://noteforme.github.io/2020/08/14/AutoDispose/","excerpt":"","text":"https://uber.github.io/AutoDispose/","categories":[],"tags":[{"name":"RxJava","slug":"RxJava","permalink":"https://noteforme.github.io/tags/RxJava/"}]},{"title":"ViewGroup","slug":"ViewGroup","date":"2020-08-12T23:36:27.000Z","updated":"2021-12-05T11:51:53.119Z","comments":true,"path":"2020/08/13/ViewGroup/","link":"","permalink":"https://noteforme.github.io/2020/08/13/ViewGroup/","excerpt":"","text":"ç”Ÿå‘½å‘¨æœŸ æ¯æ¬¡onMeasureï¼ŒonLayoutç”¨åˆ°çš„å€¼éƒ½ä¸èƒ½åœ¨æž„é€ æ–¹æ³•é‡Œé¢åˆå§‹åŒ–ã€‚ åº§æ ‡ç³» getLeft()ç›´æŽ¥è°ƒç”¨æ˜¯0 ? éœ€è¦è‡ªå·±è®¾ç½® chidView.layout(left, top,right,bottom), æ²¡è°ƒç”¨chidView.layout å°±èŽ·å–ä¸åˆ° getLeft()çš„å€¼ã€‚ leftè¿™äº›å‚æ•°çš„åº§æ ‡ç³» æ˜¯åŸºäºŽViewGroup. getMeasuredWidth getWidthgetMeasuredWidth åœ¨measure()è¿‡ç¨‹ç»“æŸåŽå°±å¯ä»¥èŽ·å–åˆ°å¯¹åº”çš„å€¼ã€‚ é€šè¿‡setMeasuredDimension()æ–¹æ³•æ¥è¿›è¡Œè®¾ç½®ã€‚ getWidth åœ¨view.layout()è¿‡ç¨‹ç»“æŸåŽæ‰èƒ½èŽ·å–åˆ°ï¼› é€šè¿‡è§†å›¾å³è¾¹çš„åæ ‡-å·¦è¾¹çš„å·¦è¾¹è®¡ç®—å‡ºæ¥çš„ 123456789101112131415final int childHeightMeasureSpec;if (lp.height == LayoutParams.MATCH_PARENT) &#123; final int height = Math.max(0, getMeasuredHeight() - getPaddingTopWithForeground() - getPaddingBottomWithForeground() - lp.topMargin - lp.bottomMargin); childHeightMeasureSpec = MeasureSpec.makeMeasureSpec( height, MeasureSpec.EXACTLY);&#125; else &#123; childHeightMeasureSpec = getChildMeasureSpec(heightMeasureSpec, getPaddingTopWithForeground() + getPaddingBottomWithForeground() + lp.topMargin + lp.bottomMargin, lp.height);&#125;child.measure(childWidthMeasureSpec, childHeightMeasureSpec); Frame layout å­èŠ‚ç‚¹é‡æ–°ç»˜åˆ¶ï¼Œä¸ºä»€ä¹ˆ Framelayoutè¾¹ç•Œæ€Žä¹ˆç®—çš„ 1234567891011121314switch (absoluteGravity &amp; Gravity.HORIZONTAL_GRAVITY_MASK) &#123; case Gravity.CENTER_HORIZONTAL: childLeft = parentLeft + (parentRight - parentLeft - width) / 2 + lp.leftMargin - lp.rightMargin; break; case Gravity.RIGHT: if (!forceLeftGravity) &#123; childLeft = parentRight - width - lp.rightMargin; break; &#125; case Gravity.LEFT: default: childLeft = parentLeft + lp.leftMargin;&#125; LayoutParams MeasureSpecçš„å…³ç³» ViewGroupæµ‹é‡ å…ˆåº¦é‡child View,å†åº¦é‡è‡ªå·±çš„å¤§å°ã€‚ å…ˆåº¦é‡ child View,child viewåº¦é‡å®Œæˆï¼Œå¦‚æžœæ˜¯ wrap_contentï¼Œå°±æ˜¯all childviewçš„size. â€‹ // parent size child want size â€‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public static int getChildMeasureSpec(int spec, int padding, int childDimension) &#123;// paddingæ˜¯parent viewçš„ int specMode = MeasureSpec.getMode(spec); int specSize = MeasureSpec.getSize(spec); int size = Math.max(0, specSize - padding);// parent size int resultSize = 0; int resultMode = 0; switch (specMode) &#123; // Parent has imposed an exact size on us case MeasureSpec.EXACTLY: if (childDimension &gt;= 0) &#123; resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size. So be it. resultSize = size; resultMode = MeasureSpec.EXACTLY; &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size. It can&#x27;t be // bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; &#125; break; // Parent has imposed a maximum size on us case MeasureSpec.AT_MOST: if (childDimension &gt;= 0) &#123; // Child wants a specific size... so be it resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size, but our size is not fixed. // Constrain child to not be bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size. It can&#x27;t be // bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; &#125; break; // Parent asked to see how big we want to be case MeasureSpec.UNSPECIFIED: if (childDimension &gt;= 0) &#123; // Child wants a specific size... let him have it resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size... find out how big it should // be resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size; resultMode = MeasureSpec.UNSPECIFIED; &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size.... find out how // big it should be resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size; resultMode = MeasureSpec.UNSPECIFIED; &#125; break; &#125; //noinspection ResourceType return MeasureSpec.makeMeasureSpec(resultSize, resultMode);&#125; MeasureSpecåˆ›å»ºè§„åˆ™ å­Viewä¸ºç²¾ç¡®å®½é«˜ï¼Œæ— è®ºçˆ¶å®¹å™¨çš„MeasureSpecï¼Œå­Viewçš„MeasureSpecéƒ½ä¸ºç²¾ç¡®å€¼ä¸”éµå¾ªLayoutParamsä¸­çš„å€¼ã€‚ å­Viewä¸ºmatch_parentæ—¶ï¼Œå¦‚æžœçˆ¶å®¹å™¨æ˜¯ç²¾ç¡®æ¨¡å¼ï¼Œåˆ™å­Viewä¹Ÿä¸ºç²¾ç¡®æ¨¡å¼ä¸”ä¸ºçˆ¶å®¹å™¨çš„å‰©ä½™ç©ºé—´å¤§å°ï¼›å¦‚æžœçˆ¶å®¹å™¨æ˜¯æœ€å¤§æ¨¡å¼ï¼Œåˆ™å­Viewä¹Ÿæ˜¯æœ€å¤§æ¨¡å¼ä¸”ä¸ä¼šè¶…è¿‡çˆ¶å®¹å™¨çš„å‰©ä½™ç©ºé—´ã€‚ å­Viewä¸ºwrap_contentæ—¶ï¼Œæ— è®ºçˆ¶Viewæ˜¯ç²¾ç¡®è¿˜æ˜¯æœ€å¤§æ¨¡å¼ï¼Œå­Viewçš„æ¨¡å¼æ€»æ˜¯æœ€å¤§æ¨¡å¼ï¼Œä¸”ä¸ä¼šè¶…è¿‡çˆ¶å®¹å™¨çš„å‰©ä½™ç©ºé—´ã€‚ è‰ºæœ¯æŽ¢ç´¢ https://www.jianshu.com/p/cb529ed03597 https://juejin.cn/post/6844904094205739016 MeasureSpecè¡¨ç¤º MeasureSpecç”¨intè¡¨ç¤º,æ€»å…±32ä½ï¼Œé«˜2ä½ä»£è¡¨SpecModeï¼Œä½Ž30ä½ä»£è¡¨SpecSize,SpecModeæ˜¯æŒ‡æµ‹é‡æ¨¡å¼ï¼Œè€ŒSpecSizeæ˜¯æŒ‡åœ¨æŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å°ã€‚MeasureSpecé€šè¿‡å°†SpecModeå’ŒSpecSizeæ‰“åŒ…æˆä¸€ä¸ªintå€¼æ¥é¿å…è¿‡å¤šçš„å¯¹è±¡å†…å­˜åˆ†é….æ‰“åŒ…makeMeasureSpecã€‚ é«˜2ä½ 00 , 01, 10, åˆ†åˆ«å¯¹åº”UNSPECIFIED, EXACTLY,AT_MOSTã€‚ UNSPECIFIED çˆ¶å®¹å™¨ä¸å¯¹Viewæœ‰ä»»ä½•é™åˆ¶ï¼Œè¦å¤šå¤§ç»™å¤šå¤§ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ç”¨äºŽç³»ç»Ÿå†…éƒ¨ï¼Œè¡¨ç¤ºä¸€ç§æµ‹é‡çš„çŠ¶æ€. å¼€å‘è€…ç”¨ä¸äº†. EXACTLY çˆ¶å®¹å™¨å·²ç»æ£€æµ‹å‡ºViewæ‰€éœ€è¦çš„ç²¾ç¡®å¤§å°ï¼Œè¿™ä¸ªæ—¶å€™Viewçš„æœ€ç»ˆå¤§å°å°±æ˜¯SpecSizeæ‰€æŒ‡å®šçš„å€¼ã€‚å®ƒå¯¹åº”äºŽLayoutParamsä¸­çš„match_parentå’Œå…·ä½“çš„æ•°å€¼è¿™ä¸¤ç§æ¨¡å¼ã€‚ AT_MOST çˆ¶å®¹å™¨æŒ‡å®šäº†ä¸€ä¸ªå¯ç”¨å¤§å°å³SpecSize,Viewçš„å¤§å°ä¸èƒ½å¤§äºŽè¿™ä¸ªå€¼ â€‹ Inflateè§£æžè¿‡ç¨‹ https://www.bilibili.com/video/BV1Ka4y1j7HA?p=4&amp;spm_id_from=pageDriver https://www.youtube.com/watch?v=aOb4Hvqbeu4 https://www.bilibili.com/video/BV1M54y1y79P?from=search&amp;seid=18028227823566625572&amp;spm_id_from=333.337.0.0 è‡ªå®šä¹‰View Marginhttps://blog.csdn.net/qiantanlong/article/details/82347850","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"WMS","slug":"WMS","date":"2020-08-09T15:05:02.000Z","updated":"2021-08-19T11:11:44.282Z","comments":true,"path":"2020/08/09/WMS/","link":"","permalink":"https://noteforme.github.io/2020/08/09/WMS/","excerpt":"","text":"AMSå¯åŠ¨activity Activityå¯åŠ¨æµç¨‹ windowä½œç”¨å•ä¸€èŒè´£:è§£è—•activity view Viewæ˜¯ç”Ÿå‘½å‘¨æœŸå“ªä¸ªæ–¹æ³•ç»˜åˆ¶ windowè´Ÿè´£ç®¡ç†UI,å› ä¸ºwindowæ˜¯åœ¨ onCreate()ä¹‹åŽäº§ç”Ÿçš„ï¼Œæ‰€ä»¥viewç»˜åˆ¶ä¸€å®šåœ¨onCreate()ä¹‹åŽã€‚ onResume() decorviewå’ŒActivityè¿›è¡Œç»‘å®šï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ onCreate()èƒ½åœ¨å­çº¿ç¨‹åˆ·æ–°UIçš„åŽŸå›  , æŽ¥ç€åœ¨ onResume()è°ƒç”¨ performMeasure() performLayout(), performDraw() 1234textView = findViewById(R.id.tv_thread);new Handler().post(() -&gt; &#123; Log.i(&quot;GlideActivity&quot;, &quot;onResume: &quot; + textView.getWidth());&#125;); è¿è¡Œç»“æžœ I/GlideActivity: onResume: 0 OnResume()ä¹Ÿæ˜¯ä¸€ä¸ªæ¶ˆæ¯ï¼Œè™½ç„¶postæ¶ˆæ¯æ”¾åœ¨åŽé¢ï¼Œä½†æ˜¯æ˜¯å› ä¸ºå»ºç«‹äº†æ¶ˆæ¯å±éšœã€‚æ‰€ä»¥è¿˜æ˜¯å…ˆæ‰§è¡Œï¼Œç„¶åŽèŽ·å–å®½åº¦ä¸º0; https://www.bilibili.com/video/BV1FK4y1R7Nw?from=search&amp;seid=12068296586023469576","categories":[],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"PMS","slug":"PMS","date":"2020-08-07T14:05:02.000Z","updated":"2021-08-19T11:11:44.196Z","comments":true,"path":"2020/08/07/PMS/","link":"","permalink":"https://noteforme.github.io/2020/08/07/PMS/","excerpt":"","text":"PMS PMSæœåŠ¡æ˜¯å¹²ä»€ä¹ˆçš„ ç®¡ç† åŠ è½½ ç¼“å­˜APKæ–‡ä»¶ï¼ŒæŠŠAPKæ–‡ä»¶åŠ è½½æˆpackageå¯¹è±¡ï¼Œç¼“å­˜åˆ°mPackagesä¸­ å½“AMSéœ€è¦åŠ è½½Activityæ—¶ï¼ŒPMSæä¾›å¯¹åº”çš„ä¿¡æ¯(javabean) PMSæ˜¯è°å¯åŠ¨çš„SystemServer PMSæ‰«ææ˜¯ä¸ºäº†ä»€ä¹ˆä»¥ç©ºé—´æ¢æ—¶é—´ PMSå¯åŠ¨åº”ç”¨ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ é€šè¿‡åŒ…åï¼Œæ‰¾åˆ°å¯¹åº”çš„apkæ–‡ä»¶ è§£åŽ‹apkæ–‡ä»¶ ç»è¿‡domè§£æžï¼Œæ‰¾åˆ°Launcherå¯¹åº”çš„activity å†åå°„åŠ è½½ appå¯åŠ¨æˆåŠŸã€‚","categories":[],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"AMS","slug":"AMS","date":"2020-08-07T14:04:13.000Z","updated":"2021-08-19T11:11:43.480Z","comments":true,"path":"2020/08/07/AMS/","link":"","permalink":"https://noteforme.github.io/2020/08/07/AMS/","excerpt":"","text":"ç³»ç»Ÿå¯åŠ¨![](AMS/2021-07-31 at 7.53_start1.png) â€‹ AMSAMSå±žäºŽSystemServerè¿›ç¨‹,ä¸»è¦æ˜¯ä¸ºäº†åŠ è½½Activity ç®¡ç†Activityç”Ÿå‘½å‘¨æœŸ . Launcherè¯·æ±‚AMSåˆ›å»ºæ ¹Activityæ‰€åœ¨è¿›ç¨‹ï¼ˆå¦‚æžœä¹‹å‰æ²¡æœ‰è¯¥è¿›ç¨‹ï¼‰ï¼ŒAMSè¯·æ±‚Zygoteè¿›ç¨‹forkåº”ç”¨è¿›ç¨‹ã€‚ androidå¯åŠ¨æµç¨‹ https://www.bilibili.com/video/BV1DQ4y197oX?from=search&amp;seid=14802265503756746151 https://www.bilibili.com/video/BV1Pi4y1A7Sr?from=search&amp;seid=17031756056912732811 ä¸€èˆ¬ https://www.bilibili.com/video/BV1K541177GU?p=3 åº”ç”¨å¯åŠ¨æµç¨‹Launcherè¯·æ±‚AMSé˜¶æ®µ","categories":[],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"RxJava","slug":"RxJava","date":"2020-08-04T03:16:40.000Z","updated":"2022-07-16T15:07:08.241Z","comments":true,"path":"2020/08/04/RxJava/","link":"","permalink":"https://noteforme.github.io/2020/08/04/RxJava/","excerpt":"","text":"è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨ æœ€ä¸»è¦çš„æ˜¯Observableé‡Œé¢æŒæœ‰observerå¼•ç”¨ï¼Œå°±å¯ä»¥ç»™observerå‘æ¶ˆæ¯ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ‹“å±•ã€‚ Rxjava2ä¼šæœ‰Flowerç­‰èƒŒåŽ‹ç±»ç»§æ‰¿ObservableSourceï¼Œæ‰€ä»¥ Observable ä»ŽObservableSourceåˆ†ç¦»å‡ºæ¥ï¼Œè®©ObservableCreateå®žçŽ°subscribeAcutal(Observer) æœ¬æ¥å¯ä»¥åœ¨ObservableCreateä¸­ç›´æŽ¥å‘æ¶ˆæ¯ï¼Œå› ä¸ºemmitä¹Ÿå¯èƒ½å˜ï¼ŒçŽ°åœ¨æŠŠè°ƒç”¨æµç¨‹æ”¾åˆ°äº†ObservableOnSubscribe,å¹¶ä¸”ä¼ äº†emmit,æœ€ç»ˆObservableOnSubscribeæ‰“åŒ…ç»™äº†äº†ObservableCreate è§‚å¯Ÿè€…æ¨¡å¼åº”ç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243/** * å…·ä½“çš„è¢«è§‚å¯Ÿè€… */public class ObservableCreate&lt;T&gt; extends Observable&lt;T&gt; &#123; ObservableOnSubscribe&lt;T&gt; source; public ObservableCreate(ObservableOnSubscribe&lt;T&gt; source) &#123; this.source = source; &#125; @Override protected void subscribeActual(Observer observer) &#123; observer.onSubscribe(); //è®¢é˜…æˆåŠŸï¼Œå›žè°ƒç»™è§‚å¯Ÿè€… //åˆ›å»ºå‘å°„å™¨ CreateEmitter createEmitter = new CreateEmitter(observer); //å‘å°„å™¨å’Œè§‚å¯Ÿè€…å»ºç«‹å…³è” source.subscribe(createEmitter); //å‘å°„å™¨ä¸Žè¢«è§‚å¯Ÿè€…å»ºç«‹å…³è” &#125; static final class CreateEmitter&lt;T&gt; implements Emitter&lt;T&gt; &#123; final Observer&lt;T&gt; observer; public CreateEmitter(Observer&lt;T&gt; observer) &#123; this.observer = observer; &#125; @Override public void onNext(T t) &#123; observer.onNext(t); &#125; @Override public void onError(Throwable e) &#123; observer.onError(e); &#125; @Override public void onComplete() &#123; observer.onComplete(); &#125; &#125;&#125; è£…é¥°å™¨æ¨¡å¼è£…é¥°å™¨æ¨¡å¼ä½¿ç”¨RxJavaè§‚å¯Ÿè€…æ¨¡å¼æœ€ä¸»è¦æ˜¯è¿™ä¸ªæ–¹æ³• subscribeActual(Observer observer) ï¼Œé€šè¿‡å‘å°„å™¨ä¸Ž è§‚å¯Ÿè€…ã€è¢«è§‚å¯Ÿè€…å»ºç«‹å…³è”ï¼ŒæŽ¥ç€é€šè¿‡å‘å°„å™¨å‘é€äº‹ä»¶ç»™è§‚å¯Ÿè€…ã€‚ !(RxJava/2021-07-12-RXJAVA.png) çº¢è‰²æ–¹æ¡†ä¸­ç”¨åˆ°äº† è£…é¥°å™¨æ¨¡å¼ã€‚ åº”ç”¨å®žä¾‹WriteRxJavaActivity.java 1234567891011121314151617181920212223242526272829Observable.create(new ObservableOnSubscribe&lt;Object&gt;() &#123; @Override public void subscribe(Emitter&lt;Object&gt; emitter) &#123; Log.i(TAG, &quot;subscribe: &quot;); emitter.onNext(&quot;aaaa&quot;); emitter.onNext(&quot;bbb&quot;); emitter.onNext(&quot;12312&quot;); emitter.onComplete(); &#125;&#125;) .map(new Function&lt;Object, Object&gt;() &#123; @Override public Object apply(Object o) &#123; return (&quot;apply åŽ 1 &quot; + o); &#125; &#125;) .map(new Function&lt;Object, Object&gt;() &#123; @Override public Object apply(Object o) &#123; return (&quot;apply åŽ 2 &quot; + o); &#125; &#125;) .subscribe(new Observer() &#123; @Override public void onNext(Object o) &#123; Log.i(TAG, &quot;onNext: &quot; + o); &#125; &#125;); è°ƒç”¨ç»“æž„å›¾ä¸Šé¢ä»£ç çš„è°ƒç”¨ç»“æž„å¯ä»¥ç”¨ä¸‹å›¾è¡¨ç¤º ä¸Šé¢ä¸‰æ¡æµï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€æ¡æµçš„ç»“æŸä¼šå¯åŠ¨å¦ä¸€æ¡æµçš„å¼€ç«¯ã€‚ N0æŒæœ‰sourceå¼•ç”¨ï¼Œè‡ªå·±åˆåˆ›å»ºObservable,è®¢é˜…äº†O4ã€‚ é“¾å¼æž„å»ºæµ è®¢é˜…æµ è§‚å¯Ÿè€…å›žè°ƒæµï¼ˆäº‹ä»¶å›žè°ƒæµï¼‰ ObservableMapå…¶ä¸­å…³é”®ä»£ç åœ¨ObservableMap.java ,subscribeActualæ–¹æ³•ã€‚ Observalbe.java 123public &lt;R&gt; ObservableMap&lt;T, R&gt; map(Function&lt;T,R&gt; function)&#123; return new ObservableMap(this,function); //ä¸Šå±‚Observableä¼ å…¥ ObservableMap&#125; ObservableMap.java 123protected void subscribeActual(Observer observer) &#123; // sourceä¸Šå±‚Observable, source.subscribe(new MapObserver(observer, function)); //ä¼ å…¥çš„observeræ˜¯ä¸‹æ¸¸çš„observer,å¯ä»¥ä»Žæœ€åŽå¾€å‰çœ‹&#125; è°ƒç”¨æµç¨‹ ç¬¬ä¸€é æŠŠ Observableä¼ å…¥ä¸‹ä¸€å±‚çš„Observableä¸­ã€‚ å¯ä»¥ç†è§£ä¸º è°ƒç”¨ç»“æž„å›¾ -&gt;å‘å³å»ºç«‹å…³è” ç›´è‡³è°ƒç”¨åˆ°æœ€åŽçš„è§‚å¯Ÿè€…subscribe(new Observer())ï¼Œå¼€å§‹æŠŠä¸‹ä¸€çº§çš„Observerä¼ å…¥Observable(è¢«è§‚å¯Ÿè€…)ï¼Œå¯ä»¥ç†è§£ä¸ºå‘å·¦å»ºç«‹å…³è”ã€‚ 1ï¼Œ2å®ŒæˆåŽå¯ä»¥ç†è§£ä¸ºå»ºç«‹åŒå‘é“¾è¡¨ï¼Œä¸Šæ¸¸ä¸€ç›´æŒæœ‰ä¸‹æ¸¸çš„Observer,å¼€å§‹å‘é€emitter.onNext(â€œaaaaâ€);äº‹ä»¶ã€‚ â€‹ é™¤äº†æœ€åŽæ‰‹åŠ¨å»ºç«‹è§‚å¯Ÿè€…ï¼Œä¸­é—´ä¹Ÿå»ºç«‹äº†è§‚å¯Ÿè€…ï¼Œä¸åœçš„å‘ä¸‹å‘é€äº‹ä»¶ã€‚ â€‹ observable observeréƒ½åœ¨å¥—å¨ƒã€‚ ObservableFlatMapæŽ¥æ”¶äº‹ä»¶åŽï¼Œåˆ›å»ºæ–°çš„äº‹ä»¶å‘é€ã€‚ é—®é¢˜RxJavaçš„subscribeOnåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆ?â€‹ subscribeOnå¯¹subscribeè®¢é˜…è¿›è¡Œå¤„ç†ï¼Œé’ˆå¯¹æ˜¯è®¢é˜…æµï¼Œä»ŽåŽå‘å‰æµåŠ¨ï¼Œæ‰€ä»¥æœ€å‰é¢çš„ä¸€æ¬¡ç”Ÿæ•ˆã€‚ RxJavaçš„observeOnå¤šæ¬¡è°ƒç”¨å“ªä¸ªæœ‰æ•ˆ?â€‹ observeOnåœ¨äº‹ä»¶å‘é€çš„ onNext(T t)è¿›è¡Œå¤„ç†ï¼Œé’ˆå¯¹çš„æ˜¯è§‚å¯Ÿè€…æµï¼Œä»Žå‰å‘åŽæµåŠ¨ï¼Œæ‰€ä»¥æœ€åŽä¸€æ¬¡ç”Ÿæ•ˆã€‚ åŒ¿åå†…éƒ¨ç±»å’ŒlambdaåŒºåˆ«[https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/2-Lambda%20and%20Anonymous%20Classes(II).md](https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/2-Lambda and Anonymous Classes(II).md) åŒ¿åå†…éƒ¨ç±»ä»ç„¶æ˜¯ä¸€ä¸ªç±»ï¼Œåªæ˜¯ä¸éœ€è¦ç¨‹åºå‘˜æ˜¾ç¤ºæŒ‡å®šç±»åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºè¯¥ç±»å–åã€‚å› æ­¤å¦‚æžœæœ‰å¦‚ä¸‹å½¢å¼çš„ä»£ç ï¼Œç¼–è¯‘ä¹‹åŽå°†ä¼šäº§ç”Ÿä¸¤ä¸ªclassæ–‡ä»¶ Lambdaè¡¨è¾¾å¼é€šè¿‡*invokedynamic*æŒ‡ä»¤å®žçŽ°ï¼Œä¹¦å†™Lambdaè¡¨è¾¾å¼ä¸ä¼šäº§ç”Ÿæ–°çš„ç±» æŽ¨è®ºï¼Œthiså¼•ç”¨çš„æ„ä¹‰ æ—¢ç„¶Lambdaè¡¨è¾¾å¼ä¸æ˜¯å†…éƒ¨ç±»çš„ç®€å†™ï¼Œé‚£ä¹ˆLambdaå†…éƒ¨çš„thiså¼•ç”¨ä¹Ÿå°±è·Ÿå†…éƒ¨ç±»å¯¹è±¡æ²¡ä»€ä¹ˆå…³ç³»äº†ã€‚åœ¨Lambdaè¡¨è¾¾å¼ä¸­thisçš„æ„ä¹‰è·Ÿåœ¨è¡¨è¾¾å¼å¤–éƒ¨å®Œå…¨ä¸€æ ·ã€‚å› æ­¤ä¸‹åˆ—ä»£ç å°†è¾“å‡ºä¸¤éHello Hooleeï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªå¼•ç”¨åœ°å€ã€‚ Java å‡½æ•°å¼æŽ¥å£ javaæŽ¥å£ åªæœ‰ä¸€ä¸ªæ–¹æ³• ä¼ ç»Ÿæ–¹æ³•123456789101112private static void log(int level, String msg) &#123; if (level &#x3D;&#x3D; 1) &#123; &#x2F;&#x2F;å¦‚æžœä¸æ˜¯1 msgå·²ç»æ‹¼æŽ¥ æ‰€ä»¥é€ æˆæµªè´¹ System.out.println(msg); &#125;&#125;public static void main(String[] args) &#123; String msgA &#x3D; &quot;Hello&quot;; String msgB &#x3D; &quot;World&quot;; String msgC &#x3D; &quot;Java&quot;; log(1, msgA + msgB + msgC);&#125; lambda1234567891011121314151617181920212223242526272829303132333435@FunctionalInterfaceinterface MessageBuilder &#123; String builderMessage();&#125;private static void showLog(int level, MessageBuilder msg) &#123; if (level &#x3D;&#x3D; 1) &#123; System.out.println(msg.builderMessage()); &#125;&#125;public static void main(String[] args) &#123; String msgA &#x3D; &quot;Hello&quot;; String msgB &#x3D; &quot;World&quot;; String msgC &#x3D; &quot;Java&quot;; showLog(1, () -&gt; msgA + msgB + msgC); &#x2F;&#x2F;ä½¿ç”¨lambdaè¡¨è¾¾å¼åªæ˜¯ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä»…ä»…å§å‚æ•°ä¼ åˆ°showLog()ä¸­ &#x2F;&#x2F;åªæœ‰æ—¥å¿—ç­‰çº§æ˜¯1æ—¶ æ‰ä¼šè°ƒç”¨builderMessage æ‹¼æŽ¥å­—ç¬¦ä¸² showLog(1, () -&gt; &#123; System.out.println(&quot;1 æ˜¯å¦æ‰§è¡Œ&quot;); return msgA + msgB + msgC; &#125; ); showLog(2, () -&gt; &#123; System.out.println(&quot;2 æ˜¯å¦æ‰§è¡Œ&quot;); return msgA + msgB + msgC; &#125; );&#125; è¿™æ ·çœ‹æ¥ lambda: (å·¦è¾¹æ˜¯å‚æ•°) -&gt; {å³è¾¹æ˜¯æ–¹æ³•ä½“} æ–¹æ³•ä½“æ˜¯ æŽ¥å£ä¸­å”¯ä¸€æ–¹æ³•çš„å®žçŽ° https://www.bilibili.com/video/BV1U4411V7Sv?p=5 RxJavaæ“ä½œç¬¦Consumer123456789101112131415@FunctionalInterfacepublic interface Consumer&lt;T&gt; &#123; /** * Performs this operation on the given argument. * * @param t the input argument */ void accept(T t); default Consumer&lt;T&gt; andThen(Consumer&lt;? super T&gt; after) &#123; Objects.requireNonNull(after); return (T t) -&gt; &#123; accept(t); after.accept(t); &#125;; &#125;&#125; accept123public static void method(String name,Consumer&lt;String&gt; con)&#123; con.accept(name);&#125; 123method(&quot;john&quot;,(String name)-&gt;&#123; System.out.println(name);&#125;); andThenç¤ºä¾‹1 123public static void method3(String s, Consumer1 con1, Consumer1 con2) &#123; con1.andThen3(con2).accept(s);&#125; ç­‰ä»·äºŽ ç¤ºä¾‹2 1234public static void method(String s, Consumer&lt;String&gt; con1, Consumer&lt;Double&gt; con2) &#123; con1.accept(s); con2.accept(Double.parseDouble(s));&#125; 12345method3(&quot;3.14&quot;, (t) -&gt; &#123; System.out.println(t + &quot;15926&quot;);&#125;, (t) -&gt; &#123; System.out.println(t + &quot;jj&quot;);&#125;); ä¸€å¼€å§‹ çº³é—· con1.andThen3(con2).accept(s); ä¸ºå•¥è¿˜è°ƒç”¨ä¸€ä¸ªaccept(s) è‡ªå®šä¹‰çš„Consumer1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647@FunctionalInterfacepublic interface Consumer1 &#123; &#x2F;** * Performs this operation on the given argument. * * @param t the input argument *&#x2F; void accept(String t); default Consumer1 andThen(Consumer1 after) &#123; Objects.requireNonNull(after); return (String t) -&gt; &#123; accept(t); after.accept(t); &#125;; &#125; default Consumer1 andThen1(Consumer1 after) &#123; Objects.requireNonNull(after); return (String t) -&gt; &#123; accept(t); after.accept(t); &#125;; &#125; default Consumer1 andThen2(Consumer1 after) &#123; Objects.requireNonNull(after); return (String t) -&gt; &#123; accept(t); accept(t); after.accept(t); after.accept(t); &#125;; &#125; default Consumer1 andThen3(Consumer1 after) &#123; Consumer1 m &#x3D; (String t) -&gt; &#123; System.out.println(&quot;æŽ¥æ”¶å‚æ•° t : &quot;+t); after.accept(t); accept(t); &#125;; return m; &#125;&#125; æˆ‘çš„ç†è§£ ï¼š å¯ä»¥çœ‹ lambda å»¶è¿Ÿè°ƒç”¨çš„ç¤ºä¾‹ï¼Œå½“è°ƒç”¨accept(s)æ–¹æ³• æ‰å¼€å§‹è°ƒç”¨æ–¹æ³•ä½“ &#123; accept(t); after.accept(t); &#125;çš„æ–¹æ³•ï¼Œ è¿”å›žlambda,å¯ä»¥å½“ä½œåŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•ç³–, accept(s)å½“ä½œåŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œ sä½œä¸ºå‚æ•° ä¼ å…¥åˆ° (T t) -&gt; &#123; accept(t); after.accept(t); &#125; tä¸­ é€šè¿‡ä¸‹é¢è¿™ä¸ªç¤ºä¾‹å¯ä»¥éªŒè¯ 1234@FunctionalInterfaceinterface MessageBuilder1 &#123; String builderMessage(int param);&#125; 123456private static void showLog1(int level, MessageBuilder1 msg) &#123; if (level == 1) &#123; System.out.println(msg.builderMessage(5)); &#125;&#125; 1234showLog1(1, (t) -&gt; &#123; System.out.println(t); return msgA + msgB + msgC;&#125;); è¾“å‡º 5HelloWorldJava Function1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374package java.util.function;/** * Represents a function that accepts one argument and produces a result. * * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html&quot;&gt;functional interface&lt;/a&gt; * whose functional method is &#123;@link #apply(Object)&#125;. * * @param &lt;T&gt; the type of the input to the function * @param &lt;R&gt; the type of the result of the function * * @since 1.8 */@FunctionalInterfacepublic interface Function&lt;T, R&gt; &#123; /** * Applies this function to the given argument. * * @param t the function argument * @return the function result */ R apply(T t); /** * Returns a composed function that first applies the &#123;@code before&#125; * function to its input, and then applies this function to the result. * If evaluation of either function throws an exception, it is relayed to * the caller of the composed function. * * @param &lt;V&gt; the type of input to the &#123;@code before&#125; function, and to the * composed function * @param before the function to apply before this function is applied * @return a composed function that first applies the &#123;@code before&#125; * function and then applies this function * @throws NullPointerException if before is null * * @see #andThen(Function) */ default &lt;V&gt; Function&lt;V, R&gt; compose(Function&lt;? super V, ? extends T&gt; before) &#123; Objects.requireNonNull(before); return (V v) -&gt; apply(before.apply(v)); &#125; /** * Returns a composed function that first applies this function to * its input, and then applies the &#123;@code after&#125; function to the result. * If evaluation of either function throws an exception, it is relayed to * the caller of the composed function. * * @param &lt;V&gt; the type of output of the &#123;@code after&#125; function, and of the * composed function * @param after the function to apply after this function is applied * @return a composed function that first applies this function and then * applies the &#123;@code after&#125; function * @throws NullPointerException if after is null * * @see #compose(Function) */ default &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) &#123; Objects.requireNonNull(after); return (T t) -&gt; after.apply(apply(t)); &#125; /** * Returns a function that always returns its input argument. * * @param &lt;T&gt; the type of the input and output objects to the function * @return a function that always returns its input argument */ static &lt;T&gt; Function&lt;T, T&gt; identity() &#123; return t -&gt; t; &#125;&#125; 1234public int compute(int a, Function&lt;Integer,Integer&gt; function)&#123; int reuslt = function.apply(a); // ç›¸å½“äºŽ 2 * value æ“ä½œ return reuslt;&#125; 1234567FunctionTest functionTest = new FunctionTest();functionTest.compute(1,value-&gt;&#123;return 2 * value ;&#125;);Function&lt;Integer,Integer&gt; function = value -&gt; value *2;functionTest.compute(1,function);function.compose(function); RxJava æ€è€ƒ https://gank.io/post/560e15be2dca930e00da1083#toc-31 https://juejin.im/post/6844903670203547656 https://juejin.im/post/6844903711416778765 https://www.jianshu.com/p/7fce2955f2db https://juejin.im/post/6844903838978146317","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"RxJava","slug":"RxJava","permalink":"https://noteforme.github.io/tags/RxJava/"}]},{"title":"DesignPattern_Chain","slug":"DesignPattern-Chain","date":"2020-07-22T14:43:57.000Z","updated":"2024-10-01T11:29:48.525Z","comments":true,"path":"2020/07/22/DesignPattern-Chain/","link":"","permalink":"https://noteforme.github.io/2020/07/22/DesignPattern-Chain/","excerpt":"","text":"ä¼ ç»Ÿæ–¹æ¡ˆOAç³»ç»Ÿå®¡æ‰¹é—®é¢˜ èŒè´£é“¾æ¨¡å¼ä»‹ç» ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»Žè€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿žåŸŽä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡ä¼ é€’è¯¥è¯·æ±‚ã€‚ç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ ![2021-09-12_7.11.21_ class](DesignPattern-Chain&#x2F;2021-09-12_7.11.21_ class.png) å¤§è¯ç¤ºä¾‹chain of Responsibility Pattern 12345public class Request &#123; public String requestType; public String requestContent; public int number;&#125; 12345678910111213141516public abstract class Manager &#123; protected String name; protected Manager superior;//ç®¡ç†è€…ä¸Šçº§ public Manager(String name) &#123; this.name = name; &#125; // è®¾ç½®ç®¡ç†è€…ä¸Šçº§ public void setSuperior(Manager superior) &#123; this.superior = superior; &#125; //ç”³è¯·è¯·æ±‚ abstract void requestApplications(Request request);&#125; 123456789101112131415public class CommonManager extends Manager &#123; public CommonManager(String name) &#123; super(name); &#125; @Override void requestApplications(Request request) &#123; if (&quot;è¯·å‡&quot;.equals(request.requestType)&amp;&amp;request.number&lt;2)&#123; System.out.println(name+&quot; &quot;+ request.requestContent+ &quot; æ•°é‡ &quot;+ request.number+&quot; è¢«æ‰¹å‡†&quot;); &#125;else &#123; if (superior!=null) superior.requestApplications(request); &#125; &#125;&#125; 123456789101112131415public class MajorDomo extends Manager &#123; public MajorDomo(String name) &#123; super(name); &#125; @Override void requestApplications(Request request) &#123; if (&quot;è¯·å‡&quot;.equals(request.requestType)&amp;&amp;request.number&lt;5)&#123; System.out.println(name+&quot; &quot;+ request.requestContent+ &quot; æ•°é‡ &quot;+ request.number+&quot; è¢«æ‰¹å‡†&quot;); &#125;else &#123; if (superior!=null) superior.requestApplications(request); &#125; &#125;&#125; 12345678910111213141516public class GeneralManager extends Manager &#123; public GeneralManager(String name) &#123; super(name); &#125; @Override void requestApplications(Request request) &#123; if (&quot;è¯·å‡&quot;.equals(request.requestType) &amp;&amp; request.number &lt; 5) &#123; System.out.println(name + &quot; &quot; + request.requestContent + &quot; æ•°é‡ &quot; + request.number + &quot; è¢«æ‰¹å‡†&quot;); &#125; else if (&quot;åŠ è–ª&quot;.equals(request.requestType) &amp;&amp; request.number &lt; 500) &#123; System.out.println(name + &quot; &quot; + request.requestContent + &quot; æ•°é‡ &quot; + request.number + &quot; è¢«æ‰¹å‡†&quot;); &#125;else if (&quot;åŠ è–ª&quot;.equals(request.requestType) &amp;&amp; request.number &gt; 500) &#123; System.out.println(name + &quot; &quot; + request.requestContent + &quot; æ•°é‡ &quot; + request.number + &quot; å†è¯´å§&quot;); &#125; &#125;&#125; 12345678910111213141516171819CommonManager commonManager = new CommonManager(&quot;ç»ç†&quot;);MajorDomo majorDomo = new MajorDomo(&quot;æ€»ç›‘&quot;);GeneralManager generalManager = new GeneralManager(&quot;æ€»ç»ç†&quot;);commonManager.setSuperior(majorDomo);//è®¾ç½®ä¸Šçº§majorDomo.setSuperior(generalManager);Request request = new Request();request.requestType = &quot;è¯·å‡&quot;;request.number = 4;request.requestContent = &quot;åŽ»æ‰¾å°å§å§&quot;;commonManager.requestApplications(request);Request request1 = new Request();request1.requestType = &quot;åŠ è–ª&quot;;request1.number = 888;request1.requestContent = &quot;ç»™å“¥åŠ è–ª&quot;;commonManager.requestApplications(request1); è´£ä»»é“¾æ¨¡å¼ä½œç”¨ https://www.bilibili.com/video/BV1G4411c7N4?p=149&amp;spm_id_from=pageDriver https://blog.csdn.net/weixin_45203607/article/details/120238491","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[]},{"title":"Regular","slug":"Regular","date":"2020-07-20T09:07:08.000Z","updated":"2024-03-31T23:23:52.279Z","comments":true,"path":"2020/07/20/Regular/","link":"","permalink":"https://noteforme.github.io/2020/07/20/Regular/","excerpt":"","text":"Tool Websitehttps://regex101.com/ https://ihateregex.io/expr/passwordhttps://deerchao.cn/tools/wegester/ ASCII è¯»ASCIIè¡¨ å…ˆè¯» â€œæ¨ªâ€åº§æ ‡,åŽè¯» â€œçºµâ€ åº§æ ‡.ä¾‹å¦‚ï¼šA , äºŒè¿›åˆ¶æ˜¯ 0100 0001 åè¿›åˆ¶æ˜¯ 2^6 + 1 = 65 åå…­è¿›åˆ¶ 41 F : äºŒè¿›åˆ¶æ˜¯ 0100 0110 åè¿›åˆ¶æ˜¯ 2^6 + 2^2+2=70 åå…­è¿›åˆ¶ 46 Stringä¸­çš„æ•°å­—è½¬int1234val digits = &quot;23&quot;val c = digits[0] - &#x27;0&#x27; // 50 - 48println(digits[0].code) // ASCIIæ˜¯ 50 ,16è¿›åˆ¶æ˜¯0x32,å¯ä»¥åœ¨è¡¨ä¸­æŸ¥å‡ºæ˜¯2println(&#x27;0&#x27;.code) //ASCIIæ˜¯ 48 æ­£åˆ™æ„ä¹‰å¯¹ç…§è¡¨æ ¼https://www.jb51.net/shouce/jquery1.82/regexp.html https://baixin.ink/2016/03/21/regular-expression/ https://www.bilibili.com/video/BV1Eq4y1E79W?p=4 https://deerchao.cn/tutorials/regex/regex.htm https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions https://medium.com/factory-mind/regex-tutorial-a-simple-cheatsheet-by-examples-649dc1c3f285 è¯­æ³•å­—ç¬¦æ™®é€šå­—ç¬¦å­—æ¯ã€æ•°å­—ã€æ±‰å­—ã€ä¸‹åˆ’çº¿ã€ä»¥åŠæ²¡æœ‰ç‰¹æ®Šå®šä¹‰çš„æ ‡ç‚¹ç¬¦å·éƒ½æ˜¯æ™®é€šå­—ç¬¦ã€‚ç›´æŽ¥åŒ¹é…ä¸Žä¹‹ç›¸åŒçš„å­—ç¬¦ -ç®€å•çš„è½¬ä¹‰å­—ç¬¦ \\n æ¢è¡Œç¬¦ \\t åˆ¶è¡¨ç¬¦ \\ \\æœ¬èº« å…¶ä»–éƒ½æ˜¯ç±»ä¼¼ ^ $ ( è¿™æ ·åŒ¹é…è¿™äº›å­—ç¬¦æœ¬èº«çš„ï¼ˆè¿˜æœ‰ ) { } ? + * | [ ] ï¼‰ æ ‡å‡†å­—ç¬¦é›†åˆ èƒ½å¤Ÿä¸Žå¤šç§å­—ç¬¦åŒ¹é…çš„è¡¨è¾¾å¼ æ³¨æ„åŒºåˆ†å¤§å°å†™ å¤§å†™æ˜¯ç›¸åçš„æ„æ€ \\d ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œ0-9ä¸­ä»»æ„ä¸€ä¸ª \\D è¡¨ç¤ºæ‰€æœ‰éžæ•°å­— \\w ä»»æ„ä¸€ä¸ªå­—æ¯æˆ–ä¸‹åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯A-Zã€a-zã€0-9ã€_ ã€ä¸­çš„ä»»æ„ä¸€ä¸ª \\s åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ç©ºç™½å­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ª . å°æ•°ç‚¹å¯ä»¥åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆé™¤äº†æ¢è¡Œç¬¦ï¼‰ã€‚å¦‚æžœè¦åŒ¹é…åŒ…æ‹¬â€œ\\nâ€åœ¨å†…çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¸€èˆ¬ç”¨ [\\s\\S] \\S åŒ¹é…ä»»ä½•éžç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äºŽ[^ \\f\\n\\r\\t\\v]ã€‚ (æ³¨æ„æ˜¯ç©ºç™½å­—ç¬¦ï¼Œä¸æ˜¯ç©ºæ ¼) è‡ªå®šä¹‰å­—ç¬¦é›†åˆ[]æ–¹æ‹¬å·åŒ¹é…æ–¹å¼ ï¼Œèƒ½å¤ŸåŒ¹é…æ–¹æ‹¬å·ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚^ç¬¦å·åœ¨æ–¹æ‹¬å·é‡Œè¡¨ç¤º å–å æ–¹æ‹¬å·å¤–è¡¨ç¤ºé›¶å®½æ ‡è®°ï¼Œè§åŽé¢ [ab5@] åŒ¹é… â€œaâ€æˆ–â€œbâ€æˆ–â€œ5â€æˆ–â€œ@â€ [^abc] åŒ¹é…â€œaâ€ã€â€œbâ€ã€â€câ€œä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [f-k] åŒ¹é…â€œfâ€-â€œkâ€ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—æ¯ [^A-F0-3] åŒ¹é…â€œAâ€-â€œFâ€ï¼Œâ€œ0â€-â€œ3â€ä¹‹å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šç¬¦å·ï¼Œè¢«åŒ…å«åˆ°ä¸­æ‹¬å·ä¸­åˆ™å¤±åŽ»å…¶ç‰¹æ®Šæ„ä¹‰ï¼ˆå°±è¡¨ç¤ºè‡ªèº«è¿™ä¸ªå­—ç¬¦ï¼‰ï¼Œé™¤äº†^,-ä¹‹å¤–ã€‚ æ ‡å‡†å­—ç¬¦é›†åˆï¼Œé™¤å°æ•°ç‚¹å¤–ï¼Œå¦‚æžœè¢«åŒ…å«äºŽä¸­æ‹¬å·ï¼Œè‡ªå®šä¹‰å­—ç¬¦é›†åˆå°†åŒ…å«è¯¥é›†åˆã€‚ æ¯”å¦‚ï¼š [\\d.-+]å°†åŒ¹é…ï¼šæ•°å­—ã€å°æ•°ç‚¹ã€+ã€- æœ¬èº«æ„ä¹‰ï¼Œé™¤éžåŠ è½¬ä¹‰å­—ç¬¦\\ ä¸Šé¢ä¸¤å¥ä¸€ä¸ªæ„æ€å‘€ é‡è¯Quantifierä¿®é¥°åŒ¹é…æ¬¡æ•°çš„ç‰¹æ®Šç¬¦å· {n} è¡¨è¾¾å¼é‡å¤næ¬¡ å¦‚ï¼š\\d{6} åŒ¹é…6ä½æ•°å­— \\d\\d{6} åŒ¹é…7ä½æ•°å­— {\\d\\d}{6} åŒ¹é…12ä½æ•°å­— {m,n} è¡¨è¾¾å¼è‡³å°‘é‡å¤mæ¬¡ï¼Œæœ€å¤šé‡å¤næ¬¡ {m,} è‡³å°‘é‡å¤mæ¬¡ ï¼Ÿ åŒ¹é…è¡¨è¾¾å¼0æ¬¡æˆ–1æ¬¡ ï¼Œç›¸å½“äºŽ{0ï¼Œ1} å¦‚ï¼ša\\d{0,1}b a\\d?b æ˜¯ç­‰ä»·çš„ + è¡¨è¾¾å¼è‡³å°‘å‡ºçŽ°1æ¬¡,ç›¸å½“äºŽ{1ï¼Œ} å¦‚ï¼ša\\d+b * è¡¨è¾¾å¼ä¸å‡ºçŽ°æˆ–å‡ºçŽ°ä»»æ„æ¬¡ ç›¸å½“äºŽ{0ï¼Œ} é€‰å…¶ä¸­ä¹‹ä¸€çš„æ¡ä»¶ ï½œåŒ¹é…xæˆ–yã€‚ä¾‹å¦‚ï¼Œâ€œz åŒ¹é…æ¬¡æ•°ä¸­çš„è´ªå©ªæ¨¡å¼ ï¼ˆåŒ¹é…å­—ç¬¦æ•°è¶Šå¤šè¶Šå¥½ï¼Œé»˜è®¤çš„ï¼‰å¦‚\\d{3,6} ä¼šä¼˜å…ˆåŒ¹é… 6ä½æ•°å­— åŒ¹é…æ¬¡æ•°ä¸­çš„éžè´ªå©ªæ¨¡å¼ ï¼ˆåŒ¹é…å­—ç¬¦è¶Šå°‘è¶Šå¥½ï¼Œä¿®é¥°åŒ¹é…æ¬¡æ•°çš„ç‰¹æ®Šç¬¦å·åŽå†åŠ ä¸Šä¸€ä¸ªâ€œï¼Ÿâ€å·ï¼‰ å¯¹äºŽ 2[0-4]\\d|25[0-5]|[01]?\\d\\d? çš„ipåœ°å€è§£æžå¯ä»¥è¿™æ ·ç†è§£ 2[0-4]\\d : 200- 249 25[0-5] : 250 - 255 [01]?\\d\\d? : 0- 199 è¿™æ ·å°±è¦†ç›–äº†æ‰€æœ‰èƒ½å¡«çš„ipåœ°å€ã€‚ {n} o{2}â€ ä¸èƒ½åŒ¹é…â€œBobâ€ä¸­çš„â€œoâ€ï¼Œå› ä¸ºåªæœ‰1ä¸ªo, ä½†æ˜¯èƒ½åŒ¹é…â€œfoodâ€ä¸­çš„ä¸¤ä¸ªo . {n,} næ˜¯ä¸€ä¸ªéžè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…næ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€œo{2,}â€ä¸èƒ½åŒ¹é…â€œBobâ€ä¸­çš„â€œoâ€ï¼Œä½†èƒ½åŒ¹é…â€œfooooodâ€ä¸­çš„æ‰€æœ‰oã€‚â€œo{1,}â€ç­‰ä»·äºŽâ€œo+â€ã€‚â€œo{0,}â€åˆ™ç­‰ä»·äºŽâ€œo*â€ã€‚ å­—ç¬¦è¾¹ç•Œ(é›¶å®½ï¼Œä¸å é•¿åº¦)-ï¼ˆæœ¬ç»„æ ‡è®°åŒ¹é…çš„ä¸æ˜¯å­—ç¬¦è€Œæ˜¯ä½ç½®ï¼Œç¬¦åˆæŸç§æ¡ä»¶çš„ä½ç½®ï¼‰ ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œé™¤éžåœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œå½“è¯¥ç¬¦å·åœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œè¡¨ç¤ºä¸æŽ¥å—è¯¥æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­çš„å­—ç¬¦é›†åˆã€‚è¦åŒ¹é… ^ å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ \\^ã€‚ $ ä¸Žå­—ç¬¦ç»“æŸçš„åœ°æ–¹åŒ¹é… \\b åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œ ^ []éƒ¨åˆ†ä¹Ÿæœ‰æè¿°. https://www.runoob.com/regexp/regexp-syntax.html REG : John\\b John åŒ¹é… å¯ä»¥çœ‹åˆ° John_ ä¸‹åˆ’çº¿_å°±æ˜¯\\bçš„ä½ç½®ï¼Œä»–çš„å·¦ä¾§n åŒ¹é…ï¼Œä½†æ˜¯å³ä¾§ç©ºæ ¼ä¸åŒ¹é… \\w,æ‰€ä»¥å°±æ˜¯ä¸å…¨æ˜¯\\w,æ‰€ä»¥åŒ¹é…ã€‚ -\\båŒ¹é…è¿™æ ·ä¸€ä¸ªä½ç½®ï¼šå‰é¢çš„å­—ç¬¦å’ŒåŽé¢çš„å­—ç¬¦ä¸å…¨æ˜¯\\w ï¼ˆå…¨æ˜¯çš„å°±ä¸åŒ¹é…ï¼‰ å¦‚ï¼š^i åŒ¹é… iå¼€å¤´çš„ä½ç½® i$ åŒ¹é…iç»“æŸçš„ä½ç½® hello\\b åŒ¹é…å‰åŽä¸å…¨æ˜¯\\wè¡¨ç¤ºçš„hello åŒ¹é…æ¨¡å¼IGNORECASE å¿½ç•¥å¤§å°å†™ é»˜è®¤æƒ…å†µä¸‹æ­£åˆ™è¡¨è¾¾å¼åŒºåˆ†å¤§å°å†™(Case Insensitive) SINGLELINE å•è¡Œæ¨¡å¼ æ•´ä¸ªæ–‡æœ¬çœ‹ä½œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªæœ‰ä¸€ä¸ªå¼€å¤´ï¼Œä¸€ä¸ªç»“å°¾ã€‚ä½¿å¾—å°æ•°ç‚¹â€œ.â€å¯ä»¥åŒ¹é…åŒ…å«æ¢è¡Œç¬¦ï¼ˆ\\nï¼‰åœ¨å†…çš„ä»»æ„å­—ç¬¦ MULTILINE å¤šè¡Œæ¨¡å¼ æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéƒ½æœ‰å¼€å¤´å’Œç»“å°¾ã€‚åœ¨æŒ‡å®šäº†æ­¤æ¨¡å¼åŽï¼Œå¦‚æžœéœ€è¦ä»…åŒ¹é…å­—ç¬¦ä¸²å¼€å§‹å’Œç»“æŸä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨\\Aå’Œ\\Z å¦‚ï¼š\\AiåŒ¹é… ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªi ^i åŒ¹é…æ¯ä¸€è¡Œç¬¬ä¸€ä¸ªçš„i i$åŒ¹é…æ¯ä¸€è¡Œçš„æœ€åŽä¸€ä¸ªi i\\Z åŒ¹é…æ•´ä¸ªæ–‡æ¡£æœ€åŽä¸€ä¸ªi é€‰æ‹©ç¬¦å’Œåˆ†ç»„ è¡¨è¾¾å¼ ä½œç”¨ | åˆ†æ”¯ç»“æž„ å·¦å³ä¸¤è¾¹è¡¨è¾¾å¼ä¹‹é—´ â€œæˆ–â€ å…³ç³»ï¼ŒåŒ¹é…å·¦è¾¹æˆ–è€…å³è¾¹ è¡¨ç¤ºâ€œæˆ–â€ å¦‚ h () æ•èŽ·ç»„ (1) åœ¨è¢«ä¿®é¥°åŒ¹é…æ¬¡æ•°çš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼å¯ä»¥ä½œä¸ºæ•´ä½“è¢«ä¿®é¥° (2)å–åŒ¹é…ç»“æžœçš„æ—¶å€™ï¼Œæ‹¬å·ä¸­çš„è¡¨è¾¾å¼åŒ¹é…åˆ°çš„å†…å®¹å¯ä»¥è¢«å•ç‹¬åœ°ç¼–å· (3)æ¯ä¸€å¯¹æ‹¬å·ä¼šè¢«åˆ†é…ä¸€ä¸ªç¼–å·ï¼Œä½¿ç”¨ï¼ˆï¼‰çš„æ•èŽ·æ ¹æ®å·¦æ‹¬å·çš„é¡ºåºä»Ž1å¼€å§‹è‡ªåŠ¨ç¼–å·ã€‚æ•èŽ·å…ƒç´ ç¼–å·ä¸ºé›¶çš„ç¬¬ä¸€ ä¸ªæ•èŽ·æ˜¯ç”±æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…çš„å†…å®¹ (?:Expression) éžæ•èŽ·ç»„ ä¸€äº›è¡¨è¾¾å¼ä¸­ï¼Œä¸å¾—ä¸ä½¿ç”¨ï¼ˆï¼‰ï¼Œä½†åˆä¸éœ€è¦ä¿å­˜ï¼ˆï¼‰ä¸­çš„å­è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ï¼Œè¿™æ—¶å¯ä»¥ç”¨éžæ•èŽ·ç»„æ¥æŠµæ¶ˆä½¿ç”¨ï¼ˆï¼‰å¸¦æ¥çš„å‰¯ä½œç”¨ã€‚èŠ‚çœå†…å­˜ã€‚ åå‘å¼•ç”¨ï¼ˆ\\nnnï¼‰\\nnnè¡¨ç¤ºå¯ä»¥åŒ¹é…å¤šä½æ•°å­—-æ¯ä¸€å¯¹ï¼ˆï¼‰ä¼šåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œä½¿ç”¨ï¼ˆï¼‰çš„æ•èŽ·æ ¹æ®å·¦æ‹¬å·çš„é¡ºåºä»Ž1å¼€å§‹è‡ªåŠ¨ç¼–å·ã€‚ -é€šè¿‡åå‘å¼•ç”¨ï¼Œå¯ä»¥å¯¹åˆ†ç»„å·²æ•èŽ·çš„å­—ç¬¦ä¸²è¿›è¡Œå¼•ç”¨ã€‚ å¦‚ ([a-z]{2})\\1 ä¸­çš„\\1 ä»£è¡¨ç¬¬ä¸€ä¸ªç»„é‡Œçš„å†…å®¹,åŒ¹é…åˆ°gogoï¼Œtotoï¼Œdodoè¿™æ ·çš„å­—ç¬¦ä¸²ã€‚ ï¼ˆï¼‰ï¼ˆï¼‰ï¼ˆï¼‰ æ•èŽ·çš„å†…å®¹åˆ†åˆ«ç”¨\\1 \\2 \\3 ç¼–å·ä»¥å·¦æ‹¬å·ä¸ºå‡†ã€‚ åŽå‘å¼•ç”¨ä½¿ç”¨å°æ‹¬å·æŒ‡å®šä¸€ä¸ªå­è¡¨è¾¾å¼åŽï¼ŒåŒ¹é…è¿™ä¸ªå­è¡¨è¾¾å¼çš„æ–‡æœ¬(ä¹Ÿå°±æ˜¯æ­¤åˆ†ç»„æ•èŽ·çš„å†…å®¹)å¯ä»¥åœ¨è¡¨è¾¾å¼æˆ–å…¶å®ƒç¨‹åºä¸­ä½œè¿›ä¸€æ­¥çš„å¤„ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåˆ†ç»„ä¼šè‡ªåŠ¨æ‹¥æœ‰ä¸€ä¸ªç»„å·ï¼Œè§„åˆ™æ˜¯ï¼šä»Žå·¦å‘å³ï¼Œä»¥åˆ†ç»„çš„å·¦æ‹¬å·ä¸ºæ ‡å¿—ï¼Œç¬¬ä¸€ä¸ªå‡ºçŽ°çš„åˆ†ç»„çš„ç»„å·ä¸º1ï¼Œç¬¬äºŒä¸ªä¸º2ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ åŽå‘å¼•ç”¨ç”¨äºŽé‡å¤æœç´¢å‰é¢æŸä¸ªåˆ†ç»„åŒ¹é…çš„æ–‡æœ¬ã€‚ä¾‹å¦‚ï¼Œ\\1ä»£è¡¨åˆ†ç»„1åŒ¹é…çš„æ–‡æœ¬ã€‚éš¾ä»¥ç†è§£ï¼Ÿè¯·çœ‹ç¤ºä¾‹ï¼š \\b(\\w+)\\b\\s+\\1\\bå¯ä»¥ç”¨æ¥åŒ¹é…é‡å¤çš„å•è¯ï¼Œåƒgo go, æˆ–è€…kitty kittyã€‚è¿™ä¸ªè¡¨è¾¾å¼é¦–å…ˆæ˜¯ä¸€ä¸ªå•è¯ï¼Œä¹Ÿå°±æ˜¯å•è¯å¼€å§‹å¤„å’Œç»“æŸå¤„ä¹‹é—´çš„å¤šäºŽä¸€ä¸ªçš„å­—æ¯æˆ–æ•°å­—(\\b(\\w+)\\b)ï¼Œè¿™ä¸ªå•è¯ä¼šè¢«æ•èŽ·åˆ°ç¼–å·ä¸º1çš„åˆ†ç»„ä¸­ï¼Œç„¶åŽæ˜¯1ä¸ªæˆ–å‡ ä¸ªç©ºç™½ç¬¦(\\s+)ï¼Œæœ€åŽæ˜¯åˆ†ç»„1ä¸­æ•èŽ·çš„å†…å®¹ï¼ˆä¹Ÿå°±æ˜¯å‰é¢åŒ¹é…çš„é‚£ä¸ªå•è¯ï¼‰(\\1)ã€‚ ä¸Šé¢ \\1 å°±ä»£è¡¨ goäº†ï¼Œ \\2çš„è¡¨è¾¾å¼è¿˜æ²¡æžå‡ºæ¥ https://deerchao.cn/tutorials/regex/regex.htm ?å½“è¯¥å­—ç¬¦ç´§è·Ÿåœ¨ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ï¼ˆ*,+,?ï¼Œ{n}ï¼Œ{n,}ï¼Œ{n,m}ï¼‰åŽé¢æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éžè´ªå©ªçš„ã€‚éžè´ªå©ªæ¨¡å¼å°½å¯èƒ½å°‘çš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼åˆ™å°½å¯èƒ½å¤šçš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽå­—ç¬¦ä¸²â€œooooâ€ï¼Œâ€œo+?â€å°†åŒ¹é…å•ä¸ªâ€œoâ€ï¼Œè€Œâ€œo+â€å°†åŒ¹é…æ‰€æœ‰â€œoâ€ã€‚ é¢„æœç´¢ï¼ˆé›¶å®½æ–­è¨€ï¼‰ï¼ˆä¹Ÿå«çŽ¯è§†ï¼‰ åªè¿›è¡Œå­è¡¨è¾¾å¼çš„åŒ¹é…ï¼ŒåŒ¹é…å†…å®¹ä¸è®¡å…¥æœ€ç»ˆçš„åŒ¹é…ç»“æžœï¼Œæ˜¯é›¶å®½åº¦,åº”è¯¥å¯ä»¥ç†è§£ä¸ºåªåŒ¹é…ï¼Œä¸æ¶ˆè€—å­—ç¬¦ã€‚ è¿™ä¸ªä½ç½®åº”è¯¥ç¬¦åˆæŸä¸ªæ¡ä»¶ã€‚åˆ¤æ–­å½“å‰ä½ç½®çš„å‰åŽå­—ç¬¦ï¼Œæ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ¡ä»¶ï¼Œä½†ä¸åŒ¹é…å‰åŽçš„å­—ç¬¦ã€‚æ˜¯å¯¹ä½ç½®çš„åŒ¹é…ã€‚ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœå­è¡¨è¾¾å¼åŒ¹é…åˆ°çš„æ˜¯å­—ç¬¦å†…å®¹ï¼Œè€Œéžä½ç½®ï¼Œå¹¶è¢«ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æžœä¸­ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå­è¡¨è¾¾å¼æ˜¯å æœ‰å­—ç¬¦çš„ï¼›å¦‚æžœå­è¡¨è¾¾å¼åŒ¹é…çš„ä»…ä»…æ˜¯ä½ç½®ï¼Œæˆ–è€…åŒ¹é…çš„å†…å®¹å¹¶ä¸ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æžœä¸­ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå­è¡¨è¾¾å¼æ˜¯é›¶å®½åº¦çš„ã€‚å æœ‰å­—ç¬¦è¿˜æ˜¯é›¶å®½åº¦ï¼Œæ˜¯é’ˆå¯¹åŒ¹é…çš„å†…å®¹æ˜¯å¦ä¿å­˜åˆ°æœ€ç»ˆçš„åŒ¹é…ç»“æžœä¸­è€Œè¨€çš„ã€‚ è¡¨è¾¾å¼ ä½œç”¨ (?=exp) æ–­è¨€è‡ªèº«å‡ºçŽ°çš„ä½ç½®çš„åŽé¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp (?&lt;=exp) æ–­è¨€è‡ªèº«å‡ºçŽ°çš„ä½ç½®çš„å‰é¢èƒ½åŒ¹é…è¡¨è¾¾å¼exp (?!exp) æ–­è¨€æ­¤ä½ç½®çš„åŽé¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp (?&lt;!exp) æ–­è¨€æ­¤ä½ç½®çš„å‰é¢ä¸èƒ½åŒ¹é…è¡¨è¾¾å¼exp (?:pattern)åŒ¹é…patternä½†ä¸èŽ·å–åŒ¹é…ç»“æžœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åŽä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨æˆ–å­—ç¬¦â€œ(|)â€æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚â€œindustr(?:y|ies|he)â€å°±æ˜¯ä¸€ä¸ªæ¯”â€œindustry|industries|industrheâ€æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚ (?:foo){1,2}å¦‚æžœè¡¨è¾¾å¼æ˜¯ /foo{1,2}/ï¼Œ{1,2} å°†åªåº”ç”¨äºŽ â€˜fooâ€™ çš„æœ€åŽä¸€ä¸ªå­—ç¬¦ â€˜oâ€™ï¼Œå¯ä»¥çœ‹ä¸Šé¢çš„{n}ã€‚å¦‚æžœä½¿ç”¨éžæ•èŽ·æ‹¬å·ï¼Œåˆ™ {1,2} ä¼šåº”ç”¨äºŽæ•´ä¸ª â€˜fooâ€™ å•è¯å¯ä»¥çœ‹åˆ°ï¼Œ fooæœ€å¤šåŒ¹é…ä¸¤ä¸ªï¼Œè¶…è¿‡çš„å°±åˆ†ç»„äº†ã€‚ (?=exp)ä¹Ÿå«é›¶å®½åº¦æ­£é¢„æµ‹å…ˆè¡Œæ–­è¨€ï¼Œå®ƒæ–­è¨€è‡ªèº«å‡ºçŽ°çš„ä½ç½®çš„åŽé¢èƒ½åŒ¹é…è¡¨è¾¾å¼expã€‚æ¯”å¦‚\\b\\w+(?=ing\\b)ï¼ŒåŒ¹é…ä»¥ingç»“å°¾çš„å•è¯çš„å‰é¢éƒ¨åˆ†(é™¤äº†ingä»¥å¤–çš„éƒ¨åˆ†)ï¼Œå¦‚æŸ¥æ‰¾Iâ€™m singing while youâ€™re dancing.æ—¶ï¼Œå®ƒä¼šåŒ¹é…singå’Œdanc x(?=y) éœ€åŒ¹é…æ–‡æ¡ˆxåœ¨å‰é¢åŒ¹é…â€™xâ€™ä»…ä»…å½“â€™xâ€™åŽé¢è·Ÿç€â€™yâ€™.è¿™ç§å«åšå…ˆè¡Œæ–­è¨€ã€‚ä¾‹å¦‚ï¼Œ/Jack(?=Sprat)/ä¼šåŒ¹é…åˆ°â€™Jackâ€™ä»…å½“å®ƒåŽé¢è·Ÿç€â€™Spratâ€™ã€‚/Jack(?=Sprat|Frost)/åŒ¹é…â€˜Jackâ€™ä»…å½“å®ƒåŽé¢è·Ÿç€â€™Spratâ€™æˆ–è€…æ˜¯â€˜Frostâ€™ã€‚ä½†æ˜¯â€˜Spratâ€™å’Œâ€˜Frostâ€™éƒ½ä¸æ˜¯åŒ¹é…ç»“æžœçš„ä¸€éƒ¨åˆ†ã€‚ æ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦èŽ·å–ä¾›ä»¥åŽä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€œWindows(?=95|98|NT|2000)â€èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”ŸåŽï¼Œåœ¨æœ€åŽä¸€æ¬¡åŒ¹é…ä¹‹åŽç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»ŽåŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åŽå¼€å§‹ã€‚ (?!pattern)æ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦èŽ·å–ä¾›ä»¥åŽä½¿ç”¨ã€‚ä¾‹å¦‚â€œWindows(?!95|98|NT|2000)â€èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”ŸåŽï¼Œåœ¨æœ€åŽä¸€æ¬¡åŒ¹é…ä¹‹åŽç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»ŽåŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åŽå¼€å§‹ (?&lt;=pattern)åå‘è‚¯å®šé¢„æŸ¥ï¼Œ** ä¸Žæ­£å‘è‚¯å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸å **ã€‚ä¾‹å¦‚ï¼Œâ€œ(?&lt;=95|98|NT|2000)Windowsâ€èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€ã€‚ (?&lt;=y)xéœ€åŒ¹é…æ–‡æ¡ˆxåœ¨åŽé¢ (?&lt;!pattern)åå‘å¦å®šé¢„æŸ¥ï¼Œä¸Žæ­£å‘å¦å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚â€œ(?&lt;!95|98|NT|2000)Windowsâ€èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ã€‚ https://deerchao.cn/tutorials/regex/regex.htm (?&lt;=\\d)[a-z]+ 22john å¦‚ï¼š[a-z]+(?=ing) åŒ¹é…ingç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸åŒ¹é…ingæœ¬èº« [a-z]+(?=\\d+) åŒ¹é…æ•°å­—ç»“å°¾çš„å­—ç¬¦ä¸² å¸¸ç”¨çš„ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼ç”µè¯å·ç éªŒè¯ï¼ˆåŒ…å«å›ºè¯å’Œæ‰‹æœºå·ï¼Œä¸èƒ½ç¡®è®¤å·ç ä¸€å®šå­˜åœ¨ï¼Œåªèƒ½åŒ¹é…æ ¼å¼ï¼‰ ï¼ˆ1ï¼‰ç”µè¯å·ç ç”±æ•°å­—å’Œâ€œ-â€æž„æˆ ï¼ˆ2ï¼‰ç”µè¯å·ç ä¸º7-8ä½ ï¼ˆ3ï¼‰å¦‚æžœç”µè¯å·ç ä¸­åŒ…å«æœ‰åŒºå·ï¼Œé‚£ä¹ˆåŒºå·ä¸º3ä½æˆ–4ä½ï¼Œé¦–ä½æ˜¯0 ï¼ˆ4ï¼‰åŒºå·ç”¨â€œ-â€å’Œå…¶ä»–éƒ¨åˆ†éš”å¼€ ï¼ˆ5ï¼‰ç§»åŠ¨ç”µè¯å·ç ä¸º11ä½ ï¼ˆ6ï¼‰11ä½ç§»åŠ¨ç”µè¯å·ç çš„ç¬¬ä¸€ä½å’Œç¬¬äºŒä½ä¸ºâ€œ13â€â€œ15â€â€œ18â€ å›ºè¯ 0\\d{2,3}-\\d{7,9} æ‰‹æœºå· 1[35789]\\d{9} ç”µå­é‚®ç®±åœ°å€éªŒè¯1.ç”¨æˆ·åï¼šå­—æ¯ã€æ•°å­—ã€ä¸­åˆ’çº¿ã€ä¸‹åˆ’çº¿ç»„æˆ 2.@ 3.ç½‘å€ï¼šå­—æ¯ã€æ•°å­—ç»„æˆ 4.å°æ•°ç‚¹ã€‚ 5.ç»„ç»‡åŸŸåï¼š2-4ä½å­—æ¯ç»„æˆ ä¸åŒºåˆ†å¤§å°å†™ [\\w-]+@[a-z0-9A-Z]+(.[A-Za-z]{2,4}){1,2} å¦‚ï¼š&#x73;&#115;&#x61;&#x68;&#x64;&#97;&#104;&#x64;&#x40;&#x73;&#x69;&#110;&#97;&#x2e;&#x63;&#x6f;&#109;&#x2e;&#99;&#110; å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨ è¡¨è¾¾å¼ åŠŸèƒ½ [\\u4e00-\\u9fa5] åŒ¹é…ä¸­æ–‡å­—ç¬¦ \\n\\s*\\r åŒ¹é…ç©ºç™½è¡Œ `&lt;(\\S*?)[^&gt;]&gt;.?&lt;/\\1&gt; &lt;.*? /&gt;` ^\\s*\\s*$ åŒ¹é…é¦–å°¾ç©ºç™½å­—ç¬¦ \\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)* åŒ¹é…Emailåœ°å€ [a-zA-z]+://[^\\s]* åŒ¹é…ç½‘å€URL \\d&#123;3&#125;-\\d&#123;8&#125;\\d&#123;4&#125;-\\d&#123;7&#125; åŒ¹é…å›½å†…ç”µè¯å·ç  [1-9][0-9]&#123;4,&#125; åŒ¹é…è…¾è®¯QQå· [1-9]\\d&#123;5&#125;(?!\\d) åŒ¹é…ä¸­å›½é‚®æ”¿ç¼–ç  \\d&#123;15&#125;\\d&#123;18&#125; åŒ¹é…èº«ä»½è¯ \\d+\\.\\d+\\.\\d+\\.\\d+ åŒ¹é…ipåœ°å€ æ‹¬å· https://www.bilibili.com/video/BV1ef4y1U7V4/?spm_id_from=333.788.recommend_more_video.-1 å·¥ä½œå­¦ä¹ ä¸­å„ç§çŽ¯å¢ƒçš„ä½¿ç”¨JAVAç¨‹åºä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³ç±»ä½äºŽï¼šjava.util.regexåŒ…ä¸‹é¢ï¼š ç±» Patternï¼š æ­£åˆ™è¡¨è¾¾å¼çš„ç¼–è¯‘è¡¨ç¤ºå½¢å¼ã€‚ Pattern p = Pattern.compile(r,int); //å»ºç«‹æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶å¯ç”¨ç›¸åº”æ¨¡å¼ ç±» Matcherï¼š é€šè¿‡è§£é‡Š Pattern å¯¹ character sequence æ‰§è¡ŒåŒ¹é…æ“ä½œçš„å¼•æ“Žã€‚ Matcher m = p.matcher(str); //åŒ¹é…strå­—ç¬¦ä¸² javaä»£ç åº”ç”¨æ­£åˆ™çš„æŸ¥æ‰¾ã€åˆ†ç»„ã€æ›¿æ¢ã€åˆ†å‰²ï¼š æŸ¥æ‰¾1234567891011121314151617181920212223242526272829303132package com.bjsxt.regex.test;import java.util.regex.Matcher;import java.util.regex.Pattern;/** * æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„åŸºæœ¬ç”¨æ³• */public class RegularTest &#123; public static void main(String[] args) &#123; //åœ¨è¿™ä¸ªå­—ç¬¦ä¸²ï¼šabcd1234ï¼Œæ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\\w+ //è¡¨è¾¾å¼å¯¹è±¡ Pattern p = Pattern.compile(&quot;\\\\w+&quot;); //åˆ›å»ºMatcherå¯¹è±¡ Matcher m = p.matcher(&quot;abcdï¿¥ï¿¥1234&quot;); //boolean result= m.matches(); //å°è¯•å°†æ•´ä¸ªå­—ç¬¦åºåˆ—ä¸Žè¯¥æ¨¡å¼åŒ¹é… //System.out.println(result); //boolean result= m.find(); //è¯¥æ–¹æ³•æ‰«æè¾“å…¥çš„åºåˆ—ï¼ŒæŸ¥æ‰¾ä¸Žè¯¥æ¨¡å¼åŒ¹é…çš„ä¸‹ä¸€ä¸ªå­åºåˆ— //System.out.println(m.find()); //System.out.println(m.group()); //System.out.println(m.find()); //System.out.println(m.group()); while(m.find())&#123; System.out.println(m.group()); //group(),group(0)åŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸² System.out.println(m.group(0)); &#125; &#125;&#125; åˆ†ç»„123456789101112131415161718192021222324package com.bjsxt.regex.test;import java.util.regex.Matcher;import java.util.regex.Pattern;/** * æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ä¸­åˆ†ç»„çš„å¤„ç† */public class Test2 &#123; public static void main(String[] args) &#123; //åœ¨è¿™ä¸ªå­—ç¬¦ä¸²ï¼šabcd1234ï¼Œæ˜¯å¦ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\\w+ //è¡¨è¾¾å¼å¯¹è±¡ Pattern p = Pattern.compile(&quot;([a-z]+)([0-9]+)&quot;); //åˆ›å»ºMatcherå¯¹è±¡ Matcher m = p.matcher(&quot;abc123%%abcd234%abcde4567&quot;); while(m.find())&#123; System.out.println(m.group()); //group(),group(0)åŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸² System.out.println(m.group(1)); System.out.println(m.group(2)); &#125; &#125;&#125; findç”¨æ³• https://www.bilibili.com/video/BV1Eq4y1E79W?p=4 æ›¿æ¢12345678910111213141516171819package com.bjsxt.regex.test;import java.util.regex.Matcher;import java.util.regex.Pattern;/** * æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„æ›¿æ¢æ“ä½œ */public class Test3 &#123; public static void main(String[] args) &#123; //è¡¨è¾¾å¼å¯¹è±¡ Pattern p = Pattern.compile(&quot;[0-9]&quot;); //åˆ›å»ºMatcherå¯¹è±¡ Matcher m = p.matcher(&quot;abc123%%abcd234%abcde4567&quot;); //æ›¿æ¢ String result= m.replaceAll(&quot;#&quot;); System.out.println(result); &#125;&#125; åˆ†å‰²123456789101112131415package com.bjsxt.regex.test;import java.util.regex.Matcher;import java.util.regex.Pattern;/** * æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„åˆ†å‰²å­—ç¬¦ä¸²çš„æ“ä½œ */public class Test4 &#123; public static void main(String[] args) &#123; String str = &quot;ab23jk123ji8890123asd&quot;; String[] arrs = str.split(&quot;\\\\d+&quot;); System.out.println(Arrays.toString(arrs)); &#125;&#125; æ‰‹å†™ç½‘ç»œçˆ¬è™«ï¼ˆåŸºæœ¬åŽŸç†&amp;ä¹±ç å¤„ç†ï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.bjsxt.regex.test;import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.net.MalformedURLException;import java.net.URL;import java.nio.charset.Charset;import java.util.ArrayList;import java.util.List;import java.util.regex.Matcher;import java.util.regex.Pattern;/** * ç½‘ç»œçˆ¬è™«å–é“¾æŽ¥ */public class WebSpiderTest &#123; /** * èŽ·å¾—urlStrå¯¹åº”çš„ç½‘é¡µçš„æºç å†…å®¹ * @param urlStr * @return */ public static String getURLContent(String urlStr,String charset)&#123; StringBuilder sb = new StringBuilder(); try &#123; URL url = new URL(urlStr); BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream(),Charset.forName(charset))); String temp = &quot;&quot;; while((temp=reader.readLine())!=null)&#123; sb.append(temp); &#125; &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return sb.toString(); &#125; public static List&lt;String&gt; getMatherSubstrs(String destStr,String regexStr)&#123; Pattern p = Pattern.compile(regexStr); //å–åˆ°çš„è¶…é“¾æŽ¥çš„åœ°å€ Matcher m = p.matcher(destStr); List&lt;String&gt; result = new ArrayList&lt;String&gt;(); while(m.find())&#123; result.add(m.group(1)); &#125; return result; &#125; public static void main(String[] args) &#123; String destStr = getURLContent(&quot;http://www.163.com&quot;,&quot;gbk&quot;); //Pattern p = Pattern.compile(&quot;&lt;a[\\\\s\\\\S]+?&lt;/a&gt;&quot;);//å–åˆ°çš„è¶…é“¾æŽ¥çš„æ•´ä¸ªå†…å®¹ List&lt;String&gt; result = getMatherSubstrs(destStr, &quot;href=\\&quot;([\\\\w\\\\s./:]+?)\\&quot;&quot;); for (String temp : result) &#123; System.out.println(temp); &#125; &#125;&#125; https://blog.csdn.net/qq_39636602/article/details/101236461 https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md https://regexr.com/ Asciiè¡¨https://www.ascii-code.com/ https://www.regular-expressions.info/tutorial.html å¯†ç åˆ¤æ–­æ–­è¨€å¿…é¡»åŒ…å«ä¸€ä¸ªå­—æ¯æˆ–å…¶ä»–çš„å­—ç¬¦ https://www.cnblogs.com/haoyul/p/12059737.html https://www.bilibili.com/video/BV1nY4y1q7Qr?spm_id_from=333.337.search-card.all.click https://www.bilibili.com/video/BV1oz4y1C7Uf?p=4 (?=.*[A-Za-z]+)[A-Za-z@\\/`â€™â€™â€˜,\\.\\(\\)\\-]{4,100}$ ä»Žè¿™ä¸ªå›¾å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦ä¸­é—´è‡³å°‘éœ€è¦ä¸€ä¸ªå­—æ¯ 123456^(?=.*?[A-Z])(?=.*?[^A-Za-z0-9]).&#123;6,12&#125;$(?=.*?[A-Z])(?=xxx)æ˜¯é›¶å®½æ–­è¨€ï¼Œè¡¨ç¤ºåŽé¢çš„å­—ç¬¦ä¸²å¿…é¡»ç¬¦åˆxxxè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½†æ˜¯ä¸æ¶ˆè€—å­—ç¬¦ä¸²ï¼Œå®žé™…åŒ¹é…å­—ç¬¦ä¸²çš„æ­£åˆ™æ˜¯.&#123;6,12&#125;å³6åˆ°12ä½å­—ç¬¦ (?=.*?[A-Z])è¡¨ç¤ºåŽé¢å¿…é¡»ç¬¦å·.*?[A-Z]è¿™ä¸ª ï¼Œå³å¿…é¡»æœ‰å¤§å†™å­—æ¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤º6åˆ°12ä½å­—ç¬¦ï¼Œå¿…é¡»æœ‰å¤§å†™å­—æ¯å’Œä¸æ˜¯å­—æ¯æ•°å­—çš„å­—ç¬¦ https://zhidao.baidu.com/question/1609169242401476667.html æ­£åˆ™ä¼˜å…ˆçº§ä¸‹å›¾ ä»Žä¸Šåˆ°ä¸‹ï¼Œä»Žå·¦åˆ°å³çš„ä¼˜å…ˆçº§ https://www.runoob.com/regexp/regexp-operator.html https://zhidao.baidu.com/question/1609169242401476667.html http://www.rexegg.com/regex-lookarounds.html kotlin regular12345fun validation(pattern: String, str: String?): Boolean &#123; return if (str.isNullOrEmpty()) &#123; false &#125; else Pattern.compile(pattern).matcher(str).matches()&#125; escape characteræ–¹æ‹¬å·ï¼ˆä¸­æ‹¬å·ï¼‰å†…çš„ç‰¹æ®Šå­—ç¬¦ä¸éœ€è¦è½¬ä¹‰ å³ä½¿åŠ äº†è½¬ä¹‰å­—ç¬¦ï¼Œä¹Ÿä¸ä¼šèµ·ä½œç”¨ [\\\\.] è¿˜æ˜¯è¡¨ç¤ºç‚¹ 1[\\^\\[\\-\\]\\\\] ä¼šæ”¹å˜å­—ç¬¦ç»„å«ä¹‰çš„æ‰éœ€è¦è½¬ä¹‰ 1ã€åæ–œçº¿å¿…é¡»è½¬ä¹‰ 2ã€æ–¹æ‹¬å·å¿…é¡»è½¬ä¹‰ 3ã€ã€Œ^ã€åœ¨é¦–å’Œã€Œ-ã€åœ¨ä¸­å¿…é¡»è½¬ä¹‰ æ‰€ä»¥ä»¥ä¸‹å¸¸è§çš„å­—ç¬¦æ˜¯ä¸éœ€è¦è½¬ä¹‰çš„ 123[aeiou][$.*+?&#123;&#125;()|][abc^123-] https://www.zhihu.com/question/62542695 https://juejin.cn/s/%E6%AD%A3%E5%88%99%E4%B8%AD%E6%8B%AC%E5%8F%B7%E4%B8%AD%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E9%9C%80%E8%A6%81%E8%BD%AC%E4%B9%89%E5%90%97 Regex named groups supporthttps://stackoverflow.com/questions/50048622/get-match-result-by-name-is-not-possible-when-using-java-10replace with find group(name) https://stackoverflow.com/questions/37088679/kotlin-regex-named-groups-support 1&quot;&quot;&quot;(\\w+?)(?&lt;num&gt;\\d+)&quot;&quot;&quot;.toRegex().matchEntire(&quot;area51&quot;)!!.groups[&quot;num&quot;]!!.value mather.group(â€œnameâ€)","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"DesignPattern_Decorator","slug":"DesignPattern-Decorator","date":"2020-07-12T04:37:59.000Z","updated":"2024-10-01T11:31:04.043Z","comments":true,"path":"2020/07/12/DesignPattern-Decorator/","link":"","permalink":"https://noteforme.github.io/2020/07/12/DesignPattern-Decorator/","excerpt":"","text":"è£…é¥°å™¨æ¨¡å¼ åº”ç”¨åœºæ™¯: æ‹“å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½æˆ–ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£. ä¼˜ç‚¹: ä¸æ”¹å˜åŽŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹ç»™ä¸€ä¸ªå¯¹è±¡æ‹“å±•åŠŸèƒ½ ä½¿ç”¨ä¸åŒçš„ç»„åˆå®žçŽ°ä¸åŒçš„æ•ˆæžœ ç¬¦åˆå¼€é—­åŽŸåˆ™ 1234567891011121314151617181920212223242526272829interface Component&#123; void operation();&#125;// å…·ä½“ç±»class ConcreteComponent implements Component&#123; @Override public void operation() &#123; System.out.println(&quot;æ‹ç…§&quot;); &#125;&#125;//å¯¹å…·ä½“ç±»çš„æ‹“å±•class ConcreteComponent1 implements Component &#123; private Component component; public ConcreteComponent1(Component component) &#123; this.component = component; &#125; @Override public void operation() &#123; System.out.println(&quot;ç¾Žé¢œ&quot;); component.operation(); &#125;&#125;//æµ‹è¯•new ConcreteComponent1(new ConcreteComponent()).operation(); ä¹Ÿå¯ä»¥æŠŠè£…é¥°å™¨æŠ½è±¡å‡ºæ¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354interface Component&#123; void operation();&#125;// å…·ä½“ç±»class ConcreateComponent implements Component&#123; @Override public void operation() &#123; System.out.println(&quot;æ‹ç…§&quot;); &#125;&#125;abstract class Decorator implements Component&#123; Component component; public Decorator(Component component) &#123; this.component = component; &#125; @Override public void operation() &#123; component.operation(); &#125;&#125;//å¯¹å…·ä½“ç±»çš„æ‹“å±•class ConcreateComponent1 extends Decorator&#123; public ConcreateComponent1(Component component) &#123; super(component); &#125; @Override public void operation() &#123; System.out.println(&quot;ç¾Žé¢œ&quot;); super.operation(); &#125;&#125;class ConcreateComponent2 extends Decorator&#123; public ConcreateComponent2(Component component) &#123; super(component); &#125; @Override public void operation() &#123; System.out.println(&quot;å‘µå‘µ&quot;); super.operation(); &#125;&#125;//æµ‹è¯• ConcreateComponent2 concreateComponent1 = new ConcreateComponent2(new ConcreateComponent1(new ConcreateComponent())); concreateComponent1.operation(); https://www.bilibili.com/video/BV1hp4y1D7MP?from=search&amp;seid=6785978722248254154 https://www.bilibili.com/video/BV1Hv411r7uN?p=2","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[]},{"title":"LiveData","slug":"LiveData","date":"2020-06-15T03:20:42.000Z","updated":"2023-01-02T03:31:39.094Z","comments":true,"path":"2020/06/15/LiveData/","link":"","permalink":"https://noteforme.github.io/2020/06/15/LiveData/","excerpt":"","text":"https://www.bilibili.com/video/BV19B4y1N7iV ä¼˜åŠ¿ ç¡®ä¿ç•Œé¢ç¬¦åˆæ•°æ®çŠ¶æ€ ä¸ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ ä¸ä¼šå› Activityåœæ­¢è€Œå¯¼è‡´å´©æºƒ ä¸å†éœ€è¦æ‰‹åŠ¨å¤„ç†ç”Ÿå‘½å‘¨æœŸ æ•°æ®å§‹ç»ˆä¿æŒæœ€æ–°çŠ¶æ€ é€‚å½“çš„é…ç½®æ›´æ”¹ å…±äº«èµ„æº stiky eventhttps://juejin.cn/post/7019734258793054238 savedStateHandle ä½¿ç”¨ æ¨¡æ‹Ÿapp killed https://developer.android.com/codelabs/android-lifecycles#6 12adb shell ps -A |grep lifecycleadb shell am kill 1. ä¸ºä»€ä¹ˆæœ‰ç²˜æ€§äº‹ä»¶Googleå®˜æ–¹æ–‡æ¡£ä¸­æè¿°ï¼Œè®¾å¤‡æ¨ªç«–å±åˆ‡æ¢çš„æ—¶å€™ï¼Œç•Œé¢é”€æ¯é‡å»ºï¼Œä½†æ˜¯Activityç”Ÿå‘½å‘¨æœŸå¹¶æœªç»“æŸï¼Œæ—‹è½¬åŽæ–°å»ºçš„ç©ºé¡µé¢ä¸Šæ•°æ®éœ€è¦é‡æ–°å¡«å……ï¼Œæ›¾ç»çš„åŽå°Activityè¿”å›žåˆ°å‰å°åŽç«‹å³æŽ¥å—æœ€æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥LiveDataåœ¨è¢«å†æ¬¡è§‚å¯Ÿæ—¶ä¼šç«‹å³æŽ¨é€æ•°æ®æ›´æ–°ã€‚ ç²˜æ€§å®žä¾‹https://juejin.cn/post/6856688280231444487 æ—‹è½¬å±å¹•ï¼Œä¸ºä»€ä¹ˆèƒ½ä¿æŒæ•°æ® 12345678910111213141516static class ObserverWithState &#123; State mState; LifecycleEventObserver mLifecycleObserver; ObserverWithState(LifecycleObserver observer, State initialState) &#123; mLifecycleObserver = Lifecycling.lifecycleEventObserver(observer); mState = initialState; &#125; void dispatchEvent(LifecycleOwner owner, Event event) &#123; State newState = event.getTargetState(); mState = min(mState, newState); mLifecycleObserver.onStateChanged(owner, event); // onstartçŠ¶æ€ èƒ½ç»§ç»­å‘é€ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ–¹æ³•è§¦å‘çš„ã€‚ mState = newState; &#125;&#125; livedataå’Œviewmodelå…³ç³»viewmodelä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥é¡µé¢ livedata activeçŠ¶æ€e LiveData objects only consider subscriptions as active when their respective lifecycle owner is either STARTED or RESUMED. STARTED ï¼Œ 1234@Overrideboolean shouldBeActive() &#123; return mOwner.getLifecycle().getCurrentState().isAtLeast(STARTED);&#125; 12345678910class EnumTest &#123; @Test fun compareTest()&#123; println(&quot;DESTROYED &quot;+ State.DESTROYED.isAtLeast(State.STARTED)) println(&quot;INITIALIZED &quot;+ State.INITIALIZED.isAtLeast(State.STARTED)) println(&quot;CREATED &quot;+ State.CREATED.isAtLeast(State.STARTED)) println(&quot;STARTED &quot;+ State.STARTED.isAtLeast(State.STARTED)) println(&quot;RESUMED &quot;+ State.RESUMED.isAtLeast(State.STARTED)) &#125;&#125; DESTROYED falseINITIALIZED falseCREATED falseSTARTED trueRESUMED true https://blog.csdn.net/qq_44076155/article/details/121471697 https://juejin.cn/post/6955309901363036191 https://juejin.cn/post/7148049769057746952 ä»Žä¸Šé¢ä¾‹å­å¯ä»¥çŸ¥é“LiveDataçš„æ ¸å¿ƒä¸»è¦åœ¨äºŽè¿™ä¸¤æ­¥ï¼ŒliveData.observe()ä»¥åŠliveData.postValue()ï¼Œä¸€ä¸ªæ˜¯æ³¨å†Œè§‚å¯Ÿè€…ï¼Œä¸€ä¸ªæ˜¯å‘é€é€šçŸ¥ã€‚é‚£ä¹ˆä¸‹é¢çš„è§£æžå°±å°†è¿™ä¸¤ä¸ªå‡½æ•°ä½œä¸ºåˆ‡å…¥ç‚¹ã€‚ mLastVersion : è§‚å¯Ÿè€… mVersion : è¢«è§‚å¯Ÿè€… 1.LiveData.observe()ä»ŽliveData.observe()è·Ÿè¸ªè¿›åŽ»: LiveData.java 123456789101112131415161718192021222324252627 private SafeIterableMap&lt;Observer&lt;? super T&gt;, ObserverWrapper&gt; mObservers = new SafeIterableMap&lt;&gt;(); ...... @MainThread public void observe(@NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer) &#123; assertMainThread(&quot;observe&quot;); //âœ… ç¬¬ä¸€éƒ¨åˆ† if (owner.getLifecycle().getCurrentState() == DESTROYED) &#123; // ignore return; &#125; //âœ… ç¬¬äºŒéƒ¨åˆ† LifecycleBoundObserver wrapper = new LifecycleBoundObserver(owner, observer); ObserverWrapper existing = mObservers.putIfAbsent(observer, wrapper); if (existing != null &amp;&amp; !existing.isAttachedTo(owner)) &#123; throw new IllegalArgumentException(&quot;Cannot add the same observer&quot; + &quot; with different lifecycles&quot;); &#125; if (existing != null) &#123; return; &#125; //âœ… ç¬¬ä¸‰éƒ¨åˆ† owner.getLifecycle().addObserver(wrapper); &#125;å¤åˆ¶ä»£ç  observeæ–¹æ³•ä¼ æœ‰ä¸¤ä¸ªå‚æ•°LifecycleOwnerå’ŒObserverï¼ŒLifecycleOwneræ˜¯ä¸€ä¸ªå…·æœ‰Androidç”Ÿå‘½å‘¨æœŸçš„ç±»ï¼Œä¸€èˆ¬ä¼ å…¥çš„æ˜¯Activityå’ŒFragmentï¼ŒObserveræ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå†…éƒ¨å­˜åœ¨void onChanged(T t)æ–¹æ³•ã€‚ âœ… ç¬¬ä¸€éƒ¨åˆ†ï¼š observeå†…éƒ¨ä¸€å¼€å§‹å°±å­˜åœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„åˆ¤æ–­ï¼Œ 1if (owner.getLifecycle().getCurrentState() &#x3D;&#x3D; DESTROYED) &#123;return;&#125; å½“ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå·²ç»Destroyäº†ï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å†ç»§ç»­èµ°ä¸‹åŽ»ï¼Œåˆ™ç›´æŽ¥returnã€‚åœ¨è¿™é‡Œï¼ŒLiveDataå¯¹ç”Ÿå‘½å‘¨æœŸçš„æ„ŸçŸ¥ä¹Ÿå°±æ…¢æ…¢æ˜¾çŽ°å‡ºæ¥äº†ã€‚ âœ… ç¬¬äºŒéƒ¨åˆ†ï¼š é¦–å…ˆä»¥LifecycleOwnerå’ŒObserverä½œä¸ºå‚æ•°åˆ›å»ºäº†ä¸€ä¸ªLifecycleBoundObserverå¯¹è±¡ï¼ŒæŽ¥ç€ä»¥Observerä¸ºkeyï¼Œæ–°åˆ›å»ºçš„LifecycleBoundObserverä¸ºvalueï¼Œå­˜å‚¨åˆ°mObserversè¿™ä¸ªmapä¸­ã€‚åœ¨åŽé¢LiveData postValueä¸­ä¼šéåŽ†å‡ºè¯¥mapçš„valueå€¼ObserverWrapperï¼ŒèŽ·å–ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€ï¼Œå·²æ­¤çŠ¶æ€æ¥å†³å®šåˆ†ä¸åˆ†å‘é€šçŸ¥ï¼ˆè¿™éƒ¨åˆ†è¯¦æƒ…è§â€œç¬¬äºŒå°èŠ‚postValue()â€ï¼‰ é‚£LifecycleBoundObserveræ˜¯ä»€ä¹ˆï¼Ÿ 123456789101112class LifecycleBoundObserver extends ObserverWrapper implements LifecycleEventObserver &#123; @NonNull final LifecycleOwner mOwner; LifecycleBoundObserver(@NonNull LifecycleOwner owner, Observer&lt;? super T&gt; observer) &#123; super(observer); mOwner = owner; &#125; ....... &#125;å¤åˆ¶ä»£ç  ä»Žæºç å¯ä»¥çœ‹åˆ°ï¼ŒLifecycleBoundObserverç»§æ‰¿ObserverWrapperå¹¶ä¸”å®žçŽ°äº†LifecycleEventObserverçš„æŽ¥å£ï¼ŒLifecycleEventObserveræ˜¯ç›‘å¬ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ›´æ”¹å¹¶å°†å…¶åˆ†æ´¾ç»™æŽ¥æ”¶æ–¹çš„ä¸€ä¸ªæŽ¥å£ï¼Œè€Œåœ¨LifecycleBoundObserverçš„æž„é€ å‡½æ•°ä¸­å°†observerä¼ ç»™äº†çˆ¶ç±»ObserverWrapperã€‚LifecycleBoundObserverå…¶å®žåªæ˜¯åŒ…è£¹ç€LifecycleOwnerå’ŒObserverå¾—ä¸€ä¸ªç±»ï¼Œå…¶ä¸­çš„å®žçŽ°æœ‰ç‚¹ä»£ç†æ¨¡å¼çš„å‘³é“ã€‚ âœ… ç¬¬ä¸‰éƒ¨åˆ†ï¼š owner.getLifecycle().addObserver(wrapper)å°†æ–°åˆ›å»ºçš„LifecycleBoundObserveræ·»åŠ åˆ°Lifecycleä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ—¶å€™è§‚å¯Ÿè€…æ³¨å†ŒæˆåŠŸï¼Œå½“LifecycleOwnerä¹Ÿå°±æ˜¯ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¹Ÿä¼šé€šçŸ¥åˆ°æ‰€åŒ¹é…çš„observerã€‚ åˆ°è¿™é‡Œï¼ŒUIå±‚viewModel.liveData.observe(this, object:Observer&lt;String&gt; &#123; override fun onChanged(value: String) &#123;&#125; &#125;)æ³¨å†Œè§‚å¯Ÿè€…çš„å†…éƒ¨è§£æžä¹Ÿå°±å¤§è‡´æ¸…æ¥šäº†ã€‚ 2.postValue()liveData.postValue()æ˜¯ä½œä¸ºä¸€ä¸ªå‘å°„æ–¹æ¥é€šçŸ¥æ•°æ®æ”¹å˜ï¼Œå…¶å†…éƒ¨åˆåšäº†å“ªäº›å·¥ä½œï¼ŸæŽ¥ä¸‹æ¥å°±ä¸€æŽ¢ç©¶ç«Ÿã€‚ç›´æŽ¥ä»ŽpostValueä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†åœ¨äºŽå°†å‚æ•°valueèµ‹å€¼ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡æºç å¼€å§‹ï¼š 123456789101112 protected void postValue(T value) &#123; boolean postTask; synchronized (mDataLock) &#123; postTask = mPendingData == NOT_SET; mPendingData = value; &#125; if (!postTask) &#123; return; &#125; ArchTaskExecutor.getInstance().postToMainThread(mPostValueRunnable); &#125;å¤åˆ¶ä»£ç  postValueä¸­é¦–å…ˆå°†å‚æ•°valueèµ‹å€¼ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡mPendingDataï¼Œå®ƒçš„åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè€ŒmPendingDataåªæ˜¯ä½œä¸ºä¸€ä¸ªä¸­é—´åª’ä»‹æ¥å­˜å‚¨valueçš„å€¼ï¼Œåœ¨åŽç»­çš„æ“ä½œä¸­ä¼šç”¨åˆ°ï¼Œæˆ‘ä»¬å°±æš‚æ—¶å…ˆè®°ä½å®ƒã€‚ åœ¨æœ€åŽå°±æ˜¯ä¸€ä¸ªå°†çº¿ç¨‹åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹çš„æ“ä½œï¼Œä¸»è¦çœ‹mPostValueRunnableçš„å®žçŽ°ï¼š 12345678910111213 private final Runnable mPostValueRunnable = new Runnable() &#123; @SuppressWarnings(&quot;unchecked&quot;) @Override public void run() &#123; Object newValue; synchronized (mDataLock) &#123; newValue = mPendingData; mPendingData = NOT_SET; &#125; setValue((T) newValue); &#125; &#125;;å¤åˆ¶ä»£ç  åœ¨Runnableä¸­,mPendingDataèµ‹å€¼ç»™äº†ä¸´æ—¶å˜é‡newValueï¼Œæœ€åŽè°ƒç”¨äº†setValueï¼ˆï¼‰æ–¹æ³•ã€‚æˆ‘ä»¬éƒ½çŸ¥é“LiveDataå‘é€é€šçŸ¥å¯ä»¥ä½¿ç”¨PostValueæˆ–è€…SetValueï¼Œè€Œä»–ä¸¤çš„åŒºåˆ«å°±åœ¨äºŽï¼ŒPostValueå¯ä»¥åœ¨ä»»æ„çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œè€ŒSetValueåªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œå› ä¸ºPostValueå¤šäº†ä¸€æ­¥ä¸Šé¢åˆ‡æ¢ä¸»çº¿ç¨‹çš„æ“ä½œã€‚ OKï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯PostValue/SetValueæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ 123456789101112131415161718192021222324252627282930313233343536 @MainThread protected void setValue(T value) &#123; assertMainThread(&quot;setValue&quot;); mVersion++; mData = value; dispatchingValue(null); &#125; ....... void dispatchingValue(@Nullable ObserverWrapper initiator) &#123; if (mDispatchingValue) &#123; mDispatchInvalidated = true; return; &#125; mDispatchingValue = true; do &#123; mDispatchInvalidated = false; if (initiator != null) &#123; considerNotify(initiator); initiator = null; &#125; else &#123; //âœ… ç¬¬äºŒéƒ¨åˆ† for (Iterator&lt;Map.Entry&lt;Observer&lt;? super T&gt;, ObserverWrapper&gt;&gt; iterator = mObservers.iteratorWithAdditions(); iterator.hasNext(); ) &#123; considerNotify(iterator.next().getValue()); if (mDispatchInvalidated) &#123; break; &#125; &#125; &#125; &#125; while (mDispatchInvalidated); mDispatchingValue = false; &#125;å¤åˆ¶ä»£ç  åœ¨setValueä¸­ï¼Œå‚æ•°valueå°†å€¼èµ‹ç»™äº†ä¸€ä¸ªå…¨å±€å˜é‡mDataï¼Œè€Œè¿™ä¸ªmDataæœ€åŽå°†é€šè¿‡mObserver.onChanged((T) mData);å°†éœ€è¦ä¿®æ”¹çš„valueå€¼åˆ†å‘ç»™äº†UIã€‚æœ€åŽè°ƒç”¨ä¼ å…¥ä¸€ä¸ªnullè°ƒç”¨dispatchingValueæ–¹æ³•ã€‚ ç”±äºŽdispatchingValueé‡Œçš„å‚æ•°ä¸ºnullï¼Œä¹Ÿå°±é¡ºç†æˆç« çš„èµ°åˆ°äº†âœ… ç¬¬äºŒéƒ¨åˆ†ã€‚elseä¸€è¿›å…¥å°±æ˜¯è¿­ä»£å™¨åœ¨éåŽ†mObserversï¼Œè€ŒmObserversåœ¨ç¬¬ä¸€å°èŠ‚â€œ1.LiveData.observe()â€ä¸­è¯´å¾—å¾ˆæ¸…æ¥šï¼Œå®ƒä½œä¸ºä¸€ä¸ªmapï¼Œå­˜å‚¨äº†Observerå’ŒObserverWrapperã€‚é€šè¿‡éåŽ†ï¼Œå°†æ¯ä¸ªè§‚å¯Ÿè€…æ‰€åŒ¹é…çš„ObserverWrapperä½œä¸ºå‚æ•°ä¼ ç»™äº†considerNotifyï¼ˆï¼‰æ–¹æ³•ã€‚ 1234567891011121314151617181920private void considerNotify(ObserverWrapper observer) &#123; if (!observer.mActive) &#123; return; &#125; // Check latest state b4 dispatch. Maybe it changed state but we didn&#x27;t get the event yet. // // we still first check observer.active to keep it as the entrance for events. So even if // the observer moved to an active state, if we&#x27;ve not received that event, we better not // notify for a more predictable notification order. if (!observer.shouldBeActive()) &#123; observer.activeStateChanged(false); return; &#125; if (observer.mLastVersion &gt;= mVersion) &#123; return; &#125; observer.mLastVersion = mVersion; observer.mObserver.onChanged((T) mData); &#125;å¤åˆ¶ä»£ç  è€Œåœ¨considerNotify()ä¸­ï¼Œå…ˆé€šè¿‡observeræ¥èŽ·å–ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€ï¼Œå¦‚æžœå¤„äºŽéžæ´»åŠ¨çŠ¶æ€ï¼Œåˆ™æ‹’ç»å‘èµ·é€šçŸ¥ã€‚åœ¨è¯¥æ–¹æ³•çš„æœ€åŽï¼Œ observer.mObserver.onChanged((T) mData)ï¼Œæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè¿™å°±æ˜¯UIå±‚ä¸€å¼€å§‹å°±å®žçŽ°çš„æŽ¥å£ï¼Œè€Œå°±åœ¨è¿™æ‰¾åˆ°äº†æœ€åŽçš„å‘é€æ–¹ã€‚ https://juejin.cn/post/6955309901363036191 ç²˜æ€§äº‹ä»¶åŽŸç†æ•°æ®ç²˜æ€§å®žä¾‹ https://juejin.cn/post/7148049769057746952 æˆ–è€…åˆ‡æ¢å±å¹• turn the android phone on the horizontal ç»è¿‡äº†è§£å’Œä½¿ç”¨ view model,databidingåŽï¼Œæˆ‘è§‰å¾—è¿™ä¸ªä¸æ˜¯å®˜æ–¹ç•™çš„å‘ï¼Œåœ¨ç‰¹å®šçš„åœºæ™¯å¯èƒ½è¿˜éœ€è¦è¿™æ ·åšï¼Œæˆ‘èŽ·å–æ‰‹çŽ¯ç¡çœ æ•°æ®æ­¤æ—¶æœ‰å…¶ä»–fragmentè¿˜æ²¡åˆ›å»ºï¼Œæˆ‘å°±éœ€è¦åˆ›å»ºåŽæ‰å°±ç›‘å¬åˆ°æ•°æ®ã€‚ æ–¹æ³•1æˆ‘ä»¬èƒ½ä¸èƒ½å†åˆ›å»ºæ–°çš„ObserverWrapperçš„æ—¶å€™ï¼Œç›´æŽ¥æŠŠmVersionçš„å€¼èµ‹ç»™mLastVersionï¼Œè¿™æ ·å°±ç¬¦åˆ(observer.mLastVersion &gt;= mVersion)è¿™ä¸€æ¡ä»¶äº†ï¼Œå°±ä¸ä¼šå†ç»§ç»­æ‰§è¡ŒonChangedæ–¹æ³•äº† https://blog.csdn.net/geyuecang/article/details/89028283 singleLiveEventå¤šä¸ªè§‚å¯Ÿè€…ï¼Œè¿™ä¸ªå°±ä¸å¥½ç”¨äº†ã€‚ å…¶å®žè¿™ä¸ªæ–¹æ³•è§£å†³çš„å¹¶ä¸æ˜¯ç²˜æ€§äº‹ä»¶çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œæ•°æ®å€’çŒâ€çš„é—®é¢˜ã€‚â€œæ•°æ®å€’çŒâ€ä¸€è¯å‡ºè‡ªKunMinXçš„Blogé‡å­¦å®‰å“ï¼šLiveData æ•°æ®å€’çŒ èƒŒæ™¯ç¼˜ç”±å…¨è²Œ ç‹¬å®¶è§£æž,å³åœ¨setValueåŽ,observeå¯¹æ­¤æ¬¡setçš„valueå€¼ä¼šè¿›è¡Œå¤šæ¬¡æ¶ˆè´¹ã€‚æ¯”å¦‚è¿›è¡Œç¬¬äºŒæ¬¡observeçš„æ—¶å€™èŽ·å–åˆ°çš„æ•°æ®æ˜¯ç¬¬ä¸€æ¬¡çš„æ—§æ•°æ®ã€‚è¿™æ ·ä¼šå¸¦æ¥ä¸å¯é¢„æœŸçš„åŽæžœã€‚ https://github.com/android/architecture-samples/blob/dev-todo-mvvm-live/todoapp/app/src/main/java/com/example/android/architecture/blueprints/todoapp/SingleLiveEvent.java m.compareAndSet(a,b),å¦‚æžœm==a ,è¿”å›žtrueï¼ŒåŒæ—¶å°†mç½®ä¸ºbï¼› å¦‚æžœm==bï¼Œè¿”å›žfalseã€‚ æ–¹æ³•3UnPeekLiveData 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class ProtectedUnPeekLiveData&lt;T&gt; extends LiveData&lt;T&gt; &#123; protected boolean isAllowNullValue; private final HashMap&lt;Integer, Boolean&gt; observers = new HashMap&lt;&gt;(); public void observeInActivity(@NonNull AppCompatActivity activity, @NonNull Observer&lt;? super T&gt; observer) &#123; LifecycleOwner owner = activity; Integer storeId = System.identityHashCode(observer);//æºç è¿™é‡Œæ˜¯activity.getViewModelStore()ï¼Œæ˜¯ä¸ºäº†ä¿è¯åŒä¸€ä¸ªViewModelçŽ¯å¢ƒä¸‹&quot;å”¯ä¸€å¯ä¿¡æº&quot; observe(storeId, owner, observer); &#125; private void observe(@NonNull Integer storeId, @NonNull LifecycleOwner owner, @NonNull Observer&lt;? super T&gt; observer) &#123; if (observers.get(storeId) == null) &#123; observers.put(storeId, true); &#125; super.observe(owner, t -&gt; &#123; if (!observers.get(storeId)) &#123; observers.put(storeId, true); if (t != null || isAllowNullValue) &#123; observer.onChanged(t); &#125; &#125; &#125;); &#125; @Override protected void setValue(T value) &#123; if (value != null || isAllowNullValue) &#123; for (Map.Entry&lt;Integer, Boolean&gt; entry : observers.entrySet()) &#123; entry.setValue(false); &#125; super.setValue(value); &#125; &#125; protected void clear() &#123; super.setValue(null); &#125;&#125; ï¼Œä¸ºæ¯ä¸ªä¼ å…¥çš„observerå¯¹è±¡æºå¸¦ä¸€ä¸ªå¸ƒå°”ç±»åž‹çš„å€¼ï¼Œä½œä¸ºå…¶æ˜¯å¦èƒ½è¿›å…¥observeæ–¹æ³•çš„å¼€å…³ã€‚æ¯å½“æœ‰ä¸€ä¸ªæ–°çš„observerå­˜è¿›æ¥çš„æ—¶å€™ï¼Œå¼€å…³é»˜è®¤å…³é—­ã€‚ æ¯æ¬¡setValueåŽï¼Œæ‰“å¼€æ‰€æœ‰Observerçš„å¼€å…³ï¼Œå…è®¸æ‰€æœ‰observeæ‰§è¡Œã€‚ è¿™ä¸ªç¡®å®žæ¸…æ™°ï¼Œç®€å• https://www.jianshu.com/p/d0244c4c7cc9 https://juejin.cn/post/6844903623252508685 æ–¹æ³•412345678910111213141516171819202122232425/** * Used as a wrapper for data that is exposed via a LiveData that represents an event. */open class Event&lt;out T&gt;(private val content: T) &#123; var hasBeenHandled = false private set // Allow external read but not write /** * Returns the content and prevents its use again. */ fun getContentIfNotHandled(): T? &#123; return if (hasBeenHandled) &#123; null &#125; else &#123; hasBeenHandled = true content &#125; &#125; /** * Returns the content, even if it&#x27;s already been handled. */ fun peekContent(): T = content&#125; UnPeekLiveData æˆ–è€… ELiveData https://juejin.im/post/5b2b1b2cf265da5952314b63 https://www.jianshu.com/p/79d909b6f8bd https://juejin.im/post/6892704779781275662 https://www.jianshu.com/p/d0244c4c7cc9 LifeCycleé€šè¿‡lifecycleæ—‹è½¬å±å¹•åŽï¼Œé‡æ–°å‘é€äº‹ä»¶æ¥åˆ†æžï¼Œç²˜æ€§äº‹ä»¶ã€‚https://developer.android.com/codelabs/android-lifecycles#2","categories":[{"name":"Jetpack","slug":"Jetpack","permalink":"https://noteforme.github.io/categories/Jetpack/"}],"tags":[]},{"title":"THINKING","slug":"THINKING","date":"2020-05-19T01:55:11.000Z","updated":"2022-06-12T03:17:58.728Z","comments":true,"path":"2020/05/19/THINKING/","link":"","permalink":"https://noteforme.github.io/2020/05/19/THINKING/","excerpt":"","text":"the way learning ä¸€å¹´åŽç”¨ä¸åˆ°ï¼Œå°±ä¸ç”¨å­¦ã€‚ https://www.bilibili.com/video/BV1bY4y1Y7WR/?spm_id_from=333.788 how to use(video blog) å­¦ä¹ äº§ç”Ÿä»·å€¼ï¼Œå¸¦ç€ç›®æ ‡å­¦ä¹ . https://juejin.im/post/5eb168e9f265da7bb65fb27a https://www.mifengtd.cn/articles/runningcheese-gtd-system.html https://github.com/JsonChao/Awesome-Android-Notebook I donâ€™t know what to do if I prevent me think code or tech in my life. I think i love tech ,but it couldâ€™t support my career now.I lâ€™m look forword is that what I can do . CodeReview","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[{"name":"THINK","slug":"THINK","permalink":"https://noteforme.github.io/tags/THINK/"}]},{"title":"ActivityLayout","slug":"ActivityLayout","date":"2020-05-08T01:54:32.000Z","updated":"2023-09-02T07:27:16.876Z","comments":true,"path":"2020/05/08/ActivityLayout/","link":"","permalink":"https://noteforme.github.io/2020/05/08/ActivityLayout/","excerpt":"","text":"Activityç»˜åˆ¶æµç¨‹ https://blog.csdn.net/yanbober/article/details/45970721?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160657696619724827674302%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160657696619724827674302&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v28-10-45970721.pc_first_rank_v2_rank_v28&amp;utm_term=setContentView&amp;spm=1018.2118.3001.4449 https://mp.weixin.qq.com/s/ii07I8Cy80MqjsqKkns_WQ https://www.jianshu.com/p/b5b1b8e1747f å¸¦ä½ æŽ¢ç©¶ LayoutInflater å¸ƒå±€è§£æžåŽŸç†https://juejin.cn/post/6886052422260228103","categories":[],"tags":[{"name":"XML","slug":"XML","permalink":"https://noteforme.github.io/tags/XML/"}]},{"title":"DataStructure","slug":"DataStructure","date":"2020-05-06T01:46:22.000Z","updated":"2023-10-28T12:18:05.085Z","comments":true,"path":"2020/05/06/DataStructure/","link":"","permalink":"https://noteforme.github.io/2020/05/06/DataStructure/","excerpt":"","text":"æ— è®ºä»€ä¹ˆéš¾é¢˜ï¼Œé™ä½Žå¤æ‚åº¦çš„æ–¹æ³•å°±æ˜¯è¿™ä¸‰ä¸ªæ­¥éª¤ã€‚åªè¦ä½ èƒ½æ·±å…¥ç†è§£è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±èƒ½æŠŠé—®é¢˜è¿Žåˆƒè€Œè§£ã€‚ ç¬¬ä¸€æ­¥ï¼Œæš´åŠ›è§£æ³•ã€‚åœ¨æ²¡æœ‰ä»»ä½•æ—¶é—´ã€ç©ºé—´çº¦æŸä¸‹ï¼Œå®Œæˆä»£ç ä»»åŠ¡çš„å¼€å‘ã€‚ ç¬¬äºŒæ­¥ï¼Œæ— æ•ˆæ“ä½œå¤„ç†ã€‚å°†ä»£ç ä¸­çš„æ— æ•ˆè®¡ç®—ã€æ— æ•ˆå­˜å‚¨å‰”é™¤ï¼Œé™ä½Žæ—¶é—´æˆ–ç©ºé—´å¤æ‚åº¦ã€‚ ç¬¬ä¸‰æ­¥ï¼Œæ—¶ç©ºè½¬æ¢ã€‚è®¾è®¡åˆç†æ•°æ®ç»“æž„ï¼Œå®Œæˆæ—¶é—´å¤æ‚åº¦å‘ç©ºé—´å¤æ‚åº¦çš„è½¬ç§»ã€‚ æ—¢ç„¶è¯´è¿™æ˜¯è¿™é—¨ä¸“æ çš„æ€»çº²ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶åŽç»­çš„å­¦ä¹ éƒ½æ˜¯åœ¨è¿™ä¸ªæ€»çº²ä½“ç³»çš„æ¡†æž¶ä¸­ã€‚ç¬¬ä¸€æ­¥çš„æš´åŠ›è§£æ³•æ²¡æœ‰å¤ªå¤šçš„å¥—è·¯ï¼Œåªè¦å›´ç»•ä½ é¢ä¸´çš„é—®é¢˜å‡ºå‘ï¼Œå¤§èƒ†å‘æŒ¥æƒ³è±¡åŽ»å°è¯•è§£å†³å³å¯ã€‚ç¬¬äºŒæ­¥çš„æ— æ•ˆæ“ä½œå¤„ç†ä¸­ï¼Œä½ éœ€è¦å­¦ä¼šå¹¶æŽŒæ¡é€’å½’ã€äºŒåˆ†æ³•ã€æŽ’åºç®—æ³•ã€åŠ¨æ€è§„åˆ’ç­‰å¸¸ç”¨çš„ç®—æ³•æ€ç»´ã€‚ç¬¬ä¸‰æ­¥çš„æ—¶ç©ºè½¬æ¢ï¼Œä½ éœ€è¦å¯¹æ•°æ®çš„æ“ä½œè¿›è¡Œç»†åˆ†ï¼Œå…¨é¢æŽŒæ¡å¸¸è§æ•°æ®ç»“æž„çš„åŸºç¡€çŸ¥è¯†ã€‚å†å›´ç»•é—®é¢˜ï¼Œæœ‰é’ˆå¯¹æ€§çš„è®¾è®¡æ•°æ®ç»“æž„ã€é‡‡ç”¨åˆç†çš„ç®—æ³•æ€ç»´ï¼ŒåŽ»ä¸æ–­å®Œæˆæ—¶ç©ºè½¬ç§»ï¼Œé™ä½Žæ—¶é—´å¤æ‚åº¦ã€‚ https://github.com/labuladong/fucking-algorithm å¤æ‚åº¦ æ¶ˆè€—è®¡ç®—æ—¶é—´å’Œè®¡ç®—ç©ºé—´ æ—¶é—´å¤æ‚åº¦ å¯¹æ•°é˜¶1234int count =1;while(count &lt; n)&#123; count = count * 2;&#125; ä»£ç çœ‹åˆ° 2 * 2 * 2 â€¦ æœ€ç»ˆç¦»nå¾ˆè¿‘ï¼Œæœ€ç»ˆé€€å‡ºå¾ªçŽ¯ï¼Œ2^x =n ,å¾—åˆ° x = log2^n,æ‰€ä»¥è¿™ä¸ªå¾ªçŽ¯æ—¶é—´å¤æ‚åº¦ä¸ºO(logn) ç©ºé—´å¤æ‚åº¦ç©ºé—´æ–¹é¢ä¸»è¦ä½“çŽ°åœ¨è®¡ç®—è¿‡ç¨‹ä¸­,å¯¹äºŽå­˜å‚¨èµ„æºçš„æ¶ˆè€—æƒ…å†µ é“¾è¡¨â€‹ p,qæŒ‡å‘çš„éƒ½æ˜¯æ•´ä½“ 1234567891011121314typedef struct node&#123; int data; // å­˜å‚¨æ•°æ®æœ¬èº« struct node *pNext; //pNextå­˜å‚¨ å®ƒæŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ&#125; NODE, *PNODE;// NODEç­‰ä»·äºŽstruct node//PNODEç­‰ä»·äºŽstruct node*//å°†åŠ¨æ€åˆ†é…çš„æ–°èŠ‚ç‚¹çš„åœ°å€èµ‹ç»™pPNODE p = (PNODE)malloc(sizeof(NODE));free(p) //åˆ é™¤pæŒ‡å‘èŠ‚ç‚¹æ‰€å çš„å†…å­˜ï¼Œä¸æ˜¯åˆ é™¤pæœ¬èº«æ‰€å çš„å†…å­˜p-&gt;pNext; //pæ‰€æŒ‡å‘ç»“æž„ä½“å˜é‡ä¸­pNextæˆå‘˜æœ¬èº« æ’å…¥qèŠ‚ç‚¹ 12345æ–¹æ³•1:r = p-&gt; pNext ; p-&gt;pNext =q ; q-&gt;pNext = r;æ–¹æ³•2:q-&gt;pNext = p-&gt;pNext;p-&gt;pNext = q; åˆ é™¤påŽé¢çš„èŠ‚ç‚¹ 123r = p-&gt;pNext;p-&gt;pNext= r-&gt;pNext;free(r); åŒå‘é“¾è¡¨æ’å…¥ 123456ListNodePosi &lt;T&gt; insertAsPred(T const&amp;e)&#123;//ç´§é å½“å‰èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹ ListNodePosi&lt;T&gt; x = new ListNode(e,pred,this); //åˆ›å»ºæ–°èŠ‚ç‚¹ pred-&gt;succ = x; this-&gt;pred= x;//è®¾ç½®æ­£å‘é“¾æŽ¥,è¿™é‡Œæ˜¯å½“å‰èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹çš„æ„æ€ï¼Œå®¹æ˜“å’ŒèŠ‚ç‚¹predæ··æ·† return x; //è¿”å›žæ–°èŠ‚ç‚¹çš„ä½ç½®&#125; é€’å½’ é€’å½’å¿…é¡»å¾—æœ‰ä¸€ä¸ªæ˜Žç¡®çš„ä¸­æ­¢æ¡ä»¶ã€‚ è¯¥å‡½æ•°æ‰€å¤„ç†çš„æ•°æ®è§„æ¨¡å¿…é¡»åœ¨é€’å‡ã€‚ é€’å½’å¤æ‚åº¦é€’å½’è·Ÿè¸ª(recursion trace)åˆ†æž1234sum(int A[],int n)&#123; return (n&lt;1)? 0:sum(A,n-1)+A[n-1]&#125; æ£€æŸ¥æ¯ä¸ªé€’å½’å®žä¾‹ï¼Œç´¯è®¡æ‰€éœ€çš„æ—¶é—´(è°ƒç”¨è¯­å¥æœ¬èº«ï¼Œè®¡å…¥å¯¹åº”çš„å­å®žä¾‹) å…¶æ€»å’Œå³ç®—æ³•æ‰§è¡Œæ—¶é—´ æœ¬ä¾‹ä¸­ï¼Œå•ä¸ªé€’å½’å®žä¾‹è‡ªèº«åªéœ€o(1)æ—¶é—´ T(n) = o(1) * (n+1) = o(n) é€’å½’æ–¹ç¨‹æ±‚è§£sum(A,n) : é€’å½’æ±‚è§£è§„æ¨¡ä¸ºn-1çš„é—®é¢˜sum(A,n-1) åŠ ä¸Š A[n-1] ã€‚ â€‹ T(n) = T(n-1) + o(1) // ä¸ºäº†æ±‚è§£T(n)æ‰€éœ€è¦çš„æ—¶é—´,èŠ±äº†T(n-1)çš„æ—¶é—´æ±‚è§£n-1çš„é—®é¢˜,ç„¶åŽå†èŠ±äº†o(1)çš„æ—¶é—´ â€‹ T(0) = o(1) T(n) = T(n-1) + o(1) //ä¸¤è¾¹åŒæ—¶ -n T(n) -n = T(n-1) -(n-1) â€‹ = â€¦ â€‹ =T(2) - 2 â€‹ = T(1) -1 â€‹ =T(0) T(n) = o(1) +n = o(n) é€’å½’å®žä¾‹é˜¶ä¹˜ ã€æ±‚å’Œ123456789101112131415161718192021222324252627282930313233343536373839#include &lt;stdio.h&gt;long f(int n);long sum(int n);int main(void) &#123; printf(&quot;n=1 è¾“å‡º %ld \\n &quot;, f(1)); printf(&quot;n=2 è¾“å‡º %ld \\n &quot;, f(2)); printf(&quot;n=3 è¾“å‡º %ld \\n &quot;, f(3)); printf(&quot;n=4 è¾“å‡º %ld \\n &quot;, f(4)); printf(&quot;n=5 è¾“å‡º %ld \\n &quot;, f(5)); printf(&quot;n=100 ç›¸åŠ  %ld \\n &quot;, sum(100)); int val,mult = 1; printf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°: val=&quot;); scanf(&quot;%d&quot;,&amp;val); for (int i = 1; i &lt;= val; ++i) &#123; mult = mult * i; &#125; printf(&quot;%dçš„é˜¶ä¹˜æ˜¯: %d\\n&quot;,val,mult);&#125;//å‡å®šnçš„å€¼æ˜¯1æˆ–å¤§äºŽ1çš„å€¼long f(int n) &#123; if (n == 1) &#123; return 1; &#125; else &#123; return n * f(n - 1); &#125;&#125;// 1+2+...+100long sum(int n) &#123; if (n == 1) &#123; return 1; &#125; else &#123; return (n + sum(n-1)); &#125;&#125; æ±‰è¯ºå¡”123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;void hannuota(int n, char a, char b, char c) &#123; /** * ä¸€ä¸ªç›˜å­ : * ç›´æŽ¥å°†aæŸ±å­ä¸Šçš„ç›˜å­ä»Žaç§»åŠ¨åˆ°b * å¦åˆ™ : * å…ˆå°†aæŸ±å­ä¸Šçš„n-1ä¸ªç›˜å­å€ŸåŠ©cç§»åˆ°b * ç›´æŽ¥å°†aæŸ±å­ä¸Šçš„ç›˜ä¸­ä»Žaç§»åˆ°c * æœ€åŽå°†bæŸ±å­ä¸Šçš„n-1ä¸ªç›˜å­å€ŸåŠ©aç§»åˆ°c */ if (1 == n) &#123; printf(&quot;å°†ç¼–å·ä¸º%dçš„ç›˜å­ç›´æŽ¥ä»Ž%cæŸ±å­ç§»åˆ°%cæŸ±å­\\n&quot;, n, a, c); &#125; else &#123; hannuota(n - 1, a, c, b); printf(&quot;å°†ç¼–å·ä¸º%dçš„ç›˜å­ç›´æŽ¥ä»Ž%cæŸ±å­ç§»åˆ°%cæŸ±å­\\n&quot;, n, a, c); hannuota(n - 1, b, a, c); &#125;&#125;int main(void) &#123; char ch1 = &#x27;A&#x27;; char ch2 = &#x27;B&#x27;; char ch3 = &#x27;C&#x27;; printf(&quot;è¯·è¾“å…¥è¦ç§»åŠ¨ç›˜å­çš„ä¸ªæ•°:&quot;); int n; scanf(&quot;%d&quot;,&amp;n); hannuota(n,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;); return 0;&#125; Fibonacci.c12345678910111213141516171819202122#include &lt;stdio.h&gt;#include &lt;stdbool.h&gt;int f(int n)&#123; if(n==0)&#123; return 0; &#125; else if(n==1)&#123; return 1; &#125; else&#123; return f(n-1)+f(n-2); &#125;&#125;int main()&#123; int n; printf(&quot;è¾“å…¥nçš„å€¼ä¸º &quot;); while (true)&#123; scanf(&quot;%d&quot;,&amp;n); printf(&quot;f(n) %d \\n&quot;,f(n)); &#125;&#125; ä¸Šé¢è¿™ç§æ±‚å’Œæ–¹å¼ï¼Œéšç€nå¢žåŠ ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šæŒ‡æ•°åž‹å¢žåŠ ï¼Œåˆ°äº†40å·²ç»ç®—ä¸åŠ¨äº†ï¼Œé‡Œé¢ä¼šæœ‰å¤§é‡é‡å¤çš„è®¡ç®— 123456789int f(int n) &#123; int f = 0; int g = 1; while (n--)&#123; g = g+f; f = g-f; &#125; return g;&#125; è¿™ç§æ—¶é—´å¤æ‚åº¦O(n),ä¸è¦å¤ªå¿«,äº¤æ›¿æ»šåŠ¨å‘å‰æŽ¨è¿›ã€‚ Hash(æ•£åˆ—)[Hash(key) + 1^2] % M ä»¥å¹³æ–¹æ•°ä¸ºè·ç¦»ï¼Œç¡®å®šä¸‹ä¸€è¯•æŽ¢æ¡¶å•å…ƒ Mä¸ºä¸‰åˆ—è¡¨çš„å®¹é‡","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"}],"tags":[]},{"title":"DeliverValue","slug":"DeliverValue","date":"2020-04-28T02:20:55.000Z","updated":"2021-08-19T11:11:43.800Z","comments":true,"path":"2020/04/28/DeliverValue/","link":"","permalink":"https://noteforme.github.io/2020/04/28/DeliverValue/","excerpt":"","text":"Value Copyhttps://blog.csdn.net/huaiyiheyuan/article/details/55102057 https://mp.weixin.qq.com/s/lP-xB5yzpvqVEiA439euVQ https://juejin.im/post/5e91cc6c51882573a343db03 åŸºæœ¬æ•°æ®ç±»åž‹ declare in stack Object declare in Heap Java value deliver https://juejin.im/post/5af3a44bf265da0b74522bf3 1234String name = &quot;hollischuang&quot;;String name = new String(&quot;hollischuang&quot;);","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"Bluetooth04","slug":"Bluetooth04","date":"2020-04-26T02:46:23.000Z","updated":"2024-10-02T01:36:40.951Z","comments":true,"path":"2020/04/26/Bluetooth04/","link":"","permalink":"https://noteforme.github.io/2020/04/26/Bluetooth04/","excerpt":"","text":"è“ç‰™é—®é¢˜æ±‡æ€»https://race604.com/android-ble-in-action/ è¿žæŽ¥æ–­å¼€ä¹‹åŽå¯ä»¥æ ¹æ®å®žé™…æƒ…å†µè¿›è¡Œé‡è¿žï¼Œä½†å¦‚æžœæ˜¯è¿žæŽ¥å¤±è´¥çš„æƒ…å†µï¼Œå»ºè®®ä¸è¦ç«‹å³é‡è¿žï¼Œè€Œæ˜¯è°ƒç”¨void closeBluetoothGatt()æ¸…ç©ºä¸€ä¸‹çŠ¶æ€ï¼Œå¹¶å»¶è¿Ÿä¸€æ®µæ—¶é—´ç­‰å¾…å¤ä½ï¼Œå¦åˆ™ä¼šæŠŠgatté˜»å¡žï¼Œå¯¼è‡´æ‰‹æœºä¸é‡å¯è“ç‰™å°±å†ä¹Ÿæ— æ³•è¿žæŽ¥ä»»ä½•è®¾å¤‡çš„ä¸¥é‡æƒ…å†µã€‚ https://github.com/Jasonchenlijian/FastBle/blob/master/README_1.2.x.md æ¯å½“è®¾å¤‡æ–­å¼€è¿žæŽ¥æ—¶ï¼Œè¯·ç¡®ä¿åœ¨BluetoothGattå¯¹è±¡ä¸Šè°ƒç”¨close()å¹¶å°†å…¶è®¾ç½®ä¸ºnull, è§£å†³æ–¹æ³•:å§‹ç»ˆåœ¨æ–­å¼€è¿žæŽ¥æ—¶å…³é—­gattå®žä¾‹ï¼Œå¹¶åœ¨æ¯æ¬¡è¿žæŽ¥æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„gattå®žä¾‹ã€‚ åœ¨onLeScan(..)ä¸­å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç„¶åŽè¿›è¡Œè¿žæŽ¥ https://stackoom.com/question/1Cyqr/Android-%E8%93%9D%E7%89%99%E4%BD%8E%E5%8A%9F%E8%80%97%E4%B8%8D%E7%A8%B3%E5%AE%9A BluetoothLeScanner: could not find callback wrapper è¿žæŽ¥å¤±è´¥å¤„ç† åˆ†ä¸¤ä¸ªå¹³å°æ¥è¯´ï¼ŒiOSç«¯ä¹Ÿæœ‰è¿žæŽ¥å¤±è´¥çš„å§”æ‰˜ï¼Œä½†æ˜¯å¥½åƒå‡ ä¹Žä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè‡³å°‘æˆ‘ä»Žæ¥æ²¡é‡è§è¿‡ï¼Œè€Œå¯¹äºŽåŒæ¬¾è®¾å¤‡ï¼Œandroidå¸¸å¸¸ä¼šå‡ºçŽ°è¿žæŽ¥å¤±è´¥çš„æƒ…å†µï¼Œstatus != BluetoothGatt.GATT_SUCCESS ï¼Œandroidç«¯å¼€å‘è¯·ä¸è¦æŠŠè¿žæŽ¥å¤±è´¥å’Œæ–­å¼€è¿žæŽ¥æ”¾åœ¨ä¸€å—å¤„ç†ï¼Œå› ä¸ºæ–­å¼€è¿žæŽ¥å¯ä»¥ç›´æŽ¥å°è¯•é‡æ–°è¿žæŽ¥ï¼Œè€Œè¿žæŽ¥å¤±è´¥åŽå°è¯•é‡æ–°è¿žæŽ¥ï¼Œéœ€è¦åŠ ä¸€äº›å»¶æ—¶ï¼Œå¹¶ä¸”éœ€è¦gatt.closeï¼Œæ¸…ç©ºä¸€ä¸‹çŠ¶æ€ï¼Œå¦åˆ™ä¼šæŠŠgatté˜»å¡žå¯¼è‡´æ‰‹æœºä¸é‡å¯è“ç‰™å°±å†ä¹Ÿæ— æ³•è¿žæŽ¥ä»»ä½•è®¾å¤‡çš„æƒ…å†µã€‚ http://liuyanwei.jumppo.com/2017/01/23/zhihu-live-a-hour-for-bluetooth-0.html æ‰«æå¹¿æ’­åŒ… æ‰€æœ‰å¤–è®¾ï¼Œåªæœ‰åœ¨å‘å‡ºå¹¿æ’­åŒ…çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½è¢«centralå‘çŽ°ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¤–è®¾è¢«è¿žæŽ¥åŽå°±ä¸ä¼šå‘å‡ºå¹¿æ’­ï¼ˆä¹Ÿæœ‰ä¾‹å¤–ï¼‰ï¼Œå¾ˆå¤šäººé‡åˆ°æ— æ³•æ‰¾åˆ°è®¾å¤‡çš„é—®é¢˜ï¼Œå¤§å¤šå±žäºŽè¿™ç§æƒ…å†µã€‚ é‡å¤æ‰«æé—®é¢˜â€”â€”â€”â€”â€”â€” http://liuyanwei.jumppo.com/2017/01/23/zhihu-live-a-hour-for-bluetooth-0.html Android 7+ will stop scanning if it continues without stopping at all for 30 minutes or more. This was added as a feature to prevent battery drain in case developers had inadvertently or abusively left scanning on forever. https://github.com/AltBeacon/android-beacon-library/issues/528 https://blog.csdn.net/m0_37796683/article/details/83657204 status 133 https://blog.csdn.net/baidu_26352053/article/details/54571688 unregisterApp() - mClientIf&#x3D;5 filter https://juejin.im/post/5d37d4d6f265da1bc414958a é˜²æ­¢Android7ä¸­çš„BLEæ‰«ææ»¥ç”¨ï¼Œä»Žè€Œåšäº†ä¸€äº›é™åˆ¶ï¼Œå³ä¸è¦åœ¨30så†…å¯¹è“ç‰™æ‰«æé‡å¤å¼€å¯-å…³é—­è¶…è¿‡5æ¬¡ã€‚ https://blog.classycode.com/undocumented-android-7-ble-behavior-changes-d1a9bd87d983 è“ç‰™æ·»åŠ æ‰«æé—´éš” â€‹ https://github.com/haodynasty/AndroidBleManager â€‹ https://github.com/AltBeacon/android-beacon-library åº”ç”¨å¦‚ä½•åšè‡ªåŠ¨é‡è¿žå…¶å®žè‡ªåŠ¨é‡è¿žæ¯”æƒ³è±¡çš„è¦ç®€å•è®¸å¤šï¼Œæ— è®ºæ˜¯androidè¿˜æ˜¯iosç«¯ï¼Œåªéœ€è¦åœ¨è®¾å¤‡æ–­å¼€è¿žæŽ¥çš„å§”æ‰˜æ–¹æ³•ä¸­ï¼Œé‡æ–°è°ƒç”¨gatt.connetæˆ–è€…æ˜¯centralManager.connetæ–¹æ³•å°±å¯ä»¥äº†ï¼Œæ— è®ºå½“æ—¶è®¾å¤‡æ˜¯å¦æœ‰ç‚¹ï¼Œæ˜¯å¦åœ¨å‘¨å›´ï¼Œå½“è®¾å¤‡å†æ¬¡å¼€ä¼šæˆ–è€…è¿žæŽ¥åˆ°å¯è¿žæŽ¥èŒƒå›´å†…ï¼Œéƒ½ä¼šè‡ªåŠ¨è¢«è¿žä¸Šï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ http://liuyanwei.jumppo.com/2017/01/23/zhihu-live-a-hour-for-bluetooth-0.html Intent mIntent &#x3D; new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);startActivityForResult(mIntent, 1); 12mBluetoothAdapter.enable();mBluetoothAdapter.disable(); https://blog.csdn.net/u014418171/article/details/81219297 æ‰«æ è¿‡æ»¤ Scanning by device name Looking for a device by itâ€™s name has 2 main use cases: to look for 1 specific device or to look for 1 specific device model. For example, my Polar H7 chest strap advertises itself as â€œPolar H7 391BB014â€. The latter part (â€˜391BB014â€™) is a unique number (or serial number) and the first part is generic for all Polar H7 devices. This is very common practice. Unfortunately the device name scan filter can only be used to find specific devices as it does full string matching. If you want to find all Polar H7 devices you will need to do a â€˜substringâ€™ compare on â€˜Polar H7â€™, but you canâ€™t do that with a filter. You just need to pass null as the filter and do the substring comparison yourself in onScanResult. So here is an example of how to scan for devices by exact name 123456789101112String[] names = new String[]&#123;&quot;Polar H7 391BB014&quot;&#125;;List&lt;ScanFilter&gt; filters = null;if(names != null) &#123; filters = new ArrayList&lt;&gt;(); for (String name : names) &#123; ScanFilter filter = new ScanFilter.Builder() .setDeviceName(name) .build(); filters.add(filter); &#125;&#125;scanner.startScan(filters, scanSettings, scanCallback); https://medium.com/@martijn.van.welie/making-android-ble-work-part-1-a736dcd53b02 androidè“ç‰™è‡ªåŠ¨è¿žæŽ¥ http://www.cocoachina.com/articles/83844 Ble libraryAndroid-BLE-Library 123LoggableBleManager public void log(final int priority, @NonNull final String message)æ˜¯æ—¥å¿—æ‰“å°å‡ºå£æ˜¯ BleManager public void log(final int priority, @NonNull final String message)çš„å®žçŽ° nRF-Logger-APIæ˜¯æ‰‹æœºæ—¥å¿—æŸ¥çœ‹å·¥å…· 12345678910111213141516171819202122232425262728293031public abstract class LoggableBleManager&lt;T extends BleManagerCallbacks&gt; extends BleManager&lt;T&gt; &#123; private ILogSession logSession; /** * The manager constructor. * &lt;p&gt; * After constructing the manager, the callbacks object must be set with * &#123;@link #setManagerCallbacks(BleManagerCallbacks)&#125;. * * @param context the context. */ public LoggableBleManager(@NonNull final Context context) &#123; super(context); &#125; /** * Sets the log session to log into. * * @param session nRF Logger log session to log inti, or null, if nRF Logger is not installed. */ public void setLogger(@Nullable final ILogSession session) &#123; logSession = session; &#125; @Override public void log(final int priority, @NonNull final String message) &#123; Logger.log(logSession, LogContract.Log.Level.fromPriority(priority), message); Log.println(priority, &quot;BleManager&quot;, message);// Timber.i(&quot;BleManager &quot;+ message); &#125;&#125;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"JVM","slug":"JVM","date":"2020-04-18T14:19:42.000Z","updated":"2022-07-16T15:07:08.240Z","comments":true,"path":"2020/04/18/JVM/","link":"","permalink":"https://noteforme.github.io/2020/04/18/JVM/","excerpt":"","text":"JVMæ–¹æ³•åŒº-ç¬¬å…­ç«  https://www.iteye.com/blog/rednaxelafx-656951 https://www.bilibili.com/video/av75247289?p=2 è¿™ç§æƒ…å†µå…¨å±€å˜é‡ b: Bæ˜¯å¦ä¼šé€ æˆå†…å­˜æ³„æ¼ 123456789101112class A &#123; val b = B.getInstance()&#125;class B &#123; companion object &#123; val b = B() fun getInstance(): B &#123; return b &#125; &#125;&#125; æˆ‘è§‰å¾—ä¸ä¼š,B å¹¶ä¸æŒ‡å‘A https://www.bilibili.com/video/BV1GA4y197VR?spm_id_from=333.337.search-card.all.click&amp;vd_source=d4c5260002405798a57476b318eccac9 mOpenEnv åŠ ","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"tool_mac","slug":"tool-mac","date":"2020-04-11T08:35:50.000Z","updated":"2025-01-07T11:35:17.347Z","comments":true,"path":"2020/04/11/tool-mac/","link":"","permalink":"https://noteforme.github.io/2020/04/11/tool-mac/","excerpt":"","text":"JDKçŽ¯å¢ƒå˜é‡adb çŽ¯å¢ƒå˜é‡123456789sudo touch ~/.zshrcsudo vi ~/.zshrcå¤åˆ¶export ANDROID_HOME=/Users/m/Library/Android/sdkexport PATH=$ANDROID_HOME/platform-tools:$PATHexport PATH=$ANDROID_HOME/tools:$PATHexport PATH=$ANDROID_HOME/tools/bin:$PATH https://dev.to/ravics09/solution-of-command-not-found-adb-error-29e7 Installation of the JDK and the JRE on macOS Macç³»ç»Ÿçš„çŽ¯å¢ƒå˜é‡ï¼ŒåŠ è½½é¡ºåºä¸ºï¼š&#x2F;etc&#x2F;profile &#x2F;etc&#x2F;paths ~&#x2F;.bash_profile ~&#x2F;.bash_login ~&#x2F;.profile ~&#x2F;.bashrc IntelliJ idea clionclionæ¿€æ´»: CLion-2019.2.5.dmg ä¸‹è½½å®ŒæˆåŽ,å…ˆä½¿ç”¨å†æ‰“å¼€,jetbrains-agent-20200227.zipç›´æŽ¥æ‹–å…¥å°±å¥½äº†ã€‚ some tool for mac æŸ¥çœ‹å½“å‰çŽ¯å¢ƒå˜é‡ : env Packet Sendertcp ip tool HomeBrewå®‰è£… ä¸‹è½½ https://raw.githubusercontent.com/Homebrew/install/master/install.sh æ›´æ¢æº 123BREW_REPO=&quot;https://github.com/Homebrew/brew&quot; æ¢æˆ BREW_REPO=&quot;git://mirrors.ustc.edu.cn/brew.git&quot; æƒé™ 12chmod 755 install.sh ./install.sh https://blog.csdn.net/weixin_43635647/article/details/104249968 set environment variable mac Flutter 1234vi ~/.bash_profileexport PATH=&quot;$PATH:/Users/john/development/flutter/bin&quot;which flutter mac terminal download and install iterm2 Download iterm2-finder-tools-1.0.0 open Open iTerm.workflow install file top å³é”® customize toolbar then move opem iTerm into toolbar Ignore Command + Shift + . Environment set AppledeMacBook-Pro:~ apple$ cat ~&#x2F;.bash_profile export PATH&#x3D;â€$PATH:&#x2F;Users&#x2F;john&#x2F;development&#x2F;flutter&#x2F;binâ€ export PUB_HOSTED_URL&#x3D;https://pub.flutter-io.cn export FLUTTER_STORAGE_BASE_URL&#x3D;https://storage.flutter-io.cn gradle é˜¿é‡Œäº‘é•œåƒ&#x2F;Users&#x2F;john&#x2F;.gradle ç›®å½•æ·»åŠ  init.gradle é¼ é¡»ç®¡é»˜è®¤ç®€ç¹ä½“control åŠ ä¸Š ~ å¿«æ·é”® å±å¹•å½•åˆ¶https://blog.csdn.net/qq_43428139/article/details/109038098 https://www.cnblogs.com/hi3254014978/p/15084851.html#:~:text=%E8%A7%A3%E5%86%B3Mac%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E8%87%AA%E5%B8%A6%E5%BD%95%E5%B1%8F%E8%BD%AF%E4%B https://www.youtube.com/watch?v=KjL_sJS9Rko&amp;t=430s https://www.youtube.com/watch?v=LSmM5FXzVBg&amp;t=320s","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"Corouties","slug":"Corouties","date":"2020-04-05T02:37:04.000Z","updated":"2024-04-28T13:56:27.518Z","comments":true,"path":"2020/04/05/Corouties/","link":"","permalink":"https://noteforme.github.io/2020/04/05/Corouties/","excerpt":"","text":"https://juejin.cn/post/6953441828100112392 https://www.cnblogs.com/joy99/p/15805916.html åç¨‹å¯åŠ¨æ¨¡å¼ DEFAULT https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#1 DispatchersBy default, Kotlin coroutines provides three Dispatchers: Main, IO, and Default. The IO dispatcher is optimized for IO work like reading from the network or disk, while the Default dispatcher is optimized for CPU intensive tasks. runBlocking vs CoroutineScoperunBlocking is also a coroutine builder that bridges the non-coroutine world of a regular fun main() and the code with coroutines inside of runBlocking { â€¦ } curly braces. This is highlighted in an IDE by this: CoroutineScope hint right after the runBlocking opening curly brace. https://kotlinlang.org/docs/coroutines-basics.html#your-first-coroutine https://juejin.cn/post/6883652600462327821 runBlocking åªä¼šç­‰å¾…ç›¸åŒä½œç”¨åŸŸçš„åç¨‹å®Œæˆæ‰ä¼šé€€å‡º 1234567fun main&#123; runBlocking&#123; // ä¸ä¼šé˜»å¡žæ­£å¸¸çš„è°ƒç”¨ï¼Œé˜»å¡žä¸»çº¿ç¨‹ï¼Œè®©å†…éƒ¨çš„ç¨‹åºæ‰§è¡Œå®Œ GlobalScope.launch&#123; println(&quot;hello world&quot;) &#125; &#125; &#125; https://www.bilibili.com/video/BV1uo4y1y7ZF/?p=101 https://www.bilibili.com/video/BV1Yu411X73j?p=5 https://www.bilibili.com/video/BV164411C7FK?from=search&amp;seid=2446477518780731765 https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-coroutine-scope/index.html","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"}]},{"title":"databinding","slug":"databinding","date":"2020-03-31T21:52:42.000Z","updated":"2021-08-19T11:11:44.298Z","comments":true,"path":"2020/04/01/databinding/","link":"","permalink":"https://noteforme.github.io/2020/04/01/databinding/","excerpt":"","text":"layout expression of the language https://codelabs.developers.google.com/codelabs/android-databinding/#0 https://developer.android.com/topic/libraries/data-binding Create first layout expression when you want to use it in your own projects the first step is to enable the library in the modules that will use it: 123456android &#123;... dataBinding &#123; enabled true &#125;&#125; Convert to data binding layout æ‰“å¼€å¸ƒå±€æ–‡ä»¶ï¼Œé€‰ä¸­æ ¹å¸ƒå±€çš„ ViewGroupï¼ŒæŒ‰ä½ option + å›žè½¦é”®ï¼Œç‚¹å‡» â€œConvert to data binding layoutâ€ï¼Œå°±å¯ä»¥ç”Ÿæˆ DataBinding éœ€è¦çš„å¸ƒå±€è§„åˆ™ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt; &lt;data&gt; &lt;variable name=&quot;name&quot; //ä¸èƒ½ç”¨ä¸‹åˆ’çº¿ &quot;_&quot; type=&quot;String&quot;/&gt; &lt;variable name=&quot;lastName&quot; type=&quot;String&quot;/&gt; &lt;/data&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView android:id=&quot;@+id/plain_name&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginStart=&quot;16dp&quot; android:layout_marginTop=&quot;8dp&quot; android:layout_marginEnd=&quot;128dp&quot; android:text=&quot;@&#123;name&#125;&quot; android:textAppearance=&quot;@style/TextAppearance.AppCompat.Large&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toBottomOf=&quot;@+id/name_label&quot;/&gt; &lt;TextView android:id=&quot;@+id/plain_lastname&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginStart=&quot;16dp&quot; android:layout_marginTop=&quot;8dp&quot; android:layout_marginEnd=&quot;128dp&quot; android:text=&quot;@&#123;lastName&#125;&quot; android:textAppearance=&quot;@style/TextAppearance.AppCompat.Large&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toBottomOf=&quot;@+id/lastname_label&quot;/&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; &lt;/layout&gt; Bind TextView 12345678910111213141516171819class PlainOldActivitySolution2 : AppCompatActivity() &#123; // Obtain ViewModel from ViewModelProviders private val viewModel by lazy &#123; ViewModelProviders.of(this).get(SimpleViewModel::class.java) &#125; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) val binding: PlainActivitySolution2Binding = DataBindingUtil.setContentView(this, R.layout.plain_activity_solution_2) binding.name = &quot;John&quot; binding.lastName = &quot;lice&quot; // TODO: Explicitly setting initial values is a bad pattern. We&#x27;ll fix that later on. updateLikes() &#125;&#125;&#125; Dealing with user events Observering data12345&lt;data&gt; &lt;variable name=&quot;viewmodel&quot; type=&quot;com.example.android.databinding.basicsample.data.SimpleViewModel&quot;/&gt; &lt;/data&gt; 12345android:onClick=&quot;@&#123;() -&gt; viewmodel.onLike()&#125;&quot; binding.viewmodel = viewModel 1234private val _likes = MutableLiveData(0) fun onLike() &#123; _likes.value = (_likes.value ?: 0) + 1 &#125; 123&lt;TextView android:id=&quot;@+id/likes&quot; android:text=&quot;@&#123;Integer.toString(viewmodel.likes)&#125;&quot; Using Binding Adapters One parameter 123456@BindingAdapter(&quot;android:text&quot;) public static void setText(TextView view, CharSequence text) &#123; // Some checks removed for clarity view.setText(text); &#125; 1234@BindingAdapter(&quot;app:hideIfZero&quot;) fun hideIfZero(view: View, number: Int) &#123; view.visibility = if (number == 0) View.GONE else View.VISIBLE &#125; 123&lt;ProgressBar android:id=&quot;@+id/progressBar&quot; app:hideIfZero=&quot;@&#123;viewmodel.likes&#125;&quot; Create a Binding Adapter with multiple parameters 12345&lt;ProgressBar android:id=&quot;@+id/progressBar&quot; app:hideIfZero=&quot;@&#123;viewmodel.likes&#125;&quot; app:progressScaled=&quot;@&#123;viewmodel.likes&#125;&quot; android:max=&quot;@&#123;100&#125;&quot; oberver class fieldhttps://developer.android.com/topic/libraries/data-binding/observability#observable_fields https://developer.android.com/topic/libraries/data-binding/observability#observable_objects Using Binding Adapters to create custom attributes1234@BindingAdapter(value=[&quot;app:setSleepData&quot;])fun setSleepData(viewBodySleep: ViewBodySleep, sleepData: String) &#123; viewBodySleep.setSleepData(sleepData)&#125; 12345678&lt;com.android.util.view.ViewBodySleep android:id=&quot;@+id/view_body_sleep&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:paddingLeft=&quot;55dp&quot; android:paddingRight=&quot;48dp&quot; app:setSleepData=&quot;@&#123;vmBodyFragment.spData&#125;&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; https://developer.android.com/topic/libraries/data-binding/expressions#expression_language Work with observable data objects isNull 1android:text=&#x27;@&#123;viewModel.patientInfo.remoteCheckReceiveName??&quot;&quot;&#125;&#x27; visible 1234@BindingAdapter(&quot;app:goneUnless&quot;)fun goneUnless(view: View, visible: Boolean) &#123; view.visibility = if (visible) View.VISIBLE else View.GONE&#125; android-databinding https://mp.weixin.qq.com/s?__biz=MzAwODY4OTk2Mg==&amp;mid=2652046992&amp;idx=1&amp;sn=b8b4c47537be1227eecd01c1eaee2550&amp;chksm=808ca6d5b7fb2fc32d9ec361c91a2958e51a2db1c6b20370e7ef6493bb5cb20314cda6ab059c&amp;scene=38#wechat_redirect https://juejin.im/post/5d2be05ff265da1bd605d49a https://mp.weixin.qq.com/s/4UP-pDs0FK66g1QUQvRN6A å®šä¹‰xmlèƒŒæ™¯ https://juejin.im/post/5b95c6a0e51d450e664b0aa0 https://www.jianshu.com/p/741103ba2ff1 https://www.cs.usfca.edu/~galles/visualization/RedBlack.html","categories":[{"name":"Jetpack","slug":"Jetpack","permalink":"https://noteforme.github.io/categories/Jetpack/"}],"tags":[]},{"title":"Android_itnerview2","slug":"Java-Queue","date":"2020-03-23T09:47:11.000Z","updated":"2023-09-03T07:04:03.894Z","comments":true,"path":"2020/03/23/Java-Queue/","link":"","permalink":"https://noteforme.github.io/2020/03/23/Java-Queue/","excerpt":"","text":"https://blog.csdn.net/bn493235694/article/details/79600634 é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„çš„æ•°æ®ç»“æž„ DequeI need to have a thread-safe LIFO structure Use LinkedBlockingDeque if at a time you want only single thread can operate your data. Use ConcurrentLinkedDeque if you want that each thread can access the shared data https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedDeque.html ConcurrentLinkedDeque https://blog.csdn.net/hello_worldee/article/details/77880532 Deque : https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html https://www.liaoxuefeng.com/wiki/1252599548343744/1265122668445536 https://www.geeksforgeeks.org/deque-interface-java-example/ LinkedList çº¿ç¨‹å®‰å…¨å¤„ç† https://blog.csdn.net/d380025303/article/details/81010980","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"ActivityRender01","slug":"ActivityRender01","date":"2020-03-22T14:45:17.000Z","updated":"2021-08-19T11:11:43.525Z","comments":true,"path":"2020/03/22/ActivityRender01/","link":"","permalink":"https://noteforme.github.io/2020/03/22/ActivityRender01/","excerpt":"","text":"https://juejin.im/post/5baf275f5188255c9a7740ba https://github.com/SusionSuc/AdvancedAndroid/blob/master/AndroidFramework%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Android%E8%A7%86%E5%9B%BE%E5%B1%82%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/README.md https://blog.csdn.net/luoshengyang/article/details/8170307 https://juejin.im/post/6844904146227691527 https://mp.weixin.qq.com/s/sKJCG1AjhIRRQL9tQTrLZg","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"Activity","slug":"Activity","permalink":"https://noteforme.github.io/tags/Activity/"}]},{"title":"ActivityStart01","slug":"ActivityStart01","date":"2020-01-18T13:53:41.000Z","updated":"2021-08-19T11:11:43.526Z","comments":true,"path":"2020/01/18/ActivityStart01/","link":"","permalink":"https://noteforme.github.io/2020/01/18/ActivityStart01/","excerpt":"","text":"Activityåˆ›å»º â€‹ ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è°ƒç”¨ æœ¬ç¯‡æ–‡ç« å°†æ ¹æ®æºç è§£å‰–Androidçš„Activityçš„å¯åŠ¨æµç¨‹ï¼Œéœ€æ³¨æ„çš„æ˜¯ä¸‹åˆ—çš„åˆ†æžå‡åŸºäºŽAndroid7.0, 7.0ç‰ˆæœ¬ç›¸è¾ƒäºŽä¹‹å‰å‡ ä¸ªç‰ˆæœ¬åšäº†è®¸å¤šæ”¹åŠ¨å’Œé‡æž„ï¼Œä½†æ˜¯æ•´ä½“çš„æµç¨‹æ˜¯å˜åŒ–ä¸å¤§ã€‚æ ¹æ®å¯åŠ¨Activityæ—¶æœºçš„ä¸åŒï¼Œå¯åˆ†ä¸ºæ ¹Activityçš„å¯åŠ¨æµç¨‹å’Œæ™®é€šActivityå¯åŠ¨æµç¨‹ï¼Œæ ¹Activityå¯åŠ¨æµç¨‹åˆå¯ä»¥ç§°ä¸ºåº”ç”¨ç¨‹åºå¯åŠ¨æµç¨‹ï¼Œå³åœ¨æ¡Œé¢ä¸Šç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡åˆ°è¿›å…¥åˆ°åº”ç”¨ç¬¬ä¸€ä¸ªActivityçš„æµç¨‹ã€‚è€Œæ™®é€šActivityçš„å¯åŠ¨æµç¨‹å°±æ˜¯åœ¨ä¸€ä¸ªåº”ç”¨é‡Œå¼€å¯å¦å¤–ä¸€ä¸ªActivityçš„æµç¨‹ã€‚ç”±äºŽä¸¤ç§å¯åŠ¨æµç¨‹æ˜¯æœ‰é‡å çš„ï¼Œè€Œæ ¹Activityçš„å¯åŠ¨æµç¨‹æ›´åŠ å¤æ‚ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥æˆ‘ä»¬é‡ç‚¹åˆ†æžæ ¹Activityçš„å¯åŠ¨æµç¨‹ï¼Œè€Œæ™®é€šActivityçš„å¯åŠ¨æµç¨‹åœ¨æ¶‰åŠçš„åœ°æ–¹ä¼šç¨å¾®æä¸€ä¸‹ã€‚ç”±äºŽè€ƒè™‘åˆ°ç¯‡å¹…è¾ƒé•¿ï¼Œè¿™é‡Œå°†åˆ†ä¸ºä¸¤ç¯‡æ¥ä»‹ç»ã€‚ è¿™ç¯‡å°†åˆ†æžå¯åŠ¨æµç¨‹ä¸­çš„åº”ç”¨è¿›ç¨‹çš„åˆ›å»ºï¼š Launcherè¿›ç¨‹è¯·æ±‚AMS AMSå‘é€åˆ›å»ºåº”ç”¨è¿›ç¨‹è¯·æ±‚ Zygoteè¿›ç¨‹æŽ¥å—è¯·æ±‚å¹¶å­µåŒ–åº”ç”¨è¿›ç¨‹ åº”ç”¨è¿›ç¨‹å¯åŠ¨ActivityThread MainActivityç»„ä»¶æ˜¯ç”±Launcher ç»„ä»¶æ¥å¯åŠ¨çš„ï¼Œè€ŒLauncherç»„ä»¶åˆæ˜¯é€šè¿‡Activityç®¡ç†æœåŠ¡ActivityManagerServ iceæ¥å¯åŠ¨Main Activityç»„ä»¶çš„â€™ã€‚MainActivityç»„ä»¶ã€Launcherç»„ä»¶å’Œ ActivityManagerServiceæ˜¯åˆ†åˆ«è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­çš„ï¼Œå› æ­¤ï¼ŒMainActivityç»„ä»¶çš„å¯åŠ¨è¿‡ç¨‹å°±æ¶‰åŠåˆ°äº†ä¸‰ä¸ªè¿›ç¨‹ã€‚è¿™ä¸‰ä¸ªè¿›ç¨‹æ˜¯é€šè¿‡Binderè¿›ç¨‹é—´é€šä¿¡æœºåˆ¶æ¥å®ŒæˆMainActivityç»„ä»¶çš„å¯åŠ¨è¿‡ç¨‹çš„ã€‚ Launcherç»„ä»¶å¯åŠ¨MainActivityç»„ä»¶çš„è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºã€‚ (1)Launcherç»„ä»¶å‘ActivityManagerServiceå‘é€ä¸€ä¸ªå¯åŠ¨MainActivityç»„ä»¶çš„è¿›ç¨‹é—´é€šä¿¡è¯·æ±‚ã€‚ ( 2 ) ActivityManagerServiceé¦–å…ˆå°†è¦å¯åŠ¨çš„MainActivityç»„ä»¶çš„ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œç„¶åŽå†å‘Launcher ç»„ä»¶å‘é€ä¸€ä¸ªè¿›å…¥ä¸­æ­¢çŠ¶æ€çš„è¿›ç¨‹é—´é€šä¿¡è¯·æ±‚ã€‚ ( 3 ) Launcherç»„ä»¶è¿›å…¥åˆ°ä¸­æ­¢çŠ¶æ€ä¹‹åŽï¼Œå°±ä¼šå‘ActivityManagerServiceå‘é€ä¸€ä¸ªå·²è¿›äººä¸­æ­¢çŠ¶æ€ çš„è¿›ç¨‹é—´é€šä¿¡è¯·æ±‚ï¼Œä»¥ä¾¿ActivityManagerServ iceå¯ä»¥ç»§ç»­æ‰§è¡Œå¯åŠ¨MainActivityç»„ä»¶çš„æ“ä½œã€‚ (4) ActivityManagerServiceå‘çŽ°ç”¨æ¥è¿è¡ŒMairiActivityç»„ä»¶çš„åº”ç”¨ç¨‹åºè¿›ç¨‹ä¸å­˜åœ¨ï¼Œå› æ­¤ï¼Œå®ƒå°±ä¼š å…ˆå¯åŠ¨ä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºè¿›ç¨‹ã€‚ (5ï¼‰æ–°çš„åº”ç”¨ç¨‹åºè¿›ç¨‹å¯åŠ¨å®Œæˆä¹‹åŽï¼Œå°±ä¼šå‘ActivityManagerServi(eå‘é€ä¸€ä¸ªå¯åŠ¨å®Œæˆçš„è¿›ç¨‹é—´ é€šä¿¡è¯·æ±‚ï¼Œä»¥ä¾¿ActivityManagerServiceå¯ä»¥ç»§ç»­æ‰§è¡Œå¯åŠ¨MainActivityç»„ä»¶çš„æ“ä½œã€‚ (6) ActivityManagerServiceå°†ç¬¬2æ­¥ä¿å­˜ä¸‹æ¥çš„MainActivityç»„ä»¶çš„ä¿¡æ¯å‘é€ç»™ç¬¬4æ­¥åˆ›å»ºçš„åº”ç”¨ç¨‹åºè¿›ç¨‹ï¼Œä»¥ä¾¿å®ƒå¯ä»¥å°†MainActivityç»„ä»¶å¯åŠ¨èµ·æ¥ã€‚ ä¸€ã€Launcherè¿›ç¨‹è¯·æ±‚AMSä¸Šé¢æˆ‘ä»¬æåˆ°æ ¹Activityçš„å¯åŠ¨æµç¨‹å…¶å®žå°±æ˜¯æ¡Œé¢ä¸Šç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡è¿›å…¥åˆ°åº”ç”¨çš„ç¬¬ä¸€ä¸ªActivityçš„æµç¨‹ï¼Œå…¶å®žæ¡Œé¢ä¹Ÿå¯ä»¥çœ‹æˆä¸€ä¸ªç¨‹åºï¼Œå³Launcherã€‚å½“ç³»ç»Ÿå¼€æœºåŽï¼ŒLauncherä¹Ÿéšä¹‹è¢«å¯åŠ¨ï¼Œç„¶åŽå°†å·²ç»å®‰è£…çš„åº”ç”¨ç¨‹åºå›¾æ ‡æ˜¾ç¤ºåˆ°æ¡Œé¢ä¸Šï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡å…¶å®žå°±æ˜¯ç›¸å½“äºŽç‚¹å‡»Activityä¸­çš„ä¸€ä¸ªbutton,å…¶ç›¸åº”äº‹ä»¶å°±æ˜¯Launcherè¿›ç¨‹è¯·æ±‚AMSæ¥å¯åŠ¨è¯¥åº”ç”¨ç¨‹åºã€‚ 1. æ—¶åºå›¾ 2. è¯¦ç»†è¿‡ç¨‹è¯·æ±‚çš„å…¥å£å°±æ˜¯Launcherçš„startActivitySafeæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š packages/apps/Launcher3/src/com/android/launcher3/Launcher.java 12345678910111213141516171819202122232425public boolean startActivitySafely(View v, Intent intent, ItemInfo item) &#123; ... // æ ¹Activityä¼šåœ¨æ–°çš„ä»»åŠ¡æ ˆä¸­å¯åŠ¨ intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); try &#123; ... if (isShortcut) &#123; // Shortcuts need some special checks due to legacy reasons. startShortcutIntentSafely(intent, optsBundle, item); &#125; else if (user == null || user.equals(Process.myUserHandle())) &#123; // è°ƒç”¨startActivity startActivity(intent, optsBundle); &#125; else &#123; LauncherAppsCompat.getInstance(this).startActivityForProfile( intent.getComponent(), user, intent.getSourceBounds(), optsBundle); &#125; ... return true; &#125; catch (ActivityNotFoundException|SecurityException e) &#123; ... &#125; return false;&#125; å¯ä»¥å‘çŽ°è¯¥æ–¹æ³•ä¸ºæ ¹Activityè®¾ç½®äº†flagï¼Œå³æ ¹Activityä¼šåœ¨æ–°çš„ä»»åŠ¡æ ˆä¸­å¯åŠ¨ã€‚ç„¶åŽä¼šè°ƒç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„startActivityæ–¹æ³•,è€Œåœ¨Launcherå¹¶æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è‡ªç„¶æƒ³åˆ°äº†åº”è¯¥æ˜¯çˆ¶ç±»çš„æ–¹æ³•ï¼Œç„¶åŽè®©æˆ‘ä»¬æ¥çœ‹çœ‹Launcherç»§æ‰¿äº†å“ªäº›ç±»ï¼Ÿ 1234567891011public class Launcher extends BaseDraggingActivity implements LauncherExterns, LauncherModel.Callbacks, LauncherProviderChangeListener, UserEventDelegate&#123; &#125;public abstract class BaseDraggingActivity extends BaseActivity implements WallpaperColorInfo.OnChangeListener &#123; &#125;public abstract class BaseActivity extends Activity implements UserEventDelegate&#123;&#125; å…¶å®žä¸€ç›´è¿½è¸ªä¸‹åŽ»ï¼Œä½ å°±ä¼šå‘çŽ°å…¶å®žLauncherè°ƒç”¨çš„startActivityå…¶å®žå°±æ˜¯Activityä¸­çš„startActivityã€‚ä»Žè¿™é‡Œä¹Ÿå¯ä»¥è¯æ˜ŽLauncherå…¶å®žä¹Ÿæ˜¯ä¸ªActivityã€‚æ‰€ä»¥åœ¨Launcherå¯åŠ¨ä¸€ä¸ªappï¼Œå’Œæˆ‘ä»¬å¹³æ—¶åœ¨startActivityåŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼ˆåŸºæœ¬ä¸€æ ·ï¼Œä¸ä»£è¡¨å®Œå…¨ä¸€æ ·ï¼Œé€šè¿‡åŽæ–‡åˆ†æžä½ å°±ä¼šæ˜Žç™½ï¼ï¼‰ï¼ŒäºŽæ˜¯æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬ç†Ÿæ‚‰çš„Activityä¸­çš„startActivityçš„æºç æ˜¯å¦‚ä½•çš„ï¼š æºç ï¼šframeworks/base/core/java/android/app/Activity.java 123456789101112131415161718192021222324252627282930@Overridepublic void startActivity(Intent intent, @Nullable Bundle options) &#123; //ç¬¬äºŒä¸ªå‚æ•°ä¸º-1è¡¨ç¤ºLauncherä¸éœ€è¦çŸ¥é“æ ¹Activityçš„å¯åŠ¨ç»“æžœ if (options != null) &#123; startActivityForResult(intent, -1, options); &#125; else &#123; // Note we want to go through this call for compatibility with // applications that may have overridden the method. startActivityForResult(intent, -1); &#125;&#125;public void startActivityForResult(@RequiresPermission Intent intent, int requestCode) &#123; startActivityForResult(intent, requestCode, null);&#125;public void startActivityForResult(@RequiresPermission Intent intent, int requestCode, @Nullable Bundle options) &#123; //mParentè¡¨ç¤ºå½“å‰Activityçš„çˆ¶ç±»ï¼Œå½“æ ¹æ´»åŠ¨è¿˜æ²¡åˆ›å»ºåˆ™mParent==null if (mParent == null) &#123; options = transferSpringboardActivityOptions(options); Instrumentation.ActivityResult ar = mInstrumentation.execStartActivity( this, mMainThread.getApplicationThread(), mToken, this, intent, requestCode, options); ... &#125; ...&#125; ä»Žä¸Šé¢ä»£ç å¯ä»¥å‘çŽ°startActivityçš„æœ€ç»ˆå®žçŽ°æ˜¯startActivityForResultï¼ŒstartActivity()ç¬¬äºŒä¸ªå‚æ•°ä¸º-1è¡¨ç¤ºLauncherä¸éœ€è¦çŸ¥é“æ ¹Activityçš„å¯åŠ¨ç»“æžœ,ç„¶åŽåœ¨startActivityForResultä¸­ç”±äºŽæ­¤æ—¶æ ¹Activityè¿˜æ²¡æœ‰åˆ›å»ºï¼Œæ•…mParent=null,æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³æ³¨mParent=nullçš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸­ä¼šè°ƒç”¨Instrumentationçš„execStartActivityã€‚è¿™æ—¶å€™ä¹Ÿè®¸ä½ å°±ä¼šé—®è¿™ä¸ªInstrumentationæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦äº¤ç»™å®ƒå¤„ç†ï¼Ÿå…¶å®žInstrumentationè¿™ä¸ªç±»å¾ˆé‡è¦ï¼Œé‡è¦ä½“çŽ°åœ¨å¯¹Activityç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨ã€‚æ¯ä¸ªActivityéƒ½æŒæœ‰Instrumentationå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯æ•´ä¸ªè¿›ç¨‹åªä¼šå­˜åœ¨ä¸€ä¸ªInstrumentationå¯¹è±¡ã€‚çœ‹çœ‹Instrumentationçš„execStartActivityè¿™ä¸ªæ–¹æ³•ã€‚ frameworks/base/core/java/android/app/Instrumentation.java 12345678910111213141516171819public ActivityResult execStartActivity( Context who, IBinder contextThread, IBinder token, Activity target, Intent intent, int requestCode, Bundle options) &#123; ... try &#123; ... //èŽ·å–AMSçš„ä»£ç†å¯¹è±¡ int result = ActivityManager.getService() .startActivity(whoThread, who.getBasePackageName(), intent, intent.resolveTypeIfNeeded(who.getContentResolver()), token, target != null ? target.mEmbeddedID : null, requestCode, 0, null, options); checkStartActivityResult(result, intent); &#125; catch (RemoteException e) &#123; throw new RuntimeException(&quot;Failure from system&quot;, e); &#125; return null;&#125; åœ¨è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨ActivityManagerçš„getServiceæ–¹æ³•æ¥å¾—åˆ°AMSçš„ä»£ç†å¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨è¿™ä¸ªä»£ç†å¯¹è±¡çš„ startActivityæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªä»£ç†å¯¹è±¡æ˜¯è°å‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€æŽ¢ç©¶ç«Ÿ 123456789101112131415161718@UnsupportedAppUsagepublic static IActivityManager getService() &#123; return IActivityManagerSingleton.get();&#125;@UnsupportedAppUsageprivate static final Singleton&lt;IActivityManager&gt; IActivityManagerSingleton = new Singleton&lt;IActivityManager&gt;() &#123; @Override protected IActivityManager create() &#123; //å¾—åˆ°activityçš„serviceå¼•ç”¨ï¼Œå³IBinderç±»åž‹çš„AMSå¼•ç”¨ final IBinder b = ServiceManager.getService(Context.ACTIVITY_SERVICE); //è½¬æ¢æˆIActivityManagerå¯¹è±¡ final IActivityManager am = IActivityManager.Stub.asInterface(b); return am; &#125; &#125;; å¯ä»¥å‘çŽ°åœ¨Singletonä¸­çš„createæ–¹æ³•ä¸­ç”±äºŽbæ˜¯AMSå¼•ç”¨ä½œä¸ºæœåŠ¡ç«¯å¤„äºŽSystemServerè¿›ç¨‹ä¸­ï¼Œä¸Žå½“å‰Launcherè¿›ç¨‹ä½œä¸ºå®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯ä¸åœ¨åŒä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥amè¿”å›žçš„æ˜¯IActivityManager.Stubçš„ä»£ç†å¯¹è±¡ï¼Œæ­¤æ—¶å¦‚æžœè¦å®žçŽ°å®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œåªéœ€è¦åœ¨AMSç»§æ‰¿äº†IActivityManager.Stubç±»å¹¶å®žçŽ°äº†ç›¸åº”çš„æ–¹æ³•ï¼Œè€Œé€šè¿‡ä¸‹é¢çš„ä»£ç å¯ä»¥å‘çŽ°AMSåˆšå¥½æ˜¯ç»§æ‰¿äº†IActivityManager.Stubç±»çš„ï¼Œè¿™æ ·Launcherè¿›ç¨‹ä½œä¸ºå®¢æˆ·ç«¯å°±æ‹¥æœ‰äº†æœåŠ¡ç«¯AMSçš„ä»£ç†å¯¹è±¡ï¼Œç„¶åŽå°±å¯ä»¥è°ƒç”¨AMSçš„æ–¹æ³•æ¥å®žçŽ°å…·ä½“åŠŸèƒ½äº†ï¼Œå°±è¿™æ ·Launcherçš„å·¥ä½œå°±äº¤ç»™AMSå®žçŽ°äº†ã€‚ 12345public class ActivityManagerService extends IActivityManager.Stub implements Watchdog.Monitor, BatteryStatsImpl.BatteryCallback &#123; &#125;å¤åˆ¶ä»£ç  äºŒã€AMSå‘é€åˆ›å»ºåº”ç”¨è¿›ç¨‹è¯·æ±‚é€šè¿‡ä¸Šé¢çš„åˆ†æžï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“çŽ°åœ¨ä»»åŠ¡å·²ç»äº¤ç»™äº†AMSï¼Œå…¥å£æ˜¯AMSçš„startActivityã€‚ 1. æ—¶åºå›¾ 2. è¯¦ç»†è¿‡ç¨‹2.1 AMSå°†è¯·æ±‚ä»»åŠ¡è½¬ç§»ç»™Processé¦–å…ˆæ¥çœ‹çœ‹åœ¨AMSä¸­çš„startActivityæ–¹æ³•ï¼š æºç ï¼šframeworks/base/services/core/java/com/android/server/am/ActivityManagerService.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546@Overridepublic final int startActivity(IApplicationThread caller, String callingPackage, Intent intent, String resolvedType, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, Bundle bOptions) &#123; return startActivityAsUser(caller, callingPackage, intent, resolvedType, resultTo, resultWho, requestCode, startFlags, profilerInfo, bOptions, UserHandle.getCallingUserId());&#125;@Overridepublic final int startActivityAsUser(IApplicationThread caller, String callingPackage, Intent intent, String resolvedType, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, Bundle bOptions, int userId) &#123; return startActivityAsUser(caller, callingPackage, intent, resolvedType, resultTo, resultWho, requestCode, startFlags, profilerInfo, bOptions, userId, true /*validateIncomingUser*/);&#125;public final int startActivityAsUser(IApplicationThread caller, String callingPackage, Intent intent, String resolvedType, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, Bundle bOptions, int userId, boolean validateIncomingUser) &#123; //åˆ¤æ–­è°ƒç”¨è€…çš„è¿›ç¨‹æ˜¯å¦éš”ç¦» enforceNotIsolatedCaller(&quot;startActivity&quot;); //æ£€æŸ¥è°ƒç”¨è€…æƒé™ userId = mActivityStartController.checkTargetUser(userId, validateIncomingUser, Binder.getCallingPid(), Binder.getCallingUid(), &quot;startActivityAsUser&quot;); // TODO: Switch to user app stacks here. return mActivityStartController.obtainStarter(intent, &quot;startActivityAsUser&quot;) .setCaller(caller) .setCallingPackage(callingPackage) .setResolvedType(resolvedType) .setResultTo(resultTo) .setResultWho(resultWho) .setRequestCode(requestCode) .setStartFlags(startFlags) .setProfilerInfo(profilerInfo) .setActivityOptions(bOptions) .setMayWait(userId) .execute();&#125; startActivityæ–¹æ³•ç»è¿‡å¤šä¸ªæ–¹æ³•è°ƒç”¨ä¼šåŽ»æ‰§è¡ŒstartActivityAsUseræ–¹æ³•ï¼Œåœ¨startActivityAsUseræ–¹æ³•æœ€åŽä¼šè¿”å›žmActivityStartControllerçš„ä¸€é•¿ä¸²é“¾å¼è°ƒç”¨æ–¹æ³•ï¼Œå¦‚æžœAlertDialogçš„è¯ï¼Œåº”è¯¥ä¸éš¾çœ‹å‡ºè¿™é“¾å¼æ–¹æ³•è‚¯å®šéƒ½æ˜¯è¿”å›žä¸€ä¸ªç±»åž‹çš„å¯¹è±¡çš„ï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹çœ‹obtainStarterçš„è¿”å›žç±»åž‹å°±å¯ä»¥çŸ¥é“è¿™ä¸ªå¯¹è±¡æ˜¯ä»€ä¹ˆç±»åž‹äº†ã€‚ frameworks/base/services/core/java/com/android/server/am/ActivityStartController.java 1234ActivityStarter obtainStarter(Intent intent, String reason) &#123; return mFactory.obtain().setIntent(intent).setReason(reason);&#125; å¯ä»¥å‘çŽ°è¿™ä¸ªobtainStarterè¿”å›žçš„æ˜¯ActivityStarterç±»åž‹çš„ï¼Œæ‰€ä»¥é“¾å¼æ–¹æ³•å°±æ˜¯å¯¹ActivityStarterå¯¹è±¡è®¾ç½®äº†è¦å¯åŠ¨çš„æ´»åŠ¨çš„ç›¸å…³ä¿¡æ¯ï¼Œæœ€åŽå†è°ƒç”¨ActivityStarterå¯¹è±¡executeæ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸‹ä¸€æ­¥æ‰€éœ€è¦çœ‹çš„å°±æ˜¯è¿™ä¸ªexecuteæ–¹æ³•ã€‚ frameworks/base/services/core/java/com/android/server/am/ActivityStarter.java 12345678910111213141516171819202122232425262728293031int execute() &#123; try &#123; // TODO(b/64750076): Look into passing request directly to these methods to allow // for transactional diffs and preprocessing. if (mRequest.mayWait) &#123; return startActivityMayWait(mRequest.caller, mRequest.callingUid, mRequest.callingPackage, mRequest.intent, mRequest.resolvedType, mRequest.voiceSession, mRequest.voiceInteractor, mRequest.resultTo, mRequest.resultWho, mRequest.requestCode, mRequest.startFlags, mRequest.profilerInfo, mRequest.waitResult, mRequest.globalConfig, mRequest.activityOptions, mRequest.ignoreTargetSecurity, mRequest.userId, mRequest.inTask, mRequest.reason, mRequest.allowPendingRemoteAnimationRegistryLookup, mRequest.originatingPendingIntent); &#125; else &#123; return startActivity(mRequest.caller, mRequest.intent, mRequest.ephemeralIntent, mRequest.resolvedType, mRequest.activityInfo, mRequest.resolveInfo, mRequest.voiceSession, mRequest.voiceInteractor, mRequest.resultTo, mRequest.resultWho, mRequest.requestCode, mRequest.callingPid, mRequest.callingUid, mRequest.callingPackage, mRequest.realCallingPid, mRequest.realCallingUid, mRequest.startFlags, mRequest.activityOptions, mRequest.ignoreTargetSecurity, mRequest.componentSpecified, mRequest.outActivity, mRequest.inTask, mRequest.reason, mRequest.allowPendingRemoteAnimationRegistryLookup, mRequest.originatingPendingIntent); &#125; &#125; finally &#123; onExecutionComplete(); &#125;&#125; å› ä¸ºåœ¨startActivityAsUserçš„é“¾å¼æ–¹æ³•ä¸­æˆ‘ä»¬è°ƒç”¨äº†setMayWaitè¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œçš„mRequest.mayWaitä¸ºtrueï¼Œæ•…ä¼šç»§ç»­è°ƒç”¨startActivityMayWaitæ–¹æ³•ã€‚ ActivityStarter#startActivityMayWait 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869 private int startActivityMayWait(IApplicationThread caller, int callingUid, String callingPackage, Intent intent, String resolvedType, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, WaitResult outResult, Configuration globalConfig, SafeActivityOptions options, boolean ignoreTargetSecurity, int userId, TaskRecord inTask, String reason, boolean allowPendingRemoteAnimationRegistryLookup, PendingIntentRecord originatingPendingIntent) &#123; ..... //æ ¹æ®intentåœ¨ç³»ç»Ÿä¸­æ‰¾åˆ°åˆé€‚çš„åº”ç”¨çš„activityï¼Œå¦‚æžœæœ‰å¤šä¸ªactivityå¯é€‰æ‹©ï¼Œ//åˆ™ä¼šå¼¹å‡ºResolverActivityè®©ç”¨æˆ·é€‰æ‹©åˆé€‚çš„åº”ç”¨ã€‚ ActivityInfo aInfo = mSupervisor.resolveActivity(intent, rInfo, startFlags, profilerInfo); int res = startActivity(caller, intent, ephemeralIntent, resolvedType, aInfo, rInfo, voiceSession, voiceInteractor, resultTo, resultWho, requestCode, callingPid, callingUid, callingPackage, realCallingPid, realCallingUid, startFlags, options, ignoreTargetSecurity, componentSpecified, outRecord, inTask, reason, allowPendingRemoteAnimationRegistryLookup, originatingPendingIntent); .... &#125; private int startActivity(IApplicationThread caller, Intent intent, Intent ephemeralIntent, String resolvedType, ActivityInfo aInfo, ResolveInfo rInfo, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, IBinder resultTo, String resultWho, int requestCode, int callingPid, int callingUid, String callingPackage, int realCallingPid, int realCallingUid, int startFlags, SafeActivityOptions options, boolean ignoreTargetSecurity, boolean componentSpecified, ActivityRecord[] outActivity, TaskRecord inTask, String reason, boolean allowPendingRemoteAnimationRegistryLookup) &#123; ... mLastStartActivityResult = startActivity(caller, intent, ephemeralIntent, resolvedType, aInfo, rInfo, voiceSession, voiceInteractor, resultTo, resultWho, requestCode, callingPid, callingUid, callingPackage, realCallingPid, realCallingUid, startFlags, options, ignoreTargetSecurity, componentSpecified, mLastStartActivityRecord, inTask, allowPendingRemoteAnimationRegistryLookup); ... return getExternalResult(mLastStartActivityResult); &#125; private int startActivity(IApplicationThread caller, Intent intent, Intent ephemeralIntent, String resolvedType, ActivityInfo aInfo, ResolveInfo rInfo, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, IBinder resultTo, String resultWho, int requestCode, int callingPid, int callingUid, String callingPackage, int realCallingPid, int realCallingUid, int startFlags, SafeActivityOptions options, boolean ignoreTargetSecurity, boolean componentSpecified, ActivityRecord[] outActivity, TaskRecord inTask, boolean allowPendingRemoteAnimationRegistryLookup) &#123; ... return startActivity(r, sourceRecord, voiceSession, voiceInteractor, startFlags, true /* doResume */, checkedOptions, inTask, outActivity); &#125; private int startActivity(final ActivityRecord r, ActivityRecord sourceRecord, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, int startFlags, boolean doResume, ActivityOptions options, TaskRecord inTask, ActivityRecord[] outActivity) &#123; ... result = startActivityUnchecked(r, sourceRecord, voiceSession, voiceInteractor, startFlags, doResume, options, inTask, outActivity); ... postStartActivityProcessing(r, result, mTargetStack); return result; &#125; startActivityMayWaitæ–¹æ³•ç»è¿‡è°ƒç”¨å¤šæ¬¡çš„startActivityæ–¹æ³•åŽä¼šè°ƒç”¨åˆ°startActivityUncheckedè¿™ä¸ªæ–¹æ³•ï¼Œé‚£è¿™ä¸ªæ–¹æ³•æ˜¯å¹²å•¥çš„å‘¢ï¼Ÿè¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®å¯åŠ¨æ ‡å¿—ä½å’ŒActivityå¯åŠ¨æ¨¡å¼æ¥å†³å®šå¦‚ä½•å¯åŠ¨ä¸€ä¸ªActivityä»¥åŠæ˜¯å¦è¦è°ƒç”¨deliverNewIntentæ–¹æ³•é€šçŸ¥Activityæœ‰ä¸€ä¸ªIntentè¯•å›¾é‡æ–°å¯åŠ¨å®ƒã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€å¼€å§‹å°†æ´»åŠ¨è®¾ç½®äº†FLAG_ACTIVITY_NEW_TASKåŽå°†åˆ›å»ºä¸€ä¸ªä»»åŠ¡æ ˆï¼Œå…¶å®ƒçš„å°±è‡ªè¡Œçœ‹ä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940 private int startActivityUnchecked(final ActivityRecord r, ActivityRecord sourceRecord, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, int startFlags, boolean doResume, ActivityOptions options, TaskRecord inTask, ActivityRecord[] outActivity) &#123;... if (mStartActivity.resultTo == null &amp;&amp; mInTask == null &amp;&amp; !mAddingToTask &amp;&amp; (mLaunchFlags &amp; FLAG_ACTIVITY_NEW_TASK) != 0) &#123; newTask = true; //åˆ›å»ºæ–°çš„TaskRecord result = setTaskFromReuseOrCreateNewTask( taskToAffiliate, preferredLaunchStackId, topStack); &#125; else if (mSourceRecord != null) &#123; result = setTaskFromSourceRecord(); &#125; else if (mInTask != null) &#123; result = setTaskFromInTask(); &#125; else &#123; setTaskToCurrentTopOrCreateNewTask(); &#125; ... if (mDoResume) &#123; final ActivityRecord topTaskActivity = mStartActivity.getTask().topRunningActivityLocked(); if (!mTargetStack.isFocusable() || (topTaskActivity != null &amp;&amp; topTaskActivity.mTaskOverlay &amp;&amp; mStartActivity != topTaskActivity)) &#123; ... &#125; else &#123; if (mTargetStack.isFocusable() &amp;&amp; !mSupervisor.isFocusedStack(mTargetStack)) &#123; mTargetStack.moveToFront(&quot;startActivityUnchecked&quot;); &#125; mSupervisor.resumeFocusedStackTopActivityLocked(mTargetStack, mStartActivity, mOptions); &#125; &#125; else &#123; mTargetStack.addRecentActivityLocked(mStartActivity); &#125; ...&#125; ç„¶åŽæ— è®ºä»¥ä½•ç§æ¨¡å¼å¯åŠ¨æœ€ç»ˆéƒ½ä¼šè°ƒç”¨ActivityStackSupervisor.resumeFocusedStackTopActivityLockedæ–¹æ³•ã€‚ frameworks/base/services/core/java/com/android/server/am/ActivityStackSupervisor.java 123456789boolean resumeFocusedStackTopActivityLocked( ActivityStack targetStack, ActivityRecord target, ActivityOptions targetOptions) &#123; .... if (targetStack != null &amp;&amp; isFocusedStack(targetStack)) &#123; return targetStack.resumeTopActivityUncheckedLocked(target, targetOptions); &#125; ....&#125; äºŽæ˜¯åˆè°ƒç”¨äº†ActivityStackçš„resumeTopActivityUncheckedLocked frameworks/base/services/core/java/com/android/server/am/ActivityStack.java 1234567891011121314151617181920 @GuardedBy(&quot;mService&quot;) boolean resumeTopActivityUncheckedLocked(ActivityRecord prev, ActivityOptions options) &#123; ... try &#123; // Protect against recursion. mStackSupervisor.inResumeTopActivity = true; result = resumeTopActivityInnerLocked(prev, options); &#125; ... &#125;private boolean resumeTopActivityInnerLocked(ActivityRecord prev, ActivityOptions options) &#123; ... mStackSupervisor.startSpecificActivityLocked(next, true, true); &#125; if (DEBUG_STACK) mStackSupervisor.validateTopActivitiesLocked(); return true;&#125; emmmmâ€¦..ï¼Œçœ‹åˆ°è¿™ä¼°è®¡éƒ½æ‡µé€¼äº†ï¼Œå‡ ä¸ªç±»è·³æ¥è·³åŽ»ä¹Ÿä¸çŸ¥é“å¹²äº†äº›ä»€ä¹ˆï¼Œä¸æ…Œï¼Œè®©æˆ‘ä»¬åšæŒçœ‹ä¸‹ActivityStackSupervisor.startSpecificActivityLocked,å› ä¸ºè¿™ä¸ªæ–¹æ³•å¾ˆé‡è¦ã€‚è¿™ä¸ªæ–¹æ³•å°†æ˜¯æ™®é€šActivityå’Œæ ¹Activityå¯åŠ¨æµç¨‹çš„åˆ†å²”è·¯å£ã€‚ ActivityStackSupervisor#startSpecificActivityLocked 1234567891011121314151617181920212223242526272829303132 void startSpecificActivityLocked(ActivityRecord r, boolean andResume, boolean checkConfig) &#123; //èŽ·å–å³å°†è¦å¯åŠ¨çš„Activityçš„æ‰€åœ¨çš„åº”ç”¨ç¨‹åºè¿›ç¨‹ ProcessRecord app = mService.getProcessRecordLocked(r.processName, r.info.applicationInfo.uid, true); //å¦‚æžœåº”ç”¨è¿›ç¨‹å·²ç»å­˜åœ¨ if (app != null &amp;&amp; app.thread != null) &#123; try &#123; if ((r.info.flags&amp;ActivityInfo.FLAG_MULTIPROCESS) == 0 || !&quot;android&quot;.equals(r.info.packageName)) &#123; // Don&#x27;t add this if it is a platform component that is marked // to run in multiple processes, because this is actually // part of the framework so doesn&#x27;t make sense to track as a // separate apk in the process. app.addPackage(r.info.packageName, r.info.applicationInfo.longVersionCode, mService.mProcessStats); &#125; realStartActivityLocked(r, app, andResume, checkConfig); return; &#125; catch (RemoteException e) &#123; Slog.w(TAG, &quot;Exception when starting activity &quot; + r.intent.getComponent().flattenToShortString(), e); &#125; // If a dead object exception was thrown -- fall through to // restart the application. &#125;//åº”ç”¨è¿›ç¨‹è¿˜æœªåˆ›å»ºï¼Œåˆ™é€šè¿‡AMSè°ƒç”¨startProcessLockedå‘Zygoteè¿›ç¨‹å‘é€è¯·æ±‚ mService.startProcessLocked(r.processName, r.info.applicationInfo, true, 0, &quot;activity&quot;, r.intent.getComponent(), false, false, true); &#125; é˜…è¯»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“åœ¨æ–¹æ³•ä¸­é¦–å…ˆèŽ·å–åˆ°äº†å³å°†è¦å¯åŠ¨çš„Activityæ‰€åœ¨çš„åº”ç”¨è¿›ç¨‹ï¼Œå‡å¦‚æ˜¯æ™®é€šçš„Activityçš„å¯åŠ¨æµç¨‹çš„æ´»ï¼Œè¿™ä¸ªè¿›ç¨‹è‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œæ‰€ä»¥å°†æ‰§è¡ŒrealStartActivityLockedçš„æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä»¬çŽ°åœ¨è®¨è®ºçš„æ˜¯æ ¹Activityçš„å¯åŠ¨æµç¨‹ï¼Œç”±äºŽåº”ç”¨éƒ½è¿˜æœªå¯åŠ¨ï¼Œæ„å‘³ç€æ ¹Activityæ‰€åœ¨çš„åº”ç”¨è¿›ç¨‹è¿˜æœªåˆ›å»ºï¼Œè€ŒmServiceå…¶å®žå°±æ˜¯AMSï¼Œæ‰€ä»¥è¿™é‡Œå°†è°ƒç”¨AMSçš„startProcessLockedã€‚äºŽæ˜¯æˆ‘ä»¬åˆå›žåˆ°äº†æœ€åˆçš„èµ·ç‚¹AMSã€‚ ActivityManagerService.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116final ProcessRecord startProcessLocked(String processName, ApplicationInfo info, boolean knownToBeDead, int intentFlags, String hostingType, ComponentName hostingName, boolean allowWhileBooting, boolean isolated, boolean keepIfLarge) &#123; return startProcessLocked(processName, info, knownToBeDead, intentFlags, hostingType, hostingName, allowWhileBooting, isolated, 0 /* isolatedUid */, keepIfLarge, null /* ABI override */, null /* entryPoint */, null /* entryPointArgs */, null /* crashHandler */);&#125;final ProcessRecord startProcessLocked(String processName, ApplicationInfo info, boolean knownToBeDead, int intentFlags, String hostingType, ComponentName hostingName, boolean allowWhileBooting, boolean isolated, int isolatedUid, boolean keepIfLarge, String abiOverride, String entryPoint, String[] entryPointArgs, Runnable crashHandler) &#123; ... final boolean success = startProcessLocked(app, hostingType, hostingNameStr, abiOverride); ...&#125;@GuardedBy(&quot;this&quot;)private final boolean startProcessLocked(ProcessRecord app, String hostingType, String hostingNameStr, String abiOverride) &#123; return startProcessLocked(app, hostingType, hostingNameStr, false /* disableHiddenApiChecks */, abiOverride);&#125;private final boolean startProcessLocked(ProcessRecord app, String hostingType, String hostingNameStr, boolean disableHiddenApiChecks, String abiOverride) &#123; ... int uid = app.uid; //åˆ›å»ºåº”ç”¨è¿›ç¨‹çš„ç”¨æˆ·ID int[] gids = null; int mountExternal = Zygote.MOUNT_EXTERNAL_NONE; if (!app.isolated) &#123; int[] permGids = null; try &#123; checkTime(startTime, &quot;startProcess: getting gids from package manager&quot;); final IPackageManager pm = AppGlobals.getPackageManager(); permGids = pm.getPackageGids(app.info.packageName, MATCH_DEBUG_TRIAGED_MISSING, app.userId); StorageManagerInternal storageManagerInternal = LocalServices.getService( StorageManagerInternal.class); mountExternal = storageManagerInternal.getExternalStorageMountMode(uid, app.info.packageName); &#125; catch (RemoteException e) &#123; throw e.rethrowAsRuntimeException(); &#125; /* * å¯¹ç”¨æˆ·ç»„è¿›è¡Œåˆ›å»ºå’Œèµ‹å€¼ */ if (ArrayUtils.isEmpty(permGids)) &#123; gids = new int[3]; &#125; else &#123; gids = new int[permGids.length + 3]; System.arraycopy(permGids, 0, gids, 3, permGids.length); &#125; gids[0] = UserHandle.getSharedAppGid(UserHandle.getAppId(uid)); gids[1] = UserHandle.getCacheAppGid(UserHandle.getAppId(uid)); gids[2] = UserHandle.getUserGid(UserHandle.getUserId(uid)); // Replace any invalid GIDs if (gids[0] == UserHandle.ERR_GID) gids[0] = gids[2]; if (gids[1] == UserHandle.ERR_GID) gids[1] = gids[2]; &#125; ... //è¿™ä¸ªå‚æ•°åŽæ–‡ä¼šæåˆ° final String entryPoint = &quot;android.app.ActivityThread&quot;; return startProcessLocked(hostingType, hostingNameStr, entryPoint, app, uid, gids, runtimeFlags, mountExternal, seInfo, requiredAbi, instructionSet, invokeWith, startTime); &#125;private boolean startProcessLocked(String hostingType, String hostingNameStr, String entryPoint, ProcessRecord app, int uid, int[] gids, int runtimeFlags, int mountExternal, String seInfo, String requiredAbi, String instructionSet, String invokeWith, long startTime) &#123; .... //é‡ç‚¹å…³æ³¨ final ProcessStartResult startResult = startProcess(app.hostingType, entryPoint, app, app.startUid, gids, runtimeFlags, mountExternal, app.seInfo, requiredAbi, instructionSet, invokeWith, app.startTime); ...&#125;private ProcessStartResult startProcess(String hostingType, String entryPoint, ProcessRecord app, int uid, int[] gids, int runtimeFlags, int mountExternal, String seInfo, String requiredAbi, String instructionSet, String invokeWith, long startTime) &#123; .... if (hostingType.equals(&quot;webview_service&quot;)) &#123; startResult = startWebView(entryPoint, app.processName, uid, uid, gids, runtimeFlags, mountExternal, app.info.targetSdkVersion, seInfo, requiredAbi, instructionSet, app.info.dataDir, null, new String[] &#123;PROC_START_SEQ_IDENT + app.startSeq&#125;); &#125; else &#123; //é€šè¿‡Process.startæ–¹æ³•æ¥ä¸ºåº”ç”¨åˆ›å»ºè¿›ç¨‹ startResult = Process.start(entryPoint, app.processName, uid, uid, gids, runtimeFlags, mountExternal, app.info.targetSdkVersion, seInfo, requiredAbi, instructionSet, app.info.dataDir, invokeWith, new String[] &#123;PROC_START_SEQ_IDENT + app.startSeq&#125;); &#125; checkTime(startTime, &quot;startProcess: returned from zygote!&quot;); return startResult; &#125; finally &#123; Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); &#125;&#125; é€šè¿‡è°ƒç”¨å¤šä¸ªstartProcessLockedæ–¹æ³•åŽæœ€ç»ˆå°†è°ƒç”¨startProcessæ–¹æ³•ï¼Œä¸è¿‡éœ€è¦é‡ç‚¹çœ‹ä¸€ä¸‹ä¸Šé¢çš„ç¬¬å››ä¸ªstartProcessLockedï¼Œåœ¨è¯¥æ–¹æ³•ä¸­æœ‰ä¸ªentryPointå‚æ•°ä¸º â€œandroid.app.ActivityThreadâ€ï¼Œè¿™ä¸ªå‚æ•°å°†åœ¨åŽæ–‡è®²åˆ°åˆ›å»ºåº”ç”¨è¿›ç¨‹åŽå¯åŠ¨ActivityThreadä¼šç”¨åˆ°ã€‚ç„¶åŽåœ¨startProcessæ–¹æ³•é‡Œå°†è°ƒç”¨Process.startæ¥å‘é€åº”ç”¨åˆ›å»ºè¿›ç¨‹çš„è¯·æ±‚ã€‚è¿™æ ·AMSå°±å°†å‘é€è¯·æ±‚çš„äº‹äº¤ç»™äº†Process 2.2 Processå‘Zygoteè¿›ç¨‹å‘é€åˆ›å»ºåº”ç”¨è¿›ç¨‹è¯·æ±‚ frameworks/base/core/java/android/os/Process.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public static final ProcessStartResult start(final String processClass, final String niceName, int uid, int gid, int[] gids, int runtimeFlags, int mountExternal, int targetSdkVersion, String seInfo, String abi, String instructionSet, String appDataDir, String invokeWith, String[] zygoteArgs) &#123; return ZYGOTE_PROCESS.start(processClass, niceName, uid, gid, gids, runtimeFlags, mountExternal, targetSdkVersion, seInfo, abi, instructionSet, appDataDir, invokeWith, /*useBlastulaPool=*/ true, zygoteArgs);&#125;public final Process.ProcessStartResult start(final String processClass, final String niceName, int uid, int gid, int[] gids, int runtimeFlags, int mountExternal, int targetSdkVersion, String seInfo, String abi, String instructionSet, String appDataDir, String invokeWith, boolean useBlastulaPool, String[] zygoteArgs) &#123; try &#123; //é‡ç‚¹å…³æ³¨ return startViaZygote(processClass, niceName, uid, gid, gids, runtimeFlags, mountExternal, targetSdkVersion, seInfo, abi, instructionSet, appDataDir, invokeWith, /*startChildZygote=*/false, useBlastulaPool, zygoteArgs); &#125; catch (ZygoteStartFailedEx ex) &#123; Log.e(LOG_TAG, &quot;Starting VM process through Zygote failed&quot;); throw new RuntimeException( &quot;Starting VM process through Zygote failed&quot;, ex); &#125;&#125; ä»Žä¸Šé¢å¯ä»¥å‘çŽ°ï¼ŒProcessä¸­çš„startæ–¹æ³•çš„å®žçŽ°æ˜¯startViaZygoteæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹è§‚å¯Ÿä¸‹è¿™ä¸ªæ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243private Process.ProcessStartResult startViaZygote(final String processClass, final String niceName, final int uid, final int gid, final int[] gids, int runtimeFlags, int mountExternal, int targetSdkVersion, String seInfo, String abi, String instructionSet, String appDataDir, String invokeWith, boolean startChildZygote, boolean useBlastulaPool, String[] extraArgs) throws ZygoteStartFailedEx &#123; ArrayList&lt;String&gt; argsForZygote = new ArrayList&lt;String&gt;(); // --runtime-args, --setuid=, --setgid=, //åˆ›å»ºå­—ç¬¦ä¸²åˆ—è¡¨argsForZygoteï¼Œå¹¶å°†å¯åŠ¨åº”ç”¨è¿›ç¨‹çš„å¯åŠ¨å‚æ•°ä¿å­˜åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ argsForZygote.add(&quot;--runtime-args&quot;); argsForZygote.add(&quot;--setuid=&quot; + uid); argsForZygote.add(&quot;--setgid=&quot; + gid); argsForZygote.add(&quot;--runtime-flags=&quot; + runtimeFlags); if (mountExternal == Zygote.MOUNT_EXTERNAL_DEFAULT) &#123; argsForZygote.add(&quot;--mount-external-default&quot;); &#125; else if (mountExternal == Zygote.MOUNT_EXTERNAL_READ) &#123; argsForZygote.add(&quot;--mount-external-read&quot;); &#125; else if (mountExternal == Zygote.MOUNT_EXTERNAL_WRITE) &#123; argsForZygote.add(&quot;--mount-external-write&quot;); &#125; argsForZygote.add(&quot;--target-sdk-version=&quot; + targetSdkVersion); ... synchronized(mLock) &#123; //é‡ç‚¹å…³æ³¨ return zygoteSendArgsAndGetResult(openZygoteSocketIfNeeded(abi), useBlastulaPool, argsForZygote); &#125;&#125; åœ¨startViaZygoteä¸­ä¼šåˆ›å»ºå­—ç¬¦ä¸²åˆ—è¡¨argsForZygoteæ¥ä¿å­˜å°†è¦åˆ›å»ºçš„åº”ç”¨è¿›ç¨‹çš„å¯åŠ¨å‚æ•°ï¼Œç„¶åŽæœ€åŽä¼šè°ƒç”¨zygoteSendArgsAndGetResultæ–¹æ³•ï¼Œè€Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¼šè°ƒç”¨openZygoteSocketIfNeededæ–¹æ³•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯å¯åŠ¨å‚æ•°åˆ—è¡¨ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆçœ‹çœ‹openZygoteSocketIfNeededè¿™ä¸ªæ–¹æ³•çš„å®žçŽ°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849 private ZygoteState openZygoteSocketIfNeeded(String abi) throws ZygoteStartFailedEx &#123; Preconditions.checkState(Thread.holdsLock(mLock), &quot;ZygoteProcess lock not held&quot;);//64ä½è¿›ç¨‹ä¸­çš„ if (primaryZygoteState == null || primaryZygoteState.isClosed()) &#123; try &#123; //è°ƒç”¨ZygoteStateçš„connectå‡½æ•°ä¸ŽmZygoteSocketAddresså»ºç«‹è¿žæŽ¥ï¼Œ //è¿™é‡ŒmZygoteSocketAddressçš„å€¼ä¸ºâ€œzygoteâ€ primaryZygoteState = ZygoteState.connect(mZygoteSocketAddress, mBlastulaPoolSocketAddress); &#125; catch (IOException ioe) &#123; throw new ZygoteStartFailedEx(&quot;Error connecting to primary zygote&quot;, ioe); &#125; maybeSetApiBlacklistExemptions(primaryZygoteState, false); maybeSetHiddenApiAccessLogSampleRate(primaryZygoteState); &#125; if (primaryZygoteState.matches(abi)) &#123; //Socketè¿›è¡Œè¿žæŽ¥æˆåŠŸå¹¶åŒ¹é…abiåŽä¼šè¿”å›žZygoteStateç±»åž‹å¯¹è±¡ return primaryZygoteState; &#125; // 32ä½Zygoteè¿›ç¨‹ä¸­ if (secondaryZygoteState == null || secondaryZygoteState.isClosed()) &#123; try &#123; secondaryZygoteState = ZygoteState.connect(mZygoteSecondarySocketAddress, mBlastulaPoolSecondarySocketAddress); &#125; catch (IOException ioe) &#123; throw new ZygoteStartFailedEx(&quot;Error connecting to secondary zygote&quot;, ioe); &#125; maybeSetApiBlacklistExemptions(secondaryZygoteState, false); maybeSetHiddenApiAccessLogSampleRate(secondaryZygoteState); &#125; if (secondaryZygoteState.matches(abi)) &#123; return secondaryZygoteState; &#125; throw new ZygoteStartFailedEx(&quot;Unsupported zygote ABI: &quot; + abi); &#125; openZygoteSocketIfNeededè¿™ä¸ªæ–¹æ³•ä»Žæ–¹æ³•åå°±å¯ä»¥æŽ¨æµ‹å‡ºè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼Œå¤§æ¦‚å°±æ˜¯ä¸ŽZygoteå»ºç«‹Socketè¿žæŽ¥ã€‚è€Œä»Žä»£ç ä¸­ä¹Ÿè¯å®žäº†è¿™ä¸€ç‚¹ï¼Œåœ¨ä»£ç ä¸­ä¼šæ ¹æ®Zygoteè¿›ç¨‹çš„ä½æ•°æ¥å»ºç«‹ç›¸åº”çš„Socketè¿žæŽ¥ï¼Œç„¶åŽè¿”å›žZygoteStateç±»åž‹çš„å¯¹è±¡ã€‚æ—¢ç„¶ä¸ŽZygoteå»ºç«‹å¥½Socketè¿žæŽ¥åŽï¼ŒæŽ¥ä¸‹æ¥å½“ç„¶æ˜¯å‘é€è¯·æ±‚ï¼æˆ‘ä»¬æ¥çœ‹çœ‹zygoteSendArgsAndGetResultè¿™ä¸ªæ–¹æ³•ä¸­æ˜¯å¦‚ä½•å‘é€è¯·æ±‚çš„ï¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677//å°†ä¼ å…¥çš„åº”ç”¨è¿›ç¨‹çš„å¯åŠ¨å‚æ•°argsForZygoteå†™å…¥åˆ°ZygoteState @GuardedBy(&quot;mLock&quot;) private static Process.ProcessStartResult zygoteSendArgsAndGetResult( ZygoteState zygoteState, boolean useBlastulaPool, ArrayList&lt;String&gt; args) throws ZygoteStartFailedEx &#123; String msgStr = Integer.toString(args.size()) + &quot;\\n&quot; + String.join(&quot;\\n&quot;, args) + &quot;\\n&quot;; // Should there be a timeout on this? Process.ProcessStartResult result = new Process.ProcessStartResult(); // TODO (chriswailes): Move branch body into separate function. if (useBlastulaPool &amp;&amp; Zygote.BLASTULA_POOL_ENABLED &amp;&amp; isValidBlastulaCommand(args)) &#123; LocalSocket blastulaSessionSocket = null; try &#123; blastulaSessionSocket = zygoteState.getBlastulaSessionSocket(); final BufferedWriter blastulaWriter = new BufferedWriter( new OutputStreamWriter(blastulaSessionSocket.getOutputStream()), Zygote.SOCKET_BUFFER_SIZE); final DataInputStream blastulaReader = new DataInputStream(blastulaSessionSocket.getInputStream()); blastulaWriter.write(msgStr); blastulaWriter.flush(); result.pid = blastulaReader.readInt(); // Blastulas can&#x27;t be used to spawn processes that need wrappers. result.usingWrapper = false; if (result.pid &lt; 0) &#123; throw new ZygoteStartFailedEx(&quot;Blastula specialization failed&quot;); &#125; return result; &#125; catch (IOException ex) &#123; // If there was an IOException using the blastula pool we will log the error and // attempt to start the process through the Zygote. Log.e(LOG_TAG, &quot;IO Exception while communicating with blastula pool - &quot; + ex.toString()); &#125; finally &#123; try &#123; blastulaSessionSocket.close(); &#125; catch (IOException ex) &#123; Log.e(LOG_TAG, &quot;Failed to close blastula session socket: &quot; + ex.getMessage()); &#125; &#125; &#125; try &#123; final BufferedWriter zygoteWriter = zygoteState.mZygoteOutputWriter; final DataInputStream zygoteInputStream = zygoteState.mZygoteInputStream; zygoteWriter.write(msgStr); zygoteWriter.flush(); // Always read the entire result from the input stream to avoid leaving // bytes in the stream for future process starts to accidentally stumble // upon. result.pid = zygoteInputStream.readInt(); result.usingWrapper = zygoteInputStream.readBoolean(); &#125; catch (IOException ex) &#123; zygoteState.close(); Log.e(LOG_TAG, &quot;IO Exception while communicating with Zygote - &quot; + ex.toString()); throw new ZygoteStartFailedEx(ex); &#125; if (result.pid &lt; 0) &#123; throw new ZygoteStartFailedEx(&quot;fork() failed&quot;); &#125; return result; &#125; å› ä¸ºåœ¨openZygoteSocketIfNeededä¸­æˆ‘ä»¬å·²ç»ä¸ŽZygoteè¿›ç¨‹å»ºç«‹äº†Socketè¿žæŽ¥ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å°†ä¼ å…¥çš„åº”ç”¨è¿›ç¨‹çš„å¯åŠ¨å‚æ•°argsForZygoteå†™å…¥åˆ°ZygoteStateã€‚è¿™æ ·AMSå°±å®Œæˆäº†å‘Zygoteè¿›ç¨‹å‘é€åˆ›å»ºåº”ç”¨è¿›ç¨‹çš„è¯·æ±‚çš„ä»»åŠ¡ã€‚ ä¸‰ã€Zygoteè¿›ç¨‹æŽ¥å—è¯·æ±‚å¹¶å­µåŒ–åº”ç”¨è¿›ç¨‹ä»Žä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼ŒAMSå·²ç»ä¸ŽZygoteè¿›ç¨‹å»ºç«‹Socketè¿žæŽ¥å¹¶å‘é€äº†åˆ›å»ºåº”ç”¨è¿›ç¨‹çš„è¯·æ±‚ï¼Œé‚£ä¹ˆZygoteè¿›ç¨‹æ˜¯åœ¨å“ªé‡Œæ”¶åˆ°è¯·æ±‚ï¼Œæ”¶åˆ°è¯·æ±‚åŽåˆæ˜¯æ€Žä¹ˆå¤„ç†çš„å‘¢ï¼Ÿé€šè¿‡é˜…è¯»åŽæˆ‘ä»¬çŸ¥é“Zygoteè¿›ç¨‹æ˜¯åœ¨ZygoteInitçš„mainæ–¹æ³•ä¸­æŽ¥å—è¯·æ±‚çš„ã€‚æ‰€ä»¥çŽ°åœ¨çš„å…¥å£å°±æ˜¯ZygoteInitçš„mainæ–¹æ³•ã€‚ 1. æ—¶åºå›¾ 2. è¯¦ç»†è¿‡ç¨‹ä»Žæ—¶åºå›¾ä¸Žä¸Šé¢çš„åˆ†æžæˆ‘ä»¬çŸ¥é“çŽ°åœ¨Zygoteè¿›ç¨‹æŽ¥å—è¯·æ±‚æ˜¯åœ¨mainæ–¹æ³•ï¼Œå°±è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªmainæ–¹æ³• frameworks/base/core/java/com/android/internal/os/ZygoteInit.java 12345678910111213141516171819202122232425262728293031323334353637383940 @UnsupportedAppUsage public static void main(String argv[]) &#123; ZygoteServer zygoteServer = new ZygoteServer(); Runnable caller; try &#123; ... //åˆ›å»ºåä¸ºzygoteçš„Socket zygoteServer.createZygoteSocket(socketName); .... //ç”±äºŽåœ¨init.rcä¸­è®¾ç½®äº†start-system-serverå‚æ•°,å› æ­¤ //è¿™é‡Œå°†å¯åŠ¨SystemServer,å¯è§SystemServerç”±Zygoteåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ if (startSystemServer) &#123; Runnable r = forkSystemServer(abiList, socketName, zygoteServer); if (r != null) &#123; r.run(); return; &#125; &#125; caller = Zygote.initBlastulaPool(); if (caller == null) &#123; Log.i(TAG, &quot;Accepting command socket connections&quot;); //ç­‰å¾…AMSçš„è¯·æ±‚ runSelectLoop(abiList); &#125; &#125; catch (Throwable ex) &#123; Log.e(TAG, &quot;System zygote died with exception&quot;, ex); throw ex; &#125; finally &#123; zygoteServer.closeServerSocket(); &#125; // We&#x27;re in the child process and have exited the select loop. Proceed to execute the // command. if (caller != null) &#123; caller.run(); &#125; &#125;å¤åˆ¶ä»£ç  é€šè¿‡mainæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“åœ¨è¿™ä¸ªmainæ–¹æ³•é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªServerç«¯çš„Socketï¼Œè¿™ä¸ªnameä¸ºâ€zygoteâ€çš„Socketç”¨æ¥ç­‰å¾…ActivityManagerServiceæ¥è¯·æ±‚Zygoteæ¥åˆ›å»ºæ–°çš„åº”ç”¨ç¨‹åºè¿›ç¨‹,åœ¨ä¸Šé¢AMSè¯·æ±‚çš„åˆ†æžä¸­æˆ‘ä»¬ä¹ŸçŸ¥é“å®¢æˆ·ç«¯å°†æ ¹æ®è¿™ä¸ªnameæ¥ä¸ŽZygoteçš„Socketå»ºç«‹è¿žæŽ¥ã€‚æŽ¥ä¸‹åŽ»ä¼šå¯åŠ¨SystemServerè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹ä¼šå¯åŠ¨å„ç§ç³»ç»ŸæœåŠ¡ï¼Œæ¯”å¦‚ä¸ŽActivityå¯åŠ¨æ¯æ¯ç›¸å…³çš„AMSã€‚æœ€åŽä¼šè°ƒç”¨ZygoteServer.runSelectLoop(abiList)æ¥ä½¿åˆ›å»ºçš„Socketè¿›å…¥æ— é™å¾ªçŽ¯ï¼Œç­‰å¾…AMSè¯·æ±‚ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªrunSelectLoop frameworks/base/core/java/com/android/internal/os/ZygoteServer.java 12345678910111213141516171819202122232425262728 Runnable runSelectLoop(String abiList) &#123; ArrayList&lt;ZygoteConnection&gt; peers = new ArrayList&lt;ZygoteConnection&gt;(); peers.add(null); while (true) &#123; while (--pollIndex &gt;= 0) &#123; if ((pollFDs[pollIndex].revents &amp; POLLIN) == 0) &#123; continue; &#125; if (pollIndex == 0) &#123; //ç›‘å¬Socketè¿žæŽ¥ï¼Œå……å½“æœåŠ¡ç«¯Socket ZygoteConnection newPeer = acceptCommandPeer(abiList); peers.add(newPeer); socketFDs.add(newPeer.getFileDescriptor()); &#125; else if (pollIndex &lt; blastulaPoolEventFDIndex) &#123; try &#123; //ä¸æ–­å¤„ç†å®¢æˆ·ç«¯çš„AMSçš„è¯·æ±‚ï¼Œç„¶åŽäº¤ç»™processOneCommand ZygoteConnection connection = peers.get(pollIndex); final Runnable command = connection.processOneCommand(this); &#125; .... &#125; &#125; &#125; &#125;å¤åˆ¶ä»£ç  å¯ä»¥å‘çŽ°è¿™ä¸ªæ–¹æ³•æ˜¯æ­»å¾ªçŽ¯è¡¨ç¤ºä¸åœçš„ç›‘å¬ç€Socketè¿žæŽ¥ã€‚acceptCommandPeeræ–¹æ³•å°±æ˜¯ç›‘å¬æ˜¯å¦æ”¶åˆ°äº†è¯·æ±‚ï¼Œå¦‚æžœæ”¶åˆ°äº†è¯·æ±‚å°±äº¤ç»™processOneCommandæ¥å®žçŽ° frameworks/base/core/java/com/android/internal/os/ZygoteConnection.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647 Runnable processOneCommand(ZygoteServer zygoteServer) &#123; String args[]; ZygoteArguments parsedArgs = null; FileDescriptor[] descriptors; try &#123; //èŽ·å–åº”ç”¨ç¨‹åºè¿›ç¨‹çš„å¯åŠ¨å‚æ•° args = Zygote.readArgumentList(mSocketReader); // TODO (chriswailes): Remove this and add an assert. descriptors = mSocket.getAncillaryFileDescriptors(); &#125; catch (IOException ex) &#123; throw new IllegalStateException(&quot;IOException on command socket&quot;, ex); &#125; .... parsedArgs = new ZygoteArguments(args); .... //forkå½“å‰è¿›ç¨‹åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ pid = Zygote.forkAndSpecialize(parsedArgs.mUid, parsedArgs.mGid, parsedArgs.mGids, parsedArgs.mRuntimeFlags, rlimits, parsedArgs.mMountExternal, parsedArgs.mSeInfo, parsedArgs.mNiceName, fdsToClose, fdsToIgnore, parsedArgs.mStartChildZygote, parsedArgs.mInstructionSet, parsedArgs.mAppDataDir, parsedArgs.mTargetSdkVersion); try &#123; //pidä¸º0åˆ™ä»£è¡¨è¿™ä¸ªè¿›ç¨‹ä¸ºå­è¿›ç¨‹ï¼Œå³æ–°åˆ›å»ºçš„åº”ç”¨ç¨‹åºè¿›ç¨‹ if (pid == 0) &#123; zygoteServer.setForkChild(); zygoteServer.closeServerSocket(); IoUtils.closeQuietly(serverPipeFd); serverPipeFd = null; return handleChildProc(parsedArgs, descriptors, childPipeFd, parsedArgs.mStartChildZygote); &#125; else &#123; // In the parent. A pid &lt; 0 indicates a failure and will be handled in // handleParentProc. IoUtils.closeQuietly(childPipeFd); childPipeFd = null; handleParentProc(pid, descriptors, serverPipeFd); return null; &#125; &#125; finally &#123; IoUtils.closeQuietly(childPipeFd); IoUtils.closeQuietly(serverPipeFd); &#125; &#125;å¤åˆ¶ä»£ç  åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å°†å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œé¦–å…ˆèŽ·å–åˆ°å°†è¦å¯åŠ¨çš„åº”ç”¨è¿›ç¨‹çš„å¯åŠ¨å‚æ•°ï¼Œç„¶åŽè°ƒç”¨forkAndSpecializeæ¥åˆ›å»ºåº”ç”¨è¿›ç¨‹ã€‚ frameworks/base/core/java/com/android/internal/os/Zygote.java 12345678910111213141516171819202122 public static int forkAndSpecialize(int uid, int gid, int[] gids, int runtimeFlags, int[][] rlimits, int mountExternal, String seInfo, String niceName, int[] fdsToClose, int[] fdsToIgnore, boolean startChildZygote, String instructionSet, String appDataDir, int targetSdkVersion) &#123; ZygoteHooks.preFork(); // Resets nice priority for zygote process. resetNicePriority(); int pid = nativeForkAndSpecialize( uid, gid, gids, runtimeFlags, rlimits, mountExternal, seInfo, niceName, fdsToClose, fdsToIgnore, startChildZygote, instructionSet, appDataDir); // Enable tracing as soon as possible for the child process. if (pid == 0) &#123; Zygote.disableExecuteOnly(targetSdkVersion); Trace.setTracingEnabled(true, runtimeFlags); // Note that this event ends at the end of handleChildProc, Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;PostFork&quot;); &#125; ZygoteHooks.postForkCommon(); return pid; &#125;å¤åˆ¶ä»£ç  åœ¨forkAndSpecializeä¸­ï¼Œæœ€ç»ˆå°†åˆ›å»ºåº”ç”¨è¿›ç¨‹çš„ä»»åŠ¡äº¤ç»™nativeForkAndSpecializeï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¯ä»¥çœ‹å‡ºæ¥åº”è¯¥æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œæ‰€ä»¥å…·ä½“å¦‚ä½•åˆ›å»ºçš„æˆ‘ä»¬å°±ä¸æ·±ç©¶äº†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è¿™éœ€è¦çŸ¥é“nativeForkAndSpecializeæœ€ç»ˆæ˜¯é€šè¿‡forkå½“å‰çº¿ç¨‹æ¥åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œè€ŒforkåŽä¼šæœ‰è¿”å›žå€¼ç»™pid: çˆ¶è¿›ç¨‹ä¸­ï¼Œforkè¿”å›žæ–°åˆ›å»ºçš„å­è¿›ç¨‹pid; å­è¿›ç¨‹ä¸­ï¼Œforkè¿”å›ž0ï¼› å‡ºçŽ°é”™è¯¯æ—¶ï¼Œforkè¿”å›žè´Ÿæ•°ã€‚ äºŽæ˜¯åˆ°è¿™é‡Œå­çº¿ç¨‹ä¹Ÿå°±æ˜¯åº”ç”¨è¿›ç¨‹å°±è¢«å­µåŒ–å‡ºæ¥äº†ã€‚ä½ ä»¥ä¸ºè¿™æ ·å°±ç»“æŸäº†ï¼Ÿå…¶å®žè¿˜æ—©å‘¢ï¼åˆ«å¿˜äº†æˆ‘ä»¬çš„æœ€ç»ˆä½¿å‘½æ˜¯æ ¹Activityçš„å¯åŠ¨ï¼Œè€ŒçŽ°åœ¨åªæ˜¯æœ‰äº†æ ¹Activityæ‰€éœ€è¦çš„åº”ç”¨è¿›ç¨‹ï¼Œé©å‘½å°šæœªæˆåŠŸï¼Œä»éœ€è¦åŠªåŠ›ï¼ å››ã€åº”ç”¨è¿›ç¨‹å¯åŠ¨ActivityThread1. æ—¶åºå›¾ 2. è¯¦ç»†è¿‡ç¨‹ä»Žä¸Šé¢æˆ‘ä»¬çŸ¥é“åº”ç”¨è¿›ç¨‹å·²ç»è¢«åˆ›å»ºï¼Œé‚£åˆ›å»ºåŽå‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬å›žå¤´çœ‹ä¸Šé¢çš„processOneCommandæ–¹æ³•ï¼Œç»†å¿ƒçš„ä½ è‚¯å®šä¼šå‘çŽ°å†å­µåŒ–å‡ºåº”ç”¨è¿›ç¨‹åŽï¼Œè¿˜æ˜¯æœ‰è¿”å›žå€¼çš„ã€‚ frameworks/base/core/java/com/android/internal/os/ZygoteConnection.java 1234567891011121314151617181920212223 Runnable processOneCommand(ZygoteServer zygoteServer) &#123; ....//forkå½“å‰è¿›ç¨‹åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ pid = Zygote.forkAndSpecialize(parsedArgs.mUid, parsedArgs.mGid, parsedArgs.mGids, parsedArgs.mRuntimeFlags, rlimits, parsedArgs.mMountExternal, parsedArgs.mSeInfo, parsedArgs.mNiceName, fdsToClose, fdsToIgnore, parsedArgs.mStartChildZygote, parsedArgs.mInstructionSet, parsedArgs.mAppDataDir, parsedArgs.mTargetSdkVersion); try &#123; //pidä¸º0åˆ™ä»£è¡¨è¿™ä¸ªè¿›ç¨‹ä¸ºå­è¿›ç¨‹ï¼Œå³æ–°åˆ›å»ºçš„åº”ç”¨ç¨‹åºè¿›ç¨‹ if (pid == 0) &#123; .... return handleChildProc(parsedArgs, descriptors, childPipeFd, parsedArgs.mStartChildZygote); &#125; else &#123; ... &#125; &#125; .... &#125; åœ¨ä¸Šé¢æˆ‘ä»¬åˆ†æžäº†å½“pid=0çš„æ—¶å€™ï¼Œåˆ™ä»£è¡¨äº†å½“å‰è¿›ç¨‹å·²ç»æ˜¯å­è¿›ç¨‹äº†ï¼Œå³åº”ç”¨è¿›ç¨‹ã€‚æ‰€ä»¥ä¸‹ä¸€æ­¥å°†æ‰§è¡ŒhandleChildProcæ–¹æ³•ã€‚ 1234567891011private Runnable handleChildProc(ZygoteArguments parsedArgs, FileDescriptor[] descriptors, FileDescriptor pipeFd, boolean isZygote) &#123; ..... if (!isZygote) &#123; return ZygoteInit.zygoteInit(parsedArgs.mTargetSdkVersion, parsedArgs.mRemainingArgs, null /* classLoader */); &#125; else &#123; .... &#125;&#125; è€ŒhandleChildProcæœ€ç»ˆåˆä¼šè°ƒç”¨ZygoteInit.zygoteInitæ–¹æ³•ã€‚å¦‚ä¸‹ frameworks/base/core/java/com/android/internal/os/ZygoteInit.java 12345678910111213141516 public static final Runnable zygoteInit(int targetSdkVersion, String[] argv, ClassLoader classLoader) &#123; if (RuntimeInit.DEBUG) &#123; Slog.d(RuntimeInit.TAG, &quot;RuntimeInit: Starting application from zygote&quot;); &#125; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;ZygoteInit&quot;); RuntimeInit.redirectLogStreams();//ä¸ºå½“å‰çš„VMè®¾ç½®æœªæ•èŽ·å¼‚å¸¸å™¨ RuntimeInit.commonInit();//Binderé©±åŠ¨åˆå§‹åŒ–ï¼Œè¯¥æ–¹æ³•å®ŒæˆåŽï¼Œå¯é€šè¿‡Binderè¿›è¡Œè¿›ç¨‹é€šä¿¡ ZygoteInit.nativeZygoteInit();//ä¸»è¦è°ƒç”¨SystemServerçš„mainæ–¹æ³• return RuntimeInit.applicationInit(targetSdkVersion, argv, classLoader); &#125; åœ¨è¿™ä¸ªæ–¹æ³•é‡Œä¼šåˆ›å»ºå½“å‰è¿›ç¨‹çš„Binderçº¿ç¨‹æ± ï¼Œä¾¿äºŽåŽç»­ä¸Žå…¶å®ƒè¿›ç¨‹é€šä¿¡ï¼Œç„¶åŽè°ƒç”¨äº†RuntimeInitçš„applicationInitæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š frameworks/base/core/java/com/android/internal/os/RuntimeInit.java 12345678protected static Runnable applicationInit(int targetSdkVersion, String[] argv, ClassLoader classLoader) &#123; ... final Arguments args = new Arguments(argv); // Remaining arguments are passed to the start class&#x27;s static main return findStaticMain(args.startClass, args.startArgs, classLoader); &#125; è¿™ä¸ªæ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨findStaticMainæ–¹æ³•ï¼Œä¸è¿‡éœ€æ³¨æ„çš„æ˜¯æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°args.startClasså…¶å®žå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡AMSå°†è¯·æ±‚ä»»åŠ¡è½¬ç§»ç»™Processä¸­åœ¨æœ€åŽå¼ºè°ƒçš„é‚£ä¸ªå‚æ•°ï¼šandroid.app.ActivityThreadã€‚ç„¶åŽæˆ‘ä»¬çœ‹çœ‹findStaticMainçš„å®žçŽ° 12345678910111213141516171819protected static Runnable findStaticMain(String className, String[] argv, ClassLoader classLoader) &#123; Class&lt;?&gt; cl; try &#123; cl = Class.forName(className, true, classLoader);//1 &#125; catch (ClassNotFoundException ex) &#123; .... &#125; Method m; try &#123; m = cl.getMethod(&quot;main&quot;, new Class[] &#123; String[].class &#125;);//2 &#125; catch (NoSuchMethodException ex) &#123; ... &#125; catch (SecurityException ex) &#123; ... &#125; return new MethodAndArgsCaller(m, argv);&#125; åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é¦–å…ˆåœ¨æ³¨é‡Š1é€šè¿‡åå°„èŽ·å–åˆ°android.app.ActivityThreadç±»ï¼Œç„¶åŽåœ¨æ³¨é‡Š2èŽ·å–åˆ°ActivityThreadçš„mainæ–¹æ³•ï¼Œæœ€åŽé€šè¿‡mainæ–¹æ³•æ¥æž„é€ MethodAndArgsCallerã€‚è€Œè¿™ä¸ªMethodAndArgsCalleræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä¸‹ï¼š frameworks/base/core/java/com/android/internal/os/RuntimeInit.java 1234567891011121314151617181920212223242526272829static class MethodAndArgsCaller implements Runnable &#123; /** method to call */ private final Method mMethod; /** argument array */ private final String[] mArgs; public MethodAndArgsCaller(Method method, String[] args) &#123; mMethod = method; mArgs = args; &#125; public void run() &#123; try &#123; mMethod.invoke(null, new Object[] &#123; mArgs &#125;); &#125; catch (IllegalAccessException ex) &#123; throw new RuntimeException(ex); &#125; catch (InvocationTargetException ex) &#123; Throwable cause = ex.getCause(); if (cause instanceof RuntimeException) &#123; throw (RuntimeException) cause; &#125; else if (cause instanceof Error) &#123; throw (Error) cause; &#125; throw new RuntimeException(ex); &#125; &#125; &#125; è¿½è¸ªä¸‹åŽ»ï¼ŒMethodAndArgsCallerå…¶å®žæ˜¯RuntimeInitçš„ä¸€ä¸ªå†…éƒ¨ç±»å¹¶ä¸”ç»§æ‰¿äº†Runnable,ç„¶åŽåœ¨runæ–¹æ³•ä¸­ä¼šé€šè¿‡åå°„è°ƒç”¨äº†mMethodæ–¹æ³•ï¼Œæ­¤æ—¶mMethodæ˜¯ActivityThreadçš„mainæ–¹æ³•ï¼Œå³runæ–¹æ³•ä¸­å°†ä¼šæ‰§è¡ŒActivityThreadçš„mainæ–¹æ³•ï¼Œåœ¨è¿™é‡Œä½ å¯èƒ½ä¼šæœ‰ç–‘é—®äº†ï¼Œé‚£è¿™ä¸ªrunæ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ€å¼€å§‹çš„ZygoteInitçš„mainæ–¹æ³•ã€‚ frameworks/base/core/java/com/android/internal/os/ZygoteInit.java 1234567891011121314151617181920212223@UnsupportedAppUsagepublic static void main(String argv[]) &#123; Runnable caller; try &#123; .... caller = Zygote.initBlastulaPool(); if (caller == null) &#123; Log.i(TAG, &quot;Accepting command socket connections&quot;); //ç­‰å¾…AMSçš„è¯·æ±‚ caller = zygoteServer.runSelectLoop(abiList); &#125; &#125; catch (Throwable ex) &#123; Log.e(TAG, &quot;System zygote died with exception&quot;, ex); throw ex; &#125; finally &#123; zygoteServer.closeServerSocket(); &#125; if (caller != null) &#123; caller.run(); &#125;&#125; ä»Žåˆ†æžZygoteè¿›ç¨‹æŽ¥å—è¯·æ±‚å¹¶å­µåŒ–åº”ç”¨è¿›ç¨‹çš„ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±æ˜¯åˆ†æžrunSelectLoop(abiList)è¿™ä¸ªæ–¹æ³•ï¼Œè€Œåˆ†æžåˆ°æœ€åŽfindStaticMainæ–¹æ³•å°†è¿”å›žMethodAndArgsCallerå¯¹è±¡ï¼ˆç»§æ‰¿Runnableï¼‰,æ‰€ä»¥è¿™æ—¶å€™åœ¨ZygoteInitçš„mainæ–¹æ³•callerä¼šç­‰äºŽè¿™ä¸ªMethodAndArgsCallerå¯¹è±¡ï¼Œæ˜¾ç„¶callerä¸ç­‰äºŽnullï¼Œæ•…æœ€åŽä¼šæ‰§è¡Œcaller.runæ–¹æ³•ï¼Œå³æ‰§è¡ŒActivityThreadçš„mainæ–¹æ³•ã€‚äºŽæ˜¯åº”ç”¨è¿›ç¨‹æˆåŠŸå¯åŠ¨ActivityThreadã€‚ https://juejin.im/post/5d9d948de51d45782c23fabc https://juejin.im/post/5a936c5a6fb9a0633229ca74 http://codemx.cn/2018/01/26/AndroidOS008-Activity/ Androidç³»ç»Ÿå¯åŠ¨æµç¨‹ï¼ˆäºŒï¼‰è§£æžZygoteè¿›ç¨‹å¯åŠ¨è¿‡ç¨‹ https://juejin.im/post/6867744083809419277 https://juejin.im/post/6887431834041483271 å¯åŠ¨æµç¨‹ç›®çš„ https://juejin.cn/post/6897892195483779080","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"ActivityStart02","slug":"ActivityStart02","date":"2020-01-13T02:49:39.000Z","updated":"2021-08-19T11:11:43.527Z","comments":true,"path":"2020/01/13/ActivityStart02/","link":"","permalink":"https://noteforme.github.io/2020/01/13/ActivityStart02/","excerpt":"","text":"Application OnCreate() 12345678910111213141516171819public static void main(String[] args) &#123; Looper.prepareMainLooper(); //åˆ›å»ºæ¶ˆæ¯å¾ªçŽ¯ ActivityThread thread = new ActivityThread(); thread.attach(false); if (sMainThreadHandler == null) &#123; sMainThreadHandler = thread.getHandler(); &#125; if (false) &#123; Looper.myLooper().setMessageLogging(new LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;)); &#125; // End of event ActivityThreadMain. Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); Looper.loop(); //ä½¿å½“å‰è¿›ç¨‹è¿›å…¥æ¶ˆæ¯å¾ªçŽ¯&#125; åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸å†è¯¦ç»†åˆ†æžprepareMainLooperå’Œloopæ–¹æ³•ï¼Œå…¶ä¸»è¦åŠŸèƒ½å°±æ˜¯å‡†å¤‡å¥½ä¸»çº¿ç¨‹çš„Looperä»¥åŠæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæœ€åŽå†å¼€å¯ä¸»çº¿ç¨‹çš„æ¶ˆæ¯å¾ªçŽ¯ã€‚ 1234567891011121314151617181920212223242526272829303132private void attach(boolean system) &#123; IActivityManager mgr = ActivityManagerNative.getDefault(); //èŽ·å¾—ApplicationThreadNative //ä»£ç†ç±»ActivityManagerProxy try &#123; mgr.attachApplication(mAppThread); &#125; catch (RemoteException ex) &#123; throw ex.rethrowFromSystemServer(); &#125; // Watch for getting close to heap limit. BinderInternal.addGcWatcher(new Runnable() &#123; @Override public void run() &#123; if (!mSomeActivitiesChanged) &#123; return; &#125; Runtime runtime = Runtime.getRuntime(); long dalvikMax = runtime.maxMemory(); long dalvikUsed = runtime.totalMemory() - runtime.freeMemory(); if (dalvikUsed &gt; ((3*dalvikMax)/4)) &#123; if (DEBUG_MEMORY_TRIM) Slog.d(TAG, &quot;Dalvik max=&quot; + (dalvikMax/1024) + &quot; total=&quot; + (runtime.totalMemory()/1024) + &quot; used=&quot; + (dalvikUsed/1024)); mSomeActivitiesChanged = false; try &#123; mgr.releaseSomeActivities(mAppThread); &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125; &#125; &#125; &#125;);&#125; å¯ä»¥çœ‹åˆ°ç”±äºŽåœ¨ActivityThreadçš„attachä¸­æˆ‘ä»¬ä¼ å…¥çš„æ˜¯falseï¼Œæ•…åœ¨attachæ–¹æ³•ä¸­å°†æ‰§è¡Œ!systemé‡Œçš„ä»£ç ï¼Œé€šè¿‡è°ƒç”¨AMSçš„attachApplicationæ¥å°†ActivityThreadä¸­çš„å†…éƒ¨ç±»ApplicationThreadå¯¹è±¡ç»‘å®šè‡³AMSï¼Œè¿™æ ·AMSå°±å¯ä»¥é€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡ æ¥æŽ§åˆ¶åº”ç”¨è¿›ç¨‹ã€‚æŽ¥ç€ä¸ºè¿™ä¸ªè¿›ç¨‹æ·»åŠ åžƒåœ¾å›žæ”¶è§‚å¯Ÿè€…ï¼Œæ¯å½“ç³»ç»Ÿè§¦å‘åžƒåœ¾å›žæ”¶çš„æ—¶å€™å°±åœ¨runæ–¹æ³•ä¸­è®¡ç®—åº”ç”¨ä½¿ç”¨äº†å¤šå¤§çš„å†…å­˜ï¼Œå¦‚æžœè¶…è¿‡æ€»é‡çš„3/4å°±å°è¯•é‡Šæ”¾å†…å­˜ã€‚ 1234567891011public void attachApplication(IApplicationThread app) throws RemoteException&#123; Parcel data = Parcel.obtain(); Parcel reply = Parcel.obtain(); data.writeInterfaceToken(IActivityManager.descriptor); data.writeStrongBinder(app.asBinder()); mRemote.transact(ATTACH_APPLICATION_TRANSACTION, data, reply, 0); reply.readException(); data.recycle(); reply.recycle();&#125; 12345678910111213141516@Overridepublic boolean onTransact(int code, Parcel data, Parcel reply, int flags) throws RemoteException &#123; switch (code) &#123; case ATTACH_APPLICATION_TRANSACTION: &#123; data.enforceInterface(IActivityManager.descriptor); IApplicationThread app = ApplicationThreadNative.asInterface( data.readStrongBinder()); //å¾—åˆ°ä»£ç†ç±»ApplicationThreadProxy if (app != null) &#123; attachApplication(app); &#125; reply.writeNoException(); return true; &#125; &#125;&#125; 123456789@Overridepublic final void attachApplication(IApplicationThread thread) &#123; synchronized (this) &#123; int callingPid = Binder.getCallingPid(); final long origId = Binder.clearCallingIdentity(); attachApplicationLocked(thread, callingPid); Binder.restoreCallingIdentity(origId); &#125;&#125; â€‹ å°†åº”ç”¨è¿›ç¨‹çš„ApplicationThreadå¯¹è±¡ç»‘å®šåˆ°AMSï¼Œå³AMSèŽ·å¾—ApplicationThreadçš„ä»£ç†å¯¹è±¡ 123456789101112131415161718private final boolean attachApplicationLocked(IApplicationThread thread, int pid) &#123; //åˆ›å»ºApplication thread.bindApplication(processName, appInfo, providers, app.instrumentationClass, profilerInfo, app.instrumentationArguments, app.instrumentationWatcher, app.instrumentationUiAutomationConnection, testMode, mBinderTransactionTrackingEnabled, enableTrackAllocation, isRestrictedBackupMode || !normalMode, app.persistent, new Configuration(mConfiguration), app.compat, getCommonServicesLocked(app.isolated), mCoreSettingsObserver.getCoreSettingsLocked()); //åˆ›å»ºActivity if (mStackSupervisor.attachApplicationLocked(app)) &#123; didSomething = true; &#125; &#125; create Application 12345678910111213141516171819@Overridepublic final void bindApplication(String packageName, ApplicationInfo info, List&lt;ProviderInfo&gt; providers, ComponentName testName, ProfilerInfo profilerInfo, Bundle testArgs, IInstrumentationWatcher testWatcher, IUiAutomationConnection uiAutomationConnection, int debugMode, boolean enableBinderTracking, boolean trackAllocation, boolean restrictedBackupMode, boolean persistent, Configuration config, CompatibilityInfo compatInfo, Map&lt;String, IBinder&gt; services, Bundle coreSettings) throws RemoteException &#123; data.writeInt(restrictedBackupMode ? 1 : 0); data.writeInt(persistent ? 1 : 0); config.writeToParcel(data, 0); compatInfo.writeToParcel(data, 0); data.writeMap(services); data.writeBundle(coreSettings); mRemote.transact(BIND_APPLICATION_TRANSACTION, data, null, IBinder.FLAG_ONEWAY); data.recycle();&#125; 123456789101112131415161718192021 @Override public boolean onTransact(int code, Parcel data, Parcel reply, int flags) throws RemoteException &#123; switch (code) &#123; case BIND_APPLICATION_TRANSACTION: boolean trackAllocation = data.readInt() != 0; boolean restrictedBackupMode = (data.readInt() != 0); boolean persistent = (data.readInt() != 0); Configuration config = Configuration.CREATOR.createFromParcel(data); CompatibilityInfo compatInfo = CompatibilityInfo.CREATOR.createFromParcel(data); HashMap&lt;String, IBinder&gt; services = data.readHashMap(null); Bundle coreSettings = data.readBundle(); bindApplication(packageName, info, providers, testName, profilerInfo, testArgs, testWatcher, uiAutomationConnection, testMode, enableBinderTracking, trackAllocation, restrictedBackupMode, persistent, config, compatInfo, services, coreSettings); return true; &#125;&#125; 1234567891011121314151617public final void bindApplication(String processName, ApplicationInfo appInfo, List&lt;ProviderInfo&gt; providers, ComponentName instrumentationName, ProfilerInfo profilerInfo, Bundle instrumentationArgs, IInstrumentationWatcher instrumentationWatcher, IUiAutomationConnection instrumentationUiConnection, int debugMode, boolean enableBinderTracking, boolean trackAllocation, boolean isRestrictedBackupMode, boolean persistent, Configuration config, CompatibilityInfo compatInfo, Map&lt;String, IBinder&gt; services, Bundle coreSettings) &#123; data.restrictedBackupMode = isRestrictedBackupMode; data.persistent = persistent; data.config = config; data.compatInfo = compatInfo; data.initProfilerInfo = profilerInfo; sendMessage(H.BIND_APPLICATION, data);&#125; 12345case BIND_APPLICATION: Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;bindApplication&quot;); AppBindData data = (AppBindData)msg.obj; handleBindApplication(data); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); 1234567891011private void handleBindApplication(AppBindData data) &#123; // If the app is being launched for full backup or restore, bring it up in // a restricted environment with the base application class. Application app = data.info.makeApplication(data.restrictedBackupMode, null); mInitialApplication = app; mInstrumentation.callApplicationOnCreate(app); //è°ƒç”¨Applicationçš„createæ–¹æ³• &#125; 1234567891011121314151617181920212223242526public Application makeApplication(boolean forceDefaultAppClass, Instrumentation instrumentation) &#123; if (mApplication != null) &#123; return mApplication; &#125; Application app = null; String appClass = mApplicationInfo.className; if (forceDefaultAppClass || (appClass == null)) &#123; appClass = &quot;android.app.Application&quot;; &#125; try &#123; java.lang.ClassLoader cl = getClassLoader(); if (!mPackageName.equals(&quot;android&quot;)) &#123; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;initializeJavaContextClassLoader&quot;); initializeJavaContextClassLoader(); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); &#125; ContextImpl appContext = ContextImpl.createAppContext(mActivityThread, this); app = mActivityThread.mInstrumentation.newApplication( cl, appClass, appContext); appContext.setOuterContext(app);&#125; LaunchActivity1234567891011121314151617181920212223242526272829303132333435// we use token to identify this activity without having to send the // activity itself back to the activity manager. (matters more with ipc) @Override public final void scheduleLaunchActivity(Intent intent, IBinder token, int ident, ActivityInfo info, Configuration curConfig, Configuration overrideConfig, CompatibilityInfo compatInfo, String referrer, IVoiceInteractor voiceInteractor, int procState, Bundle state, PersistableBundle persistentState, List&lt;ResultInfo&gt; pendingResults, List&lt;ReferrerIntent&gt; pendingNewIntents, boolean notResumed, boolean isForward, ProfilerInfo profilerInfo) &#123; ActivityClientRecord r = new ActivityClientRecord(); r.token = token; r.ident = ident; r.intent = intent; r.referrer = referrer; r.voiceInteractor = voiceInteractor; r.activityInfo = info; r.compatInfo = compatInfo; r.state = state; r.persistentState = persistentState; r.pendingResults = pendingResults; r.pendingIntents = pendingNewIntents; r.startsNotResumed = notResumed; r.isForward = isForward; r.profilerInfo = profilerInfo; r.overrideConfig = overrideConfig; updatePendingConfiguration(curConfig); sendMessage(H.LAUNCH_ACTIVITY, r); &#125; 12345678910111213public void handleMessage(Message msg) &#123; if (DEBUG_MESSAGES) Slog.v(TAG, &quot;&gt;&gt;&gt; handling: &quot; + codeToString(msg.what)); switch (msg.what) &#123; case LAUNCH_ACTIVITY: &#123; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;activityStart&quot;); final ActivityClientRecord r = (ActivityClientRecord) msg.obj; r.packageInfo = getPackageInfoNoCheck( r.activityInfo.applicationInfo, r.compatInfo); handleLaunchActivity(r, null, &quot;LAUNCH_ACTIVITY&quot;); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); &#125; break; &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869private void handleLaunchActivity(ActivityClientRecord r, Intent customIntent, String reason) &#123; //é€šè¿‡Activityæ‰€åœ¨çš„åº”ç”¨ç¨‹åºä¿¡æ¯åŠè¯¥Activityå¯¹åº”çš„CompatibilityInfoä¿¡æ¯ä»ŽPMSæœåŠ¡ä¸­æŸ¥è¯¢å½“å‰Activityçš„åŒ…ä¿¡æ¯ ActivityInfo aInfo = r.activityInfo; if (r.packageInfo == null) &#123; r.packageInfo = getPackageInfo(aInfo.applicationInfo, r.compatInfo, Context.CONTEXT_INCLUDE_CODE); &#125; //èŽ·å–å½“å‰Activityçš„ç»„ä»¶ä¿¡æ¯ ComponentName component = r.intent.getComponent(); if (component == null) &#123; component = r.intent.resolveActivity( mInitialApplication.getPackageManager()); r.intent.setComponent(component); &#125; //packageNameä¸ºå¯åŠ¨Activityçš„åŒ…åï¼ŒtargetActivityä¸ºActivityçš„ç±»å if (r.activityInfo.targetActivity != null) &#123; component = new ComponentName(r.activityInfo.packageName, r.activityInfo.targetActivity); &#125; //é€šè¿‡ç±»åå°„æ–¹å¼åŠ è½½å³å°†å¯åŠ¨çš„Activity Activity activity = null; try &#123; java.lang.ClassLoader cl = r.packageInfo.getClassLoader(); activity = mInstrumentation.newActivity( cl, component.getClassName(), r.intent); StrictMode.incrementExpectedActivityCount(activity.getClass()); r.intent.setExtrasClassLoader(cl); r.intent.prepareToEnterProcess(); if (r.state != null) &#123; r.state.setClassLoader(cl); &#125; &#125; ...... try &#123; //é€šè¿‡å•ä¾‹æ¨¡å¼ä¸ºåº”ç”¨ç¨‹åºè¿›ç¨‹åˆ›å»ºApplicationå¯¹è±¡ Application app = r.packageInfo.makeApplication(false, mInstrumentation); ...... if (activity != null) &#123; //ä¸ºå½“å‰Activityåˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡ContextImpl Context appContext = createBaseContextForActivity(r, activity); ...... //å°†å½“å‰å¯åŠ¨çš„Activityå’Œä¸Šä¸‹æ–‡ContextImplã€Applicationç»‘å®š activity.attach(appContext, this, getInstrumentation(), r.token, r.ident, app, r.intent, r.activityInfo, title, r.parent, r.embeddedID, r.lastNonConfigurationInstances, config, r.referrer, r.voiceInteractor, window); ...... //å°†Activityä¿å­˜åˆ°ActivityClientRecordä¸­ï¼ŒActivityClientRecordä¸ºActivityåœ¨åº”ç”¨ç¨‹åºè¿›ç¨‹ä¸­çš„æè¿°ç¬¦ r.activity = activity; activity.mCalled = false; if (r.isPersistable()) &#123; mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState); &#125; else &#123; mInstrumentation.callActivityOnCreate(activity, r.state); &#125; ...... //ç”Ÿå‘½å‘¨æœŸonStartã€onresume if (!r.activity.mFinished) &#123; activity.performStart(); r.stopped = false; &#125; //ActivityThreadçš„æˆå‘˜å˜é‡mActivitiesä¿å­˜äº†å½“å‰åº”ç”¨ç¨‹åºè¿›ç¨‹ä¸­çš„æ‰€æœ‰Activityçš„æè¿°ç¬¦ mActivities.put(r.token, r); ...... return activity;&#125; åœ¨ä¸Šè¿°æ–¹æ³•ä¸­å°†è°ƒç”¨performLaunchActivityæ¥å¯åŠ¨Activityï¼Œå¦‚ä¸‹ åº”ç”¨ç¨‹åºè¿›ç¨‹é€šè¿‡performLaunchActivityå‡½æ•°å°†å³å°†è¦å¯åŠ¨çš„ActivityåŠ è½½åˆ°å½“å‰è¿›ç¨‹ç©ºé—´æ¥ï¼ŒåŒæ—¶ä¸ºå¯åŠ¨Activityåšå‡†å¤‡ã€‚ [ActivityThread.java #performLaunchActivity()] 123456789101112private Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) &#123; //ç”¨ç±»åŠ è½½å™¨æ¥åˆ›å»ºè¯¥Activityçš„å®žä¾‹ activity = mInstrumentation.newActivity( cl, component.getClassName(), r.intent);&#125; public Activity newActivity(ClassLoader cl, String className, Intent intent) throws InstantiationException, IllegalAccessException, ClassNotFoundException &#123; return (Activity)cl.loadClass(className).newInstance(); &#125; è§£å†³é—®é¢˜Application Activityåˆ›å»ºæµç¨‹ Launch appå¯åŠ¨é—®é¢˜ https://juejin.im/post/5baf275f5188255c9a7740ba","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"JVM_HEAP","slug":"JVM-HEAP","date":"2020-01-06T09:37:17.000Z","updated":"2022-05-06T11:24:51.250Z","comments":true,"path":"2020/01/06/JVM-HEAP/","link":"","permalink":"https://noteforme.github.io/2020/01/06/JVM-HEAP/","excerpt":"","text":"å †å†…å­˜ç»†åˆ†çŽ°ä»£åžƒåœ¾æ”¶é›†å™¨å¤§éƒ¨åˆ†éƒ½åŸºäºŽåˆ†ä»£æ”¶é›†ç†è®ºè®¾è®¡ï¼Œå †ç©ºé—´ç»†åˆ†ä¸ºï¼š Java7 åŠä¹‹å‰å †å†…å­˜é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ–°ç”ŸåŒº+å…»è€åŒº+æ°¸ä¹…åŒº Young Generation Space æ–°ç”ŸåŒº Young/New åˆè¢«åˆ’åˆ†ä¸ºEdenåŒºå’ŒSurvivoråŒº Old generation space å…»è€åŒº Old/Tenure Permanent Space æ°¸ä¹…åŒº Perm Java 8åŠä¹‹åŽå †å†…å­˜é€»è¾‘ä¸Šåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šæ–°ç”ŸåŒº+å…»è€åŒº+å…ƒç©ºé—´ Young Generation Space æ–°ç”ŸåŒºï¼Œåˆè¢«åˆ’åˆ†ä¸ºEdenåŒºå’ŒSurvivoråŒº Old generation space å…»è€åŒº Meta Space å…ƒç©ºé—´ Meta çº¦å®šï¼šæ–°ç”ŸåŒº &lt;â€“&gt; æ–°ç”Ÿä»£ &lt;â€“&gt; å¹´è½»ä»£ ã€ å…»è€åŒº &lt;â€“&gt; è€å¹´åŒº &lt;â€“&gt; è€å¹´ä»£ã€ æ°¸ä¹…åŒº &lt;â€“&gt; æ°¸ä¹…ä»£ å †ç©ºé—´å†…éƒ¨ç»“æž„ï¼ŒJDK1.8ä¹‹å‰ä»Žæ°¸ä¹…ä»£ æ›¿æ¢æˆ å…ƒç©ºé—´ å †æ˜¯åˆ†é…å¯¹è±¡çš„å”¯ä¸€é€‰æ‹©ä¹ˆï¼Ÿåœ¨ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸­å…³äºŽJavaå †å†…å­˜æœ‰è¿™æ ·ä¸€æ®µæè¿°ï¼š éšç€JITç¼–è¯‘æœŸçš„å‘å±•ä¸Žé€ƒé€¸åˆ†æžæŠ€æœ¯é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´ä¸€äº›å¾®å¦™çš„å˜åŒ–ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½åˆ†é…åˆ°å †ä¸Šä¹Ÿæ¸æ¸å˜å¾—ä¸é‚£ä¹ˆâ€œç»å¯¹â€äº†ã€‚ åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡æ˜¯åœ¨Javaå †ä¸­åˆ†é…å†…å­˜çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ™®éçš„å¸¸è¯†ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æžœç»è¿‡é€ƒé€¸åˆ†æžï¼ˆEscape Analysisï¼‰åŽå‘çŽ°ï¼Œä¸€ä¸ªå¯¹è±¡å¹¶æ²¡æœ‰é€ƒé€¸å‡ºæ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½è¢«ä¼˜åŒ–æˆæ ˆä¸Šåˆ†é…ã€‚è¿™æ ·å°±æ— éœ€åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä¹Ÿæ— é¡»è¿›è¡Œåžƒåœ¾å›žæ”¶äº†ã€‚è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„å †å¤–å­˜å‚¨æŠ€æœ¯ã€‚ æ­¤å¤–ï¼Œå‰é¢æåˆ°çš„åŸºäºŽOpenJDKæ·±åº¦å®šåˆ¶çš„TaoBao VMï¼Œå…¶ä¸­åˆ›æ–°çš„GCIHï¼ˆGC invisible heapï¼‰æŠ€æœ¯å®žçŽ°off-heapï¼Œå°†ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„Javaå¯¹è±¡ä»Žheapä¸­ç§»è‡³heapå¤–ï¼Œå¹¶ä¸”GCä¸èƒ½ç®¡ç†GCIHå†…éƒ¨çš„Javaå¯¹è±¡ï¼Œä»¥æ­¤è¾¾åˆ°é™ä½ŽGCçš„å›žæ”¶é¢‘çŽ‡å’Œæå‡GCçš„å›žæ”¶æ•ˆçŽ‡çš„ç›®çš„ã€‚ é€ƒé€¸åˆ†æž å¦‚ä½•å°†å †ä¸Šçš„å¯¹è±¡åˆ†é…åˆ°æ ˆï¼Œéœ€è¦ä½¿ç”¨é€ƒé€¸åˆ†æžæ‰‹æ®µã€‚ è¿™æ˜¯ä¸€ç§å¯ä»¥æœ‰æ•ˆå‡å°‘Javaç¨‹åºä¸­åŒæ­¥è´Ÿè½½å’Œå†…å­˜å †åˆ†é…åŽ‹åŠ›çš„è·¨å‡½æ•°å…¨å±€æ•°æ®æµåˆ†æžç®—æ³•ã€‚ é€šè¿‡é€ƒé€¸åˆ†æžï¼ŒJava Hotspotç¼–è¯‘å™¨èƒ½å¤Ÿåˆ†æžå‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡çš„å¼•ç”¨çš„ä½¿ç”¨èŒƒå›´ä»Žè€Œå†³å®šæ˜¯å¦è¦å°†è¿™ä¸ªå¯¹è±¡åˆ†é…åˆ°å †ä¸Šã€‚ é€ƒé€¸åˆ†æžçš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æžå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸï¼š å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åŽï¼Œå¯¹è±¡åªåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™è®¤ä¸ºæ²¡æœ‰å‘ç”Ÿé€ƒé€¸ã€‚ å½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åŽï¼Œå®ƒè¢«å¤–éƒ¨æ–¹æ³•æ‰€å¼•ç”¨ï¼Œåˆ™è®¤ä¸ºå‘ç”Ÿé€ƒé€¸ã€‚ä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–åœ°æ–¹ä¸­ã€‚ é€ƒé€¸åˆ†æžä¸¾ä¾‹ 1ã€æ²¡æœ‰å‘ç”Ÿé€ƒé€¸çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥åˆ†é…åˆ°æ ˆï¼ˆæ— çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰ä¸Šï¼Œéšç€æ–¹æ³•æ‰§è¡Œçš„ç»“æŸï¼Œæ ˆç©ºé—´å°±è¢«ç§»é™¤ï¼ˆä¹Ÿå°±æ— éœ€GCï¼‰ 123456public void my_method() &#123; V v = new V(); // use v // .... v = null;&#125; 2ã€ä¸‹é¢ä»£ç ä¸­çš„ StringBuffer sb å‘ç”Ÿäº†é€ƒé€¸ï¼Œä¸èƒ½åœ¨æ ˆä¸Šåˆ†é… 123456public static StringBuffer createStringBuffer(String s1, String s2) &#123; StringBuffer sb = new StringBuffer(); sb.append(s1); sb.append(s2); return sb;&#125; 3ã€å¦‚æžœæƒ³è¦StringBuffer sbä¸å‘ç”Ÿé€ƒé€¸ï¼Œå¯ä»¥è¿™æ ·å†™ 123456public static String createStringBuffer(String s1, String s2) &#123; StringBuffer sb = new StringBuffer(); sb.append(s1); sb.append(s2); return sb.toString();&#125; 12345678910111213141516171819202122232425262728293031323334353637/** * é€ƒé€¸åˆ†æž * * å¦‚ä½•å¿«é€Ÿçš„åˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†é€ƒé€¸åˆ†æžï¼Œå¤§å®¶å°±çœ‹newçš„å¯¹è±¡å®žä½“æ˜¯å¦æœ‰å¯èƒ½åœ¨æ–¹æ³•å¤–è¢«è°ƒç”¨ã€‚ */public class EscapeAnalysis &#123; public EscapeAnalysis obj; /* æ–¹æ³•è¿”å›žEscapeAnalysiså¯¹è±¡ï¼Œå‘ç”Ÿé€ƒé€¸ */ public EscapeAnalysis getInstance()&#123; return obj == null? new EscapeAnalysis() : obj; &#125; /* ä¸ºæˆå‘˜å±žæ€§èµ‹å€¼ï¼Œå‘ç”Ÿé€ƒé€¸ */ public void setObj()&#123; this.obj = new EscapeAnalysis(); &#125; //æ€è€ƒï¼šå¦‚æžœå½“å‰çš„objå¼•ç”¨å£°æ˜Žä¸ºstaticçš„ï¼Ÿä»ç„¶ä¼šå‘ç”Ÿé€ƒé€¸ã€‚ /* å¯¹è±¡çš„ä½œç”¨åŸŸä»…åœ¨å½“å‰æ–¹æ³•ä¸­æœ‰æ•ˆï¼Œæ²¡æœ‰å‘ç”Ÿé€ƒé€¸ */ public void useEscapeAnalysis()&#123; EscapeAnalysis e = new EscapeAnalysis(); &#125; /* å¼•ç”¨æˆå‘˜å˜é‡çš„å€¼ï¼Œå‘ç”Ÿé€ƒé€¸ */ public void useEscapeAnalysis1()&#123; EscapeAnalysis e = getInstance(); //getInstance().xxx()åŒæ ·ä¼šå‘ç”Ÿé€ƒé€¸ &#125;&#125; é€ƒé€¸åˆ†æžå‚æ•°è®¾ç½® åœ¨JDK 1.7 ç‰ˆæœ¬ä¹‹åŽï¼ŒHotSpotä¸­é»˜è®¤å°±å·²ç»å¼€å¯äº†é€ƒé€¸åˆ†æž å¦‚æžœä½¿ç”¨çš„æ˜¯è¾ƒæ—©çš„ç‰ˆæœ¬ï¼Œå¼€å‘äººå‘˜åˆ™å¯ä»¥é€šè¿‡ï¼š é€‰é¡¹â€œ-XX:+DoEscapeAnalysisâ€æ˜¾å¼å¼€å¯é€ƒé€¸åˆ†æž é€šè¿‡é€‰é¡¹â€œ-XX:+PrintEscapeAnalysisâ€æŸ¥çœ‹é€ƒé€¸åˆ†æžçš„ç­›é€‰ç»“æžœ æ€»ç»“ å¼€å‘ä¸­èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡çš„ï¼Œå°±ä¸è¦ä½¿ç”¨åœ¨æ–¹æ³•å¤–å®šä¹‰ã€‚ ä»£ç ä¼˜åŒ–ä½¿ç”¨é€ƒé€¸åˆ†æžï¼Œç¼–è¯‘å™¨å¯ä»¥å¯¹ä»£ç åšå¦‚ä¸‹ä¼˜åŒ–ï¼š æ ˆä¸Šåˆ†é…ï¼šå°†å †åˆ†é…è½¬åŒ–ä¸ºæ ˆåˆ†é…ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡åœ¨å­ç¨‹åºä¸­è¢«åˆ†é…ï¼Œè¦ä½¿æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ°¸è¿œä¸ä¼šå‘ç”Ÿé€ƒé€¸ï¼Œå¯¹è±¡å¯èƒ½æ˜¯æ ˆä¸Šåˆ†é…çš„å€™é€‰ï¼Œè€Œä¸æ˜¯å †ä¸Šåˆ†é… åŒæ­¥çœç•¥ï¼šå¦‚æžœä¸€ä¸ªå¯¹è±¡è¢«å‘çŽ°åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯¹äºŽè¿™ä¸ªå¯¹è±¡çš„æ“ä½œå¯ä»¥ä¸è€ƒè™‘åŒæ­¥ã€‚ åˆ†ç¦»å¯¹è±¡æˆ–æ ‡é‡æ›¿æ¢ï¼šæœ‰çš„å¯¹è±¡å¯èƒ½ä¸éœ€è¦ä½œä¸ºä¸€ä¸ªè¿žç»­çš„å†…å­˜ç»“æž„å­˜åœ¨ä¹Ÿå¯ä»¥è¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå¯¹è±¡çš„éƒ¨åˆ†ï¼ˆæˆ–å…¨éƒ¨ï¼‰å¯ä»¥ä¸å­˜å‚¨åœ¨å†…å­˜ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨CPUå¯„å­˜å™¨ä¸­ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"List","slug":"List","date":"2020-01-05T13:50:30.000Z","updated":"2023-01-02T03:31:39.093Z","comments":true,"path":"2020/01/05/List/","link":"","permalink":"https://noteforme.github.io/2020/01/05/List/","excerpt":"","text":"Colletionå®¹å™¨ç»§æ‰¿å›¾ https://www.jianshu.com/p/31ed50ab01e3 Java ListList &lt;â€“ ArrayList LinkedList ArrayList ```ArrayList arrayList = new ArrayList&lt;&gt;(); 12345 å¾—åˆ°ä¸€ä¸ªobjectæ•°ç»„ &#96;private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA &#x3D; &#123;&#125;;&#96;source public ArrayList() { this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA; } 12342. &#96;&#96;&#96; arrayList.add(1); arrayList.add(2); source 1234567891011public boolean add(E e) &#123; ensureCapacityInternal(size + 1); &#x2F;&#x2F; Increments modCount!! elementData[size++] &#x3D; e; return true;&#125; private void ensureCapacityInternal(int minCapacity) &#123; ensureExplicitCapacity(calculateCapacity(elementData, minCapacity)); &#125; å…ˆçœ‹çœ‹calculateCapacity 123456789private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA &#x3D; &#123;&#125;;private static final int DEFAULT_CAPACITY &#x3D; 10;private static int calculateCapacity(Object[] elementData, int minCapacity) &#123; if (elementData &#x3D;&#x3D; DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123; return Math.max(DEFAULT_CAPACITY, minCapacity); &#125; return minCapacity;&#125; if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) minCapacity==10 ensureExplicitCapacity() 1234567891011121314151617181920private void ensureExplicitCapacity(int minCapacity) &#123; modCount++; &#x2F;&#x2F; overflow-conscious code if (minCapacity - elementData.length &gt; 0) grow(minCapacity);&#125; private void grow(int minCapacity) &#123; &#x2F;&#x2F; overflow-conscious code int oldCapacity &#x3D; elementData.length; int newCapacity &#x3D; oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity &#x3D; minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity &#x3D; hugeCapacity(minCapacity); &#x2F;&#x2F; minCapacity is usually close to size, so this is a win: elementData &#x3D; Arrays.copyOf(elementData, newCapacity);&#125; æ·»åŠ arrayList.add(1);æ—¶ï¼Œsize ä¸º10çš„æ•°ç»„ï¼Œ elementData[size++] = e; æ³¨æ„sizeåˆå§‹åŒ–å€¼==0ï¼Œç¨‹åºå…ˆ æ‰§è¡ŒelementData[0]=1,ç„¶åŽæ˜¯size++; å½“æ·»åŠ çš„æ•°æ˜¯11æ—¶ï¼Œ int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);å¼€å§‹æ‰§è¡Œ 10 + 1010&gt;&gt;1 = 10+5,ç”³è¯·äº†5ä¸ªç©ºé—´ ç„¶åŽget()å¯ä»¥èŽ·å–element æºç ç®€å†™ 123456789int size &#x3D;0;Object[] elementData&#x3D; &#123;&#125;;Object[] elementArr &#x3D; Arrays.copyOf(elementData, 10);elementArr[size++] &#x3D; 5;elementArr[size++] &#x3D; 7;for ( Object el :elementArr)&#123; System.out.print(el+&quot; &quot;);&#125;System.out.println(elementArr[0]); LinkedList æºç åŠŸèƒ½å¦‚å›¾æ‰€ç¤º 1234567891011121314151617181920212223void linkLast(E e) &#123; final Node&lt;E&gt; l &#x3D; last; final Node&lt;E&gt; newNode &#x3D; new Node&lt;&gt;(l, e, null); last &#x3D; newNode; if (l &#x3D;&#x3D; null) first &#x3D; newNode; else l.next &#x3D; newNode; size++; modCount++;&#125;private static class Node&lt;E&gt; &#123; E item; Node&lt;E&gt; next; Node&lt;E&gt; prev; Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123; this.item &#x3D; element; this.next &#x3D; next; this.prev &#x3D; prev; &#125; &#125; List iterator List crunchifyList = new ArrayList(); â€‹ // add 4 different values to list â€‹ crunchifyList.add(â€œFacebookâ€); â€‹ crunchifyList.add(â€œPaypalâ€); â€‹ crunchifyList.add(â€œGoogleâ€); â€‹ crunchifyList.add(â€œYahooâ€); â€‹ // Other way to define list is - we will not use this list :) â€‹ List crunchifyListNew = Arrays.asList(â€œFacebookâ€, â€œPaypalâ€, â€œGoogleâ€, â€œYahooâ€); â€‹ Iterator - Returns an iterator over the elements in this list in proper sequence. 1234567Iterator&lt;String&gt; crunchifyIterator &#x3D; crunchifyList.iterator(); while(crunchifyIterator.hasNext()) &#123; System.out.println(crunchifyIterator.next()); &#125; // ListIterator - traverse a list of elements in either forward or backward order â€‹ // An iterator for lists that allows the programmer to traverse the list in either direction, modify the list during iteration, â€‹ // and obtain the iteratorâ€™s current position in the list. 1234ListIterator&lt;String&gt; crunchifyListIterator &#x3D; crunchifyList.listIterator(); while (crunchifyListIterator.hasNext()) &#123; System.out.println(crunchifyListIterator.next()); &#125; Iterable.forEach() util: Returns a sequential Stream with this collection as its source 12345crunchifyList.forEach((temp) -&gt; &#123; System.out.println(temp); &#125;); collection Stream.forEach() util: Returns a sequential Stream with this collection as its source 1crunchifyList.stream().forEach((crunchifyTemp) -&gt; System.out.println(crunchifyTemp)); kotlin List1var mPatientList &#x3D; patientList.filter &#123; it.patientCode &#x3D;&#x3D; patientCode &#125; 123return mQnList?.let &#123; it -&gt; it.filter &#123; it.type &#x3D;&#x3D; type &#125;.map &#123; it.value &#125;&#125; sequencehttps://zhuanlan.zhihu.com/p/38258597 https://juejin.cn/post/7022429745874731045 https://winterbe.com/posts/2018/07/23/kotlin-sequence-tutorial/ https://zhuanlan.zhihu.com/p/38258597","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"JVM_METHOD","slug":"JVM-METHOD","date":"2020-01-04T14:27:53.000Z","updated":"2021-08-19T11:11:43.988Z","comments":true,"path":"2020/01/04/JVM-METHOD/","link":"","permalink":"https://noteforme.github.io/2020/01/04/JVM-METHOD/","excerpt":"","text":"å¯¹è±¡çš„è®¿é—®å®šä½ Personç±»çš„.classä¿¡æ¯å­˜æ”¾åœ¨ æ–¹æ³•åŒºä¸­ personå˜é‡å­˜æ”¾åœ¨Javaæ ˆçš„å±€éƒ¨å˜é‡è¡¨ä¸­ Personå¯¹è±¡å­˜æ”¾åœ¨Javaå †ä¸­ åœ¨Personå †ä¸­ï¼Œæœ‰ä¸ªæŒ‡é’ˆæŒ‡å‘æ–¹æ³•åŒºçš„personç±»åž‹æ•°æ®,è¡¨ç¤ºpersonå¯¹è±¡æ˜¯æ–¹æ³•åŒºä¸­çš„Personç±»Newå‡ºæ¥çš„. å†…å­˜å¸ƒå±€æ€»ç»“ 123456789101112131415161718public class Customer&#123; int id = 1001; String name; Account acct; &#123; name = &quot;åŒ¿åå®¢æˆ·&quot;; &#125; public Customer()&#123; acct = new Account(); &#125; public static void main(String[] args) &#123; Customer cust = new Customer(); &#125;&#125;class Account&#123;&#125; å›¾è§£å†…å­˜å¸ƒå±€ åŽŸå­æ€§(Atomicity)â€‹ ç”± J a v a å†… å­˜ æ¨¡ åž‹ æ¥ ç›´ æŽ¥ ä¿ è¯ çš„ åŽŸ å­ æ€§ å˜ é‡ æ“ ä½œ åŒ… æ‹¬ r e a d ã€ l o a d ã€ a s s i gn ã€ u s e ã€ s t o r e å’Œ w r i t e è¿™ å…­ ä¸ª ï¼Œ æˆ‘ä»¬å¤§è‡´å¯ä»¥è®¤ä¸ºï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹çš„è®¿é—®ã€è¯»å†™éƒ½æ˜¯å…·å¤‡åŽŸå­æ€§çš„(ä¾‹å¤–å°±æ˜¯longå’Œdoubleçš„éžåŽŸå­æ€§ åå®šï¼Œè¯»è€…åªè¦çŸ¥é“è¿™ä»¶äº‹æƒ…å°±å¯ä»¥äº†ï¼Œæ— é¡»å¤ªè¿‡åœ¨æ„è¿™äº›å‡ ä¹Žä¸ä¼šå‘ç”Ÿçš„ä¾‹å¤–æƒ…å†µ)ã€‚ å¦‚æžœåº”ç”¨åœºæ™¯éœ€è¦ä¸€ä¸ªæ›´å¤§èŒƒå›´çš„åŽŸå­æ€§ä¿è¯(ç»å¸¸ä¼šé‡åˆ°)ï¼ŒJavaå†…å­˜æ¨¡åž‹è¿˜æä¾›äº†lockå’Œ unlockæ“ä½œæ¥æ»¡è¶³è¿™ç§éœ€æ±‚ï¼Œå°½ç®¡è™šæ‹ŸæœºæœªæŠŠlockå’Œunlockæ“ä½œç›´æŽ¥å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œä½†æ˜¯å´æä¾›äº†æ›´ é«˜ å±‚ æ¬¡ çš„ å­— èŠ‚ ç  æŒ‡ ä»¤ m o n i t o r e n t e r å’Œ m o n i t o r e xi t æ¥ éš å¼ åœ° ä½¿ ç”¨ è¿™ ä¸¤ ä¸ª æ“ ä½œ ã€‚ è¿™ ä¸¤ ä¸ª å­— èŠ‚ ç  æŒ‡ ä»¤ å æ˜  åˆ° J a v a ä»£ç ä¸­å°±æ˜¯åŒæ­¥å—â€”â€”synchronizedå…³é”®å­—ï¼Œå› æ­¤åœ¨synchronizedå—ä¹‹é—´çš„æ“ä½œä¹Ÿå…·å¤‡åŽŸå­æ€§ã€‚ long å’Œ double çš„åŽŸå­æ€§åœ¨å‰é¢ï¼Œæˆ‘ä»¬è®²è¿°äº† long å’Œ double å’Œå…¶ä»–çš„åŸºæœ¬ç±»åž‹ä¸å¤ªä¸€æ ·ï¼Œå¥½åƒä¸å…·å¤‡åŽŸå­æ€§ï¼Œè¿™æ˜¯ä»€ä¹ˆåŽŸå› é€ æˆçš„å‘¢ï¼Ÿ â€‹ long å’Œ double çš„å€¼éœ€è¦å ç”¨ 64 ä½çš„å†…å­˜ç©ºé—´ï¼Œè€Œå¯¹äºŽ 64 ä½å€¼çš„å†™å…¥ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„æ“ä½œæ¥è¿›è¡Œã€‚ è¿™æ ·ä¸€æ¥ï¼Œæœ¬æ¥æ˜¯ä¸€ä¸ªæ•´ä½“çš„èµ‹å€¼æ“ä½œï¼Œå°±å¯èƒ½è¢«æ‹†åˆ†ä¸ºä½Ž 32 ä½å’Œé«˜ 32 ä½çš„ä¸¤ä¸ªæ“ä½œã€‚å¦‚æžœåœ¨è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å‘ç”Ÿäº†å…¶ä»–çº¿ç¨‹å¯¹è¿™ä¸ªå€¼çš„è¯»æ“ä½œï¼Œå°±å¯èƒ½ä¼šè¯»åˆ°ä¸€ä¸ªé”™è¯¯ã€ä¸å®Œæ•´çš„å€¼ã€‚ å¯ è§ æ€§ ( Vi s i b i l i t y )å¯è§æ€§å°±æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼æ—¶ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚ä¸Šæ–‡åœ¨è®²è§£ volat ileå˜é‡çš„æ—¶å€™æˆ‘ä»¬å·²è¯¦ç»†è®¨è®ºè¿‡è¿™ä¸€ç‚¹ã€‚Javaå†…å­˜æ¨¡åž‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åŽå°†æ–°å€¼åŒæ­¥å›žä¸»å†… å­˜ï¼Œåœ¨å˜é‡è¯»å–å‰ä»Žä¸»å†…å­˜åˆ·æ–°å˜é‡å€¼è¿™ç§ä¾èµ–ä¸»å†…å­˜ä½œä¸ºä¼ é€’åª’ä»‹çš„æ–¹å¼æ¥å®žçŽ°å¯è§æ€§çš„ï¼Œæ— è®ºæ˜¯ æ™®é€šå˜é‡è¿˜æ˜¯volat ileå˜é‡éƒ½æ˜¯å¦‚æ­¤ã€‚æ™®é€šå˜é‡ä¸Žvolat ileå˜é‡çš„åŒºåˆ«æ˜¯ï¼Œvolat ileçš„ç‰¹æ®Šè§„åˆ™ä¿è¯äº†æ–°å€¼ èƒ½ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³ä»Žä¸»å†…å­˜åˆ·æ–°ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¯´volat ileä¿è¯äº†å¤šçº¿ç¨‹æ“ä½œ æ—¶å˜é‡çš„å¯è§æ€§ï¼Œè€Œæ™®é€šå˜é‡åˆ™ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚ èƒ½ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ ï¼Ÿï¼Ÿ æ„Ÿè§‰ä¹Ÿæœ‰é—®é¢˜ ç¤ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * æè¿°ï¼š æ¼”ç¤ºå¯è§æ€§å¸¦æ¥çš„é—®é¢˜ */public class VisibilityProblem &#123; int a = 10; int b = 20; private void change() &#123; a = 30; b = a; &#125; private void print() &#123; System.out.println(&quot;b=&quot; + b + &quot;;a=&quot; + a); &#125; public static void main(String[] args) &#123; while (true) &#123; VisibilityProblem problem = new VisibilityProblem(); new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; problem.change(); &#125; &#125;).start(); new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; Thread.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; problem.print(); &#125; &#125;).start(); &#125; &#125;&#125; ä¼šå‡ºçŽ° b = 30;a = 30 b = 20;a = 10 b = 20;a = 30 è¿˜ä¼šæœ‰ä¸€ç§æƒ…å†µ b = 30;a = 10, è¿™ç§æƒ…å†µå°±ä¼šæœ‰å¯è§æ€§é—®é¢˜,a çš„å€¼å·²ç»è¢«ç¬¬ 1 ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ï¼Œä½†æ˜¯å…¶ä»–çº¿ç¨‹å´çœ‹ä¸åˆ°ï¼Œç”±äºŽ a çš„æœ€æ–°å€¼å´æ²¡èƒ½åŠæ—¶åŒæ­¥è¿‡æ¥ï¼Œæ‰€ä»¥æ‰ä¼šæ‰“å°å‡º a çš„æ—§å€¼ã€‚ ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜çš„å…³ç³»CPU æœ‰å¤šçº§ç¼“å­˜ï¼Œå¯¼è‡´è¯»çš„æ•°æ®è¿‡æœŸ,ç”±äºŽ CPU çš„å¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œå†…å­˜çš„é€Ÿåº¦å°±æ˜¾å¾—å¾ˆæ…¢ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜ CPU çš„æ•´ä½“è¿è¡Œæ•ˆçŽ‡ï¼Œå‡å°‘ç©ºé—²æ—¶é—´ï¼Œåœ¨ CPU å’Œå†…å­˜ä¹‹é—´ä¼šæœ‰ cache å±‚ï¼Œä¹Ÿå°±æ˜¯ç¼“å­˜å±‚çš„å­˜åœ¨ã€‚è™½ç„¶ç¼“å­˜çš„å®¹é‡æ¯”å†…å­˜å°ï¼Œä½†æ˜¯ç¼“å­˜çš„é€Ÿåº¦å´æ¯”å†…å­˜çš„é€Ÿåº¦è¦å¿«å¾—å¤šï¼Œå…¶ä¸­ L1 ç¼“å­˜çš„é€Ÿåº¦ä»…æ¬¡äºŽå¯„å­˜å™¨çš„é€Ÿåº¦ è¶Šé è¿‘æ ¸å¿ƒï¼Œå…¶å®¹é‡å°±è¶Šå°ï¼Œä½†æ˜¯é€Ÿåº¦ä¹Ÿè¶Šå¿«. çº¿ç¨‹å¯è§æ€§é—®é¢˜çš„å®žè´¨çº¿ç¨‹é—´å¯¹äºŽå…±äº«å˜é‡çš„å¯è§æ€§é—®é¢˜ï¼Œå¹¶ä¸æ˜¯ç›´æŽ¥ç”±å¤šæ ¸å¼•èµ·çš„ï¼Œè€Œæ˜¯ç”±æˆ‘ä»¬åˆšæ‰è®²åˆ°çš„è¿™äº› L3 ç¼“å­˜ã€L2 ç¼“å­˜ã€L1 ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯å¤šçº§ç¼“å­˜å¼•èµ·çš„ï¼šæ¯ä¸ªæ ¸å¿ƒåœ¨èŽ·å–æ•°æ®æ—¶ï¼Œéƒ½ä¼šå°†æ•°æ®ä»Žå†…å­˜ä¸€å±‚å±‚å¾€ä¸Šè¯»å–ï¼ŒåŒæ ·ï¼ŒåŽç»­å¯¹äºŽæ•°æ®çš„ä¿®æ”¹ä¹Ÿæ˜¯å…ˆå†™å…¥åˆ°è‡ªå·±çš„ L1 ç¼“å­˜ä¸­ï¼Œç„¶åŽç­‰å¾…æ—¶æœºå†é€å±‚å¾€ä¸‹åŒæ­¥ï¼Œç›´åˆ°æœ€ç»ˆåˆ·å›žå†…å­˜ã€‚ å‡è®¾ core 1 ä¿®æ”¹äº†å˜é‡ a çš„å€¼ï¼Œå¹¶å†™å…¥åˆ°äº† core 1 çš„ L1 ç¼“å­˜é‡Œï¼Œä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠç»§ç»­å¾€ä¸‹åŒæ­¥ï¼Œç”±äºŽ core 1 æœ‰å®ƒè‡ªå·±çš„çš„ L1 ç¼“å­˜ï¼Œcore 4 æ˜¯æ— æ³•ç›´æŽ¥è¯»å– core 1 çš„ L1 ç¼“å­˜çš„å€¼çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯¹äºŽ core 4 è€Œè¨€ï¼Œå˜é‡ a çš„å€¼å°±ä¸æ˜¯ core 1 ä¿®æ”¹åŽçš„æœ€æ–°çš„å€¼ï¼Œcore 4 è¯»å–åˆ°çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ªè¿‡æœŸçš„å€¼ï¼Œä»Žè€Œå¼•èµ·å¤šçº¿ç¨‹æ—¶å¯è§æ€§é—®é¢˜çš„å‘ç”Ÿã€‚ ä»€ä¹ˆæ˜¯ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜Java ä½œä¸ºé«˜çº§è¯­è¨€ï¼Œå±è”½äº† L1 ç¼“å­˜ã€L2 ç¼“å­˜ã€L3 ç¼“å­˜(å¯ä»¥çœ‹ä½œ å·¥ä½œå†…å­˜)ï¼Œä¹Ÿå°±æ˜¯å¤šå±‚ç¼“å­˜çš„è¿™äº›åº•å±‚ç»†èŠ‚ï¼Œç”¨ JMM å®šä¹‰äº†ä¸€å¥—è¯»å†™æ•°æ®çš„è§„èŒƒã€‚æˆ‘ä»¬ä¸å†éœ€è¦å…³å¿ƒ L1 ç¼“å­˜ã€L2 ç¼“å­˜ã€L3 ç¼“å­˜ç­‰å¤šå±‚ç¼“å­˜çš„é—®é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒ JMM æŠ½è±¡å‡ºæ¥çš„ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜çš„æ¦‚å¿µã€‚ æ¯ä¸ªçº¿ç¨‹åªèƒ½å¤Ÿç›´æŽ¥æŽ¥è§¦åˆ°å·¥ä½œå†…å­˜ï¼Œæ— æ³•ç›´æŽ¥æ“ä½œä¸»å†…å­˜ï¼Œè€Œå·¥ä½œå†…å­˜ä¸­æ‰€ä¿å­˜çš„æ­£æ˜¯ä¸»å†…å­˜çš„å…±äº«å˜é‡çš„å‰¯æœ¬ï¼Œä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„é€šä¿¡æ˜¯ç”± JMM æŽ§åˆ¶çš„ã€‚ JMM æœ‰ä»¥ä¸‹è§„å®šï¼š ï¼ˆ1ï¼‰æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼ŒåŒæ—¶æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„å·¥ä½œå†…å­˜ï¼Œè€Œå·¥ä½œå†…å­˜ä¸­çš„å˜é‡çš„å†…å®¹æ˜¯ä¸»å†…å­˜ä¸­è¯¥å˜é‡çš„æ‹·è´ï¼› ï¼ˆ2ï¼‰çº¿ç¨‹ä¸èƒ½ç›´æŽ¥è¯» / å†™ä¸»å†…å­˜ä¸­çš„å˜é‡ï¼Œä½†å¯ä»¥æ“ä½œè‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œç„¶åŽå†åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼Œè¿™æ ·ï¼Œå…¶ä»–çº¿ç¨‹å°±å¯ä»¥çœ‹åˆ°æœ¬æ¬¡ä¿®æ”¹ï¼› ï¼ˆ3ï¼‰ ä¸»å†…å­˜æ˜¯ç”±å¤šä¸ªçº¿ç¨‹æ‰€å…±äº«çš„ï¼Œä½†çº¿ç¨‹é—´ä¸å…±äº«å„è‡ªçš„å·¥ä½œå†…å­˜ï¼Œå¦‚æžœçº¿ç¨‹é—´éœ€è¦é€šä¿¡ï¼Œåˆ™å¿…é¡»å€ŸåŠ©ä¸»å†…å­˜ä¸­è½¬æ¥å®Œæˆã€‚ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=298 æŒ‡ä»¤é‡æŽ’åºå‡è®¾æˆ‘ä»¬å†™äº†ä¸€ä¸ª Java ç¨‹åºï¼ŒåŒ…å«ä¸€ç³»åˆ—çš„è¯­å¥ï¼Œæˆ‘ä»¬ä¼šé»˜è®¤æœŸæœ›è¿™äº›è¯­å¥çš„å®žé™…è¿è¡Œé¡ºåºå’Œå†™çš„ä»£ç é¡ºåºä¸€è‡´ã€‚ä½†å®žé™…ä¸Šï¼Œç¼–è¯‘å™¨ã€JVM æˆ–è€… CPU éƒ½æœ‰å¯èƒ½å‡ºäºŽä¼˜åŒ–ç­‰ç›®çš„ï¼Œå¯¹äºŽå®žé™…æŒ‡ä»¤æ‰§è¡Œçš„é¡ºåºè¿›è¡Œè°ƒæ•´ï¼Œè¿™å°±æ˜¯é‡æŽ’åºã€‚ é‡æŽ’åºçš„å¥½å¤„ å·¦ä¾§ 3 è¡Œ Java ä»£ç ï¼Œå³ä¾§æ˜¯è¿™ 3 è¡Œä»£ç å¯èƒ½è¢«è½¬åŒ–æˆçš„æŒ‡ä»¤ã€‚å¯ä»¥çœ‹å‡º a = 100 å¯¹åº”çš„æ˜¯ Load aã€Set to 100ã€Store aï¼Œæ„å‘³ç€ä»Žä¸»å­˜ä¸­è¯»å– a çš„å€¼ï¼Œç„¶åŽæŠŠå€¼è®¾ç½®ä¸º 100ï¼Œå¹¶å­˜å‚¨å›žåŽ»ï¼ŒåŒç†ï¼Œ b = 5 å¯¹åº”çš„æ˜¯ä¸‹é¢ä¸‰è¡Œ Load bã€Set to 5ã€Store bï¼Œæœ€åŽçš„ a = a + 10ï¼Œå¯¹åº”çš„æ˜¯ Load aã€Set to 110ã€Store aã€‚å¦‚æžœä½ ä»”ç»†è§‚å¯Ÿï¼Œä¼šå‘çŽ°è¿™é‡Œæœ‰ä¸¤æ¬¡â€œLoad aâ€å’Œä¸¤æ¬¡â€œStore aâ€ï¼Œè¯´æ˜Žå­˜åœ¨ä¸€å®šçš„é‡æŽ’åºçš„ä¼˜åŒ–ç©ºé—´ã€‚ é‡æŽ’åºåŽï¼Œ a çš„ä¸¤æ¬¡æ“ä½œè¢«æ”¾åˆ°ä¸€èµ·ï¼ŒæŒ‡ä»¤æ‰§è¡Œæƒ…å†µå˜ä¸º Load aã€Set to 100ã€Set to 110ã€ Store aã€‚ä¸‹é¢å’Œ b ç›¸å…³çš„æŒ‡ä»¤ä¸å˜ï¼Œä»å¯¹åº” Load bã€ Set to 5ã€Store bã€‚ å¯ä»¥çœ‹å‡ºï¼Œé‡æŽ’åºåŽ a çš„ç›¸å…³æŒ‡ä»¤å‘ç”Ÿäº†å˜åŒ–ï¼ŒèŠ‚çœäº†ä¸€æ¬¡ Load a å’Œä¸€æ¬¡ Store aã€‚é‡æŽ’åºé€šè¿‡å‡å°‘æ‰§è¡ŒæŒ‡ä»¤ï¼Œä»Žè€Œæé«˜æ•´ä½“çš„è¿è¡Œé€Ÿåº¦ï¼Œè¿™å°±æ˜¯é‡æŽ’åºå¸¦æ¥çš„ä¼˜åŒ–å’Œå¥½å¤„ã€‚ é‡æŽ’åºçš„ 3 ç§æƒ…å†µä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é‡æŽ’åºçš„ 3 ç§æƒ…å†µã€‚ ï¼ˆ1ï¼‰ç¼–è¯‘å™¨ä¼˜åŒ– ç¼–è¯‘å™¨ï¼ˆåŒ…æ‹¬ JVMã€JIT ç¼–è¯‘å™¨ç­‰ï¼‰å‡ºäºŽä¼˜åŒ–çš„ç›®çš„ï¼Œä¾‹å¦‚å½“å‰æœ‰äº†æ•°æ® aï¼ŒæŠŠå¯¹ a çš„æ“ä½œæ”¾åˆ°ä¸€èµ·æ•ˆçŽ‡ä¼šæ›´é«˜ï¼Œé¿å…è¯»å– b åŽåˆè¿”å›žæ¥é‡æ–°è¯»å– a çš„æ—¶é—´å¼€é”€ï¼Œæ­¤æ—¶åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œä¸€å®šç¨‹åº¦çš„é‡æŽ’ã€‚ä¸è¿‡é‡æŽ’åºå¹¶ä¸æ„å‘³ç€å¯ä»¥ä»»æ„æŽ’åºï¼Œå®ƒéœ€è¦éœ€è¦ä¿è¯é‡æŽ’åºåŽï¼Œä¸æ”¹å˜å•çº¿ç¨‹å†…çš„è¯­ä¹‰ï¼Œå¦åˆ™å¦‚æžœèƒ½ä»»æ„æŽ’åºçš„è¯ï¼Œç¨‹åºæ—©å°±é€»è¾‘æ··ä¹±äº†ã€‚ ï¼ˆ2ï¼‰CPU é‡æŽ’åº CPU åŒæ ·ä¼šæœ‰ä¼˜åŒ–è¡Œä¸ºï¼Œè¿™é‡Œçš„ä¼˜åŒ–å’Œç¼–è¯‘å™¨ä¼˜åŒ–ç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ä¹±åºæ‰§è¡Œçš„æŠ€æœ¯æ¥æé«˜æ•´ä½“çš„æ‰§è¡Œæ•ˆçŽ‡ã€‚æ‰€ä»¥å³ä½¿ä¹‹å‰ç¼–è¯‘å™¨ä¸å‘ç”Ÿé‡æŽ’ï¼ŒCPU ä¹Ÿå¯èƒ½è¿›è¡Œé‡æŽ’ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­ï¼Œä¸€å®šè¦è€ƒè™‘åˆ°é‡æŽ’åºå¸¦æ¥çš„åŽæžœã€‚ ï¼ˆ3ï¼‰ å†…å­˜çš„â€œé‡æŽ’åºâ€ å†…å­˜ç³»ç»Ÿå†…ä¸å­˜åœ¨çœŸæ­£çš„é‡æŽ’åºï¼Œä½†æ˜¯å†…å­˜ä¼šå¸¦æ¥çœ‹ä¸ŠåŽ»å’Œé‡æŽ’åºä¸€æ ·çš„æ•ˆæžœï¼Œæ‰€ä»¥è¿™é‡Œçš„â€œé‡æŽ’åºâ€æ‰“äº†åŒå¼•å·ã€‚ç”±äºŽå†…å­˜æœ‰ç¼“å­˜çš„å­˜åœ¨ï¼Œåœ¨ JMM é‡Œè¡¨çŽ°ä¸ºä¸»å­˜å’Œæœ¬åœ°å†…å­˜ï¼Œè€Œä¸»å­˜å’Œæœ¬åœ°å†…å­˜çš„å†…å®¹å¯èƒ½ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¼šå¯¼è‡´ç¨‹åºè¡¨çŽ°å‡ºä¹±åºçš„è¡Œä¸ºã€‚ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=295","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"flutter_begin","slug":"flutter-begin","date":"2020-01-04T05:46:38.000Z","updated":"2025-02-18T00:16:27.924Z","comments":true,"path":"2020/01/04/flutter-begin/","link":"","permalink":"https://noteforme.github.io/2020/01/04/flutter-begin/","excerpt":"","text":"çŽ¯å¢ƒå˜é‡ bash_profile ~&#x2F;.bash_profile 123456export PATH=/Users/m/development/flutter/bin:$PATHexport ANDROID_HOME=&quot;/Users/m/Library/Android/sdk&quot;export PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/toolsexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/platform-toolsexport PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn ~/.zshrc ï¼Œåœ¨å…¶ä¸­æ·»åŠ ï¼šsource ~&#x2F;.bash_profile Project struct -&gt; Modules -&gt; no sdk é€‰æ‹© https://mp.weixin.qq.com/s/YfzcvebruRk4LJRTQFVDXA https://github.com/toly1994328/FlutterUnit build apkå‡ºé”™è§£å†³: rm &#x2F;Users&#x2F;john&#x2F;development&#x2F;flutter&#x2F;bin&#x2F;cache A problem occurred evaluating root project â€˜agora_rtmâ€™. Could not get unknown property â€˜kotlin_versionâ€™ for object of type org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler. ç‰ˆæœ¬é…ç½® &#x2F;Users&#x2F;***&#x2F;flutter&#x2F;.pub-cache&#x2F;hosted&#x2F;pub.flutter-io.cn&#x2F;cipher2-xxxx&#x2F;android&#x2F;build.gradleâ€™ , ext.kotlin_version &#x3D; 1.3.10 Users&#x2F;john&#x2F;.pub-cache&#x2F;hosted&#x2F;pub.flutter-io.cn&#x2F;agora_rtm-0.9.9&#x2F;android&#x2F;build.gradleâ€™ https://blog.csdn.net/weixin_44416513/article/details/90298303 WidgetText1234567891011121314151617181920212223class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: &#x27;Text widget&#x27;, home: Scaffold( body: Center( child: Text( &#x27;Hello JSPang ,éžå¸¸å–œæ¬¢å‰ç«¯ï¼Œå¹¶ä¸”æ„¿æ„ä¸ºæ­¤å¥‹æ–—ä¸€ç”Ÿã€‚æˆ‘å¸Œæœ›å¯ä»¥å‡º1000é›†å…è´¹æ•™ç¨‹ã€‚&#x27;, textAlign: TextAlign.left, overflow: TextOverflow.ellipsis, maxLines: 1, style: TextStyle( fontSize: 25.0, color: Color.fromARGB(255, 255, 150, 150), decoration: TextDecoration.underline, decorationStyle: TextDecorationStyle.solid, ), )), ), ); &#125;&#125; Image1234567891011121314151617181920212223class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build // TODO: implement createState return MaterialApp( title: &quot;Text WIDGET&quot;, home: Scaffold( body: Center( child: Container( child: new Image.network( &#x27;http://blogimages.jspang.com/blogtouxiang1.jpg&#x27;, repeat: ImageRepeat.repeatY, ), width: 300, height: 200, color: Colors.lightBlue, ), ), ), ); &#125;&#125; ListView æ¨ªå‘ 123456789101112131415161718192021222324252627282930313233343536373839class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: &#x27;JSPang Flutter Demo&#x27;, home: Scaffold( appBar: AppBar(title: Text(&#x27;ListView Widget&#x27;)), body: Center( child: Container( height: 200, child: MyListView(), ), ), )); &#125;&#125;class MyListView extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return ListView( scrollDirection: Axis.horizontal, children: &lt;Widget&gt;[ Container( width: 180, color: Colors.amber, ), Container( width: 180, color: Colors.lightBlue, ), Container( width: 180, color: Colors.deepPurpleAccent, ), ], ); &#125;&#125; åŠ¨æ€æ•°æ® 123456789101112131415161718192021class MyApp extends StatelessWidget &#123; final List&lt;String&gt; items; MyApp(&#123;@required this.items&#125;) : super(); @override Widget build(BuildContext context) &#123; return MaterialApp( title: &#x27;JSPang Flutter Demo&#x27;, home: Scaffold( appBar: AppBar(title: Text(&#x27;ListView Widget&#x27;)), body: ListView.builder( itemCount: items.length, itemBuilder: (context,index)&#123; return ListTile( title: Text(&#x27;$&#123;items[index]&#125;&#x27;), ); &#125;, ))); &#125;&#125; gridview 1234567891011121314151617181920212223class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: &#x27;JSPang Flutter Demo&#x27;, home: Scaffold( appBar: AppBar(title: Text(&#x27;ListView Widget&#x27;)), body: GridView.count( padding: EdgeInsets.all(20), crossAxisSpacing: 10, crossAxisCount: 4, children: &lt;Widget&gt;[ Text(&#x27;I am JOHN&#x27;), Text(&#x27;I am LI&#x27;), Text(&#x27;I am JON&#x27;), Text(&#x27;I am HEHE&#x27;), Text(&#x27;I am LILI&#x27;), Text(&#x27;I am SIYUE&#x27;), Text(&#x27;I am QIQI&#x27;), ], ))); &#125;&#125; row å›ºå®š 123456789101112131415161718192021222324252627282930313233class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return MaterialApp( title: &#x27;Row Widget Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text(&quot;æ°´å¹³æ–¹å‘å¸ƒå±€&quot;), ), body: Row( children: &lt;Widget&gt;[ RaisedButton( onPressed: () &#123;&#125;, color: Colors.amber, child: Text(&#x27;red Button&#x27;), ), RaisedButton( onPressed: () &#123;&#125;, color: Colors.lightBlue, child: Text(&#x27;lightBlue Button&#x27;), ), RaisedButton( onPressed: () &#123;&#125;, color: Colors.redAccent, child: Text(&#x27;redAccent Button&#x27;), ), ] ), ), ); &#125;&#125; ä¸å›ºå®š 12345678910111213141516171819202122232425262728293031323334353637class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return MaterialApp( title: &#x27;Row Widget Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text(&quot;æ°´å¹³æ–¹å‘å¸ƒå±€&quot;), ), body: Row(children: &lt;Widget&gt;[ Expanded( child: RaisedButton( onPressed: () &#123;&#125;, color: Colors.lightBlue, child: Text(&#x27;lightBlue Button&#x27;), ), ), Expanded( child: RaisedButton( onPressed: () &#123;&#125;, color: Colors.redAccent, child: Text(&#x27;redAccent Button&#x27;), ), ), Expanded( child: RaisedButton( onPressed: () &#123;&#125;, color: Colors.deepPurpleAccent, child: Text(&#x27;deepPurpleAccent Button&#x27;), ), ), ]), ), ); &#125;&#125; coloumn12345678910111213141516171819202122232425262728class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return MaterialApp( title: &#x27;Column Widget Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text(&quot;æ°´å¹³æ–¹å‘å¸ƒå±€&quot;), ), body: Column( crossAxisAlignment: CrossAxisAlignment.center, mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text(&#x27;I am JOHN&#x27;), Text(&#x27;I am LI&#x27;), Text(&#x27;I am JON I am JON I am JON&#x27;), Text(&#x27;I am HEHE&#x27;), Text(&#x27;I am LILI&#x27;), Text(&#x27;I am SIYUE&#x27;), Text(&#x27;I am QIQI&#x27;), ], ), ), ); &#125;&#125; CrossAxisAlignment ç›¸å¯¹äºŽæœ€é•¿çš„å¸ƒå±€ StackWidget1234567891011121314151617181920212223242526272829class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var stack = Stack( alignment: FractionalOffset(0.5,0.8), children: &lt;Widget&gt;[ CircleAvatar( backgroundImage: NetworkImage(&#x27;http://blogimages.jspang.com/blogtouxiang1.jpg&#x27;), radius: 100, ), Container( decoration: BoxDecoration(color: Colors.blue), padding: EdgeInsets.all(5), child: Text(&quot;I am JON&quot;), ) ], ); return MaterialApp( title: &#x27;Column Widget Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text(&quot;æ°´å¹³æ–¹å‘å¸ƒå±€&quot;), ), body:Center(child: stack), ), ); &#125;&#125; FractionalOffset 0-1 ç›¸å¯¹äºŽå½“å‰å®¹å™¨çš„ X Yè½´ Position Widget12345678910111213141516171819202122232425262728293031323334353637383940class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var stack = Stack( alignment: FractionalOffset(0.1, 0.5), children: &lt;Widget&gt;[ CircleAvatar( backgroundImage: NetworkImage(&#x27;http://blogimages.jspang.com/blogtouxiang1.jpg&#x27;), radius: 100, ), Positioned( top: 10, left: 60, child: Text(&quot;I am JON&quot;), ), Positioned( bottom: 10, right: 10, child: Text( &quot;I am JON&quot;, style: TextStyle(fontSize: 25, color: Colors.lightBlue), ), ), ], ); return MaterialApp( title: &#x27;Column Widget Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text( &quot;æ°´å¹³æ–¹å‘å¸ƒå±€&quot;, style: TextStyle(fontSize: 25, color: Colors.redAccent), ), ), body: Center(child: stack), ), ); &#125;&#125; Positioned ç›¸å¯¹äºŽå½“å‰å®¹å™¨ padding? card123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var card = new Card( child: Column( children: &lt;Widget&gt;[ ListTile( title: Text( &quot;ä¸Šæµ·å¸‚ é«˜å…´åŒº&quot;, style: TextStyle(fontWeight: FontWeight.w500), ), subtitle: Text(&quot;john 182929739933&quot;), leading: Icon( Icons.account_box, color: Colors.lightBlue, ), ), Divider(), ListTile( title: Text( &quot;åŒ—äº¬å¸‚ é«˜å…´åŒº&quot;, style: TextStyle(fontWeight: FontWeight.w500), ), subtitle: Text(&quot;elon 182929739933&quot;), leading: Icon( Icons.account_box, color: Colors.lightBlue, ), ), Divider(), ListTile( title: Text( &quot;æ±Ÿè¥¿çœ é«˜å…´åŒº&quot;, style: TextStyle(fontWeight: FontWeight.w500), ), subtitle: Text(&quot;lari 182929739933&quot;), leading: Icon( Icons.account_box, color: Colors.lightBlue, ), ), ], ), ); return MaterialApp( title: &quot;Row Widget Demo&quot;, home: Scaffold( appBar: AppBar( title: Text(&#x27;Cardå¸ƒå±€&#x27;), ), body: Center( child: card, ), )); &#125;&#125; é¡µé¢è·³è½¬1234567891011121314151617181920212223242526272829303132333435363738class FirstScreen extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Scaffold( appBar: AppBar(title: Text(&#x27;å¯¼èˆªé¡µé¢&#x27;)), body: Center( child: RaisedButton( child: Text(&#x27;æŸ¥çœ‹å•†å“è¯¦æƒ…é¡µ&#x27;), onPressed: () &#123; Navigator.push(context, MaterialPageRoute(builder: (context) =&gt; new SecondScreen())); &#125;, ), ), ); &#125;&#125;class SecondScreen extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Scaffold( appBar: AppBar( title: Text(&#x27;å¯¼èˆªå•†å“è¯¦æƒ…é¡µ&#x27;), ), body: Center( child: RaisedButton( child: Text(&#x27;è¿”å›ž&#x27;), onPressed: ()&#123; Navigator.pop(context); &#125;, ), ), ); &#125;&#125; åˆ—è¡¨ä¼ å‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859void main() =&gt; runApp(MaterialApp( title: &quot;åˆ—è¡¨æ•°æ®ä¼ é€’&quot;, home: ProductList( products: List.generate(20, (i) =&gt; Product(&#x27; å•†å“ $i&#x27;, &#x27;è¿™æ˜¯ä¸€ä¸ªå•†å“è¯¦æƒ…ï¼Œ ç¼–å·: $i&#x27;)))));class ProductList extends StatelessWidget &#123; final List&lt;Product&gt; products; ProductList(&#123;this.products&#125;) : super(); @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text(&#x27;å•†å“åˆ—è¡¨&#x27;), ), body: ListView.builder( itemCount: products.length, itemBuilder: (context, index) &#123; return ListTile( title: Text(products[index].title), onTap: () &#123; Navigator.push( context, MaterialPageRoute( builder: (context) =&gt; ProductDetail(product: products[index]))); &#125;, ); &#125;), ); &#125;&#125;class Product &#123; final String title; final String description; Product(this.title, this.description);&#125;class ProductDetail extends StatelessWidget &#123; final Product product; ProductDetail(&#123;this.product&#125;) : super(); @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text(&#x27;$&#123;product.title&#125;&#x27;), ), body: Center( child: Text(&#x27;$&#123;product.description&#125;&#x27;), ), ); &#125;&#125; è·³è½¬è¿”å›ž1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465class FirstPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text(&#x27;å°å§å§è¦ç”µè¯&#x27;), ), body: Center( child: RouteButton(), ), ); &#125;&#125;class RouteButton extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return RaisedButton( onPressed: () &#123; _navigateToXiaoJIe(context); &#125;, child: Text(&#x27;æ‰¾å°å§å§&#x27;), ); &#125;&#125;_navigateToXiaoJIe(BuildContext context) async &#123; final result = await Navigator.push( context, MaterialPageRoute(builder: (context) =&gt; XiaoJieJie())); Scaffold.of(context).showSnackBar(SnackBar( content: Text(&#x27;$result&#x27;), ));&#125;class XiaoJieJie extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Scaffold( appBar: AppBar( title: Text(&#x27;æˆ‘æ˜¯å°å§å§&#x27;), ), body: Center( child: Column( children: &lt;Widget&gt;[ RaisedButton( child: Text(&#x27;å¯çˆ±å°å§å§&#x27;), onPressed: () &#123; Navigator.pop(context, &#x27;å¯çˆ±å°å§å§ 1550008883&#x27;); &#125;, ), RaisedButton( child: Text(&#x27;æ¼‚äº®å°å§å§&#x27;), onPressed: () &#123; Navigator.pop(context, &#x27;æ¼‚äº®å°å§å§ 1550009983&#x27;); &#125;, ), ], ), ), ); &#125;&#125;","categories":[{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"}],"tags":[]},{"title":"JVM_STACK","slug":"JVM-STACK","date":"2020-01-04T03:28:39.000Z","updated":"2022-06-12T03:17:58.660Z","comments":true,"path":"2020/01/04/JVM-STACK/","link":"","permalink":"https://noteforme.github.io/2020/01/04/JVM-STACK/","excerpt":"","text":"å­—èŠ‚ç æŒ‡ä»¤è¿è¡Œ https://www.bilibili.com/video/BV1PJ411n7xZ?p=49 è™šæ‹Ÿæœºæ ˆè™šæ‹Ÿæœºæ ˆçš„å‡ºçŽ°èƒŒæ™¯ ç”±äºŽè·¨å¹³å°æ€§çš„è®¾è®¡ï¼ŒJavaçš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ã€‚ä¸åŒå¹³å°CPUæž¶æž„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºŽå¯„å­˜å™¨çš„ã€å¦‚æžœè®¾è®¡æˆåŸºäºŽå¯„å­˜å™¨çš„ï¼Œè€¦åˆåº¦é«˜ï¼Œæ€§èƒ½ä¼šæœ‰æ‰€æå‡ï¼Œå› ä¸ºå¯ä»¥å¯¹å…·ä½“çš„CPUæž¶æž„è¿›è¡Œä¼˜åŒ–ï¼Œä½†æ˜¯è·¨å¹³å°æ€§å¤§å¤§é™ä½Žã€‘ã€‚ ä¼˜ç‚¹æ˜¯è·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®žçŽ°ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä¸‹é™ï¼Œå®žçŽ°åŒæ ·çš„åŠŸèƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤ã€‚ å†…å­˜ä¸­çš„æ ˆä¸Žå † é¦–å…ˆæ ˆæ˜¯è¿è¡Œæ—¶çš„å•ä½ï¼Œè€Œå †æ˜¯å­˜å‚¨çš„å•ä½ã€‚ å³ï¼šæ ˆè§£å†³ç¨‹åºçš„è¿è¡Œé—®é¢˜ï¼Œå³ç¨‹åºå¦‚ä½•æ‰§è¡Œï¼Œæˆ–è€…è¯´å¦‚ä½•å¤„ç†æ•°æ®ã€‚å †è§£å†³çš„æ˜¯æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œå³æ•°æ®æ€Žä¹ˆæ”¾ï¼Œæ”¾å“ªé‡Œ è™šæ‹Ÿæœºæ ˆåŸºæœ¬å†…å®¹ Javaè™šæ‹Ÿæœºæ ˆæ˜¯ä»€ä¹ˆï¼Ÿ Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stackï¼‰ï¼Œæ—©æœŸä¹Ÿå«Javaæ ˆã€‚æ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œå…¶å†…éƒ¨ä¿å­˜ä¸€ä¸ªä¸ªçš„æ ˆå¸§ï¼ˆStack Frameï¼‰ï¼Œå¯¹åº”ç€ä¸€æ¬¡æ¬¡çš„Javaæ–¹æ³•è°ƒç”¨ï¼Œæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ 12345678910111213141516171819public class StackTest &#123; public static void main(String[] args) &#123; StackTest test = new StackTest(); test.methodA(); &#125; public void methodA() &#123; int i = 10; int j = 20; methodB(); &#125; public void methodB()&#123; int k = 30; int m = 40; &#125;&#125; è™šæ‹Ÿæœºæ ˆçš„ç”Ÿå‘½å‘¨æœŸ ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ç»“æŸäº†ï¼Œè¯¥è™šæ‹Ÿæœºæ ˆä¹Ÿé”€æ¯äº† è™šæ‹Ÿæœºæ ˆçš„ä½œç”¨ ä¸»ç®¡Javaç¨‹åºçš„è¿è¡Œï¼Œå®ƒä¿å­˜æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼ˆ8 ç§åŸºæœ¬æ•°æ®ç±»åž‹ã€å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼‰ã€éƒ¨åˆ†ç»“æžœï¼Œå¹¶å‚ä¸Žæ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›žã€‚ å±€éƒ¨å˜é‡ï¼Œå®ƒæ˜¯ç›¸æ¯”äºŽæˆå‘˜å˜é‡æ¥è¯´çš„ï¼ˆæˆ–å±žæ€§ï¼‰ åŸºæœ¬æ•°æ®ç±»åž‹å˜é‡ VS å¼•ç”¨ç±»åž‹å˜é‡ï¼ˆç±»ã€æ•°ç»„ã€æŽ¥å£ï¼‰ â€‹ è™šæ‹Ÿæœºæ ˆçš„ç‰¹ç‚¹ æ ˆæ˜¯ä¸€ç§å¿«é€Ÿæœ‰æ•ˆçš„åˆ†é…å­˜å‚¨æ–¹å¼ï¼Œè®¿é—®é€Ÿåº¦ä»…æ¬¡äºŽç¨‹åºè®¡æ•°å™¨ã€‚ JVMç›´æŽ¥å¯¹Javaæ ˆçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼š æ¯ä¸ªæ–¹æ³•æ‰§è¡Œï¼Œä¼´éšç€è¿›æ ˆï¼ˆå…¥æ ˆã€åŽ‹æ ˆï¼‰ æ‰§è¡Œç»“æŸåŽçš„å‡ºæ ˆå·¥ä½œ å¯¹äºŽæ ˆæ¥è¯´ä¸å­˜åœ¨åžƒåœ¾å›žæ”¶é—®é¢˜ æ ˆä¸éœ€è¦GCï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨OOM è™šæ‹Ÿæœºæ ˆçš„å¼‚å¸¸é¢è¯•é¢˜ï¼šæ ˆä¸­å¯èƒ½å‡ºçŽ°çš„å¼‚å¸¸ï¼Ÿ Java è™šæ‹Ÿæœºè§„èŒƒå…è®¸Javaæ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„æˆ–è€…æ˜¯å›ºå®šä¸å˜çš„ã€‚ å¦‚æžœé‡‡ç”¨å›ºå®šå¤§å°çš„Javaè™šæ‹Ÿæœºæ ˆï¼Œé‚£æ¯ä¸€ä¸ªçº¿ç¨‹çš„Javaè™šæ‹Ÿæœºæ ˆå®¹é‡å¯ä»¥åœ¨çº¿ç¨‹åˆ›å»ºçš„æ—¶å€™ç‹¬ç«‹é€‰å®šã€‚å¦‚æžœçº¿ç¨‹è¯·æ±‚åˆ†é…çš„æ ˆå®¹é‡è¶…è¿‡Javaè™šæ‹Ÿæœºæ ˆå…è®¸çš„æœ€å¤§å®¹é‡ï¼ŒJavaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ªStackoverflowError å¼‚å¸¸ã€‚ å¦‚æžœJavaè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå¹¶ä¸”åœ¨å°è¯•æ‰©å±•çš„æ—¶å€™æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œæˆ–è€…åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜åŽ»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œé‚£Javaè™šæ‹Ÿæœºå°†ä¼šæŠ›å‡ºä¸€ä¸ª OutofMemoryError å¼‚å¸¸ã€‚ è®¾ç½®æ ˆå†…å­˜å¤§å°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‚æ•° -Xss é€‰é¡¹æ¥è®¾ç½®çº¿ç¨‹çš„æœ€å¤§æ ˆç©ºé—´ï¼Œæ ˆçš„å¤§å°ç›´æŽ¥å†³å®šäº†å‡½æ•°è°ƒç”¨çš„æœ€å¤§å¯è¾¾æ·±åº¦ã€‚ Sets the thread stack size (in bytes). Append the letter k or K to indicate KB, m or M to indicate MB, and g or G to indicate GB. The default value depends on the platform: Linux/x64 (64-bit): 1024 KB macOS (64-bit): 1024 KB Oracle Solaris/x64 (64-bit): 1024 KB Windows: The default value depends on virtual memory The following examples set the thread stack size to 1024 KB in different units: 123-Xss1m-Xss1024k-Xss1048576 12345678public class StackErrorTest &#123; private static int count = 1; public static void main(String[] args) &#123; System.out.println(count); count++; main(args); &#125;&#125; æ²¡è®¾ç½®å‚æ•°å‰ éƒ¨åˆ†è¾“å‡ºç»“æžœï¼š 12345114041140511406Exception in thread &quot;main&quot; java.lang.StackOverflowError at sun.nio.cs.UTF_8$Encoder.encodeLoop(UTF_8.java:691) è¯´æ˜Žæ ˆåœ¨11406è¿™ä¸ªæ·±åº¦æº¢å‡ºäº† 12345247424752476Exception in thread &quot;main&quot; java.lang.StackOverflowError at sun.nio.cs.UTF_8.updatePositions(UTF_8.java:77) æ ˆçš„å­˜å‚¨å•ä½æ ˆä¸­å­˜å‚¨ä»€ä¹ˆï¼Ÿ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ ˆï¼Œæ ˆä¸­çš„æ•°æ®éƒ½æ˜¯ä»¥æ ˆå¸§ï¼ˆStack Frameï¼‰çš„æ ¼å¼å­˜åœ¨ åœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šæ­£åœ¨æ‰§è¡Œçš„æ¯ä¸ªæ–¹æ³•éƒ½å„è‡ªå¯¹åº”ä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ã€‚ æ ˆå¸§æ˜¯ä¸€ä¸ªå†…å­˜åŒºå—ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®é›†ï¼Œç»´ç³»ç€æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å„ç§æ•°æ®ä¿¡æ¯ã€‚ æ ˆè¿è¡ŒåŽŸç† JVMç›´æŽ¥å¯¹Javaæ ˆçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼Œå°±æ˜¯å¯¹æ ˆå¸§çš„åŽ‹æ ˆå’Œå‡ºæ ˆï¼Œéµå¾ªå…ˆè¿›åŽå‡ºï¼ˆåŽè¿›å…ˆå‡ºï¼‰åŽŸåˆ™ åœ¨ä¸€æ¡æ´»åŠ¨çº¿ç¨‹ä¸­ï¼Œä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œåªä¼šæœ‰ä¸€ä¸ªæ´»åŠ¨çš„æ ˆå¸§ã€‚å³åªæœ‰å½“å‰æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•çš„æ ˆå¸§ï¼ˆæ ˆé¡¶æ ˆå¸§ï¼‰æ˜¯æœ‰æ•ˆçš„ã€‚è¿™ä¸ªæ ˆå¸§è¢«ç§°ä¸ºå½“å‰æ ˆå¸§ï¼ˆCurrent Frameï¼‰ï¼Œä¸Žå½“å‰æ ˆå¸§ç›¸å¯¹åº”çš„æ–¹æ³•å°±æ˜¯å½“å‰æ–¹æ³•ï¼ˆCurrent Methodï¼‰ï¼Œå®šä¹‰è¿™ä¸ªæ–¹æ³•çš„ç±»å°±æ˜¯å½“å‰ç±»ï¼ˆCurrent Classï¼‰ æ‰§è¡Œå¼•æ“Žè¿è¡Œçš„æ‰€æœ‰å­—èŠ‚ç æŒ‡ä»¤åªé’ˆå¯¹å½“å‰æ ˆå¸§è¿›è¡Œæ“ä½œã€‚ å¦‚æžœåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œå¯¹åº”çš„æ–°çš„æ ˆå¸§ä¼šè¢«åˆ›å»ºå‡ºæ¥ï¼Œæ”¾åœ¨æ ˆçš„é¡¶ç«¯ï¼Œæˆä¸ºæ–°çš„å½“å‰å¸§ã€‚ ä¸åŒçº¿ç¨‹ä¸­æ‰€åŒ…å«çš„æ ˆå¸§æ˜¯ä¸å…è®¸å­˜åœ¨ç›¸äº’å¼•ç”¨çš„ï¼Œå³ä¸å¯èƒ½åœ¨ä¸€ä¸ªæ ˆå¸§ä¹‹ä¸­å¼•ç”¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æ ˆå¸§ã€‚ å¦‚æžœå½“å‰æ–¹æ³•è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œæ–¹æ³•è¿”å›žä¹‹é™…ï¼Œå½“å‰æ ˆå¸§ä¼šä¼ å›žæ­¤æ–¹æ³•çš„æ‰§è¡Œç»“æžœç»™å‰ä¸€ä¸ªæ ˆå¸§ï¼ŒæŽ¥ç€ï¼Œè™šæ‹Ÿæœºä¼šä¸¢å¼ƒå½“å‰æ ˆå¸§ï¼Œä½¿å¾—å‰ä¸€ä¸ªæ ˆå¸§é‡æ–°æˆä¸ºå½“å‰æ ˆå¸§ã€‚ Javaæ–¹æ³•æœ‰ä¸¤ç§è¿”å›žå‡½æ•°çš„æ–¹å¼ã€‚ ä¸€ç§æ˜¯æ­£å¸¸çš„å‡½æ•°è¿”å›žï¼Œä½¿ç”¨returnæŒ‡ä»¤ã€‚ å¦ä¸€ç§æ˜¯æ–¹æ³•æ‰§è¡Œä¸­å‡ºçŽ°æœªæ•èŽ·å¤„ç†çš„å¼‚å¸¸ï¼Œä»¥æŠ›å‡ºå¼‚å¸¸çš„æ–¹å¼ç»“æŸã€‚ ä½†ä¸ç®¡ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéƒ½ä¼šå¯¼è‡´æ ˆå¸§è¢«å¼¹å‡ºã€‚ æ ˆå¸§çš„å†…éƒ¨ç»“æž„æ¯ä¸ªæ ˆå¸§ä¸­å­˜å‚¨ç€ï¼š å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variablesï¼‰ æ“ä½œæ•°æ ˆï¼ˆOperand Stackï¼‰ï¼ˆæˆ–è¡¨è¾¾å¼æ ˆï¼‰ åŠ¨æ€é“¾æŽ¥ï¼ˆDynamic Linkingï¼‰ï¼ˆæˆ–æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨ï¼‰ æ–¹æ³•è¿”å›žåœ°å€ï¼ˆReturn Addressï¼‰ï¼ˆæˆ–æ–¹æ³•æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºçš„å®šä¹‰ï¼‰ ä¸€äº›é™„åŠ ä¿¡æ¯ å¹¶è¡Œæ¯ä¸ªçº¿ç¨‹ä¸‹çš„æ ˆéƒ½æ˜¯ç§æœ‰çš„ï¼Œå› æ­¤æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±å„è‡ªçš„æ ˆï¼Œå¹¶ä¸”æ¯ä¸ªæ ˆé‡Œé¢éƒ½æœ‰å¾ˆå¤šæ ˆå¸§ï¼Œæ ˆå¸§çš„å¤§å°ä¸»è¦ç”±å±€éƒ¨å˜é‡è¡¨ å’Œ æ“ä½œæ•°æ ˆå†³å®šçš„ å±€éƒ¨å˜é‡è¡¨ å±€éƒ¨å˜é‡è¡¨ä¹Ÿè¢«ç§°ä¹‹ä¸ºå±€éƒ¨å˜é‡æ•°ç»„æˆ–æœ¬åœ°å˜é‡è¡¨ å®šä¹‰ä¸ºä¸€ä¸ªæ•°å­—æ•°ç»„ï¼Œä¸»è¦ç”¨äºŽå­˜å‚¨æ–¹æ³•å‚æ•°å’Œå®šä¹‰åœ¨æ–¹æ³•ä½“å†…çš„å±€éƒ¨å˜é‡ï¼Œè¿™äº›æ•°æ®ç±»åž‹åŒ…æ‹¬å„ç±»åŸºæœ¬æ•°æ®ç±»åž‹ã€å¯¹è±¡å¼•ç”¨ï¼ˆreferenceï¼‰ï¼Œä»¥åŠreturnAddressè¿”å›žå€¼ç±»åž‹ã€‚ ç”±äºŽå±€éƒ¨å˜é‡è¡¨æ˜¯å»ºç«‹åœ¨çº¿ç¨‹çš„æ ˆä¸Šï¼Œæ˜¯çº¿ç¨‹çš„ç§æœ‰æ•°æ®ï¼Œå› æ­¤ä¸å­˜åœ¨æ•°æ®å®‰å…¨é—®é¢˜ å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å®¹é‡å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸç¡®å®šä¸‹æ¥çš„ï¼Œå¹¶ä¿å­˜åœ¨æ–¹æ³•çš„Codeå±žæ€§çš„maximum local variablesæ•°æ®é¡¹ä¸­ã€‚åœ¨æ–¹æ³•è¿è¡ŒæœŸé—´æ˜¯ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°çš„ã€‚ æ–¹æ³•åµŒå¥—è°ƒç”¨çš„æ¬¡æ•°ç”±æ ˆçš„å¤§å°å†³å®šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ ˆè¶Šå¤§ï¼Œæ–¹æ³•åµŒå¥—è°ƒç”¨æ¬¡æ•°è¶Šå¤šã€‚ å¯¹ä¸€ä¸ªå‡½æ•°è€Œè¨€ï¼Œå®ƒçš„å‚æ•°å’Œå±€éƒ¨å˜é‡è¶Šå¤šï¼Œä½¿å¾—å±€éƒ¨å˜é‡è¡¨è†¨èƒ€ï¼Œå®ƒçš„æ ˆå¸§å°±è¶Šå¤§ï¼Œä»¥æ»¡è¶³æ–¹æ³•è°ƒç”¨æ‰€éœ€ä¼ é€’çš„ä¿¡æ¯å¢žå¤§çš„éœ€æ±‚ã€‚ è¿›è€Œå‡½æ•°è°ƒç”¨å°±ä¼šå ç”¨æ›´å¤šçš„æ ˆç©ºé—´ï¼Œå¯¼è‡´å…¶åµŒå¥—è°ƒç”¨æ¬¡æ•°å°±ä¼šå‡å°‘ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­çš„å˜é‡åªåœ¨å½“å‰æ–¹æ³•è°ƒç”¨ä¸­æœ‰æ•ˆã€‚ åœ¨æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œè™šæ‹Ÿæœºé€šè¿‡ä½¿ç”¨å±€éƒ¨å˜é‡è¡¨å®Œæˆå‚æ•°å€¼åˆ°å‚æ•°å˜é‡åˆ—è¡¨çš„ä¼ é€’è¿‡ç¨‹ã€‚ å½“æ–¹æ³•è°ƒç”¨ç»“æŸåŽï¼Œéšç€æ–¹æ³•æ ˆå¸§çš„é”€æ¯ï¼Œå±€éƒ¨å˜é‡è¡¨ä¹Ÿä¼šéšä¹‹é”€æ¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class LocalVariablesTest &#123; private int count = 0; public static void main(String[] args) &#123; LocalVariablesTest test = new LocalVariablesTest(); int num = 10; test.test1(); &#125; //ç»ƒä¹ ï¼š public static void testStatic()&#123; LocalVariablesTest test = new LocalVariablesTest(); Date date = new Date(); int count = 10; System.out.println(count); //å› ä¸ºthiså˜é‡ä¸å­˜åœ¨äºŽå½“å‰æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ï¼// System.out.println(this.count); &#125; //å…³äºŽSlotçš„ä½¿ç”¨çš„ç†è§£ public LocalVariablesTest()&#123; this.count = 1; &#125; public void test1() &#123; Date date = new Date(); String name1 = &quot;atguigu.com&quot;; test2(date, name1); System.out.println(date + name1); &#125; public String test2(Date dateP, String name2) &#123; dateP = null; name2 = &quot;songhongkang&quot;; double weight = 130.5;//å æ®ä¸¤ä¸ªslot char gender = &#x27;ç”·&#x27;; return dateP + name2; &#125; public void test3() &#123; this.count++; &#125; public void test4() &#123; int a = 0; &#123; int b = 0; b = a + 1; &#125; //å˜é‡cä½¿ç”¨ä¹‹å‰å·²ç»é”€æ¯çš„å˜é‡bå æ®çš„slotçš„ä½ç½® int c = a + 1; &#125;&#125; çœ‹å®Œå­—èŠ‚ç åŽï¼Œå¯å¾—ç»“è®ºï¼šæ‰€ä»¥å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å®¹é‡å¤§å°æ˜¯åœ¨ç¼–è¯‘æœŸç¡®å®šä¸‹æ¥çš„ã€‚ éƒ¨åˆ†è¯¦è§£ä¸ºäº†æ›´å¥½è®²è§£ï¼Œæˆ‘ä»¬ç›´æŽ¥ç”¨jclasslibæ¥çœ‹å­—èŠ‚ç ï¼Œä»¥mainæ–¹æ³•ä¸ºä¾‹æ¥è®²è§£ã€‚ä¸€äº›ä¸€ç›®äº†ç„¶çš„å°±ä¸è®²äº† 1ã€0-15 ä¹Ÿå°±æ˜¯æœ‰16è¡Œå­—èŠ‚ç  2ã€æ–¹æ³•å¼‚å¸¸ä¿¡æ¯è¡¨ 3ã€Misc 4ã€è¡Œå·è¡¨ â€‹ Javaä»£ç çš„è¡Œå·å’Œå­—èŠ‚ç æŒ‡ä»¤è¡Œå·çš„å¯¹åº”å…³ç³» 5ã€æ³¨æ„ï¼šç”Ÿæ•ˆè¡Œæ•°å’Œå‰©ä½™æœ‰æ•ˆè¡Œæ•°éƒ½æ˜¯é’ˆå¯¹äºŽå­—èŠ‚ç æ–‡ä»¶çš„è¡Œæ•° 1ã€å›¾ä¸­åœˆçš„ä¸œè¥¿è¡¨ç¤ºè¯¥å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ 2ã€Start PC==11è¡¨ç¤ºåœ¨å­—èŠ‚ç çš„11è¡Œå¼€å§‹ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯Javaä»£ç å¯¹åº”çš„ç¬¬15è¡Œã€‚è€Œå£°æ˜Žint numåœ¨javaä»£ç çš„æ˜¯ç¬¬14è¡Œï¼Œè¯´æ˜Žæ˜¯ä»Žå£°æ˜Žçš„ä¸‹ä¸€è¡Œå¼€å§‹ç”Ÿæ•ˆ 3ã€Length== 5è¡¨ç¤ºå±€éƒ¨å˜é‡å‰©ä½™æœ‰æ•ˆè¡Œæ•°ï¼Œmainæ–¹æ³•å­—èŠ‚ç æŒ‡ä»¤æ€»å…±æœ‰16è¡Œï¼Œä»Ž11è¡Œå¼€å§‹ç”Ÿæ•ˆï¼Œé‚£ä¹ˆå‰©ä¸‹å°±æ˜¯16-11 ==5ã€‚ 4ã€Ljava/lang/String å‰é¢çš„Lè¡¨ç¤ºå¼•ç”¨ç±»åž‹ å…³äºŽSlotçš„ç†è§£ å‚æ•°å€¼çš„å­˜æ”¾æ€»æ˜¯ä»Žå±€éƒ¨å˜é‡æ•°ç»„ç´¢å¼• 0 çš„ä½ç½®å¼€å§‹ï¼Œåˆ°æ•°ç»„é•¿åº¦-1çš„ç´¢å¼•ç»“æŸã€‚ å±€éƒ¨å˜é‡è¡¨ï¼Œæœ€åŸºæœ¬çš„å­˜å‚¨å•å…ƒæ˜¯Slotï¼ˆå˜é‡æ§½ï¼‰ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸­å­˜æ”¾ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»åž‹ï¼ˆ8ç§ï¼‰ï¼Œå¼•ç”¨ç±»åž‹ï¼ˆreferenceï¼‰ï¼ŒreturnAddressç±»åž‹çš„å˜é‡ã€‚ åœ¨å±€éƒ¨å˜é‡è¡¨é‡Œï¼Œ 32ä½ä»¥å†…çš„ç±»åž‹åªå ç”¨ä¸€ä¸ªslot ï¼ˆåŒ…æ‹¬returnAddressç±»åž‹ï¼‰ï¼Œ 64ä½çš„ç±»åž‹å ç”¨ä¸¤ä¸ªslot ï¼ˆ1ongå’Œdoubleï¼‰ã€‚ byteã€shortã€charåœ¨å‚¨å­˜å‰è¾ˆè½¬æ¢ä¸ºintï¼Œbooleanä¹Ÿè¢«è½¬æ¢ä¸ºintï¼Œ0è¡¨ç¤ºfalseï¼Œéž0è¡¨ç¤ºtrue longå’Œdoubleåˆ™å æ®ä¸¤ä¸ªslot JVMä¼šä¸ºå±€éƒ¨å˜é‡è¡¨ä¸­çš„æ¯ä¸€ä¸ªSlotéƒ½åˆ†é…ä¸€ä¸ªè®¿é—®ç´¢å¼•ï¼Œé€šè¿‡è¿™ä¸ªç´¢å¼•å³å¯æˆåŠŸè®¿é—®åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­æŒ‡å®šçš„å±€éƒ¨å˜é‡å€¼ å½“ä¸€ä¸ªå®žä¾‹æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒçš„æ–¹æ³•å‚æ•°å’Œæ–¹æ³•ä½“å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡å°†ä¼šæŒ‰ç…§é¡ºåºè¢«å¤åˆ¶åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ¯ä¸€ä¸ªslotä¸Š å¦‚æžœéœ€è¦è®¿é—®å±€éƒ¨å˜é‡è¡¨ä¸­ä¸€ä¸ª64bitçš„å±€éƒ¨å˜é‡å€¼æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨å‰ä¸€ä¸ªç´¢å¼•å³å¯ã€‚ï¼ˆæ¯”å¦‚ï¼šè®¿é—®longæˆ–doubleç±»åž‹å˜é‡ï¼‰ å¦‚æžœå½“å‰å¸§æ˜¯ç”±æž„é€ æ–¹æ³•æˆ–è€…å®žä¾‹æ–¹æ³•åˆ›å»ºçš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å¼•ç”¨thiså°†ä¼šå­˜æ”¾åœ¨indexä¸º0çš„slotå¤„ï¼Œå…¶ä½™çš„å‚æ•°æŒ‰ç…§å‚æ•°è¡¨é¡ºåºç»§ç»­æŽ’åˆ—ã€‚ï¼ˆthisä¹Ÿç›¸å½“äºŽä¸€ä¸ªå˜é‡ï¼‰ Slotä»£ç ç¤ºä¾‹this å­˜æ”¾åœ¨ index = 0 çš„ä½ç½®ï¼š 123public void test3() &#123; this.count++;&#125; å±€éƒ¨å˜é‡è¡¨ï¼šthis å­˜æ”¾åœ¨ index = 0 çš„ä½ç½® 64ä½çš„ç±»åž‹ï¼ˆ1ongå’Œdoubleï¼‰å ç”¨ä¸¤ä¸ªslot 1234567 public String test2(Date dateP, String name2) &#123; dateP = null; name2 = &quot;songhongkang&quot;; double weight = 130.5;//å æ®ä¸¤ä¸ªslot char gender = &#x27;ç”·&#x27;; return dateP + name2;&#125; weight ä¸º double ç±»åž‹ï¼Œindex ç›´æŽ¥ä»Ž 3 è¹¦åˆ°äº† 5 static æ— æ³•è°ƒç”¨ this this ä¸å­˜åœ¨ä¸Ž static æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œæ‰€ä»¥æ— æ³•è°ƒç”¨ 12345678 public static void testStatic()&#123; LocalVariablesTest test = new LocalVariablesTest(); Date date = new Date(); int count = 10; System.out.println(count); //å› ä¸ºthiså˜é‡ä¸å­˜åœ¨äºŽå½“å‰æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ï¼// System.out.println(this.count); &#125; Slotçš„é‡å¤åˆ©ç”¨æ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨ä¸­çš„æ§½ä½æ˜¯å¯ä»¥é‡ç”¨çš„ï¼Œå¦‚æžœä¸€ä¸ªå±€éƒ¨å˜é‡è¿‡äº†å…¶ä½œç”¨åŸŸï¼Œé‚£ä¹ˆåœ¨å…¶ä½œç”¨åŸŸä¹‹åŽç”³æ˜Žæ–°çš„å±€éƒ¨å˜é‡å˜å°±å¾ˆæœ‰å¯èƒ½ä¼šå¤ç”¨è¿‡æœŸå±€éƒ¨å˜é‡çš„æ§½ä½ï¼Œä»Žè€Œè¾¾åˆ°èŠ‚çœèµ„æºçš„ç›®çš„ã€‚ 123456789public void test4() &#123; int a = 0; &#123; int b = 0; b = a + 1; &#125; //å˜é‡cä½¿ç”¨ä¹‹å‰å·²ç»é”€æ¯çš„å˜é‡bå æ®çš„slotçš„ä½ç½® int c = a + 1;&#125; é™æ€å˜é‡ä¸Žå±€éƒ¨å˜é‡çš„å¯¹æ¯”12345678å˜é‡çš„åˆ†ç±»ï¼š1ã€æŒ‰ç…§æ•°æ®ç±»åž‹åˆ†ï¼šâ‘  åŸºæœ¬æ•°æ®ç±»åž‹ â‘¡ å¼•ç”¨æ•°æ®ç±»åž‹2ã€æŒ‰ç…§åœ¨ç±»ä¸­å£°æ˜Žçš„ä½ç½®åˆ†ï¼š 2-1ã€æˆå‘˜å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œéƒ½ç»åŽ†è¿‡é»˜è®¤åˆå§‹åŒ–èµ‹å€¼ 2-1-1ã€ç±»å˜é‡: linkingçš„prepareé˜¶æ®µï¼šç»™ç±»å˜é‡é»˜è®¤èµ‹å€¼ ---&gt; initialé˜¶æ®µï¼šç»™ç±»å˜é‡æ˜¾å¼èµ‹å€¼å³é™æ€ä»£ç å—èµ‹å€¼ 2-1-2ã€å®žä¾‹å˜é‡ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºï¼Œä¼šåœ¨å †ç©ºé—´ä¸­åˆ†é…å®žä¾‹å˜é‡ç©ºé—´ï¼Œå¹¶è¿›è¡Œé»˜è®¤èµ‹å€¼ 2-2ã€å±€éƒ¨å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»è¦è¿›è¡Œæ˜¾å¼èµ‹å€¼çš„ï¼å¦åˆ™ï¼Œç¼–è¯‘ä¸é€šè¿‡ã€‚ å‚æ•°è¡¨åˆ†é…å®Œæ¯•ä¹‹åŽï¼Œå†æ ¹æ®æ–¹æ³•ä½“å†…å®šä¹‰çš„å˜é‡çš„é¡ºåºå’Œä½œç”¨åŸŸåˆ†é…ã€‚ æˆ‘ä»¬çŸ¥é“æˆå‘˜å˜é‡æœ‰ä¸¤æ¬¡åˆå§‹åŒ–çš„æœºä¼šï¼Œç¬¬ä¸€æ¬¡æ˜¯åœ¨â€œå‡†å¤‡é˜¶æ®µâ€ï¼Œæ‰§è¡Œç³»ç»Ÿåˆå§‹åŒ–ï¼Œå¯¹ç±»å˜é‡è®¾ç½®é›¶å€¼ï¼Œå¦ä¸€æ¬¡åˆ™æ˜¯åœ¨â€œåˆå§‹åŒ–â€é˜¶æ®µï¼Œèµ‹äºˆç¨‹åºå‘˜åœ¨ä»£ç ä¸­å®šä¹‰çš„åˆå§‹å€¼ã€‚ å’Œç±»å˜é‡åˆå§‹åŒ–ä¸åŒçš„æ˜¯ï¼Œå±€éƒ¨å˜é‡è¡¨ä¸å­˜åœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦å®šä¹‰äº†å±€éƒ¨å˜é‡åˆ™å¿…é¡»äººä¸ºçš„åˆå§‹åŒ–ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ã€‚ è¡¥å……è¯´æ˜Ž åœ¨æ ˆå¸§ä¸­ï¼Œä¸Žæ€§èƒ½è°ƒä¼˜å…³ç³»æœ€ä¸ºå¯†åˆ‡çš„éƒ¨åˆ†å°±æ˜¯å‰é¢æåˆ°çš„å±€éƒ¨å˜é‡è¡¨ã€‚åœ¨æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œè™šæ‹Ÿæœºä½¿ç”¨å±€éƒ¨å˜é‡è¡¨å®Œæˆæ–¹æ³•çš„ä¼ é€’ã€‚ å±€éƒ¨å˜é‡è¡¨ä¸­çš„å˜é‡ä¹Ÿæ˜¯é‡è¦çš„åžƒåœ¾å›žæ”¶æ ¹èŠ‚ç‚¹ï¼Œåªè¦è¢«å±€éƒ¨å˜é‡è¡¨ä¸­ç›´æŽ¥æˆ–é—´æŽ¥å¼•ç”¨çš„å¯¹è±¡éƒ½ä¸ä¼šè¢«å›žæ”¶ã€‚ æ“ä½œæ•°æ ˆæ“ä½œæ•°æ ˆçš„ç‰¹ç‚¹ æ¯ä¸€ä¸ªç‹¬ç«‹çš„æ ˆå¸§é™¤äº†åŒ…å«å±€éƒ¨å˜é‡è¡¨ä»¥å¤–ï¼Œè¿˜åŒ…å«ä¸€ä¸ªåŽè¿›å…ˆå‡ºï¼ˆLast - In - First -Outï¼‰çš„ æ“ä½œæ•°æ ˆï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºè¡¨è¾¾å¼æ ˆï¼ˆExpression Stackï¼‰ æ“ä½œæ•°æ ˆï¼Œåœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å­—èŠ‚ç æŒ‡ä»¤ï¼Œå¾€æ ˆä¸­å†™å…¥æ•°æ®æˆ–æå–æ•°æ®ï¼Œå³å…¥æ ˆï¼ˆpushï¼‰å’Œ å‡ºæ ˆï¼ˆpopï¼‰ æŸäº›å­—èŠ‚ç æŒ‡ä»¤å°†å€¼åŽ‹å…¥æ“ä½œæ•°æ ˆï¼Œå…¶ä½™çš„å­—èŠ‚ç æŒ‡ä»¤å°†æ“ä½œæ•°å–å‡ºæ ˆã€‚ä½¿ç”¨å®ƒä»¬åŽå†æŠŠç»“æžœåŽ‹å…¥æ ˆï¼Œ æ¯”å¦‚ï¼šæ‰§è¡Œå¤åˆ¶ã€äº¤æ¢ã€æ±‚å’Œç­‰æ“ä½œ æ“ä½œæ•°æ ˆçš„ä½œç”¨ æ“ä½œæ•°æ ˆï¼Œä¸»è¦ç”¨äºŽä¿å­˜è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´ç»“æžœï¼ŒåŒæ—¶ä½œä¸ºè®¡ç®—è¿‡ç¨‹ä¸­å˜é‡ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ã€‚ æ“ä½œæ•°æ ˆå°±æ˜¯JVMæ‰§è¡Œå¼•æ“Žçš„ä¸€ä¸ªå·¥ä½œåŒºï¼Œå½“ä¸€ä¸ªæ–¹æ³•åˆšå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€ä¸ªæ–°çš„æ ˆå¸§ä¹Ÿä¼šéšä¹‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œè¿™æ—¶æ–¹æ³•çš„æ“ä½œæ•°æ ˆæ˜¯ç©ºçš„ã€‚ æ¯ä¸€ä¸ªæ“ä½œæ•°æ ˆéƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªæ˜Žç¡®çš„æ ˆæ·±åº¦ç”¨äºŽå­˜å‚¨æ•°å€¼ï¼Œå…¶æ‰€éœ€çš„æœ€å¤§æ·±åº¦åœ¨ç¼–è¯‘æœŸå°±å®šä¹‰å¥½äº†ï¼Œä¿å­˜åœ¨æ–¹æ³•çš„Codeå±žæ€§ä¸­ï¼Œä¸ºmaxstackçš„å€¼ã€‚ æ ˆä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯å¯ä»¥ä»»æ„çš„Javaæ•°æ®ç±»åž‹ 32bitçš„ç±»åž‹å ç”¨ä¸€ä¸ªæ ˆå•ä½æ·±åº¦ 64bitçš„ç±»åž‹å ç”¨ä¸¤ä¸ªæ ˆå•ä½æ·±åº¦ æ“ä½œæ•°æ ˆå¹¶éžé‡‡ç”¨è®¿é—®ç´¢å¼•çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®è®¿é—®çš„ï¼Œè€Œæ˜¯åªèƒ½é€šè¿‡æ ‡å‡†çš„å…¥æ ˆå’Œå‡ºæ ˆæ“ä½œæ¥å®Œæˆä¸€æ¬¡æ•°æ®è®¿é—®ã€‚åªä¸è¿‡æ“ä½œæ•°æ ˆæ˜¯ç”¨æ•°ç»„è¿™ä¸ªç»“æž„æ¥å®žçŽ°çš„è€Œå·² å¦‚æžœè¢«è°ƒç”¨çš„æ–¹æ³•å¸¦æœ‰è¿”å›žå€¼çš„è¯ï¼Œå…¶è¿”å›žå€¼å°†ä¼šè¢«åŽ‹å…¥å½“å‰æ ˆå¸§çš„æ“ä½œæ•°æ ˆä¸­ï¼Œå¹¶æ›´æ–°PCå¯„å­˜å™¨ä¸­ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ æ“ä½œæ•°æ ˆä¸­å…ƒç´ çš„æ•°æ®ç±»åž‹å¿…é¡»ä¸Žå­—èŠ‚ç æŒ‡ä»¤çš„åºåˆ—ä¸¥æ ¼åŒ¹é…ï¼Œè¿™ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å™¨æœŸé—´è¿›è¡ŒéªŒè¯ï¼ŒåŒæ—¶åœ¨ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„ç±»æ£€éªŒé˜¶æ®µçš„æ•°æ®æµåˆ†æžé˜¶æ®µè¦å†æ¬¡éªŒè¯ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬è¯´Javaè™šæ‹Ÿæœºçš„è§£é‡Šå¼•æ“Žæ˜¯åŸºäºŽæ ˆçš„æ‰§è¡Œå¼•æ“Žï¼Œå…¶ä¸­çš„æ ˆæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆã€‚ å±€éƒ¨å˜é‡è¡¨å°±ç›¸å½“äºŽé£Ÿæ æ“ä½œæ•°æ ˆå°±ç›¸å½“äºŽåšæ³•æ­¥éª¤ æ“ä½œæ•°æ ˆä»£ç è¿½è¸ª123456789public void testAddOperation() &#123; //byteã€shortã€charã€booleanï¼šéƒ½ä»¥intåž‹æ¥ä¿å­˜ byte i = 15; int j = 8; int k = i + j; // int m = 800;&#125; å¯¹åº”å­—èŠ‚ç æŒ‡ä»¤ 123456789 0 bipush 15 2 istore_1 3 bipush 8 5 istore_2 6 iload_1 7 iload_2 8 iadd 9 istore_310 return ä¸€æ­¥ä¸€æ­¥çœ‹æµç¨‹1ã€é¦–å…ˆæ‰§è¡Œç¬¬ä¸€æ¡è¯­å¥ï¼ŒPCå¯„å­˜å™¨æŒ‡å‘çš„æ˜¯0ï¼Œä¹Ÿå°±æ˜¯æŒ‡ä»¤åœ°å€ä¸º0ï¼Œç„¶åŽä½¿ç”¨bipushè®©æ“ä½œæ•°15å…¥æ“ä½œæ•°æ ˆ. 2ã€æ‰§è¡Œå®ŒåŽï¼ŒPCå¯„å­˜å™¨å¾€ä¸‹ç§»ï¼ŒæŒ‡å‘ä¸‹ä¸€è¡Œä»£ç ï¼Œä¸‹ä¸€è¡Œä»£ç å°±æ˜¯å°†æ“ä½œæ•°æ ˆçš„å…ƒç´ å­˜å‚¨åˆ°å±€éƒ¨å˜é‡è¡¨1çš„ä½ç½®ï¼ˆistore_1ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å±€éƒ¨å˜é‡è¡¨çš„å·²ç»å¢žåŠ äº†ä¸€ä¸ªå…ƒç´ ã€‚å¹¶ä¸”æ“ä½œæ•°æ ˆä¸ºç©ºäº†. è§£é‡Šä¸ºä»€ä¹ˆå±€éƒ¨å˜é‡è¡¨ç´¢å¼•ä»Ž 1 å¼€å§‹ï¼Œå› ä¸ºè¯¥æ–¹æ³•ä¸ºå®žä¾‹æ–¹æ³•ï¼Œå±€éƒ¨å˜é‡è¡¨ç´¢å¼•ä¸º 0 çš„ä½ç½®å­˜æ”¾çš„æ˜¯ this 3ã€ç„¶åŽPCä¸‹ç§»ï¼ŒæŒ‡å‘çš„æ˜¯ä¸‹ä¸€è¡Œã€‚è®©æ“ä½œæ•°8ä¹Ÿå…¥æ ˆï¼ŒåŒæ—¶æ‰§è¡Œstoreæ“ä½œï¼Œå­˜å…¥å±€éƒ¨å˜é‡è¡¨ä¸­ 4ã€ç„¶åŽä»Žå±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œä¾æ¬¡å°†æ•°æ®æ”¾åœ¨æ“ä½œæ•°æ ˆä¸­ï¼Œç­‰å¾…æ‰§è¡Œ add æ“ä½œ iload_1ï¼šå–å‡ºå±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º1çš„æ•°æ®å…¥æ“ä½œæ•°æ ˆ 5ã€ç„¶åŽå°†æ“ä½œæ•°æ ˆä¸­çš„ä¸¤ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŠ æ“ä½œï¼Œå¹¶å­˜å‚¨åœ¨å±€éƒ¨å˜é‡è¡¨3çš„ä½ç½® 5ã€ç„¶åŽå°†æ“ä½œæ•°æ ˆä¸­çš„ä¸¤ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŠ æ“ä½œï¼Œå¹¶å­˜å‚¨åœ¨å±€éƒ¨å˜é‡è¡¨3çš„ä½ç½® å…³äºŽç±»åž‹è½¬æ¢çš„è¯´æ˜Ž mæ”¹æˆ800ä¹‹åŽï¼Œbyteå­˜å‚¨ä¸äº†ï¼Œå°±æˆäº†shortåž‹ï¼Œsipush 800 å¦‚æžœè¢«è°ƒç”¨çš„æ–¹æ³•å¸¦æœ‰è¿”å›žå€¼ï¼Œè¿”å›žå€¼å…¥æ“ä½œæ•°æ ˆ 123456789101112public int getSum()&#123; int m = 10; int n = 20; int k = m + n; return k; &#125; public void testGetSum()&#123; //èŽ·å–ä¸Šä¸€ä¸ªæ ˆæ¡¢è¿”å›žçš„ç»“æžœï¼Œå¹¶ä¿å­˜åœ¨æ“ä½œæ•°æ ˆä¸­ int i = getSum(); int j = 10; &#125; getSum() æ–¹æ³•å­—èŠ‚ç æŒ‡ä»¤ï¼šæœ€åŽå¸¦ç€ä¸ª ireturn testGetSum() æ–¹æ³•å­—èŠ‚ç æŒ‡ä»¤ï¼šä¸€ä¸Šæ¥å°±åŠ è½½ getSum() æ–¹æ³•çš„è¿”å›žå€¼() ? testGetSum() æ–¹æ³•å­—èŠ‚ç æŒ‡ä»¤ï¼šä¸€ä¸Šæ¥å°±åŠ è½½ getSum() æ–¹æ³•çš„è¿”å›žå€¼() æ ˆé¡¶ç¼“å­˜æŠ€æœ¯æ ˆé¡¶ç¼“å­˜æŠ€æœ¯ï¼šTop Of Stack Cashing å‰é¢æè¿‡ï¼ŒåŸºäºŽæ ˆå¼æž¶æž„çš„è™šæ‹Ÿæœºæ‰€ä½¿ç”¨çš„é›¶åœ°å€æŒ‡ä»¤æ›´åŠ ç´§å‡‘ï¼Œä½†å®Œæˆä¸€é¡¹æ“ä½œçš„æ—¶å€™å¿…ç„¶éœ€è¦ä½¿ç”¨æ›´å¤šçš„å…¥æ ˆå’Œå‡ºæ ˆæŒ‡ä»¤ï¼Œè¿™åŒæ—¶ä¹Ÿå°±æ„å‘³ç€å°†éœ€è¦æ›´å¤šçš„æŒ‡ä»¤åˆ†æ´¾ï¼ˆinstruction dispatchï¼‰æ¬¡æ•°ï¼ˆä¹Ÿå°±æ˜¯ä½ ä¼šå‘çŽ°æŒ‡ä»¤å¾ˆå¤šï¼‰å’Œå¯¼è‡´å†…å­˜è¯»/å†™æ¬¡æ•°å¤šï¼Œæ•ˆçŽ‡ä¸é«˜ã€‚ ç”±äºŽæ“ä½œæ•°æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œå› æ­¤é¢‘ç¹åœ°æ‰§è¡Œå†…å­˜è¯»/å†™æ“ä½œå¿…ç„¶ä¼šå½±å“æ‰§è¡Œé€Ÿåº¦ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHotSpot JVMçš„è®¾è®¡è€…ä»¬æå‡ºäº†æ ˆé¡¶ç¼“å­˜ï¼ˆTosï¼ŒTop-of-Stack Cashingï¼‰æŠ€æœ¯ï¼Œå°†æ ˆé¡¶å…ƒç´ å…¨éƒ¨ç¼“å­˜åœ¨ç‰©ç†CPUçš„å¯„å­˜å™¨ä¸­ï¼Œä»¥æ­¤é™ä½Žå¯¹å†…å­˜çš„è¯»/å†™æ¬¡æ•°ï¼Œæå‡æ‰§è¡Œå¼•æ“Žçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚ å¯„å­˜å™¨çš„ä¸»è¦ä¼˜ç‚¹ï¼šæŒ‡ä»¤æ›´å°‘ï¼Œæ‰§è¡Œé€Ÿåº¦å¿«ï¼Œä½†æ˜¯æŒ‡ä»¤é›†ï¼ˆä¹Ÿå°±æ˜¯æŒ‡ä»¤ç§ç±»ï¼‰å¾ˆå¤š åŠ¨æ€é“¾æŽ¥ï¼ˆæˆ–æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨ï¼‰ æ¯ä¸€ä¸ªæ ˆå¸§å†…éƒ¨éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆå¸§æ‰€å±žæ–¹æ³•çš„å¼•ç”¨ã€‚åŒ…å«è¿™ä¸ªå¼•ç”¨çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ”¯æŒå½“å‰æ–¹æ³•çš„ä»£ç èƒ½å¤Ÿå®žçŽ°åŠ¨æ€é“¾æŽ¥ï¼ˆDynamic Linkingï¼‰ï¼Œæ¯”å¦‚ï¼šinvokedynamicæŒ‡ä»¤ åœ¨Javaæºæ–‡ä»¶è¢«ç¼–è¯‘åˆ°å­—èŠ‚ç æ–‡ä»¶ä¸­æ—¶ï¼Œæ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•å¼•ç”¨éƒ½ä½œä¸ºç¬¦å·å¼•ç”¨ï¼ˆSymbolic Referenceï¼‰ä¿å­˜åœ¨classæ–‡ä»¶çš„å¸¸é‡æ± é‡Œã€‚æ¯”å¦‚ï¼šæè¿°ä¸€ä¸ªæ–¹æ³•è°ƒç”¨äº†å¦å¤–çš„å…¶ä»–æ–¹æ³•æ—¶ï¼Œå°±æ˜¯é€šè¿‡å¸¸é‡æ± ä¸­æŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨æ¥è¡¨ç¤ºçš„ï¼Œé‚£ä¹ˆåŠ¨æ€é“¾æŽ¥çš„ä½œç”¨å°±æ˜¯ä¸ºäº†å°†è¿™äº›ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºè°ƒç”¨æ–¹æ³•çš„ç›´æŽ¥å¼•ç”¨ 1234567891011121314151617public class DynamicLinkingTest &#123; int num = 10; public void methodA()&#123; System.out.println(&quot;methodA()....&quot;); &#125; public void methodB()&#123; System.out.println(&quot;methodB()....&quot;); methodA(); num++; &#125;&#125; å¯¹åº”å­—èŠ‚ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114Classfile /F:/IDEAWorkSpaceSourceCode/JVMDemo/out/production/chapter05/com/atguigu/java1/DynamicLinkingTest.class Last modified 2020-11-10; size 712 bytes MD5 checksum e56913c945f897c7ee6c0a608629bca8 Compiled from &quot;DynamicLinkingTest.java&quot;public class com.atguigu.java1.DynamicLinkingTest minor version: 0 major version: 52 flags: ACC_PUBLIC, ACC_SUPERConstant pool: #1 = Methodref #9.#23 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = Fieldref #8.#24 // com/atguigu/java1/DynamicLinkingTest.num:I #3 = Fieldref #25.#26 // java/lang/System.out:Ljava/io/PrintStream; #4 = String #27 // methodA().... #5 = Methodref #28.#29 // java/io/PrintStream.println:(Ljava/lang/String;)V #6 = String #30 // methodB().... #7 = Methodref #8.#31 // com/atguigu/java1/DynamicLinkingTest.methodA:()V #8 = Class #32 // com/atguigu/java1/DynamicLinkingTest #9 = Class #33 // java/lang/Object #10 = Utf8 num #11 = Utf8 I #12 = Utf8 &lt;init&gt; #13 = Utf8 ()V #14 = Utf8 Code #15 = Utf8 LineNumberTable #16 = Utf8 LocalVariableTable #17 = Utf8 this #18 = Utf8 Lcom/atguigu/java1/DynamicLinkingTest; #19 = Utf8 methodA #20 = Utf8 methodB #21 = Utf8 SourceFile #22 = Utf8 DynamicLinkingTest.java #23 = NameAndType #12:#13 // &quot;&lt;init&gt;&quot;:()V #24 = NameAndType #10:#11 // num:I #25 = Class #34 // java/lang/System #26 = NameAndType #35:#36 // out:Ljava/io/PrintStream; #27 = Utf8 methodA().... #28 = Class #37 // java/io/PrintStream #29 = NameAndType #38:#39 // println:(Ljava/lang/String;)V #30 = Utf8 methodB().... #31 = NameAndType #19:#13 // methodA:()V #32 = Utf8 com/atguigu/java1/DynamicLinkingTest #33 = Utf8 java/lang/Object #34 = Utf8 java/lang/System #35 = Utf8 out #36 = Utf8 Ljava/io/PrintStream; #37 = Utf8 java/io/PrintStream #38 = Utf8 println #39 = Utf8 (Ljava/lang/String;)V&#123; int num; descriptor: I flags: public com.atguigu.java1.DynamicLinkingTest(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: aload_0 5: bipush 10 7: putfield #2 // Field num:I 10: return LineNumberTable: line 7: 0 line 9: 4 LocalVariableTable: Start Length Slot Name Signature 0 11 0 this Lcom/atguigu/java1/DynamicLinkingTest; public void methodA(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=1, args_size=1 0: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 3: ldc #4 // String methodA().... 5: invokevirtual #5 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 8: return LineNumberTable: line 12: 0 line 13: 8 LocalVariableTable: Start Length Slot Name Signature 0 9 0 this Lcom/atguigu/java1/DynamicLinkingTest; public void methodB(); descriptor: ()V flags: ACC_PUBLIC Code: stack=3, locals=1, args_size=1 0: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 3: ldc #6 // String methodB().... 5: invokevirtual #5 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 8: aload_0 9: invokevirtual #7 // Method methodA:()V 12: aload_0 13: dup 14: getfield #2 // Field num:I 17: iconst_1 18: iadd 19: putfield #2 // Field num:I 22: return LineNumberTable: line 16: 0 line 18: 8 line 20: 12 line 21: 22 LocalVariableTable: Start Length Slot Name Signature 0 23 0 this Lcom/atguigu/java1/DynamicLinkingTest;&#125;SourceFile: &quot;DynamicLinkingTest.java&quot; 1ã€åœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­ï¼ŒmethodB() æ–¹æ³•ä¸­é€šè¿‡ invokevirtual #7 æŒ‡ä»¤è°ƒç”¨äº†æ–¹æ³• A ï¼Œé‚£ä¹ˆ #7 æ˜¯ä¸ªå•¥å‘¢ï¼Ÿ 2ã€å¾€ä¸Šé¢ç¿»ï¼Œæ‰¾åˆ°å¸¸é‡æ± çš„å®šä¹‰ï¼š#7 = Methodref #8.#31 å…ˆæ‰¾ #8 ï¼š #8 = Class #32 ï¼šåŽ»æ‰¾ #32 #32 = Utf8 com/atguigu/java1/DynamicLinkingTest ç»“è®ºï¼šé€šè¿‡ #8 æˆ‘ä»¬æ‰¾åˆ°äº† DynamicLinkingTest è¿™ä¸ªç±» å†æ¥æ‰¾ #31ï¼š #31 = NameAndType #19:#13 ï¼šåŽ»æ‰¾ #19 å’Œ #13 #19 = Utf8 methodA ï¼šæ–¹æ³•åä¸º methodA #13 = Utf8 ()V ï¼šæ–¹æ³•æ²¡æœ‰å½¢å‚ï¼Œè¿”å›žå€¼ä¸º void 3ã€ç»“è®ºï¼šé€šè¿‡ #7 æˆ‘ä»¬å°±èƒ½æ‰¾åˆ°éœ€è¦è°ƒç”¨çš„ methodA() æ–¹æ³•ï¼Œå¹¶è¿›è¡Œè°ƒç”¨ 4ã€åœ¨ä¸Šé¢ï¼Œå…¶å®žè¿˜æœ‰å¾ˆå¤šç¬¦å·å¼•ç”¨ï¼Œæ¯”å¦‚ Objectã€Systemã€PrintStream ç­‰ç­‰ ä¸ºä»€ä¹ˆè¦ç”¨å¸¸é‡æ± å‘¢ï¼Ÿ å› ä¸ºåœ¨ä¸åŒçš„æ–¹æ³•ï¼Œéƒ½å¯èƒ½è°ƒç”¨å¸¸é‡æˆ–è€…æ–¹æ³•ï¼Œæ‰€ä»¥åªéœ€è¦å­˜å‚¨ä¸€ä»½å³å¯ï¼Œç„¶åŽè®°å½•å…¶å¼•ç”¨å³å¯ï¼ŒèŠ‚çœäº†ç©ºé—´ã€‚ å¸¸é‡æ± çš„ä½œç”¨ï¼šå°±æ˜¯ä¸ºäº†æä¾›ä¸€äº›ç¬¦å·å’Œå¸¸é‡ï¼Œä¾¿äºŽæŒ‡ä»¤çš„è¯†åˆ« æ–¹æ³•çš„è°ƒç”¨é™æ€é“¾æŽ¥ä¸ŽåŠ¨æ€é“¾æŽ¥åœ¨JVMä¸­ï¼Œå°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºè°ƒç”¨æ–¹æ³•çš„ç›´æŽ¥å¼•ç”¨ä¸Žæ–¹æ³•çš„ç»‘å®šæœºåˆ¶ç›¸å…³ é™æ€é“¾æŽ¥ï¼š å½“ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶è¢«è£…è½½è¿›JVMå†…éƒ¨æ—¶ï¼Œå¦‚æžœè¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹å°†è°ƒç”¨æ–¹æ³•çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºé™æ€é“¾æŽ¥ åŠ¨æ€é“¾æŽ¥ï¼š å¦‚æžœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸå°†è°ƒç”¨çš„æ–¹æ³•çš„ç¬¦å·è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨ï¼Œç”±äºŽè¿™ç§å¼•ç”¨è½¬æ¢è¿‡ç¨‹å…·å¤‡åŠ¨æ€æ€§ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¹‹ä¸ºåŠ¨æ€é“¾æŽ¥ã€‚ æ—©æœŸç»‘å®šä¸Žæ™šæœŸç»‘å®š é™æ€é“¾æŽ¥ä¸ŽåŠ¨æ€é“¾æŽ¥é’ˆå¯¹çš„æ˜¯æ–¹æ³•ã€‚æ—©æœŸç»‘å®šå’Œæ™šæœŸç»‘å®šèŒƒå›´æ›´å¹¿ã€‚æ—©æœŸç»‘å®šæ¶µç›–äº†é™æ€é“¾æŽ¥ï¼Œæ™šæœŸç»‘å®šæ¶µç›–äº†åŠ¨æ€é“¾æŽ¥ã€‚ é™æ€é“¾æŽ¥å’ŒåŠ¨æ€é“¾æŽ¥å¯¹åº”çš„æ–¹æ³•çš„ç»‘å®šæœºåˆ¶ä¸ºï¼šæ—©æœŸç»‘å®šï¼ˆEarly Bindingï¼‰å’Œæ™šæœŸç»‘å®šï¼ˆLate Bindingï¼‰ã€‚ç»‘å®šæ˜¯ä¸€ä¸ªå­—æ®µã€æ–¹æ³•æˆ–è€…ç±»åœ¨ç¬¦å·å¼•ç”¨è¢«æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ï¼Œè¿™ä»…ä»…å‘ç”Ÿä¸€æ¬¡ã€‚ æ—©æœŸç»‘å®š æ—©æœŸç»‘å®šå°±æ˜¯æŒ‡è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•å¦‚æžœåœ¨ç¼–è¯‘æœŸå¯çŸ¥ï¼Œä¸”è¿è¡ŒæœŸä¿æŒä¸å˜æ—¶ï¼Œå³å¯å°†è¿™ä¸ªæ–¹æ³•ä¸Žæ‰€å±žçš„ç±»åž‹è¿›è¡Œç»‘å®šï¼Œè¿™æ ·ä¸€æ¥ï¼Œç”±äºŽæ˜Žç¡®äº†è¢«è°ƒç”¨çš„ç›®æ ‡æ–¹æ³•ç©¶ç«Ÿæ˜¯å“ªä¸€ä¸ªï¼Œå› æ­¤ä¹Ÿå°±å¯ä»¥ä½¿ç”¨é™æ€é“¾æŽ¥çš„æ–¹å¼å°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨ã€‚ æ™šæœŸç»‘å®š å¦‚æžœè¢«è°ƒç”¨çš„æ–¹æ³•åœ¨ç¼–è¯‘æœŸæ— æ³•è¢«ç¡®å®šä¸‹æ¥ï¼Œåªèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡ŒæœŸæ ¹æ®å®žé™…çš„ç±»åž‹ç»‘å®šç›¸å…³çš„æ–¹æ³•ï¼Œè¿™ç§ç»‘å®šæ–¹å¼ä¹Ÿå°±è¢«ç§°ä¹‹ä¸ºæ™šæœŸç»‘å®šã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class Animal &#123; public void eat() &#123; System.out.println(&quot;åŠ¨ç‰©è¿›é£Ÿ&quot;); &#125;&#125;interface Huntable &#123; void hunt();&#125;class Dog extends Animal implements Huntable &#123; @Override public void eat() &#123; System.out.println(&quot;ç‹—åƒéª¨å¤´&quot;); &#125; @Override public void hunt() &#123; System.out.println(&quot;æ•é£Ÿè€—å­ï¼Œå¤šç®¡é—²äº‹&quot;); &#125;&#125;class Cat extends Animal implements Huntable &#123; public Cat() &#123; super();//è¡¨çŽ°ä¸ºï¼šæ—©æœŸç»‘å®š &#125; public Cat(String name) &#123; this();//è¡¨çŽ°ä¸ºï¼šæ—©æœŸç»‘å®š &#125; @Override public void eat() &#123; super.eat();//è¡¨çŽ°ä¸ºï¼šæ—©æœŸç»‘å®š System.out.println(&quot;çŒ«åƒé±¼&quot;); &#125; @Override public void hunt() &#123; System.out.println(&quot;æ•é£Ÿè€—å­ï¼Œå¤©ç»åœ°ä¹‰&quot;); &#125;&#125;public class AnimalTest &#123; public void showAnimal(Animal animal) &#123; animal.eat();//è¡¨çŽ°ä¸ºï¼šæ™šæœŸç»‘å®š &#125; public void showHunt(Huntable h) &#123; h.hunt();//è¡¨çŽ°ä¸ºï¼šæ™šæœŸç»‘å®š &#125;&#125; éƒ¨åˆ†å­—èŠ‚ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&#123; public com.atguigu.java2.AnimalTest(); descriptor: ()V flags: ACC_PUBLIC Code: stack=1, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 54: 0 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcom/atguigu/java2/AnimalTest; public void showAnimal(com.atguigu.java2.Animal); descriptor: (Lcom/atguigu/java2/Animal;)V flags: ACC_PUBLIC Code: stack=1, locals=2, args_size=2 0: aload_1 1: invokevirtual #2 // Method com/atguigu/java2/Animal.eat:()V 4: return LineNumberTable: line 56: 0 line 57: 4 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcom/atguigu/java2/AnimalTest; 0 5 1 animal Lcom/atguigu/java2/Animal; public void showHunt(com.atguigu.java2.Huntable); descriptor: (Lcom/atguigu/java2/Huntable;)V flags: ACC_PUBLIC Code: stack=1, locals=2, args_size=2 0: aload_1 1: invokeinterface #3, 1 // InterfaceMethod com/atguigu/java2/Huntable.hunt:()V 6: return LineNumberTable: line 60: 0 line 61: 6 LocalVariableTable: Start Length Slot Name Signature 0 7 0 this Lcom/atguigu/java2/AnimalTest; 0 7 1 h Lcom/atguigu/java2/Huntable;&#125;SourceFile: &quot;AnimalTest.java&quot; invokevirtual ä½“çŽ°ä¸ºæ™šæœŸç»‘å®š invokeinterface ä¹Ÿä½“çŽ°ä¸ºæ™šæœŸç»‘å®š invokespecial ä½“çŽ°ä¸ºæ—©æœŸç»‘å®š å¤šæ€ä¸Žç»‘å®š éšç€é«˜çº§è¯­è¨€çš„æ¨ªç©ºå‡ºä¸–ï¼Œç±»ä¼¼äºŽJavaä¸€æ ·çš„åŸºäºŽé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€å¦‚ä»Šè¶Šæ¥è¶Šå¤šï¼Œå°½ç®¡è¿™ç±»ç¼–ç¨‹è¯­è¨€åœ¨è¯­æ³•é£Žæ ¼ä¸Šå­˜åœ¨ä¸€å®šçš„å·®åˆ«ï¼Œä½†æ˜¯å®ƒä»¬å½¼æ­¤ä¹‹é—´å§‹ç»ˆä¿æŒç€ä¸€ä¸ªå…±æ€§ï¼Œé‚£å°±æ˜¯éƒ½æ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ç­‰é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œæ—¢ç„¶è¿™ä¸€ç±»çš„ç¼–ç¨‹è¯­è¨€å…·å¤‡å¤šæ€ç‰¹æ€§ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±å…·å¤‡æ—©æœŸç»‘å®šå’Œæ™šæœŸç»‘å®šä¸¤ç§ç»‘å®šæ–¹å¼ã€‚ Javaä¸­ä»»ä½•ä¸€ä¸ªæ™®é€šçš„æ–¹æ³•å…¶å®žéƒ½å…·å¤‡è™šå‡½æ•°çš„ç‰¹å¾ï¼Œå®ƒä»¬ç›¸å½“äºŽC++è¯­è¨€ä¸­çš„è™šå‡½æ•°ï¼ˆC++ä¸­åˆ™éœ€è¦ä½¿ç”¨å…³é”®å­—virtualæ¥æ˜¾å¼å®šä¹‰ï¼‰ã€‚å¦‚æžœåœ¨Javaç¨‹åºä¸­ä¸å¸Œæœ›æŸä¸ªæ–¹æ³•æ‹¥æœ‰è™šå‡½æ•°çš„ç‰¹å¾æ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…³é”®å­—finalæ¥æ ‡è®°è¿™ä¸ªæ–¹æ³•ã€‚ è™šæ–¹æ³•ä¸Žéžè™šæ–¹æ³•è™šæ–¹æ³•ä¸Žéžè™šæ–¹æ³•çš„åŒºåˆ« å¦‚æžœæ–¹æ³•åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šäº†å…·ä½“çš„è°ƒç”¨ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨è¿è¡Œæ—¶æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ ·çš„æ–¹æ³•ç§°ä¸ºéžè™šæ–¹æ³•ã€‚ é™æ€æ–¹æ³•ã€ç§æœ‰æ–¹æ³•ã€finalæ–¹æ³•ã€å®žä¾‹æž„é€ å™¨ã€çˆ¶ç±»æ–¹æ³•éƒ½æ˜¯éžè™šæ–¹æ³•ã€‚ å…¶ä»–æ–¹æ³•ç§°ä¸ºè™šæ–¹æ³•ã€‚ å­ç±»å¯¹è±¡çš„å¤šæ€çš„ä½¿ç”¨å‰æï¼š ç±»çš„ç»§æ‰¿å…³ç³» æ–¹æ³•çš„é‡å†™ è™šæ‹Ÿæœºä¸­è°ƒç”¨æ–¹æ³•çš„æŒ‡ä»¤ æ™®é€šæŒ‡ä»¤ï¼š invokestaticï¼šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œè§£æžé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ invokespecialï¼šè°ƒç”¨&lt;init&gt;æ–¹æ³•ã€ç§æœ‰åŠçˆ¶ç±»æ–¹æ³•ï¼Œè§£æžé˜¶æ®µç¡®å®šå”¯ä¸€æ–¹æ³•ç‰ˆæœ¬ invokevirtualï¼šè°ƒç”¨æ‰€æœ‰è™šæ–¹æ³• invokeinterfaceï¼šè°ƒç”¨æŽ¥å£æ–¹æ³• åŠ¨æ€è°ƒç”¨æŒ‡ä»¤ invokedynamicï¼šåŠ¨æ€è§£æžå‡ºéœ€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œç„¶åŽæ‰§è¡Œ å‰å››æ¡æŒ‡ä»¤å›ºåŒ–åœ¨è™šæ‹Ÿæœºå†…éƒ¨ï¼Œæ–¹æ³•çš„è°ƒç”¨æ‰§è¡Œä¸å¯äººä¸ºå¹²é¢„ã€‚è€ŒinvokedynamicæŒ‡ä»¤åˆ™æ”¯æŒç”±ç”¨æˆ·ç¡®å®šæ–¹æ³•ç‰ˆæœ¬ã€‚å…¶ä¸­invokestaticæŒ‡ä»¤å’ŒinvokespecialæŒ‡ä»¤è°ƒç”¨çš„æ–¹æ³•ç§°ä¸ºéžè™šæ–¹æ³•ï¼Œå…¶ä½™çš„ï¼ˆfinalä¿®é¥°çš„é™¤å¤–ï¼‰ç§°ä¸ºè™šæ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980class Father &#123; public Father() &#123; System.out.println(&quot;fatherçš„æž„é€ å™¨&quot;); &#125; public static void showStatic(String str) &#123; System.out.println(&quot;father &quot; + str); &#125; public final void showFinal() &#123; System.out.println(&quot;father show final&quot;); &#125; public void showCommon() &#123; System.out.println(&quot;father æ™®é€šæ–¹æ³•&quot;); &#125;&#125;public class Son extends Father &#123; public Son() &#123; //invokespecial super(); &#125; public Son(int age) &#123; //invokespecial this(); &#125; //ä¸æ˜¯é‡å†™çš„çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå› ä¸ºé™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼ public static void showStatic(String str) &#123; System.out.println(&quot;son &quot; + str); &#125; private void showPrivate(String str) &#123; System.out.println(&quot;son private&quot; + str); &#125; public void show() &#123; //invokestatic showStatic(&quot;atguigu.com&quot;); //invokestatic super.showStatic(&quot;good!&quot;); //invokespecial showPrivate(&quot;hello!&quot;); //invokespecial super.showCommon(); //invokevirtual showFinal();//å› ä¸ºæ­¤æ–¹æ³•å£°æ˜Žæœ‰finalï¼Œä¸èƒ½è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ä¹Ÿè®¤ä¸ºæ­¤æ–¹æ³•æ˜¯éžè™šæ–¹æ³•ã€‚ //è™šæ–¹æ³•å¦‚ä¸‹ï¼š /* invokevirtual ä½ æ²¡æœ‰æ˜¾ç¤ºçš„åŠ super.ï¼Œç¼–è¯‘å™¨è®¤ä¸ºä½ å¯èƒ½è°ƒç”¨å­ç±»çš„showCommon(å³ä½¿sonå­ç±»æ²¡æœ‰é‡å†™ï¼Œä¹Ÿ ä¼šè®¤ä¸º)ï¼Œæ‰€ä»¥ç¼–è¯‘æœŸé—´ç¡®å®šä¸ä¸‹æ¥ï¼Œå°±æ˜¯è™šæ–¹æ³•ã€‚ */ showCommon(); info(); MethodInterface in = null; //invokeinterface in.methodA(); &#125; public void info() &#123; &#125; public void display(Father f) &#123; f.showCommon(); &#125; public static void main(String[] args) &#123; Son so = new Son(); so.show(); &#125;&#125;interface MethodInterface &#123; void methodA();&#125; Son ç±»ä¸­ show() æ–¹æ³•çš„å­—èŠ‚ç æŒ‡ä»¤å¦‚ä¸‹ å…³äºŽ invokedynamic æŒ‡ä»¤ JVMå­—èŠ‚ç æŒ‡ä»¤é›†ä¸€ç›´æ¯”è¾ƒç¨³å®šï¼Œä¸€ç›´åˆ°Java7ä¸­æ‰å¢žåŠ äº†ä¸€ä¸ªinvokedynamicæŒ‡ä»¤ï¼Œè¿™æ˜¯Javaä¸ºäº†å®žçŽ°ã€åŠ¨æ€ç±»åž‹è¯­è¨€ã€‘æ”¯æŒè€Œåšçš„ä¸€ç§æ”¹è¿›ã€‚ ä½†æ˜¯åœ¨Java7ä¸­å¹¶æ²¡æœ‰æä¾›ç›´æŽ¥ç”ŸæˆinvokedynamicæŒ‡ä»¤çš„æ–¹æ³•ï¼Œéœ€è¦å€ŸåŠ©ASMè¿™ç§åº•å±‚å­—èŠ‚ç å·¥å…·æ¥äº§ç”ŸinvokedynamicæŒ‡ä»¤ã€‚ç›´åˆ°Java8çš„Lambdaè¡¨è¾¾å¼çš„å‡ºçŽ°ï¼ŒinvokedynamicæŒ‡ä»¤çš„ç”Ÿæˆï¼Œåœ¨Javaä¸­æ‰æœ‰äº†ç›´æŽ¥çš„ç”Ÿæˆæ–¹å¼ã€‚ Java7ä¸­å¢žåŠ çš„åŠ¨æ€è¯­è¨€ç±»åž‹æ”¯æŒçš„æœ¬è´¨æ˜¯å¯¹Javaè™šæ‹Ÿæœºè§„èŒƒçš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯å¯¹Javaè¯­è¨€è§„åˆ™çš„ä¿®æ”¹ï¼Œè¿™ä¸€å—ç›¸å¯¹æ¥è®²æ¯”è¾ƒå¤æ‚ï¼Œå¢žåŠ äº†è™šæ‹Ÿæœºä¸­çš„æ–¹æ³•è°ƒç”¨ï¼Œæœ€ç›´æŽ¥çš„å—ç›Šè€…å°±æ˜¯è¿è¡Œåœ¨Javaå¹³å°çš„åŠ¨æ€è¯­è¨€çš„ç¼–è¯‘å™¨ã€‚ 123456789101112131415161718192021222324@FunctionalInterfaceinterface Func &#123; public boolean func(String str);&#125;public class Lambda &#123; public void lambda(Func func) &#123; return; &#125; public static void main(String[] args) &#123; Lambda lambda = new Lambda(); Func func = s -&gt; &#123; return true; &#125;; lambda.lambda(func); lambda.lambda(s -&gt; &#123; return true; &#125;); &#125;&#125; åŠ¨æ€è¯­è¨€å’Œé™æ€è¯­è¨€ åŠ¨æ€ç±»åž‹è¯­è¨€å’Œé™æ€ç±»åž‹è¯­è¨€ä¸¤è€…çš„åŒºåˆ«å°±åœ¨äºŽå¯¹ç±»åž‹çš„æ£€æŸ¥æ˜¯åœ¨ç¼–è¯‘æœŸè¿˜æ˜¯åœ¨è¿è¡ŒæœŸï¼Œæ»¡è¶³å‰è€…å°±æ˜¯é™æ€ç±»åž‹è¯­è¨€ï¼Œåä¹‹æ˜¯åŠ¨æ€ç±»åž‹è¯­è¨€ã€‚ è¯´çš„å†ç›´ç™½ä¸€ç‚¹å°±æ˜¯ï¼Œé™æ€ç±»åž‹è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡è‡ªèº«çš„ç±»åž‹ä¿¡æ¯ï¼›åŠ¨æ€ç±»åž‹è¯­è¨€æ˜¯åˆ¤æ–­å˜é‡å€¼çš„ç±»åž‹ä¿¡æ¯ï¼Œå˜é‡æ²¡æœ‰ç±»åž‹ä¿¡æ¯ï¼Œå˜é‡å€¼æ‰æœ‰ç±»åž‹ä¿¡æ¯ï¼Œè¿™æ˜¯åŠ¨æ€è¯­è¨€çš„ä¸€ä¸ªé‡è¦ç‰¹å¾ã€‚ Javaï¼šString info = â€œmogu blogâ€; (Javaæ˜¯é™æ€ç±»åž‹è¯­è¨€çš„ï¼Œä¼šå…ˆç¼–è¯‘å°±è¿›è¡Œç±»åž‹æ£€æŸ¥) JSï¼švar name = â€œshkstartâ€; var name = 10; ï¼ˆè¿è¡Œæ—¶æ‰è¿›è¡Œæ£€æŸ¥ï¼‰ 1Python: info = 130.5 (è¿è¡Œæ—¶æ‰æ£€æŸ¥) Javaè¯­è¨€ä¸­æ–¹æ³•é‡å†™çš„æœ¬è´¨ æ‰¾åˆ°æ“ä½œæ•°æ ˆé¡¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ‰€æ‰§è¡Œçš„å¯¹è±¡çš„å®žé™…ç±»åž‹ï¼Œè®°ä½œCã€‚ å¦‚æžœåœ¨ç±»åž‹Cä¸­æ‰¾åˆ°ä¸Žå¸¸é‡ä¸­çš„æè¿°ç¬¦åˆç®€å•åç§°éƒ½ç›¸ç¬¦çš„æ–¹æ³•ï¼Œåˆ™è¿›è¡Œè®¿é—®æƒé™æ ¡éªŒã€‚ å¦‚æžœé€šè¿‡åˆ™è¿”å›žè¿™ä¸ªæ–¹æ³•çš„ç›´æŽ¥å¼•ç”¨ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ç»“æŸ å¦‚æžœä¸é€šè¿‡ï¼Œåˆ™è¿”å›žjava.lang.IllegalAccessError å¼‚å¸¸ å¦åˆ™ï¼ŒæŒ‰ç…§ç»§æ‰¿å…³ç³»ä»Žä¸‹å¾€ä¸Šä¾æ¬¡å¯¹Cçš„å„ä¸ªçˆ¶ç±»è¿›è¡Œç¬¬2æ­¥çš„æœç´¢å’ŒéªŒè¯è¿‡ç¨‹ã€‚ å¦‚æžœå§‹ç»ˆæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•ï¼Œåˆ™æŠ›å‡ºjava.lang.AbstractMethodErrorå¼‚å¸¸ã€‚ ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåŠ¨æ€åˆ†æ´¾ IllegalAccessErrorä»‹ç» ç¨‹åºè¯•å›¾è®¿é—®æˆ–ä¿®æ”¹ä¸€ä¸ªå±žæ€§æˆ–è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªå±žæ€§æˆ–æ–¹æ³•ï¼Œä½ æ²¡æœ‰æƒé™è®¿é—®ã€‚ä¸€èˆ¬çš„ï¼Œè¿™ä¸ªä¼šå¼•èµ·ç¼–è¯‘å™¨å¼‚å¸¸ã€‚è¿™ä¸ªé”™è¯¯å¦‚æžœå‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œå°±è¯´æ˜Žä¸€ä¸ªç±»å‘ç”Ÿäº†ä¸å…¼å®¹çš„æ”¹å˜ã€‚ æ¯”å¦‚ï¼Œä½ æŠŠåº”è¯¥æœ‰çš„jaråŒ…æ”¾ä»Žå·¥ç¨‹ä¸­æ‹¿èµ°äº†ï¼Œæˆ–è€…Mavenä¸­å­˜åœ¨jaråŒ…å†² è™šæ–¹æ³•è¡¨ åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­ï¼Œä¼šå¾ˆé¢‘ç¹çš„ä½¿ç”¨åˆ°åŠ¨æ€åˆ†æ´¾ï¼Œå¦‚æžœåœ¨æ¯æ¬¡åŠ¨æ€åˆ†æ´¾çš„è¿‡ç¨‹ä¸­éƒ½è¦é‡æ–°åœ¨ç±»çš„æ–¹æ³•å…ƒæ•°æ®ä¸­æœç´¢åˆé€‚çš„ç›®æ ‡çš„è¯å°±å¯èƒ½å½±å“åˆ°æ‰§è¡Œæ•ˆçŽ‡ã€‚å› æ­¤ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJVMé‡‡ç”¨åœ¨ç±»çš„æ–¹æ³•åŒºå»ºç«‹ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼ˆvirtual method tableï¼‰æ¥å®žçŽ°ï¼Œéžè™šæ–¹æ³•ä¸ä¼šå‡ºçŽ°åœ¨è¡¨ä¸­ã€‚ä½¿ç”¨ç´¢å¼•è¡¨æ¥ä»£æ›¿æŸ¥æ‰¾ã€‚ã€ä¸Šé¢åŠ¨æ€åˆ†æ´¾çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚æžœå­ç±»æ‰¾ä¸åˆ°ï¼Œè¿˜è¦ä»Žä¸‹å¾€ä¸Šæ‰¾å…¶çˆ¶ç±»ï¼Œéžå¸¸è€—æ—¶ã€‘ æ¯ä¸ªç±»ä¸­éƒ½æœ‰ä¸€ä¸ªè™šæ–¹æ³•è¡¨ï¼Œè¡¨ä¸­å­˜æ”¾ç€å„ä¸ªæ–¹æ³•çš„å®žé™…å…¥å£ã€‚ è™šæ–¹æ³•è¡¨æ˜¯ä»€ä¹ˆæ—¶å€™è¢«åˆ›å»ºçš„å‘¢ï¼Ÿè™šæ–¹æ³•è¡¨ä¼šåœ¨ç±»åŠ è½½çš„é“¾æŽ¥é˜¶æ®µè¢«åˆ›å»ºå¹¶å¼€å§‹åˆå§‹åŒ–ï¼Œç±»çš„å˜é‡åˆå§‹å€¼å‡†å¤‡å®Œæˆä¹‹åŽï¼ŒJVMä¼šæŠŠè¯¥ç±»çš„è™šæ–¹æ³•è¡¨ä¹Ÿåˆå§‹åŒ–å®Œæ¯•ã€‚ ä¾‹å­1 å¦‚å›¾æ‰€ç¤ºï¼šå¦‚æžœç±»ä¸­é‡å†™äº†æ–¹æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šç›´æŽ¥åœ¨è¯¥ç±»çš„è™šæ–¹æ³•è¡¨ä¸­æŸ¥æ‰¾ 1ã€æ¯”å¦‚è¯´sonåœ¨è°ƒç”¨toStringçš„æ—¶å€™ï¼ŒSonæ²¡æœ‰é‡å†™è¿‡ï¼ŒSonçš„çˆ¶ç±»Fatherä¹Ÿæ²¡æœ‰é‡å†™è¿‡ï¼Œé‚£å°±ç›´æŽ¥è°ƒç”¨Objectç±»çš„toStringã€‚é‚£ä¹ˆå°±ç›´æŽ¥åœ¨è™šæ–¹æ³•è¡¨é‡ŒæŒ‡æ˜ŽtoStringç›´æŽ¥æŒ‡å‘Objectç±»ã€‚ 2ã€ä¸‹æ¬¡Sonå¯¹è±¡å†è°ƒç”¨toStringå°±ç›´æŽ¥åŽ»æ‰¾Objectï¼Œä¸ç”¨å…ˆæ‰¾Sonâ€“&gt;å†æ‰¾Fatherâ€“&gt;æœ€åŽæ‰åˆ°Objectçš„è¿™æ ·çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ æ–¹æ³•è¿”å›žåœ°å€ åœ¨ä¸€äº›å¸–å­é‡Œï¼Œæ–¹æ³•è¿”å›žåœ°å€ã€åŠ¨æ€é“¾æŽ¥ã€ä¸€äº›é™„åŠ ä¿¡æ¯ ä¹Ÿå«åšå¸§æ•°æ®åŒº å­˜æ”¾è°ƒç”¨è¯¥æ–¹æ³•çš„pcå¯„å­˜å™¨çš„å€¼ã€‚ä¸€ä¸ªæ–¹æ³•çš„ç»“æŸï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š æ­£å¸¸æ‰§è¡Œå®Œæˆ å‡ºçŽ°æœªå¤„ç†çš„å¼‚å¸¸ï¼Œéžæ­£å¸¸é€€å‡º æ— è®ºé€šè¿‡å“ªç§æ–¹å¼é€€å‡ºï¼Œåœ¨æ–¹æ³•é€€å‡ºåŽéƒ½è¿”å›žåˆ°è¯¥æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ã€‚æ–¹æ³•æ­£å¸¸é€€å‡ºæ—¶ï¼Œè°ƒç”¨è€…çš„pcè®¡æ•°å™¨çš„å€¼ä½œä¸ºè¿”å›žåœ°å€ï¼Œå³è°ƒç”¨è¯¥æ–¹æ³•çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚è€Œé€šè¿‡å¼‚å¸¸é€€å‡ºçš„ï¼Œè¿”å›žåœ°å€æ˜¯è¦é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®šï¼Œæ ˆå¸§ä¸­ä¸€èˆ¬ä¸ä¼šä¿å­˜è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚ æœ¬è´¨ä¸Šï¼Œæ–¹æ³•çš„é€€å‡ºå°±æ˜¯å½“å‰æ ˆå¸§å‡ºæ ˆçš„è¿‡ç¨‹ã€‚æ­¤æ—¶ï¼Œéœ€è¦æ¢å¤ä¸Šå±‚æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€å°†è¿”å›žå€¼åŽ‹å…¥è°ƒç”¨è€…æ ˆå¸§çš„æ“ä½œæ•°æ ˆã€è®¾ç½®PCå¯„å­˜å™¨å€¼ç­‰ï¼Œè®©è°ƒç”¨è€…æ–¹æ³•ç»§ç»­æ‰§è¡Œä¸‹åŽ»ã€‚ æ­£å¸¸å®Œæˆå‡ºå£å’Œå¼‚å¸¸å®Œæˆå‡ºå£çš„åŒºåˆ«åœ¨äºŽï¼šé€šè¿‡å¼‚å¸¸å®Œæˆå‡ºå£é€€å‡ºçš„ä¸ä¼šç»™ä»–çš„ä¸Šå±‚è°ƒç”¨è€…äº§ç”Ÿä»»ä½•çš„è¿”å›žå€¼ã€‚ æ–¹æ³•é€€å‡ºçš„ä¸¤ç§æ–¹å¼ å½“ä¸€ä¸ªæ–¹æ³•å¼€å§‹æ‰§è¡ŒåŽï¼Œåªæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥é€€å‡ºè¿™ä¸ªæ–¹æ³•ï¼Œ æ­£å¸¸é€€å‡ºï¼š æ‰§è¡Œå¼•æ“Žé‡åˆ°ä»»æ„ä¸€ä¸ªæ–¹æ³•è¿”å›žçš„å­—èŠ‚ç æŒ‡ä»¤ï¼ˆreturnï¼‰ï¼Œä¼šæœ‰è¿”å›žå€¼ä¼ é€’ç»™ä¸Šå±‚çš„æ–¹æ³•è°ƒç”¨è€…ï¼Œç®€ç§°æ­£å¸¸å®Œæˆå‡ºå£ï¼› ä¸€ä¸ªæ–¹æ³•åœ¨æ­£å¸¸è°ƒç”¨å®Œæˆä¹‹åŽï¼Œç©¶ç«Ÿéœ€è¦ä½¿ç”¨å“ªä¸€ä¸ªè¿”å›žæŒ‡ä»¤ï¼Œè¿˜éœ€è¦æ ¹æ®æ–¹æ³•è¿”å›žå€¼çš„å®žé™…æ•°æ®ç±»åž‹è€Œå®šã€‚ åœ¨å­—èŠ‚ç æŒ‡ä»¤ä¸­ï¼Œè¿”å›žæŒ‡ä»¤åŒ…å«ï¼š ireturnï¼šå½“è¿”å›žå€¼æ˜¯booleanï¼Œbyteï¼Œcharï¼Œshortå’Œintç±»åž‹æ—¶ä½¿ç”¨ lreturnï¼šLongç±»åž‹ freturnï¼šFloatç±»åž‹ dreturnï¼šDoubleç±»åž‹ areturnï¼šå¼•ç”¨ç±»åž‹ returnï¼šè¿”å›žå€¼ç±»åž‹ä¸ºvoidçš„æ–¹æ³•ã€å®žä¾‹åˆå§‹åŒ–æ–¹æ³•ã€ç±»å’ŒæŽ¥å£çš„åˆå§‹åŒ–æ–¹æ³• å¼‚å¸¸é€€å‡ºï¼š åœ¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°å¼‚å¸¸ï¼ˆExceptionï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰åœ¨æ–¹æ³•å†…è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±æ˜¯åªè¦åœ¨æœ¬æ–¹æ³•çš„å¼‚å¸¸è¡¨ä¸­æ²¡æœ‰æœç´¢åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œå°±ä¼šå¯¼è‡´æ–¹æ³•é€€å‡ºï¼Œç®€ç§°å¼‚å¸¸å®Œæˆå‡ºå£ã€‚ æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŠ›å‡ºå¼‚å¸¸æ—¶çš„å¼‚å¸¸å¤„ç†ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªå¼‚å¸¸å¤„ç†è¡¨ï¼Œæ–¹ä¾¿åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™æ‰¾åˆ°å¤„ç†å¼‚å¸¸çš„ä»£ç  ä¸€äº›é™„åŠ ä¿¡æ¯æ ˆå¸§ä¸­è¿˜å…è®¸æºå¸¦ä¸ŽJavaè™šæ‹Ÿæœºå®žçŽ°ç›¸å…³çš„ä¸€äº›é™„åŠ ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼šå¯¹ç¨‹åºè°ƒè¯•æä¾›æ”¯æŒçš„ä¿¡æ¯ã€‚ æ ˆç›¸å…³é¢è¯•é¢˜ä¸¾ä¾‹æ ˆæº¢å‡ºçš„æƒ…å†µï¼ŸSOFï¼ˆStackOverflowErrorï¼‰ï¼Œæ ˆå¤§å°åˆ†ä¸ºå›ºå®šçš„ï¼Œå’ŒåŠ¨æ€å˜åŒ–ã€‚å¦‚æžœæ˜¯å›ºå®šçš„å°±å¯èƒ½å‡ºçŽ°StackOverflowErrorã€‚å¦‚æžœæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå†…å­˜ä¸è¶³æ—¶å°±å¯èƒ½å‡ºçŽ°OOM è°ƒæ•´æ ˆå¤§å°ï¼Œå°±èƒ½ä¿è¯ä¸å‡ºçŽ°æº¢å‡ºä¹ˆï¼Ÿä¸èƒ½ä¿è¯ä¸æº¢å‡ºï¼Œåªèƒ½ä¿è¯SOFå‡ºçŽ°çš„å‡ çŽ‡å° åˆ†é…çš„æ ˆå†…å­˜è¶Šå¤§è¶Šå¥½ä¹ˆï¼Ÿä¸æ˜¯ï¼Œä¸€å®šæ—¶é—´å†…é™ä½Žäº†OOMæ¦‚çŽ‡ï¼Œä½†æ˜¯ä¼šæŒ¤å å…¶å®ƒçš„çº¿ç¨‹ç©ºé—´ï¼Œå› ä¸ºæ•´ä¸ªè™šæ‹Ÿæœºçš„å†…å­˜ç©ºé—´æ˜¯æœ‰é™çš„ åžƒåœ¾å›žæ”¶æ˜¯å¦æ¶‰åŠåˆ°è™šæ‹Ÿæœºæ ˆï¼Ÿæ–¹æ³•ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿå…·ä½“é—®é¢˜å…·ä½“åˆ†æž å¦‚æžœåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰å¯ä»¥æ“ä½œæ­¤æ•°æ®ï¼Œåˆ™å¿…æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ å¦‚æžœæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œæ­¤æ•°æ®ï¼Œåˆ™æ­¤æ•°æ®æ˜¯å…±äº«æ•°æ®ã€‚å¦‚æžœä¸è€ƒè™‘åŒæ­¥æœºåˆ¶çš„è¯ï¼Œä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ å…·ä½“é—®é¢˜å…·ä½“åˆ†æžï¼š ? å¦‚æžœå¯¹è±¡æ˜¯åœ¨å†…éƒ¨äº§ç”Ÿï¼Œå¹¶åœ¨å†…éƒ¨æ¶ˆäº¡ï¼Œæ²¡æœ‰è¿”å›žåˆ°å¤–éƒ¨ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåä¹‹åˆ™æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * é¢è¯•é¢˜ï¼š * æ–¹æ³•ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Ÿå…·ä½“æƒ…å†µå…·ä½“åˆ†æž * * ä½•ä¸ºçº¿ç¨‹å®‰å…¨ï¼Ÿ * å¦‚æžœåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰å¯ä»¥æ“ä½œæ­¤æ•°æ®ï¼Œåˆ™å¿…æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ * å¦‚æžœæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œæ­¤æ•°æ®ï¼Œåˆ™æ­¤æ•°æ®æ˜¯å…±äº«æ•°æ®ã€‚å¦‚æžœä¸è€ƒè™‘åŒæ­¥æœºåˆ¶çš„è¯ï¼Œä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ */public class StringBuilderTest &#123; int num = 10; //s1çš„å£°æ˜Žæ–¹å¼æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆåªåœ¨æ–¹æ³•å†…éƒ¨ç”¨äº†ï¼‰ public static void method1()&#123; //StringBuilder:çº¿ç¨‹ä¸å®‰å…¨ StringBuilder s1 = new StringBuilder(); s1.append(&quot;a&quot;); s1.append(&quot;b&quot;); //... &#125; //sBuilderçš„æ“ä½œè¿‡ç¨‹ï¼šæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ˆä½œä¸ºå‚æ•°ä¼ è¿›æ¥ï¼Œå¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹æ“ä½œï¼‰ public static void method2(StringBuilder sBuilder)&#123; sBuilder.append(&quot;a&quot;); sBuilder.append(&quot;b&quot;); //... &#125; //s1çš„æ“ä½œï¼šæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ˆæœ‰è¿”å›žå€¼ï¼Œå¯èƒ½è¢«å…¶å®ƒçº¿ç¨‹æ“ä½œï¼‰ public static StringBuilder method3()&#123; StringBuilder s1 = new StringBuilder(); s1.append(&quot;a&quot;); s1.append(&quot;b&quot;); return s1; &#125; //s1çš„æ“ä½œï¼šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆs1è‡ªå·±æ¶ˆäº¡äº†ï¼Œæœ€åŽè¿”å›žçš„æ™ºå•†s1.toStringçš„ä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ public static String method4()&#123; StringBuilder s1 = new StringBuilder(); s1.append(&quot;a&quot;); s1.append(&quot;b&quot;); return s1.toString(); &#125; public static void main(String[] args) &#123; StringBuilder s = new StringBuilder(); new Thread(() -&gt; &#123; s.append(&quot;a&quot;); s.append(&quot;b&quot;); &#125;).start(); method2(s); &#125;&#125; å¼•ç”¨ä¼ é€’ å€¼ä¼ é€’https://segmentfault.com/a/1190000016773324","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"JVM_RUNTIME","slug":"JVM-RUNTIME","date":"2020-01-03T13:45:04.000Z","updated":"2021-08-19T11:11:44.009Z","comments":true,"path":"2020/01/03/JVM-RUNTIME/","link":"","permalink":"https://noteforme.github.io/2020/01/03/JVM-RUNTIME/","excerpt":"","text":"[è¿è¡Œæ—¶æ•°æ®åŒºæ¦‚è¿°åŠçº¿ç¨‹]å‰è¨€æœ¬èŠ‚ä¸»è¦è®²çš„æ˜¯è¿è¡Œæ—¶æ•°æ®åŒºï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾è¿™éƒ¨åˆ†ï¼Œå®ƒæ˜¯åœ¨ç±»åŠ è½½å®ŒæˆåŽçš„é˜¶æ®µ å½“æˆ‘ä»¬é€šè¿‡å‰é¢çš„ï¼šç±»çš„åŠ è½½ â€“&gt; éªŒè¯ â€“&gt; å‡†å¤‡ â€“&gt; è§£æž â€“&gt; åˆå§‹åŒ–ï¼Œè¿™å‡ ä¸ªé˜¶æ®µå®ŒæˆåŽï¼Œå°±ä¼šç”¨åˆ°æ‰§è¡Œå¼•æ“Žå¯¹æˆ‘ä»¬çš„ç±»è¿›è¡Œä½¿ç”¨ï¼ŒåŒæ—¶æ‰§è¡Œå¼•æ“Žå°†ä¼šä½¿ç”¨åˆ°æˆ‘ä»¬è¿è¡Œæ—¶æ•°æ®åŒº è¿è¡Œæ—¶æ•°æ®åŒºç»“æž„è¿è¡Œæ—¶æ•°æ®åŒºä¸Žå†…å­˜ å†…å­˜æ˜¯éžå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’ŒCPUçš„ä¸­é—´ä»“åº“åŠæ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®žæ—¶è¿è¡Œã€‚JVMå†…å­˜å¸ƒå±€è§„å®šäº†Javaåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº†JVMçš„é«˜æ•ˆç¨³å®šè¿è¡Œã€‚ä¸åŒçš„JVMå¯¹äºŽå†…å­˜çš„åˆ’åˆ†æ–¹å¼å’Œç®¡ç†æœºåˆ¶å­˜åœ¨ç€éƒ¨åˆ†å·®å¼‚ã€‚ç»“åˆJVMè™šæ‹Ÿæœºè§„èŒƒï¼Œæ¥æŽ¢è®¨ä¸€ä¸‹ç»å…¸çš„JVMå†…å­˜å¸ƒå±€ã€‚ æˆ‘ä»¬é€šè¿‡ç£ç›˜æˆ–è€…ç½‘ç»œIOå¾—åˆ°çš„æ•°æ®ï¼Œéƒ½éœ€è¦å…ˆåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åŽCPUä»Žå†…å­˜ä¸­èŽ·å–æ•°æ®è¿›è¡Œè¯»å–ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å­˜å……å½“äº†CPUå’Œç£ç›˜ä¹‹é—´çš„æ¡¥æ¢ çº¿ç¨‹çš„å†…å­˜ç©ºé—´ Javaè™šæ‹Ÿæœºå®šä¹‰äº†è‹¥å¹²ç§ç¨‹åºè¿è¡ŒæœŸé—´ä¼šä½¿ç”¨åˆ°çš„è¿è¡Œæ—¶æ•°æ®åŒºï¼šå…¶ä¸­æœ‰ä¸€äº›ä¼šéšç€è™šæ‹Ÿæœºå¯åŠ¨è€Œåˆ›å»ºï¼Œéšç€è™šæ‹Ÿæœºé€€å‡ºè€Œé”€æ¯ã€‚å¦å¤–ä¸€äº›åˆ™æ˜¯ä¸Žçº¿ç¨‹ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™äº›ä¸Žçº¿ç¨‹å¯¹åº”çš„æ•°æ®åŒºåŸŸä¼šéšç€çº¿ç¨‹å¼€å§‹å’Œç»“æŸè€Œåˆ›å»ºå’Œé”€æ¯ã€‚ ç°è‰²çš„ä¸ºå•ç‹¬çº¿ç¨‹ç§æœ‰çš„ï¼Œçº¢è‰²çš„ä¸ºå¤šä¸ªçº¿ç¨‹å…±äº«çš„ã€‚å³ï¼š çº¿ç¨‹ç‹¬æœ‰ï¼šç‹¬ç«‹åŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ çº¿ç¨‹é—´å…±äº«ï¼šå †ã€å †å¤–å†…å­˜ï¼ˆæ°¸ä¹…ä»£æˆ–å…ƒç©ºé—´ã€ä»£ç ç¼“å­˜ï¼‰ Runtimeç±»æ¯ä¸ªJVMåªæœ‰ä¸€ä¸ªRuntimeå®žä¾‹ã€‚å³ä¸ºè¿è¡Œæ—¶çŽ¯å¢ƒï¼Œç›¸å½“äºŽå†…å­˜ç»“æž„çš„ä¸­é—´çš„é‚£ä¸ªæ¡†æ¡†ï¼šè¿è¡Œæ—¶çŽ¯å¢ƒã€‚ JVM çº¿ç¨‹ çº¿ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºé‡Œçš„è¿è¡Œå•å…ƒã€‚JVMå…è®¸ä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œçš„æ‰§è¡Œ åœ¨Hotspot JVMé‡Œï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¸Žæ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ç›´æŽ¥æ˜ å°„ å½“ä¸€ä¸ªJavaçº¿ç¨‹å‡†å¤‡å¥½æ‰§è¡Œä»¥åŽï¼Œæ­¤æ—¶ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æœ¬åœ°çº¿ç¨‹ä¹ŸåŒæ—¶åˆ›å»ºã€‚Javaçº¿ç¨‹æ‰§è¡Œç»ˆæ­¢åŽï¼Œæœ¬åœ°çº¿ç¨‹ä¹Ÿä¼šå›žæ”¶ æ“ä½œç³»ç»Ÿè´Ÿè´£å°†çº¿ç¨‹å®‰æŽ’è°ƒåº¦åˆ°ä»»ä½•ä¸€ä¸ªå¯ç”¨çš„CPUä¸Šã€‚ä¸€æ—¦æœ¬åœ°çº¿ç¨‹åˆå§‹åŒ–æˆåŠŸï¼Œå®ƒå°±ä¼šè°ƒç”¨Javaçº¿ç¨‹ä¸­çš„run()æ–¹æ³• å…³äºŽçº¿ç¨‹ï¼Œå¹¶å‘å¯ä»¥çœ‹ç¬”è€…çš„Javaå¹¶å‘ç³»åˆ— JVM ç³»ç»Ÿçº¿ç¨‹ å¦‚æžœä½ ä½¿ç”¨jconsoleæˆ–è€…æ˜¯ä»»ä½•ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œéƒ½èƒ½çœ‹åˆ°åœ¨åŽå°æœ‰è®¸å¤šçº¿ç¨‹åœ¨è¿è¡Œã€‚è¿™äº›åŽå°çº¿ç¨‹ä¸åŒ…æ‹¬è°ƒç”¨public static void main(String[])çš„mainçº¿ç¨‹ä»¥åŠæ‰€æœ‰è¿™ä¸ªmainçº¿ç¨‹è‡ªå·±åˆ›å»ºçš„çº¿ç¨‹ã€‚ è¿™äº›ä¸»è¦çš„åŽå°ç³»ç»Ÿçº¿ç¨‹åœ¨Hotspot JVMé‡Œä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªï¼š è™šæ‹Ÿæœºçº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹çš„æ“ä½œæ˜¯éœ€è¦JVMè¾¾åˆ°å®‰å…¨ç‚¹æ‰ä¼šå‡ºçŽ°ã€‚è¿™äº›æ“ä½œå¿…é¡»åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å‘ç”Ÿçš„åŽŸå› æ˜¯ä»–ä»¬éƒ½éœ€è¦JVMè¾¾åˆ°å®‰å…¨ç‚¹ï¼Œè¿™æ ·å †æ‰ä¸ä¼šå˜åŒ–ã€‚è¿™ç§çº¿ç¨‹çš„æ‰§è¡Œç±»åž‹æ‹¬â€stop-the-worldâ€çš„åžƒåœ¾æ”¶é›†ï¼Œçº¿ç¨‹æ ˆæ”¶é›†ï¼Œçº¿ç¨‹æŒ‚èµ·ä»¥åŠåå‘é”æ’¤é”€ å‘¨æœŸä»»åŠ¡çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹æ˜¯æ—¶é—´å‘¨æœŸäº‹ä»¶çš„ä½“çŽ°ï¼ˆæ¯”å¦‚ä¸­æ–­ï¼‰ï¼Œä»–ä»¬ä¸€èˆ¬ç”¨äºŽå‘¨æœŸæ€§æ“ä½œçš„è°ƒåº¦æ‰§è¡Œ GCçº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹å¯¹åœ¨JVMé‡Œä¸åŒç§ç±»çš„åžƒåœ¾æ”¶é›†è¡Œä¸ºæä¾›äº†æ”¯æŒ ç¼–è¯‘çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šå°†å­—èŠ‚ç ç¼–è¯‘æˆåˆ°æœ¬åœ°ä»£ç  ä¿¡å·è°ƒåº¦çº¿ç¨‹ï¼šè¿™ç§çº¿ç¨‹æŽ¥æ”¶ä¿¡å·å¹¶å‘é€ç»™JVMï¼Œåœ¨å®ƒå†…éƒ¨é€šè¿‡è°ƒç”¨é€‚å½“çš„æ–¹æ³•è¿›è¡Œå¤„ç† ç¨‹åºè®¡æ•°å™¨(PCå¯„å­˜å™¨)PCå¯„å­˜å™¨ä»‹ç»å®˜æ–¹æ–‡æ¡£ç½‘å€ï¼šhttps://docs.oracle.com/javase/specs/jvms/se8/html/index.html JVMä¸­çš„ç¨‹åºè®¡æ•°å¯„å­˜å™¨ï¼ˆProgram Counter Registerï¼‰ä¸­ï¼ŒRegisterçš„å‘½åæºäºŽCPUçš„å¯„å­˜å™¨ï¼Œå¯„å­˜å™¨å­˜å‚¨æŒ‡ä»¤ç›¸å…³çš„çŽ°åœºä¿¡æ¯ã€‚CPUåªæœ‰æŠŠæ•°æ®è£…è½½åˆ°å¯„å­˜å™¨æ‰èƒ½å¤Ÿè¿è¡Œã€‚ è¿™é‡Œï¼Œå¹¶éžæ˜¯å¹¿ä¹‰ä¸Šæ‰€æŒ‡çš„ç‰©ç†å¯„å­˜å™¨ï¼Œæˆ–è®¸å°†å…¶ç¿»è¯‘ä¸ºPCè®¡æ•°å™¨ï¼ˆæˆ–æŒ‡ä»¤è®¡æ•°å™¨ï¼‰ä¼šæ›´åŠ è´´åˆ‡ï¼ˆä¹Ÿç§°ä¸ºç¨‹åºé’©å­ï¼‰ï¼Œå¹¶ä¸”ä¹Ÿä¸å®¹æ˜“å¼•èµ·ä¸€äº›ä¸å¿…è¦çš„è¯¯ä¼šã€‚JVMä¸­çš„PCå¯„å­˜å™¨æ˜¯å¯¹ç‰©ç†PCå¯„å­˜å™¨çš„ä¸€ç§æŠ½è±¡æ¨¡æ‹Ÿã€‚ å®ƒæ˜¯ä¸€å—å¾ˆå°çš„å†…å­˜ç©ºé—´ï¼Œå‡ ä¹Žå¯ä»¥å¿½ç•¥ä¸è®°ã€‚ä¹Ÿæ˜¯è¿è¡Œé€Ÿåº¦æœ€å¿«çš„å­˜å‚¨åŒºåŸŸã€‚ åœ¨JVMè§„èŒƒä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œç”Ÿå‘½å‘¨æœŸä¸Žçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ã€‚ ä»»ä½•æ—¶é—´ä¸€ä¸ªçº¿ç¨‹éƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å½“å‰æ–¹æ³•ã€‚ç¨‹åºè®¡æ•°å™¨ä¼šå­˜å‚¨å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„Javaæ–¹æ³•çš„JVMæŒ‡ä»¤åœ°å€ï¼›æˆ–è€…ï¼Œå¦‚æžœæ˜¯åœ¨æ‰§è¡Œnativeæ–¹æ³•ï¼Œåˆ™æ˜¯æœªæŒ‡å®šå€¼ï¼ˆundefnedï¼‰ã€‚ å®ƒæ˜¯ç¨‹åºæŽ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªçŽ¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚ å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•OutofMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚ PCå¯„å­˜å™¨çš„ä½œç”¨PCå¯„å­˜å™¨ç”¨æ¥å­˜å‚¨æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œä¹Ÿå³å°†è¦æ‰§è¡Œçš„æŒ‡ä»¤ä»£ç ã€‚ç”±æ‰§è¡Œå¼•æ“Žè¯»å–ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œå¹¶æ‰§è¡Œè¯¥æŒ‡ä»¤ã€‚ 12345678910111213public class PCRegisterTest &#123; public static void main(String[] args) &#123; int i = 10; int j = 20; int k = i + j; String s = &quot;abc&quot;; System.out.println(i); System.out.println(k); &#125;&#125; çœ‹å­—èŠ‚ç çš„æ–¹æ³•ï¼šhttps://blog.csdn.net/21aspnet/article/details/88351875 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102Classfile /F:/IDEAWorkSpaceSourceCode/JVMDemo/out/production/chapter04/com/atguigu/java/PCRegisterTest.class Last modified 2020-11-2; size 675 bytes MD5 checksum 53b3ef104479ec9e9b7ce5319e5881d3 Compiled from &quot;PCRegisterTest.java&quot;public class com.atguigu.java.PCRegisterTest minor version: 0 major version: 52 flags: ACC_PUBLIC, ACC_SUPERConstant pool: #1 = Methodref #6.#26 // java/lang/Object.&quot;&lt;init&gt;&quot;:()V #2 = String #27 // abc #3 = Fieldref #28.#29 // java/lang/System.out:Ljava/io/PrintStream; #4 = Methodref #30.#31 // java/io/PrintStream.println:(I)V #5 = Class #32 // com/atguigu/java/PCRegisterTest #6 = Class #33 // java/lang/Object #7 = Utf8 &lt;init&gt; #8 = Utf8 ()V #9 = Utf8 Code #10 = Utf8 LineNumberTable #11 = Utf8 LocalVariableTable #12 = Utf8 this #13 = Utf8 Lcom/atguigu/java/PCRegisterTest; #14 = Utf8 main #15 = Utf8 ([Ljava/lang/String;)V #16 = Utf8 args #17 = Utf8 [Ljava/lang/String; #18 = Utf8 i #19 = Utf8 I #20 = Utf8 j #21 = Utf8 k #22 = Utf8 s #23 = Utf8 Ljava/lang/String; #24 = Utf8 SourceFile #25 = Utf8 PCRegisterTest.java #26 = NameAndType #7:#8 // &quot;&lt;init&gt;&quot;:()V #27 = Utf8 abc #28 = Class #34 // java/lang/System #29 = NameAndType #35:#36 // out:Ljava/io/PrintStream; #30 = Class #37 // java/io/PrintStream #31 = NameAndType #38:#39 // println:(I)V #32 = Utf8 com/atguigu/java/PCRegisterTest #33 = Utf8 java/lang/Object #34 = Utf8 java/lang/System #35 = Utf8 out #36 = Utf8 Ljava/io/PrintStream; #37 = Utf8 java/io/PrintStream #38 = Utf8 println #39 = Utf8 (I)V&#123; public com.atguigu.java.PCRegisterTest(); descriptor: ()V flags: ACC_PUBLIC Code: stack=1, locals=1, args_size=1 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 7: 0 LocalVariableTable: Start Length Slot Name Signature 0 5 0 this Lcom/atguigu/java/PCRegisterTest; public static void main(java.lang.String[]); descriptor: ([Ljava/lang/String;)V flags: ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=5, args_size=1 0: bipush 10 2: istore_1 3: bipush 20 5: istore_2 6: iload_1 7: iload_2 8: iadd 9: istore_3 10: ldc #2 // String abc 12: astore 4 14: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 17: iload_1 18: invokevirtual #4 // Method java/io/PrintStream.println:(I)V 21: getstatic #3 // Field java/lang/System.out:Ljava/io/PrintStream; 24: iload_3 25: invokevirtual #4 // Method java/io/PrintStream.println:(I)V 28: return LineNumberTable: line 10: 0 line 11: 3 line 12: 6 line 14: 10 line 15: 14 line 16: 21 line 18: 28 LocalVariableTable: Start Length Slot Name Signature 0 29 0 args [Ljava/lang/String; 3 26 1 i I 6 23 2 j I 10 19 3 k I 14 15 4 s Ljava/lang/String;&#125;SourceFile: &quot;PCRegisterTest.java&quot; å·¦è¾¹çš„æ•°å­—ä»£è¡¨æŒ‡ä»¤åœ°å€ï¼ˆæŒ‡ä»¤åç§»ï¼‰ï¼Œå³ PC å¯„å­˜å™¨ä¸­å¯èƒ½å­˜å‚¨çš„å€¼ï¼Œç„¶åŽæ‰§è¡Œå¼•æ“Žè¯»å– PC å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œå¹¶æ‰§è¡Œè¯¥æŒ‡ä»¤ ä¸¤ä¸ªé¢è¯•é¢˜ä½¿ç”¨PCå¯„å­˜å™¨å­˜å‚¨å­—èŠ‚ç æŒ‡ä»¤åœ°å€æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ–è€…é—®ä¸ºä»€ä¹ˆä½¿ç”¨ PC å¯„å­˜å™¨æ¥è®°å½•å½“å‰çº¿ç¨‹çš„æ‰§è¡Œåœ°å€å‘¢ï¼Ÿ å› ä¸ºCPUéœ€è¦ä¸åœçš„åˆ‡æ¢å„ä¸ªçº¿ç¨‹ï¼Œè¿™æ—¶å€™åˆ‡æ¢å›žæ¥ä»¥åŽï¼Œå°±å¾—çŸ¥é“æŽ¥ç€ä»Žå“ªå¼€å§‹ç»§ç»­æ‰§è¡Œ JVMçš„å­—èŠ‚ç è§£é‡Šå™¨å°±éœ€è¦é€šè¿‡æ”¹å˜PCå¯„å­˜å™¨çš„å€¼æ¥æ˜Žç¡®ä¸‹ä¸€æ¡åº”è¯¥æ‰§è¡Œä»€ä¹ˆæ ·çš„å­—èŠ‚ç æŒ‡ä»¤ PCå¯„å­˜å™¨ä¸ºä»€ä¹ˆè¢«è®¾å®šä¸ºç§æœ‰çš„ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“æ‰€è°“çš„å¤šçº¿ç¨‹åœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ®µå†…åªä¼šæ‰§è¡Œå…¶ä¸­æŸä¸€ä¸ªçº¿ç¨‹çš„æ–¹æ³•ï¼ŒCPUä¼šä¸åœåœ°åšä»»åŠ¡åˆ‡æ¢ï¼Œè¿™æ ·å¿…ç„¶å¯¼è‡´ç»å¸¸ä¸­æ–­æˆ–æ¢å¤ï¼Œå¦‚ä½•ä¿è¯åˆ†æ¯«æ— å·®å‘¢ï¼Ÿä¸ºäº†èƒ½å¤Ÿå‡†ç¡®åœ°è®°å½•å„ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„å½“å‰å­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼Œæœ€å¥½çš„åŠžæ³•è‡ªç„¶æ˜¯ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åˆ†é…ä¸€ä¸ªPCå¯„å­˜å™¨ï¼Œè¿™æ ·ä¸€æ¥å„ä¸ªçº¿ç¨‹ä¹‹é—´ä¾¿å¯ä»¥è¿›è¡Œç‹¬ç«‹è®¡ç®—ï¼Œä»Žè€Œä¸ä¼šå‡ºçŽ°ç›¸äº’å¹²æ‰°çš„æƒ…å†µã€‚ ç”±äºŽCPUæ—¶é—´ç‰‡è½®é™åˆ¶ï¼Œä¼—å¤šçº¿ç¨‹åœ¨å¹¶å‘æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨æˆ–è€…å¤šæ ¸å¤„ç†å™¨ä¸­çš„ä¸€ä¸ªå†…æ ¸ï¼Œåªä¼šæ‰§è¡ŒæŸä¸ªçº¿ç¨‹ä¸­çš„ä¸€æ¡æŒ‡ä»¤ã€‚ è¿™æ ·å¿…ç„¶å¯¼è‡´ç»å¸¸ä¸­æ–­æˆ–æ¢å¤ï¼Œå¦‚ä½•ä¿è¯åˆ†æ¯«æ— å·®å‘¢ï¼Ÿæ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºåŽï¼Œéƒ½ä¼šäº§ç”Ÿè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨å’Œæ ˆå¸§ï¼Œç¨‹åºè®¡æ•°å™¨åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“ã€‚ æ³¨æ„å¹¶è¡Œå’Œå¹¶å‘çš„åŒºåˆ«ï¼Œç¬”è€…çš„å¹¶å‘ç³»åˆ—æœ‰è®² CPU æ—¶é—´ç‰‡ CPUæ—¶é—´ç‰‡å³CPUåˆ†é…ç»™å„ä¸ªç¨‹åºçš„æ—¶é—´ï¼Œæ¯ä¸ªçº¿ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ã€‚ åœ¨å®è§‚ä¸Šï¼šæˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªç¨‹åºå¹¶è¡Œä¸æ‚–ï¼ŒåŒæ—¶è¿è¡Œã€‚ ä½†åœ¨å¾®è§‚ä¸Šï¼šç”±äºŽåªæœ‰ä¸€ä¸ªCPUï¼Œä¸€æ¬¡åªèƒ½å¤„ç†ç¨‹åºè¦æ±‚çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä½•å¤„ç†å…¬å¹³ï¼Œä¸€ç§æ–¹æ³•å°±æ˜¯å¼•å…¥æ—¶é—´ç‰‡ï¼Œæ¯ä¸ªç¨‹åºè½®æµæ‰§è¡Œã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"JVM_Overview","slug":"JVM-Overview","date":"2020-01-03T02:48:45.000Z","updated":"2022-06-12T03:17:58.630Z","comments":true,"path":"2020/01/03/JVM-Overview/","link":"","permalink":"https://noteforme.github.io/2020/01/03/JVM-Overview/","excerpt":"","text":"Mark word è™šæ‹Ÿæœºæ˜¯é€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿçš„å…·æœ‰å®Œæ•´ç¡¬ä»¶ç³»ç»ŸåŠŸèƒ½çš„ã€è¿è¡Œåœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»çŽ¯å¢ƒä¸­çš„å®Œæ•´è®¡ç®—æœºç³»ç»Ÿã€‚ JVMåˆ†ç±» https://www.zhihu.com/question/29265430/answer/43818804 å…ƒç©ºé—´å¯¸å“ªäº›æ•°æ®? https://www.cnblogs.com/duanxz/p/3520829.html JVMæ•´ä½“ç»“æž„ Javaä»£ç æ‰§è¡Œæµç¨‹ â€‹ è¯¦ç»†å›¾ JVMçš„æž¶æž„æ¨¡åž‹Javaç¼–è¯‘å™¨è¾“å…¥çš„æŒ‡ä»¤æµåŸºæœ¬ä¸Šæ˜¯ä¸€ç§åŸºäºŽæ ˆçš„æŒ‡ä»¤é›†æž¶æž„ï¼Œå¦å¤–ä¸€ç§æŒ‡ä»¤é›†æž¶æž„åˆ™æ˜¯åŸºäºŽå¯„å­˜å™¨çš„æŒ‡ä»¤é›†æž¶æž„ã€‚å…·ä½“æ¥è¯´ï¼šè¿™ä¸¤ç§æž¶æž„ä¹‹é—´çš„åŒºåˆ«ï¼š åŸºäºŽæ ˆå¼æž¶æž„çš„ç‰¹ç‚¹ è®¾è®¡å’Œå®žçŽ°æ›´ç®€å•ï¼Œé€‚ç”¨äºŽèµ„æºå—é™çš„ç³»ç»Ÿï¼› é¿å¼€äº†å¯„å­˜å™¨çš„åˆ†é…éš¾é¢˜ï¼šä½¿ç”¨é›¶åœ°å€æŒ‡ä»¤æ–¹å¼åˆ†é…ã€‚ æŒ‡ä»¤æµä¸­çš„æŒ‡ä»¤å¤§éƒ¨åˆ†æ˜¯é›¶åœ°å€æŒ‡ä»¤ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹ä¾èµ–äºŽæ“ä½œæ ˆã€‚æŒ‡ä»¤é›†æ›´å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®žçŽ°ã€‚ ä¸éœ€è¦ç¡¬ä»¶æ”¯æŒï¼Œå¯ç§»æ¤æ€§æ›´å¥½ï¼Œæ›´å¥½å®žçŽ°è·¨å¹³å° åŸºäºŽå¯„å­˜å™¨æž¶æž„çš„ç‰¹ç‚¹ å…¸åž‹çš„åº”ç”¨æ˜¯x86çš„äºŒè¿›åˆ¶æŒ‡ä»¤é›†ï¼šæ¯”å¦‚ä¼ ç»Ÿçš„PCä»¥åŠAndroidçš„Davlikè™šæ‹Ÿæœºã€‚ æŒ‡ä»¤é›†æž¶æž„åˆ™å®Œå…¨ä¾èµ–ç¡¬ä»¶ï¼Œå¯ç§»æ¤æ€§å·® æ€§èƒ½ä¼˜ç§€å’Œæ‰§è¡Œæ›´é«˜æ•ˆ èŠ±è´¹æ›´å°‘çš„æŒ‡ä»¤åŽ»å®Œæˆä¸€é¡¹æ“ä½œã€‚ åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒåŸºäºŽå¯„å­˜å™¨æž¶æž„çš„æŒ‡ä»¤é›†å¾€å¾€éƒ½ä»¥ä¸€åœ°å€æŒ‡ä»¤ã€äºŒåœ°å€æŒ‡ä»¤å’Œä¸‰åœ°å€æŒ‡ä»¤ä¸ºä¸»ï¼Œè€ŒåŸºäºŽæ ˆå¼æž¶æž„çš„æŒ‡ä»¤é›†å´æ˜¯ä»¥é›¶åœ°å€æŒ‡ä»¤ä¸ºä¸»æ–¹æ°´æ´‹ æ€»ç»“ ç”±äºŽè·¨å¹³å°æ€§çš„è®¾è®¡ï¼ŒJavaçš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ã€‚ä¸åŒå¹³å°CPUæž¶æž„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºŽå¯„å­˜å™¨çš„ã€‚ä¼˜ç‚¹æ˜¯è·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®žçŽ°ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä¸‹é™ï¼Œå®žçŽ°åŒæ ·çš„åŠŸèƒ½éœ€è¦æ›´å¤šçš„æŒ‡ä»¤ã€‚ æ—¶è‡³ä»Šæ—¥ï¼Œå°½ç®¡åµŒå…¥å¼å¹³å°å·²ç»ä¸æ˜¯Javaç¨‹åºçš„ä¸»æµè¿è¡Œå¹³å°äº†ï¼ˆå‡†ç¡®æ¥è¯´åº”è¯¥æ˜¯HotSpotVMçš„å®¿ä¸»çŽ¯å¢ƒå·²ç»ä¸å±€é™äºŽåµŒå…¥å¼å¹³å°äº†ï¼‰ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸å°†æž¶æž„æ›´æ¢ä¸ºåŸºäºŽå¯„å­˜å™¨çš„æž¶æž„å‘¢ï¼Ÿ æ ˆ è·¨å¹³å°æ€§ æŒ‡ä»¤é›†å° æŒ‡ä»¤å¤š æ‰§è¡Œæ€§èƒ½æ¯”å¯„å­˜å™¨å·® ç±»åŠ è½½è¿‡ç¨‹1234567public class HelloLoader &#123; public static void main(String[] args) &#123; System.out.println(&quot;è°¢è°¢ClassLoaderåŠ è½½æˆ‘....&quot;); System.out.println(&quot;ä½ çš„å¤§æ©å¤§å¾·ï¼Œæˆ‘ä¸‹è¾ˆå­å†æŠ¥ï¼&quot;); &#125;&#125; å®ƒçš„åŠ è½½è¿‡ç¨‹æ˜¯æ€Žä¹ˆæ ·çš„å‘¢? æ‰§è¡Œ main() æ–¹æ³•ï¼ˆé™æ€æ–¹æ³•ï¼‰å°±éœ€è¦å…ˆåŠ è½½mainæ–¹æ³•æ‰€åœ¨ç±» HelloLoader åŠ è½½æˆåŠŸï¼Œåˆ™è¿›è¡Œé“¾æŽ¥ã€åˆå§‹åŒ–ç­‰æ“ä½œã€‚å®ŒæˆåŽè°ƒç”¨ HelloLoader ç±»ä¸­çš„é™æ€æ–¹æ³• main åŠ è½½å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ å®Œæ•´çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š åŠ è½½é˜¶æ®µåŠ è½½ï¼š é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåèŽ·å–å®šä¹‰æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æž„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æž„ åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»çš„å„ç§æ•°æ®çš„è®¿é—®å…¥å£ åŠ è½½classæ–‡ä»¶çš„æ–¹å¼ï¼š ä»Žæœ¬åœ°ç³»ç»Ÿä¸­ç›´æŽ¥åŠ è½½ é€šè¿‡ç½‘ç»œèŽ·å–ï¼Œå…¸åž‹åœºæ™¯ï¼šWeb Applet ä»ŽzipåŽ‹ç¼©åŒ…ä¸­è¯»å–ï¼Œæˆä¸ºæ—¥åŽjarã€waræ ¼å¼çš„åŸºç¡€ è¿è¡Œæ—¶è®¡ç®—ç”Ÿæˆï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯ï¼šåŠ¨æ€ä»£ç†æŠ€æœ¯ ç”±å…¶ä»–æ–‡ä»¶ç”Ÿæˆï¼Œå…¸åž‹åœºæ™¯ï¼šJSPåº”ç”¨ä»Žä¸“æœ‰æ•°æ®åº“ä¸­æå–.classæ–‡ä»¶ï¼Œæ¯”è¾ƒå°‘è§ ä»ŽåŠ å¯†æ–‡ä»¶ä¸­èŽ·å–ï¼Œå…¸åž‹çš„é˜²Classæ–‡ä»¶è¢«åç¼–è¯‘çš„ä¿æŠ¤æŽªæ–½ é“¾æŽ¥é˜¶æ®µé“¾æŽ¥åˆ†ä¸ºä¸‰ä¸ªå­é˜¶æ®µï¼šéªŒè¯ -&gt; å‡†å¤‡ -&gt; è§£æž ç›®çš„åœ¨äºŽç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºè¦æ±‚ï¼Œä¿è¯è¢«åŠ è½½ç±»çš„æ­£ç¡®æ€§ï¼Œä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«å®‰å…¨ ä¸»è¦åŒ…æ‹¬å››ç§éªŒè¯ï¼Œæ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå…ƒæ•°æ®éªŒè¯ï¼Œå­—èŠ‚ç éªŒè¯ï¼Œç¬¦å·å¼•ç”¨éªŒè¯ã€‚ ä¸¾ä¾‹ ä½¿ç”¨ BinaryViewerè½¯ä»¶æŸ¥çœ‹å­—èŠ‚ç æ–‡ä»¶ï¼Œå…¶å¼€å¤´å‡ä¸º CAFE BABE ï¼Œå¦‚æžœå‡ºçŽ°ä¸åˆæ³•çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œé‚£ä¹ˆå°†ä¼šéªŒè¯ä¸é€šè¿‡ã€‚ å‡†å¤‡(Prepare) ä¸ºç±»å˜é‡ï¼ˆstaticå˜é‡ï¼‰åˆ†é…å†…å­˜å¹¶ä¸”è®¾ç½®è¯¥ç±»å˜é‡çš„é»˜è®¤åˆå§‹å€¼ï¼Œå³é›¶å€¼ è¿™é‡Œä¸åŒ…å«ç”¨finalä¿®é¥°çš„staticï¼Œå› ä¸ºfinalåœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šåˆ†é…å¥½äº†é»˜è®¤å€¼ï¼Œå‡†å¤‡é˜¶æ®µä¼šæ˜¾å¼åˆå§‹åŒ– æ³¨æ„ï¼šè¿™é‡Œä¸ä¼šä¸ºå®žä¾‹å˜é‡åˆ†é…åˆå§‹åŒ–ï¼Œç±»å˜é‡ä¼šåˆ†é…åœ¨æ–¹æ³•åŒºä¸­ï¼Œè€Œå®žä¾‹å˜é‡æ˜¯ä¼šéšç€å¯¹è±¡ä¸€èµ·åˆ†é…åˆ°Javaå †ä¸­ ä»£ç ï¼šå˜é‡aåœ¨å‡†å¤‡é˜¶æ®µä¼šèµ‹åˆå§‹å€¼ï¼Œä½†ä¸æ˜¯1ï¼Œè€Œæ˜¯0ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µä¼šè¢«èµ‹å€¼ä¸º 1 12345678public class HelloApp &#123; private static int a = 1;//prepareï¼ša = 0 ---&gt; initial : a = 1 public static void main(String[] args) &#123; System.out.println(a); &#125;&#125; è§£æž(Resolve) å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨çš„è¿‡ç¨‹ äº‹å®žä¸Šï¼Œè§£æžæ“ä½œå¾€å¾€ä¼šä¼´éšç€JVMåœ¨æ‰§è¡Œå®Œåˆå§‹åŒ–ä¹‹åŽå†æ‰§è¡Œ ç¬¦å·å¼•ç”¨å°±æ˜¯ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ã€‚ç¬¦å·å¼•ç”¨çš„å­—é¢é‡å½¢å¼æ˜Žç¡®å®šä¹‰åœ¨ã€Šjavaè™šæ‹Ÿæœºè§„èŒƒã€‹çš„classæ–‡ä»¶æ ¼å¼ä¸­ã€‚ç›´æŽ¥å¼•ç”¨å°±æ˜¯ç›´æŽ¥æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆã€ç›¸å¯¹åç§»é‡æˆ–ä¸€ä¸ªé—´æŽ¥å®šä½åˆ°ç›®æ ‡çš„å¥æŸ„ è§£æžåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æŽ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æŽ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»åž‹ç­‰ã€‚å¯¹åº”å¸¸é‡æ± ä¸­çš„CONSTANT Class infoã€CONSTANT Fieldref infoã€CONSTANT Methodref infoç­‰ ç¬¦å·å¼•ç”¨ åç¼–è¯‘ class æ–‡ä»¶åŽå¯ä»¥æŸ¥çœ‹ç¬¦å·å¼•ç”¨ åˆå§‹åŒ–é˜¶æ®µç±»çš„åˆå§‹åŒ–æ—¶æœº åˆ›å»ºç±»çš„å®žä¾‹ è®¿é—®æŸä¸ªç±»æˆ–æŽ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼ è°ƒç”¨ç±»çš„é™æ€æ–¹æ³• åå°„ï¼ˆæ¯”å¦‚ï¼šClass.forName(â€œcom.atguigu.Testâ€)ï¼‰ åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±» Javaè™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«æ ‡æ˜Žä¸ºå¯åŠ¨ç±»çš„ç±» JDK7å¼€å§‹æä¾›çš„åŠ¨æ€è¯­è¨€æ”¯æŒï¼šjava.lang.invoke.MethodHandleå®žä¾‹çš„è§£æžç»“æžœREF_getStaticã€REF putStaticã€REF_invokeStaticå¥æŸ„å¯¹åº”çš„ç±»æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™åˆå§‹åŒ– é™¤äº†ä»¥ä¸Šä¸ƒç§æƒ…å†µï¼Œå…¶ä»–ä½¿ç”¨Javaç±»çš„æ–¹å¼éƒ½è¢«çœ‹ä½œæ˜¯å¯¹ç±»çš„è¢«åŠ¨ä½¿ç”¨ï¼Œéƒ½ä¸ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ï¼Œå³ä¸ä¼šæ‰§è¡Œåˆå§‹åŒ–é˜¶æ®µï¼ˆä¸ä¼šè°ƒç”¨ clinit() æ–¹æ³•å’Œ init() æ–¹æ³•ï¼‰ clinit() åˆå§‹åŒ–é˜¶æ®µå°±æ˜¯æ‰§è¡Œç±»æž„é€ å™¨æ–¹æ³•&lt;clinit&gt;()çš„è¿‡ç¨‹ æ­¤æ–¹æ³•ä¸éœ€å®šä¹‰ï¼Œæ˜¯javacç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬ä»£ç ä¸­åŒ…å«staticå˜é‡çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰clinitæ–¹æ³• &lt;clinit&gt;()æ–¹æ³•ä¸­çš„æŒ‡ä»¤æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºçŽ°çš„é¡ºåºæ‰§è¡Œ &lt;clinit&gt;()ä¸åŒäºŽç±»çš„æž„é€ å™¨ã€‚ï¼ˆå…³è”ï¼šæž„é€ å™¨æ˜¯è™šæ‹Ÿæœºè§†è§’ä¸‹çš„&lt;init&gt;()ï¼‰ è‹¥è¯¥ç±»å…·æœ‰çˆ¶ç±»ï¼ŒJVMä¼šä¿è¯å­ç±»çš„&lt;clinit&gt;()æ‰§è¡Œå‰ï¼Œçˆ¶ç±»çš„&lt;clinit&gt;()å·²ç»æ‰§è¡Œå®Œæ¯• è™šæ‹Ÿæœºå¿…é¡»ä¿è¯ä¸€ä¸ªç±»çš„&lt;clinit&gt;()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ä¸‹è¢«åŒæ­¥åŠ é” IDEA ä¸­å®‰è£… JClassLib Bytecode viewer æ’ä»¶ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹å­—èŠ‚ç ã€‚å®‰è£…è¿‡ç¨‹å¯ä»¥è‡ªè¡Œç™¾åº¦ 5è¯´æ˜Žè‹¥è¯¥ç±»å…·æœ‰çˆ¶ç±»ï¼ŒJVMä¼šä¿è¯å­ç±»çš„&lt;clinit&gt;()æ‰§è¡Œå‰ï¼Œçˆ¶ç±»çš„&lt;clinit&gt;()å·²ç»æ‰§è¡Œå®Œæ¯• å¦‚ä¸Šä»£ç ï¼ŒåŠ è½½æµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œæ‰§è¡Œ main() æ–¹æ³•éœ€è¦åŠ è½½ ClinitTest1 ç±» èŽ·å– Son.B é™æ€å˜é‡ï¼Œéœ€è¦åŠ è½½ Son ç±» Son ç±»çš„çˆ¶ç±»æ˜¯ Father ç±»ï¼Œæ‰€ä»¥éœ€è¦å…ˆæ‰§è¡Œ Father ç±»çš„åŠ è½½ï¼Œå†æ‰§è¡Œ Son ç±»çš„åŠ è½½ 6è¯´æ˜Žè™šæ‹Ÿæœºå¿…é¡»ä¿è¯ä¸€ä¸ªç±»çš„&lt;clinit&gt;()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ä¸‹è¢«åŒæ­¥åŠ é” 1234567891011121314151617181920212223242526public class DeadThreadTest &#123; public static void main(String[] args) &#123; Runnable r = () -&gt; &#123; System.out.println(Thread.currentThread().getName() + &quot;å¼€å§‹&quot;); DeadThread dead = new DeadThread(); System.out.println(Thread.currentThread().getName() + &quot;ç»“æŸ&quot;); &#125;; Thread t1 = new Thread(r,&quot;çº¿ç¨‹1&quot;); Thread t2 = new Thread(r,&quot;çº¿ç¨‹2&quot;); t1.start(); t2.start(); &#125;&#125;class DeadThread&#123; static&#123; if(true)&#123; System.out.println(Thread.currentThread().getName() + &quot;åˆå§‹åŒ–å½“å‰ç±»&quot;); while(true)&#123; &#125; &#125; &#125;&#125; 12345çº¿ç¨‹2å¼€å§‹çº¿ç¨‹1å¼€å§‹çº¿ç¨‹2åˆå§‹åŒ–å½“å‰ç±»&#x2F;ç„¶åŽç¨‹åºå¡æ­»äº† ç¨‹åºå¡æ­»ï¼Œåˆ†æžåŽŸå› ï¼š ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶åŽ»åŠ è½½ DeadThread ç±»ï¼Œè€Œ DeadThread ç±»ä¸­é™æ€ä»£ç å—ä¸­æœ‰ä¸€å¤„æ­»å¾ªçŽ¯ å…ˆåŠ è½½ DeadThread ç±»çš„çº¿ç¨‹æŠ¢åˆ°äº†åŒæ­¥é”ï¼Œç„¶åŽåœ¨ç±»çš„é™æ€ä»£ç å—ä¸­æ‰§è¡Œæ­»å¾ªçŽ¯ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…åŒæ­¥é”çš„é‡Šæ”¾ æ‰€ä»¥æ— è®ºå“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œ DeadThread ç±»çš„åŠ è½½ï¼Œå¦å¤–ä¸€ä¸ªç±»ä¹Ÿä¸ä¼šç»§ç»­æ‰§è¡Œã€‚ï¼ˆä¸€ä¸ªç±»åªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼‰ ç±»åŠ è½½å™¨çš„åˆ†ç±»æ¦‚è¿° JVMä¸¥æ ¼æ¥è®²æ”¯æŒä¸¤ç§ç±»åž‹çš„ç±»åŠ è½½å™¨ ã€‚åˆ†åˆ«ä¸ºå¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰å’Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ˆUser-Defined ClassLoaderï¼‰ ä»Žæ¦‚å¿µä¸Šæ¥è®²ï¼Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ä¸€èˆ¬æŒ‡çš„æ˜¯ç¨‹åºä¸­ç”±å¼€å‘äººå‘˜è‡ªå®šä¹‰çš„ä¸€ç±»ç±»åŠ è½½å™¨ï¼Œä½†æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒå´æ²¡æœ‰è¿™ä¹ˆå®šä¹‰ï¼Œè€Œæ˜¯å°†æ‰€æœ‰æ´¾ç”ŸäºŽæŠ½è±¡ç±»ClassLoaderçš„ç±»åŠ è½½å™¨éƒ½åˆ’åˆ†ä¸ºè‡ªå®šä¹‰ç±»åŠ è½½å™¨ æ— è®ºç±»åŠ è½½å™¨çš„ç±»åž‹å¦‚ä½•åˆ’åˆ†ï¼Œåœ¨ç¨‹åºä¸­æˆ‘ä»¬æœ€å¸¸è§çš„ç±»åŠ è½½å™¨å§‹ç»ˆåªæœ‰3ä¸ªï¼Œå¦‚ä¸‹æ‰€ç¤º 1234567891011121314151617181920212223242526public class ClassLoaderTest &#123; public static void main(String[] args) &#123; //èŽ·å–ç³»ç»Ÿç±»åŠ è½½å™¨ ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader(); System.out.println(systemClassLoader);//sun.misc.Launcher$AppClassLoader@18b4aac2 //èŽ·å–å…¶ä¸Šå±‚ï¼šæ‰©å±•ç±»åŠ è½½å™¨ ClassLoader extClassLoader = systemClassLoader.getParent(); System.out.println(extClassLoader);//sun.misc.Launcher$ExtClassLoader@1540e19d //èŽ·å–å…¶ä¸Šå±‚ï¼šèŽ·å–ä¸åˆ°å¼•å¯¼ç±»åŠ è½½å™¨ ClassLoader bootstrapClassLoader = extClassLoader.getParent(); System.out.println(bootstrapClassLoader);//null //å¯¹äºŽç”¨æˆ·è‡ªå®šä¹‰ç±»æ¥è¯´ï¼šé»˜è®¤ä½¿ç”¨ç³»ç»Ÿç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ ClassLoader classLoader = ClassLoaderTest.class.getClassLoader(); System.out.println(classLoader);//sun.misc.Launcher$AppClassLoader@18b4aac2 //Stringç±»ä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½çš„ã€‚---&gt; Javaçš„æ ¸å¿ƒç±»åº“éƒ½æ˜¯ä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½çš„ã€‚ ClassLoader classLoader1 = String.class.getClassLoader(); System.out.println(classLoader1);//null &#125;&#125; æˆ‘ä»¬å°è¯•èŽ·å–å¼•å¯¼ç±»åŠ è½½å™¨ï¼ŒèŽ·å–åˆ°çš„å€¼ä¸º null ï¼Œè¿™å¹¶ä¸ä»£è¡¨å¼•å¯¼ç±»åŠ è½½å™¨ä¸å­˜åœ¨ï¼Œå› ä¸ºå¼•å¯¼ç±»åŠ è½½å™¨å³ C/C++ è¯­è¨€ï¼Œæˆ‘ä»¬èŽ·å–ä¸åˆ° ä¸¤æ¬¡èŽ·å–ç³»ç»Ÿç±»åŠ è½½å™¨çš„å€¼éƒ½ç›¸åŒï¼šsun.misc.Launcher$AppClassLoader@18b4aac2 ï¼Œè¿™è¯´æ˜Žç³»ç»Ÿç±»åŠ è½½å™¨æ˜¯å…¨å±€å”¯ä¸€çš„ åŒäº²å§”æ´¾æœºåˆ¶åŒäº²å§”æ´¾æœºåˆ¶åŽŸç†avaè™šæ‹Ÿæœºå¯¹classæ–‡ä»¶é‡‡ç”¨çš„æ˜¯æŒ‰éœ€åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“éœ€è¦ä½¿ç”¨è¯¥ç±»æ—¶æ‰ä¼šå°†å®ƒçš„classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ç”Ÿæˆclasså¯¹è±¡ã€‚è€Œä¸”åŠ è½½æŸä¸ªç±»çš„classæ–‡ä»¶æ—¶ï¼ŒJavaè™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ï¼Œå³æŠŠè¯·æ±‚äº¤ç”±çˆ¶ç±»å¤„ç†ï¼Œå®ƒæ˜¯ä¸€ç§ä»»åŠ¡å§”æ´¾æ¨¡å¼ å¦‚æžœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆåŽ»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨åŽ»æ‰§è¡Œï¼› å¦‚æžœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼› å¦‚æžœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›žï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±åŽ»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ã€‚ çˆ¶ç±»åŠ è½½å™¨ä¸€å±‚ä¸€å±‚å¾€ä¸‹åˆ†é…ä»»åŠ¡ï¼Œå¦‚æžœå­ç±»åŠ è½½å™¨èƒ½åŠ è½½ï¼Œåˆ™åŠ è½½æ­¤ç±»ï¼Œå¦‚æžœå°†åŠ è½½ä»»åŠ¡åˆ†é…è‡³ç³»ç»Ÿç±»åŠ è½½å™¨ä¹Ÿæ— æ³•åŠ è½½æ­¤ç±»ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ åŒäº²å§”æ´¾æœºåˆ¶ä»£ç æ¼”ç¤ºä¸¾ä¾‹11ã€æˆ‘ä»¬è‡ªå·±å»ºç«‹ä¸€ä¸ª java.lang.String ç±»ï¼Œå†™ä¸Š static ä»£ç å— 123456public class String &#123; // static&#123; System.out.println(&quot;æˆ‘æ˜¯è‡ªå®šä¹‰çš„Stringç±»çš„é™æ€ä»£ç å—&quot;); &#125;&#125; 2ã€åœ¨å¦å¤–çš„ç¨‹åºä¸­åŠ è½½ String ç±»ï¼Œçœ‹çœ‹åŠ è½½çš„ String ç±»æ˜¯ JDK è‡ªå¸¦çš„ String ç±»ï¼Œè¿˜æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ String ç±» 12345678910public class StringTest &#123; public static void main(String[] args) &#123; java.lang.String str = new java.lang.String(); System.out.println(&quot;hello,atguigu.com&quot;); StringTest test = new StringTest(); System.out.println(test.getClass().getClassLoader()); &#125;&#125; 12hello,atguigu.comsun.misc.Launcher$AppClassLoader@18b4aac2 ç¨‹åºå¹¶æ²¡æœ‰è¾“å‡ºæˆ‘ä»¬é™æ€ä»£ç å—ä¸­çš„å†…å®¹ï¼Œå¯è§ä»ç„¶åŠ è½½çš„æ˜¯ JDK è‡ªå¸¦çš„ String ç±»ã€‚ æŠŠåˆšåˆšçš„ç±»æ”¹ä¸€ä¸‹ 1234567891011package java.lang;public class String &#123; // static&#123; System.out.println(&quot;æˆ‘æ˜¯è‡ªå®šä¹‰çš„Stringç±»çš„é™æ€ä»£ç å—&quot;); &#125; //é”™è¯¯: åœ¨ç±» java.lang.String ä¸­æ‰¾ä¸åˆ° main æ–¹æ³• public static void main(String[] args) &#123; System.out.println(&quot;hello,String&quot;); &#125;&#125; ç”±äºŽåŒäº²å§”æ´¾æœºåˆ¶ä¸€ç›´æ‰¾çˆ¶ç±»ï¼Œæ‰€ä»¥æœ€åŽæ‰¾åˆ°äº†Bootstrap ClassLoaderï¼ŒBootstrap ClassLoaderæ‰¾åˆ°çš„æ˜¯ JDK è‡ªå¸¦çš„ String ç±»ï¼Œåœ¨é‚£ä¸ªStringç±»ä¸­å¹¶æ²¡æœ‰ main() æ–¹æ³•ï¼Œæ‰€ä»¥å°±æŠ¥äº†ä¸Šé¢çš„é”™è¯¯ã€‚ 123456789package java.lang;public class ShkStart &#123; public static void main(String[] args) &#123; System.out.println(&quot;hello!&quot;); &#125;&#125; 1234567891011121314151617java.lang.SecurityException: Prohibited package name: java.lang at java.lang.ClassLoader.preDefineClass(ClassLoader.java:662) at java.lang.ClassLoader.defineClass(ClassLoader.java:761) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:467) at java.net.URLClassLoader.access$100(URLClassLoader.java:73) at java.net.URLClassLoader$1.run(URLClassLoader.java:368) at java.net.URLClassLoader$1.run(URLClassLoader.java:362) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:361) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495)Error: A JNI error has occurred, please check your installation and try againException in thread &quot;main&quot; Process finished with exit code 1 å³ä½¿ç±»åæ²¡æœ‰é‡å¤ï¼Œä¹Ÿç¦æ­¢ä½¿ç”¨java.langè¿™ç§åŒ…åã€‚è¿™æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ ä¸¾ä¾‹3å½“æˆ‘ä»¬åŠ è½½jdbc.jar ç”¨äºŽå®žçŽ°æ•°æ®åº“è¿žæŽ¥çš„æ—¶å€™ æˆ‘ä»¬çŽ°åœ¨ç¨‹åºä¸­éœ€è¦ç”¨åˆ°SPIæŽ¥å£ï¼Œè€ŒSPIæŽ¥å£å±žäºŽrt.jaråŒ…ä¸­Javaæ ¸å¿ƒapi ç„¶åŽä½¿ç”¨åŒæ¸…å§”æ´¾æœºåˆ¶ï¼Œå¼•å¯¼ç±»åŠ è½½å™¨æŠŠrt.jaråŒ…åŠ è½½è¿›æ¥ï¼Œè€Œrt.jaråŒ…ä¸­çš„SPIå­˜åœ¨ä¸€äº›æŽ¥å£ï¼ŒæŽ¥å£æˆ‘ä»¬å°±éœ€è¦å…·ä½“çš„å®žçŽ°ç±»äº† å…·ä½“çš„å®žçŽ°ç±»å°±æ¶‰åŠåˆ°äº†æŸäº›ç¬¬ä¸‰æ–¹çš„jaråŒ…äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬åŠ è½½SPIçš„å®žçŽ°ç±»jdbc.jaråŒ…ã€é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ jdbc.jaræ˜¯åŸºäºŽSPIæŽ¥å£è¿›è¡Œå®žçŽ°çš„ã€‘ ç¬¬ä¸‰æ–¹çš„jaråŒ…ä¸­çš„ç±»å±žäºŽç³»ç»Ÿç±»åŠ è½½å™¨æ¥åŠ è½½ ä»Žè¿™é‡Œé¢å°±å¯ä»¥çœ‹åˆ°SPIæ ¸å¿ƒæŽ¥å£ç”±å¼•å¯¼ç±»åŠ è½½å™¨æ¥åŠ è½½ï¼ŒSPIå…·ä½“å®žçŽ°ç±»ç”±ç³»ç»Ÿç±»åŠ è½½å™¨æ¥åŠ è½½ åŒäº²å§”æ´¾æœºåˆ¶ä¼˜åŠ¿é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒåŒäº²æœºåˆ¶å¯ä»¥ é¿å…ç±»çš„é‡å¤åŠ è½½ ä¿æŠ¤ç¨‹åºå®‰å…¨ï¼Œé˜²æ­¢æ ¸å¿ƒAPIè¢«éšæ„ç¯¡æ”¹ è‡ªå®šä¹‰ç±»ï¼šè‡ªå®šä¹‰java.lang.String æ²¡æœ‰è¢«åŠ è½½ã€‚ è‡ªå®šä¹‰ç±»ï¼šjava.lang.ShkStartï¼ˆæŠ¥é”™ï¼šé˜»æ­¢åˆ›å»º java.langå¼€å¤´çš„ç±»ï¼‰ æ²™ç®±å®‰å…¨æœºåˆ¶ è‡ªå®šä¹‰Stringç±»æ—¶ï¼šåœ¨åŠ è½½è‡ªå®šä¹‰Stringç±»çš„æ—¶å€™ä¼šçŽ‡å…ˆä½¿ç”¨å¼•å¯¼ç±»åŠ è½½å™¨åŠ è½½ï¼Œè€Œå¼•å¯¼ç±»åŠ è½½å™¨åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ä¼šå…ˆåŠ è½½jdkè‡ªå¸¦çš„æ–‡ä»¶ï¼ˆrt.jaråŒ…ä¸­java.lang.String.classï¼‰ï¼ŒæŠ¥é”™ä¿¡æ¯è¯´æ²¡æœ‰mainæ–¹æ³•ï¼Œå°±æ˜¯å› ä¸ºåŠ è½½çš„æ˜¯rt.jaråŒ…ä¸­çš„Stringç±»ã€‚ è¿™æ ·å¯ä»¥ä¿è¯å¯¹javaæ ¸å¿ƒæºä»£ç çš„ä¿æŠ¤ï¼Œè¿™å°±æ˜¯æ²™ç®±å®‰å…¨æœºåˆ¶ã€‚ å…¶ä»–å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªclasså¯¹è±¡æ˜¯å¦ç›¸åŒï¼Ÿåœ¨JVMä¸­è¡¨ç¤ºä¸¤ä¸ªclasså¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªå¿…è¦æ¡ä»¶ï¼š ç±»çš„å®Œæ•´ç±»åå¿…é¡»ä¸€è‡´ï¼ŒåŒ…æ‹¬åŒ…å åŠ è½½è¿™ä¸ªç±»çš„ClassLoaderï¼ˆæŒ‡ClassLoaderå®žä¾‹å¯¹è±¡ï¼‰å¿…é¡»ç›¸åŒ æ¢å¥è¯è¯´ï¼Œåœ¨JVMä¸­ï¼Œå³ä½¿è¿™ä¸¤ä¸ªç±»å¯¹è±¡ï¼ˆclasså¯¹è±¡ï¼‰æ¥æºåŒä¸€ä¸ªClassæ–‡ä»¶ï¼Œè¢«åŒä¸€ä¸ªè™šæ‹Ÿæœºæ‰€åŠ è½½ï¼Œä½†åªè¦åŠ è½½å®ƒä»¬çš„ClassLoaderå®žä¾‹å¯¹è±¡ä¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å¯¹è±¡ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ å¯¹ç±»åŠ è½½å™¨çš„å¼•ç”¨ JVMå¿…é¡»çŸ¥é“ä¸€ä¸ªç±»åž‹æ˜¯ç”±å¯åŠ¨åŠ è½½å™¨åŠ è½½çš„è¿˜æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ å¦‚æžœä¸€ä¸ªç±»åž‹æ˜¯ç”±ç”¨æˆ·ç±»åŠ è½½å™¨åŠ è½½çš„ï¼Œé‚£ä¹ˆJVMä¼šå°†è¿™ä¸ªç±»åŠ è½½å™¨çš„ä¸€ä¸ªå¼•ç”¨ä½œä¸ºç±»åž‹ä¿¡æ¯çš„ä¸€éƒ¨åˆ†ä¿å­˜åœ¨æ–¹æ³•åŒºä¸­ å½“è§£æžä¸€ä¸ªç±»åž‹åˆ°å¦ä¸€ä¸ªç±»åž‹çš„å¼•ç”¨çš„æ—¶å€™ï¼ŒJVMéœ€è¦ä¿è¯è¿™ä¸¤ä¸ªç±»åž‹çš„ç±»åŠ è½½å™¨æ˜¯ç›¸åŒçš„ï¼ˆåŽé¢è®²ï¼‰ https://youthlql.gitee.io/javayouth/#/?id=java","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"}]},{"title":"AnimPropertyView","slug":"AnimPropertyView","date":"2019-12-29T14:23:37.000Z","updated":"2021-08-19T11:11:43.546Z","comments":true,"path":"2019/12/29/AnimPropertyView/","link":"","permalink":"https://noteforme.github.io/2019/12/29/AnimPropertyView/","excerpt":"","text":"ä¼°å€¼å™¨ï¼ˆTypeEvaluatorï¼‰è®¾ç½®åŠ¨ç”» å¦‚ä½•ä»Žåˆå§‹å€¼ è¿‡æ¸¡åˆ° ç»“æŸå€¼ çš„é€»è¾‘ æ’å€¼å™¨ï¼ˆInterpolatorï¼‰å†³å®š å€¼ çš„å˜åŒ–æ¨¡å¼ï¼ˆåŒ€é€Ÿã€åŠ é€Ÿï¼‰ ä¼°å€¼å™¨ï¼ˆTypeEvaluatorï¼‰å†³å®š å€¼ çš„å…·ä½“å˜åŒ–æ•°å€¼ ValueAnimatorå®žçŽ°åŽŸç† : é€šè¿‡ä¸æ–­æŽ§åˆ¶ å€¼çš„å˜åŒ–ï¼Œ å†ä¸æ–­èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ï¼Œä»Žè€Œå®žçŽ°åŠ¨ç”»çš„æ•ˆæžœã€‚ ä»Žä¸Šé¢åŽŸç†å¯ä»¥çœ‹å‡ºï¼šValueAnimatorç±»ä¸­æœ‰3ä¸ªé‡è¦æ–¹æ³•ï¼š ValueAnimator.ofIntï¼ˆint valuesï¼‰ ValueAnimator.ofFloatï¼ˆfloat valuesï¼‰ ValueAnimator.ofObjectï¼ˆint valuesï¼‰ ValueAnimator.ofIntï¼ˆint valuesï¼‰å°†åˆå§‹å€¼ ä»¥æ•´åž‹æ•°å€¼çš„å½¢å¼ è¿‡æ¸¡åˆ°ç»“æŸå€¼ å³ä¼°å€¼å™¨æ˜¯æ•´åž‹ä¼°å€¼å™¨ - IntEvaluator æ¨¡æ¿ä»£ç å®žé™…å¼€å‘ä¸­ï¼Œå»ºè®®ä½¿ç”¨Javaä»£ç å®žçŽ°å±žæ€§åŠ¨ç”»ï¼šå› ä¸ºå¾ˆå¤šæ—¶å€™å±žæ€§çš„èµ·å§‹å€¼æ˜¯æ— æ³•æå‰ç¡®å®šçš„ï¼ˆæ— æ³•ä½¿ç”¨XMLè®¾ç½®ï¼‰ï¼Œè¿™å°±éœ€è¦åœ¨Javaä»£ç é‡ŒåŠ¨æ€èŽ·å–ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465// æ­¥éª¤1ï¼šè®¾ç½®åŠ¨ç”»å±žæ€§çš„åˆå§‹å€¼ &amp; ç»“æŸå€¼ValueAnimator anim = ValueAnimator.ofInt(0, 3); // ofIntï¼ˆï¼‰ä½œç”¨æœ‰ä¸¤ä¸ª // 1. åˆ›å»ºåŠ¨ç”»å®žä¾‹ // 2. å°†ä¼ å…¥çš„å¤šä¸ªIntå‚æ•°è¿›è¡Œå¹³æ»‘è¿‡æ¸¡:æ­¤å¤„ä¼ å…¥0å’Œ1,è¡¨ç¤ºå°†å€¼ä»Ž0å¹³æ»‘è¿‡æ¸¡åˆ°1 // å¦‚æžœä¼ å…¥äº†3ä¸ªIntå‚æ•° a,b,c ,åˆ™æ˜¯å…ˆä»Žaå¹³æ»‘è¿‡æ¸¡åˆ°b,å†ä»Žbå¹³æ»‘è¿‡æ¸¡åˆ°Cï¼Œä»¥æ­¤ç±»æŽ¨ // ValueAnimator.ofInt()å†…ç½®äº†æ•´åž‹ä¼°å€¼å™¨,ç›´æŽ¥é‡‡ç”¨é»˜è®¤çš„.ä¸éœ€è¦è®¾ç½®ï¼Œå³é»˜è®¤è®¾ç½®äº†å¦‚ä½•ä»Žåˆå§‹å€¼ è¿‡æ¸¡åˆ° ç»“æŸå€¼ // å…³äºŽè‡ªå®šä¹‰æ’å€¼å™¨æˆ‘å°†åœ¨ä¸‹èŠ‚è¿›è¡Œè®²è§£ // ä¸‹é¢çœ‹çœ‹ofInt()çš„æºç åˆ†æž -&gt;&gt;å…³æ³¨1 // æ­¥éª¤2ï¼šè®¾ç½®åŠ¨ç”»çš„æ’­æ”¾å„ç§å±žæ€§ anim.setDuration(500); // è®¾ç½®åŠ¨ç”»è¿è¡Œçš„æ—¶é•¿ anim.setStartDelay(500); // è®¾ç½®åŠ¨ç”»å»¶è¿Ÿæ’­æ”¾æ—¶é—´ anim.setRepeatCount(0); // è®¾ç½®åŠ¨ç”»é‡å¤æ’­æ”¾æ¬¡æ•° = é‡æ”¾æ¬¡æ•°+1 // åŠ¨ç”»æ’­æ”¾æ¬¡æ•° = infiniteæ—¶,åŠ¨ç”»æ— é™é‡å¤ anim.setRepeatMode(ValueAnimator.RESTART); // è®¾ç½®é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ // ValueAnimator.RESTART(é»˜è®¤):æ­£åºé‡æ”¾ // ValueAnimator.REVERSE:å€’åºå›žæ”¾ // æ­¥éª¤3ï¼šå°†æ”¹å˜çš„å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§å€¼ï¼šé€šè¿‡åŠ¨ç”»çš„æ›´æ–°ç›‘å¬å™¨ // è®¾ç½® å€¼çš„æ›´æ–°ç›‘å¬å™¨ // å³ï¼šå€¼æ¯æ¬¡æ”¹å˜ã€å˜åŒ–ä¸€æ¬¡,è¯¥æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; int currentValue = (Integer) animation.getAnimatedValue(); // èŽ·å¾—æ”¹å˜åŽçš„å€¼ System.out.println(currentValue); // è¾“å‡ºæ”¹å˜åŽçš„å€¼ // æ­¥éª¤4ï¼šå°†æ”¹å˜åŽçš„å€¼èµ‹ç»™å¯¹è±¡çš„å±žæ€§å€¼ï¼Œä¸‹é¢ä¼šè¯¦ç»†è¯´æ˜Ž View.setpropertyï¼ˆcurrentValueï¼‰ï¼› // æ­¥éª¤5ï¼šåˆ·æ–°è§†å›¾ï¼Œå³é‡æ–°ç»˜åˆ¶ï¼Œä»Žè€Œå®žçŽ°åŠ¨ç”»æ•ˆæžœ View.requestLayout(); &#125; &#125;); anim.start(); // å¯åŠ¨åŠ¨ç”» &#125;// å…³æ³¨1ï¼šofIntï¼ˆï¼‰æºç åˆ†æž public static ValueAnimator ofInt(int... values) &#123; // å…è®¸ä¼ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªIntå‚æ•° // 1. è¾“å…¥ä¸€ä¸ªçš„æƒ…å†µï¼ˆå¦‚aï¼‰ï¼šä»Ž0è¿‡æ¸¡åˆ°aï¼› // 2. è¾“å…¥å¤šä¸ªçš„æƒ…å†µï¼ˆå¦‚aï¼Œbï¼Œcï¼‰ï¼šå…ˆä»Žaå¹³æ»‘è¿‡æ¸¡åˆ°bï¼Œå†ä»Žbå¹³æ»‘è¿‡æ¸¡åˆ°C ValueAnimator anim = new ValueAnimator(); // åˆ›å»ºåŠ¨ç”»å¯¹è±¡ anim.setIntValues(values); // å°†ä¼ å…¥çš„å€¼èµ‹å€¼ç»™åŠ¨ç”»å¯¹è±¡ return anim; &#125; XMLè®¾ç½®123456789101112131415// ValueAnimatoré‡‡ç”¨&lt;animator&gt; æ ‡ç­¾&lt;animator xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:valueFrom=&quot;0&quot; // åˆå§‹å€¼ android:valueTo=&quot;100&quot; // ç»“æŸå€¼ android:valueType=&quot;intType&quot; // å˜åŒ–å€¼ç±»åž‹ ï¼šfloatType &amp; intType android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœ android:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰ android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue android:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalse android:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrue android:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart| android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤ android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®²/&gt; 12345678Animator animator = AnimatorInflater.loadAnimator(context, R.animator.set_animation); // è½½å…¥XMLåŠ¨ç”»animator.setTarget(view); // è®¾ç½®åŠ¨ç”»å¯¹è±¡animator.start(); // å¯åŠ¨åŠ¨ç”» å®žæˆ˜æŒ‰é’®çš„å®½åº¦ä»Ž 200px æ”¾å¤§åˆ° 500px 123456&lt;Button android:id=&quot;@+id/bt_value_anim&quot; android:layout_width=&quot;200px&quot; android:layout_height=&quot;wrap_content&quot; android:layout_centerInParent=&quot;true&quot; android:text=&quot;åŠ¨ç”»&quot; /&gt; ï¼Ÿä»£ç è®¾ç½®åˆå§‹å€¼ 12345678910111213141516171819202122232425// æ­¥éª¤1ï¼šè®¾ç½®å±žæ€§æ•°å€¼çš„åˆå§‹å€¼(æ­¤å¤„åœ¨xmlä¸­200) &amp; ç»“æŸå€¼(600)val valueAnimator = ValueAnimator.ofInt(bt_value_anim.layoutParams.width, 600) // ValueAnimator.ofInt()å†…ç½®äº†æ•´åž‹ä¼°å€¼å™¨,ç›´æŽ¥é‡‡ç”¨é»˜è®¤çš„.ä¸éœ€è¦è®¾ç½® // å³é»˜è®¤è®¾ç½®äº†å¦‚ä½•ä»Žåˆå§‹å€¼200 è¿‡æ¸¡åˆ° ç»“æŸå€¼500// æ­¥éª¤2ï¼šè®¾ç½®åŠ¨ç”»çš„æ’­æ”¾å„ç§å±žæ€§valueAnimator.duration = 2000// æ­¥éª¤3ï¼šå°†æ”¹å˜çš„å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§å€¼ï¼šé€šè¿‡åŠ¨ç”»çš„æ›´æ–°ç›‘å¬å™¨ // è®¾ç½® å€¼çš„æ›´æ–°ç›‘å¬å™¨ // å³ï¼šå€¼æ¯æ¬¡æ”¹å˜ã€å˜åŒ–ä¸€æ¬¡,è¯¥æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡valueAnimator.addUpdateListener &#123; val currentValue = it.animatedValue // èŽ·å¾—æ¯æ¬¡å˜åŒ–åŽçš„å±žæ€§å€¼ Timber.d(&quot;currentValue $currentValue&quot;) // æ¯æ¬¡å€¼å˜åŒ–æ—¶ï¼Œå°†å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ bt_value_anim.layoutParams.width = currentValue as Int // å³å°†æ¯æ¬¡å˜åŒ–åŽçš„å€¼ èµ‹ ç»™æŒ‰é’®çš„å®½åº¦ï¼Œè¿™æ ·å°±å®žçŽ°äº†æŒ‰é’®å®½åº¦å±žæ€§çš„åŠ¨æ€å˜åŒ– // æ­¥éª¤4ï¼šåˆ·æ–°è§†å›¾ï¼Œå³é‡æ–°ç»˜åˆ¶ï¼Œä»Žè€Œå®žçŽ°åŠ¨ç”»æ•ˆæžœ bt_value_anim.requestLayout()&#125;valueAnimator.start() æµ®ç‚¹åž‹ï¼šValueAnimator.oFloatï¼ˆï¼‰å°†åˆå§‹å€¼ ä»¥æµ®ç‚¹åž‹æ•°å€¼çš„å½¢å¼ è¿‡æ¸¡åˆ°ç»“æŸå€¼ ValueAnimator.oFloatï¼ˆï¼‰é‡‡ç”¨é»˜è®¤çš„æµ®ç‚¹åž‹ä¼°å€¼å™¨ (FloatEvaluator) ValueAnimator.ofIntï¼ˆï¼‰é‡‡ç”¨é»˜è®¤çš„æ•´åž‹ä¼°å€¼å™¨ï¼ˆIntEvaluatorï¼‰ åœ¨ä½¿ç”¨ä¸Šå®Œå…¨æ²¡æœ‰åŒºåˆ« ValueAnimator.ofObjectï¼ˆï¼‰å°†åˆå§‹å€¼ ä»¥å¯¹è±¡çš„å½¢å¼ è¿‡æ¸¡åˆ°ç»“æŸå€¼ å³é€šè¿‡æ“ä½œ å¯¹è±¡ å®žçŽ°åŠ¨ç”»æ•ˆæžœ å®žæˆ˜å¯ä»¥çœ‹åˆ° ValueAnimator.ofObjectï¼ˆï¼‰çš„æœ¬è´¨è¿˜æ˜¯æ“ä½œ å€¼,å°†å¤šä¸ªå€¼å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œçš„æ–¹å¼ï¼ŒåŒæ—¶å¯¹å¤šä¸ªå€¼ä¸€èµ·æ“ä½œ PointEvaluator 12345678910111213141516class PointEvaluator : TypeEvaluator&lt;Point&gt; &#123; override fun evaluate(fraction: Float, startValue: Point?, endValue: Point?): Point &#123; // å°†åŠ¨ç”»åˆå§‹å€¼startValue å’Œ åŠ¨ç”»ç»“æŸå€¼endValue å¼ºåˆ¶ç±»åž‹è½¬æ¢æˆPointå¯¹è±¡ val startPoint = startValue val endPoint = endValue // æ ¹æ®fractionæ¥è®¡ç®—å½“å‰åŠ¨ç”»çš„xå’Œyçš„å€¼ val x = startPoint!!.x + fraction * (endPoint!!.x - startPoint!!.x) val y = startPoint!!.y + fraction * (endPoint!!.y - startPoint!!.y) // å°†è®¡ç®—åŽçš„åæ ‡å°è£…åˆ°ä¸€ä¸ªæ–°çš„Pointå¯¹è±¡ä¸­å¹¶è¿”å›ž val point = Point(x,y) return point &#125;&#125; Point 1class Point(val x: Float, val y: Float) MyView 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374class MyView : View &#123; constructor(context: Context?, attrs: AttributeSet?) : super(context, attrs) // è®¾ç½®éœ€è¦ç”¨åˆ°çš„å˜é‡ val RADIUS = 70f // åœ†çš„åŠå¾„ = 70 private var currentPoint // å½“å‰ç‚¹åæ ‡ : Point? = null val mPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply &#123; color = Color.BLUE &#125; init &#123; &#125; override fun onDraw(canvas: Canvas?) &#123; // å¦‚æžœå½“å‰ç‚¹åæ ‡ä¸ºç©º(å³ç¬¬ä¸€æ¬¡æ‰§è¡Œ) if (currentPoint == null) &#123; currentPoint = Point(RADIUS, RADIUS) val x = currentPoint?.x val y = currentPoint?.y if (x != null &amp;&amp; y != null) &#123; canvas?.drawCircle(x, y, RADIUS, mPaint) &#125; // (é‡ç‚¹å…³æ³¨)å°†å±žæ€§åŠ¨ç”»ä½œç”¨åˆ°Viewä¸­ // æ­¥éª¤1:åˆ›å»ºåˆå§‹åŠ¨ç”»æ—¶çš„å¯¹è±¡ç‚¹ &amp; ç»“æŸåŠ¨ç”»æ—¶çš„å¯¹è±¡ç‚¹ // (é‡ç‚¹å…³æ³¨)å°†å±žæ€§åŠ¨ç”»ä½œç”¨åˆ°Viewä¸­ // æ­¥éª¤1:åˆ›å»ºåˆå§‹åŠ¨ç”»æ—¶çš„å¯¹è±¡ç‚¹ &amp; ç»“æŸåŠ¨ç”»æ—¶çš„å¯¹è±¡ç‚¹ val startPoint = Point(RADIUS, RADIUS) // åˆå§‹ç‚¹ä¸ºåœ†å¿ƒ(70,70) val endPoint = Point(700f, 1000f) // ç»“æŸç‚¹ä¸º(700,1000) // æ­¥éª¤2:åˆ›å»ºåŠ¨ç”»å¯¹è±¡ &amp; è®¾ç½®åˆå§‹å€¼ å’Œ ç»“æŸå€¼ val anim = ValueAnimator.ofObject(PointEvaluator(), startPoint, endPoint) // å‚æ•°è¯´æ˜Ž // å‚æ•°1ï¼šTypeEvaluator ç±»åž‹å‚æ•° - ä½¿ç”¨è‡ªå®šä¹‰çš„PointEvaluator(å®žçŽ°äº†TypeEvaluatoræŽ¥å£) // å‚æ•°2ï¼šåˆå§‹åŠ¨ç”»çš„å¯¹è±¡ç‚¹ // å‚æ•°3ï¼šç»“æŸåŠ¨ç”»çš„å¯¹è±¡ç‚¹ // æ­¥éª¤3ï¼šè®¾ç½®åŠ¨ç”»å‚æ•° anim.duration = 5000 // è®¾ç½® å€¼çš„æ›´æ–°ç›‘å¬å™¨ // å³æ¯å½“åæ ‡å€¼ï¼ˆPointå¯¹è±¡ï¼‰æ›´æ–°ä¸€æ¬¡,è¯¥æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡ anim.addUpdateListener &#123; currentPoint = it.animatedValue as Point? // å°†æ¯æ¬¡å˜åŒ–åŽçš„åæ ‡å€¼ï¼ˆä¼°å€¼å™¨PointEvaluatorä¸­evaluateï¼ˆï¼‰è¿”å›žçš„Piontå¯¹è±¡å€¼ï¼‰åˆ°å½“å‰åæ ‡å€¼å¯¹è±¡ï¼ˆcurrentPointï¼‰ // ä»Žè€Œæ›´æ–°å½“å‰åæ ‡å€¼ï¼ˆcurrentPointï¼‰ Timber.d(&quot;currentPoint==null $&#123;currentPoint?.x&#125; $&#123;currentPoint?.y&#125;&quot;) // æ­¥éª¤4ï¼šæ¯æ¬¡èµ‹å€¼åŽå°±é‡æ–°ç»˜åˆ¶ï¼Œä»Žè€Œå®žçŽ°åŠ¨ç”»æ•ˆæžœ invalidate() &#125; anim.start() &#125; else &#123; //é™¤äº†ç¬¬ä¸€æ¬¡ï¼ŒåŽé¢æ¯æ¬¡éƒ½æ ¹æ®addUpdateListenerå›žè°ƒï¼Œåœ¨è¿™ç”»åœ† // æ‰€ä»¥åæ ‡å€¼æ¯æ”¹å˜ä¸€æ¬¡,å°±ä¼šè°ƒç”¨onDraw()ä¸€æ¬¡,å°±ä¼šç”»ä¸€æ¬¡åœ†,ä»Žè€Œå®žçŽ°åŠ¨ç”»æ•ˆæžœ // åœ¨è¯¥ç‚¹ç”»ä¸€ä¸ªåœ†:åœ†å¿ƒ = (30,30),åŠå¾„ = 30 val x = currentPoint!!.x val y = currentPoint!!.y canvas?.drawCircle(x, y, RADIUS, mPaint) Timber.d(&quot;currentPoint currentPoint!=null $&#123;currentPoint?.x&#125; $&#123;currentPoint?.y&#125;&quot;) &#125; &#125;&#125; æ’å€¼å™¨xmlè®¾ç½®å½“åœ¨XMLæ–‡ä»¶è®¾ç½®æ’å€¼å™¨æ—¶ï¼Œåªéœ€ä¼ å…¥å¯¹åº”çš„æ’å€¼å™¨èµ„æºIDå³å¯ ä¸»è¦æ˜¯è®¾ç½®æ’å€¼å™¨å±žæ€§android:interpolator 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;scale xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:interpolator=&quot;@android:anim/overshoot_interpolator&quot; // é€šè¿‡èµ„æºIDè®¾ç½®æ’å€¼å™¨ android:duration=&quot;3000&quot; android:fromXScale=&quot;0.0&quot; android:fromYScale=&quot;0.0&quot; android:pivotX=&quot;50%&quot; android:pivotY=&quot;50%&quot; android:toXScale=&quot;2&quot; android:toYScale=&quot;2&quot; /&gt;&gt; ä»£ç è®¾ç½®å½“åœ¨Javaä»£ç è®¾ç½®æ’å€¼å™¨æ—¶ï¼Œåªéœ€åˆ›å»ºå¯¹åº”çš„æ’å€¼å™¨å¯¹è±¡å³å¯ 123456789101112131415Button mButton = (Button) findViewById(R.id.Button);// æ­¥éª¤1:åˆ›å»º éœ€è¦è®¾ç½®åŠ¨ç”»çš„ è§†å›¾ViewAnimation alphaAnimation = new AlphaAnimation(1,0);// æ­¥éª¤2ï¼šåˆ›å»ºé€æ˜Žåº¦åŠ¨ç”»çš„å¯¹è±¡ &amp; è®¾ç½®åŠ¨ç”»æ•ˆæžœalphaAnimation.setDuration(3000);Interpolator overshootInterpolator = new OvershootInterpolator();// æ­¥éª¤3ï¼šåˆ›å»ºå¯¹åº”çš„æ’å€¼å™¨ç±»å¯¹è±¡alphaAnimation.setInterpolator(overshootInterpolator);// æ­¥éª¤4ï¼šç»™åŠ¨ç”»è®¾ç½®æ’å€¼å™¨mButton.startAnimation(alphaAnimation);// æ­¥éª¤5ï¼šæ’­æ”¾åŠ¨ç”» ç³»ç»Ÿå†…ç½®æ’å€¼å™¨![](AnimPropertyView/Screen Shot 2021-02-01 at 10.57.34 AM.png) è‡ªå®šä¹‰æ’å€¼å™¨â€‹ æ ¹æ®åŠ¨ç”»çš„è¿›åº¦ï¼ˆ0%-100%ï¼‰è®¡ç®—å‡ºå½“å‰å±žæ€§å€¼æ”¹å˜çš„ç™¾åˆ†æ¯” â€‹ è‡ªå®šä¹‰æ’å€¼å™¨éœ€è¦å®žçŽ° Interpolator / TimeInterpolatoræŽ¥å£ &amp; å¤å†™getInterpolationï¼ˆï¼‰ è¡¥é—´åŠ¨ç”» å®žçŽ° InterpolatoræŽ¥å£ï¼›å±žæ€§åŠ¨ç”»å®žçŽ°TimeInterpolatoræŽ¥å£ TimeInterpolatoræŽ¥å£æ˜¯å±žæ€§åŠ¨ç”»ä¸­æ–°å¢žçš„ï¼Œç”¨äºŽå…¼å®¹InterpolatoræŽ¥å£ï¼Œè¿™ä½¿å¾—æ‰€æœ‰è¿‡åŽ»çš„Interpolatorå®žçŽ°ç±»éƒ½å¯ä»¥ç›´æŽ¥åœ¨å±žæ€§åŠ¨ç”»ä½¿ç”¨ 12345678910111213141516171819202122// InterpolatoræŽ¥å£ tweenåŠ¨ç”»public interface Interpolator &#123; // å†…éƒ¨åªæœ‰ä¸€ä¸ªæ–¹æ³• float getInterpolation(float input) &#123; // å‚æ•°è¯´æ˜Ž // inputå€¼å€¼å˜åŒ–èŒƒå›´æ˜¯0-1ï¼Œä¸”éšç€åŠ¨ç”»è¿›åº¦ï¼ˆ0% - 100% ï¼‰å‡åŒ€å˜åŒ– // å³åŠ¨ç”»å¼€å§‹æ—¶ï¼Œinputå€¼ = 0ï¼›åŠ¨ç”»ç»“æŸæ—¶input = 1 // è€Œä¸­é—´çš„å€¼åˆ™æ˜¯éšç€åŠ¨ç”»çš„è¿›åº¦ï¼ˆ0% - 100%ï¼‰åœ¨0åˆ°1ä¹‹é—´å‡åŒ€å¢žåŠ  ...// æ’å€¼å™¨çš„è®¡ç®—é€»è¾‘ return xxxï¼› // è¿”å›žçš„å€¼å°±æ˜¯ç”¨äºŽä¼°å€¼å™¨ç»§ç»­è®¡ç®—çš„fractionå€¼ï¼Œä¸‹é¢ä¼šè¯¦ç»†è¯´æ˜Ž &#125; // TimeInterpolatoræŽ¥å£ å±žæ€§åŠ¨ç”»// åŒä¸Špublic interface TimeInterpolator &#123; float getInterpolation(float input); &#125; åŒ€é€Ÿæ’å€¼å™¨ 12345678910111213141516171819202122232425262728// åŒ€é€Ÿå·®å€¼å™¨ï¼šLinearInterpolator@HasNativeInterpolator public class LinearInterpolator extends BaseInterpolator implements NativeInterpolatorFactory &#123; // ä»…è´´å‡ºå…³é”®ä»£ç  ... public float getInterpolation(float input) &#123; return input; // æ²¡æœ‰å¯¹inputå€¼è¿›è¡Œä»»ä½•é€»è¾‘å¤„ç†ï¼Œç›´æŽ¥è¿”å›ž // å³inputå€¼ = fractionå€¼ // å› ä¸ºinputå€¼æ˜¯åŒ€é€Ÿå¢žåŠ çš„ï¼Œå› æ­¤fractionå€¼ä¹Ÿæ˜¯åŒ€é€Ÿå¢žåŠ çš„ï¼Œæ‰€ä»¥åŠ¨ç”»çš„è¿åŠ¨æƒ…å†µä¹Ÿæ˜¯åŒ€é€Ÿçš„ï¼Œæ‰€ä»¥æ˜¯åŒ€é€Ÿæ’å€¼å™¨ &#125; // å…ˆåŠ é€Ÿå†å‡é€Ÿ å·®å€¼å™¨ï¼šAccelerateDecelerateInterpolator@HasNativeInterpolator public class AccelerateDecelerateInterpolator implements Interpolator, NativeInterpolatorFactory &#123; // ä»…è´´å‡ºå…³é”®ä»£ç  ... public float getInterpolation(float input) &#123; return (float)(Math.cos((input + 1) * Math.PI) / 2.0f) + 0.5f; // inputçš„è¿ç®—é€»è¾‘å¦‚ä¸‹ï¼š // ä½¿ç”¨äº†ä½™å¼¦å‡½æ•°ï¼Œå› inputçš„å–å€¼èŒƒå›´æ˜¯0åˆ°1ï¼Œé‚£ä¹ˆcoså‡½æ•°ä¸­çš„å–å€¼èŒƒå›´å°±æ˜¯Ï€åˆ°2Ï€ã€‚ // è€Œcos(Ï€)çš„ç»“æžœæ˜¯-1ï¼Œcos(2Ï€)çš„ç»“æžœæ˜¯1 // æ‰€ä»¥è¯¥å€¼é™¤ä»¥2åŠ ä¸Š0.5åŽï¼ŒgetInterpolation()æ–¹æ³•æœ€ç»ˆè¿”å›žçš„ç»“æžœå€¼è¿˜æ˜¯åœ¨0åˆ°1ä¹‹é—´ã€‚åªä¸è¿‡ç»è¿‡äº†ä½™å¼¦è¿ç®—ä¹‹åŽï¼Œæœ€ç»ˆçš„ç»“æžœä¸å†æ˜¯åŒ€é€Ÿå¢žåŠ çš„äº†ï¼Œè€Œæ˜¯ç»åŽ†äº†ä¸€ä¸ªå…ˆåŠ é€ŸåŽå‡é€Ÿçš„è¿‡ç¨‹ // æ‰€ä»¥æœ€ç»ˆï¼Œfractionå€¼ = è¿ç®—åŽçš„å€¼ = å…ˆåŠ é€ŸåŽå‡é€Ÿ // æ‰€ä»¥è¯¥å·®å€¼å™¨æ˜¯å…ˆåŠ é€Ÿå†å‡é€Ÿçš„ &#125; &#125; å…ˆåŠ é€Ÿå†å‡é€Ÿ æ’å€¼å™¨ï¼šAccelerateDecelerateInterpolator 123456789101112131415// å…ˆåŠ é€Ÿå†å‡é€Ÿ å·®å€¼å™¨ï¼šAccelerateDecelerateInterpolator@HasNativeInterpolator public class AccelerateDecelerateInterpolator implements Interpolator, NativeInterpolatorFactory &#123; // ä»…è´´å‡ºå…³é”®ä»£ç  ... public float getInterpolation(float input) &#123; return (float)(Math.cos((input + 1) * Math.PI) / 2.0f) + 0.5f; // inputçš„è¿ç®—é€»è¾‘å¦‚ä¸‹ï¼š // ä½¿ç”¨äº†ä½™å¼¦å‡½æ•°ï¼Œå› inputçš„å–å€¼èŒƒå›´æ˜¯0åˆ°1ï¼Œé‚£ä¹ˆcoså‡½æ•°ä¸­çš„å–å€¼èŒƒå›´å°±æ˜¯Ï€åˆ°2Ï€ã€‚ // è€Œcos(Ï€)çš„ç»“æžœæ˜¯-1ï¼Œcos(2Ï€)çš„ç»“æžœæ˜¯1 // æ‰€ä»¥è¯¥å€¼é™¤ä»¥2åŠ ä¸Š0.5åŽï¼ŒgetInterpolation()æ–¹æ³•æœ€ç»ˆè¿”å›žçš„ç»“æžœå€¼è¿˜æ˜¯åœ¨0åˆ°1ä¹‹é—´ã€‚åªä¸è¿‡ç»è¿‡äº†ä½™å¼¦è¿ç®—ä¹‹åŽï¼Œæœ€ç»ˆçš„ç»“æžœä¸å†æ˜¯åŒ€é€Ÿå¢žåŠ çš„äº†ï¼Œè€Œæ˜¯ç»åŽ†äº†ä¸€ä¸ªå…ˆåŠ é€ŸåŽå‡é€Ÿçš„è¿‡ç¨‹ // æ‰€ä»¥æœ€ç»ˆï¼Œfractionå€¼ = è¿ç®—åŽçš„å€¼ = å…ˆåŠ é€ŸåŽå‡é€Ÿ // æ‰€ä»¥è¯¥å·®å€¼å™¨æ˜¯å…ˆåŠ é€Ÿå†å‡é€Ÿçš„ &#125; &#125; å¯¹inputå€¼ æ ¹æ®åŠ¨ç”»çš„è¿›åº¦ï¼ˆ0%-100%ï¼‰é€šè¿‡é€»è¾‘è®¡ç®— è®¡ç®—å‡ºå½“å‰å±žæ€§å€¼æ”¹å˜çš„ç™¾åˆ†æ¯” å®žæˆ˜ DecelerateAccelerateInterpolator 12345678910111213141516class DecelerateAccelerateInterpolator : TimeInterpolator &#123; override fun getInterpolation(input: Float): Float &#123; var result: Float = 0.0f if (input &lt;= 0.5) &#123; result = Math.sin(Math.PI * input).toFloat() / 2 // ä½¿ç”¨æ­£å¼¦å‡½æ•°æ¥å®žçŽ°å…ˆå‡é€ŸåŽåŠ é€Ÿçš„åŠŸèƒ½ï¼Œé€»è¾‘å¦‚ä¸‹ï¼š // å› ä¸ºæ­£å¼¦å‡½æ•°åˆå§‹å¼§åº¦å˜åŒ–å€¼éžå¸¸å¤§ï¼Œåˆšå¥½å’Œä½™å¼¦å‡½æ•°æ˜¯ç›¸åçš„ // éšç€å¼§åº¦çš„å¢žåŠ ï¼Œæ­£å¼¦å‡½æ•°çš„å˜åŒ–å€¼ä¹Ÿä¼šé€æ¸å˜å°ï¼Œè¿™æ ·ä¹Ÿå°±å®žçŽ°äº†å‡é€Ÿçš„æ•ˆæžœã€‚ // å½“å¼§åº¦å¤§äºŽÏ€/2ä¹‹åŽï¼Œæ•´ä¸ªè¿‡ç¨‹ç›¸åäº†è¿‡æ¥ï¼ŒçŽ°åœ¨æ­£å¼¦å‡½æ•°çš„å¼§åº¦å˜åŒ–å€¼éžå¸¸å°ï¼Œæ¸æ¸éšç€å¼§åº¦ç»§ç»­å¢žåŠ ï¼Œå˜åŒ–å€¼è¶Šæ¥è¶Šå¤§ï¼Œå¼§åº¦åˆ°Ï€æ—¶ç»“æŸï¼Œè¿™æ ·ä»Ž0è¿‡åº¦åˆ°Ï€ï¼Œä¹Ÿå°±å®žçŽ°äº†å…ˆå‡é€ŸåŽåŠ é€Ÿçš„æ•ˆæžœ &#125; else &#123; result= (2 - Math.sin(Math.PI * input)).toFloat() / 2 &#125; return result // è¿”å›žçš„resultå€¼ = éšç€åŠ¨ç”»è¿›åº¦å‘ˆå…ˆå‡é€ŸåŽåŠ é€Ÿçš„å˜åŒ–è¶‹åŠ¿ &#125;&#125; InterpolatorActivity 123456val curTranslationX = bt_anim_interpolator.translationXval animator = ObjectAnimator.ofFloat(bt_anim_interpolator, &quot;translationX&quot;, curTranslationX, 300f, curTranslationX)animator.duration = 5000animator.interpolator = DecelerateAccelerateInterpolator()animator.start() ObjectAnimatorä¸Ž ValueAnimatorç±»çš„åŒºåˆ« ValueAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åŽ æ‰‹åŠ¨èµ‹å€¼ ç»™å¯¹è±¡çš„å±žæ€§ä»Žè€Œå®žçŽ°åŠ¨ç”»ï¼›æ˜¯ é—´æŽ¥ å¯¹å¯¹è±¡å±žæ€§è¿›è¡Œæ“ä½œï¼› ObjectAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åŽ è‡ªåŠ¨èµ‹å€¼ ç»™å¯¹è±¡çš„å±žæ€§ä»Žè€Œå®žçŽ°åŠ¨ç”»ï¼›æ˜¯ ç›´æŽ¥ å¯¹å¯¹è±¡å±žæ€§è¿›è¡Œæ“ä½œ ä¼°å€¼å™¨ï¼ˆTypeEvaluator) å’Œæ’å€¼å™¨ æ’å€¼å™¨ï¼ˆInterpolatorï¼‰å†³å®š å€¼ çš„å˜åŒ–æ¨¡å¼ï¼ˆåŒ€é€Ÿã€åŠ é€Ÿï¼‰ ä¼°å€¼å™¨ï¼ˆTypeEvaluatorï¼‰å†³å®š å€¼ çš„å…·ä½“å˜åŒ–æ•°å€¼,è®¾ç½®åŠ¨ç”»ä»Žåˆå§‹å€¼è¿‡æ¸¡åˆ°ç»“æŸå€¼çš„é€»è¾‘ã€‚ https://blog.csdn.net/carson_ho/article/details/99619871 ä½œè€…ï¼šCarson_Hoé“¾æŽ¥ï¼šhttps://www.jianshu.com/p/7c95342f4bc2 â€‹ https://www.jianshu.com/p/2f19fe1e3ca1 æ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚","categories":[{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/categories/anim/"}],"tags":[]},{"title":"AnimationView","slug":"AnimationView","date":"2019-12-26T10:23:55.000Z","updated":"2021-08-19T11:11:43.675Z","comments":true,"path":"2019/12/26/AnimationView/","link":"","permalink":"https://noteforme.github.io/2019/12/26/AnimationView/","excerpt":"","text":"View Animationç¬¬ä¸€ç§å°±passäº†ï¼Œçœ‹ä¸‹View Animation: You can use the view animation system to perform tweened animation on Views. Tween animation calculates the animation with information such as the start point, end point, size, rotation, and other common aspects of an animation. è¿™ç§åŠ¨ç”»å¯ä»¥åœ¨ä¸€ä¸ªè§†å›¾å®¹å™¨æ‰§è¡Œ ä½ç½®ã€å¤§å°ã€æ—‹è½¬ã€é€æ˜Žåº¦çš„å˜åŒ–ï¼Œä½¿ç”¨XMLå®šä¹‰æ›´å…·å¯è¯»æ€§ -set|-android:interpolator -&gt; æ’å€¼å™¨ï¼Œå½±å“åŠ¨ç”»çš„é€Ÿåº¦ |-é»˜è®¤å€¼ -&gt; @android:anim/accelerate_decelerate_interpolator|-android:shareInterpolator -&gt; é›†åˆæ‰€æœ‰åŠ¨ç”»æ˜¯å¦ä½¿ç”¨åŒä¸€æ’å€¼å™¨|-android:fillAfter -&gt; åŠ¨ç”»ç»“æŸåŽViewæ˜¯å¦åœç•™åœ¨ç»“æŸçš„ä½ç½®|-android:startOffset -&gt; åŠ¨ç”»å¤šå°‘ç§’ä¹‹åŽæ‰§è¡Œ|-android:repeatMode -&gt; é‡å¤çš„æ¨¡å¼,é»˜è®¤ä¸ºrestart,å³é‡å¤´å¼€å§‹é‡æ–°è¿è¡Œ,reverseå³ä»Žç»“æŸå¼€å§‹å‘å‰é‡æ–°è¿è¡Œ-TranslateAnimation -&gt; ç§»åŠ¨View|- |-android:fillAfter -&gt; |-android:duration -&gt; è¡¨ç¤ºåŠ¨ç”»æŒç»­çš„æ—¶é—´ |-android:fromXDelta -&gt; è¡¨ç¤º x çš„èµ·å§‹å€¼ |-android:toXDelta -&gt; è¡¨ç¤º x çš„ç»“æŸå€¼ |-android:fromYDelta -&gt; è¡¨ç¤º y çš„èµ·å§‹å€¼ |-android:toYDelta -&gt; è¡¨ç¤º y çš„ç»“æŸå€¼-scaleAnimation -&gt; æ”¾å¤§æˆ–è€…ç¼©å°View|- |-android:duration -&gt; è¡¨ç¤ºåŠ¨ç”»æŒç»­çš„æ—¶é—´ |-android:fromXScale -&gt; è¡¨ç¤ºæ°´å¹³æ–¹å‘ç¼©æ”¾çš„èµ·å§‹å€¼ |-android:fromYScale -&gt; è¡¨ç¤ºç«–ç›´æ–¹å‘ç¼©æ”¾çš„èµ·å§‹å€¼ |-android:pivotX -&gt; è¡¨ç¤ºç¼©æ”¾ä¸­å¿ƒç‚¹çš„ X åæ ‡ |-android:pivotY -&gt; è¡¨ç¤ºç¼©æ”¾ä¸­å¿ƒç‚¹çš„ Y åæ ‡ |-android:toXScale -&gt; è¡¨ç¤ºæ°´å¹³æ–¹å‘ç¼©æ”¾çš„ç»“æŸå€¼ |-android:toYScale -&gt; è¡¨ç¤ºç«–ç›´æ–¹å‘ç¼©æ”¾çš„ç»“æŸå€¼-RotateAnimation -&gt; æ—‹è½¬View|- |-android:duration -&gt; è¡¨ç¤ºåŠ¨ç”»æŒç»­çš„æ—¶é—´ |-android:fromDegrees -&gt; æ—‹è½¬å¼€å§‹çš„è§’åº¦ |-android:toDegrees -&gt; æ—‹è½¬ç»“æŸçš„è§’åº¦ |-android:pivotX -&gt; æ—‹è½¬ä¸­å¿ƒç‚¹çš„ X åæ ‡ |-android:pivotY -&gt; æ—‹è½¬ä¸­å¿ƒç‚¹çš„ Y åæ ‡-AlphaAnimation -&gt; æ”¹å˜Viewçš„é€æ˜Žåº¦|- |-android:duration -&gt; è¡¨ç¤ºåŠ¨ç”»æŒç»­çš„æ—¶é—´ |-android:fromAlpha -&gt; é€æ˜Žåº¦çš„èµ·å§‹å€¼ |-android:toAlpha -&gt; é€æ˜Žåº¦çš„ç»“æŸå€¼-è‡ªå®šä¹‰ViewåŠ¨ç”» -&gt; (ä¸ä¼š,å¾…å®žè·µä¸­å­¦ä¹ ) 1234private fun anim(resAnim:Int)&#123; val translateAnimation = AnimationUtils.loadAnimation(this,resAnim) textView5.startAnimation(translateAnimation)&#125; view_anim_translate.xml 12345678910111213141516// ä»¥ä¸‹å‚æ•°æ˜¯4ç§åŠ¨ç”»æ•ˆæžœçš„å…¬å…±å±žæ€§,å³éƒ½æœ‰çš„å±žæ€§ android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœ android:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰ android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue android:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalse android:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrue android:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart| android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤ android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®² // ä»¥ä¸‹å‚æ•°æ˜¯å¹³ç§»åŠ¨ç”»ç‰¹æœ‰çš„å±žæ€§ android:fromXDelta=&quot;0&quot; // è§†å›¾åœ¨æ°´å¹³æ–¹å‘x ç§»åŠ¨çš„èµ·å§‹å€¼ android:toXDelta=&quot;500&quot; // è§†å›¾åœ¨æ°´å¹³æ–¹å‘x ç§»åŠ¨çš„ç»“æŸå€¼ android:fromYDelta=&quot;0&quot; // è§†å›¾åœ¨ç«–ç›´æ–¹å‘y ç§»åŠ¨çš„èµ·å§‹å€¼ android:toYDelta=&quot;500&quot; // è§†å›¾åœ¨ç«–ç›´æ–¹å‘y ç§»åŠ¨çš„ç»“æŸå€¼ View_anim_translate.xml 12345678910111213141516171819202122232425262728293031&lt;!-- // ä»¥ä¸‹å‚æ•°æ˜¯4ç§åŠ¨ç”»æ•ˆæžœçš„å…¬å…±å±žæ€§,å³éƒ½æœ‰çš„å±žæ€§ android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœ android:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰ android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue android:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalse android:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrue android:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart| android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤ android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®² // ä»¥ä¸‹å‚æ•°æ˜¯ç¼©æ”¾åŠ¨ç”»ç‰¹æœ‰çš„å±žæ€§ android:fromXScale=&quot;0.0&quot; // åŠ¨ç”»åœ¨æ°´å¹³æ–¹å‘Xçš„èµ·å§‹ç¼©æ”¾å€æ•° // 0.0è¡¨ç¤ºæ”¶ç¼©åˆ°æ²¡æœ‰ï¼›1.0è¡¨ç¤ºæ­£å¸¸æ— ä¼¸ç¼© // å€¼å°äºŽ1.0è¡¨ç¤ºæ”¶ç¼©ï¼›å€¼å¤§äºŽ1.0è¡¨ç¤ºæ”¾å¤§ android:toXScale=&quot;2&quot; //åŠ¨ç”»åœ¨æ°´å¹³æ–¹å‘Xçš„ç»“æŸç¼©æ”¾å€æ•° android:fromYScale=&quot;0.0&quot; //åŠ¨ç”»å¼€å§‹å‰åœ¨ç«–ç›´æ–¹å‘Yçš„èµ·å§‹ç¼©æ”¾å€æ•° android:toYScale=&quot;2&quot; //åŠ¨ç”»åœ¨ç«–ç›´æ–¹å‘Yçš„ç»“æŸç¼©æ”¾å€æ•° android:pivotX=&quot;50%&quot; // ç¼©æ”¾è½´ç‚¹çš„xåæ ‡ android:pivotY=&quot;50%&quot; // ç¼©æ”¾è½´ç‚¹çš„yåæ ‡ // è½´ç‚¹ = è§†å›¾ç¼©æ”¾çš„ä¸­å¿ƒç‚¹ // pivotX pivotY,å¯å–å€¼ä¸ºæ•°å­—ï¼Œç™¾åˆ†æ¯”ï¼Œæˆ–è€…ç™¾åˆ†æ¯”p // è®¾ç½®ä¸ºæ•°å­—æ—¶ï¼ˆå¦‚50ï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘å’Œyæ–¹å‘åŠ ä¸Š50pxçš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.ABSOLUTEã€‚ // è®¾ç½®ä¸ºç™¾åˆ†æ¯”æ—¶ï¼ˆå¦‚50%ï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘åŠ ä¸Šè‡ªèº«å®½åº¦50%å’Œyæ–¹å‘è‡ªèº«é«˜åº¦50%çš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.RELATIVE_TO_SELFã€‚ // è®¾ç½®ä¸ºç™¾åˆ†æ¯”pæ—¶ï¼ˆå¦‚50%pï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘åŠ ä¸Šçˆ¶æŽ§ä»¶å®½åº¦50%å’Œyæ–¹å‘çˆ¶æŽ§ä»¶é«˜åº¦50%çš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.RELATIVE_TO_PARENT // ä¸¤ä¸ª50%è¡¨ç¤ºåŠ¨ç”»ä»Žè‡ªèº«ä¸­é—´å¼€å§‹ï¼Œå…·ä½“å¦‚ä¸‹å›¾ android:pivotX=â€50%â€ // ç¼©æ”¾è½´ç‚¹çš„xåæ ‡ android:pivotY=â€50%â€ // ç¼©æ”¾è½´ç‚¹çš„yåæ ‡ è¿™ä¸ªæ‹¿æŽ‰çœ‹çœ‹æ•ˆæžœ æ·»åŠ  pivotX pivotY Rotate 12345678910111213// ä»¥ä¸‹å‚æ•°æ˜¯æ—‹è½¬åŠ¨ç”»ç‰¹æœ‰çš„å±žæ€§ android:duration=&quot;1000&quot; android:fromDegrees=&quot;0&quot; // åŠ¨ç”»å¼€å§‹æ—¶ è§†å›¾çš„æ—‹è½¬è§’åº¦(æ­£æ•° = é¡ºæ—¶é’ˆï¼Œè´Ÿæ•° = é€†æ—¶é’ˆ) android:toDegrees=&quot;270&quot; // åŠ¨ç”»ç»“æŸæ—¶ è§†å›¾çš„æ—‹è½¬è§’åº¦(æ­£æ•° = é¡ºæ—¶é’ˆï¼Œè´Ÿæ•° = é€†æ—¶é’ˆ) android:pivotX=&quot;50%&quot; // æ—‹è½¬è½´ç‚¹çš„xåæ ‡ android:pivotY=&quot;0&quot; // æ—‹è½¬è½´ç‚¹çš„yåæ ‡ // è½´ç‚¹ = è§†å›¾ç¼©æ”¾çš„ä¸­å¿ƒç‚¹ // pivotX pivotY,å¯å–å€¼ä¸ºæ•°å­—ï¼Œç™¾åˆ†æ¯”ï¼Œæˆ–è€…ç™¾åˆ†æ¯”p // è®¾ç½®ä¸ºæ•°å­—æ—¶ï¼ˆå¦‚50ï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘å’Œyæ–¹å‘åŠ ä¸Š50pxçš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.ABSOLUTEã€‚ // è®¾ç½®ä¸ºç™¾åˆ†æ¯”æ—¶ï¼ˆå¦‚50%ï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘åŠ ä¸Šè‡ªèº«å®½åº¦50%å’Œyæ–¹å‘è‡ªèº«é«˜åº¦50%çš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.RELATIVE_TO_SELFã€‚ // è®¾ç½®ä¸ºç™¾åˆ†æ¯”pæ—¶ï¼ˆå¦‚50%pï¼‰ï¼Œè½´ç‚¹ä¸ºViewçš„å·¦ä¸Šè§’çš„åŽŸç‚¹åœ¨xæ–¹å‘åŠ ä¸Šçˆ¶æŽ§ä»¶å®½åº¦50%å’Œyæ–¹å‘çˆ¶æŽ§ä»¶é«˜åº¦50%çš„ç‚¹ã€‚åœ¨Javaä»£ç é‡Œé¢è®¾ç½®è¿™ä¸ªå‚æ•°çš„å¯¹åº”å‚æ•°æ˜¯Animation.RELATIVE_TO_PARENT // ä¸¤ä¸ª50%è¡¨ç¤ºåŠ¨ç”»ä»Žè‡ªèº«ä¸­é—´å¼€å§‹ï¼Œå…·ä½“å¦‚ä¸‹å›¾ alpha 12345678910111213// ä»¥ä¸‹å‚æ•°æ˜¯4ç§åŠ¨ç”»æ•ˆæžœçš„å…¬å…±å±žæ€§,å³éƒ½æœ‰çš„å±žæ€§android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœandroid:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrueandroid:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalseandroid:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrueandroid:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart|android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®²// ä»¥ä¸‹å‚æ•°æ˜¯é€æ˜Žåº¦åŠ¨ç”»ç‰¹æœ‰çš„å±žæ€§android:fromAlpha=&quot;1.0&quot; // åŠ¨ç”»å¼€å§‹æ—¶è§†å›¾çš„é€æ˜Žåº¦(å–å€¼èŒƒå›´: -1 ~ 1)android:toAlpha=&quot;0.0&quot;// åŠ¨ç”»ç»“æŸæ—¶è§†å›¾çš„é€æ˜Žåº¦(å–å€¼èŒƒå›´: -1 ~ 1) ç»„åˆåŠ¨ç”» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;// é‡‡ç”¨&lt; Set/&gt;æ ‡ç­¾&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;// ç»„åˆåŠ¨ç”»åŒæ ·å…·å¤‡å…¬å…±å±žæ€§ android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœ android:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰ android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue android:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalse android:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrue android:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart| android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤ android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®² // ç»„åˆåŠ¨ç”»ç‹¬ç‰¹çš„å±žæ€§ android:shareinterpolator = â€œtrueâ€ // è¡¨ç¤ºç»„åˆåŠ¨ç”»ä¸­çš„åŠ¨ç”»æ˜¯å¦å’Œé›†åˆå…±äº«åŒä¸€ä¸ªå·®å€¼å™¨ // å¦‚æžœé›†åˆä¸æŒ‡å®šæ’å€¼å™¨ï¼Œé‚£ä¹ˆå­åŠ¨ç”»éœ€è¦å•ç‹¬è®¾ç½®// ç»„åˆåŠ¨ç”»æ’­æ”¾æ—¶æ˜¯å…¨éƒ¨åŠ¨ç”»åŒæ—¶å¼€å§‹// å¦‚æžœæƒ³ä¸åŒåŠ¨ç”»ä¸åŒæ—¶é—´å¼€å§‹å°±è¦ä½¿ç”¨android:startOffsetå±žæ€§æ¥å»¶è¿Ÿå•ä¸ªåŠ¨ç”»æ’­æ”¾æ—¶é—´// è®¾ç½®æ—‹è½¬åŠ¨ç”»ï¼Œè¯­æ³•åŒå•ä¸ªåŠ¨ç”» &lt;rotate android:duration=&quot;1000&quot; android:fromDegrees=&quot;0&quot; android:toDegrees=&quot;360&quot; android:pivotX=&quot;50%&quot; android:pivotY=&quot;50%&quot; android:repeatMode=&quot;restart&quot; android:repeatCount=&quot;infinite&quot; /&gt;// è®¾ç½®å¹³ç§»åŠ¨ç”»ï¼Œè¯­æ³•åŒå•ä¸ªåŠ¨ç”» &lt;translate android:duration=&quot;10000&quot; android:startOffset = â€œ1000â€// å»¶è¿Ÿè¯¥åŠ¨ç”»æ’­æ”¾æ—¶é—´ android:fromXDelta=&quot;-50%p&quot; android:fromYDelta=&quot;0&quot; android:toXDelta=&quot;50%p&quot; android:toYDelta=&quot;0&quot; /&gt;// è®¾ç½®é€æ˜Žåº¦åŠ¨ç”»ï¼Œè¯­æ³•åŒå•ä¸ªåŠ¨ç”» &lt;alpha android:startOffset=&quot;7000&quot; android:duration=&quot;3000&quot; android:fromAlpha=&quot;1.0&quot; android:toAlpha=&quot;0.0&quot; /&gt;// è®¾ç½®ç¼©æ”¾åŠ¨ç”»ï¼Œè¯­æ³•åŒå•ä¸ªåŠ¨ç”» &lt;scale android:startOffset=&quot;4000&quot; android:duration=&quot;1000&quot; android:fromXScale=&quot;1.0&quot; android:fromYScale=&quot;1.0&quot; android:pivotX=&quot;50%&quot; android:pivotY=&quot;50%&quot; android:toXScale=&quot;0.5&quot; android:toYScale=&quot;0.5&quot; /&gt;// ç‰¹åˆ«æ³¨æ„ï¼š// 1. åœ¨ç»„åˆåŠ¨ç”»é‡Œscaleç¼©æ”¾åŠ¨ç”»è®¾ç½®çš„repeatCountï¼ˆé‡å¤æ’­æ”¾ï¼‰å’ŒfillBeforeï¼ˆæ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼‰æ˜¯æ— æ•ˆçš„ã€‚// 2. æ‰€ä»¥å¦‚æžœéœ€è¦é‡å¤æ’­æ”¾æˆ–è€…å›žåˆ°åŽŸä½çš„è¯éœ€è¦åœ¨setæ ‡ç­¾é‡Œè®¾ç½®// 3. ä½†æ˜¯ç”±äºŽæ­¤å¤„rotateæ—‹è½¬åŠ¨ç”»é‡Œå·²è®¾ç½®repeatCountä¸ºinfiniteï¼Œæ‰€ä»¥åŠ¨ç”»ä¸ä¼šç»“æŸï¼Œä¹Ÿå°±çœ‹ä¸åˆ°é‡æ’­å’Œå›žå¤åŽŸä½&lt;/set&gt; å®ƒæ˜¯ä¸€ä¸ªæŽ¥ä¸€ä¸ªæ’­æ”¾ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®repeatCount è¾¾åˆ°åŒæ—¶æ’­æ”¾çš„ç›®çš„ ç›‘å¬åŠ¨ç”» Animation.addListener anim.addListener(new AnimatorListenerAdapter() åº”ç”¨ Activityå…¥åœº activity_anim_enter.xml 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:duration= &quot;3000&quot; android:fromXDelta=&quot;100%p&quot; android:toXDelta=&quot;0%p&quot;/&gt;&lt;/set&gt; activity_anim_exit.xml 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:duration= &quot;3000&quot; android:fromXDelta=&quot;0%p&quot; android:toXDelta=&quot;-100%p&quot;/&gt;&lt;/set&gt; è§†å›¾ç»„ï¼ˆViewGroupï¼‰åŠ¨ç”»æ’å€¼å™¨https://www.jianshu.com/p/2f19fe1e3ca1 https://blog.csdn.net/carson_ho/article/details/72827747","categories":[{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/categories/anim/"}],"tags":[]},{"title":"AnimBitmaps","slug":"AnimBitmaps","date":"2019-12-25T07:38:00.000Z","updated":"2021-08-19T11:11:43.546Z","comments":true,"path":"2019/12/25/AnimBitmaps/","link":"","permalink":"https://noteforme.github.io/2019/12/25/AnimBitmaps/","excerpt":"","text":"Overviewhttps://developer.android.com/training/animation Animate drawable graphicsThe first option is to use an Animation Drawable. This allows you to specify several static drawable files that will be displayed one at a time to create an animation. The second option is to use an Animated Vector Drawable, which lets you animate the properties of a vector drawable. The XML file consists of &lt;animation=list&gt; 123456&lt;animation-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:oneshot=&quot;true&quot;&gt; &lt;item android:drawable=&quot;@drawable/rocket_thrust1&quot; android:duration=&quot;200&quot; /&gt; &lt;item android:drawable=&quot;@drawable/rocket_thrust2&quot; android:duration=&quot;200&quot; /&gt; &lt;item android:drawable=&quot;@drawable/rocket_thrust3&quot; android:duration=&quot;200&quot; /&gt;&lt;/animation-list&gt; in which the animation is added to an ImageView and then animated when the screen is touched 12345678910111213private lateinit var rocketAnimation: AnimationDrawableoverride fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.main) val rocketImage = findViewById&lt;ImageView&gt;(R.id.rocket_image).apply &#123; setBackgroundResource(R.drawable.rocket_thrust) rocketAnimation = background as AnimationDrawable &#125; rocketImage.setOnClickListener(&#123; rocketAnimation.start() &#125;)&#125; Itâ€™s important to note that the start() method called on the AnimationDrawable cannot be called during the onCreate() method of your Activity, because the AnimationDrawable is not yet fully attached to the window. If you want to play the animation immediately, without requiring interaction, then you might want to call it from the onStart() method in your Activity, which will get called when Android makes the view visible on screen. AnimatedVectorDrawable","categories":[{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/categories/anim/"}],"tags":[]},{"title":"JCenterPublish","slug":"JCenterPublish","date":"2019-12-12T22:30:57.000Z","updated":"2021-08-19T11:11:43.981Z","comments":true,"path":"2019/12/13/JCenterPublish/","link":"","permalink":"https://noteforme.github.io/2019/12/13/JCenterPublish/","excerpt":"","text":"nexus sonatype ä¸»è¦æ­¥éª¤æŒ‰ç…§è¿™ä¸ªæ“ä½œ https://www.gcssloop.com/gebug/maven-private æ³¨æ„ï¼š å¯†ç ä¸å†æ˜¯ admin admin 123äº†æŒ‰ç…§è¿™ä¸ªæ­¥éª¤ https://www.jianshu.com/p/fcb128e34c87 éƒ¨ç½²å¥½ä¸€ä¸ªå¹³å°åŽï¼Œsonatype-workå¤åˆ¶è¿‡åŽ»ï¼Œå…¶ä»–é…ç½®å°±ä¸ç”¨å†å¼„äº†ï¼Œæ³¨æ„nexus-3.20.0-04-unix.tar.gzè§£åŽ‹åŽä¹Ÿä¼šæœ‰sonatype-workæ–‡ä»¶ï¼Œå¯èƒ½ä¼šæŠŠä¹‹å‰çš„è¦†ç›– è¿è¡Œ åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­è¾“å…¥å¯åŠ¨å‘½ä»¤ï¼š software/nexus-3.20.0-04-mac/nexus-3.20.0-04/bin 1./nexus start å¦‚æžœä¸€åˆ‡é¡ºåˆ©ï¼Œåœ¨ç­‰å¾…å‡ åç§’åˆ°ä¸€ä¸¤åˆ†é’Ÿä¹‹åŽå°±å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬çš„ä»“åº“äº†ï¼Œå¦‚æžœå‡ºé”™äº†ï¼Œå¯ä»¥ä½¿ç”¨ run å‘½ä»¤æ¥æŸ¥çœ‹å…·ä½“çš„å‡ºé”™åŽŸå› ï¼š 12# run å‘½ä»¤ç›¸å½“äºŽ debug æ¨¡å¼ï¼Œä¼šè¾“å‡ºæ‰€æœ‰çš„æ—¥å¿—ä¿¡æ¯./nexus run å½“ç„¶ï¼ŒNexus è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‘½ä»¤(ä¾‹å¦‚:åœæ­¢ã€é‡å¯ã€æŸ¥çœ‹çŠ¶æ€ç­‰)ï¼š 1./nexus &#123;start|stop|run|run-redirect|status|restart|force-reload&#125; æ³¨æ„:windowså¯åŠ¨æ˜¯è¿™æ ·çš„ .\\nexus.exe /run æ‰“åŒ… åœ¨é…ç½®å®Œå–„åŽåŒæ­¥ä¸€ä¸‹é¡¹ç›®ï¼Œå°±å¯ä»¥æ‰“å¼€ gradle å‘½ä»¤èœå•çœ‹åˆ°å¤šå‡ºæ¥äº†3ä¸ªå‘½ä»¤ï¼ŒåŒå‡»å³å¯æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤ï¼š packï¼šæ‰“åŒ…é¡¹ç›® uploadToLocalï¼šä¸Šä¼ åˆ°æœ¬æœºä»“åº“ uploadToPublicï¼šä¸Šä¼ åˆ°å…¬ç½‘ä»“åº“ æŸ¥çœ‹ http://localhost:8081 å³å¯æŸ¥çœ‹ï¼Œå¦‚æžœä¿®æ”¹äº†ç«¯å£å·ï¼ŒåŽé¢å†™å¯¹åº”çš„ç«¯å£å·å³å¯ã€‚å¦‚æžœæ˜¯è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œåˆ™åœ¨å…¶ä»–ç”µè„‘ä¸Šè¾“å…¥http://&#123;æœåŠ¡å™¨ip&#125;:&#123;port&#125; IP å’Œå¯¹åº”çš„ç«¯å£å·ã€‚å¦‚æžœè¿è¡ŒæˆåŠŸï¼Œåˆ™ä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹ç•Œé¢ï¼š Prepare Setting the JDK path 123Open ~/.bash_profile export JAVA_HOME=$(/usr/libexec/java_home)source ~/.bash_profile https://android.jlelse.eu/publishing-your-android-kotlin-or-java-library-to-jcenter-from-android-studio-1b24977fe450 maven centeræŒ‰ç…§è¿™ä¸ªæ•™ç¨‹å‚è€ƒ**TestMavenUp* å°±å·®ä¸å¤šäº† https://www.jianshu.com/p/6c1d2688ed2d/ https://www.jianshu.com/p/0629548ab5a4 å¯ä»¥æŠŠé¡¹ç›®å’Œjaræ”¾åˆ°åŒä¸€ä¸ªç›®å½•","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"TEST_UNIT","slug":"TEST-UNIT","date":"2019-11-17T12:49:14.000Z","updated":"2023-01-02T03:31:39.095Z","comments":true,"path":"2019/11/17/TEST-UNIT/","link":"","permalink":"https://noteforme.github.io/2019/11/17/TEST-UNIT/","excerpt":"","text":"Test Driven Development MainPrinciple:Write the test case before the implementation of the function (only for unit tests) Write the function signature Write the test cases for the function Write the function logic so the tests pass You should only have one assertion per test case. 123456789101112131415161718192021222324252627282930object RegistrationUtil &#123; private val exitingUsers = listOf(&quot;Peter&quot;,&quot;Carl&quot;) /** * the input is not valid if... * ...the username /password is empty * ...the username is already taken * ...the confirmed password is not the same as the real password * ...the pasword contains less than 2 digits */ fun validateRegistrationInput( userName: String, password: String, confirmedPassword: String ):Boolean&#123; if (userName.isEmpty()||password.isEmpty())&#123; return false &#125; if (userName in exitingUsers)&#123; return false &#125; if (password!=confirmedPassword)&#123; return false &#125; if (password.count&#123;it.isDigit()&#125;&lt;2)&#123; return false &#125; return true &#125;&#125; RegistrationUtilTest.kt 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566import com.google.common.truth.Truth.assertThatimport org.junit.Testclass RegistrationUtilTest&#123; @Test fun `empty username returns false`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;&quot;, &quot;123&quot;, &quot;123&quot; ) assertThat(result).isFalse() &#125; @Test fun `valid username and correctly repeated password returns true`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;Philipp&quot;, &quot;123&quot;, &quot;123&quot; ) assertThat(result).isTrue() &#125; @Test fun `username already exists returns false`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;Carl&quot;, &quot;123&quot;, &quot;123&quot; ) assertThat(result).isFalse() &#125; @Test fun `incorrectly confirmed password returns false`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;Philipp&quot;, &quot;123456&quot;, &quot;abcdefg&quot; ) assertThat(result).isFalse() &#125; @Test fun `empty password returns false`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;Philipp&quot;, &quot;&quot;, &quot;&quot; ) assertThat(result).isFalse() &#125; @Test fun `less than 2 digit password returns false`() &#123; val result = RegistrationUtil.validateRegistrationInput( &quot;Philipp&quot;, &quot;abcdefg5&quot;, &quot;abcdefg5&quot; ) assertThat(result).isFalse() &#125;&#125; https://www.youtube.com/watch?v=W0ag98EDhGc&amp;list=PLQkwcJG4YTCSYJ13G4kVIJ10X5zisB2Lq&amp;index=3 https://developer.android.com/kotlin/coroutines/coroutines-best-practices","categories":[{"name":"TEST","slug":"TEST","permalink":"https://noteforme.github.io/categories/TEST/"}],"tags":[{"name":"Test","slug":"Test","permalink":"https://noteforme.github.io/tags/Test/"}]},{"title":"SharedPreferences","slug":"SharedPreferences","date":"2019-11-06T06:50:12.000Z","updated":"2024-10-01T14:26:25.173Z","comments":true,"path":"2019/11/06/SharedPreferences/","link":"","permalink":"https://noteforme.github.io/2019/11/06/SharedPreferences/","excerpt":"","text":"Questioné—®é¢˜1spåˆå§‹åŒ– æ˜¯è¯»å–æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯æŒ‡å®šæ–‡ä»¶çš„æ•°æ®ã€‚ é—®é¢˜2spè¯»å–æ–‡ä»¶åŽä¼šæŠŠæ•°æ®ä¿å­˜åˆ°mapä¸­ï¼Œå¦‚æžœåŽç»­æˆ‘pusString() æ•°æ®äº†ï¼Œè¿˜éœ€è¦é‡æ–°è¯»å–æ–‡ä»¶å—. å¯åŠ¨å˜æ…¢spå¯èƒ½å¯¼è‡´å¯åŠ¨å˜æ…¢ : 12345678910private void startLoadFromDisk() &#123; synchronized (mLock) &#123; mLoaded = false; &#125; new Thread(&quot;SharedPreferencesImpl-load&quot;) &#123; public void run() &#123; loadFromDisk(); &#125; &#125;.start();&#125; mLockæ˜¯å¼‚æ­¥æ“ä½œ å¦‚æžœå¯åŠ¨çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹è¯»å–ï¼Œä¼šå¯¼è‡´å¯åŠ¨å˜æ…¢ 12345678@Overridepublic boolean getBoolean(String key, boolean defValue) &#123; synchronized (mLock) &#123; awaitLoadedLocked(); Boolean v = (Boolean)mMap.get(key); return v != null ? v : defValue; &#125;&#125; 123456789101112131415161718@GuardedBy(&quot;mLock&quot;)private void awaitLoadedLocked() &#123; if (!mLoaded) &#123; // Raise an explicit StrictMode onReadFromDisk for this // thread, since the real read will be in a different // thread and otherwise ignored by StrictMode. BlockGuard.getThreadPolicy().onReadFromDisk(); &#125; while (!mLoaded) &#123; try &#123; mLock.wait(); &#125; catch (InterruptedException unused) &#123; &#125; &#125; if (mThrowable != null) &#123; throw new IllegalStateException(mThrowable); &#125;&#125; æ‰€æœ‰ getXXX() æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œåœ¨ä¸»çº¿ç¨‹è°ƒç”¨ get æ–¹æ³•ï¼Œå¿…é¡»ç­‰å¾… SP åŠ è½½å®Œæ¯•ï¼Œä¼šå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡žï¼Œä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ç›¸ä¿¡å°ä¼™ä¼´ä»¬å¹¶ä¸é™Œç”Ÿã€‚ commit vs applycommit ï¼š æ˜¯åŒæ­¥ Apply : å¼‚æ­¥ https://yjy239.github.io/2020/05/04/android-chong-xue-xi-lie-sharedpreferences-yuan-ma-jie-xi/ https://www.51cto.com/article/685850.html è§£å†³SharedPreferencesç¼ºé™·ï¼Œå¾®ä¿¡MMKVåŽŸç†åˆ†æž https://www.bilibili.com/video/BV1HF411b7H1?p=6&amp;spm_id_from=pageDriver https://www.bilibili.com/video/BV1ih411a7KG?p=1 DataStoreSharedPreferencesè¿ç§» https://www.hi-dhl.com/2020/10/19/jetpack/11-DataStore/","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"SurfaceView","slug":"SurfaceView","date":"2019-11-05T04:42:57.000Z","updated":"2021-08-19T11:11:44.238Z","comments":true,"path":"2019/11/05/SurfaceView/","link":"","permalink":"https://noteforme.github.io/2019/11/05/SurfaceView/","excerpt":"","text":"æˆ‘ä»¬çŸ¥é“Viewæ˜¯é€šè¿‡åˆ·æ–°æ¥é‡ç»˜è§†å›¾ï¼Œç³»ç»Ÿé€šè¿‡å‘å‡ºVSSYNCä¿¡å·æ¥è¿›è¡Œå±å¹•çš„é‡ç»˜ï¼Œåˆ·æ–°çš„æ—¶é—´é—´éš”æ˜¯16ms,å¦‚æžœæˆ‘ä»¬å¯ä»¥åœ¨16msä»¥å†…å°†ç»˜åˆ¶å·¥ä½œå®Œæˆï¼Œåˆ™æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå¦‚æžœæˆ‘ä»¬ç»˜åˆ¶è¿‡ç¨‹é€»è¾‘å¾ˆå¤æ‚ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç•Œé¢æ›´æ–°è¿˜éžå¸¸é¢‘ç¹ï¼Œè¿™æ—¶å€™å°±ä¼šé€ æˆç•Œé¢çš„å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œä¸ºæ­¤Androidæä¾›äº†SurfaceViewæ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚ å¦‚æžœViewéœ€è¦é¢‘ç¹çš„åˆ·æ–°ï¼Œæˆ–è€…åˆ·æ–°çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œå°±éœ€è¦ä½¿ç”¨SurfaceView ä¼˜åŠ¿ Viewä¸­åˆ·æ–°é¢‘ç¹ï¼ŒOndraw()ä¼šé¢‘ç¹è°ƒç”¨,onDrawæ–¹æ³•æ‰§è¡Œçš„æ—¶é—´è¿‡ç¨‹ä¼šæŽ‰å¸§ï¼Œå‡ºçŽ°é¡µé¢å¡é¡¿ã€‚SurfaceViewä½¿ç”¨åŒç¼“å†²æŠ€æœ¯ï¼Œæé«˜äº†ç»˜åˆ¶é€Ÿåº¦ï¼Œå¯ä»¥ç¼“è§£è¿™ä¸€çŽ°è±¡ã€‚ SurfaceViewå¯ä»¥åœ¨å­çº¿ç¨‹æ›´æ–°UI,ä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ï¼Œæé«˜äº†å“åº”é€Ÿåº¦. https://www.jianshu.com/p/b037249e6d31 å•¥æ˜¯åŒç¼“å†²æŠ€æœ¯?https://blog.csdn.net/guanguanboy/article/details/99715643 Androidç¾¤è‹±ä¼  6.8 SurfaceViewä½¿ç”¨æ¨¡æ¿å¤§éƒ¨åˆ†ç»˜å›¾éƒ½æŒ‰ç…§æ¨¡æ¿æ¥ SurfaceViewTemplate 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071public class SurfaceViewTemplate extends SurfaceView implements SurfaceHolder.Callback, Runnable &#123; private SurfaceHolder mSurfaceHolder; //ç»˜å›¾çš„Canvas private Canvas mCanvas; //å­çº¿ç¨‹æ ‡å¿—ä½ private boolean mIsDrawing; public SurfaceViewTemplate(Context context) &#123; this(context, null); &#125; public SurfaceViewTemplate(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public SurfaceViewTemplate(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); initView(); &#125; @Override public void surfaceCreated(SurfaceHolder holder) &#123; mIsDrawing = true; //å¼€å¯å­çº¿ç¨‹ new Thread(this).start(); &#125; @Override public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) &#123; &#125; @Override public void surfaceDestroyed(SurfaceHolder holder) &#123; mIsDrawing = false; &#125; @Override public void run() &#123; while (mIsDrawing)&#123; draw(); &#125; &#125; //ç»˜å›¾é€»è¾‘ private void draw() &#123; try &#123; //èŽ·å¾—å½“å‰Canvaç»˜å›¾å¯¹è±¡ï¼ŒèŽ·å–çš„è¿˜æ˜¯ç»§ç»­ä¸Šæ¬¡çš„Canvaså¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡,å› æ­¤ä¹‹å‰çš„ç»˜å›¾éƒ½å°†è¢«ä¿ç•™ï¼Œå¦‚æžœéœ€è¦æ“¦é™¤ï¼Œåˆ™ç»˜åˆ¶å‰ï¼Œé€šè¿‡drawColor()æ–¹æ³•è¿›è¡Œæ¸…å±æ“ä½œ. mCanvas = mSurfaceHolder.lockCanvas(); //ç»˜åˆ¶èƒŒæ™¯ mCanvas.drawColor(Color.WHITE); //ç»˜å›¾ &#125;catch (Exception e)&#123; &#125;finally &#123; if (mCanvas != null)&#123; //é‡Šæ”¾canvaså¯¹è±¡å¹¶æäº¤ç”»å¸ƒ mSurfaceHolder.unlockCanvasAndPost(mCanvas); &#125; &#125; &#125; /** * åˆå§‹åŒ–View */ private void initView()&#123; mSurfaceHolder = getHolder(); mSurfaceHolder.addCallback(this); setFocusable(true); setKeepScreenOn(true); setFocusableInTouchMode(true); &#125;&#125; æ­£æ—‹æ›²çº¿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/** * https://www.jianshu.com/p/b037249e6d31 */public class SurfaceViewSinFun extends SurfaceView implements SurfaceHolder.Callback, Runnable &#123; private SurfaceHolder mSurfaceHolder; //ç»˜å›¾çš„Canvas private Canvas mCanvas; //å­çº¿ç¨‹æ ‡å¿—ä½ private boolean mIsDrawing; private int x = 0, y = 0; private Paint mPaint; private Path mPath; public SurfaceViewSinFun(Context context) &#123; this(context, null); &#125; public SurfaceViewSinFun(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public SurfaceViewSinFun(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); mPaint = new Paint(); mPaint.setColor(Color.BLACK); mPaint.setStyle(Paint.Style.STROKE); mPaint.setAntiAlias(true); mPaint.setStrokeWidth(5); mPath = new Path(); //è·¯å¾„èµ·å§‹ç‚¹(0, 100) mPath.moveTo(0, 100); initView(); &#125; @Override public void surfaceCreated(SurfaceHolder holder) &#123; mIsDrawing = true; new Thread(this).start(); &#125; @Override public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) &#123; &#125; @Override public void surfaceDestroyed(SurfaceHolder holder) &#123; mIsDrawing = false; &#125; @Override public void run() &#123; long start = System.currentTimeMillis(); while (mIsDrawing)&#123; drawSomething(); x += 1; y = (int)(100 * Math.sin(2 * x * Math.PI / 180) + 400); //åŠ å…¥æ–°çš„åæ ‡ç‚¹ mPath.lineTo(x, y); &#125; //æŽ§åˆ¶ç»˜åˆ¶é¢‘çŽ‡ long end = System.currentTimeMillis(); //50 - 100 if (end - start&lt;100)&#123; try &#123; Thread.sleep(100-(end-start)); //ç›¸å½“äºŽç»˜åˆ¶ä¸€æ¬¡æ€»çš„æ—¶é—´ 100ms &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; private void drawSomething() &#123; try &#123; //èŽ·å¾—canvaså¯¹è±¡ mCanvas = mSurfaceHolder.lockCanvas(); //ç»˜åˆ¶èƒŒæ™¯ mCanvas.drawColor(Color.WHITE); //ç»˜åˆ¶è·¯å¾„ mCanvas.drawPath(mPath, mPaint); &#125;catch (Exception e)&#123; &#125;finally &#123; if (mCanvas != null)&#123; //é‡Šæ”¾canvaså¯¹è±¡å¹¶æäº¤ç”»å¸ƒ mSurfaceHolder.unlockCanvasAndPost(mCanvas); &#125; &#125; &#125; /** * åˆå§‹åŒ–View */ private void initView()&#123; mSurfaceHolder = getHolder(); mSurfaceHolder.addCallback(this); setFocusable(true); setKeepScreenOn(true); setFocusableInTouchMode(true); &#125;&#125; é€šè¿‡draw()æ–¹æ³•æ‰€ä½¿ç”¨çš„é€»è¾‘æ—¶é•¿æ¥ç¡®å®šsleepçš„æ—¶é•¿ï¼Œè¿™æ˜¯ä¸€ä¸ªéžå¸¸é€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œæ¯æ¬¡ç»˜åˆ¶æ—¶é—´æŽ§åˆ¶åœ¨100ms ç”»æ¿ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788/** * ç”»æ¿ */class DrawingBoardView : SurfaceView, SurfaceHolder.Callback, Runnable &#123; private var mCanvas: Canvas? = null private var mSurfaceHolder: SurfaceHolder? = holder //å­çº¿ç¨‹æ ‡å¿—ä½ private var mIsDrawing = false private val x = 0 private var y: Int = 0 private var mPaint: Paint? = Paint().apply &#123; color = Color.BLACK style = Paint.Style.STROKE isAntiAlias = true strokeWidth = 5f &#125; private var mPath: Path? = null constructor(context: Context) : this(context, null) constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, 0) constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) &#123; &#125; init &#123; mSurfaceHolder?.addCallback(this) isFocusable = true keepScreenOn = true isFocusableInTouchMode = true mPath = Path() &#125; override fun surfaceChanged(holder: SurfaceHolder?, format: Int, width: Int, height: Int) &#123; &#125; override fun surfaceDestroyed(holder: SurfaceHolder?) &#123; &#125; override fun surfaceCreated(holder: SurfaceHolder?) &#123; mIsDrawing = true //å¼€å¯å­çº¿ç¨‹ Thread(this).start() &#125; override fun run() &#123; while (mIsDrawing) &#123; draw() &#125; &#125; private fun draw() &#123; try &#123; mCanvas = mSurfaceHolder?.lockCanvas() //SurfaceViewèƒŒæ™¯ mCanvas?.drawColor(Color.WHITE) mPaint?.let &#123; mPath?.let &#123; it1 -&gt; mCanvas?.drawPath(it1, it) &#125; &#125; &#125; catch (e: Exception) &#123; &#125; finally &#123; mCanvas?.let &#123; mSurfaceHolder?.unlockCanvasAndPost(it) &#125; &#125; &#125; override fun onTouchEvent(event: MotionEvent?): Boolean &#123; val x = event?.x val y = event?.y when (event?.action) &#123; MotionEvent.ACTION_DOWN -&gt; x?.let &#123; if (y != null) &#123; mPath?.moveTo(it, y) &#125; &#125; MotionEvent.ACTION_MOVE -&gt; x?.let &#123; if (y != null) &#123; mPath?.lineTo(it, y) &#125; &#125; &#125; return true &#125;&#125;","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"kotlin_begin","slug":"kotlin-begin","date":"2019-11-02T08:08:22.000Z","updated":"2023-01-02T03:31:39.211Z","comments":true,"path":"2019/11/02/kotlin-begin/","link":"","permalink":"https://noteforme.github.io/2019/11/02/kotlin-begin/","excerpt":"","text":"Kotlin in Actionå‡½æ•°ç±»åž‹1val d: (String, Int) -&gt; Unit &#x2F;&#x2F; å‡½æ•°ç±»åž‹ (String,Int) æŽ¥æ”¶å‚æ•° ï¼Œ Unit è¿”å›žç±»åž‹ kotlin lambda 1234567891011121314151617181920212223242526272829303132333435363738 val list &#x3D; listOf(&quot;apple&quot;, &quot;pear&quot;, &quot;banana&quot;, &quot;watermelon&quot;)&#x2F;&#x2F; val result &#x3D; list.maxBy &#123; it.length &#125; val lambda &#x3D; &#123; fruit: String -&gt; fruit.length &#125; &#x2F;&#x2F;æŽ¨å¯¼1&#x2F;&#x2F; val result &#x3D; list.maxBy(lambda) &#x2F;&#x2F;æŽ¨å¯¼2&#x2F;&#x2F; val result &#x3D; list.maxBy(&#123;fruit:String-&gt;&#x2F;&#x2F; fruit.length&#x2F;&#x2F; &#125;) &#x2F;&#x2F;æŽ¨å¯¼3&#x2F;&#x2F; val result &#x3D; list.maxBy(&#123; fruit: String -&gt;&#x2F;&#x2F; fruit.length&#x2F;&#x2F; &#125;) &#x2F;&#x2F;å¦‚æžœä¸€ä¸ªå‡½æ•°ï¼Œ ä»–æŽ¥æ”¶çš„æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯lambdaè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™æœ€åŽä¸€ä¸ªå‚æ•°å¯ä»¥ç§»åˆ°æ‹¬å·å¤–é¢ &#x2F;&#x2F;æŽ¨å¯¼4&#x2F;&#x2F; val result &#x3D; list.maxBy&#123; fruit: String -&gt;&#x2F;&#x2F; fruit.length &#x2F;&#x2F;å¦‚æžœä¸€ä¸ªå‡½æ•° ,æ‹¬å·å¯ä»¥çœç•¥&#x2F;&#x2F; &#125; &#x2F;&#x2F;æŽ¨å¯¼4&#x2F;&#x2F; val result &#x3D; list.maxBy&#123; fruit -&gt;&#x2F;&#x2F; fruit.length &#x2F;&#x2F;kotlinç±»åž‹æŽ¨å¯¼æœºåˆ¶ï¼Œå‚æ•°ç±»åž‹å¯ä»¥çœç•¥&#x2F;&#x2F; &#125; &#x2F;&#x2F;æŽ¨å¯¼5 val result &#x3D; list.maxBy&#123; it.length &#x2F;&#x2F; lmbdaè¡¨è¾¾å¼åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å¯ä»¥çœç•¥ æ”¹ç”¨itæ›¿ä»£ &#125; println(result) 1234567891011121314fun &lt;T,R:Comparable&lt;R&gt;&gt; List&lt;T&gt;.findMax(block: (T) -&gt; R):T?&#123; if (isEmpty()) return null var maxElement &#x3D;get(0) &#x2F;&#x2F;èŽ·å–Listä¸Šä¸‹æ–‡çš„ ç¬¬ä¸€ä¸ªå…ƒç´  var maxValue &#x3D; block(maxElement) &#x2F;&#x2F;block() èµ°åˆ°äº† lambdaæ–¹æ³•ä¸­ for(element in this)&#123; var value &#x3D; block(element) if (value&gt; maxValue)&#123; maxElement &#x3D; element maxValue &#x3D; value &#125; &#125; return maxElement&#125; 1234&#x2F;&#x2F; val result &#x3D; list.findMax(lambda) val result &#x3D; list.findMax&#123;it.length&#125; println(result) https://www.bilibili.com/s/video/BV1Ut4y127xM 1.Javaå®šä¹‰çš„æŽ¥å£ 2.å•æŠ½è±¡æ–¹æ³• Defining and calling functions 3.2.3 Getting rid of static utility classes: top-level functions and properties 12345public class JoinJava &#123; public static void johnToString()&#123; System.out.println(&quot;johnToString java&quot;); &#125;&#125; 123456package com.kotlin3fun johnToString()&#123; println(&quot;johnToString kotlin&quot;)&#125; 1234fun main(args: Array&lt;String&gt;) &#123; johnToString() JoinJava.johnToString()&#125; 3.3.3 extension functions 123456789101112131415161718fun String.lastChar() &#x3D; this.get(this.length-1)fun String.addName() &#x3D; this + &quot; john&quot; &#x2F;&#x2F;this èŽ·å–åˆ°Stringç±»çš„ä¸Šä¸‹æ–‡val String.lastLetter: Char get()&#x3D; get(length-1) &#x2F;&#x2F;æ‹“å±•å±žæ€§fun String.hellowrod()&#123; println(&quot;hello world&quot;)&#125;fun String.cpaitalEnd():String&#123; if (this.isEmpty()) return &quot;&quot;; val charArray &#x3D; this.toCharArray() charArray[length-1] &#x3D; charArray[length-1].toUpperCase() return String(charArray)&#125; 1234567891011121314import com.kotlin3.t3_3_2.addNameimport com.kotlin3.t3_3_2.lastCharimport com.kotlin3.t3_3_2.lastLetterfun main(args: Array&lt;String&gt;) &#123; println(&quot;kotlin&quot;.lastChar()) println(&quot;kotlin&quot;.addName()) print(&quot;kotlin&quot;.lastLetter) &quot;&quot;.hellowrod() &#x2F;&#x2F;è¾“å‡º hello world println(&quot;code&quot;.cpaitalEnd()) &#x2F;&#x2F; codE&#125; Conventions used 7.3 å¦‚æžœç”¨ 10..20æž„å»ºä¸€ä¸ªæ™®é€šçš„ åŒºé—´(é—­åŒºé—´)ï¼Œè¯¥åŒºé—´åˆ™åŒ…æ‹¬10åˆ°20çš„æ‰€æœ‰æ•°å­—ï¼Œ åŒ…æ‹¬20ã€‚å¼€åŒºé—´10 until 20 åŒ…æ‹¬ä»Ž 10 åˆ°å‡¹çš„æ•°å­—ï¼Œä½†ä¸åŒ…æ‹¬ 20ã€‚çŸ©å½¢ç±»é€šå¸¸å®šä¹‰æˆè¿™æ ·ï¼Œå®ƒçš„åº•éƒ¨å’Œå³ ä¾§åæ ‡ä¸æ˜¯çŸ©å½¢çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åœ¨è¿™é‡Œä½¿ç”¨å¼€åŒº é—´æ˜¯åˆé€‚çš„ ã€‚ Delegated - classs 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&#x2F;&#x2F;åŽŸæ–‡é“¾æŽ¥ï¼šhttps:&#x2F;&#x2F;blog.csdn.net&#x2F;xlh1191860939&#x2F;article&#x2F;details&#x2F;99641573interface ServiceApi &#123; fun login(userName: String, password: String)&#125;class Retrofit : ServiceApi &#123; override fun login(userName: String, password: String) &#123; println(&quot;login successfully.&quot;) &#125;&#125;&#x2F;** * ä¸ç”¨å§”æ‰˜ *&#x2F;&#x2F;&#x2F;class RemoteRepository : ServiceApi, NewsApi &#123;&#x2F;&#x2F;&#x2F;&#x2F; private val serverApi: ServiceApi &#x3D; Retrofit()&#x2F;&#x2F; private val retrofitApi: NewsApi &#x3D; NewsApiImpl()&#x2F;&#x2F;&#x2F;&#x2F; override fun login(username: String, password: String) &#123;&#x2F;&#x2F; serverApi.login(username, password)&#x2F;&#x2F; &#125;&#x2F;&#x2F;&#x2F;&#x2F; override fun getNewsList() &#123;&#x2F;&#x2F; retrofitApi.getNewsList()&#x2F;&#x2F; &#125;&#x2F;&#x2F;&#125;&#x2F;* * ä½¿ç”¨kotlin å§”æ‰˜ç”¨ä¸‹é¢ç®€åŒ– *&#x2F;class RemoteRepository(): ServiceApi by Retrofit() , NewsApi by NewsApiImpl()interface NewsApi &#123; fun getNewsList()&#125;class NewsApiImpl : NewsApi &#123; override fun getNewsList() &#123; println(&quot;NewsApiImpl: getNewsList()&quot;) &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val repository &#x3D; RemoteRepository() repository.login(&quot;David&quot;, &quot;123456&quot;) &#x2F;&#x2F;è¾“å‡º login successfully. repository.getNewsList()&#125; 7.5.2 ä½¿ç”¨å§”æ‰˜å±žæ€§:æƒ°æ€§åˆå§‹åŒ–å’Œ â€œby lazy()â€ 123456789101112131415161718192021222324252627282930&#x2F;&#x2F;class Person(val name: String) &#123;&#x2F;&#x2F; private var _emails: List&lt;Email&gt;? &#x3D; null&#x2F;&#x2F; val emails: List&lt;Email&gt;&#x2F;&#x2F; get() &#123;&#x2F;&#x2F; if (_emails &#x3D;&#x3D; null) &#123;&#x2F;&#x2F; _emails &#x3D; loadEmails(this)&#x2F;&#x2F; &#125;&#x2F;&#x2F; return _emails!!&#x2F;&#x2F; &#125;&#x2F;&#x2F;&#125;&#x2F;&#x2F;ä½ æœ‰ä¸€ä¸ªå±žæ€§ï¼Œ emailsï¼Œç”¨æ¥å­˜å‚¨è¿™ä¸ªå€¼ï¼Œ è€Œå¦ä¸€ä¸ª emailsï¼Œç”¨æ¥æä¾›å¯¹å±žæ€§çš„è¯»å–è®¿ é—® ã€‚ä½ éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå±žæ€§ ï¼Œå› ä¸ºå±žæ€§ å…·æœ‰ä¸åŒçš„ç±»åž‹: emails å¯ä»¥ä¸ºç©ºï¼Œè€Œ emails ä¸ºéžç©ºã€‚è¿™ç§æŠ€æœ¯ç»å¸¸ä¼šä½¿ç”¨åˆ°ï¼Œ å€¼å¾—ç†Ÿç»ƒæŽŒæ¡ã€‚class Person(val name:String)&#123; val emails by lazy&#123; loadEmails(this) &#125;&#125;fun loadEmails(person: Person): List&lt;Email&gt;? &#123; println (&quot;load emails for $&#123;person.name &#125;&quot; ) return listOf()&#125;fun main(args: Array&lt;String&gt;) &#123; val p &#x3D; Person(&quot;Alice&quot;) p.emails p.emails&#125; https://juejin.im/post/5e1288d86fb9a048217a19d9 https://zhuanlan.zhihu.com/p/65914552 å§”æ‰˜Shareprefernceå®žæˆ˜ ç®€æ˜“ç‰ˆæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293class DelegateSharedPreferencesUtils &#123; object User : Delegates() &#123; override fun getSharedPreferencesName(): String &#x3D; this.javaClass.simpleName var name by string() var phone by long() &#125; abstract class Delegates &#123; private val preferences: SharedPreferences by lazy &#123; AppUtil.getApp().applicationContext.getSharedPreferences( getSharedPreferencesName(), Context.MODE_PRIVATE ) &#125; abstract fun getSharedPreferencesName(): String fun int(defaultValue: Int &#x3D; 0) &#x3D; object : ReadWriteProperty&lt;Any, Int&gt; &#123; override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Int &#123; return preferences.getInt(property.name, defaultValue) &#125; override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Int) &#123; preferences.edit().putInt(property.name, value).apply() &#125; &#125; fun string(defaultValue: String? &#x3D; null) &#x3D; object : ReadWriteProperty&lt;Any, String?&gt; &#123; override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): String? &#123; return preferences.getString(property.name, defaultValue) &#125; override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: String?) &#123; preferences.edit().putString(property.name, value).apply() &#125; &#125; fun long(defaultValue: Long &#x3D; 0L) &#x3D; object : ReadWriteProperty&lt;Any, Long&gt; &#123; override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Long &#123; return preferences.getLong(property.name, defaultValue) &#125; override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Long) &#123; preferences.edit().putLong(property.name, value).apply() &#125; &#125; fun boolean(defaultValue: Boolean &#x3D; false) &#x3D; object : ReadWriteProperty&lt;Any, Boolean&gt; &#123; override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Boolean &#123; return preferences.getBoolean(property.name, defaultValue) &#125; override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Boolean) &#123; preferences.edit().putBoolean(property.name, value).apply() &#125; &#125; fun float(defaultValue: Float &#x3D; 0.0f) &#x3D; object : ReadWriteProperty&lt;Any, Float&gt; &#123; override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Float &#123; return preferences.getFloat(property.name, defaultValue) &#125; override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Float) &#123; preferences.edit().putFloat(property.name, value).apply() &#125; &#125; fun setString(defaultValue: Set&lt;String&gt;? &#x3D; null) &#x3D; object : ReadWriteProperty&lt;DelegateSharedPreferencesUtils, Set&lt;String&gt;?&gt; &#123; override fun getValue( thisRef: DelegateSharedPreferencesUtils, property: KProperty&lt;*&gt; ): Set&lt;String&gt;? &#123; return preferences.getStringSet(property.name, defaultValue) &#125; override fun setValue( thisRef: DelegateSharedPreferencesUtils, property: KProperty&lt;*&gt;, value: Set&lt;String&gt;? ) &#123; preferences.edit().putStringSet(property.name, value).apply() &#125; &#125; fun clearAll() &#123; preferences.edit().clear().apply() &#125; &#125;&#125; 12345DelegateSharedPreferencesUtils.User.name &#x3D; &quot;john&quot; &#x2F;&#x2F;å­˜bt_get.setOnClickListener &#123; Timber.i(&quot;bt_get &quot;+DelegateSharedPreferencesUtils.User.name) &#x2F;&#x2F;å–&#125; https://wazing.github.io/2019/05/23/kotlin-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A7%94%E6%89%98%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0SharedPreferences/ Pro version 12345678910111213141516171819202122232425262728293031object SpUtil &#123; val SP by lazy &#123; AppUtil.getApp().getSharedPreferences(&quot;default&quot;, Context.MODE_PRIVATE) &#125; &#x2F;&#x2F;è¯» SP å­˜å‚¨é¡¹ fun &lt;T&gt; getValue(name: String, default: T): T &#x3D; with(SP) &#123; val res: Any &#x3D; when (default) &#123; is Long -&gt; getLong(name, default) is String -&gt; getString(name, default) ?: &quot;&quot; is Int -&gt; getInt(name, default) is Boolean -&gt; getBoolean(name, default) is Float -&gt; getFloat(name, default) else -&gt; throw java.lang.IllegalArgumentException() &#125; res as T &#125; &#x2F;&#x2F;å†™ SP å­˜å‚¨é¡¹ fun &lt;T&gt; putValue(name: String, value: T) &#x3D; with(SP.edit()) &#123; when (value) &#123; is Long -&gt; putLong(name, value) is String -&gt; putString(name, value) is Int -&gt; putInt(name, value) is Boolean -&gt; putBoolean(name, value) is Float -&gt; putFloat(name, value) else -&gt; throw IllegalArgumentException(&quot;This type can&#39;t be saved into Preferences&quot;) &#125;.apply() &#125;&#125; 123456789101112131415161718192021222324252627&#x2F;** * @author xiaofei_dev * @desc å®šä¹‰çš„ SP å­˜å‚¨é¡¹ *&#x2F;object SpBase&#123; &#x2F;&#x2F;SP å­˜å‚¨é¡¹çš„é”® private const val CONTENT_SOMETHING &#x3D; &quot;CONTENT_SOMETHING&quot; &#x2F;&#x2F; è¿™å°±å®šä¹‰äº†ä¸€ä¸ª SP å­˜å‚¨é¡¹ &#x2F;&#x2F; æŠŠ SP çš„è¯»å†™æ“ä½œå§”æ‰˜ç»™ SPDelegates ç±»çš„ä¸€ä¸ªå®žä¾‹ï¼ˆä½¿ç”¨ by å…³é”®å­—ï¼Œby æ˜¯ Kotlin è¯­è¨€å±‚é¢çš„ä¸€ä¸ªåŽŸè¯­ï¼‰ï¼Œ &#x2F;&#x2F; æ­¤æ—¶è®¿é—® SpBase çš„ contentSomething (ä½ å¯ä»¥ç®€å•æŠŠå…¶çœ‹æˆ Java é‡Œçš„ä¸€ä¸ªé™æ€å˜é‡)å±žæ€§å³æ˜¯åœ¨è¯»å– SP çš„å­˜å‚¨é¡¹ï¼Œ &#x2F;&#x2F; ç»™ contentSomething å±žæ€§èµ‹å€¼å³æ˜¯å†™ SP çš„æ“ä½œï¼Œå°±è¿™ä¹ˆç®€å• &#x2F;&#x2F; è¿™é‡Œç”¨åˆ°çš„ SPDelegates å¯¹è±¡çš„ getValue æ–¹æ³•çš„ thisRefï¼ˆè§ä¸Šæ–‡ï¼‰ å‚æ•°çš„ç±»åž‹æ­£æ˜¯å¤–å±‚çš„ SpBase var contentSomething: String by SPDelegates(CONTENT_SOMETHING, &quot;æˆ‘æ˜¯ä¸€ä¸ª SP å­˜å‚¨é¡¹ï¼Œç‚¹å‡»ç¼–è¾‘æˆ‘&quot;)&#125;class SPDelegates&lt;T&gt;(private val key: String, private val default: T) : ReadWriteProperty&lt;Any?, T&gt; &#123; override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T &#123; return SpUtil.getValue(key, default) &#125; override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) &#123; SpUtil.putValue(key, value) &#125;&#125; 123456SpBase.contentSomething &#x3D; &quot;æ˜¾ç¤º&quot; bt_get.setOnClickListener &#123; Timber.i(&quot;bt_get &quot;+SpBase.contentSomething)&#125; https://juejin.im/post/5e1bbf396fb9a02ffe702610 Operator FindViewById â€‹ Kotlinä¸ç”¨findViewById æ³¨æ„åœ¨Fragmetä¸­ éœ€è¦åœ¨onViewCreatedåŽä½¿ç”¨ â€‹ https://blog.csdn.net/hust_twj/article/details/80290362 The reason why we ignore findviewbyId https://antonioleiva.com/kotlin-android-extensions/ ? 123456789&#x2F;&#x2F;kotlin:a?.foo()&#x2F;&#x2F;ç›¸å½“äºŽjava:if(a!&#x3D;null)&#123; a.foo();&#125;else&#123; null &#125; !! 123456789&#x2F;&#x2F;kotlin:a!!.foo()&#x2F;&#x2F;ç›¸å½“äºŽjava: if(a!&#x3D;null)&#123; a.foo();&#125;else&#123; throw new KotlinNullPointException();&#125; null or empty 1234data &#x3D; &quot; &quot; &#x2F;&#x2F; this is a text with blank space println(data.isNullOrBlank()?.toString()) &#x2F;&#x2F;trueprintln(data.isNullOrEmpty()?.toString()) &#x2F;&#x2F;false Elvis 1234val ss:String?&#x3D;nullprintln(ss ?: &quot;1&quot;)&gt;&gt; 1 https://developer.android.com/samples/?language=kotlin https://developer.android.com/kotlin/get-started https://www.jianshu.com/p/9fb9a1ab6c31 https://juejin.im/post/5aa64556f265da238c3a51d3 é«˜çº§ç”¨æ³•https://www.cnblogs.com/Jetictors/p/9225557.html byhttps://blog.csdn.net/wzgiceman/article/details/82689135 oprator https://zhuanlan.zhihu.com/p/26546977 kotlinç»†èŠ‚https://juejin.im/post/5eeffd73f265da02ec0bc42e apply 123456val mDialPaint &#x3D; Paint(Paint.ANTI_ALIAS_FLAG)mDialPaint.apply &#123; color &#x3D; Color.parseColor(&quot;#3333333&quot;) strokeWidth &#x3D; arcWidth*8 textSize &#x3D; 65f &#125; coroutineshttps://www.kotlincn.net/docs/reference/coroutines/coroutines-guide.html https://juejin.im/post/5eea757a51882565ae5cb287 https://blog.csdn.net/xlh1191860939/article/details/99641573 Android kotlinè®¡åˆ’ktxä¸æ˜¯é‡å¿ƒï¼Œé‡å¿ƒåœ¨kotlinåº“å¦‚åç¨‹,paging3.0å’Œcompose https://www.bilibili.com/video/BV1fV411r7Lw string to list. list. to stringhttps://www.bezkoder.com/kotlin-convert-string-list/ constval åŠ ä¸åŠ constçš„åŒºåˆ« Const â€˜valâ€™ are only allowed on top level, in named objects, or in companion objects conståªèƒ½åœ¨ä¸‹é¢3ç§æƒ…å†µåŠ  12345678910111213val name = &quot;jon&quot;const val age = &quot;joo&quot;object ConstantObject &#123; val name = &quot;jon&quot; const val age = &quot;joo&quot;&#125;class ConstantClass &#123; companion object &#123; val name = &quot;jon&quot; const val age = &quot;joo&quot; &#125;&#125; ä¸Šé¢ä¸‰ç§ åç¼–è¯‘åŽï¼Œéƒ½æ˜¯ä¸‹é¢è¿™ç§å½¢å¼ 123456789@NotNullprivate static final String name = &quot;jon&quot;;@NotNullpublic static final String age = &quot;joo&quot;;@NotNullpublic static final String getName() &#123; return name;&#125; ä¸åŠ const , privateä¿®é¥°ï¼Œé€šè¿‡getèŽ·å–ï¼Œ ä¼šæœ‰ä¸€ç‚¹ç‚¹æ•ˆçŽ‡å½±å“ https://www.cnblogs.com/liuliqianxiao/p/7253116.html constä½¿ç”¨ äºŒç»´æ•°ç»„two dimensional array 1val twoD = Array(4,&#123;intArray(3)&#125;) 4è¡Œ3åˆ—,åƒä¸‹é¢çš„è¿™æ · è¿™ä¸€é¢˜æœ‰2ä¸ªæ³¨æ„ç‚¹ é€€å‡ºæ¡ä»¶æ˜¯æ ¹æ®æ•°ç»„å­—æ¯ä¸ªæ•°æ¥çš„ï¼Œä¹Ÿå°±æ ‘çš„é«˜åº¦ã€‚indexæ¡ä»¶ åœ¨éåŽ†è¿‡ç¨‹ä¸­æ˜¯ä¸ç”¨è®¾ç½®startIndexçš„ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯ä»Ž0å¼€å§‹çš„æ–°çš„3ä¸ªå­—æ¯. è¿™é‡Œå¯ä»¥ç†è§£è¾“å…¥å­—æ¯ä¸ªæ•°æ ‘æ ‘çš„é«˜åº¦ï¼Œé‡Œé¢forå¾ªçŽ¯æ˜¯æŽ§åˆ¶å®½åº¦ éšæƒ³å½•è§£æ³• https://www.bilibili.com/video/BV1yV4y1V7Ug/ 123456789101112131415161718192021222324252627282930313233 val result = ArrayList&lt;String&gt;() val pathStr = StringBuilder() fun letterCombinations(digits: String): List&lt;String&gt; &#123; val arrayList = arrayListOf( null, null, (&quot;abc&quot;), (&quot;def&quot;), (&quot;ghi&quot;), (&quot;jkl&quot;), (&quot;mno&quot;), (&quot;pqrs&quot;), (&quot;tuv&quot;), (&quot;wxyz&quot;) ) backTrack(arrayList, digits, 0) return result &#125; private fun backTrack(arrayList: ArrayList&lt;String?&gt;, digits: String, index: Int) &#123; if (index == digits.length) &#123; // index==è¾“å…¥ä¸ªæ•°ï¼Œæ‰èƒ½é€€å‡ºï¼Œå› ä¸ºå­—æ¯è¿˜è¦å¤„ç† if (pathStr.isNotEmpty()) result.add(String(pathStr)) return &#125; val digit = digits[index] - &#x27;0&#x27; val item = arrayList[digit] ?: return for (i in item.indices) &#123; pathStr.append(item[i]) backTrack(arrayList, digits, index + 1) pathStr.deleteCharAt(pathStr.length - 1) &#125; &#125;&#125; index + 1ä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Œè¿™é‡Œæ˜¯æ²¡æœ‰çš„ï¼Œå¦‚æžœè¾“å…¥â€23â€, è¿™é‡Œåˆ°äº†ä¸‹ä¸€å±‚==2è¿›å…¥æ–¹æ³•åŽå°±è¦é€€å‡º.","categories":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"}],"tags":[]},{"title":"room","slug":"room","date":"2019-09-20T02:22:52.000Z","updated":"2021-08-19T11:11:44.316Z","comments":true,"path":"2019/09/20/room/","link":"","permalink":"https://noteforme.github.io/2019/09/20/room/","excerpt":"","text":"https://developer.android.com/training/data-storage/room Room https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0 https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0 kotlin need familiar [basic coroutines]( æ•°æ®åº“åŸºæœ¬æ“ä½œ ä¸»é”® æ¯ä¸ªå®žä½“å¿…é¡»å®šä¹‰è‡³å°‘1ä¸ªå­—æ®µä½œä¸ºä¸»é”®ã€‚å³ä½¿åªæœ‰1ä¸ªå­—æ®µï¼Œä»ç„¶éœ€è¦ç”¨@PrimaryKeyæ³¨è§£å­—æ®µã€‚æ­¤å¤–ï¼Œå¦‚æžœæ‚¨æƒ³Roomè‡ªåŠ¨åˆ†é…IDsç»™å®žä½“ï¼Œåˆ™å¯ä»¥è®¾ç½®@PrimaryKeyçš„autoGenerateå±žæ€§ã€‚å¦‚æžœå®žä½“å…·æœ‰å¤åˆä¸»é”®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨@Entityæ³¨è§£çš„primaryKeyså±žæ€§ Entity 12345678@Entitypublic class BleData &#123; @PrimaryKey public int id; public long createDttm; public String bleParam;&#125; Dao https://developer.android.com/topic/libraries/architecture/room https://github.com/googlecodelabs/android-room-with-a-view https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0 https://github.com/googlecodelabs/android-room-with-a-view/tree/kotlin https://blog.skymxc.com/2018/04/15/Room/ https://www.jianshu.com/p/0ed8b17a199e ç´¢å¼•ä¸ºä»€ä¹ˆåŠ å¿«è®¿é—®é€Ÿåº¦ æ•°æ®åº“è¿ç§»https://www.jianshu.com/p/72eeaded8913 https://blog.csdn.net/a254837127/article/details/84564545 https://developer.android.com/training/data-storage/room#java https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0)","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"DB","slug":"DB","permalink":"https://noteforme.github.io/tags/DB/"}]},{"title":"RxJava02","slug":"RxJava02","date":"2019-09-19T03:50:24.000Z","updated":"2021-08-19T11:11:44.237Z","comments":true,"path":"2019/09/19/RxJava02/","link":"","permalink":"https://noteforme.github.io/2019/09/19/RxJava02/","excerpt":"","text":"æ“ä½œç¬¦ retryWhen retryWhenæ˜¯æ”¶åˆ°onErroråŽè§¦å‘æ˜¯å¦è¦é‡è®¢é˜…çš„è¯¢é—®ï¼Œè€ŒrepeatWhenæ˜¯é€šè¿‡onCompleteè§¦å‘ã€‚ https://blog.csdn.net/qq_35599978/article/details/80290252 https://www.jianshu.com/p/d135f19e045c zipä¸“ç”¨äºŽåˆå¹¶äº‹ä»¶ï¼Œè¯¥åˆå¹¶ä¸æ˜¯è¿žæŽ¥ï¼ˆè¿žæŽ¥æ“ä½œç¬¦åŽé¢ä¼šè¯´ï¼‰ï¼Œè€Œæ˜¯ä¸¤ä¸¤é…å¯¹ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œæœ€ç»ˆé…å¯¹å‡ºçš„ Observable å‘å°„äº‹ä»¶æ•°ç›®åªå’Œå°‘çš„é‚£ä¸ªç›¸åŒã€‚ concatå•ä¸€çš„æŠŠä¸¤ä¸ªå‘å°„å™¨è¿žæŽ¥æˆä¸€ä¸ªå‘å°„å™¨ FlatMapå®ƒå¯ä»¥æŠŠä¸€ä¸ªå‘å°„å™¨ Observable é€šè¿‡æŸç§æ–¹æ³•è½¬æ¢ä¸ºå¤šä¸ª Observables,flatMap å¹¶ä¸èƒ½ä¿è¯äº‹ä»¶çš„é¡ºåº å¦‚æžœéœ€è¦ä¿è¯ï¼Œéœ€è¦ç”¨åˆ°æˆ‘ä»¬ä¸‹é¢è¦è®²çš„ ConcatMap ConcatMapdoOnNextè®©è®¢é˜…è€…åœ¨æŽ¥æ”¶åˆ°æ•°æ®ä¹‹å‰å¯ä»¥åšå…¶ä»–äº‹æƒ…,èŽ·å–åˆ°æ•°æ®ä¹‹å‰æƒ³å…ˆä¿å­˜ä¸€ä¸‹å®ƒ skip skip(2) è·³è¿‡countä¸ªæ•°å¼€å§‹æŽ¥æ”¶ takeæœ€å¤šæŽ¥æ”¶countä¸ªæ•°æ® just1Observable.just(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;) ç®€å•çš„å‘å°„å™¨ä¾æ¬¡è°ƒç”¨ onNext() æ–¹æ³• SingleSingle åªä¼šæŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè€Œ SingleObserver åªä¼šè°ƒç”¨ onError() æˆ–è€… onSuccess() distinctåŽ»é‡æ“ä½œç¬¦ï¼Œç®€å•çš„ä½œç”¨å°±æ˜¯åŽ»é‡ debouncedeferæ¯æ¬¡è®¢é˜…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Observableï¼Œå¹¶ä¸”å¦‚æžœæ²¡æœ‰è¢«è®¢é˜…ï¼Œå°±ä¸ä¼šäº§ç”Ÿæ–°çš„ lastæ“ä½œç¬¦ä»…å–å‡ºå¯è§‚å¯Ÿåˆ°çš„æœ€åŽä¸€ä¸ªå€¼ mergewindowæŒ‰ç…§å®žé™…åˆ’åˆ†çª—å£ï¼Œå°†æ•°æ®å‘é€ç»™ä¸åŒçš„ Observable empty() &amp; never() &amp; error() empty() ï¼š ç›´æŽ¥å‘é€ onComplete() äº‹ä»¶ never()ï¼šä¸å‘é€ä»»ä½•äº‹ä»¶ error()ï¼šå‘é€ onError() äº‹ä»¶ https://www.jianshu.com/p/c08bfc58f4b6","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"RxJava","slug":"RxJava","permalink":"https://noteforme.github.io/tags/RxJava/"}]},{"title":"ThreadStop","slug":"ThreadStop","date":"2019-08-30T02:00:40.000Z","updated":"2021-08-19T11:11:44.252Z","comments":true,"path":"2019/08/30/ThreadStop/","link":"","permalink":"https://noteforme.github.io/2019/08/30/ThreadStop/","excerpt":"","text":"https://segmentfault.com/a/1190000007961347 https://www.cnblogs.com/xingele0917/p/3994468.html","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"GreenDao","slug":"GreenDao","date":"2019-08-12T09:42:58.000Z","updated":"2021-08-19T11:11:43.904Z","comments":true,"path":"2019/08/12/GreenDao/","link":"","permalink":"https://noteforme.github.io/2019/08/12/GreenDao/","excerpt":"","text":"åŸºæœ¬ä½¿ç”¨æ•°æ®åº“å®šä¹‰ Bean schemaï¼šå‘ŠçŸ¥GreenDaoå½“å‰å®žä½“å±žäºŽå“ªä¸ªschema activeï¼šæ ‡è®°ä¸€ä¸ªå®žä½“å¤„äºŽæ´»è·ƒçŠ¶æ€ï¼Œæ´»åŠ¨å®žä½“æœ‰æ›´æ–°ã€åˆ é™¤å’Œåˆ·æ–°æ–¹æ³• nameInDbï¼šåœ¨æ•°æ®åº“ä¸­ä½¿ç”¨çš„åˆ«åï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯å®žä½“çš„ç±»å indexesï¼šå®šä¹‰ç´¢å¼•ï¼Œå¯ä»¥è·¨è¶Šå¤šä¸ªåˆ— createInDbï¼šæ ‡è®°åˆ›å»ºæ•°æ®åº“è¡¨ åŸºç¡€å±žæ€§æ³¨è§£ @Idï¼šä¸»é”® Long åž‹ï¼Œå¯ä»¥é€šè¿‡@Id(autoincrement = true)è®¾ç½®è‡ªå¢žé•¿@Propertyï¼šè®¾ç½®ä¸€ä¸ªéžé»˜è®¤å…³ç³»æ˜ å°„æ‰€å¯¹åº”çš„åˆ—åï¼Œé»˜è®¤æ˜¯ä½¿ç”¨å­—æ®µåï¼Œä¾‹å¦‚ï¼š@Property(nameInDb = â€œnameâ€)@NotNullï¼šè®¾ç½®æ•°æ®åº“è¡¨å½“å‰åˆ—ä¸èƒ½ä¸ºç©º@Transientï¼šæ·»åŠ æ­¤æ ‡è®°åŽä¸ä¼šç”Ÿæˆæ•°æ®åº“è¡¨çš„åˆ— ç´¢å¼•æ³¨è§£ @Indexï¼šä½¿ç”¨@Indexä½œä¸ºä¸€ä¸ªå±žæ€§æ¥åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œé€šè¿‡nameè®¾ç½®ç´¢å¼•åˆ«åï¼Œä¹Ÿå¯ä»¥é€šè¿‡uniqueç»™ç´¢å¼•æ·»åŠ çº¦æŸ@Uniqueï¼šå‘æ•°æ®åº“æ·»åŠ äº†ä¸€ä¸ªå”¯ä¸€çš„çº¦æŸ å…³ç³»æ³¨è§£ @ToOneï¼šå®šä¹‰ä¸Žå¦ä¸€ä¸ªå®žä½“ï¼ˆä¸€ä¸ªå®žä½“å¯¹è±¡ï¼‰çš„å…³ç³»@ToManyï¼šå®šä¹‰ä¸Žå¤šä¸ªå®žä½“å¯¹è±¡çš„å…³ç³» https://blog.csdn.net/speedystone/article/details/72769793 @Convert è‡ªå®šä¹‰ç±»åž‹123456public @interface Convert &#123; Class&lt;? extends PropertyConverter&gt; converter(); Class columnType(); //å¯ä»¥åœ¨DBä¸­ä¿ç•™çš„åˆ—çš„ç±»ã€‚è¿™ä»…é™äºŽgreenDAOåŽŸç”Ÿæ”¯æŒçš„æ‰€æœ‰javaç±»ã€‚&#125;@Convert(converter = NoteTypeConverter.class, columnType = String.class) //ç±»åž‹è½¬æ¢ç±»ï¼Œè‡ªå®šä¹‰çš„ç±»åž‹åœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„ç±»åž‹private NoteType type; //åœ¨ä¿å­˜åˆ°æ•°æ®åº“æ—¶ä¼šå°†è‡ªå®šä¹‰çš„ç±»åž‹ NoteType é€šè¿‡ NoteTypeConverter è½¬æ¢ä¸ºæ•°æ®åº“æ”¯æŒçš„ String ç±»åž‹ã€‚åä¹‹äº¦ç„¶ Basic123456789101112131415161718192021@Entitypublic class Student &#123; @Id(autoincrement = true) // id é€’å¢ž Long id; @Unique public int studentNo; public int age; //å¹´é¾„ @Property(nameInDb = &quot;usePhone&quot;) //æ•°æ®åº“ä¸­æ˜ å°„çš„å­—æ®µå°±æ˜¯ usePhone public String telPhone;//æ‰‹æœºå· @Transient //æ•°æ®åº“ä¸­ä¸ä¼šåˆ›å»ºå¯¹åº”çš„å­—æ®µ String sex; //æ€§åˆ« String name;//å§“å String address;//å®¶åº­ä½å€ String schoolName;//å­¦æ ¡åå­— String grade;//å‡ å¹´çº§ private boolean statue; insert insertData 12345678910111213141516171819for (int i = 0; i &lt; 4; i++) &#123; Student student = new Student(); student.setStudentNo(i); student.age = new Random().nextInt() + 10; student.telPhone = RandomValue.getTel(); student.setName(RandomValue.getChineseName()); if (i % 2 == 0) &#123; student.setSex(&quot;ç”·&quot;); &#125; else &#123; student.setSex(&quot;å¥³&quot;); &#125; if (i == 0) &#123; student.setStatue(true); &#125; student.setAddress(RandomValue.getRoad()); student.setSchoolName(RandomValue.getSchoolName()); long dsoi = studaoImpl.insert(student); Timber.i(&quot;insertData &quot; + dsoi);&#125; insertOrReplace 1234Student student = new Student();student.setStudentNo(1);student.setName(&quot;æˆ‘æ”¹åäº†&quot;);long df = studaoImpl.insertOrReplace(student); updateData 1234Student student = new Student();student.setStudentNo(1);student.setName(&quot;æˆ‘æ”¹åäº†&quot;);studaoImpl.update(student); delete 123Student student = new Student();student.setId(1l);studaoImpl.delete(student); deleteAll â€‹ studaoImpl.deleteAll(); query QueryAll 12List&lt;Student&gt; dd = studaoImpl.loadAll();studaoImpl.loadAll().forEach(current-&gt;Timber.i(current.toString())); // print student QueryLastState 123456List&lt;Student&gt; sList = studaoImpl.queryBuilder().limit(1).where(StudentDao.Properties.Statue.eq(false)).list();Timber.i(sList.toString());Student student = sList.get(0);student.setStatue(true);studaoImpl.update(student);sList = studaoImpl.queryBuilder().limit(1).where(StudentDao.Properties.Statue.eq(false)).list(); oneToOne1234567@Entitypublic class Person &#123; @Id(autoincrement = true) private long pid; private String name; private int age;&#125; 123456789@Entitypublic class CreditCard &#123; @Id(autoincrement = true) private long cid; private long pid; //idcardå’Œpersonæ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼Œå¤–é”®ä¸ºpersonId @ToOne(joinProperty = &quot;pid&quot;) private Person person; &#125; insert12345678Long pid = 6L;//personIdPerson p = new Person(pid, &quot;xiaoMing&quot;, 18);mPersonDao.insert(p);Long cid = 2L;//idcardid;CreditCard c = new CreditCard(cid, 100); //è¿™ä¸ªå†™äº†100ï¼ˆæ— è®ºå†™ä»€ä¹ˆï¼‰,å®žé™…è¿˜æ˜¯6,å…³è”äº†personIdc.setPerson(p);mCreditCardDao.insert(c); query12345678910111213141516171819202122List&lt;CreditCard&gt; list = mCreditCardDao.loadAll();CreditCard card = list.get(0);if (card != null) &#123; Timber.i(&quot;CardInfo cardid----------&gt;&quot; + card.getCid() + &quot; personid----------&gt;&quot; + card.getPid());&#125;switch (position) &#123; case 0: selectPersonInfoByCard(card);//æ ¹æ®idcardèŽ·å–person break;&#125; private void selectPersonInfoByCard(CreditCard card) &#123; Person person = null; if (card != null) &#123; person = card.getPerson(); &#125; if (person != null) &#123; Timber.i(&quot;PersonByCard personId + ----------&gt; &quot; + person.getPid() + &quot; name----------&gt; &quot; + person.getName() + &quot; age----------&gt;&quot; + person.getAge()); &#125; else &#123; Timber.i(&quot;----èŽ·å–personä¿¡æ¯å¤±è´¥------&quot;); &#125; &#125; https://juejin.im/post/5a30f79c6fb9a045031014fd https://blog.csdn.net/qq_34358104/article/details/69833909 OneToMany123456789101112131415161718@Entitypublic class MStudent &#123; @Id(autoincrement = true) private Long sid; private String name; private Long tid;&#125;@Entitypublic class MTecher &#123; @Id(autoincrement = true) private Long tid; private String name; //ä¸€å¯¹å¤šå…³ç³»ï¼Œtidä¸ºStudentè¡¨çš„å¤–é”® @ToMany(referencedJoinProperty = &quot;tid&quot;) private List&lt;MStudent&gt; students; &#125; insert123456789101112131415161718192021222324252627282930313233/** * æ·»åŠ Studentä¿¡æ¯ */ private void insertStudent() &#123; try &#123; Long sid = 1L; for (int i = 0; i &lt; 5; i++) &#123; MStudent s = new MStudent(sid, &quot;xiaoMing--&gt;&quot; + i, tid); mStudentDao.insert(s); sid++; &#125; Log.i(&quot;tag&quot;, &quot;å­¦ç”Ÿä¿¡æ¯æ·»åŠ æˆåŠŸ&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); Log.i(&quot;tag&quot;, &quot;å­¦ç”Ÿä¿¡æ¯æ·»åŠ å¤±è´¥&quot;); &#125; &#125; /** * æ·»åŠ Teacherä¿¡æ¯ */ private void insertTeacher() &#123; try &#123; String name = &quot;Miss zhang&quot;; MTecher mTecher = new MTecher(tid, name); mTecherDao.insert(mTecher); Log.i(&quot;tag&quot;,&quot;æ•™å¸ˆä¿¡æ¯æ·»åŠ æˆåŠŸ&quot;); &#125; catch (Exception e) &#123; e.printStackTrace(); Log.i(&quot;tag&quot;,&quot;æ•™å¸ˆä¿¡æ¯æ·»åŠ å¤±è´¥&quot;); &#125; &#125; query1234567891011121314151617181920212223242526272829303132private void selectTeacher() &#123; MTecher t = null; try &#123; t = mTecherDao.loadByRowId(tid); if (t != null)&#123; Log.i(&quot;tag&quot;,&quot;æŸ¥è¯¢æ•™å¸ˆä¿¡æ¯----&gt;æˆåŠŸ&quot;); Log.i(&quot;tag&quot;,&quot;tid---&gt;&quot;+t.getTid()); Log.i(&quot;tag&quot;,&quot;teacher&#x27;s name-----&gt;&quot;+t.getName()); selectStudentByTeacher(t); &#125;else&#123; Log.i(&quot;tag&quot;,&quot;æŸ¥è¯¢è¡¨ä¸­æ²¡æœ‰è¯¥æ•™å¸ˆä¿¡æ¯&quot;); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); Log.i(&quot;tag&quot;,&quot;æŸ¥è¯¢æ•™å¸ˆä¿¡æ¯----&gt;å¤±è´¥&quot;); &#125;&#125; /** * æ ¹æ®èŽ·å–å¾—åˆ°çš„TeacherèŽ·å–å…¶åä¸‹çš„å­¦ç”Ÿä¿¡æ¯ * @param t */ private void selectStudentByTeacher(MTecher t) &#123; List&lt;MStudent&gt; list = t.getStudents(); if (list != null &amp;&amp; list.size() &gt; 0)&#123; for (MStudent mStudent : list) &#123; Log.i(&quot;tag&quot;,&quot;sid---------&gt; &quot;+mStudent.getSid() +&quot; tid---------&gt;&quot;+mStudent.getTid()+&quot; name--------&gt;&quot;+mStudent.getName()); &#125; &#125;else&#123; Log.i(&quot;tag&quot;,&quot;--------èŽ·å–å­¦ç”Ÿä¿¡æ¯å¤±è´¥--------&quot;); &#125; &#125; ManyToMany12345678910@Entitypublic class NTeacher &#123; @Id(autoincrement = true) private Long tid; private String name; @ToMany @JoinEntity(entity = TandSRelative.class, sourceProperty = &quot;tid&quot;, targetProperty = &quot;sid&quot;) private List&lt;TandSRelative&gt; list; &#125; 1234567891011@Entitypublic class NStudent &#123; @Id(autoincrement = true) private Long sid; private String name; @ToMany @JoinEntity(entity = TandSRelative.class,sourceProperty = &quot;sid&quot;,targetProperty = &quot;tid&quot;) List&lt;NTeacher&gt; teacherList;&#125; 12345678@Entitypublic class TandSRelative &#123; @Id(autoincrement = true) private Long tsid; private Long tid;//teacherçš„id private Long sid;//studentçš„id&#125; insert12345678910111213141516171819202122232425262728293031323334353637 //2ä¸ªæ•™å¸ˆå’Œ3ä¸ªå­¦ç”Ÿçš„å…³ç³»//æ•™å¸ˆ1ï¼Œå¸¦å­¦ç”Ÿ1ã€2//æ•™å¸ˆ2ï¼Œå¸¦å­¦ç”Ÿ1ã€3//å­¦ç”Ÿ1ï¼Œé€‰ä¿®æ•™å¸ˆ1å’Œæ•™å¸ˆ2çš„è¯¾ private void addTeacherStu() &#123; List&lt;NTeacher&gt; teacherList = new ArrayList&lt;&gt;(); for (long i = 1; i &lt; 3; i++) &#123; NTeacher teacherBean = new NTeacher(); teacherBean.setTid(i); teacherList.add(teacherBean); &#125; daoSession.getNTeacherDao().insertInTx(teacherList); List&lt;NStudent&gt; studentList = new ArrayList&lt;&gt;(); for (long j = 1; j &lt; 4; j++) &#123; NStudent studentBean = new NStudent(); studentBean.setSid(j); studentList.add(studentBean); &#125; //æ•™å¸ˆ1å¸¦å­¦ç”Ÿ1ã€2 List&lt;TandSRelative&gt; teacherTeachStuList = new ArrayList&lt;&gt;(); TandSRelative tandSRelative1 = new TandSRelative(null, 1L, 1L); teacherTeachStuList.add(tandSRelative1); TandSRelative tandSRelative2 = new TandSRelative(null, 1L, 2L); teacherTeachStuList.add(tandSRelative2); TandSRelative tandSRelative3 = new TandSRelative(null, 2L, 1L); teacherTeachStuList.add(tandSRelative3); TandSRelative tandSRelative4 = new TandSRelative(null, 2L, 3L); teacherTeachStuList.add(tandSRelative4); daoSession.getTandSRelativeDao().insertInTx(teacherTeachStuList); &#125; https://www.cnblogs.com/Free-Thinker/p/10654474.html https://juejin.im/post/5a30f79c6fb9a045031014fd https://blog.csdn.net/RobotHost/article/details/70098744 migration12345678910111213141516171819202122public class MySQLiteOpenHelper extends DaoMaster.OpenHelper &#123; public MySQLiteOpenHelper(Context context, String name, SQLiteDatabase.CursorFactory factory) &#123; super(context, name, factory); &#125; @Override public void onUpgrade(Database db, int oldVersion, int newVersion) &#123;// super.onUpgrade(db, oldVersion, newVersion); MigrationHelper.migrate(db, new MigrationHelper.ReCreateAllTableListener() &#123; @Override public void onCreateAllTables(Database db, boolean ifNotExists) &#123; DaoMaster.createAllTables(db, ifNotExists); &#125; @Override public void onDropAllTables(Database db, boolean ifExists) &#123; DaoMaster.dropAllTables(db, ifExists); &#125; &#125;, StudentDao.class); //å¯ä»¥æ·»åŠ å¤šä¸ª &#125;&#125; 123456// DaoMaster.DevOpenHelper helper = new DaoMaster.DevOpenHelper(this, &quot;dblearn.db&quot;); MigrationHelper.DEBUG = true; MySQLiteOpenHelper helper = new MySQLiteOpenHelper(this,&quot;dblearn.db&quot;,null); SQLiteDatabase db = helper.getWritableDatabase(); DaoMaster daoMaster = new DaoMaster(db); daoSession = daoMaster.newSession(); 1234567891011121314151617181920212223242526272829@Entitypublic class Student &#123; @Id(autoincrement = true) // id é€’å¢ž Long id; @Unique public int studentNo; public int age; //å¹´é¾„ @Property(nameInDb = &quot;usePhone&quot;) //æ•°æ®åº“ä¸­æ˜ å°„çš„å­—æ®µå°±æ˜¯ usePhone public String telPhone;//æ‰‹æœºå· @Transient //æ•°æ®åº“ä¸­ä¸ä¼šåˆ›å»ºå¯¹åº”çš„å­—æ®µ String sex; //æ€§åˆ« String name;//å§“å String address;//å®¶åº­ä½å€ String schoolName;//å­¦æ ¡åå­— String grade;//å‡ å¹´çº§ private boolean statue; @ToOne(joinProperty = &quot;name&quot;) IdCard student; private String migrate; //æ–°æ·»åŠ çš„å­—æ®µ è¿ç§» &#125; https://github.com/yuweiguocn/GreenDaoUpgradeHelper/blob/master/README_CH.md https://stackoverflow.com/questions/13373170/greendao-schema-update-and-data-migration/30334668#30334668 æŸ¥çœ‹æ•°æ®åº“database navigator![check_Screen Shot 2020-04-13 at 5.59.22 PM](GreenDao/check_Screen Shot 2020-04-13 at 5.59.22 PM.png) ![Screen Shot 2020-04-13 at 6.04.11 PM](GreenDao/Screen Shot 2020-04-13 at 6.04.11 PM.png) C:\\Users\\john\\Desktop\\dbsqlite Device file exploreré‡Œé¢æŸ¥çœ‹ data/data/{$packname}/mine https://blog.csdn.net/yu75567218/article/details/78904909 æ•°æ®ç¼“å­˜ RxJavaå®žçŽ°æ•°æ®ç½‘ç»œæ•°æ®ç¼“å­˜ https://blog.csdn.net/qq_35064774/article/details/53449795 ç”¨æˆ·æµ‹é‡æ•°æ®æœ‰ç½‘ä¸Šä¼  https://wenku.baidu.com/view/65f16f61998fcc22bdd10d5b.html https://my.oschina.net/banxi/blog/57984 https://www.infoq.cn/article/q-EjPtHOVFaE46XKjhlf","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"DB","slug":"DB","permalink":"https://noteforme.github.io/tags/DB/"}]},{"title":"Binder","slug":"Binder","date":"2019-08-11T07:26:25.000Z","updated":"2021-08-19T11:11:43.695Z","comments":true,"path":"2019/08/11/Binder/","link":"","permalink":"https://noteforme.github.io/2019/08/11/Binder/","excerpt":"","text":"IPCæ–¹å¼ä¿¡å·é‡ å…±äº«å†…å­˜ : å®¹æ˜“å¯¼è‡´åŒæ­¥é—®é¢˜ã€‚å› ä¸ºç”¨æˆ·ç«¯æ²¡æ³•è§£å†³ã€‚ Socket Binder: æœåŠ¡ç«¯æ˜ å°„åŽï¼Œ å®˜æ–¹è§£å†³äº†åŒæ­¥é—®é¢˜ã€‚ å¤šè¿›ç¨‹ä½œç”¨ Binderæµç¨‹![](Binder/2021-08-11 _8.31_binder_over.png) Binderæœºåˆ¶mmapä½œç”¨è®©ä¸€å—è™šæ‹Ÿå†…å­˜ æŒ‡å‘ä¸€å—å·²çŸ¥çš„ç‰©ç†å†…å­˜ã€‚ è¿™ä¸ªç‰©ç†å†…å­˜æ˜¯binderæä¾›çš„ã€‚ ä¼ ç»Ÿè¿›ç¨‹é€šä¿¡ Binderè¿›ç¨‹é€šä¿¡ æŸ¥çœ‹è¿›ç¨‹åˆ†é…çš„å†…å­˜å¤§å°123AppledeMacBook-Pro:MineUtils apple$ adb shellgeneric_x86:/ $ getprop dalvik.vm.heapsize512m https://www.bilibili.com/video/BV1Hr4y1P7QC?from=search&amp;seid=18026610356055236655 https://www.bilibili.com/video/BV1Hr4y1P7QC?p=4 https://www.bilibili.com/video/BV1Hr4y1P7QC?p=5&amp;spm_id_from=pageDriver https://github.com/weidongshan/APP_0005_Binder_JAVA_App https://www.bilibili.com/video/BV1tW411i7aB?p=22","categories":[],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"Gradient","slug":"Gradient","date":"2019-07-22T09:41:27.000Z","updated":"2021-08-19T11:11:43.903Z","comments":true,"path":"2019/07/22/Gradient/","link":"","permalink":"https://noteforme.github.io/2019/07/22/Gradient/","excerpt":"","text":"LinearGradient1234567891011121314151617181920212223/** * LinearGradient * Create a shader that draws a linear gradient along a line. * * @param x0 The x-coordinate for the start of the gradient line * @param y0 The y-coordinate for the start of the gradient line * @param x1 The x-coordinate for the end of the gradient line * @param y1 The y-coordinate for the end of the gradient line * @param colors The colors to be distributed along the gradient line * @param positions May be null. The relative positions [0..1] of * each corresponding color in the colors array. If this is null, * the the colors are distributed evenly along the gradient line. æ‰€å æ¯”ä¾‹ï¼Œæ¸²æŸ“é¢œè‰²æ‰€å æ¯”ä¾‹,å¦‚æžœä¼ nullï¼Œåˆ™å‡åŒ€æ¸²æŸ“ * @param tile The Shader tiling mode */val colors = intArrayOf( Color.RED, Color.GREEN, Color.BLUE)val positions = floatArrayOf(0.5f, 1f, 0.5f)val linearGradient = LinearGradient(0f, 300f, 300f, 300f, colors, positions, Shader.TileMode.CLAMP)val mPaint = Paint()mPaint.setShader(linearGradient)canvas?.drawRect(0f, 0f, 300f, 300f, mPaint) LinearGradientï¼ˆ0f, 0f, 300f, 300fï¼‰,è¯´æ˜Žä»Ž (0,0) åˆ°(300,300)å¯¹è§’çº¿æ–¹å‘æ¸²æŸ“ https://www.jianshu.com/p/5fb82b189094 æ¸å˜æ¨¡å¼ -CLAMPè¾¹ç¼˜æ‹‰ä¼¸-REPEATåœ¨æ°´å¹³å’Œåž‚ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šé‡å¤ï¼Œç›¸é‚»å›¾åƒæ²¡æœ‰é—´éš™-MIRROR ä»¥é•œåƒçš„æ–¹å¼åœ¨æ°´å¹³å’Œåž‚ç›´ä¸¤ä¸ªæ–¹å‘ä¸Šé‡å¤ï¼Œç›¸é‚»å›¾åƒæœ‰é—´éš™","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"TEST_Robolectric","slug":"TEST_Robolectric","date":"2019-06-13T01:42:52.000Z","updated":"2021-09-17T06:15:04.635Z","comments":true,"path":"2019/06/13/TEST_Robolectric/","link":"","permalink":"https://noteforme.github.io/2019/06/13/TEST_Robolectric/","excerpt":"","text":"robolectric https://github.com/robolectric/robolectric googleå®˜æ–¹ Fragmentæµ‹è¯•æ–¹æ³• https://developer.android.google.cn/training/basics/fragments/testing è°·æ­Œå®˜æ–¹æŽ¨èçš„å¼€æºæµ‹è¯•æ¡†æž¶ Robolectricå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå·¥å…·ï¼Œç®€å•æ¥è¯´å®ƒå®žçŽ°äº†ä¸€å¥—å¯ä»¥åœ¨JVMä¸Šè¿è¡Œçš„Androidä»£ç ã€‚ è°·æ­Œå®˜æ–¹æŽ¨èçš„å¼€æºæµ‹è¯•æ¡†æž¶ Robolectricå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå·¥å…·ï¼Œå®ƒå®žçŽ°äº†ä¸€å¥—å¯ä»¥åœ¨JVMä¸Šè¿è¡Œçš„Androidä»£ç ã€‚ https://juejin.cn/post/6844904054192111623 robolectric Dependencyhttps://www.youtube.com/watch?v=AiTh0rGMdjs","categories":[{"name":"TEST","slug":"TEST","permalink":"https://noteforme.github.io/categories/TEST/"}],"tags":[{"name":"Test","slug":"Test","permalink":"https://noteforme.github.io/tags/Test/"}]},{"title":"PrincipleComputer","slug":"PrincipleComputer","date":"2019-04-08T07:52:07.000Z","updated":"2021-08-19T11:11:44.204Z","comments":true,"path":"2019/04/08/PrincipleComputer/","link":"","permalink":"https://noteforme.github.io/2019/04/08/PrincipleComputer/","excerpt":"","text":"è¿›åˆ¶è¿ç®—çš„åŸºæœ¬çŸ¥è¯†æ•´æ•°äºŒè¿›åˆ¶2è¿›åˆ¶è½¬10è¿›åˆ¶ï¼š é‡å¤é™¤2å–ä½™æ•° å°æ•°äºŒè¿›åˆ¶ :ð‘= 0.11001 =1âˆ—2âˆ’1+1âˆ—2âˆ’2+1âˆ—2âˆ’5=0.78125=25 / 32 (å°æ•°)åè¿›åˆ¶è½¬æ¢äºŒè¿›åˆ¶:é‡å¤ç›¸ä¹˜æ³• äºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•åŽŸç  åŽŸç è¡¨ç¤ºæ³• ä½¿ç”¨0è¡¨ç¤ºæ­£æ•°ã€1è¡¨ç¤ºè´Ÿæ•° è§„å®šç¬¦å·ä½ä½äºŽæ•°å€¼ç¬¬ä¸€ä½ è¡¨è¾¾ç®€å•æ˜Žäº†ï¼Œæ˜¯äººç±»æœ€å®¹æ˜“ç†è§£çš„è¡¨ç¤ºæ³• 0æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•:00 , 10 ç¼ºé™· ä½†æ˜¯åŽŸç è¡¨ç¤ºæ³•æœ‰ç¼ºé™· å¸Œæœ›æ‰¾åˆ°ä¸åŒç¬¦å·æ“ä½œæ•°æ›´åŠ ç®€å•çš„è¿ç®—æ–¹æ³• å¸Œæœ›æ‰¾åˆ°ä½¿ç”¨æ­£æ•°ä»£æ›¿è´Ÿæ•°çš„æ–¹æ³• ä½¿ç”¨åŠ æ³•æ“ä½œä»£æ›¿å‡æ³•æ“ä½œï¼Œä»Žè€Œæ¶ˆé™¤å‡æ³• é˜¶ç  å°¾æ•° è¡¥ç è¡¥ç è¡¨ç¤ºæ³• ä¾‹å­2: x=-13ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œè¡¥ç  åŽŸç :x=1,1101 è¡¥ç :2^(ð‘›+1) + ð‘¥ = 2^(4+1) âˆ’ 13 = 100000 âˆ’ 1101 = 1,0011 â€‹ 1æ˜¯ç¬¦å·ä½ è¡¥ç :x=1,0011 ä¾‹å­3: x=-7ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œè¡¥ç  åŽŸç :x=1,0111 è¡¥ç :2^(ð‘›+1) + ð‘¥ = 2^(4+1) âˆ’ 7 = 100000 âˆ’ 0111 = 11001 â€‹ è¡¥ç :x=1,1001 ç¼ºé™· è¿˜æ˜¯åŒæ ·çš„é—®é¢˜, å¸Œæœ›æ‰¾åˆ°ä½¿ç”¨æ­£æ•°ä»£æ›¿è´Ÿæ•°çš„æ–¹æ³•$$ ä½¿ç”¨åŠ æ³•æ“ä½œä»£æ›¿å‡æ³•æ“ä½œï¼Œä»Žè€Œæ¶ˆé™¤å‡æ³• åœ¨è®¡ç®—è¡¥ç çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯ä½¿ç”¨äº†å‡æ³•!! åç  å¼•è¿›è¡¥ç çš„ç›®çš„ å‡æ³•è¿ç®—å¤æ‚ï¼Œå¸Œæœ›æ‰¾åˆ°ä½¿ç”¨æ­£æ•°æ›¿ä»£è´Ÿæ•°çš„æ–¹æ³• ä½¿ç”¨åŠ æ³•ä»£æ›¿å‡æ³•æ“ä½œï¼Œä»Žè€Œæ¶ˆé™¤å‡æ³• ä¾‹å­1: x=-13ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œ,åç ,è¡¥ç  åŽŸç : x=1,1101 åç : 2^(ð‘›+1)âˆ’1 + ð‘¥ = (2^(4+1)âˆ’1) âˆ’ 13 = 011111 âˆ’ 1101 = 10010 â€‹ åç :x=1,0010 è¡¥ç : 2^(ð‘›+1) + ð‘¥ = 2^(4+1) âˆ’ 13 = 100000 âˆ’ 1101 = 10011 ä¾‹å­2:x=-7ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œåç  åŽŸç :x=1,0111 åç :2^(ð‘›+1) + ð‘¥ = 2^(4+1) âˆ’ 7 = 011111 âˆ’ 0111 = 11000 â€‹ åç :x=1,1000 åç è¡¨ç¤ºæ³• è´Ÿæ•°çš„åç ç­‰äºŽåŽŸç é™¤ç¬¦å·ä½å¤–æŒ‰ä½å–å è´Ÿæ•°çš„è¡¥ç = (åç +1) ä¾‹å­3:x=-7ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œåç å’Œè¡¥ç  åŽŸç :x=1,0111 åç :x=1,1000. è¡¥ç :x=1,1001 ä¾‹å­4:x=-9ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œåç å’Œè¡¥ç  åŽŸç :x=1,1001 åç :x=1,0110 è¡¥ç :x=1,0111 â€‹ å°æ•°çš„è¡¥ç å°æ•°çš„è¡¥ç  åç è§„åˆ™å’Œæ•´æ•°ä¸€æ ·ï¼ŒåŽŸç çš„æ–¹å¼æŒ‰ç…§ å°æ•°äºŒè¿›åˆ¶ å…ˆç®—å‡ºæ¥ ä¾‹å­1: x= 9/16 ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œåç å’Œè¡¥ç  åŽŸç :x=0,0.1001 åç :x= 0,0.1001 è¡¥ç :x= 0,0.1001 ä¾‹å­2:x=- ï¼Œè®¡ç®—xçš„äºŒè¿›åˆ¶åŽŸç å’Œåç å’Œè¡¥ç  åŽŸç :x=1,0.01011 åç :x=1,1.10100 è¡¥ç :x=1,1.10101 äºŒè¿›åˆ¶æ•°æ®çš„è¿ç®—å®šç‚¹æ•°çš„åŠ æ³•è¿ç®—æ•´æ•°åŠ æ³•: A è¡¥ + B è¡¥ = ð´ + ðµ è¡¥ (ð‘šð‘œð‘‘2ð‘›+1) å°æ•°åŠ æ³•: Aè¡¥ +Bè¡¥ = ð´+ðµ è¡¥(ð‘šð‘œð‘‘2) æ•°å€¼ä½ä¸Žç¬¦å·ä½ä¸€åŒè¿ç®—ï¼Œå¹¶å°†ç¬¦å·ä½äº§ç”Ÿçš„è¿›ä½è‡ªç„¶ä¸¢æŽ‰ ä¾‹å­1: A=-110010ï¼Œ B=001101ï¼Œæ±‚A+B A[è¡¥] = 1,001110 =&gt; A[åŽŸ] = 1,110010 =&gt; A[å]= 1,001101 B è¡¥ = B[åŽŸ] = 0,001101 A è¡¥ +B è¡¥ =(A+B) è¡¥ =1,011011 A + B = âˆ’100101 ä¾‹å­2:A=-0.1010010ï¼Œ B=0.0110100ï¼Œæ±‚A+B A[è¡¥] = 1,1.0101110 B è¡¥ = B[åŽŸ] = 0,0.0110100 A è¡¥ +B è¡¥ =(A+B) è¡¥ =1,1.1100010 A + B =-0.0011110 ä¾‹å­4 ï¼š A=-10010000ï¼Œ B=-11010000ï¼Œæ±‚A+B Aè¡¥ =1,01110000 Bè¡¥ =1,00110000 A è¡¥ +B è¡¥ =(A+B) è¡¥ =0,10100000 A + B = 10100000 A + B = 160 A = âˆ’144 B = âˆ’208 å‘ç”Ÿäº†æº¢å‡º : A åˆ¤æ–­æº¢å‡º åŒç¬¦å·ä½åˆ¤æ–­æ³• **å•ç¬¦å·ä½è¡¨ç¤ºå˜æˆåŒç¬¦å·ä½:**0=&gt;00,1=&gt;11 åŒç¬¦å·ä½äº§ç”Ÿçš„è¿›ä½ä¸¢å¼ƒ ç»“æžœçš„åŒç¬¦å·ä½ä¸åŒåˆ™è¡¨ç¤ºæº¢å‡º ä¾‹å­4:A=-10010000ï¼Œ B=-11010000ï¼Œæ±‚A+B Aè¡¥ =1,01110000 Bè¡¥ =1,00110000 A è¡¥ +B è¡¥ =(A+B) è¡¥ =10,10100000 åŒç¬¦å·ä½ä¸åŒï¼Œè¡¨ç¤ºæº¢å‡º ç¬¦å·ä½è¿›ä½èˆåŽ» ä¾‹å­3:A=-10010000ï¼Œ B=-01010000ï¼Œæ±‚A+B Aè¡¥ =1,01110000 Bè¡¥ =1,10110000 A è¡¥ +B è¡¥ =(A+B) è¡¥ =11,00100000 åŒç¬¦å·ä½ç›¸åŒï¼Œæ²¡æœ‰æº¢å‡º (A+B)[åŽŸ] = 11,11100000 = âˆ’11100000 å®šç‚¹æ•°çš„å‡æ³•è¿ç®—æ•´æ•°å‡æ³•: Aè¡¥ âˆ’Bè¡¥ =ð´+(âˆ’ðµ)è¡¥(ð‘šð‘œð‘‘2ð‘›+1) å°æ•°å‡æ³•: A è¡¥ âˆ’B è¡¥ =ð´+(âˆ’ðµ) è¡¥ (ð‘šð‘œð‘‘2) -B[è¡¥]ç­‰äºŽB[è¡¥]è¿žåŒç¬¦å·ä½æŒ‰ä½å–åï¼Œæœ«ä½åŠ ä¸€ B è¡¥ = 1,0010101 (âˆ’B) è¡¥ = 0,1101011 ä¾‹å­5:A=11001000ï¼Œ B=-00110100ï¼Œæ±‚A-B A è¡¥ = A[åŽŸ] = 0,11001000 B è¡¥ = 1,11001100 (âˆ’B) è¡¥ = 0,00110100 Aè¡¥ âˆ’Bè¡¥ =A+(âˆ’B)è¡¥ A+(âˆ’B)è¡¥ =0,11111100 A âˆ’ B = 111111100 æµ®ç‚¹æ•°çš„åŠ å‡æ³•è¿ç®—å¯¾é˜¶ å°¾æ•°æ±‚å’Œ å°¾æ•°è§„æ ¼åŒ– èˆå…¥ æº¢å‡ºåˆ¤æ–­ æµ®ç‚¹æ•°ä¹˜é™¤æ³•ä¹Ÿæ˜¯ä¸Šé¢4ä¸ªæ­¥éª¤ åšè“ç‰™å¼€å‘æ—¶byteæ•°ç»„å‡ºçŽ° -122ï¼Œæ¥çœ‹çœ‹è¿™ä¸ªè´Ÿæ•°æ˜¯æ€Žä¹ˆå‡ºçŽ°çš„ byteè½¬intç±»åž‹ b1 &amp; 0xff http://ju.outofmemory.cn/entry/215778 https://blog.csdn.net/RuobaiMEN/article/details/79890823 https://blog.csdn.net/LVXIANGAN/article/details/72726152 é—®é¢˜: è®¡ç®—æœºè´Ÿæ•°åŠ æ³• 8 + ï¼ˆ-1ï¼‰ â€‹ b1 &amp; 0xff ä¸ç†è§£ https://www.imooc.com/article/21360 https://blog.csdn.net/zdy10326621/article/details/50236529 å­—èŠ‚ä¸€ä¸ªå­—èŠ‚byte ä¸¤ä½16è¿›åˆ¶æ•°1ä¸ªå­—èŠ‚æ˜¯8ä½ï¼ŒäºŒè¿›åˆ¶8ä½ï¼šxxxxxxxx èŒƒå›´ä»Ž00000000ï¼11111111ï¼Œè¡¨ç¤º0åˆ°255ã€‚ 1ä½16è¿›åˆ¶æ•°æœ€å¤§æ˜¯15ï¼ˆç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯xxxx ï¼‰ï¼ˆå³å¯¹åº”16è¿›åˆ¶çš„0xF 1111 4ä½ï¼‰ï¼Œè¦è¡¨ç¤ºåˆ°255,å°±è¿˜éœ€è¦4ä½ã€‚ ä½è¿ç®—ç¬¦åŸºæœ¬æ“ä½œ https://blog.csdn.net/qiantudou/article/details/49928423 https://www.orchome.com/1190 å–ä¸€ä¸ªå­—èŠ‚ æŸå‡ ä½123456789101112131415161718192021222324252627282930313233343536/** * å–ä¸€ä¸ªå­—èŠ‚é«˜å‡ ä½ * * @param b * @param length * @return */public static int getLeftNum(byte b, int length) &#123; return b &gt;&gt; (8 - length);&#125;/** * å–ä¸€ä¸ªå­—èŠ‚ä½Žå‡ ä½bit * * @param b * @param length * @return */public static int getRightNum(byte b, int length) &#123; byte mv = (byte) (0xff &gt;&gt; (8 - length)); return b &amp; mv;&#125;/** * https://blog.csdn.net/bluestarjava/article/details/83446129 * * @param b * @param startIndex é«˜ä½ä»Ž0å¼€å§‹ * @param endIndex * @return */public static int getMidNum(byte b, int startIndex, int endIndex) &#123; byte i = (byte) getLeftNum(b, endIndex + 1);//å…ˆå–é«˜å‡ ä½ return getRightNum(i, endIndex - startIndex + 1);//å†å–ä½Žå‡ ä½&#125; https://bbs.csdn.net/topics/310178646","categories":[{"name":"Organization","slug":"Organization","permalink":"https://noteforme.github.io/categories/Organization/"}],"tags":[]},{"title":"Popupwindow","slug":"Popupwindow","date":"2019-03-26T13:17:52.000Z","updated":"2021-08-19T11:11:44.204Z","comments":true,"path":"2019/03/26/Popupwindow/","link":"","permalink":"https://noteforme.github.io/2019/03/26/Popupwindow/","excerpt":"","text":"ä½¿ç”¨showAtLocation1234public void showAtLocation(View parent, int gravity, int x, int y) &#123; mParentRootView = new WeakReference&lt;&gt;(parent.getRootView()); showAtLocation(parent.getWindowToken(), gravity, x, y); &#125; gravity 9ç§æƒ…å†µ ä»Ž parent.getRootView()å¯ä»¥çœ‹åˆ° parentviewå°±æ˜¯æ•´ä¸ªå±å¹• Gravity.NO_GRAVITY ï¼šæ˜¾ç¤ºæ•ˆæžœåŒ Gravity.LEFT | Gravity.TOPGravity.LEFTï¼šä»¥å±å¹•å·¦è¾¹ä¸­é—´ä½ç½®ä¸ºåœ†ç‚¹Gravity.TOPï¼šä»¥å±å¹•é¡¶éƒ¨ä¸­é—´ä½ç½®ä¸ºå‚ç…§ç‰©Gravity.RIGHTï¼šä»¥å±å¹•å³ä¾§ä¸­é—´ä½ç½®ä¸ºå‚ç…§ç‰©Griavity.BOTTOMï¼šä»¥å±å¹•åº•éƒ¨ä¸­é—´ä¸ºå‚ç…§ç‰©Gravity.LEFT | Gravity.TOPï¼šä»¥å±å¹•å·¦ä¸Šè§’ä¸ºå‚ç…§ç‰©Gravity.RIGHT | Gravity.TOP ï¼šä»¥å±å¹•å³ä¸Šè§’ä¸ºå‚ç…§ç‰©Gravity.LEFT | Gravity.BOTTOM ï¼šä»¥å±å¹•å·¦ä¸‹è§’ä¸ºå‚ç…§ç‰©Gravity.RIGHT | Gravity.BOTTOM ï¼šä»¥å±å¹•å³ä¸‹è§’ä¸ºå‚ç…§ç‰©x ï¼šx &lt; 0æ—¶ï¼Œå‘å·¦åç§»ï¼Œ x &gt;0 æ—¶ï¼Œå‘å³åç§» y ï¼šæ˜¾ç¤ºæ•ˆæžœå—gravityå‚æ•°å½±å“ã€‚å½“å‚æ•°ä¸å¸¦Gravity.BOTTOMæ—¶ï¼Œy &lt; 0ï¼Œå‘ä¸Šåç§»ï¼Œ y &gt; 0 ï¼Œå‘ä¸‹åç§»ï¼›å½“å‚æ•°å¸¦æœ‰Gravity.BOTTOMæ—¶, y &lt; 0,å‘ä¸‹åç§»ï¼Œy &gt; 0ï¼Œå‘ä¸‹åç§» åŽŸæ–‡ï¼šhttps://blog.csdn.net/Justwen26/article/details/61621076 showAsDropDown123public void showAsDropDown(View anchor, int xoff, int yoff) &#123; showAsDropDown(anchor, xoff, yoff, DEFAULT_ANCHORED_GRAVITY);&#125; å¼¹çª—ä¼šæ˜¾ç¤ºåœ¨anchoræŽ§ä»¶çš„æ­£ä¸‹æ–¹ã€‚","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"View_Practice","slug":"View_Practice","date":"2019-01-01T14:44:09.000Z","updated":"2023-12-17T12:50:32.998Z","comments":true,"path":"2019/01/01/View_Practice/","link":"","permalink":"https://noteforme.github.io/2019/01/01/View_Practice/","excerpt":"","text":"ç»˜åˆ¶å¿ƒç”µå›¾ https://github.com/SeekerFighter/LuckyEcgDemo https://www.jianshu.com/p/16301de41a18 è¡¨å•è¾“å…¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * EditTextæ–‡å­—å›ºå®šåœ¨å³è¾¹ */public class EditTextRight extends AppCompatEditText &#123; private String txtRight; private Paint mPaint; public EditTextRight(Context context) &#123; super(context); &#125; public EditTextRight(Context context, AttributeSet attrs) &#123; super(context, attrs); initAttrs(context, attrs); &#125; private void initAttrs(Context context, AttributeSet attrs) &#123; TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.EditTextRight); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); txtRight = ta.getString(R.styleable.EditTextRight_textright);// Timber.d(&quot;text&quot; + txtRight); ta.recycle(); &#125; @Override protected void onDraw(Canvas canvas) &#123; super.onDraw(canvas); float txtSize = getTextSize(); if (!TextUtils.isEmpty(txtRight)) &#123; float yrig = getWidth() - txtSize * txtRight.length() - 10; //getWidth() æŽ§ä»¶å®½åº¦ Timber.d(&quot;txt &quot; + txtRight + &quot; getRight &quot; + yrig); canvas.drawText(txtRight, yrig, getBaseline(), getPaint()); &#125; &#125;&#125; &lt;com.jonzhou.mineutils.ui.customview.EditTextRight android:layout_width=&quot;100dp&quot; android:layout_height=&quot;wrap_content&quot; mineutils:textright=&quot;å¹¢&quot; /&gt; è‡ªå®šä¹‰å±žæ€§ç”»æ­£æ–¹å½¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class MyView extends View &#123; public MyView(Context context) &#123; super(context); &#125; public MyView(Context context, AttributeSet attrs) &#123; super(context, attrs); Timber.i(&quot; MyView(Context context, AttributeSet attrs)&quot;); &#125; public MyView(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125; @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; super.onMeasure(widthMeasureSpec, heightMeasureSpec); Timber.i(&quot;onMeasure(int widthMeasureSpec, int heightMeasureSpec)&quot;); int width = getMySize(100, widthMeasureSpec); int height = getMySize(100, heightMeasureSpec); if (width &lt; height) &#123; height = width; &#125; else &#123; width = height; &#125; Timber.i(&quot;width &quot; + width + &quot; height &quot; + height); setMeasuredDimension(width,height); &#125; private int getMySize(int defaultSize, int measureSpec) &#123; int mySize = defaultSize; int mode = MeasureSpec.getMode(measureSpec); int size = MeasureSpec.getSize(measureSpec); switch (mode) &#123; case MeasureSpec.UNSPECIFIED: //å¦‚æžœæ²¡æœ‰æŒ‡å®šå¤§å°ï¼Œå°±è®¾ç½®ä¸ºé»˜è®¤å¤§å° mySize = defaultSize; break; case MeasureSpec.AT_MOST://å¦‚æžœæµ‹é‡æ¨¡å¼æ˜¯æœ€å¤§å–å€¼ä¸ºsize //æˆ‘ä»¬å°†å¤§å°å–æœ€å¤§å€¼,ä½ ä¹Ÿå¯ä»¥å–å…¶ä»–å€¼ mySize = size; break; case MeasureSpec.EXACTLY: mySize = size; break; &#125; return mySize; &#125;&#125; è®¾ç½® match_parentä¸æ˜¯æ­£æ–¹å½¢? å…³äºŽè‡ªå®šä¹‰å±žæ€§ä¸æç¤º declare-styleable nameè¦å’Œè‡ªå®šä¹‰ç±»åç›¸åŒï¼Œç„¶åŽé‡å¯Ideå°±å¥½äº† é‚£ä¹ˆèŽ·å–åˆ°çš„modeå’Œsizeåˆä»£è¡¨äº†ä»€ä¹ˆå‘¢ï¼Ÿmodeä»£è¡¨äº†æˆ‘ä»¬å½“å‰æŽ§ä»¶çš„çˆ¶æŽ§ä»¶å‘Šè¯‰æˆ‘ä»¬æŽ§ä»¶ï¼Œä½ åº”è¯¥æŒ‰æ€Žæ ·çš„æ–¹å¼æ¥å¸ƒå±€ã€‚modeæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼šEXACTLY, AT_MOST, UNSPECIFIEDã€‚å®ƒä»¬çš„å«ä¹‰æ˜¯ï¼š EXACTLYï¼šçˆ¶æŽ§ä»¶å‘Šè¯‰æˆ‘ä»¬å­æŽ§ä»¶äº†ä¸€ä¸ªç¡®å®šçš„å¤§å°ï¼Œä½ å°±æŒ‰è¿™ä¸ªå¤§å°æ¥å¸ƒå±€ã€‚æ¯”å¦‚æˆ‘ä»¬æŒ‡å®šäº†ç¡®å®šçš„dpå€¼å’Œmacth_parentçš„æƒ…å†µã€‚AT_MOSTï¼šå½“å‰æŽ§ä»¶ä¸èƒ½è¶…è¿‡ä¸€ä¸ªå›ºå®šçš„æœ€å¤§å€¼ï¼Œä¸€èˆ¬æ˜¯wrap_contentçš„æƒ…å†µã€‚ UNSPECIFIED:å½“å‰æŽ§ä»¶æ²¡æœ‰é™åˆ¶ï¼Œè¦å¤šå¤§å°±æœ‰å¤šå¤§ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘å‡ºçŽ°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªé‡å†™onMeasureçš„å›ºå®šä¼ªä»£ç å†™æ³•ï¼š 123456789if mode is EXACTLY&#123; çˆ¶å¸ƒå±€å·²ç»å‘Šè¯‰äº†æˆ‘ä»¬å½“å‰å¸ƒå±€åº”è¯¥æ˜¯å¤šå¤§çš„å®½é«˜, æ‰€ä»¥æˆ‘ä»¬ç›´æŽ¥è¿”å›žä»ŽmeasureSpecä¸­èŽ·å–åˆ°çš„size &#125;else&#123; è®¡ç®—å‡ºå¸Œæœ›çš„desiredSize if mode is AT_MOST è¿”å›ždesireSizeå’ŒspecSizeå½“ä¸­çš„æœ€å°å€¼ else: è¿”å›žè®¡ç®—å‡ºçš„desireSize &#125; åŽŸæ–‡ï¼šhttps://blog.csdn.net/yissan/article/details/51136088 è‡ªå®šä¹‰å±žæ€§ä¸æç¤º æŒ‰ç…§å¦‚å›¾ä¸¤åç§°ä¸€è‡´ï¼Œé‡å¯AndroidStudio https://blog.csdn.net/skysmile_/article/details/78833438 https://developer.android.com/guide/topics/ui/custom-components https://developer.android.com/training/custom-views/custom-drawing ç»˜å›¾http://blog.csdn.net/huaiyiheyuan/article/details/52205969 ç”»åœ†http://www.jianshu.com/p/d891fe636898 Scroll æ»‘åŠ¨https://juejin.im/post/5c7f4f0351882562ed516ab6#heading-17 https://blog.csdn.net/guolin_blog/article/details/48719871 Kotlin12345678910111213class TermRoundView @JvmOverloads constructor( context: Context?, attrs: AttributeSet?, defStyleAttr: Int = 0) : View(context, attrs, defStyleAttr) &#123; init&#123; val a = context?.theme?.obtainStyledAttributes(attrs, R.styleable.TermRoundView, 0, 0) try &#123; isRulerInput = a!!.getBoolean(R.styleable.TermRoundView_isRulerInput, false) &#125; finally &#123; a?.recycle() &#125; &#125;&#125; https://juejin.im/post/6844903909320835080","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/tags/VIEW/"}]},{"title":"view_custom_practice","slug":"view_custom_practice","date":"2019-01-01T14:44:09.000Z","updated":"2023-12-17T13:05:48.146Z","comments":true,"path":"2019/01/01/view_custom_practice/","link":"","permalink":"https://noteforme.github.io/2019/01/01/view_custom_practice/","excerpt":"","text":"ç»˜åˆ¶å¿ƒç”µå›¾ https://github.com/SeekerFighter/LuckyEcgDemo https://www.jianshu.com/p/16301de41a18 è¡¨å•è¾“å…¥ 1234567891011121314151617181920212223242526272829303132333435363738/** * EditTextæ–‡å­—å›ºå®šåœ¨å³è¾¹ */public class EditTextRight extends AppCompatEditText &#123; private String txtRight; private Paint mPaint; public EditTextRight(Context context) &#123; super(context); &#125; public EditTextRight(Context context, AttributeSet attrs) &#123; super(context, attrs); initAttrs(context, attrs); &#125; private void initAttrs(Context context, AttributeSet attrs) &#123; TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.EditTextRight); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); txtRight = ta.getString(R.styleable.EditTextRight_textright);// Timber.d(&quot;text&quot; + txtRight); ta.recycle(); &#125; @Override protected void onDraw(Canvas canvas) &#123; super.onDraw(canvas); float txtSize = getTextSize(); if (!TextUtils.isEmpty(txtRight)) &#123; float yrig = getWidth() - txtSize * txtRight.length() - 10; //getWidth() æŽ§ä»¶å®½åº¦ Timber.d(&quot;txt &quot; + txtRight + &quot; getRight &quot; + yrig); canvas.drawText(txtRight, yrig, getBaseline(), getPaint()); &#125; &#125;&#125; 1234&lt;com.jonzhou.mineutils.ui.customview.EditTextRight android:layout_width=&quot;100dp&quot; android:layout_height=&quot;wrap_content&quot; mineutils:textright=&quot;å¹¢&quot; /&gt; è‡ªå®šä¹‰å±žæ€§ç”»æ­£æ–¹å½¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class MyView extends View &#123; public MyView(Context context) &#123; super(context); &#125; public MyView(Context context, AttributeSet attrs) &#123; super(context, attrs); Timber.i(&quot; MyView(Context context, AttributeSet attrs)&quot;); &#125; public MyView(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125; @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; super.onMeasure(widthMeasureSpec, heightMeasureSpec); Timber.i(&quot;onMeasure(int widthMeasureSpec, int heightMeasureSpec)&quot;); int width = getMySize(100, widthMeasureSpec); int height = getMySize(100, heightMeasureSpec); if (width &lt; height) &#123; height = width; &#125; else &#123; width = height; &#125; Timber.i(&quot;width &quot; + width + &quot; height &quot; + height); setMeasuredDimension(width,height); &#125; private int getMySize(int defaultSize, int measureSpec) &#123; int mySize = defaultSize; int mode = MeasureSpec.getMode(measureSpec); int size = MeasureSpec.getSize(measureSpec); switch (mode) &#123; case MeasureSpec.UNSPECIFIED: //å¦‚æžœæ²¡æœ‰æŒ‡å®šå¤§å°ï¼Œå°±è®¾ç½®ä¸ºé»˜è®¤å¤§å° mySize = defaultSize; break; case MeasureSpec.AT_MOST://å¦‚æžœæµ‹é‡æ¨¡å¼æ˜¯æœ€å¤§å–å€¼ä¸ºsize //æˆ‘ä»¬å°†å¤§å°å–æœ€å¤§å€¼,ä½ ä¹Ÿå¯ä»¥å–å…¶ä»–å€¼ mySize = size; break; case MeasureSpec.EXACTLY: mySize = size; break; &#125; return mySize; &#125;&#125; è®¾ç½® match_parentä¸æ˜¯æ­£æ–¹å½¢? å…³äºŽè‡ªå®šä¹‰å±žæ€§ä¸æç¤º declare-styleable nameè¦å’Œè‡ªå®šä¹‰ç±»åç›¸åŒï¼Œç„¶åŽé‡å¯Ideå°±å¥½äº† é‚£ä¹ˆèŽ·å–åˆ°çš„modeå’Œsizeåˆä»£è¡¨äº†ä»€ä¹ˆå‘¢ï¼Ÿmodeä»£è¡¨äº†æˆ‘ä»¬å½“å‰æŽ§ä»¶çš„çˆ¶æŽ§ä»¶å‘Šè¯‰æˆ‘ä»¬æŽ§ä»¶ï¼Œä½ åº”è¯¥æŒ‰æ€Žæ ·çš„æ–¹å¼æ¥å¸ƒå±€ã€‚modeæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼šEXACTLY, AT_MOST, UNSPECIFIEDã€‚å®ƒä»¬çš„å«ä¹‰æ˜¯ï¼š EXACTLYï¼šçˆ¶æŽ§ä»¶å‘Šè¯‰æˆ‘ä»¬å­æŽ§ä»¶äº†ä¸€ä¸ªç¡®å®šçš„å¤§å°ï¼Œä½ å°±æŒ‰è¿™ä¸ªå¤§å°æ¥å¸ƒå±€ã€‚æ¯”å¦‚æˆ‘ä»¬æŒ‡å®šäº†ç¡®å®šçš„dpå€¼å’Œmacth_parentçš„æƒ…å†µã€‚AT_MOSTï¼šå½“å‰æŽ§ä»¶ä¸èƒ½è¶…è¿‡ä¸€ä¸ªå›ºå®šçš„æœ€å¤§å€¼ï¼Œä¸€èˆ¬æ˜¯wrap_contentçš„æƒ…å†µã€‚ UNSPECIFIED:å½“å‰æŽ§ä»¶æ²¡æœ‰é™åˆ¶ï¼Œè¦å¤šå¤§å°±æœ‰å¤šå¤§ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘å‡ºçŽ°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªé‡å†™onMeasureçš„å›ºå®šä¼ªä»£ç å†™æ³•ï¼š if mode is EXACTLY{ çˆ¶å¸ƒå±€å·²ç»å‘Šè¯‰äº†æˆ‘ä»¬å½“å‰å¸ƒå±€åº”è¯¥æ˜¯å¤šå¤§çš„å®½é«˜, æ‰€ä»¥æˆ‘ä»¬ç›´æŽ¥è¿”å›žä»ŽmeasureSpecä¸­èŽ·å–åˆ°çš„size}else{ è®¡ç®—å‡ºå¸Œæœ›çš„desiredSize if mode is AT_MOST è¿”å›ždesireSizeå’ŒspecSizeå½“ä¸­çš„æœ€å°å€¼ else: è¿”å›žè®¡ç®—å‡ºçš„desireSize } åŽŸæ–‡ï¼šhttps://blog.csdn.net/yissan/article/details/51136088 è‡ªå®šä¹‰å±žæ€§ä¸æç¤º æŒ‰ç…§å¦‚å›¾ä¸¤åç§°ä¸€è‡´ï¼Œé‡å¯AndroidStudio https://blog.csdn.net/skysmile_/article/details/78833438 https://developer.android.com/guide/topics/ui/custom-components https://developer.android.com/training/custom-views/custom-drawing ç»˜å›¾http://blog.csdn.net/huaiyiheyuan/article/details/52205969 ç”»åœ†http://www.jianshu.com/p/d891fe636898 Scroll æ»‘åŠ¨https://juejin.im/post/5c7f4f0351882562ed516ab6#heading-17 https://blog.csdn.net/guolin_blog/article/details/48719871 Kotlin12345678910111213class TermRoundView @JvmOverloads constructor( context: Context?, attrs: AttributeSet?, defStyleAttr: Int = 0) : View(context, attrs, defStyleAttr) &#123; init&#123; val a = context?.theme?.obtainStyledAttributes(attrs, R.styleable.TermRoundView, 0, 0) try &#123; isRulerInput = a!!.getBoolean(R.styleable.TermRoundView_isRulerInput, false) &#125; finally &#123; a?.recycle() &#125; &#125;&#125; https://juejin.im/post/6844903909320835080","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/tags/VIEW/"}]},{"title":"MediaPlayer","slug":"MediaPlayer","date":"2018-11-18T01:05:11.000Z","updated":"2021-08-19T11:11:44.127Z","comments":true,"path":"2018/11/18/MediaPlayer/","link":"","permalink":"https://noteforme.github.io/2018/11/18/MediaPlayer/","excerpt":"","text":"https://developer.android.com/reference/android/media/MediaPlayer http://www.runoob.com/w3cnote/android-tutorial-mediaplayer.html è¿™å¼ çŠ¶æ€è½¬æ¢å›¾æ¸…æ™°çš„æè¿°äº†MediaPlayerçš„å„ä¸ªçŠ¶æ€ï¼Œä¹Ÿåˆ—ä¸¾äº†ä¸»è¦çš„æ–¹æ³•çš„è°ƒç”¨æ—¶åºï¼Œæ¯ç§æ–¹æ³•åªèƒ½åœ¨ä¸€äº›ç‰¹å®šçš„çŠ¶æ€ä¸‹ä½¿ç”¨ï¼Œå¦‚æžœä½¿ç”¨æ—¶MediaPlayerçš„çŠ¶æ€ä¸æ­£ç¡®åˆ™ä¼šå¼•å‘IllegalStateExceptionå¼‚å¸¸ã€‚ Idle çŠ¶æ€ï¼šå½“ä½¿ç”¨new()æ–¹æ³•åˆ›å»ºä¸€ä¸ªMediaPlayerå¯¹è±¡æˆ–è€…è°ƒç”¨äº†å…¶reset()æ–¹æ³•æ—¶ï¼Œè¯¥MediaPlayerå¯¹è±¡å¤„äºŽidleçŠ¶æ€ã€‚è¿™ä¸¤ç§æ–¹æ³•çš„ä¸€ä¸ªé‡è¦å·®åˆ«å°±æ˜¯ï¼šå¦‚æžœåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹è°ƒç”¨äº†getDuration()ç­‰æ–¹æ³•ï¼ˆç›¸å½“äºŽè°ƒç”¨æ—¶æœºä¸æ­£ç¡®ï¼‰ï¼Œé€šè¿‡reset()æ–¹æ³•è¿›å…¥idleçŠ¶æ€çš„è¯ä¼šè§¦å‘OnErrorListener.onError()ï¼Œå¹¶ä¸”MediaPlayerä¼šè¿›å…¥ErrorçŠ¶æ€ï¼›å¦‚æžœæ˜¯æ–°åˆ›å»ºçš„MediaPlayerå¯¹è±¡ï¼Œåˆ™å¹¶ä¸ä¼šè§¦å‘onError(),ä¹Ÿä¸ä¼šè¿›å…¥ErrorçŠ¶æ€ã€‚ End çŠ¶æ€ï¼šé€šè¿‡release()æ–¹æ³•å¯ä»¥è¿›å…¥EndçŠ¶æ€ï¼Œåªè¦MediaPlayerå¯¹è±¡ä¸å†è¢«ä½¿ç”¨ï¼Œå°±åº”å½“å°½å¿«å°†å…¶é€šè¿‡release()æ–¹æ³•é‡Šæ”¾æŽ‰ï¼Œä»¥é‡Šæ”¾ç›¸å…³çš„è½¯ç¡¬ä»¶ç»„ä»¶èµ„æºï¼Œè¿™å…¶ä¸­æœ‰äº›èµ„æºæ˜¯åªæœ‰ä¸€ä»½çš„ï¼ˆç›¸å½“äºŽä¸´ç•Œèµ„æºï¼‰ã€‚å¦‚æžœMediaPlayerå¯¹è±¡è¿›å…¥äº†EndçŠ¶æ€ï¼Œåˆ™ä¸ä¼šåœ¨è¿›å…¥ä»»ä½•å…¶ä»–çŠ¶æ€äº†ã€‚ Initialized çŠ¶æ€ï¼šè¿™ä¸ªçŠ¶æ€æ¯”è¾ƒç®€å•ï¼ŒMediaPlayerè°ƒç”¨setDataSource()æ–¹æ³•å°±è¿›å…¥InitializedçŠ¶æ€ï¼Œè¡¨ç¤ºæ­¤æ—¶è¦æ’­æ”¾çš„æ–‡ä»¶å·²ç»è®¾ç½®å¥½äº†ã€‚ Prepared çŠ¶æ€ï¼šåˆå§‹åŒ–å®Œæˆä¹‹åŽè¿˜éœ€è¦é€šè¿‡è°ƒç”¨prepare()æˆ–prepareAsync()æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸€ä¸ªæ˜¯åŒæ­¥çš„ä¸€ä¸ªæ˜¯å¼‚æ­¥çš„ï¼Œåªæœ‰è¿›å…¥PreparedçŠ¶æ€ï¼Œæ‰è¡¨æ˜ŽMediaPlayeråˆ°ç›®å‰ä¸ºæ­¢éƒ½æ²¡æœ‰é”™è¯¯ï¼Œå¯ä»¥è¿›è¡Œæ–‡ä»¶æ’­æ”¾ã€‚ Preparing çŠ¶æ€ï¼šè¿™ä¸ªçŠ¶æ€æ¯”è¾ƒå¥½ç†è§£ï¼Œä¸»è¦æ˜¯å’ŒprepareAsync()é…åˆï¼Œå¦‚æžœå¼‚æ­¥å‡†å¤‡å®Œæˆï¼Œä¼šè§¦å‘OnPreparedListener.onPrepared()ï¼Œè¿›è€Œè¿›å…¥PreparedçŠ¶æ€ã€‚ Started çŠ¶æ€ï¼šæ˜¾ç„¶ï¼ŒMediaPlayerä¸€æ—¦å‡†å¤‡å¥½ï¼Œå°±å¯ä»¥è°ƒç”¨start()æ–¹æ³•ï¼Œè¿™æ ·MediaPlayerå°±å¤„äºŽStartedçŠ¶æ€ï¼Œè¿™è¡¨æ˜ŽMediaPlayeræ­£åœ¨æ’­æ”¾æ–‡ä»¶è¿‡ç¨‹ä¸­ã€‚å¯ä»¥ä½¿ç”¨isPlaying()æµ‹è¯•MediaPlayeræ˜¯å¦å¤„äºŽäº†StartedçŠ¶æ€ã€‚å¦‚æžœæ’­æ”¾å®Œæ¯•ï¼Œè€Œåˆè®¾ç½®äº†å¾ªçŽ¯æ’­æ”¾ï¼Œåˆ™MediaPlayerä»ç„¶ä¼šå¤„äºŽStartedçŠ¶æ€ï¼Œç±»ä¼¼çš„ï¼Œå¦‚æžœåœ¨è¯¥çŠ¶æ€ä¸‹MediaPlayerè°ƒç”¨äº†seekTo()æˆ–è€…start()æ–¹æ³•å‡å¯ä»¥è®©MediaPlayeråœç•™åœ¨StartedçŠ¶æ€ã€‚ Paused çŠ¶æ€ï¼šStartedçŠ¶æ€ä¸‹MediaPlayerè°ƒç”¨pause()æ–¹æ³•å¯ä»¥æš‚åœMediaPlayerï¼Œä»Žè€Œè¿›å…¥PausedçŠ¶æ€ï¼ŒMediaPlayeræš‚åœåŽå†æ¬¡è°ƒç”¨start()åˆ™å¯ä»¥ç»§ç»­MediaPlayerçš„æ’­æ”¾ï¼Œè½¬åˆ°StartedçŠ¶æ€ï¼Œæš‚åœçŠ¶æ€æ—¶å¯ä»¥è°ƒç”¨seekTo()æ–¹æ³•ï¼Œè¿™æ˜¯ä¸ä¼šæ”¹å˜çŠ¶æ€çš„ã€‚ Stop çŠ¶æ€ï¼šStartedæˆ–è€…PausedçŠ¶æ€ä¸‹å‡å¯è°ƒç”¨stop()åœæ­¢MediaPlayerï¼Œè€Œå¤„äºŽStopçŠ¶æ€çš„MediaPlayerè¦æƒ³é‡æ–°æ’­æ”¾ï¼Œéœ€è¦é€šè¿‡prepareAsync()å’Œprepare()å›žåˆ°å…ˆå‰çš„PreparedçŠ¶æ€é‡æ–°å¼€å§‹æ‰å¯ä»¥ã€‚ PlaybackCompletedçŠ¶æ€ï¼šæ–‡ä»¶æ­£å¸¸æ’­æ”¾å®Œæ¯•ï¼Œè€Œåˆæ²¡æœ‰è®¾ç½®å¾ªçŽ¯æ’­æ”¾çš„è¯å°±è¿›å…¥è¯¥çŠ¶æ€ï¼Œå¹¶ä¼šè§¦å‘OnCompletionListenerçš„onCompletion()æ–¹æ³•ã€‚æ­¤æ—¶å¯ä»¥è°ƒç”¨start()æ–¹æ³•é‡æ–°ä»Žå¤´æ’­æ”¾æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥stop()åœæ­¢MediaPlayerï¼Œæˆ–è€…ä¹Ÿå¯ä»¥seekTo()æ¥é‡æ–°å®šä½æ’­æ”¾ä½ç½®ã€‚ ErrorçŠ¶æ€ï¼šå¦‚æžœç”±äºŽæŸç§åŽŸå› MediaPlayerå‡ºçŽ°äº†é”™è¯¯ï¼Œä¼šè§¦å‘OnErrorListener.onError()äº‹ä»¶ï¼Œæ­¤æ—¶MediaPlayerå³è¿›å…¥ErrorçŠ¶æ€ï¼ŒåŠæ—¶æ•æ‰å¹¶å¦¥å–„å¤„ç†è¿™äº›é”™è¯¯æ˜¯å¾ˆé‡è¦çš„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶é‡Šæ”¾ç›¸å…³çš„è½¯ç¡¬ä»¶èµ„æºï¼Œä¹Ÿå¯ä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚é€šè¿‡setOnErrorListener(android.media.MediaPlayer.OnErrorListener)å¯ä»¥è®¾ç½®è¯¥ç›‘å¬å™¨ã€‚å¦‚æžœMediaPlayerè¿›å…¥äº†ErrorçŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨reset()æ¥æ¢å¤ï¼Œä½¿å¾—MediaPlayeré‡æ–°è¿”å›žåˆ°IdleçŠ¶æ€ã€‚ åŽŸæ–‡ï¼šhttps://blog.csdn.net/ddna/article/details/5178864https://blog.csdn.net/biaobiao1217/article/details/51557733","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"mina","slug":"mina","date":"2018-11-03T01:48:09.000Z","updated":"2021-08-19T11:11:44.302Z","comments":true,"path":"2018/11/03/mina/","link":"","permalink":"https://noteforme.github.io/2018/11/03/mina/","excerpt":"","text":"MINAé…ç½® ä¸‹è½½ http://mina.apache.org/mina-project/downloads.html apache-mina-2.0.19-bin.zip è§£åŽ‹ ä¸‹è½½ https://www.slf4j.org/download.html slf4j-1.7.25.zipè§£åŽ‹ åœ¨MineUtilé¡¹ç›®ä¸­æœ‰demoå®žçŽ° IMé”®ç›˜ https://juejin.im/post/5ef850c9f265da231019f6e4","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"GestureDetector","slug":"GestureDetector","date":"2018-08-13T08:08:19.000Z","updated":"2021-08-19T11:11:43.897Z","comments":true,"path":"2018/08/13/GestureDetector/","link":"","permalink":"https://noteforme.github.io/2018/08/13/GestureDetector/","excerpt":"","text":"GestureDetectoræ€»ç»“ https://blog.csdn.net/harvic880925/article/details/39520901 åˆ‡æ¢åŠ¨ç”» https://blog.csdn.net/u013309870/article/details/52873515 http://www.jcodecraeer.com/a/basictutorial/2016/1014/6672.html https://www.jianshu.com/p/a06e4f215f49 1e1, MotionEvent e2åæ ‡æ»‘åŠ¨è·ç¦» é€Ÿåº¦åˆ¤æ–­:velocityXï¼šXè½´ä¸Šçš„ç§»åŠ¨é€Ÿåº¦ï¼Œåƒç´ /ç§’ velocityYï¼šYè½´ä¸Šçš„ç§»åŠ¨é€Ÿåº¦ï¼Œåƒç´ /ç§’","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"AndroidSource","slug":"AndroidSource","date":"2018-07-25T01:57:29.000Z","updated":"2025-04-02T13:46:52.077Z","comments":true,"path":"2018/07/25/AndroidSource/","link":"","permalink":"https://noteforme.github.io/2018/07/25/AndroidSource/","excerpt":"","text":"Android docker å²ä¸Šæœ€ç®€å•Androidæºç ç¼–è¯‘çŽ¯å¢ƒæ­å»ºæ–¹æ³• | Weishuâ€™s Notes https://source.android.com/docs/setup/start/requirements#setting-up-a-linux-build-environment https://www.zhihu.com/people/tian-weishu/answers?page=1https://zwc365.com/2020/08/30/android10-baiduwangpan ubuntu environmentubuntu environment user permission Open terminal. Type â€œsu rootâ€ in the terminal and press enter You will be asked to enter the password. Type the password and press enter. You will be moved to root.4.Type â€œusermod -aG sudo usernameâ€. Add your username, and enter. Nothing will happend. You will move to next line without any error. Reboot&#x2F;Restart the os.https://www.youtube.com/watch?v=ZxOwFOtcaaA comment download source code https://mirrors.ustc.edu.cn/help/aosp.html Download source code create bin 123456mkdir ~/binPATH=~/bin:$PATHcurl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo## å¦‚æžœä¸Šè¿° URL ä¸å¯è®¿é—®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ï¼šcurl -sSL &#x27;https://gerrit-googlesource.proxy.ustclug.org/git-repo/+/master/repo?format=TEXT&#x27; |base64 -d &gt; ~/bin/repochmod a+x ~/bin/repo update repository Edit the file ~/bin/repo and replace REPO_URL 123REPO_URL = &#x27;https://gerrit-googlesource.proxy.ustclug.org/git-repo&#x27;REPO_URL=&#x27;https://mirrors.tuna.tsinghua.edu.cn/git/git-repo&#x27; sync code &#x2F;&#x2F; æœ‰æ—¶å€™æœ‰ä¸­æ–­ï¼Œä¸ç”¨ç®¡ç»§ç»­ä¸‹è½½ 1234mkdir sourcecd sourcerepo init -u https://mirrors.ustc.edu.cn/aosp/platform/manifest -b android-6.0.1_r40repo sync git-repo | é•œåƒç«™ä½¿ç”¨å¸®åŠ© | æ¸…åŽå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ | Tsinghua Open Source Mirror ubuntu 20.04 è¿è¡Œrepo init æç¤º &#x2F;usr&#x2F;bin&#x2F;env: â€˜pythonâ€™: No such file or directory è§£å†³æ–¹æ¡ˆ sudo ln -s &#x2F;usr&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;bin&#x2F;python https://juejin.cn/post/7071152327482146823 åŒæ­¥æºç æ ‘ï¼ˆä»¥åŽåªéœ€æ‰§è¡Œè¿™æ¡å‘½ä»¤æ¥åŒæ­¥ï¼‰ï¼š repo sync https://blog.csdn.net/qq_34508943/article/details/133391020 Install required packagesTo install required packages for Ubuntu 18.04 or later, run the following command: 1sudo apt-get install git-core gnupg flex bison build-essential zip curl zlib1g-dev libc6-dev-i386 x11proto-core-dev libx11-dev lib32z1-dev libgl1-mesa-dev libxml2-utils xsltproc unzip fontconfig https://source.android.com/docs/setup/start Docker AOSPhttps://hub.docker.com/r/green369258/aosp 123docker pull green369258/aosp:android-msudo docker run -itd --name android-m -v /home/m/source:/aosp green369258/aosp:android-mdocker exec -it android-m /bin/bash ä»£ç ä¸‹è½½åœ¨å®¿ä¸»æœºå™¨ä¸Šï¼Œå’Œå®¹å™¨è·¯å¾„åšæ˜ å°„ã€‚ é—®é¢˜ DockerçŽ¯å¢ƒä¸‹ç¼–è¯‘androidæºç |ç¼–è¯‘å¯è¿è¡Œxposed - iMisty - åšå®¢å›­ ç¼–è¯‘æœ‰é—®é¢˜ https://hub.docker.com/r/praqma/aosp-build-container https://hub.docker.com/r/davesrl/aosp/tags https://hub.docker.com/r/inteldevcloudx77/aosp/tags SOURCE CODE BUILDandroid 12 æºç ç¼–è¯‘ä¸Žè™šæ‹Ÿæœºè°ƒè¯•_aosp running multiple emulators with the same avd-CSDNåšå®¢ åˆå§‹åŒ–ç¼–è¯‘çŽ¯å¢ƒ 1source build/envsetup.sh é€‰æ‹©äº§å“76 sdk_phone_x86_64-eng lunch ä½¿ç”¨lunché€‰æ‹©è¦ç¼–è¯‘çš„äº§å“ï¼Œæ­¤æ–‡æ¡£ä¸­ä»¥ç¼–è¯‘x86_x64 emulatoræ¨¡æ‹Ÿå™¨é•œåƒä¸ºä¾‹è¿›è¡Œè¯´æ˜Žã€‚ emulator ä¿®æ”¹AndroidProduct.mkä½¿æ”¯æŒx86_x64é•œåƒç¼–è¯‘ç”±äºŽandroid12 é»˜è®¤lunché»˜è®¤é€‰ä¸åˆ°æ¨¡æ‹Ÿå™¨é•œåƒï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦ä¿®æ”¹mkã€‚ä¿®æ”¹build&#x2F;make&#x2F;target&#x2F;product&#x2F;AndroidProducts.mkæ–‡ä»¶ï¼Œæ·»åŠ sdk_phone_x86_64-engæ”¯æŒ 123456789diff --git a/target/product/AndroidProducts.mk b/target/product/AndroidProducts.mkindex 7d9d90e92a..419cccb80a 100644--- a/target/product/AndroidProducts.mk+++ b/target/product/AndroidProducts.mk@@ -84,3 +84,4 @@ COMMON_LUNCH_CHOICES := \\ aosp_arm-eng \\ aosp_x86_64-eng \\ aosp_x86-eng \\+ sdk_phone_x86_64-eng \\ åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/qq_17696807/article/details/124302856 lunch sdk_phone_x86_64-eng Dokcer Build12345docker run --rm -it -v /home/m/aosp8:/aosp sabdelkader/aospdocker container exec -it 4269513e4289 /aosp build issuelibncurses.so.5123prebuilts/clang/host/linux-x86/clang-3289846/bin/clang.real: error while loadingshared libraries: libncurses.so.5: cannot open shared object file: No such fileor directory 32 bit - How to install libncurses.so.5 in Ubuntu 20.04? - Ask Ubuntu https://blog.csdn.net/qq_34508943/article/details/133391020 get into &#x2F;etc&#x2F;apt&#x2F;sources.list.d and locate ubuntu.sources. open the terminal in that directory by right clicking in it. then run sudo nano .&#x2F;ubuntu.sources a pluma editor will open. just add these lines:- 12345Types: debURIs: http://security.ubuntu.com/ubuntu Suites: focal-securityComponents: main universeSigned-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg AOSP ç¼–è¯‘Android12æºç å…¨è®°å½• - ç®€ä¹¦ emulator: ERROR: x86 emulation currently requires hardware accelerationUbentuç¼–è¯‘Androidæºç ï¼ˆAOSPï¼‰ - æœ‰ç‚¹ç†æƒ³çš„ç å†œ - åšå®¢å›­ python error&#x2F;usr&#x2F;bin&#x2F;env: â€˜pythonâ€™: No such file or directory-CSDNåšå®¢ docker errorUSERé—®é¢˜ï¼ˆç”±äºŽè¿è¡Œçš„docker å®¹æ˜“æ²¡æœ‰é…ç½®USERçŽ¯å¢ƒå˜é‡ï¼‰ 123USER: unbound variable out/host/linux-x86/bin/jack-admin: line 27: USER: unbound variable touch out/host/common/obj/JAVA_LIBRARIES/jack_intermediates/kill_server.stamp Install: out/host/linux-x86/framework/jack.jar out/host/linux-x86/bin/jack-admin: line 27: USER: 1export USER=$(whoami) ä¹Ÿå¯ä»¥åœ¨dockeræž„å»ºæ–‡ä»¶Dockerfileä¸­åŠ ä¸Šå¦‚ä¸‹è¯­å¥ï¼š 1ENV USER root /æˆ–è€…è‡ªå·±éœ€è¦çš„åå­— android7.0 æºç ç¼–è¯‘é—®é¢˜æ€»ç»“-CSDNåšå®¢ Unable to compile AOSP source code on Ubuntu 24.04 system - Stack Overflow https://github.com/alsutton/aosp-build-docker-images import Android studioemulator run1234567source build/envsetup.shlunchemulatorsoruce build/envsetup.shmmm development/tools/idegen/development/tools/idegen/idegen.sh import Android studiSWAP RAM12345678910111213141516171819202122# Turn swap off# This moves stuff in swap to the main memory and might take several minutessudo swapoff -a# Create an empty swapfile# Note that &quot;1G&quot; is basically just the unit and count is an integer.# Together, they define the size. In this case 16GB.sudo dd if=/dev/zero of=/swapfile bs=1G count=16# Set the correct permissionssudo chmod 0600 /swapfilesudo mkswap /swapfile # Set up a Linux swap areasudo swapon /swapfile # Turn the swap onCheck if it workedgrep Swap /proc/meminfoMake it permanent (persist on restarts)Add this line to the end of your /etc/fstab:/swapfile swap swap sw 0 0 Aosp 14 build error [100% 1&#x2F;1] analyzing Android.bp files and generating ninja file at out&#x2F;soong&#x2F;build.ninja FAILED: out&#x2F;soong&#x2F;build.ninja - Stack Overflow è¦å­¦ä¹ Androidæºç éœ€è¦ç¼–è¯‘ä¸€ä»½ï¼Œç„¶åŽå®‰è£…è¦æ±‚å¯¼å…¥AndroidStudio,å¯ä»¥å‚è€ƒ: http://blog.csdn.net/huaiyiheyuan/article/details/52069122 Activityå¯åŠ¨è¿‡ç¨‹å¯¹åº”ç”¨ç¨‹åºActivityè¿›è¡Œç¼–è¯‘å’Œæ‰“åŒ… /home/jon/æ¡Œé¢/LaoLuo/chapter-7/src/packages/experimental/Activity make snod emulator ç„¶åŽæŸ¥çœ‹activityä¿¡æ¯ï¼Œåœ¨è¿™é‡Œé€šè¿‡æºç é‡Œé¢çš„ adb cd /home/jon/AOSP/out/host/linux-x86/bin adb shell dumpsys activity Android open source projectAndroid Architecture https://source.android.com/https://source.android.com/devices/architecturehttps://blog.csdn.net/wenzhi20102321/article/details/80739649https://blog.csdn.net/wen0006/article/details/5804639 æºç å…³è”é˜…è¯» ä¹Ÿå¯ä»¥é€‰æ‹©å¯¹åº”çš„æ–‡ä»¶çš„ .classæ–‡ä»¶åŽï¼Œå†é€‰æ‹©æºç åŽå†å»ºç«‹å…³è”ã€‚ https://www.jianshu.com/p/8012d5d38b01 Ubuntu 24.04 + Windows 10&#x2F;11 åŒå¼•å¯¼ç³»ç»Ÿæ— æŸå®‰è£… | AIå¼€æºé¡¹ç›® æ¨¡åž‹å¾®è°ƒå¿…å¤‡ - YouTube https://www.zhihu.com/people/tian-weishu/answers?page=5 Binder https://www.zhihu.com/question/39440766/answer/81511893 Binderå­¦ä¹ æŒ‡å— | Weishuâ€™s Notes https://github.com/satur9nine/aosp-docker-build-env Ubentuç¼–è¯‘Androidæºç ï¼ˆAOSPï¼‰ - æœ‰ç‚¹ç†æƒ³çš„ç å†œ - åšå®¢å›­","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"}]},{"title":"ViewDynamic","slug":"ViewDynamic","date":"2018-07-17T12:25:26.000Z","updated":"2021-08-19T11:11:44.266Z","comments":true,"path":"2018/07/17/ViewDynamic/","link":"","permalink":"https://noteforme.github.io/2018/07/17/ViewDynamic/","excerpt":"","text":"åŠ¨æ€æ·»åŠ å¸ƒå±€LinearLayoutæ·»åŠ  çˆ¶å®¹å™¨ 123456&lt;LinearLayout android:id=&quot;@+id/ll_plan_one&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;vertical&quot;&gt;&lt;/LinearLayout&gt; å­å¸ƒå±€ 123View view1 = inflate.inflate(R.layout.layout_animation, null);View view2 = inflate.inflate(R.layout.ic_hpan_suger_press_y, null);View view3 = inflate.inflate(R.layout.ic_hpan_suger_press_y, null); æ·»åŠ è¿›å®¹å™¨ 123llVertical.addView(view1);llVertical.addView(view2);llVertical.addView(view3); æ·»åŠ åŒä¸€ä¸ªå­å¸ƒå±€ä¼šæŠ¥é”™ 12llVertical.addView(view1);llVertical.addView(view1); â€‹ Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the childâ€™s parent first.","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Lambda","slug":"Lambda","date":"2018-07-11T06:23:20.000Z","updated":"2021-08-19T11:11:44.095Z","comments":true,"path":"2018/07/11/Lambda/","link":"","permalink":"https://noteforme.github.io/2018/07/11/Lambda/","excerpt":"","text":"http://blog.oneapm.com/apm-tech/226.html android https://maxwell-nc.github.io/android/retrolambda.html https://cloud.tencent.com/developer/article/1526621 https://juejin.im/post/6844903668592934925 kotlin lambda https://juejin.im/post/6844903604613021703 Video Java lambdaå‡½æ•°å¼ç¼–ç¨‹ https://www.bilibili.com/video/av54941486/ http://www.chilangedu.com/sectionq/2132352424 map1&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T, ? extends R&gt; mapper); 123public interface Function&lt;T, R&gt; &#123; R apply(T t); //å°†Tç±»åž‹è½¬ä¸ºR&#125;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"Bluetooth02","slug":"Bluetooth02","date":"2018-07-05T10:17:23.000Z","updated":"2024-10-02T01:36:25.262Z","comments":true,"path":"2018/07/05/Bluetooth02/","link":"","permalink":"https://noteforme.github.io/2018/07/05/Bluetooth02/","excerpt":"","text":"BLE stack(è“ç‰™åè®®æ ˆ) ä½œä¸º Android å¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸å¿…ç†è§£ BLE çš„åè®®æ ˆæ¯ä¸ªç»†èŠ‚ï¼Œè¿™é‡Œå¤§æ¦‚ä»‹ç»ä¸€ä¸‹åè®®æž¶æž„ã€‚ åè®®ä¸€èˆ¬éƒ½æ˜¯åˆ†å±‚è®¾è®¡çš„ã€‚BLE åè®®æ ˆä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå›¾ã€‚æ•´ä¸ªåè®®æ ˆå¤§è‡´åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä»Žä¸‹åˆ°ä¸Šåˆ†åˆ«ä¸ºï¼ŒæŽ§åˆ¶å™¨ ï¼ˆControllerï¼‰â†’ä¸»æœºï¼ˆHostï¼‰â†’åº”ç”¨ï¼ˆApplicationsï¼‰ã€‚ Controller : å®ƒæ˜¯åè®®æ ˆçš„åº•å±‚çš„å®žçŽ°ï¼Œç›´æŽ¥ä¸Žç¡¬ä»¶ç›¸å…³ï¼Œä¸€èˆ¬ç›´æŽ¥é›†æˆåœ¨ SoC ä¸­ï¼Œç”±èŠ¯ç‰‡åŽ‚å•†å®žçŽ°ï¼ŒåŒ…æ‹¬ç‰©ç†å±‚å’Œé“¾è·¯å±‚ã€‚ HOST : è¿™æ˜¯åè®®æ ˆçš„ä¸Šå±‚å®žçŽ°ï¼Œæ˜¯ç¡¬ä»¶çš„æŠ½è±¡ï¼Œä¸Žå…·ä½“çš„ç¡¬ä»¶å’ŒåŽ‚å®¶æ— å…³ åº”ç”¨å±‚ï¼š å°±æ˜¯ä½¿ç”¨ Host å±‚æä¾›çš„ APIï¼Œå¼€å‘çš„åº”ç”¨ã€‚ Controller PhysicalLayer(ç‰©ç†å±‚ ): è“ç‰™æ˜¯å·¥ä½œåœ¨ 2.4GHz é™„è¿‘ï¼Œè¿™æ˜¯å·¥ä¸šã€ç§‘å­¦ã€åŒ»ç–— ISM é¢‘æ®µã€‚å¯ä»¥çœ‹åˆ°å®ƒå’Œ WiFi å·¥ä½œåœ¨åŒä¸€ä¸ªé¢‘æ®µã€‚è“ç‰™æŠŠé¢‘æ®µåˆ‡åˆ†ä¸º 40 ä¸ªé€šé“ï¼Œ3 ä¸ªå¹¿æ’­é€šé“ï¼Œ37 ä¸ªæ•°æ®é€šé“ï¼ŒæŒ‰ç…§ä¸€å®šè§„å¾‹è·³é¢‘é€šä¿¡ï¼ˆé«˜æ–¯é¢‘ç§»é”®æŽ§ GFSKï¼‰ã€‚ HCI : åœ¨ Host å±‚å’Œ Controller ä¹‹é—´æœ‰ä¸€ä¸ªæŽ¥å£å±‚ :ä¸»æœºå’ŒæŽ§åˆ¶å™¨ä¹‹é—´å°±æ˜¯é€šè¿‡ HCI å‘½ä»¤å’Œäº‹ä»¶äº¤äº’çš„ã€‚HCI è¿™ä¸€å±‚æ˜¯åè®®æ ˆä¸­æ˜¯å¯é€‰çš„ï¼Œä¾‹å¦‚åœ¨ä¸€äº›ç®€å•å°åž‹çš„è®¾å¤‡ä¸Šå¯èƒ½å°±æ²¡æœ‰ï¼Œä½†æ˜¯æ‰€æœ‰çš„ Android è®¾å¤‡ä¸Šè‚¯å®šæ˜¯æœ‰ã€‚è¿™æ˜¯è“ç‰™ä¸Šå±‚åº”ç”¨å’ŒèŠ¯ç‰‡çš„äº¤äº’çš„å¿…ç»ä¹‹è·¯ã€‚åŽé¢æˆ‘ä»¬ä¼šè®²åˆ°ï¼Œè¿™ä¸€å±‚çš„ logï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„å¸®åŠ©æˆ‘ä»¬åˆ†æžå’Œè°ƒè¯•é—®é¢˜ã€‚ HostATT (Attribute Protocol)å®ƒæ˜¯ BLE é€šä¿¡çš„åŸºç¡€ã€‚ATT æŠŠæ•°æ®å°è£…ï¼Œå‘å¤–æš´éœ²ä¸ºâ€œå±žæ€§â€ï¼Œæä¾›â€œå±žæ€§â€çš„ä¸ºæœåŠ¡ç«¯ï¼ŒèŽ·å–â€œå±žæ€§â€çš„ä¸ºå®¢æˆ·ç«¯ã€‚ATT æ˜¯ä¸“é—¨ä¸ºä½ŽåŠŸè€—è“ç‰™è®¾è®¡çš„ï¼Œç»“æž„éžå¸¸ç®€å•ï¼Œæ•°æ®é•¿åº¦å¾ˆçŸ­ . GATT(Generic Attribute Profile) å…¨ç§°å«åšé€šç”¨å±žæ€§é…ç½®æ–‡ä»¶ï¼Œå®ƒæ˜¯å»ºç«‹åœ¨å‰é¢è¯´çš„ ATT çš„åŸºç¡€ä¸Šï¼Œå¯¹ ATT è¿›è¡Œè¿›ä¸€æ­¥çš„é€»è¾‘å°è£…ï¼Œå®šä¹‰æ•°æ®çš„äº¤äº’æ–¹å¼å’Œå«ä¹‰ã€‚è¿™æ˜¯æˆ‘ä»¬åš BLE å¼€å‘çš„æ—¶å€™ç›´æŽ¥æŽ¥è§¦çš„æ¦‚å¿µã€‚ GATT æŒ‰ç…§å±‚çº§å®šä¹‰äº†ä¸‰ä¸ªæ¦‚å¿µï¼šæœåŠ¡ï¼ˆServiceï¼‰ã€ç‰¹å¾ï¼ˆCharacteristicï¼‰å’Œæè¿°ï¼ˆDescriptorï¼‰ã€‚ ä¸€ä¸ª Service åŒ…å«è‹¥å¹²ä¸ª Characteristicï¼Œä¸€ä¸ª Characteristic å¯ä»¥åŒ…å«è‹¥å¹² Descriptorã€‚è€Œ Characteristic å®šä¹‰äº†æ•°å€¼å’Œæ“ä½œã€‚Characteristic çš„æ“ä½œè¿™å‡ ç§æƒé™ï¼šè¯»ã€å†™ã€é€šçŸ¥ç­‰æƒé™ã€‚æˆ‘ä»¬è¯´çš„ BLE é€šä¿¡ï¼Œå…¶å®žå°±æ˜¯å¯¹ Characteristic çš„è¯»å†™æˆ–è€…è®¢é˜…é€šçŸ¥ã€‚è¿˜æœ‰æœ€å¤–é¢ä¸€å±‚ï¼ŒProfileé…ç½®æ–‡ä»¶ï¼ŒæŠŠè‹¥å¹²ä¸ªç›¸å…³çš„ Service ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±æˆä¸ºäº†ä¸€ä¸ª Profileï¼ŒProfile å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå®žé™…çš„åº”ç”¨åœºæ™¯ã€‚ Serviceã€Characteristicç›¸å½“äºŽæ ‡ç­¾ï¼ˆServiceç›¸å½“äºŽä»–çš„ç±»åˆ«ï¼ŒCharacteristicç›¸å½“äºŽå®ƒçš„åå­—ï¼‰ï¼Œè€Œvalueæ‰çœŸæ­£çš„åŒ…å«æ•°æ®ï¼ŒDescriptoræ˜¯å¯¹è¿™ä¸ªvalueè¿›è¡Œçš„è¯´æ˜Žå’Œæè¿°ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä»Žä¸åŒè§’åº¦æ¥æè¿°å’Œè¯´æ˜Žï¼Œå› æ­¤å¯ä»¥æœ‰å¤šä¸ªDescriptor. ä¾‹å¦‚: å¸¸è§çš„å°ç±³æ‰‹çŽ¯æ˜¯ä¸€ä¸ªBLEè®¾å¤‡ï¼Œï¼ˆå‡è®¾ï¼‰å®ƒåŒ…å«ä¸‰ä¸ªService,åˆ†åˆ«æ˜¯æä¾›è®¾å¤‡ä¿¡æ¯çš„Serviceã€æä¾›æ­¥æ•°çš„Serviceã€æ£€æµ‹å¿ƒçŽ‡çš„Service; è€Œè®¾å¤‡ä¿¡æ¯çš„serviceä¸­åŒ…å«çš„characteristicåŒ…æ‹¬åŽ‚å•†ä¿¡æ¯ã€ç¡¬ä»¶ä¿¡æ¯ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ï¼›è€Œå¿ƒçŽ‡Serviceåˆ™åŒ…æ‹¬å¿ƒçŽ‡characteristicç­‰ï¼Œè€Œå¿ƒçŽ‡characteristicä¸­çš„valueåˆ™çœŸæ­£çš„åŒ…å«å¿ƒçŽ‡çš„æ•°æ®ï¼Œè€Œdescriptoråˆ™æ˜¯å¯¹è¯¥valueçš„æè¿°è¯´æ˜Žï¼Œæ¯”å¦‚valueçš„å•ä½å•Šï¼Œæè¿°å•Šï¼Œæƒé™å•Šç­‰ã€‚ GAP(Generic Access Profile)å®ƒå®šä¹‰äº† BLE æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ä¸­çš„æµç¨‹ï¼Œä¾‹å¦‚å¹¿æ’­ã€æ‰«æã€è¿žæŽ¥ç­‰æµç¨‹ã€‚è¿˜å®šä¹‰äº†å‚ä¸Žé€šä¿¡çš„è®¾å¤‡è§’è‰²ï¼Œä»¥åŠä»–ä»¬å„è‡ªçš„èŒèƒ½ï¼Œä¾‹å¦‚å¹¿æ’­æ•°æ®çš„ Broadcasterï¼ŒæŽ¥æ”¶å¹¿æ’­çš„ Observerï¼Œè¿˜æœ‰è¢«è¿žæŽ¥çš„â€œå¤–è®¾â€ Peripheral å’Œå‘èµ·è¿žæŽ¥çš„â€œä¸­å¿ƒè®¾å¤‡â€ Centralã€‚å¯ä»¥çœ‹åˆ°ï¼Œå‚ä¸Žäº¤äº’çš„è®¾å¤‡è§’è‰²éƒ½ä¸æ˜¯å¯¹ç­‰ Applicationså°±æ˜¯ä½¿ç”¨ Host æä¾›çš„ API å¼€å‘çš„ä½ŽåŠŸè€—è“ç‰™åº”ç”¨ã€‚ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±æŠŠ BLE çš„åè®®æ ˆè¿‡äº†ä¸€ä¸‹ï¼Œä¸ºæˆ‘ä»¬å¼€å‘ BLE æœ‰äº†ä¸€äº›ç†è®ºåŸºç¡€ã€‚ BLE on Android Central mode : ä»ŽAndroid 4.3 Jelly Beanï¼Œä¹Ÿå°±æ˜¯ API 18 æ‰å¼€å§‹æ”¯æŒä½ŽåŠŸè€—è“ç‰™(è“ç‰™4.0)ã€‚è¿™æ—¶æ”¯æŒ BLE çš„ Central æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢ GAP ä¸­è¯´çš„ï¼ŒAndroid è®¾å¤‡åªèƒ½ä½œä¸ºä¸­å¿ƒè®¾å¤‡åŽ»è¿žæŽ¥å…¶ä»–è®¾å¤‡ã€‚ Peripheral mode:ä»Ž Android 5.0 å¼€å§‹æ‰æ”¯æŒå¤–è®¾æ¨¡å¼(è“ç‰™4.1)ã€‚Android è®¾å¤‡çŽ°åœ¨å¯ä»¥å‘æŒ¥è“ç‰™ LE å¤–å›´è®¾å¤‡çš„ä½œç”¨ã€‚åº”ç”¨å¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½è®©é™„è¿‘è®¾å¤‡å‘çŽ°å®ƒã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¼€å‘è¿™æ ·çš„åº”ç”¨ï¼šè®©è®¾å¤‡å‘æŒ¥è®¡æ­¥å™¨æˆ–å¥åº·ç›‘æµ‹ä»ªçš„ä½œç”¨ï¼Œå¹¶ä¸Žå…¶ä»–è“ç‰™ LE è®¾å¤‡è¿›è¡Œæ•°æ®é€šä¿¡ã€‚ æ–°å¢žçš„ android.bluetooth.le API è®©æ‚¨çš„åº”ç”¨å¯ä»¥å‘å¸ƒå¹¿å‘Šã€æ‰«æå“åº”ä»¥åŠä¸Žé™„è¿‘çš„è“ç‰™ LE è®¾å¤‡å»ºç«‹è¿žæŽ¥ã€‚è¦ä½¿ç”¨æ–°å¢žçš„å¹¿å‘Šå’Œæ‰«æåŠŸèƒ½ï¼Œè¯·åœ¨æ‚¨çš„æ¸…å•ä¸­æ·»åŠ  BLUETOOTH_ADMIN æƒé™ã€‚å½“ç”¨æˆ·æ›´æ–°æ‚¨çš„åº”ç”¨æˆ–ä»Ž Play å•†åº—ä¸‹è½½æ‚¨çš„åº”ç”¨æ—¶ï¼Œä¼šè¢«è¦æ±‚å‘æ‚¨çš„åº”ç”¨æŽˆäºˆä»¥ä¸‹æƒé™ï¼šâ€œBluetooth connection information:Allows the app to control Bluetooth, including broadcasting to or getting information about nearby Bluetooth devices.â€ è¦å¯åŠ¨è“ç‰™ LE å¹¿æ’­ï¼Œä»¥ä¾¿å…¶ä»–è®¾å¤‡èƒ½å‘çŽ°æ‚¨çš„åº”ç”¨ï¼Œè¯·è°ƒç”¨ startAdvertising()ï¼Œå¹¶ä¼ å…¥ AdvertiseCallback ç±»çš„å®žçŽ°ã€‚å›žè°ƒå¯¹è±¡ä¼šæ”¶åˆ°å¹¿æ’­æ“ä½œæˆåŠŸæˆ–å¤±è´¥çš„æŠ¥å‘Šã€‚ Android 5.0 å¼•å…¥äº† ScanFilter ç±»ï¼Œè®©æ‚¨çš„åº”ç”¨å¯ä»¥åªæ‰«æå…¶æ„Ÿå…´è¶£çš„ç‰¹å®šç±»åž‹è®¾å¤‡ã€‚è¦å¼€å§‹æ‰«æè“ç‰™ LE è®¾å¤‡ï¼Œè¯·è°ƒç”¨ startScan()ï¼Œå¹¶ä¼ å…¥ç­›é€‰å™¨åˆ—è¡¨ã€‚åœ¨æ–¹æ³•è°ƒç”¨ä¸­ï¼Œæ‚¨è¿˜å¿…é¡»æä¾› ScanCallback çš„å®žçŽ°ï¼Œä»¥ä¾¿åœ¨å‘çŽ°è“ç‰™ LE å¹¿æ’­æ—¶è¿›è¡ŒæŠ¥å‘Šã€‚ https://developer.android.com/about/versions/android-5.0?hl=zh-cn#BluetoothBroadcasting https://en.wikipedia.org/wiki/Bluetooth#Communication_and_connection Android 7.0 è“ç‰™æž¶æž„ Android 8.0 è“ç‰™æž¶æž„Android æä¾›æ”¯æŒç»å…¸è“ç‰™å’Œè“ç‰™ä½ŽåŠŸè€—çš„é»˜è®¤è“ç‰™å †æ ˆã€‚å€ŸåŠ©è“ç‰™ï¼ŒAndroid è®¾å¤‡å¯ä»¥åˆ›å»ºä¸ªäººåŒºåŸŸç½‘ç»œï¼Œä»¥ä¾¿é€šè¿‡é™„è¿‘çš„è“ç‰™è®¾å¤‡å‘é€å’ŒæŽ¥æ”¶æ•°æ®ã€‚ åœ¨ Android 4.3 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒAndroid è“ç‰™å †æ ˆå¯æä¾›å®žçŽ°è“ç‰™ä½ŽåŠŸè€— (BLE) çš„åŠŸèƒ½ã€‚è¦å……åˆ†åˆ©ç”¨ BLE APIï¼Œè¯·éµå¾ª Android è“ç‰™ HCI è¦æ±‚ã€‚å…·æœ‰åˆæ ¼èŠ¯ç‰‡ç»„çš„ Android è®¾å¤‡å¯ä»¥å®žçŽ°ç»å…¸è“ç‰™æˆ–åŒæ—¶å®žçŽ°ç»å…¸è“ç‰™å’Œ BLEã€‚BLE ä¸èƒ½å‘åŽå…¼å®¹è¾ƒæ—§ç‰ˆæœ¬çš„è“ç‰™èŠ¯ç‰‡ç»„ã€‚ åœ¨ Android 8.0 ä¸­ï¼ŒåŽŸç”Ÿè“ç‰™å †æ ˆå®Œå…¨ç¬¦åˆè“ç‰™ 5.0 çš„è¦æ±‚ã€‚è¦ä½¿ç”¨å¯ç”¨çš„è“ç‰™ 5.0 åŠŸèƒ½ï¼Œè¯¥è®¾å¤‡éœ€è¦å…·æœ‰ç¬¦åˆè“ç‰™ 5 è¦æ±‚çš„èŠ¯ç‰‡ç»„ã€‚ æ³¨æ„ï¼šAndroid 8.0 åŠä»¥å‰ç‰ˆæœ¬ä¹‹é—´çš„åŽŸç”Ÿè“ç‰™å †æ ˆçš„æœ€å¤§å˜åŒ–æ˜¯ä½¿ç”¨é«˜éŸ³ã€‚Android 8.0 ä¸­çš„ä¾›åº”å•†å®žçŽ°å¿…é¡»ä½¿ç”¨ HIDL è€Œä¸æ˜¯ libbt-vendorã€‚ è“ç‰™ç³»ç»ŸæœåŠ¡ è“ç‰™ç³»ç»ŸæœåŠ¡ï¼ˆä½äºŽ packages/apps/Bluetooth ä¸­ï¼‰è¢«æ‰“åŒ…ä¸º Android åº”ç”¨ï¼Œå¹¶åœ¨ Android æ¡†æž¶å±‚å®žçŽ°è“ç‰™æœåŠ¡å’Œé…ç½®æ–‡ä»¶ã€‚æ­¤åº”ç”¨é€šè¿‡ JNI è°ƒç”¨åŽŸç”Ÿè“ç‰™å †æ ˆã€‚ JNI ä¸Ž android.bluetooth ç›¸å…³è”çš„ JNI ä»£ç ä½äºŽ packages/apps/Bluetooth/jni ä¸­ã€‚å½“å‘ç”Ÿç‰¹å®šè“ç‰™æ“ä½œæ—¶ï¼ˆä¾‹å¦‚å‘çŽ°è®¾å¤‡æ—¶ï¼‰ï¼ŒJNI ä»£ç ä¼šè°ƒç”¨è“ç‰™å †æ ˆã€‚ è“ç‰™å †æ ˆ ç³»ç»Ÿåœ¨ AOSP ä¸­æä¾›äº†é»˜è®¤è“ç‰™å †æ ˆï¼Œå®ƒä½äºŽ system/bt ä¸­ã€‚è¯¥å †æ ˆä¼šå®žçŽ°å¸¸è§„è“ç‰™ HALï¼Œå¹¶é€šè¿‡æ‰©å±•ç¨‹åºå’Œæ›´æ”¹é…ç½®å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ã€‚ ä¾›åº”å•†å®žçŽ° ä¾›åº”å•†è®¾å¤‡ä½¿ç”¨ç¡¬ä»¶æŽ¥å£è®¾è®¡è¯­è¨€ (HIDL) ä¸Žè“ç‰™å †æ ˆäº¤äº’ã€‚ HIDLHIDL å®šä¹‰äº†è“ç‰™å †æ ˆå’Œä¾›åº”å•†å®žçŽ°ä¹‹é—´çš„æŽ¥å£ã€‚è¦ç”Ÿæˆè“ç‰™ HIDL æ–‡ä»¶ï¼Œè¯·å°†è“ç‰™æŽ¥å£æ–‡ä»¶ä¼ é€’åˆ° HIDL ç”Ÿæˆå·¥å…·ä¸­ã€‚æŽ¥å£æ–‡ä»¶ä½äºŽ hardware/interfaces/bluetooth ä¸‹ã€‚ Android 7.x åŠæ›´æ—©ç‰ˆæœ¬çš„è“ç‰™æž¶æž„ https://developer.android.com/guide/platform/?hl=zh-cn https://source.android.com/setup/ https://source.android.com/devices/bluetooth/?hl=zh-cn Android ä¸­ BLE æ“ä½œçš„è¿‡ç¨‹ è¿™é‡Œä»‹ç»ä¸€ä¸‹ Android ä¸­ BLE æ“ä½œçš„è¿‡ç¨‹ï¼ŒAPP å‘èµ·ä¸€ä¸ª BLE æ“ä½œï¼Œç„¶åŽç†è§£è¿”å›žï¼Œæ“ä½œç»“æžœé€šè¿‡å›žè°ƒä¸ŠæŠ¥ã€‚æ“ä½œè¢«å°è£…ä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œç„¶åŽæ”¾åˆ°åè®®æ ˆçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæœ‰ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹èŽ·å–æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œç±»ä¼¼äºŽ Looper å’Œ Handler æœºåˆ¶ã€‚ å› ä¸ºæ˜¯ä½¿ç”¨æ¶ˆæ¯æœºåˆ¶ï¼Œå›žè°ƒçš„æ—¶å€™å¿…é¡»çŸ¥é“é€šçŸ¥å“ªä¸ªå®¢æˆ·ç«¯ï¼Ÿå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ä¹‹å‰ï¼Œé¦–å…ˆè¦å‘åè®®æ ˆæ³¨å†Œå®¢æˆ·ç«¯ï¼Œæ³¨å†ŒæˆåŠŸä»¥åŽï¼Œè¿”å›žä¸€ä¸ª clientIfï¼Œè¿™æ˜¯ä¸€ä¸ªæ•´åž‹ï¼Œæ˜¯å®¢æˆ·ç«¯åœ¨åè®®æ ˆçš„ä¸€ä¸ªå¥æŸ„ï¼Œå®¢æˆ·ç«¯çš„åŽç»­æ“ä½œï¼Œéƒ½åªéœ€è¦å¸¦ä¸Šè¿™ä¸ª clientIf å¥æŸ„å³å¯ã€‚ åœ¨æ“ä½œå®Œæˆçš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ªæ˜¾å¼çš„åœæ­¢æ“ä½œï¼Œç”¨æ¥é‡Šæ”¾å‰é¢çš„ç”³è¯·çš„ clientIf å’Œèµ„æºã€‚å¦‚æžœä¸èƒ½æ­£ç¡®çš„é‡Šæ”¾ï¼Œä¸ä»…ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œè€Œä¸”å¯èƒ½ä¼šå¯¼è‡´åŽç»­æ‰€æœ‰çš„ BLE æ“ä½œéƒ½æ˜¯ä¸èƒ½åšäº†ã€‚å› ä¸ºè¿™ä¸ª clientIf æ˜¯æœ‰é™ï¼Œåœ¨çŽ°åœ¨è“ç‰™åè®®æ ˆä¸­åªæœ‰ 32 ä¸ªï¼Œè€Œä¸”æ˜¯Android ä¸Šæ‰€æœ‰ APP å…±ç”¨çš„ã€‚å½“è¿™äº›èµ„æºç”¨å®Œä»¥åŽï¼Œåªæœ‰é€šè¿‡æ€æŽ‰å¯¹åº”çš„ APP æˆ–è€…é‡å¯è“ç‰™æ‰èƒ½æ¢å¤ã€‚ BLE åº”ç”¨BLE åº”ç”¨å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºŽéžè¿žæŽ¥çš„å’Œè¿žæŽ¥çš„ã€‚ Beacon åŸºäºŽéžè¿žæŽ¥çš„ï¼Œè¿™ç§åº”ç”¨å°±æ˜¯ä¾èµ– BLE çš„å¹¿æ’­ï¼Œä¹Ÿå«ä½œ Beaconã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªè§’è‰²ï¼Œå‘é€å¹¿æ’­çš„ä¸€æ–¹å«åš Broadcasterï¼Œç›‘å¬å¹¿æ’­çš„ä¸€æ–¹å« Observerã€‚ åŸºäºŽè¿žæŽ¥çš„ï¼Œå°±æ˜¯é€šè¿‡å»ºç«‹ GATT è¿žæŽ¥ï¼Œæ”¶å‘æ•°æ®ã€‚è¿™é‡Œä¹Ÿæœ‰ä¸¤ä¸ªè§’è‰²ï¼Œå‘èµ·è¿žæŽ¥çš„ä¸€æ–¹ï¼Œå«åšä¸­å¿ƒè®¾å¤‡â€”Centralï¼Œè¢«è¿žæŽ¥çš„è®¾å¤‡ï¼Œå«åšå¤–è®¾â€”Peripheralã€‚ éžè¿žæŽ¥å®ƒçš„ç½‘ç»œæ‹“æ‰‘ç»“æž„å¦‚ä¸‹ã€‚æˆ‘ä»¬çŸ¥é“å¹¿æ’­æ˜¯å•å‘çš„ï¼ŒBroadcaster å‘å¤–å¹¿æ’­ï¼Œç›‘å¬è€…æŽ¥æ”¶é™„è¿‘çš„å¹¿æ’­ï¼Œæ•´ä½“æ¥è¯´å½¢æˆä¸€ä¸ªå•å‘çš„æ˜Ÿåž‹ã€‚ç½‘ç»œä¸­å¯ä»¥æœ‰å¤šä¸ªå¤–è®¾ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªç›‘å¬è€… è¿˜æœ‰äº›è®¾å¤‡ï¼Œå¯ä»¥åŒæ—¶å®žçŽ°ä¸¤ä¸ªè§’è‰²ï¼Œæ—¢èƒ½å‘é€å¹¿æ’­ï¼Œä¹Ÿå¯ä»¥æŽ¥æ”¶å¹¿æ’­ã€‚ä¸€ä¸ªè®¾å¤‡æŽ¥æ”¶åˆ°å¹¿æ’­ï¼Œå¯ä»¥é€šè¿‡å¤„ç†ï¼Œç„¶åŽå†è½¬å‘å‡ºåŽ»ï¼Œè¿™æ ·å°±å¯ä»¥å½¢æˆä¸€ä¸ªåŒå‘çš„ç½‘æ ¼ï¼Œè¿™å°±æ˜¯è“ç‰™çš„ Meshã€‚è¿™æ ·çš„ç½‘ç»œå¯ä»¥ä¸å—è“ç‰™ä¼ è¾“è·ç¦»é™åˆ¶äº†ï¼Œåªè¦åœ¨ç©ºé—´ä¸­å¸ƒç½®è¶³å¤Ÿå¯†é›†çš„èŠ‚ç‚¹ï¼Œå°±èƒ½æŠŠä¿¡æ¯ä»Žç½‘ç»œä¸€ç‚¹ï¼Œä¼ é€’åˆ°ä»»ä½•ä¸€ç‚¹ã€‚è¿™ä¸ªå¯ä»¥åº”ç”¨åœ¨ç‰©è”ç½‘å’Œæ™ºèƒ½å®¶å±…ç³»ç»Ÿä¸­ã€‚ å‰é¢åœ¨ä»‹ç»åè®®æ ˆç‰©ç†å±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“å¹¿æ’­åªåœ¨37ã€38ã€39è¿™ä¸‰ä¸ªå¹¿æ’­é¢‘é“è¿›è¡Œå¹¿æ’­ï¼Œç›‘å¬è€…ä¹Ÿåœ¨è¿™ä¸‰ä¸ªé¢‘é“è¿›è¡Œç›‘å¬ã€‚æˆ‘ä»¬å‰é¢ä»‹ç»äº†ï¼Œè“ç‰™é€šä¿¡æ˜¯è·³é¢‘çš„ï¼Œåªæœ‰åŒæ–¹è®¾å¤‡åœ¨æŸä¸ªæ—¶åˆ»è·³åˆ°åŒä¸€ä¸ªé¢‘åˆ°ä¸Šï¼Œæ‰èƒ½æ”¶åˆ°å¹¿æ’­ï¼Œè¿™ç§ä¼ æ’­æ•°æ®æ•ˆçŽ‡æ¯”è¾ƒä½Žï¼Œæ•°æ®é‡ä¹Ÿæœ‰é™ï¼Œä¸é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®ä¼ è¾“ã€‚ å¹¿æ’­åŒ… â€‹ å¹¿æ’­æ•°æ®å…¶å®žåŒ…å«ä¸¤éƒ¨åˆ†ï¼šAdvertising Dataï¼ˆå¹¿æ’­æ•°æ®ï¼‰ å’Œ Scan Response Dataï¼ˆæ‰«æå“åº”æ•°æ®ï¼‰ã€‚é€šå¸¸ æƒ…å†µä¸‹ï¼Œå¹¿æ’­çš„ä¸€æ–¹ï¼ŒæŒ‰ç…§ä¸€å®šçš„é—´éš”ï¼Œå¾€ç©ºä¸­å¹¿æ’­ Advertising Dataï¼Œå½“æŸä¸ªç›‘å¬è®¾å¤‡ç›‘å¬åˆ°è¿™ä¸ªå¹¿æ’­æ•°æ®æ—¶ å€™ï¼Œä¼šé€šè¿‡å‘é€ Scan Response Requestï¼Œè¯·æ±‚å¹¿æ’­æ–¹å‘é€æ‰«æå“åº”æ•°æ®æ•°æ®ã€‚è¿™ä¸¤éƒ¨åˆ†æ•°æ®çš„é•¿åº¦éƒ½æ˜¯å›ºå®šçš„ 31 å­—èŠ‚ã€‚åœ¨ Android ä¸­ï¼Œç³»ç»Ÿä¼šæŠŠè¿™ä¸¤ä¸ªæ•°æ®æ‹¼æŽ¥åœ¨ä¸€èµ·ï¼Œè¿”å›žä¸€ä¸ª 62 å­—èŠ‚çš„æ•°ç»„ã€‚ å¹¿æ’­æ•°æ®åŒ…çš„ç»“æž„å¦‚è¿™ä¸ªå›¾æ‰€ç¤ºã€‚å¹¿æ’­åŒ…ä¸­æ˜¯åŒ…å«ä¸€ä¸ªä¸€ä¸ªçš„å° AD structureï¼Œæ¯ä¸ª AD structure æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•°æ®ï¼Œå®ƒçš„ç»“æž„æ˜¯ï¼šç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºé•¿åº¦ nï¼ŒåŽé¢ç´§æŽ¥ n ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚æ•°æ®éƒ¨åˆ†ç¬¬ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºæ•°æ®ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯åŽé¢çš„æ•°æ®å«ä¹‰ï¼ŒåŽé¢ n - 1 ä¸ªå­—èŠ‚è¡¨ç¤ºçœŸå®žæ•°æ®. è¿™äº›å¹¿æ’­æ•°æ®å¯ä»¥è‡ªå·±æ‰‹åŠ¨åŽ»è§£æžï¼Œåœ¨ Android 5.0 ä¹Ÿæä¾› ScanRecord å¸®ä½ è§£æžï¼Œç›´æŽ¥å¯ä»¥é€šè¿‡è¿™ä¸ªç±»èŽ·å¾—æœ‰æ„ä¹‰çš„æ•°æ®ã€‚ å¹¿æ’­æ•°æ®ç±»åž‹ï¼šè®¾å¤‡è¿žæŽ¥å±žæ€§ï¼Œæ ‡è¯†è®¾å¤‡æ”¯æŒçš„ BLE æ¨¡å¼ï¼Œè¿™ä¸ªæ˜¯å¿…é¡»çš„ã€‚è®¾å¤‡åå­—ï¼Œè®¾å¤‡åŒ…å«çš„å…³é”® GATT serviceï¼Œæˆ–è€… Service dataï¼ŒåŽ‚å•†è‡ªå®šä¹‰æ•°æ®ç­‰ç­‰ã€‚ RSSI ï¼ˆä¿¡å·å¼ºåº¦ ï¼‰ï¼šRSSI å•ä½æ˜¯ dBï¼Œé€šè¿‡ RSSI èƒ½å¤Ÿå¤§è‡´æŽ¨æµ‹å‡ºè·ç¦»çš„è¿œè¿‘ã€‚ä½†æ˜¯è¿™ä¸ªåœ¨ Android è®¾å¤‡ä¸Šéžå¸¸ä¸é è°±ï¼ŒRSSI çš„å€¼æ³¢åŠ¨å¾ˆå¤§ï¼Œè·ŸçŽ¯å¢ƒå’Œæ‰‹æœºçš„è§’åº¦å…³ç³»å¾ˆå¤§ã€‚ â€‹ Android ä½œä¸ºæŽ¥æ”¶è€…æ€Žä¹ˆæŽ¥æ”¶å¹¿æ’­æ•°æ®ï¼Œæ‰«æè®¾å¤‡ã€‚ä»£ç å…¶å®žå¾ˆç®€å•ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª LeScanCallbackï¼Œç”¨æ¥æŽ¥æ”¶æ”¶åˆ°å¹¿æ’­ä»¥åŽï¼Œå›žè°ƒä¸ŠæŠ¥æ•°æ®ã€‚ç„¶åŽä¼šç”¨ BluetoothAdapter çš„ startLeScan æ¥å¼€å§‹æ‰«æï¼Œéœ€è¦åœæ­¢æ‰«æçš„æ—¶å€™ï¼Œä½¿ç”¨ stopLeScan æ¥åœæ­¢ã€‚ æœ‰ BluetoothDevice è¿™ä¸ªå‚æ•°ï¼Œä»£è¡¨æ‰«æåˆ°çš„è®¾å¤‡ï¼Œå…³é”®æ˜¯è®¾å¤‡çš„çš„ MAC åœ°å€ä¿¡æ¯ã€‚ç„¶åŽå°±æ˜¯ RSSIï¼Œè¡¨ç¤ºæ‰«æåˆ°çš„è®¾å¤‡çš„ä¿¡å·å¼ºåº¦ï¼ŒæŽ¥ä¸‹æ¥ scanRecord å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„å¹¿æ’­æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®çš„é•¿åº¦æ˜¯62å­—èŠ‚ã€‚å€¼å¾—æçš„ä¸€ç‚¹æ˜¯ï¼ŒBLE æ‰€æœ‰å›žè°ƒå‡½æ•°éƒ½ä¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­çš„ã€‚ è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼Œè¿™é‡Œåœ¨ä¸éœ€è¦æ‰«æä»¥åŽï¼Œä¸€å®šè¦ stopLeScanï¼Œè€Œä¸” start å’Œ stop ä¸­ä¼ å…¥çš„ LeScanCallback ä¸€å®šè¦æ˜¯åŒä¸€ä¸ªï¼Œå› ä¸º LeScanCallback å°±æ˜¯æˆ‘ä»¬å®¢æˆ·ç«¯çš„æ ‡è¯†ã€‚å¦è€…å°±ä¼šå‡ºçŽ°æˆ‘ä»¬å‰é¢è¯´çš„ clientIf ä¸é‡Šæ”¾çš„é—®é¢˜ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¥åšå‚æ•°ï¼Œåœ¨è¿™é‡Œå°±åƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚ åœ¨ Android 5.0 ä¸­ï¼Œæä¾›äº†å…¨æ–°çš„æ‰«æ API â€” BluetoothLeScannerï¼Œå®ƒæä¾›äº†å¯¹æ‰«ææ›´åŠ ç²¾ç»†çš„æŽ§åˆ¶ã€‚ é™¤äº†è¿™ç§æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ç»å…¸è“ç‰™æ‰«æçš„æ–¹å¼ï¼ŒBluetoothAdapter çš„ startDiscovery()ï¼Œç„¶åŽé€šè¿‡ BroadcastReceiver æ¥æŽ¥æ”¶æ”¶åˆ°çš„å¹¿æ’­ã€‚å¦‚æžœåªæ˜¯åš BLE çš„å¼€å‘ï¼Œä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªéžå¸¸é‡çš„æ“ä½œï¼Œçµæ´»æ€§éžå¸¸å·®ã€‚ æ‰«æçš„å·¥ä½œæµç¨‹ â€‹ é¦–å…ˆ APP å‘èµ·æ‰«æè¯·æ±‚ï¼Œé€šè¿‡è“ç‰™çš„ Service å‘é€è¯·æ±‚ç»™è“ç‰™èŠ¯ç‰‡ã€‚è“ç‰™èŠ¯ç‰‡å¼€å§‹æ‰«æï¼Œæ‰«æåˆ°äº†è®¾å¤‡ï¼Œå°±é€šè¿‡å›žè°ƒä¸ŠæŠ¥ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ‰«æçœŸæ­£æ‰§è¡Œå®žåœ¨ BT èŠ¯ç‰‡ä¸­ï¼Œåªè¦ APP å‘é€äº†è¯·æ±‚ä¸‹åŽ»ä»¥åŽï¼ŒAndroid ç³»ç»Ÿå°±å¯ä»¥ä¼‘çœ äº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ AP ï¼ˆApplication Processorï¼‰ï¼Œç­‰æ‰«æåˆ°äº†è®¾å¤‡ä»¥åŽï¼Œåº•å±‚ BP ï¼ˆBaseband Processorï¼‰å°±ä¼šå”¤é†’ä¸Šå±‚ APï¼Œæ‰§è¡Œå›žè°ƒé€šçŸ¥åˆ° APPï¼Œï¼ˆåŠ¨ç”»ï¼‰å°±åƒæˆ‘ä»¬å›¾ä¸­çº¢è‰²æ¡†æ ‡å‡ºçš„è¿™æ ·ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œéšç€æˆ‘ä»¬å‘¨å›´çš„ BLE è®¾å¤‡é€æ¸å¢žå¤šï¼Œé¢‘ç¹æ‰«æåˆ°è®¾å¤‡ï¼Œç³»ç»Ÿå°±ä¼šè¢«é¢‘ç¹çš„å”¤é†’ï¼Œç”šè‡³ç¡çœ ä¸ä¸‹åŽ»ï¼Œä»Žè€Œå¯¼è‡´è€—ç”µä¸¥é‡ã€‚ ä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œè€—ç”µçš„é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦å°½å¯èƒ½å°‘çš„ä½¿ç”¨æ‰«æã€‚å³ä½¿éœ€è¦æ‰«æï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›å°½å¯èƒ½å°‘çš„ä¸ŠæŠ¥æ‰«æåˆ°çš„è®¾å¤‡ã€‚è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ Android 5.0 ä¸Šæä¾›çš„æ–°æŽ¥å£ï¼Œè®¾ç½® ScanFilterï¼Œé€šè¿‡ä¸€å®šçš„è§„åˆ™è¿‡æ»¤ï¼Œåªæœ‰æ‰«æåˆ°äº†ç¬¦åˆæˆ‘ä»¬çš„è§„åˆ™çš„è®¾å¤‡æ‰ä¸ŠæŠ¥ï¼Œæˆ–è€…é€šè¿‡è®¾ç½®å»¶è¿Ÿä¸ŠæŠ¥ï¼Œä»Žè€Œå‡å°‘å”¤é†’ç³»ç»Ÿçš„æ¬¡æ•°ã€‚ è¿™é‡Œæ€»ç»“ä¸€ä¸‹æ‰«æä¸­ä¸€äº›å»ºè®®ã€‚1ã€é¦–å…ˆï¼Œå°½å¯èƒ½ä½¿ç”¨æ–°çš„ APIï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼›2ã€å°½å¯èƒ½å°‘åœ°æ‰«æï¼Œå› ä¸ºæ¯•ç«Ÿæ‰«ææ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡çš„æ“ä½œï¼Œè€—ç”µï¼Œä¹Ÿä¼šå‡æ…¢ BLE è¿žæŽ¥é€Ÿåº¦ï¼›3ã€æ‰«æçš„æ—¶å€™ï¼Œå°½é‡è®¾ç½® ScanFilterï¼Œåªæ‰«æé‚£äº›ä½ æ„Ÿå…´è¶£çš„è®¾å¤‡ï¼Œè€Œä¸æ˜¯å…¨ç›˜æ‰«æï¼›4ã€æ­£ç¡®ä½¿ç”¨ APIï¼Œç‰¹åˆ«æ˜¯åˆç†åœæ­¢æ‰«æï¼Œé˜²æ­¢èµ„æºæ³„æ¼ã€‚ Androidæ‰‹æœº ä½œä¸º Broadcaster ä»Ž Android 5.0 å¼€å§‹ï¼ŒAndroid è®¾å¤‡å°±å¯ä»¥åƒå¤–è®¾ä¸€æ ·å‘é€ BLE å¹¿æ’­äº†ã€‚è¿™æ—¶ Android è®¾å¤‡ä¹‹é—´å°±å¯ä»¥é€šè¿‡ BLE æ¥äº¤äº’æ•°æ®ï¼Œæˆ–è€…å‘çŽ°å¯¹æ–¹è®¾å¤‡äº†ï¼Œä¾‹å¦‚ç±»ä¼¼ NFC ä¸€æ ·äº¤æ¢ç®€å•ä¿¡æ¯çš„åº”ç”¨ï¼Œæƒ³è±¡ç©ºé—´è¿˜æ˜¯å¾ˆå¤§çš„ã€‚ Android ä¸­å®žçŽ°çš„ä»£ç å¦‚ä¸‹ï¼Œé€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“å¹¿æ’­æœ‰ä¸¤ç§åŒ…ï¼šAdvertising Data å’Œ Scan Response Dataï¼Œæˆ‘ä»¬è¿™é‡Œè®¾ç½®å¥½è¿™ä¸¤ç§åŒ…ï¼Œç„¶åŽé€šè¿‡ BluetoothLeAdvertier çš„ startAdvertising å°±å¯ä»¥äº†ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„ç‚¹å’Œå‰é¢ä¸€æ ·ï¼ŒStart äº†ï¼Œéœ€è¦æ³¨æ„ Stopã€‚ åŸºäºŽè¿žæŽ¥BLE è¿žæŽ¥çš„å»ºç«‹æ˜¯é€šè¿‡ GAP æ¥åå•†å’Œåˆ›å»ºè¿žæŽ¥ã€‚Central è®¾å¤‡å‘èµ·è¿žæŽ¥ï¼Œå¤–è®¾æŽ¥æ”¶è¿žæŽ¥è¯·æ±‚ï¼Œå¹¶åå•†è¿žæŽ¥å‚æ•°ã€‚ å‰é¢æˆ‘ä»¬ä»‹ç»äº† GATTï¼ŒGATT æ ¸å¿ƒå†…å®¹å°±æ˜¯ Serviceã€Characteristic ä»¥åŠ Descriptorã€‚æ¯ä¸ª BLE å¤–è®¾ï¼Œæ ¹æ®è‡ªå·±çš„åŠŸèƒ½ï¼Œå‘å¤–æš´éœ² Service ç­‰ã€‚å…¶å®žæœ€é‡è¦çš„èŽ·å– Service ä¸­çš„ Characteristicï¼ŒCharacteristic å¯ä»¥è¢«è¯»ã€å†™ã€è¿˜æœ‰å˜åŒ–çš„æ—¶å€™æœ‰é€šçŸ¥ï¼Œè¿™æ ·å°±å®žçŽ°äº†åŒå‘çš„é€šä¿¡ã€‚ â€‹ è¿žæŽ¥åˆ°GATTæœåŠ¡å™¨ï¼ˆå‘é€æ•°æ®çš„BLEè®¾å¤‡ï¼‰ https://blog.csdn.net/Roshen_android/article/details/76916111 https://www.race604.com/android-ble-in-action/ http://yannischeng.com/Android%20BLE%20%E8%93%9D%E7%89%99%E5%BC%80%E5%8F%91/","categories":[{"name":"BLE","slug":"BLE","permalink":"https://noteforme.github.io/categories/BLE/"}],"tags":[]},{"title":"Bluetooth01","slug":"Bluetooth01","date":"2018-07-04T10:37:45.000Z","updated":"2025-02-04T13:52:45.081Z","comments":true,"path":"2018/07/04/Bluetooth01/","link":"","permalink":"https://noteforme.github.io/2018/07/04/Bluetooth01/","excerpt":"","text":"è“ç‰™åç§°çš„ç”±æ¥ è“ç‰™è¿™ä¸ªåç§°æ¥è‡ªäºŽç¬¬åä¸–çºªçš„ä¸€ä½ä¸¹éº¦å›½çŽ‹Harald Blatand,Blatandåœ¨è‹±æ–‡é‡Œçš„æ„æ€å¯ä»¥è¢«è§£ä¸ºè“ç‰™ï¼Œ å› ä¸ºå›½çŽ‹å–œæ¬¢åƒè“æ¢…ï¼Œç‰™é¾ˆæ¯å¤©éƒ½æ˜¯è“è‰²çš„æ‰€ä»¥å«ç‰™. è“ç‰™è¿™ä¸ªæ ‡å¿—çš„è®¾è®¡ï¼šå®ƒå–è‡ª Harald Bluetooth åå­—ä¸­çš„ã€ŒHã€å’Œã€ŒBã€ä¸¤ä¸ªå­—æ¯ï¼Œç”¨å¤åŒ—æ¬§å­—æ¯æ¥è¡¨ç¤ºï¼Œå°†è¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œå°±æˆä¸ºäº†è“ç‰™çš„ è“ç‰™æŠ€æœ¯è”ç›Ÿå®˜ç½‘ å®ƒè´Ÿè´£è“ç‰™è§„èŒƒåˆ¶å®šå’ŒæŽ¨å¹¿çš„å›½é™…ç»„ç»‡ã€‚åšè“ç‰™ç›¸å…³äº§å“çš„ï¼Œå°‘ä¸äº†å’Œå®ƒæ‰“äº¤é“ã€‚è“ç‰™æŠ€æœ¯è”ç›ŸåŒæ—¶ä¹Ÿæ‹¥æœ‰è“ç‰™å•†æ ‡ï¼Œå¦‚æžœè¦ä½¿ç”¨ï¼Œéœ€è¦é€šè¿‡ä»–ä»¬çš„æŽˆæƒã€‚ Bluetooth SIG è“ç‰™ä¸ªç‰ˆæœ¬åŒºåˆ« â€‹ http://www.sohu.com/a/204758166_100040477 V1.0ï¼šå®šä¹‰äº†è“ç‰™æ˜¯ä¸€ç§ä½ŽåŠŸè€—çš„æ— çº¿æŠ€æœ¯ï¼Œä¼ è¾“çŽ‡çº¦åœ¨748~810kb&#x2F;sï¼Œå› æ˜¯æ—©æœŸè®¾è®¡ï¼Œå®¹æ˜“å—åˆ°åŒé¢‘çŽ‡ä¹‹äº§å“æ‰€å¹²æ‰°ä¸‹å½±å“é€šè®¯è´¨é‡ã€‚ V1.1æ‰€æœ‰è®¾å¤‡éƒ½ä½¿ç”¨79ä¸ªå­é¢‘æ®µåœ¨2.4GHzçš„é¢‘è°±èŒƒå›´ä¹‹å†…è¿›è¡Œç›¸äº’é€šä¿¡ã€‚æ­¤å¤–ï¼ŒBluetooth 1.1è§„èŒƒä¹Ÿä¿®æ­£äº†äº’ä¸å…¼å®¹çš„æ•°æ®æ ¼å¼ä¼šå¼•å‘Bluetooth 1.0è®¾å¤‡ä¹‹é—´çš„äº’æ“ä½œæ€§é—®é¢˜. V1.2å¢žåŠ äº†AFHå¯è°ƒå¼è·³é¢‘æŠ€æœ¯è¿™é¡¹æŠ€æœ¯ï¼Œå¹¶ä¸»è¦é’ˆå¯¹çŽ°æœ‰è“ç‰™åè®®å’Œ802.11b&#x2F;gä¹‹é—´çš„äº’ç›¸å¹²æ‰°é—®é¢˜è¿›è¡Œäº†å…¨é¢çš„æ”¹è¿›ï¼Œé˜²æ­¢ç”¨æˆ·åœ¨åŒæ—¶ä½¿ç”¨æ”¯æŒè“ç‰™å’Œæ— çº¿å±€åŸŸç½‘(WLAN)çš„ä¸¤ç§è£…ç½®çš„æ—¶å€™å‡ºçŽ°äº’ç›¸å¹²æ‰°çš„æƒ…å†µã€‚ V2.0 è“ç‰™2.0æ ‡å‡†2.0 æ˜¯ 1.2 çš„æ”¹è‰¯æå‡ç‰ˆï¼Œä¼ è¾“çŽ‡çº¦åœ¨ 1.8M&#x2F;s~2.1M&#x2F;s å¼€å§‹æ”¯æŒåŒå·¥æ¨¡å¼â€”â€”å³ä¸€é¢ä½œè¯­éŸ³é€šè®¯ï¼ŒåŒæ—¶äº¦å¯ä»¥ä¼ è¾“æ¡£æ¡ˆ&#x2F;é«˜è´¨ç´ å›¾ç‰‡ 2.0 ç‰ˆæœ¬å½“ç„¶ä¹Ÿæ”¯æŒ Stereo è¿ä½œã€‚ V2.1æ”¯æŒé€šè¿‡NFCï¼ˆNear Field Communicationï¼Œè¿‘è·ç¦»é€šè®¯ï¼‰è¿›è¡Œé…å¯¹ï¼Œåªéœ€è¦å°†ä¸¤ä¸ªè“ç‰™è®¾å¤‡é è¿‘ï¼ŒæŒ‰ä¸‹ä¸€ä¸ªé”®å°±å¯ä»¥é…å¯¹äº†ï¼Œé…å¯¹å¯†ç å°†é€šè¿‡NFCè¿›è¡Œä¼ è¾“ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ã€‚ V3.0æ ¸å¿ƒæ˜¯åŠ å…¥äº†â€œGeneric Alternate MAC&#x2F;PHYâ€ï¼ˆAMPï¼‰ï¼Œä½¿è“ç‰™è®¾å¤‡èƒ½æœ€å¤§é™åº¦çš„åˆ©ç”¨å¤šç§é«˜é€Ÿæ— çº¿æŠ€æœ¯ä¸­æ›´é«˜çš„ä¼ è¾“é€ŸçŽ‡ã€‚è¿™æ˜¯ä¸€ç§å…¨æ–°çš„äº¤æ›¿å°„é¢‘æŠ€æœ¯ï¼Œå…è®¸è“ç‰™åè®®æ ˆé’ˆå¯¹ä»»ä¸€ä»»åŠ¡åŠ¨æ€åœ°é€‰æ‹©æ­£ç¡®çš„å°„é¢‘ã€‚ 4.0 é¦–å…ˆéœ€è¦è¯´æ˜Žçš„æ˜¯ï¼Œå‘å¸ƒäºŽ2010å¹´çš„è“ç‰™4.0æ ‡å‡†ï¼Œæœ¬èº«å°±åŒ…å«ä¸¤ä¸ªè“ç‰™æ ‡å‡†â€”â€”å®ƒåŒ…å«ä¼ ç»Ÿè“ç‰™éƒ¨åˆ†ï¼ˆä¹Ÿæœ‰ç§°ä¹‹ä¸ºç»å…¸è“ç‰™Classic Bluetoothï¼‰ï¼Œä¹ŸåŒ…å«æœ‰ä½ŽåŠŸè€—è“ç‰™éƒ¨åˆ†ï¼ˆBluetooth Low Energyï¼‰ã€‚æ‰€ä»¥ï¼Œæ¯«æ— ç–‘é—®çš„ï¼Œä½ŽåŠŸè€—è“ç‰™BLEå±žäºŽè“ç‰™4.0ï¼ è“ç‰™4.0çš„ä¸¤ä¸ªéƒ¨åˆ†é€‚ç”¨äºŽä¸åŒçš„äº§å“å’Œåº”ç”¨åœºæ™¯ï¼Œå¦‚ä¼ ç»Ÿè“ç‰™éƒ¨åˆ†æ˜¯åœ¨ä¹‹å‰çš„1.0ã€2.0ã€3.0ç­‰åŸºç¡€ä¸Šå‘å±•å’Œå®Œå–„èµ·æ¥çš„ï¼Œä¸»è¦ç”¨äºŽå’Œæ­¤å‰ç‰ˆæœ¬è“ç‰™1.0ã€2.0ã€3.0çš„å…¼å®¹ä»¥åŠæ•°æ®é‡æ¯”è¾ƒå¤§çš„ä¼ è¾“ï¼Œå¦‚è¯­éŸ³ï¼ŒéŸ³ä¹ï¼Œè¾ƒé«˜æ•°æ®é‡ä¼ è¾“ç­‰ã€‚ è€Œä½ŽåŠŸè€—è“ç‰™éƒ¨åˆ†æ˜¯åœ¨Nokiaçš„Wibreeæ ‡å‡†ä¸Šå‘å±•èµ·æ¥çš„ã€‚ä¸»è¦ç”¨äºŽå’Œè“ç‰™4.0ä»¥åŠæ›´é«˜æ ‡å‡†ç‰ˆæœ¬çš„å…¼å®¹ ï¼Œä»¥åŠç”¨äºŽæ•°æ®ä¼ è¾“é€ŸçŽ‡æ¯”è¾ƒä½Žçš„äº§å“ï¼Œå¦‚é¥æŽ§ç±»çš„ï¼Œå¦‚é¼ æ ‡ï¼Œé”®ç›˜ï¼Œé¥æŽ§é¼ æ ‡(Air Mouse)ï¼Œä¼ æ„Ÿè®¾å¤‡çš„æ•°æ®å‘é€ï¼Œå¦‚å¿ƒè·³å¸¦ï¼Œè¡€åŽ‹è®¡ï¼Œæ¸©åº¦ä¼ æ„Ÿå™¨ç­‰ã€‚ ç”±äºŽè“ç‰™4.0é›†æˆäº†ä¼ ç»Ÿè“ç‰™å’Œä½ŽåŠŸè€—è“ç‰™ä¸¤ä¸ªæ ‡å‡†ï¼Œæ‰€ä»¥è“ç‰™4.0æœ‰åŒæ¨¡å’Œå•æ¨¡ä¹‹åˆ†ã€‚åŒæ¨¡å³æ˜¯ä¼ ç»Ÿè“ç‰™éƒ¨åˆ†+ä½ŽåŠŸè€—è“ç‰™éƒ¨åˆ†ï¼Œå•æ¨¡å³æ˜¯å•çº¯çš„ä½ŽåŠŸè€—è“ç‰™éƒ¨åˆ†ï¼ˆBLEï¼‰ã€‚ ä¸€å°è£…é…æœ‰è“ç‰™4.0åŒæ¨¡æ¨¡å—çš„æ‰‹æœºï¼Œå½“å…¶é…å¯¹è¿žæŽ¥çš„æ˜¯è“ç‰™3.0è®¾å¤‡æ—¶ï¼Œå…¶è€—ç”µé‡å°±ä¼šç›¸å¯¹è¾ƒé«˜ã€‚è‹¥å…¶é…å¯¹çš„è®¾å¤‡æ˜¯æ™ºèƒ½æ‰‹çŽ¯ç­‰é‡‡ç”¨ä½ŽåŠŸè€—è“ç‰™æ¨¡å—çš„è®¾å¤‡æ—¶ï¼Œå…¶åŠŸè€—å°±éžå¸¸ä½Žã€‚é’ˆå¯¹ä¸€å¯¹ä¸€è¿žæŽ¥ä¼˜åŒ–ï¼Œå¹¶æ”¯æŒæ˜Ÿå½¢æ‹“æ‰‘çš„ä¸€å¯¹å¤šè¿žæŽ¥ï¼› https://www.jianshu.com/p/c96e0006b34d â€‹ å•æ¨¡è“ç‰™ â€‹ åŒæ¨¡è“ç‰™ V 4.1 æå‡æ•°æ®ä¼ è¾“çŽ‡ ç›¸æ¯”è“ç‰™4.0ï¼Œè“ç‰™4.1å•åŒ…æ•°æ®ä¼ è¾“æœ€å¤§å€¼ä»Ž20å­—èŠ‚ä¸Šè°ƒåˆ°23å­—èŠ‚ï¼Œæå‡äº†15%çš„æ•°æ®ä¼ è¾“çŽ‡ã€‚æ ¹æ®è¯¥è§„åˆ™ï¼Œå¤§å®¶å¯ä»¥å°è¯•ä¿®æ”¹å•åŒ…æ•°æ®payloadçš„å€¼ï¼Œå¦‚æžœè¯¥èŠ¯ç‰‡åªæ”¯æŒBT4.0ï¼Œé‚£ä¹ˆä¿®æ”¹ä¼ è¾“23å­—èŠ‚è¦ä¹ˆä¼šç¼–è¯‘æŠ¥é”™ï¼Œè¦ä¹ˆä¼ è¾“è¿‡ç¨‹ä¸­ä¼šä¸¢åŒ…ã€‚ ä¸»ä»Žå…±å­˜ central peripheral é“¾è·¯å±‚Link layeræ‹“æ‰‘ç»“æž„åšäº†æ›´æ–°ï¼Œå…è®¸å•è®¾å¤‡ä¸»ä»ŽåŒæ—¶å…±å­˜ï¼ˆæ—¶é—´ç‰‡è½®è½¬æ–¹å¼ï¼‰ï¼Œä»¥åŠä¸€ä¸»å¯¹å¤šä»Žè®¾å¤‡çš„è¿žæŽ¥æ‹“æ‰‘,å½“BLEä½œCentralçš„æ—¶å€™å¯ä»¥ä¸€å¯¹å¤šï¼Œä½†æ˜¯ä½œPeripheralçš„æ—¶å€™åªèƒ½ä¸€å¯¹ä¸€ã€‚ ä¾‹å¦‚æ™ºèƒ½æ‰‹è¡¨å¯ä»¥ä½œä¸ºå‘å°„æ–¹å‘æ‰‹æœºå‘å°„èº«ä½“å¥åº·æŒ‡æ•°ï¼ŒåŒæ—¶ä½œä¸ºæŽ¥æ”¶æ–¹è¿žæŽ¥åˆ°è“ç‰™è€³æœº&#x2F;æ‰‹çŽ¯æˆ–å…¶ä»–è®¾å¤‡ä¸Š æ”¯æŒ32-Bit UUID 32-Bit UUIDæŒ‡çš„æ˜¯å¹¿æ’­åŒ…æºå¸¦çš„UUIDï¼Œå¹¶ä¸æ˜¯æŒ‡æˆ‘ä»¬æ‰€è¯´çš„é’ˆå¯¹å±žæ€§åˆ—è¡¨çš„16 bit and 128 bit UUIDã€‚å¯ä»¥é€šè¿‡å¹¿æ’­çš„32-Bit UUIDæ˜ å°„å¾—åˆ°å®Œæ•´çš„128 Bit UUIDä»Žè€Œä½¿å¾—å¹¿æ’­åŒ…å†…æœ‰æ•ˆå¹¿æ’­æ•°æ®é•¿åº¦æ›´å¤šã€‚ é•¿æœŸç¡çœ ä¸‹çš„è‡ªåŠ¨å”¤é†’åŠŸèƒ½ã€‚ä¾‹å¦‚åœ¨ä½©æˆ´æ‰‹çŽ¯æ¸¸æ³³1å°æ—¶åŽï¼Œå›žåˆ°æ›´è¡£å®¤æ‰‹çŽ¯ä¼šè‡ªåŠ¨å’Œæ‰‹æœºå»ºç«‹è¿žæŽ¥ä¼ è¾“æ•°æ®ï¼Œä¸éœ€è¦ä»»ä½•æ“ä½œ é€šè¿‡IPv6å»ºç«‹ç½‘ç»œè¿žæŽ¥ã€‚è“ç‰™è®¾å¤‡åªéœ€è¦é€šè¿‡è“ç‰™4.1è¿žæŽ¥åˆ°å¯ä»¥ä¸Šç½‘çš„è®¾å¤‡ï¼ˆå¦‚æ‰‹æœºï¼‰ï¼Œå°±å¯ä»¥é€šè¿‡IPv6ä¸Žäº‘ç«¯çš„æ•°æ®è¿›è¡ŒåŒæ­¥ã€‚å³å®žçŽ°â€œäº‘åŒæ­¥â€ä¸å†éœ€è¦wifiè¿žæŽ¥ï¼ˆwifiæ¨¡å—çš„æˆæœ¬é€šå¸¸æ›´é«˜ï¼Œä¹Ÿæ›´è´¹ç”µï¼‰ã€‚é€šè¿‡IPv6å»ºç«‹ç½‘ç»œè¿žæŽ¥ã€‚è“ç‰™è®¾å¤‡åªéœ€è¦é€šè¿‡è“ç‰™4.1è¿žæŽ¥åˆ°å¯ä»¥ä¸Šç½‘çš„è®¾å¤‡ï¼ˆå¦‚æ‰‹æœºï¼‰ï¼Œå°±å¯ä»¥é€šè¿‡IPv6ä¸Žäº‘ç«¯çš„æ•°æ®è¿›è¡ŒåŒæ­¥ã€‚å³å®žçŽ°â€œäº‘åŒæ­¥â€ä¸å†éœ€è¦wifiè¿žæŽ¥ï¼ˆwifiæ¨¡å—çš„æˆæœ¬é€šå¸¸æ›´é«˜ï¼Œä¹Ÿæ›´è´¹ç”µï¼‰ V 4.2 LEè¿žæŽ¥å®‰å…¨ ä»ŽSpecå®šä¹‰ä¸Šè“ç‰™4.0å’Œ4.1çš„é…å¯¹åŠ å¯†çŽ¯èŠ‚éƒ½æ˜¯åŸºäºŽAES-CCMåŠ å¯†ï¼Œä½†æ˜¯ç”±äºŽè“ç‰™4.1åŒæ–¹å…±äº«åŒä¸€å¯†é’¥ï¼Œæ‰€ä»¥å­˜åœ¨è¢«ç ´è§£é£Žé™©å’Œæ¼æ´žã€‚è“ç‰™4.2çš„pairingçŽ¯èŠ‚ï¼Œé‡‡ç”¨Diffie-HellmanKey Exchangeå¯†é’¥äº¤æ¢ç®—æ³•è¿›è¡ŒåŠ å¯†ï¼Œæ¯ä¸€ä¸ªè®¾å¤‡æœ‰ä¸€å¯¹å¯†é’¥å¯¹ï¼Œå…¬é’¥å’Œç§é’¥ï¼Œç§é’¥è‡ªå·±ä¿å­˜ï¼Œå…¬é’¥å…¬å¼€ç»™å¯¹æ–¹ï¼Œæ•°æ®äº¤äº’æ—¶ï¼Œä¸€æ–¹é€šè¿‡è‡ªå·±çš„ç§é’¥å’Œå¯¹æ–¹çš„å…¬é’¥è¿›è¡ŒåŠ å¯†æ–‡ä»¶ï¼ŒæŽ¥æ”¶æ–¹é€šè¿‡è‡ªå·±ç§é’¥å’Œä¼ è¾“æ–¹çš„å…¬é’¥è¿›è¡Œè§£å¯†ï¼Œä»Žè€Œæœ‰æ•ˆçš„é˜²æ­¢ä¸­é—´äººç ´è§£å¯†é’¥çš„äº‹ä»¶å‘ç”Ÿã€‚ éšç§ä¿æŠ¤ è“ç‰™åœ¨å¹¿æ’­è¿‡ç¨‹ä¸­ä¼šæºå¸¦è‡ªå·±çš„BD address (bluetooth device address)å³ä¸ºè“ç‰™å”¯ä¸€çš„MACåœ°å€ï¼Œåœ¨æŸäº›åº”ç”¨ï¼Œæ¯”å¦‚ç‰©æµè¿½è¸ªåº”ç”¨å½“ä¸­æ˜¯éžå¸¸æœ‰å¸®åŠ©çš„ï¼Œå¯ä»¥æ ¹æ®BD addresså›ºå®šç‰©æµè®¾å¤‡ã€‚ ä½†æ˜¯åœ¨æŸäº›åº”ç”¨ä¸å¸Œæœ›è‡ªå·±çš„BD addressæš´éœ²åœ¨ä¸»ç«¯è®¾å¤‡çš„ç›‘æŽ§ä¸‹ï¼Œè“ç‰™4.2ç»™å‡ºäº†çµæ´»çš„é€‰æ‹©ï¼Œè“ç‰™4.2è§„å®šï¼Œä»Žæœºè®¾å¤‡å¯ä»¥é€‰æ‹©åœ¨å¹¿æ’­æ¨¡å¼ä¸‹å‘é€éšæœºBD addressï¼Œè¿™æ ·ä¸»ç«¯è®¾å¤‡é™¤äº†æŽ¥è¯¥åˆ°è®¾å¤‡ä¹‹åŽæ‰èƒ½èŽ·å–å…¶çœŸå®žBD addressï¼Œé™¤æ­¤è¯¥è®¾å¤‡å¹¿æ’­æ¨¡å¼çš„BD addressä¸ºéšæœºåºåˆ—ã€‚ å¤§æ•°æ®ä¼ è¾“ è“ç‰™4.1æœ€å¤§æ”¯æŒ23å­—èŠ‚å•åŒ…æ•°æ®ä¼ è¾“ï¼Œè“ç‰™4.2æœ€å¤§æ”¯æŒ255å­—èŠ‚å•åŒ…æ•°æ®ä¼ è¾“ï¼Œæžå¤§æå‡äº†æ•°æ®ä¼ è¾“çŽ‡ã€‚è¯¦ç»†å¯ä»¥å‚è€ƒæˆ‘å†™çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ã€Šæå‡è“ç‰™4.2æ•°æ®ä¼ è¾“çŽ‡çš„åŠžæ³• - ATT_MTUã€‹ã€‚ 5.0 ä¼ è¾“è·ç¦»æ›´å¿«ã€è·ç¦»æ›´è¿œ è“ç‰™ 5.0 å’Œå‰ä¸€ä»£è“ç‰™ 4.2 ç›¸æ¯”ï¼Œå®ƒçš„ä¼ è¾“è·ç¦»æ›´è¿œã€é€Ÿåº¦æ›´å¿«ã€‚ç†è®ºä¸Šçš„æœ‰æ•ˆè·ç¦»æ˜¯ 300 ç±³ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå®¶åº­æˆ–æ•´é—´åŠžå…¬å®¤é‡Œçš„ç§»åŠ¨è®¾å¤‡éƒ½å¯ä»¥ç¨³å®šè¿žç»“ã€‚è€Œé€Ÿåº¦æœ€å¿«åˆ™æ˜¯å¯ä»¥è¾¾åˆ° 2Mbpsï¼Œè®©ååº”æ›´å¿«ã€æ€§èƒ½æ›´é«˜çš„è“ç‰™è®¾å¤‡æ›´æœ‰å¯èƒ½è¢«ä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜å¤§å¹…å¢žå¼ºäº†è“ç‰™å¹¿æ’­çš„æ•°æ®ä¼ è¾“ï¼Œèƒ½ä¸ºå•†ç”¨è“ç‰™å¸¦æ¥æ›´å¥½çš„å‰æ™¯ï¼Œè®©ä½¿ç”¨è“ç‰™åšä¸ºæ ‡å‡†çš„ç‰©è”ç½‘åº”ç”¨æ›´åŠ å¼ºå¤§ï¼Œå¯ä»¥å‘ä¸‹ç›¸å®¹æ—§ç‰ˆæœ¬äº§å“ ã€‚ è“ç‰™ Mesh æŠ€æœ¯æ”¹å˜ä¼ è¾“åº”ç”¨ è“ç‰™æŠ€æœ¯è”ç›Ÿï¼ˆBluetooth SIGï¼‰æ—¥å‰å®£å¸ƒæŽ¨å‡ºè“ç‰™ Mesh æŠ€æœ¯ï¼Œè¿™é¡¹æŠ€æœ¯å°†æ‰“ç ´ä¼ ç»Ÿè“ç‰™è®¾å¤‡é—´â€œä¸€å¯¹ä¸€â€çš„é…å¯¹è½¬å˜æˆâ€œå¤šå¯¹å¤šâ€çš„è®¯å·ä¼ è¾“æ¨¡å¼ï¼Œé™¤äº†åº”ç”¨åœ¨è“ç‰™ 5.0ï¼Œä¹Ÿä¼šæ‰©å±•åˆ°è¿‡å¾€ç‰ˆæœ¬ã€‚è“ç‰™æŠ€æœ¯è”ç›Ÿè¡¨ç¤ºï¼Œè“ç‰™ Mesh æŠ€æœ¯æ˜¯åŸºäºŽä½ŽåŠŸè€—è“ç‰™æŠ€æœ¯æŽ¨å‡ºçš„æ–°ç½‘ç»œæŠ€æœ¯ï¼Œå°†ä¸ºå•†ç”¨å’Œå·¥ä¸šç”¨è®¾å¤‡ç½‘ç»œå¸¦æ¥è½¬å˜ï¼Œä¹Ÿèƒ½è®©çŽ°æœ‰çš„ç‰©è”ç½‘æŠ€æœ¯æ›´åŠ å®Œæ•´ã€ç¨³å®šã€‚ http://www.eet-china.com/news/article/201711190911 è“ç‰™5.0å’Œwifiçš„åŒºåˆ« WIFI Wi-Fi çš„ä¸€å¤§ç¼ºé™·å°±æ˜¯æœ‰è·ç¦»é™åˆ¶ï¼ŒåŒ…æ‹¬è¿‡åŽ»ä¸€å¯¹ä¸€è“ç‰™ç½‘ç»œåœ¨å†…çš„ä¼ ç»Ÿæ— çº¿ç½‘ç»œï¼Œéƒ½ä¼šå—ä¸¤å°è®¾å¤‡è·ç¦»çš„é™åˆ¶ã€‚ä»¥ Wi-Fi æ¥è¯´ï¼Œæœ‰æ•ˆçš„ä¼ è¾“è·ç¦»ä¸º 50 å¹³æ–¹ç±³ä»¥å†…ï¼Œé™¤éžä½ è£…ä¸­ç»§è®¾å¤‡ï¼Œä¸€æ—¦ç¦»å¼€è¿™ä¸ªåŒºåŸŸï¼Œä½ çš„æ‰‹æœºå°±å¤±åŽ»ç”¨æ­¦ä¹‹åœ°ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒWi-Fi è¿˜æœ‰è€—ç”µé—®é¢˜ï¼Œä½ çš„æ‰‹æœºå°±ç®—æ˜¯æŠŠå±å¹•å…³é—­ï¼Œè¿˜æ˜¯å¾—ä¸€å¤©å……ä¸€æ¬¡ç”µï¼ŒWi-Fi æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å› ç´ ã€‚ è“ç‰™ Mesh â€œè“ç‰™ Meshâ€æ‰¾åˆ°ä¸€ä¸ªèªæ˜Žçš„è§£å†³åŠžæ³•ã€‚è¿™äº›è®¾å¤‡å½¼æ­¤é—´è¿žæŽ¥ï¼Œå¹¶å°†ä¿¡å·ä¼ é€’ç»™é™„è¿‘å¦ä¸€ä¸ªè®¾å¤‡ï¼Œå½¢æˆä¸­ç»§èµ„æ–™ä¼ è¾“çš„äº’è¿žè®¾å¤‡ç½‘ç»œæˆ–ç½‘æ ¼ã€‚è¿™æ„å‘³ç€è®¯æ¯ä»Žä¸€ä¸ªè®¾å¤‡ä¼ é€’åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œå†åˆ°ä¸‹ä¸€ä¸ªè®¾å¤‡ï¼ŒæŽ¥åŠ›ä¼ è¾“ã€‚ â–² å·¦å›¾ä¸ºä¼ ç»Ÿ Wi-Fi çš„è¿žæŽ¥æ–¹å¼ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ª Hub è¿žç³»å…¶ä»–è®¾å¤‡ï¼Œå› æ­¤æœ‰è·ç¦»é™åˆ¶ã€‚å³å›¾åˆ™æ˜¯è“ç‰™ Mesh çš„æ–¹å¼ï¼Œè¶Šå¤šè®¾å¤‡è¿žåˆ°è¿™ä¸ªç½‘ç»œä¸Šï¼ŒèŒƒå›´å°±ä¼šè¶Šå¹¿ã€‚ ä¸Žä¼ ç»Ÿçš„äº¤æ¢å¼ç½‘ç»œç›¸æ¯”ï¼Œæ— çº¿Meshç½‘ç»œåŽ»æŽ‰äº†èŠ‚ç‚¹ä¹‹é—´çš„å¸ƒçº¿éœ€æ±‚ï¼Œä½†ä»å…·æœ‰åˆ†å¸ƒå¼ç½‘ç»œæ‰€æä¾›çš„å†—ä½™æœºåˆ¶å’Œé‡æ–°è·¯ç”±åŠŸèƒ½ã€‚åœ¨æ— çº¿Meshç½‘ç»œé‡Œï¼Œå¦‚æžœè¦æ·»åŠ æ–°çš„è®¾å¤‡ï¼Œåªéœ€è¦ç®€å•åœ°æŽ¥ä¸Šç”µæºå°±å¯ä»¥äº†ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è¿›è¡Œè‡ªæˆ‘é…ç½®ï¼Œå¹¶ç¡®å®šæœ€ä½³çš„å¤šè·³ä¼ è¾“è·¯å¾„ã€‚æ·»åŠ æˆ–ç§»åŠ¨è®¾å¤‡æ—¶ï¼Œç½‘ç»œèƒ½å¤Ÿè‡ªåŠ¨å‘çŽ°æ‹“æ‰‘å˜åŒ–ï¼Œå¹¶è‡ªåŠ¨è°ƒæ•´é€šä¿¡è·¯ç”±ï¼Œä»¥èŽ·å–æœ€æœ‰æ•ˆçš„ä¼ è¾“è·¯å¾„ã€‚ é€è¿‡è¿™ç§æŽ¥åŠ›ä¼ è¾“ï¼Œå½¢æˆä¸€ä¸ªæ— éœ€å¤§é‡ç”µåŠ›æ¶ˆè€—æˆ–å¤©çº¿å¹¿å¸ƒçš„å¯é ç½‘ç»œã€‚è“ç‰™è®¾å¤‡ä¹‹é—´å¯ä¸é€è¿‡ Wi-Fi ç½‘ç»œå°±èƒ½å®žçŽ°è®¾å¤‡ä¸Žè®¾å¤‡çš„â€œå¯¹è¯â€ã€‚æ¢å¥è¯è¯´ï¼Œæ™ºèƒ½è®¾å¤‡é‡‡ç”¨è¿™ç§æŠ€æœ¯ï¼Œåœ¨æœ‰é™èŒƒå›´å†…å°±èƒ½å®Œæˆè®¾å¤‡é—´çš„æ²Ÿé€šï¼Œå¹¶åˆ©ç”¨æ‰‹æœºç­‰è®¾å¤‡æ¥æŽ§åˆ¶ã€‚ è¿‡åŽ»å› ä¸ºå®¶ä¸­éœ€è¦æœ‰ä¸€ä¸ª Hub è¿žæŽ¥å…¶ä»–è®¾å¤‡ï¼Œå› æ­¤æœ‰ Googleã€Appleã€Amazon ç­‰è¿™äº›â€œè¯­éŸ³åŠ©æ‰‹â€å‡ºçŽ°ï¼Œç”¨è¿™äº›å½“æˆæŽ§åˆ¶ä¸­æž¢ã€‚ä½†è“ç‰™ Mesh æž¶æž„ä¸‹ï¼Œä½ ä¸éœ€è¦å¦å¤–ä¸€ä¸ªâ€œä¸­æž¢â€ï¼Œç”¨æ™ºèƒ½æ‰‹æœºå°±å¯ä»¥æŽŒæ¡ä¸€åˆ‡ã€‚å®¶ä¸­çš„è“ç‰™è®¾å¤‡å»ºæž„è‡ªå·±çš„ç½‘ç»œï¼Œæ‰‹æœºåªè¦ä¸Žå…¶ä¸­ä¸€ä¸ªè“ç‰™è®¾å¤‡å–å¾—è”ç³»ï¼Œå°±å¯ä»¥æŽ§åˆ¶å…¨å®¶ï¼ˆæ•´ä¸ªå»ºç­‘ç‰©ï¼‰è®¾å¤‡ï¼Œç›‘æŽ§è¿™äº›è®¾å¤‡çš„çŠ¶æ€ã€‚ ç”±äºŽ Mesh ç½‘ç»œä¸éœ€å¤æ‚è®¾å®šã€é…å¯¹æˆ–ä½¿ç”¨è·¯ç”±å™¨ç­‰å­˜å–è®¾å¤‡ï¼Œå› æ­¤å¹¶ä¸ä¼šé€ æˆå®‰è£…è´Ÿæ‹…ï¼Œåè§‚é‡‡ç”¨å…¶ä»–æ™ºæ…§å®¶åº­è”ç½‘æŠ€æœ¯å¦‚ ZigBeeã€Z-wave æˆ–å…¶ä»–åŽ‚å•†é—´è‡ªæœ‰çš„é€šè®¯æŠ€æœ¯ï¼Œå¤šéœ€åŠ è£…é—¸é“å™¨ï¼ˆGatewayï¼‰æ‰èƒ½ç¡®ä¿å„ç§è®¾å¤‡æ²Ÿé€šæ— è™žã€‚ è“ç‰™ Mesh å·¥ä½œåŽŸç†ï¼šä¸ºä»€ä¹ˆè¿˜æ˜¯æ— æ³•å–ä»£ Wi-Fiï¼Ÿ è“ç‰™ BLE é€šè®¯åè®®ä¸­ï¼ŒGAP å±‚ï¼ˆGeneric Access Profileï¼‰ç”¨æ¥æŽ§åˆ¶å†³å®šè“ç‰™è®¾å¤‡çš„æ‰«æã€å¹¿æ’­å’Œè¿žæŽ¥ç­‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGAP å†³å®šè“ç‰™è®¾å¤‡æ€Žæ ·ä¸Žå…¶ä»–è®¾å¤‡è¿žæŽ¥ã€è¢«å…¶ä»–è®¾å¤‡çœ‹åˆ°ç­‰æµç¨‹ã€‚ åœ¨è“ç‰™ mesh å‡ºçŽ°ä¹‹å‰ï¼ŒGAP æœ‰ä¸€ä¸ªå…¸åž‹çš„çˆ¶å­ç½‘ç»œå…³ç³»ï¼Œå…¶ä¸­â€œçˆ¶â€ç«¯å†³å®šæ‰€æœ‰è·¯ç”±ï¼Œâ€œå­â€ç«¯æ‰§è¡Œåˆ†é…çš„ä»»åŠ¡ã€‚ ä¾‹å¦‚ï¼Œå½“ä½ å°†è“ç‰™é”®ç›˜è¿žæŽ¥åˆ°å¹³æ¿ç”µè„‘ï¼Œå¹³æ¿ä¸ºçˆ¶ç«¯ã€é”®ç›˜ä¸ºå­ç«¯ã€‚ GAP ä½¿ä½ çš„è®¾å¤‡è¢«å…¶ä»–è®¾å¤‡çœ‹è§ï¼Œå¹¶å†³å®šä½ çš„è®¾å¤‡æ˜¯å¦å¯ä»¥æˆ–æ€Žæ ·ä¸Žå…¶ä»–è®¾å¤‡äº’åŠ¨ã€‚ä¾‹å¦‚å¸¸ç”¨åœ¨å®¤å†…å®šä½çš„ Beacon è®¾å¤‡å°±åªæ˜¯å‘å¤–å¹¿æ’­ï¼Œä¸æ”¯æŒè¿žæŽ¥ã€‚æ™ºèƒ½æ‰‹çŽ¯ç­‰è®¾å¤‡ï¼Œå°±å¯ä»¥ä¸Žä½ çš„æ‰‹æœºè®¾å¤‡è¿žæŽ¥ã€‚ ä»Žè“ç‰™ 4.1 å¼€å§‹ï¼ŒGAP æ‰©å¤§äº†è“ç‰™è®¾å¤‡çš„ç½‘ç»œèƒ½åŠ›ã€‚è“ç‰™è®¾å¤‡å¯å…¼å…·â€œçˆ¶â€å’Œâ€œå­â€çš„åŠŸèƒ½ï¼Œä½¿æ‰€æœ‰è®¾å¤‡èƒ½ç›´æŽ¥è¿žæŽ¥å’Œå¹¿æ’­åˆ°ä»»ä½•å…¶ä»–è®¾å¤‡ã€‚è“ç‰™ä¹Ÿå› æ­¤é€‚ç”¨ä¼ è¾“èŒƒå›´å†…å’Œä¼ è¾“èŒƒå›´å¤–çš„æ‰€æœ‰è®¾å¤‡ã€‚ æ­£æ˜¯ä¸Šè¿°è¿™ç§èƒ½ç›´æŽ¥æˆ–é—´æŽ¥è¿žæŽ¥ä»»ä½•æ•°é‡æœ‰ Mesh åŠŸèƒ½çš„è®¾å¤‡ï¼Œå› æ­¤ç†è®ºä¸Šå»ºæž„ä¸€ä¸ªé•¿è¾¾å‡ å…¬é‡ŒèŒƒå›´çš„ Mesh ç½‘ç»œä¹Ÿä¸æ˜¯ä¸å¯èƒ½ã€‚ å¦‚æžœç½‘ç»œä¸­æ¯ä¸ªè®¾å¤‡éƒ½åœ¨å…¶ä»–è‡³å°‘ä¸€ä¸ªè®¾å¤‡çš„å¹¿æ’­èŒƒå›´å†…ï¼ŒMesh ç½‘ç»œç†è®ºä¸Šå¯è¦†ç›–æ— é™è·ç¦»ã€‚ åœ¨è¿™æƒ…å†µä¸‹ï¼Œç¯æ³¡å°±å¯èƒ½æˆä¸ºä¸€ä¸ªå®¶åº­ä¸»è¦ Mesh ç½‘ç»œè®¾å¤‡ä¹‹ä¸€ï¼Œå› ä¸ºä¸€ä¸ªå®¶åº­æˆ–æ˜¯å»ºç­‘ï¼Œå‡ ä¹Žæ¯ä¸ªè§’è½éƒ½æœ‰å…‰çº¿è¦†ç›–çš„éœ€è¦ï¼Œå› æ­¤ç¯æ³¡å°±ä¼šä»¥ä¿æŒä¸€å®šè·ç¦»çš„æ–¹å¼è¿žç»­å®‰è£…ã€‚å¦‚æžœæ¯ä¸ªç¯æ³¡éƒ½æ˜¯è“ç‰™ Mesh è®¾å¤‡ï¼Œé‚£ä¹ˆè¿™ä¸ªç½‘ç»œå°±å¾—ä»¥å…¨é¢è¦†ç›–å»ºç­‘ç‰©ã€‚ è“ç‰™ Mesh ç½‘ç»œä¸ä»…æœ‰ä½ŽåŠŸè€—ï¼Œè¿˜æœ‰ä½Žé¢‘å®½çš„ç‰¹è‰²ã€‚è¿™å¬èµ·æ¥å¥½åƒæ˜¯ä¸ªç¼ºç‚¹ï¼Ÿå…¶å®žä¸ç„¶ã€‚ ç”±äºŽè“ç‰™ Mesh ç½‘ç»œä¸æ˜¯ç”¨æ¥è®©ä½ å‘é€å½±éŸ³èµ„æ–™ï¼Œä¸»è¦æ˜¯ç”¨æ¥ä¼ é€’ç»´æŠ¤è¿žæŽ¥æˆ–å‘é€å‘½ä»¤ï¼Œå‘é€ä¸€ä¸ªâ€œå…³é—­â€æˆ–â€œæ‰“å¼€â€çš„æŒ‡å®šï¼Œç”¨ä¸åˆ°å¤šå°‘é¢‘å®½ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè“ç‰™ Mesh ç½‘ç»œè™½ç„¶èŒƒå›´æ— è¿œå¼—å±Šï¼Œä½†æ— æ³•å®Œå…¨å–ä»£ Wi-Fiã€‚ ä¹çœ‹å¾ˆåƒï¼Œä½†ä»”ç»†äº†è§£åŽï¼Œä½ ä¼šå‘çŽ°å®ƒä»¬é€‚åˆä¸åŒçš„åˆ©åŸºå¸‚åœºã€‚ http://www.icsmart.cn/13985/ https://en.wikipedia.org/wiki/Bluetooth#Communication_and_connection","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Zigbee","slug":"Zigbee","date":"2018-06-20T08:51:26.000Z","updated":"2021-08-19T11:11:44.292Z","comments":true,"path":"2018/06/20/Zigbee/","link":"","permalink":"https://noteforme.github.io/2018/06/20/Zigbee/","excerpt":"","text":"https://blog.csdn.net/qq_34581118/article/details/78452316 0000 01010001 0000 0001 0101 = 1 * 2^4+ 1*2^2 + 1 = 21 = 0X15 12301 02 10 11 02 10 02 10 11 03 10 10 10 10 01 00 11 00 00 11 03 https://blog.csdn.net/feiyangxiaomi/article/details/9257375 https://juejin.im/post/5b124346e51d450684732790","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"VideoNDK","slug":"C_NDK","date":"2018-06-14T01:21:28.000Z","updated":"2025-04-05T04:19:13.406Z","comments":true,"path":"2018/06/14/C_NDK/","link":"","permalink":"https://noteforme.github.io/2018/06/14/C_NDK/","excerpt":"","text":"æŒ‡é’ˆ12345678910111213#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main(int argc, const char * argv[]) &#123; // insert code here... char* p = (char*)malloc(10); //å­—ç¬¦åž‹æŒ‡é’ˆ mallocå †ç©ºé—´åˆ†é…å†…å­˜ *p = &#x27;a&#x27;; *(p+1) = &#x27;b&#x27;; *(p+2) = &#x27;c&#x27;; free(p); // p = NULL; printf(&quot;%s \\n&quot;,p); &#125; è¾“å‡º abc æŒ‡é’ˆå‡½æ•°:å¸¦æŒ‡é’ˆçš„å‡½æ•° å‡½æ•°çš„è¿”å›žå€¼ä¸ºæŒ‡é’ˆç±»åž‹ å‡½æ•°å£°æ˜Ž : int* func(int x,int y) æŒ‡é’ˆå‡½æ•°è°ƒç”¨ 12char *q;q = func(m); // qä¸Žè¢«è°ƒç”¨çš„å‡½æ•°çš„è¿”å›žç±»åž‹ä¸€è‡´ ç¤ºä¾‹1123456789101112131415161718192021#include &lt;stdio.h&gt;char *getWord(char c)&#123; switch (c) &#123; case &#x27;A&#x27;: return &quot;Apple&quot;; case &#x27;B&#x27;: return &quot;Banana&quot;; case &#x27;C&#x27;: return &quot;Cat&quot;; case &#x27;D&#x27;: return &quot;Dog&quot;; default:return &quot;None&quot;; &#125;&#125;int main(int argc, const char * argv[]) &#123; char input; printf(&quot;please input a charactar:&quot;); input = getchar(); printf(&quot;%c\\n&quot;,input); printf(&quot;%s\\n&quot;,getWord(input)); getchar(); return 0;&#125; è¿è¡Œç»“æžœ 123please input a charactar:AAApple è¾“å…¥A ï¼ŒgetWord()è¿”å›žå€¼ä¸º Appleçš„é¦–åœ°å€,printf(â€œ%s\\n),è¾“å‡ºé¦–åœ°å€æ‰€æŒ‡å‘çš„å€¼ ç¤ºä¾‹2123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;char *getWord2(char c)&#123; char str1[] = &quot;Apple&quot;; char str2[] = &quot;Banana&quot;; char str3[] = &quot;Cat&quot;; char str4[] = &quot;Dog&quot;; char str5[] = &quot;None&quot;; switch (c) &#123; case &#x27;A&#x27;: return str1; case &#x27;B&#x27;: return str2; case &#x27;C&#x27;: return str3; case &#x27;D&#x27;: return str4; default:return str5; &#125;&#125;//#if (0)int main(int argc, const char * argv[]) &#123; char input; printf(&quot;please input a charactar:&quot;); input = getchar(); printf(&quot;%c\\n&quot;,input); printf(&quot;%s\\n&quot;,getWord2(input)); getchar(); return 0;&#125;//#endif æ³¨æ„: ä¸è¦è¿”å›žå±€éƒ¨å˜é‡çš„æŒ‡é’ˆ ä¾‹å­2ä¸­,str1æ•°ç»„æ˜¯å±€éƒ¨å˜é‡ï¼Œè¿™ä¸ªå­—ç¬¦æ•°ç»„åœ¨å­ç¨‹åºç»“æŸåŽï¼Œå®ƒå¯¹åº”çš„å­˜å‚¨ç©ºé—´ä¼šè¢«é‡Šæ”¾. å‡½æ•°æŒ‡é’ˆï¼šæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆæŒ‡å‘å‡½æ•°èµ·å§‹åœ°å€çš„æŒ‡é’ˆ å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰ int (*fptr)(int,int) &#x2F;&#x2F; (*func)ä¸­æ‹¬å·æ˜¯å¿…è¦çš„ï¼Œè¿™ä¼šå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å£°æ˜Žçš„æ˜¯å‡½æ•°æŒ‡é’ˆè€Œä¸æ˜¯å£°æ˜Žä¸€ä¸ªå…·æœ‰è¿”å›žåž‹ä¸ºæŒ‡é’ˆçš„å‡½æ•° æŒ‡é’ˆå˜é‡ : *fptr , å¦‚æžœ*fptrå˜ä¸ºå‡½æ•°åï¼Œæ•´ä¸ªå°±æ˜¯ä¸€ä¸ªå‡½æ•° å‡½æ•°æŒ‡é’ˆçš„ä½¿ç”¨ fptr = func; int x &#x3D; fptr(5,8); â€œ%x â€œ æ‰“å°æŒ‡é’ˆæœ¬èº« ç¤ºä¾‹ 12345678910111213141516171819#include &lt;stdio.h&gt;int square(int num)&#123; return num * num;&#125;int main(int argc, const char * argv[]) &#123; int num; int (*fp)(int); // fpæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¿”å›žç±»åž‹ä¸ºintï¼Œå‚æ•°ä¸ºintçš„å‡½æ•°. printf(&quot;please input a number:&quot;); scanf(&quot;%d&quot;,&amp;num); fp = square; // å‡½æ•°ä¸ŽæŒ‡é’ˆçš„è”ç³» printf(&quot;fp = 0x%x, %d\\n&quot;,fp,(*fp)(num)); //&#x27;0x%x&#x27; æ‰“å°æŒ‡é’ˆæœ¬èº« printf(&quot;fp = 0x%x, %d\\n&quot;,fp,fp(num)); // fpç›´æŽ¥è°ƒç”¨ä¹Ÿå¯ä»¥ return 0;&#125; squareå†…å­˜ä¸­å æ®çš„ä½ç½®ï¼Œfpä¿å­˜squareæŒ‡é’ˆçš„å…¥å£åœ°å€,fpæŒ‡å‘square(),*fpä»£è¡¨ è°ƒç”¨square(). ç”¨æ³• 1234567891011121314151617181920#include &lt;stdio.h&gt;int add(int num1,int num2)&#123; return num1+num2;&#125;int sub(int num1,int num2)&#123; return num1-num2;&#125;int calculate(int (*fp)(int,int),int num1,int num2)&#123; //é€šç”¨åŠŸèƒ½çš„å‡½æ•° return (*fp)(num1,num2);&#125;int main(int argc, const char * argv[]) &#123; printf(&quot;3+5=%d\\n&quot;,calculate(add,3,5)); printf(&quot;3-5=%d\\n&quot;,calculate(sub,3,5)); return 0;&#125; å‡½æ•°æŒ‡é’ˆæ•°ç»„ 12345678910111213141516171819202122232425262728293031323334#include &lt;stdio.h&gt;void function1(int);void function2(int);void function3(int);void function1(int choice)&#123; printf(&quot;input %d, run function1().\\n &quot;,choice);&#125;void function2(int choice)&#123; printf(&quot;input %d, run function2().\\n &quot;,choice);&#125;void function3(int choice)&#123; printf(&quot;input %d, run function3().\\n &quot;,choice);&#125;#if(1)int main(int argc, const char * argv[]) &#123; void (*f[3])(int) = &#123;function1,function2,function3&#125;;//f[3] fæ˜¯æœ‰3ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ˜¯æŒ‡é’ˆç±»åž‹,æ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ å‚æ•°ä¸º(int)ç±»åž‹çš„å‡½æ•° int choice; printf(&quot;please enter a digit : [0-2]: &quot;); scanf(&quot;%d&quot;,&amp;choice); while (choice&gt;0&amp;&amp;choice&lt;3) &#123; (*f[choice])(choice); printf(&quot;please enter a digit : [0-2]: &quot;); scanf(&quot;%d&quot;,&amp;choice); &#125; printf(&quot;run end&quot;);&#125;#endif https://www.bilibili.com/video/BV15J411Q7t9?from=search&amp;seid=1110914330533311902 å‡½æ•°æŒ‡é’ˆpftæŒ‡å‘äº†ä¸€ä¸ªå·²ç»å£°æ˜Žçš„å‡½æ•°bar()ï¼Œç„¶åŽé€šè¿‡pftæ¥å®žçŽ°è¾“å‡ºå­—ç¬¦å’Œæ•´åž‹çš„ç›®çš„ã€‚ 123456789101112void bar(char, int);typedef void (*PFT)(char, int);int main()&#123; PFT pft; pft = bar; pft(&#x27;e&#x27;,91);&#125;void bar(char ch,int i)&#123; cout&lt;&lt; &quot; bar &quot;&lt;&lt;ch&lt;&lt;&#x27; &#x27;&lt;&lt;i&lt;&lt;endl; return;&#125; å‡½æ•°æŒ‡é’ˆä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œ ç„¶åŽä¾¿å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå‡½æ•°æŒ‡é’ˆæ‰€æŒ‡å‘çš„å‡½æ•° 123456789101112131415161718typedef void (*PFT)(char, int);void bar(char ch, int i) &#123; cout &lt;&lt; &quot;bar &quot; &lt;&lt; ch &lt;&lt; &#x27; &#x27; &lt;&lt; i &lt;&lt; endl; return;&#125;void foo(char ch, int i, PFT pf) &#123; pf(ch, i); return;&#125;int main() &#123; PFT pft; pft = bar; foo(&#x27;e&#x27;, 12, pft);&#125; å‡½æ•°å¯¹è±¡ 12345678910class A &#123;public: int operator()(int x) &#123; return x; &#125;&#125;;int main()&#123; A a; cout&lt;&lt;a(5)&lt;&lt;endl;&#125; 123456789101112131415161718class Func &#123;public: int operator()(int a, int b) &#123; cout &lt;&lt; a &lt;&lt; &#x27;+&#x27; &lt;&lt; b &lt;&lt; &#x27;=&#x27; &lt;&lt; a + b &lt;&lt; endl; return a; &#125;&#125;;int addFunc(int a, int b, Func &amp;func) &#123; func(a, b); return a;&#125;int main() &#123; Func func; addFunc(1, 3, func);&#125; ç»“æž„ä½“ç»“æž„æŒ‡é’ˆpoint 1234567 struct point *pp;struct point pt = &#123;400,600&#125;;pp = &amp;pt;printf(&quot;pt %d, %d \\n&quot;,pt.x, pt.y);//(*pp.x)ä¸­çš„åœ†æ‹¬å·æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºç»“æž„æˆå‘˜è¿ç®—ç¬¦çš„ &quot;.&quot; çš„ä¼˜å…ˆçº§æ¯”å…ˆçº§é«˜printf(&quot;*pp %d, %d \\n&quot;,(*pp).x, (*pp).y);printf(&quot;pp-&gt; %d, %d \\n&quot;,pp-&gt;x, pp-&gt;y); è¿è¡Œ 123pt 400, 600 *pp 400, 600 pp-&gt; 400, 600 ç»“æž„æŒ‡é’ˆçš„ä½¿ç”¨é¢‘åº¦éžå¸¸é«˜ï¼ŒCè¯­è¨€æä¾›äº†å¦ä¸€ç§ç®€å†™æ–¹å¼ï¼Œå‡å®šPæŒ‡å‘ä¸€ä¸ªç»“æž„çš„æŒ‡é’ˆï¼Œå¯ä»¥ç”¨ p-&gt; ç»“æž„æˆå‘˜ &#x3D;&#x3D; *p.ç»“æž„æˆå‘˜ ä»£ç è¡¨è¾¾å¼printf(&quot;origin is (%d,%d)\\n&quot;, pp-&gt;x, pp-&gt;y); 123456 struct rect r = &#123;&#123;200,300&#125;,&#123;400,500&#125;&#125;;struct rect *rp = &amp;r;printf(&quot;pt1.x %d \\n&quot;,r.pt1.x);printf(&quot;(*rp).pt1.x %d \\n&quot;,(*rp).pt1.x);printf(&quot; rp-&gt;pt1.x %d \\n&quot;,rp-&gt;pt1.x);printf(&quot;r.pt1.x %d \\n&quot;,r.pt1.x); è¿è¡Œç»“æžœ 1234pt1.x 200 (*rp).pt1.x 200 rp-&gt;pt1.x 200 r.pt1.x 200 åŠ¨æ€å†…å­˜åˆ†é…1234567891011121314151617181920212223 int a[5] = &#123;4,10,2,8,6&#125;; int len; printf(&quot;è¯·è¾“å…¥ä½ éœ€è¦åˆ†é…çš„æ•°ç»„çš„é•¿åº¦ï¼šlen = &quot;); scanf(&quot;%d&quot;,&amp;len); /** * sizeof(int) *len åˆ†é…lenä¸ªintå­—èŠ‚çš„é•¿åº¦ï¼Œlen =5æ—¶ï¼Œå°±æ˜¯20ä¸ªå­—èŠ‚ * mallocè¿”å›ž æŒ‡å‘ ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€ * int * ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€ï¼Œä»£è¡¨Intç±»åž‹åœ°å€ï¼Œ pArrç­‰ä»·äºŽaï¼Œ pArr+1ä»£è¡¨ç¬¬äºŒä¸ªIntåœ°å€ */ int *pArr = (int *)malloc(sizeof(int) *len); *pArr = 5; //ç±»ä¼¼äºŽ a[0] =4; pArr[1] = 10; //ç±»ä¼¼äºŽa[1]=10;// printf(&quot;%d %d &quot;,*pArr,pArr[1]); for (int i = 0; i &lt;len ; ++i) &#123; scanf(&quot;%d&quot; , &amp;pArr[i]); &#125; for (int i = 0; i&lt;len ; ++i) &#123; printf(&quot;%d\\n &quot; , *(pArr+i)); &#125; free(pArr); //æŠŠpArræ‰€ä»£è¡¨çš„åŠ¨æ€åˆ†é…çš„20ä¸ªå­—èŠ‚çš„å†…å­˜é‡Šæ”¾ ç»“æž„ä½“å˜é‡(hao)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;stdio.h&gt;#include &lt;memory.h&gt;struct Student &#123; int sid; char name[200]; int age;&#125;;void g(struct Student student);void g2(struct Student *pst);void f(struct Student *pst);int main() &#123; struct Student st = &#123;1000, &quot;å¼ ä¸‰&quot;, 20&#125;; printf(&quot;%d %s %d\\n&quot;, st.sid, st.name, st.age); st.sid = 99;// st.name = &quot;lili&quot;; //error strcpy(st.name, &quot;lili&quot;);//å¤åˆ¶ st.age = 22; printf(&quot;%d %s %d\\n&quot;, st.sid, st.name, st.age); struct Student *pst; pst = &amp;st; pst-&gt;sid = 99; // pst -&gt; sid ç­‰ä»·äºŽ (*pst).sid è€Œ(*pst).sid ç­‰ä»·äºŽ st.sid // pst -&gt; sid // æ‰€æŒ‡å‘çš„ç»“æž„ä½“å˜é‡çš„sidè¿™ä¸ªæˆå‘˜ g(st); g2(&amp;st); return 0;&#125;void g2(struct Student *pst) &#123; printf(&quot;g2 %d %s %d\\n&quot;, pst-&gt;sid, pst-&gt;name, pst-&gt;age);&#125;//è¿™ç§æ–¹å¼å¤šè€— 208 å†…å­˜ï¼Œè€—æ—¶é—´ ä¸æŽ¨èvoid g(struct Student st) &#123; printf(&quot;g %d %s %d\\n&quot;, st.sid, st.name, st.age);&#125; è·¨å‡½æ•°ä½¿ç”¨å†…å­˜123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;#include &lt;malloc.h&gt;struct Student&#123; int sid; int age;&#125;;struct Student *createStudent(void);void showStudent(struct Student *pst);int main()&#123; struct Student *ps; ps = createStudent(); showStudent(ps);&#125;void showStudent(struct Student *pst) &#123; printf(&quot;%d %d\\n&quot;,pst-&gt;sid,pst-&gt;age);&#125;struct Student *createStudent() &#123; struct Student *p = malloc(sizeof(struct Student)); //è¡¨ç¤º struct Studentæ•´ä½“çš„æ•°æ®ç±»åž‹ä»£è¡¨çš„å­—èŠ‚æ•° p-&gt;sid = 99; p-&gt;age = 88; return p;&#125; è¿ç®—ç¬¦ä¼˜å…ˆçº§ javaè¿ç®—ç¬¦ä¼˜å…ˆçº§ ! &amp;&amp; || ç®—æ³•https://space.bilibili.com/501486236/video typedef åˆ«åtype_1 12345678910111213141516171819typedef int ZHANGSAN;//ä¸ºintå†é‡æ–°å¤šå–ä¸€ä¸ªåå­—ï¼ŒZHANGSANç­‰ä»·äºŽinttypedef struct Student &#123; int sid; char name[100]; char sex;&#125; ST;int main(void) &#123; int i = 10; //ç­‰ä»·äºŽ ZHANGSAN i = 10; ZHANGSAN j = 20; printf(&quot;%d\\n&quot;, j); struct Student st;//ç­‰ä»·äºŽ ST st; struct Student *ps = &amp;st; // ç­‰ä»·äºŽ ST * ps ST st2; st2.sid = 200; printf(&quot;%d\\n&quot;,st2.sid);&#125; type_2 12345678910111213typedef struct Student &#123; int sid; char name[100]; char sex;&#125; * PST ; //PSTç­‰ä»·äºŽ struct Student * ,è¿™æ ·å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»åž‹äº†int main(void)&#123; struct Student st; PST ps = &amp;st; ps-&gt;sid = 99; printf(&quot;%d\\n&quot;,ps-&gt;sid); return 0;&#125; type_3 12345678910111213typedef struct Student &#123; int sid; char name[100]; char sex;&#125; * PSTU, STU; //ç­‰ä»·äºŽ STä»£è¡¨äº† struct Student st, PST ä»£è¡¨äº†struct Student *;int main(void) &#123; STU st; //ç­‰ä»·äºŽ struct Student st; PSTU ps = &amp;st; //struct Student * ps = &amp;st; ps-&gt;sid = 99; printf(&quot;%d\\n&quot;,ps-&gt;sid); return 0;&#125; C++å¼•ç”¨ 1C++ å¼•ç”¨å¼•ç”¨å˜é‡æ˜¯ä¸€ä¸ªåˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯æŸä¸ªå·²å­˜åœ¨å˜é‡çš„å¦ä¸€ä¸ªåå­—ã€‚ä¸€æ—¦æŠŠå¼•ç”¨åˆå§‹åŒ–ä¸ºæŸä¸ªå˜é‡ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å¼•ç”¨åç§°æˆ–å˜é‡åç§°æ¥æŒ‡å‘å˜é‡ 12345678910111213141516#include &lt;iostream&gt;using namespace std;void swap(int &amp;x, int &amp;y) &#123; int t = x; x = y; y = t;&#125;int main() &#123; int a = 3, b = 4; cout &lt;&lt; a &lt;&lt; &quot;\\t&quot; &lt;&lt; b &lt;&lt; endl; swap(a, b); cout &lt;&lt; a &lt;&lt; &quot;\\t&quot; &lt;&lt; b &lt;&lt; endl;&#125; å‡½æ•°æ¨¡æ¿1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;template&lt;typename T&gt;T add(T x,T y)&#123; return x+y;&#125;int main()&#123;#if 0 cout&lt;&lt;add&lt;int&gt;(5,3)&lt;&lt;endl; cout&lt;&lt;add&lt;double &gt;(5.3,7.8)&lt;&lt;endl; cout&lt;&lt;add&lt;int&gt;(4,6)&lt;&lt;endl; cout&lt;&lt;add&lt;string&gt;(&quot;hello&quot;,&quot;world&quot;)&lt;&lt;endl;#else //ç±»åž‹è‡ªåŠ¨æŽ¨æ–­ cout&lt;&lt;add(5,3)&lt;&lt;endl; cout&lt;&lt;add(5.3,7.8)&lt;&lt;endl; cout&lt;&lt;add(4,6)&lt;&lt;endl; cout&lt;&lt;add((double)5,7.8)&lt;&lt;endl;#endif&#125; swiftè¯­æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243var a = 10var b: Int = 20let aa = 40 //constif a&lt;20&#123; print(&quot;a &lt; 20 , true&quot; )&#125;else&#123; print(&quot;a &gt;= 20&quot;)&#125;switch a &#123; case 10: print(&quot;a equals 10&quot;)case 20: print(&quot;a equals 20&quot;)default : print(&quot;other&quot;)&#125;print(&quot;Hello, World!&quot;)for i in 25..&lt;100&#123; print(&quot;aa,i=&quot;,i)&#125;var list = [1,2,3,4,5]for i in list&#123; print(&quot;aa, i=&quot;,i);&#125;var loop = 0while loop&lt;10 &#123; print(&quot;loop, xxx = &quot;,loop) loop = loop + 1&#125;func myFunc(a : Int) -&gt; Int&#123; print(&quot;this is a function&quot;,a) return a&#125;var mm = myFunc(a: 10)print(&quot;Hello, World!&quot;,a,b,aa,mm) environmenthttps://juejin.im/post/5ad98412518825670960c13c https://developer.android.com/ndk/","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Bluetooth03","slug":"Bluetooth03","date":"2018-06-11T01:41:39.000Z","updated":"2024-10-02T01:36:33.502Z","comments":true,"path":"2018/06/11/Bluetooth03/","link":"","permalink":"https://noteforme.github.io/2018/06/11/Bluetooth03/","excerpt":"","text":"ç»å…¸è“ç‰™ ä½ŽåŠŸè€—è“ç‰™çš„åŒºåˆ«http://www.loverobots.cn/the-analysis-is-simple-compared-with-the-classic-bluetooth-and-bluetooth-low-energy-in-android.html è“ç‰™é€‚é…å»ºè®® è“ç‰™ä½ŽåŠŸè€— â€‹ Android 4.3 ä¸ºå‘æŒ¥æ ¸å¿ƒä½œç”¨çš„è“ç‰™ä½ŽåŠŸè€—ï¼ˆè“ç‰™ LEï¼‰å¼•å…¥äº†å¹³å°æ”¯æŒã€‚åœ¨ Android 5.0 ä¸­ï¼ŒAndroid è®¾å¤‡çŽ°åœ¨å¯ä»¥å‘æŒ¥è“ç‰™ LE å¤–å›´è®¾å¤‡çš„ä½œç”¨ã€‚åº”ç”¨å¯ä»¥åˆ©ç”¨æ­¤åŠŸèƒ½è®©é™„è¿‘è®¾å¤‡å‘çŽ°å®ƒã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¼€å‘è¿™æ ·çš„åº”ç”¨ï¼šè®©è®¾å¤‡å‘æŒ¥è®¡æ­¥å™¨æˆ–å¥åº·ç›‘æµ‹ä»ªçš„ä½œç”¨ï¼Œå¹¶ä¸Žå…¶ä»–è“ç‰™ LE è®¾å¤‡è¿›è¡Œæ•°æ®é€šä¿¡ã€‚ æ–°å¢žçš„ android.bluetooth.le API è®©æ‚¨çš„åº”ç”¨å¯ä»¥å‘å¸ƒå¹¿å‘Šã€æ‰«æå“åº”ä»¥åŠä¸Žé™„è¿‘çš„è“ç‰™ LE è®¾å¤‡å»ºç«‹è¿žæŽ¥ã€‚è¦ä½¿ç”¨æ–°å¢žçš„å¹¿å‘Šå’Œæ‰«æåŠŸèƒ½ï¼Œè¯·åœ¨æ‚¨çš„æ¸…å•ä¸­æ·»åŠ  BLUETOOTH_ADMIN æƒé™ã€‚å½“ç”¨æˆ·æ›´æ–°æ‚¨çš„åº”ç”¨æˆ–ä»Ž Play å•†åº—ä¸‹è½½æ‚¨çš„åº”ç”¨æ—¶ï¼Œä¼šè¢«è¦æ±‚å‘æ‚¨çš„åº”ç”¨æŽˆäºˆä»¥ä¸‹æƒé™ï¼šâ€œBluetooth connection information:Allows the app to control Bluetooth, including broadcasting to or getting information about nearby Bluetooth devices.â€ è¦å¯åŠ¨è“ç‰™ LE å¹¿æ’­ï¼Œä»¥ä¾¿å…¶ä»–è®¾å¤‡èƒ½å‘çŽ°æ‚¨çš„åº”ç”¨ï¼Œè¯·è°ƒç”¨ startAdvertising()ï¼Œå¹¶ä¼ å…¥ AdvertiseCallback ç±»çš„å®žçŽ°ã€‚å›žè°ƒå¯¹è±¡ä¼šæ”¶åˆ°å¹¿æ’­æ“ä½œæˆåŠŸæˆ–å¤±è´¥çš„æŠ¥å‘Šã€‚ Android 5.0 å¼•å…¥äº† ScanFilter ç±»ï¼Œè®©æ‚¨çš„åº”ç”¨å¯ä»¥åªæ‰«æå…¶æ„Ÿå…´è¶£çš„ç‰¹å®šç±»åž‹è®¾å¤‡ã€‚è¦å¼€å§‹æ‰«æè“ç‰™ LE è®¾å¤‡ï¼Œè¯·è°ƒç”¨ startScan()ï¼Œå¹¶ä¼ å…¥ç­›é€‰å™¨åˆ—è¡¨ã€‚åœ¨æ–¹æ³•è°ƒç”¨ä¸­ï¼Œæ‚¨è¿˜å¿…é¡»æä¾› ScanCallback çš„å®žçŽ°ï¼Œä»¥ä¾¿åœ¨å‘çŽ°è“ç‰™ LE å¹¿æ’­æ—¶è¿›è¡ŒæŠ¥å‘Šã€‚ è“ç‰™åŸºæœ¬æ“ä½œè“ç‰™æƒé™1&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt; å¦‚æžœæ‚¨å¸Œæœ›æ‚¨çš„åº”ç”¨å¯åŠ¨è®¾å¤‡å‘çŽ°æˆ–æ“ä½œè“ç‰™è®¾ç½®ï¼Œåˆ™è¿˜å¿…é¡»å£°æ˜Ž BLUETOOTH_ADMIN æƒé™ã€‚ å¤§å¤šæ•°åº”ç”¨éœ€è¦æ­¤æƒé™ä»…ä»…ä¸ºäº†èƒ½å¤Ÿå‘çŽ°æœ¬åœ°è“ç‰™è®¾å¤‡ã€‚ é™¤éžè¯¥åº”ç”¨æ˜¯å°†è¦åº”ç”¨æˆ·è¯·æ±‚ä¿®æ”¹è“ç‰™è®¾ç½®çš„â€œè¶…çº§ç®¡ç†å‘˜â€ï¼Œå¦åˆ™ä¸åº”ä½¿ç”¨æ­¤æƒé™æ‰€æŽˆäºˆçš„å…¶ä»–èƒ½åŠ›ã€‚ æ³¨ï¼šå¦‚æžœè¦ä½¿ç”¨ BLUETOOTH_ADMIN æƒé™ï¼Œåˆ™è¿˜å¿…é¡»æ‹¥æœ‰ BLUETOOTH æƒé™ã€‚ å¦‚æ‰“å¼€å…³é—­è“ç‰™ 1&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt; 6.0æƒé™12&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt; è®¾ç½®è“ç‰™ åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒ BluetoothAdapter 12345mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();if (mBluetoothAdapter == null) &#123; // Device does not support Bluetooth&#125; å¯ç”¨è“ç‰™ 12345if (mBluetoothAdapter==null||!mBluetoothAdapter.isEnabled())&#123; Toast.makeText(this,&quot;è®¾å¤‡ä¸æ”¯æŒè“ç‰™æƒé™&quot;,Toast.LENGTH_SHORT).show(); &#125;else &#123; Toast.makeText(this,&quot;æ”¯æŒè®¾å¤‡&quot;,Toast.LENGTH_SHORT).show(); &#125; æŸ¥æ‰¾è®¾å¤‡5.0ä»¥ä¸‹çš„æ–¹å¼å°±ä¸è´´å‡ºæ¥äº†ï¼Œä»£ç é‡Œæœ‰ 1234567891011121314151617181920212223242526272829303132/** * android5.0ä»¥ä¸Šä½¿ç”¨ */ @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP) private void scanDevices()&#123; BluetoothLeScanner mBluetoothScanner = mBluetoothAdapter.getBluetoothLeScanner(); mBluetoothScanner.startScan(scanCallback); &#125; ScanCallback scanCallback = new ScanCallback() &#123; @Override public void onScanResult(int callbackType, ScanResult result) &#123; super.onScanResult(callbackType, result); //æŠŠbyteæ•°ç»„è½¬æˆ16è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿æŸ¥çœ‹ Log.e(TAG,&quot;onScanResult :&quot;+result.getScanRecord().toString()); BluetoothDevice device = result.getDevice(); blueAdapter.addDevice(device); ScanRecord scanRecord = result.getScanRecord(); int rssi = result.getRssi(); &#125; @Override public void onBatchScanResults(List&lt;ScanResult&gt; results) &#123; super.onBatchScanResults(results); &#125; @Override public void onScanFailed(int errorCode) &#123; super.onScanFailed(errorCode); &#125; &#125;; è¿žæŽ¥è®¾å¤‡è“ç‰™è®¾å¤‡ç»å¸¸å¤„äºŽå…³æœºçŠ¶æ€ï¼Œå…ˆè°ƒç”¨ä¸‹é¢æ–¹æ³• 1BluetoothDevice remoteDevice = adapter.getRemoteDevice(address); 123remoteDevice.connectGatt(context, true, mGattCallback);//å‚æ•°1ï¼šä¸Šä¸‹æ–‡ã€‚ //å‚æ•°2ï¼šæ˜¯å¦è‡ªåŠ¨è¿žæŽ¥ï¼ˆå½“è®¾å¤‡å¯ä»¥ç”¨æ—¶ï¼‰ //å‚æ•°3ï¼šè¿žæŽ¥å›žè°ƒã€‚ https://www.cnblogs.com/Free-Thinker/p/11507349.html 6ã€å…³äºŽautoConnectå‚æ•°ä¸ºtrueçš„æ„ä¹‰ï¼Ÿ åœ¨è“ç‰™æ ¸å¿ƒæ–‡æ¡£Vol3: Core System Package[Host volume]-&gt;Part C: Generic Access Profileçš„Connection Modes and Proceduresç« èŠ‚ä¸­æœ‰æ¶‰åŠåˆ°è‡ªåŠ¨è¿žæŽ¥å»ºç«‹è§„ç¨‹(Auto Connection Establishment Procedure)çš„å®šä¹‰ã€‚ è‡ªåŠ¨è¿žæŽ¥å»ºç«‹è§„ç¨‹ç”¨æ¥å‘å¤šä¸ªè®¾å¤‡åŒæ—¶å‘èµ·è¿žæŽ¥ã€‚ä¸€ä¸ªä¸­å¤®è®¾å¤‡çš„ä¸»æœºä¸Žå¤šä¸ªå¤–å›´è®¾å¤‡ç»‘å®šï¼Œåªè¦å®ƒä»¬å¼€å§‹å¹¿æ’­ï¼Œä¾¿ç«‹åˆ»ä¸Žå…¶å»ºç«‹è¿žæŽ¥ã€‚è·Ÿå¤šç»†èŠ‚è¯·å‚è€ƒè“ç‰™æ ¸å¿ƒæ–‡æ¡£å’Œåè®®æ ˆæºç ã€‚ å›žè°ƒ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455private BluetoothGattCallback mGattCallback = new BluetoothGattCallback() &#123; /** * Callback indicating when GATT client has connected/disconnected to/from a remote GATT server * @param gatt è¿”å›žè¿žæŽ¥å»ºç«‹çš„gattå¯¹è±¡ * @param status è¿”å›žçš„æ˜¯æ­¤æ¬¡gattæ“ä½œçš„ç»“æžœï¼ŒæˆåŠŸäº†è¿”å›ž0 * @param newState æ¯æ¬¡clientè¿žæŽ¥æˆ–æ–­å¼€è¿žæŽ¥çŠ¶æ€å˜åŒ–ï¼ŒSTATE_CONNECTED 0ï¼ŒSTATE_CONNECTING 1,STATE_DISCONNECTED 2,STATE_DISCONNECTING 3 */ @Override public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) &#123; super.onConnectionStateChange(gatt, status, newState); if (newState == BluetoothProfile.STATE_CONNECTED) &#123; gatt.discoverServices(); //è¿žæŽ¥æˆåŠŸï¼Œ å¼€å§‹æœç´¢æœåŠ¡ Log.i(TAG, &quot;onConnectionStateChange è¿žæŽ¥æˆåŠŸ&quot; + status); &#125; &#125; /** * Callback invoked when the list of remote services, characteristics and descriptors for the remote device have been updated, ie new services have been discovered. * @param gatt è¿”å›žçš„æ˜¯æœ¬æ¬¡è¿žæŽ¥çš„gattå¯¹è±¡ * @param status */ @Override public void onServicesDiscovered(BluetoothGatt gatt, int status) &#123; super.onServicesDiscovered(gatt, status); Log.i(TAG, &quot;onServicesDiscovered status&quot; + status); List&lt;BluetoothGattService&gt; mServiceList = gatt.getServices(); for (BluetoothGattService service : mServiceList) &#123; Log.i(TAG, &quot;onServicesDiscovered &quot; + service.getUuid()); &#125; BluetoothGattService service = gatt.getService(UUID.fromString(GATT_SERVICE_PRIMARY_1)); BluetoothGattCharacteristic characterisetic = service.getCharacteristic(UUID.fromString(CHARACTERISTIC_NOTIFY_1)); //è°ƒç”¨ä»¥ä¾¿å½“å‘½ä»¤å‘é€åŽè¿”å›žä¿¡æ¯å¯ä»¥è‡ªåŠ¨è¿”å›ž BluetoothGattDescriptor descriptor = characterisetic.getDescriptor(CCC); descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE); gatt.writeDescriptor(descriptor); boolean isNotify = gatt.setCharacteristicNotification(characterisetic, true); &#125; //å›žè°ƒå“åº”ç‰¹å¾å†™æ“ä½œçš„ç»“æžœã€‚ @Override public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) &#123; Log.i(TAG, gatt.getDevice().getName() + &quot; write successfully&quot;); &#125; //å›žè°ƒå“åº”ç‰¹å¾è¯»æ“ä½œçš„ç»“æžœã€‚ @Override public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) &#123; Log.i(TAG, gatt.getDevice().getName() + &quot; recieved &quot;); &#125; @Override public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) &#123; super.onCharacteristicChanged(gatt, characteristic); Log.i(TAG, &quot;The response is &quot; + &quot;onCharacteristicChanged&quot;); &#125;&#125;; Android ä¸­ GATT æ“ä½œçš„æµç¨‹ Android ä¸­ GATT æ“ä½œçš„æµç¨‹ã€‚å³è¾¹è¿™ä¸ªå›¾ï¼ŒAPP æ˜¯æˆ‘ä»¬çš„åº”ç”¨ï¼Œå³è¾¹è“ç‰™æœåŠ¡ç«¯ï¼Œä»Žå·¦å‘å³ç®­å¤´æ˜¯ APP å‘èµ·çš„è¯·æ±‚ï¼Œä»Žå³å‘å·¦çš„ç®­å¤´æ˜¯å›žè°ƒã€‚æˆ‘ä»¬çœ‹åˆ°æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„å®Œæˆçš„ã€‚è¿žæŽ¥è¿‡ç¨‹æ˜¯ï¼Œé¦–å…ˆä½¿ç”¨ gattConnect å‘èµ·è¿žæŽ¥ï¼Œæ”¶åˆ° onConnectionStateChange() é€šçŸ¥è¿žæŽ¥æ˜¯å¦æˆåŠŸï¼Œè‹¥æˆåŠŸï¼Œåˆ™è¿›è¡Œä¸‹ä¸€æ­¥çš„ discoverService()ï¼Œè¿™ä¸€æ­¥å°±æ˜¯å‘çŽ°è®¾å¤‡æ‰€æœ‰çš„ GATT Serviceï¼Œè‹¥å‘çŽ°æˆåŠŸï¼Œé€šè¿‡ onServiceDiscovered() å›žè°ƒï¼Œè¿™æ—¶æ‰ç®—çœŸæ­£çš„è¿žæŽ¥æˆåŠŸã€‚ç„¶åŽå¯ä»¥é€šè¿‡ BluetoothGatt çš„ getService() æ¥èŽ·å¾—BluetoothGattServiceï¼Œè¿›è€ŒèŽ·å¾—BluetoothGattCharacteristic ç­‰ï¼Œç„¶åŽå¯¹ Characteristic è¿›è¡Œè¯»å†™ã€‚ office https://developer.android.com/guide/topics/connectivity/bluetooth?hl=zh-cn https://developer.android.com/guide/topics/connectivity/bluetooth-le?hl=zh-cn å®˜æ–¹demo android5.0å·²è¿‡æ—¶ https://source.android.google.cn/devices/bluetooth/ un https://juejin.im/entry/5919630444d904006c6e14ca https://www.jianshu.com/p/29a730795294 https://www.jianshu.com/p/046c1f5a7163 è®¾å¤‡é€šçŸ¥æ‰‹æœº5 å½“ä½ ä»Žæ–‡æ¡£çœ‹åˆ°éåŽ†å‡ºæ¥çš„UUIDæœ‰æŽ¥é€é€šçŸ¥çš„åŠŸèƒ½ã€‚è¿™æ—¶ä½ å°±å¯ä»¥è®¾ç½®å¯ä»¥æŽ¥æ”¶é€šçŸ¥ã€‚é€šè¿‡æ‹¿åˆ°å¯¹åº”é€šçŸ¥UUIDçš„BluetoothGattCharacteristicï¼Œè°ƒç”¨setCharacteristicNotification().å…¶ä¸­00002902-0000-1000-8000-00805f9b34fbæ˜¯ç³»ç»Ÿæä¾›æŽ¥å—é€šçŸ¥è‡ªå¸¦çš„UUIDï¼Œé€šè¿‡è®¾ç½®BluetoothGattDescriptorç›¸å½“äºŽè®¾ç½®BluetoothGattCharacteristicçš„Descriptorå±žæ€§æ¥å®žçŽ°é€šçŸ¥ï¼Œè¿™æ ·åªè¦è“ç‰™è®¾å¤‡å‘é€é€šçŸ¥ä¿¡å·ï¼Œå°±ä¼šå›žè°ƒonCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) æ–¹æ³•ï¼Œè¿™ä½ å°±å¯ä»¥åœ¨è¿™æ–¹æ³•åšç›¸åº”çš„é€»è¾‘å¤„ç†ã€‚ https://juejin.im/entry/58c74fc42f301e006bce23fb ç»å…¸è“ç‰™å¼€å‘https://www.jianshu.com/p/453a5cda5646 è®¾ç½® 00002902-0000-1000-8000-00805f9b34fb 123456789101112131415161718/* è®¾ç½®ç‰¹å¾ä¿¡æ¯æŽ¨é€ */Â·Â·Â· BluetoothGattCharacteristic characteristic; mGatt.setCharacteristicNotification(characteristic,true);/* CCCD çš„UUID */private UUID ID_CCCD = UUID.fromString(&quot;00002902-0000-1000-8000-00805f9b34fb&quot;); /* èŽ·å–CCCD */BluetoothGattDescriptor cccd = characteristic.getDescriptor(ID_CCCD);/* è®¾ç½®æŽ¨é€é€šçŸ¥ï¼Œå‚è€ƒå€¼ä¸ºï¼š * BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE: é€šçŸ¥ * BluetoothGattDescriptor.ENABLE_INDICATION_VALUE: æŒ‡ç¤º * BluetoothGattDescriptor.DISABLE_NOTIFICATION_VALUE: å…³é—­ */ cccd.setValue(å‚è€ƒå€¼);/* å†™å…¥CCCD */mGatt.writeDescriptor(descriptor) https://www.jianshu.com/p/43b1956d9f5c å®˜æ–¹ä¸‰ä¸ªè“ç‰™ç¤ºä¾‹ :https://github.com/googlesamples?utf8=%E2%9C%93&amp;q=bluetooth&amp;type=&amp;language= é—®é¢˜æ‰«æä¸åˆ°ä»»ä½•è®¾å¤‡ https://stackoverflow.com/questions/39646253/android-stops-finding-ble-devices-onclientregistered-status-133-clientif-0","categories":[{"name":"BLE","slug":"BLE","permalink":"https://noteforme.github.io/categories/BLE/"}],"tags":[]},{"title":"DesignPatterns_Observer","slug":"DesignPatterns_Observer","date":"2018-06-06T08:09:58.000Z","updated":"2025-02-04T13:53:45.954Z","comments":true,"path":"2018/06/06/DesignPatterns_Observer/","link":"","permalink":"https://noteforme.github.io/2018/06/06/DesignPatterns_Observer/","excerpt":"","text":"åŽŸç†å›¾ â€‹ å¥¶ç«™\\å¤©æ°”ç«™ ç”¨æˆ· Observerè§‚å¯Ÿè€…æ¨¡å¼&#x2F;è®¢é˜…æ¨¡å¼ PUSH æ¨¡å¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465//ä¸»é¢˜å¯¹è±¡å˜åŒ–ï¼Œé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…//æŠ½è±¡è§‚å¯Ÿè€…public interface Observer&#123; public void update(String str);&#125;//å…·ä½“è§‚å¯Ÿè€…public class ConcreteObserver implements Observer&#123; @Override public void update(String str) &#123; // TODO Auto-generated method stub System.out.println(str); &#125;&#125;//æŠ½è±¡ä¸»é¢˜public interface Subject&#123; public void addObserver(Observer observer); public void removeObserver(Observer observer); public void notifyObservers(String str);&#125;//å…·ä½“ä¸»é¢˜public class ConcreteSubject implements Subject&#123; // å­˜æ”¾è§‚å¯Ÿè€… private List&lt;Observer&gt; list = new ArrayList&lt;Observer&gt;(); //æ³¨å†Œè§‚å¯Ÿè€… @Override public void addObserver(Observer observer) &#123; // TODO Auto-generated method stub list.add(observer); &#125; //ç§»é™¤è§‚å¯Ÿè€… @Override public void removeObserver(Observer observer) &#123; // TODO Auto-generated method stub list.remove(observer); &#125; // éåŽ†æ‰€æœ‰è§‚å¯Ÿè€…ï¼Œå¹¶é€šçŸ¥ @Override public void notifyObservers(String str) &#123; // TODO Auto-generated method stub for(Observer observer:list)&#123; observer.update(str); &#125; &#125;&#125;public class Test &#123; public static void main(String[] args) &#123; //ä¸€ä¸ªä¸»é¢˜ ConcreteSubject eatSubject = new ConcreteSubject(); //ä¸¤ä¸ªè§‚å¯Ÿè€… ConcreteObserver p1 = new ConcreteObserver(); ConcreteObserver p2 = new ConcreteObserver(); //è§‚å¯Ÿè€…è®¢é˜…ä¸»é¢˜ eatSubject.addObserver(p1); eatSubject.addObserver(p2); eatSubject.notifyOBservers(&quot;èµ·æ¥æ•²ä»£ç å•¦ï¼ï¼ï¼&quot;); &#125;&#125; https://juejin.im/post/5bc96afff265da0aa94a4493 https://www.tutorialspoint.com/design_pattern/bridge_pattern.htm PULLæ¨¡å¼ è€Œæ‹‰æ¨¡åž‹æ˜¯ä¸»é¢˜å¯¹è±¡ä¸çŸ¥é“è§‚å¯Ÿè€…å…·ä½“éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œæ²¡æœ‰åŠžæ³•çš„æƒ…å†µä¸‹ï¼Œå¹²è„†æŠŠè‡ªèº«ä¼ é€’ç»™è§‚å¯Ÿè€…ï¼Œè®©è§‚å¯Ÿè€…è‡ªå·±åŽ»æŒ‰éœ€è¦å–å€¼ã€‚ https://www.bilibili.com/video/BV1W4411c77E?p=120","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[]},{"title":"Singleton","slug":"DesignPatterns_Singleton","date":"2018-06-06T07:43:06.000Z","updated":"2024-10-01T11:32:19.639Z","comments":true,"path":"2018/06/06/DesignPatterns_Singleton/","link":"","permalink":"https://noteforme.github.io/2018/06/06/DesignPatterns_Singleton/","excerpt":"","text":"å•ä¾‹æ¨¡å¼ ä½œç”¨ï¼šä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå‡å°‘å†…å­˜å¼€é”€ kotlin12345678910class Singleton private constructor() &#123; private object HOLDER &#123; val INSTANCE = Singleton() &#125; companion object &#123; val instance: Singleton by lazy &#123; HOLDER.INSTANCE &#125; &#125;&#125; https://medium.com/swlh/singleton-class-in-kotlin-c3398e7fd76b å¸¸ç”¨æ–¹å¼ 12345678910111213141516public class Singleton&#123; // æŒæœ‰ç§æœ‰é™æ€å®žä¾‹ï¼Œé˜²æ­¢è¢«å¼•ç”¨ï¼Œæ­¤å¤„èµ‹å€¼ä¸ºnullï¼Œç›®çš„æ˜¯å®žçŽ°å»¶è¿ŸåŠ è½½ private static Singleton singleton=null; //ç§æœ‰æž„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®žä¾‹åŒ– private Singleton()&#123;&#125; public static Singleton getInstance()&#123; if(singleton==null)&#123; //å¤šä¸ªçº¿ç¨‹åœ¨è¿™é‡Œèšé›†å°±ä¼šäº§ç”Ÿå¤šä¸ªå¯¹è±¡ synonzied(Singleton.class)&#123; Thread.sleel(1) singleton = new Singleton(); &#125; &#125; return singleton; &#125; &#125; 123456789101112131415public class Singleton&#123; // æŒæœ‰ç§æœ‰é™æ€å®žä¾‹ï¼Œé˜²æ­¢è¢«å¼•ç”¨ï¼Œæ­¤å¤„èµ‹å€¼ä¸ºnullï¼Œç›®çš„æ˜¯å®žçŽ°å»¶è¿ŸåŠ è½½ private static Singleton singleton=null; //ç§æœ‰æž„é€ æ–¹æ³•ï¼Œé˜²æ­¢è¢«å®žä¾‹åŒ– private Singleton()&#123;&#125; public static Singleton getInstance()&#123; //è¿™é‡ŒåŠ é” ç²’åº¦æœ‰é—®é¢˜ synonzied(Singleton.class)&#123; //è¿™æ ·ä¼šäº§ç”Ÿæ•ˆçŽ‡é—®é¢˜ï¼Œå¤šä¸ªçº¿ç¨‹åœ¨è¿™ç©ºè½¬ç­‰å¾…èŽ·å¾—é” if(singleton==null)&#123; Thread.sleel(1) singleton = new Singleton(); &#125; &#125; return singleton; &#125; &#125; æºç æœ‰ç±»ä¼¼çš„ InputMethodManagerï¼Œå½“ç„¶æˆ‘ä»¬å¸¸ç”¨çš„æ–¹å¼æ˜¯è¦ä¼ ä¸ªContextä¸Šä¸‹æ–‡å¯¹è±¡ç»™å•ä¾‹ç±»ï¼Œè®°å¾—æœ‰æ¬¡é¢è¯•çš„æ—¶å€™é¢è¯•å®˜è¯´å•ä¾‹é‡Œé¢ä½¿ç”¨å¼±å¼•ç”¨ï¼Œå¦‚æžœæ˜¯æ˜¯ä¸ºäº†é¿å…å†…å­˜æ³„æ¼æˆ‘è§‰å¾—æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç”¨è¿™ç§æ–¹å¼æ›´å¥½ Context applicationContext = context.getApplicationContext(); åˆšæ— æ„ä¸­å‘çŽ°Glideå•ä¾‹ä¹Ÿæ˜¯è¿™æ ·ä½¿ç”¨çš„ã€‚ åŒé‡æ£€æŸ¥æ¨¡å¼123456789101112131415public class Singleton &#123; private volatile static Singleton singleton; //volatile é˜²æ­¢æŒ‡ä»¤é‡æŽ’åº,æŒ‡ä»¤åŠåˆå§‹åŒ–ï¼ŒCPUæ‰§è¡ŒæŒ‡ä»¤é¡ºåºå¯èƒ½ä¸åŒ private Singleton ()&#123; &#125; public static Singleton getInstance() &#123; if (singleton== null) &#123; synchronized (Singleton.class) &#123; if (singleton== null) &#123; instance= new Singleton(); &#125; &#125; &#125; return singleton; &#125; &#125; ç¬¬1ä¸ªif (singleton&#x3D;&#x3D;null)å¦‚æžœåŽ»æŽ‰å®ƒï¼Œé‚£ä¹ˆæ‰€æœ‰çº¿ç¨‹éƒ½ä¼šä¸²è¡Œæ‰§è¡Œï¼Œæ•ˆçŽ‡ä½Žä¸‹ï¼Œè¿™æ ·ä¼šäº§ç”Ÿæ•ˆçŽ‡é—®é¢˜ï¼Œå¤šä¸ªçº¿ç¨‹åœ¨è¿™ç©ºè½¬ç­‰å¾…èŽ·å¾—é”ï¼Œæ‰€ä»¥ä¸¤ä¸ª check éƒ½æ˜¯éœ€è¦ä¿ç•™çš„ã€‚ ç¬¬2ä¸ªif (singleton&#x3D;&#x3D;null)å‡å¦‚ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ getInstance() ,ç”±äºŽinstanceæ˜¯ç©ºçš„ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½é€šè¿‡ç¬¬1ä¸ªif (singleton null),æŽ¥ç€é”æœºåˆ¶å­˜åœ¨ï¼Œçº¿ç¨‹1å…ˆè¿›å…¥åŒæ­¥è¯­å¥ï¼Œå¹¶è¿›å…¥ç¬¬äºŒé‡ifåˆ¤æ–­,çº¿ç¨‹2åœ¨å¤–é¢ç­‰å¾…. çº¿ç¨‹1æ‰§è¡Œå®Œ new Singleton()åŽé€€å‡ºsynchronized,è¿™æ—¶å€™å¦‚æžœæ²¡æœ‰ ç¬¬2ä¸ªif (singleton&#x3D;&#x3D; null) çº¿ç¨‹2ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªå®žä¾‹ï¼Œæ­¤æ—¶å°±ç ´åäº†å•ä¾‹åŽŸåˆ™. volatileä½œç”¨é˜²æ­¢ new Singleton()é‡æŽ’åº åœ¨ JVM ä¸­ä¸Šè¿°è¯­å¥è‡³å°‘åšäº†ä»¥ä¸‹è¿™ 3 ä»¶äº‹ ç¬¬ä¸€æ­¥æ˜¯ç»™ singleton åˆ†é…å†…å­˜ç©ºé—´ï¼› ç„¶åŽç¬¬äºŒæ­¥å¼€å§‹è°ƒç”¨ Singleton çš„æž„é€ å‡½æ•°ç­‰ï¼Œæ¥åˆå§‹åŒ– singletonï¼› æœ€åŽç¬¬ä¸‰æ­¥ï¼Œå°† singleton å¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ‰§è¡Œå®Œè¿™æ­¥ singleton å°±ä¸æ˜¯ null äº†ï¼‰ã€‚ å› ä¸ºå­˜åœ¨æŒ‡ä»¤é‡æŽ’åºçš„ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬2 æ­¥å’Œç¬¬ 3 æ­¥çš„é¡ºåºæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œé¡ºåºï¼Œå¯èƒ½æ˜¯ 1-2-3ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ 1-3-2ã€‚ å¦‚æžœæ˜¯ 1-3-2ï¼Œé‚£ä¹ˆåœ¨ç¬¬ 3 æ­¥æ‰§è¡Œå®Œä»¥åŽï¼Œsingleton å°±ä¸æ˜¯ null äº†ï¼Œå¯æ˜¯è¿™æ—¶ç¬¬ 2 æ­¥å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œsingleton å¯¹è±¡æœªå®Œæˆåˆå§‹åŒ–ï¼Œå®ƒçš„å±žæ€§çš„å€¼å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æ‰€é¢„æœŸçš„å€¼ã€‚å‡è®¾æ­¤æ—¶çº¿ç¨‹ 2 è¿›å…¥ getInstance æ–¹æ³•ï¼Œç”±äºŽ singleton å·²ç»ä¸æ˜¯ null äº†ï¼Œæ‰€ä»¥ä¼šé€šè¿‡ç¬¬ä¸€é‡if (singleton==null) æ£€æŸ¥å¹¶ç›´æŽ¥è¿”å›žï¼Œä½†å…¶å®žè¿™æ—¶çš„ singleton å¹¶æ²¡æœ‰å®Œæˆåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå®žä¾‹çš„æ—¶å€™ä¼šæŠ¥é”™. Enumæ–¹å¼å’Œå…¬æœ‰åŸŸæ–¹æ³•åœ¨åŠŸèƒ½ä¸Šç›¸è¿‘ï¼Œä½†æ˜¯æ›´ç®€æ´ï¼Œæ— å¿æä¾›äº†åºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹çš„é˜²æ­¢å¤šæ¬¡å®žä¾‹åŒ–ï¼Œå¯ä»¥é¢å¯¹å¤æ‚çš„åºåˆ—åŒ–æˆ–è€…åå°„æ”»å‡»ï¼Œè™½ç„¶æ²¡æœ‰å¹¿æ³›é‡‡ç”¨ï¼Œä½†æ˜¯ å•å…ƒç´ çš„æžšä¸¾ç±»åž‹å·²ç»æˆä¸ºå®žçŽ° Singletonçš„æœ€ä½³æ–¹æ³•. 12345678910111213141516public class Elvis_03 &#123; public static void main(String[] args) &#123; Elvis.INSTANCE.leaveTheBuilding(); &#125;&#125;/** * è¿™ç§æ–¹æ³•å¤ªNBäº†, * Effective Java pag15 */enum Elvis &#123; INSTANCE; public void leaveTheBuilding() &#123; &#125;&#125; åµŒå¥—ç±»1234567891011public class Singleton3 &#123; private Singleton3() &#123;&#125; // ä¸»è¦æ˜¯ä½¿ç”¨äº† åµŒå¥—ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€å±žæ€§å’Œé™æ€æ–¹æ³• çš„ç‰¹æ€§ private static class Holder &#123; private static Singleton3 instance = new Singleton3(); &#125; public static Singleton3 getInstance() &#123; return Holder.instance; &#125;&#125; https://juejin.im/post/5bc96afff265da0aa94a4493","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[]},{"title":"HashMap","slug":"HashMap","date":"2018-05-31T14:54:44.000Z","updated":"2023-01-02T03:31:39.076Z","comments":true,"path":"2018/05/31/HashMap/","link":"","permalink":"https://noteforme.github.io/2018/05/31/HashMap/","excerpt":"","text":"HashMapHashå‡½æ•°æ˜¯æŒ‡æŠŠâ¼€ä¸ªâ¼¤èŒƒå›´æ˜ å°„åˆ°â¼€ä¸ªâ¼©èŒƒå›´ã€‚æŠŠâ¼¤èŒƒå›´æ˜ å°„åˆ°â¼€ä¸ªâ¼©èŒƒå›´çš„â½¬çš„å¾€å¾€æ˜¯ä¸ºäº† èŠ‚çœç©ºé—´ï¼Œä½¿å¾—æ•°æ®å®¹æ˜“ä¿å­˜ã€‚ HashMapæ‰©å®¹æœºåˆ¶12345 int threshold; // æ‰€èƒ½å®¹çº³çš„key-valueå¯¹æžé™ final float loadFactor; // è´Ÿè½½å› å­ int modCount; int size; new HashMap&lt;Integer,String&gt;(2,0.75f) Node[] tableçš„åˆå§‹åŒ–é•¿åº¦length(é»˜è®¤å€¼æ˜¯16)ï¼ŒLoad factorä¸ºè´Ÿè½½å› å­(é»˜è®¤å€¼æ˜¯0.75)ï¼Œthresholdæ˜¯HashMapæ‰€èƒ½å®¹çº³çš„æœ€å¤§æ•°æ®é‡çš„Node(é”®å€¼å¯¹)ä¸ªæ•°ã€‚threshold = length * Load factorã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•°ç»„å®šä¹‰å¥½é•¿åº¦ä¹‹åŽï¼Œè´Ÿè½½å› å­è¶Šå¤§ï¼Œæ‰€èƒ½å®¹çº³çš„é”®å€¼å¯¹ä¸ªæ•°è¶Šå¤šã€‚ mapåˆå§‹åŒ–ä¸ºä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„ï¼ŒloadFactor=0.75ï¼Œthreshold=2*0.75=1ï¼Œä¹Ÿå°±æ˜¯è¯´å½“putç¬¬äºŒä¸ªkeyçš„æ—¶å€™ï¼Œmapå°±éœ€è¦è¿›è¡Œresizeã€‚ https://tech.meituan.com/2016/06/24/java-hashmap.html HashMapå’ŒHashTableçš„åŒºåˆ« HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ HashTable keyä¸èƒ½ä¸ºç©ºï¼ŒHashMapå¯ä»¥.å­˜åœ¨æ•°ç»„ä¸º0çš„ä½ç½® HashMapçš„å®žçŽ°åŽŸç† HashMapæ•°æ®ç»“æž„ï¼Ÿ JDK1.7 Tableæ•°ç»„+ Entryé“¾è¡¨ JDK1.8 Tableæ•°ç»„+ Entryé“¾è¡¨/çº¢é»‘æ ‘ï¼ˆ ä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ï¼‰ çº¢é»‘æ ‘æœ‰è‡ªå¹³è¡¡çš„ç‰¹ç‚¹ï¼Œå¯ä»¥é˜²æ­¢ä¸å¹³è¡¡æƒ…å†µçš„å‘ç”Ÿï¼Œæ‰€ä»¥å¯ä»¥å§‹ç»ˆå°†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æŽ§åˆ¶åœ¨ O(log(n)) â€‹ HashMapé‡‡ç”¨Entryæ•°ç»„å­˜æ”¾key-value,æ¯ä¸ª key valueç»„æˆä¸€ä¸ªå®žä½“ï¼ŒEntryç±»å®žé™…ä¸Šæ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨ç»“æž„ï¼Œå®ƒæœ‰nextæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ ä¸ªå®žä½“ï¼Œ 1.8ä¸­é“¾è¡¨å¤§äºŽ8æ—¶ä¼šè½¬æˆçº¢é»‘æ ‘.é•¿åº¦é™åˆ° 6 å°±è½¬æ¢å›žåŽ». â€‹ HashMapæºç ç†è§£ HashMapå¦‚ä½•putæ•°æ®ï¼ˆä»ŽHashMapæºç è§’åº¦è®²è§£ï¼‰ï¼Ÿ å¯¹keyçš„Dashcode()åšhashè¿ç®—ï¼Œè®¡ç®—index. å¦‚æžœæ²¡ç¢°æ’žç›´æŽ¥æ”¾åˆ°bucketâ¾¥ å¦‚æžœç¢°æ’žäº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåŽ å¦‚æžœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯â¼€æ€§) å¦‚æžœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resize getæ•°æ® å¯¹keyçš„hashCode()åšhashè¿ç®—ï¼Œè®¡ç®—index; å¦‚æžœåœ¨bucketâ¾¥çš„ç¬¬â¼€ä¸ªèŠ‚ç‚¹â¾¥ç›´æŽ¥å‘½ä¸­ï¼Œåˆ™ç›´æŽ¥è¿”å›žï¼› å¦‚æžœæœ‰å†²çªï¼Œåˆ™é€šè¿‡key.equals(k)åŽ»æŸ¥æ‰¾å¯¹åº”çš„Entry;åˆ†ä¸ºä¸‹é¢ä¸¤ç§æ–¹å¼. è‹¥ä¸ºæ ‘ï¼Œåˆ™åœ¨æ ‘ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(logn)ï¼› è‹¥ä¸ºé“¾è¡¨ï¼Œåˆ™åœ¨é“¾è¡¨ä¸­é€šè¿‡key.equals(k)æŸ¥æ‰¾ï¼ŒO(n)ã€‚ HashMapæ€Žä¹ˆæ‰‹å†™å®žçŽ°ï¼Ÿ https://www.jianshu.com/p/985534b21089 HashTableå®žçŽ°åŽŸç† ConcurrentHashMapçš„å®žçŽ°åŽŸç† HashTable ConcurrentHashMap åŒºåˆ«Hashtableçš„å®žçŽ°æ˜¯åŸºäºŽDictionaryæŠ½è±¡ç±»çš„ã€‚Java5æä¾›äº†ConcurrentHashMapï¼Œå®ƒæ˜¯HashTableçš„æ›¿ä»£ï¼Œæ¯”HashTableçš„æ‰©å±•æ€§æ›´å¥½ã€‚ https://www.bilibili.com/video/BV1kJ411C7hC?p=9&amp;spm_id_from=pageDriver TreeMapå…·ä½“å®žçŽ°TreeMapæ˜¯ä¸€ä¸ªæœ‰åºçš„key-valueé›†åˆï¼Œæ˜¯éžçº¿ç¨‹å®‰å…¨çš„ï¼ŒåŸºäºŽçº¢é»‘æ ‘ï¼ˆRed-Black treeï¼‰å®žçŽ°ã€‚å…¶æ˜ å°„æ ¹æ®é”®çš„è‡ªç„¶é¡ºåºè¿›è¡ŒæŽ’åºï¼Œæˆ–è€…æ ¹æ®åˆ›å»ºæ˜ å°„æ—¶æä¾›çš„ Comparator è¿›è¡ŒæŽ’åºï¼Œå…·ä½“å–å†³äºŽä½¿ç”¨çš„æž„é€ æ–¹æ³•ã€‚å…¶åŸºæœ¬æ“ä½œ containsKeyã€getã€put å’Œ remove çš„æ—¶é—´å¤æ‚åº¦æ˜¯ log(n) ã€‚TreeMapæ˜¯éžåŒæ­¥çš„ã€‚ å®ƒçš„iterator æ–¹æ³•è¿”å›žçš„è¿­ä»£å™¨æ˜¯fail-fastlçš„ã€‚ https://www.cnblogs.com/nananana/p/10426377.html HashMapä¸ŽHashSetçš„åŒºåˆ« åŸºäºŽ HashMap å®žçŽ°çš„ï¼Œåº•å±‚é‡‡ç”¨ HashMap æ¥ä¿å­˜å…ƒç´  HashSetå®žçŽ°äº†SetæŽ¥å£ï¼Œå®ƒä¸å…è®¸é›†åˆä¸­æœ‰é‡å¤çš„å€¼ HashSetä¸ŽHashMapæ€Žä¹ˆåˆ¤æ–­é›†åˆå…ƒç´ é‡å¤ï¼Ÿ l nnä¸ºä»€ä¹ˆä¸ä¸€å¼€å§‹å°±ä½¿ç”¨çº¢é»‘æ ‘å› ä¸ºçº¢â¿Šæ ‘éœ€è¦è¿›â¾å·¦æ—‹ï¼Œå³æ—‹ï¼Œå˜â¾Šè¿™äº›æ“ä½œæ¥ä¿æŒå¹³è¡¡ï¼Œâ½½å•é“¾è¡¨ä¸éœ€è¦ã€‚å½“å…ƒç´ â¼©äºŽ8ä¸ªå½“æ—¶å€™ï¼Œæ­¤æ—¶åšæŸ¥è¯¢æ“ä½œï¼Œé“¾è¡¨ç»“æž„å·²ç»èƒ½ä¿è¯æŸ¥è¯¢æ€§èƒ½ã€‚å½“å…ƒç´ â¼¤äºŽ8ä¸ªçš„æ—¶å€™ï¼Œæ­¤æ—¶éœ€è¦çº¢â¿Šæ ‘æ¥åŠ å¿«æŸ¥ è¯¢é€Ÿåº¦ï¼Œä½†æ˜¯æ–°å¢žèŠ‚ç‚¹çš„æ•ˆçŽ‡å˜æ…¢äº†ã€‚å› æ­¤ï¼Œå¦‚æžœâ¼€å¼€å§‹å°±â½¤çº¢â¿Šæ ‘ç»“æž„ï¼Œå…ƒç´ å¤ªå°‘ï¼Œæ–°å¢žæ•ˆçŽ‡â¼œâ½è¾ƒæ…¢ï¼Œâ½†ç–‘è¿™æ˜¯æµªè´¹æ€§èƒ½çš„ã€‚ ä»€ä¹ˆæ—¶å€™é€€åŒ–ä¸ºé“¾è¡¨ä¸º6çš„æ—¶å€™é€€è½¬ä¸ºé“¾è¡¨ã€‚ä¸­é—´æœ‰ä¸ªå·®å€¼7å¯ä»¥é˜²â½Œé“¾è¡¨å’Œæ ‘ä¹‹é—´é¢‘ç¹çš„è½¬æ¢ã€‚å‡è®¾â¼€ä¸‹ï¼Œå¦‚æžœè®¾è®¡æˆé“¾è¡¨ä¸ªæ•°è¶…è¿‡8åˆ™é“¾è¡¨è½¬ æ¢æˆæ ‘ç»“æž„ï¼Œé“¾è¡¨ä¸ªæ•°â¼©äºŽ8åˆ™æ ‘ç»“æž„è½¬æ¢æˆé“¾è¡¨ï¼Œå¦‚æžœâ¼€ä¸ªHashMapä¸åœçš„æ’â¼Šã€åˆ é™¤å…ƒç´ ï¼Œé“¾è¡¨ä¸ªæ•°åœ¨8å·¦å³å¾˜å¾Šï¼Œå°±ä¼š é¢‘ç¹çš„å‘â½£æ ‘è½¬é“¾è¡¨ã€é“¾è¡¨è½¬æ ‘ï¼Œæ•ˆçŽ‡ä¼šå¾ˆä½Žã€‚ https://www.youtube.com/watch?v=jwL1W8zEuX4 https://www.bilibili.com/video/BV1if4y167eE?p=4 https://zhuanlan.zhihu.com/p/127147909 https://zhuanlan.zhihu.com/p/348756860 ArrayMapArrayMapç±»æœ‰ä¸¤ä¸ªéžå¸¸é‡è¦çš„é™æ€æˆå‘˜å˜é‡mBaseCacheå’ŒmTwiceBaseCacheSizeï¼Œç”¨äºŽArrayMapæ‰€åœ¨è¿›ç¨‹çš„å…¨å±€ç¼“å­˜åŠŸèƒ½ï¼š ä¼ å…¥ArrayMap(4) æˆ–è€…ArrayMap(8),æ€§èƒ½ä¼šæœ‰å˜åŒ–å— æž„é€ æ–¹æ³•12345678910111213public ArrayMap(int capacity, boolean identityHashCode) &#123; // å¦‚æžœä¼ å…¥ä¸€ä¸ª capacity =4 mIdentityHashCode = identityHashCode; if (capacity &lt; 0) &#123; mHashes = EMPTY_IMMUTABLE_INTS; mArray = EmptyArray.OBJECT; &#125; else if (capacity == 0) &#123; mHashes = EmptyArray.INT; mArray = EmptyArray.OBJECT; &#125; else &#123; allocArrays(capacity); // èµ°åˆ°è¿™é‡Œ &#125; mSize = 0;&#125; 123456789101112131415161718192021222324252627282930313233343536private void allocArrays(final int size) &#123; if (mHashes == EMPTY_IMMUTABLE_INTS) &#123; throw new UnsupportedOperationException(&quot;ArrayMap is immutable&quot;); &#125; if (size == (BASE_SIZE*2)) &#123; synchronized (ArrayMap.class) &#123; if (mTwiceBaseCache != null) &#123; final Object[] array = mTwiceBaseCache; mArray = array; mTwiceBaseCache = (Object[])array[0]; mHashes = (int[])array[1]; array[0] = array[1] = null; mTwiceBaseCacheSize--; if (DEBUG) Log.d(TAG, &quot;Retrieving 2x cache &quot; + mHashes + &quot; now have &quot; + mTwiceBaseCacheSize + &quot; entries&quot;); return; &#125; &#125; &#125; else if (size == BASE_SIZE) &#123; // èµ°åˆ°è¿™é‡Œ synchronized (ArrayMap.class) &#123; if (mBaseCache != null) &#123; final Object[] array = mBaseCache; mArray = array; mBaseCache = (Object[])array[0]; mHashes = (int[])array[1]; array[0] = array[1] = null; mBaseCacheSize--; if (DEBUG) Log.d(TAG, &quot;Retrieving 1x cache &quot; + mHashes + &quot; now have &quot; + mBaseCacheSize + &quot; entries&quot;); return; &#125; &#125; &#125; mHashes = new int[size]; mArray = new Object[size&lt;&lt;1];&#125; https://juejin.cn/post/7049631659116888094 http://gaozhipeng.me/posts/arraymap/ http://gityuan.com/2019/01/13/arraymap/ https://www.youtube.com/watch?v=I16lz26WyzQ https://juejin.cn/post/6844904119098982414 https://juejin.cn/post/6844903762470060045 ArrayMapå’ŒHashMapçš„åŒºåˆ«ArrayMapç›¸æ¯”ä¼ ç»Ÿçš„HashMapé€Ÿåº¦æ›´æ…¢ï¼Œå› ä¸ºå…¶æŸ¥æ‰¾æ–¹æ³•æ˜¯äºŒåˆ†æ³•ï¼Œå¹¶ä¸”å½“åˆ é™¤æˆ–æ·»åŠ æ•°æ®æ—¶ï¼Œä¼šå¯¹ç©ºé—´é‡æ–°è°ƒæ•´ï¼Œå¯ä»¥è¯´ArrayMapæ˜¯ç‰ºç‰²äº†æ—¶é—´æ¥æ¢ç©ºé—´ï¼ŒArrayMapä¸ŽHashMapçš„åŒºåˆ«ä¸»è¦åœ¨ï¼š å­˜å‚¨æ–¹å¼ä¸åŒï¼šHashMapå†…éƒ¨æœ‰ä¸€ä¸ªHashMapEntry&lt;K,V&gt;[ ]å¯¹è±¡ï¼Œè€ŒArrayMapæ˜¯ä¸€ä¸ª&lt;key,value&gt;æ˜ å°„çš„æ•°æ®ç»“æž„ï¼Œå†…éƒ¨ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œä¸€ä¸ªæ•°ç»„è®°å½•keyçš„hashå€¼ï¼Œå¦ä¸€ä¸ªæ•°ç»„è®°å½•valueå€¼ã€‚ æ·»åŠ æ•°æ®æ—¶æ‰©å®¹çš„å¤„ç†ä¸ä¸€æ ·ï¼šHashMapè¿›è¡Œäº†newæ“ä½œï¼Œé‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œå¼€é”€å¾ˆå¤§ï¼Œè€ŒArrayMapç”¨çš„æ˜¯copyæ•°æ®ï¼Œæ•ˆçŽ‡ç›¸å¯¹é«˜å¾ˆå¤šã€‚ ArrayMapæä¾›äº†æ•°ç»„æ”¶ç¼©çš„åŠŸèƒ½ï¼Œåœ¨clearæˆ–removeä¹‹åŽï¼Œä¼šé‡æ–°æ”¶ç¼©æ•°ç»„ï¼Œé‡Šæ”¾ç©ºé—´ã€‚ ArrayMapé‡‡ç”¨çš„æ˜¯äºŒåˆ†æ³•æŸ¥æ‰¾ã€‚ https://juejin.cn/post/7049631659116888094 SparseArray keyæ˜¯intç±»åž‹çš„Mapï¼ŒAndroidå†æ¬¡æä¾›æ•ˆçŽ‡æ›´é«˜çš„æ•°æ®ç»“æž„SparseArrayï¼Œå¯é¿å…è‡ªåŠ¨è£…ç®±è¿‡ç¨‹,SparseArrayä¸éœ€è¦ä¿å­˜keyæ‰€å¯¹åº”çš„å“ˆå¸Œå€¼ï¼Œæ‰€ä»¥æ¯”ArrayMapè¿˜èƒ½å†èŠ‚çœ1/3çš„å†…å­˜ã€‚ SparseArrayæž„é€ mKeys mValuesä¸¤ä¸ªæ•°ç»„ï¼Œé»˜è®¤é•¿åº¦10ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰initialCapacity 12345678910public SparseArray(int initialCapacity) &#123; if (initialCapacity == 0) &#123; mKeys = EmptyArray.INT; mValues = EmptyArray.OBJECT; &#125; else &#123; mValues = ArrayUtils.newUnpaddedObjectArray(initialCapacity); mKeys = new int[mValues.length]; &#125; mSize = 0; &#125; 12345678910111213141516171819202122232425262728public void put(int key, E value) &#123; // äºŒåˆ†æŸ¥æ‰¾,keyåœ¨mKeysåˆ—è¡¨ä¸­å¯¹åº”çš„index,æ³¨æ„binarySearchè¿”å›žåšäº† ~æ“ä½œ. //å¦‚æžœæ²¡æ‰¾åˆ°ï¼Œè¿”å›žçš„æ˜¯å½“å‰å…ƒç´ å°†è¦æ’å…¥çš„ä½ç½® int i = ContainerHelpers.binarySearch(mKeys, mSize, key); if (i &gt;= 0) &#123; mValues[i] = value; //æ‰¾åˆ°åŽç»™å¯¹åº”çš„valueæ•°ç»„èµ‹å€¼ &#125; else &#123; i = ~i; if (i &lt; mSize &amp;&amp; mValues[i] == DELETED) &#123; mKeys[i] = key; mValues[i] = value; return; &#125; if (mGarbage &amp;&amp; mSize &gt;= mKeys.length) &#123; gc(); // Search again because indices may have changed. i = ~ContainerHelpers.binarySearch(mKeys, mSize, key); &#125; //æ’å…¥æ•°æ®ï¼Œå†…éƒ¨åšäº†æŽ’åº mKeys = GrowingArrayUtils.insert(mKeys, mSize, i, key); mValues = GrowingArrayUtils.insert(mValues, mSize, i, value); mSize++; &#125;&#125; 123456789public void delete(int key) &#123; int i = ContainerHelpers.binarySearch(mKeys, mSize, key); if (i &gt;= 0) &#123; if (mValues[i] != DELETED) &#123; mValues[i] = DELETED; //æ ‡è®°è¯¥æ•°æ®ä¸ºDELETE mGarbage = true; // è®¾ç½®å­˜åœ¨GC &#125; &#125;&#125; https://blog.csdn.net/zxt0601/article/details/78333328 http://www.jcodecraeer.com/a/anzhuokaifa/2017/0912/8504.html","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"Concurrency_Locking","slug":"Concurrency_Locking","date":"2018-05-24T14:31:57.000Z","updated":"2025-03-10T00:48:40.100Z","comments":true,"path":"2018/05/24/Concurrency_Locking/","link":"","permalink":"https://noteforme.github.io/2018/05/24/Concurrency_Locking/","excerpt":"","text":"é”çš„7å¤§ç±»åå‘é”&#x2F;è½»é‡çº§é”&#x2F;é‡é‡çº§é”ï¼› åå‘é” â€‹ å¦‚æžœè‡ªå§‹è‡³ç»ˆï¼Œå¯¹äºŽè¿™æŠŠé”éƒ½ä¸å­˜åœ¨ç«žäº‰ï¼Œé‚£ä¹ˆå…¶å®žå°±æ²¡å¿…è¦ä¸Šé”ï¼Œåªéœ€è¦æ‰“ä¸ªæ ‡è®°å°±è¡Œäº†ï¼Œè¿™å°±æ˜¯åå‘é”çš„æ€æƒ³ã€‚ è½»é‡çº§é” â€‹ JVM å¼€å‘è€…å‘çŽ°åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œsynchronized ä¸­çš„ä»£ç æ˜¯è¢«å¤šä¸ªçº¿ç¨‹äº¤æ›¿æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åŒæ—¶æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶ä¸å­˜åœ¨å®žé™…çš„ ç«žäº‰ï¼Œæˆ–è€…æ˜¯åªæœ‰çŸ­æ—¶é—´çš„é”ç«žäº‰ï¼Œç”¨ CAS å°±å¯ä»¥è§£å†³ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œç”¨å®Œå…¨äº’æ–¥çš„é‡é‡çº§é”æ˜¯æ²¡å¿…è¦çš„ã€‚ é‡é‡çº§é” â€‹ é‡é‡çº§é”æ˜¯äº’æ–¥é”ï¼Œå®ƒæ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„åŒæ­¥æœºåˆ¶å®žçŽ°çš„ï¼Œæ‰€ä»¥å¼€é”€ç›¸å¯¹æ¯”è¾ƒå¤§ã€‚å½“å¤šä¸ªçº¿ç¨‹ç›´æŽ¥æœ‰å®žé™…ç«žäº‰ï¼Œä¸”é”ç«žäº‰æ—¶é—´é•¿çš„æ—¶å€™ï¼Œè½»é‡çº§é”ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œé”å°±ä¼šè†¨èƒ€ä¸ºé‡é‡çº§é”ã€‚é‡é‡çº§é”ä¼šè®©å…¶ä»–ç”³è¯·å´æ‹¿ä¸åˆ°é”çš„çº¿ç¨‹è¿›å…¥é˜»å¡žçŠ¶æ€ã€‚ é”å‡çº§ synchronizedé”å‡çº§ åå‘é”ï¼š markwordè®°å½•è¿™ä¸ªçº¿ç¨‹ID -ã€‹å¦‚æžœçº¿ç¨‹äº‰ç”¨å‡çº§ä¸ºè‡ªæ—‹é” -ã€‹10æ¬¡ä»¥åŽå‡çº§ä¸ºé‡é‡çº§é” synchronizedçš„monitor é”åŒæ­¥ä»£ç å—1234567public class SynTest &#123; public void synBlock() &#123; synchronized (this) &#123; System.out.println(&quot;lagou&quot;); &#125; &#125;&#125; åç¼–è¯‘åŽçš„å­—èŠ‚ç  123456789101112131415161718192021public void synBlock(); descriptor: ()V flags: ACC_PUBLIC Code: stack=2, locals=3, args_size=1 0: aload_0 1: dup 2: astore_1 3: monitorenter 4: getstatic #2 // Field java/lang/System.out:Ljava/io/PrintStream; 7: ldc #3 // String lagou 9: invokevirtual #4 // Method java/io/PrintStream.println:(Ljava/lang/String;)V 12: aload_1 13: monitorexit 14: goto 22 17: astore_2 18: aload_1 19: monitorexit 20: aload_2 21: athrow 22: return synchronized ä»£ç å—å®žé™…ä¸Šå¤šäº† monitorenter å’Œ monitorexit æŒ‡ä»¤ï¼Œæ ‡çº¢çš„ç¬¬3ã€13ã€19è¡ŒæŒ‡ä»¤åˆ†åˆ«å¯¹åº”çš„æ˜¯ monitorenter å’Œ monitorexit.å¯ä»¥æŠŠæ‰§è¡Œ monitorenter ç†è§£ä¸ºåŠ é”ï¼Œæ‰§è¡Œ monitorexit ç†è§£ä¸ºé‡Šæ”¾é”ï¼Œæ¯ä¸ªå¯¹è±¡ç»´æŠ¤ç€ä¸€ä¸ªè®°å½•ç€è¢«é”æ¬¡æ•°çš„è®¡æ•°å™¨ã€‚æœªè¢«é”å®šçš„å¯¹è±¡çš„è¯¥è®¡æ•°å™¨ä¸º 0ã€‚ monitorenter æ‰§è¡Œ monitorenter çš„çº¿ç¨‹å°è¯•èŽ·å¾— monitor çš„æ‰€æœ‰æƒï¼Œä¼šå‘ç”Ÿä»¥ä¸‹è¿™ä¸‰ç§æƒ…å†µä¹‹ä¸€ï¼š a. å¦‚æžœè¯¥ monitor çš„è®¡æ•°ä¸º 0ï¼Œåˆ™çº¿ç¨‹èŽ·å¾—è¯¥ monitor å¹¶å°†å…¶è®¡æ•°è®¾ç½®ä¸º 1ã€‚ç„¶åŽï¼Œè¯¥çº¿ç¨‹å°±æ˜¯è¿™ä¸ª monitor çš„æ‰€æœ‰è€…ã€‚ b. å¦‚æžœçº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ª monitor ï¼Œåˆ™å®ƒå°†é‡æ–°è¿›å…¥ï¼Œå¹¶ä¸”ç´¯åŠ è®¡æ•°ã€‚ c. å¦‚æžœå…¶ä»–çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ª monitorï¼Œé‚£ä¸ªè¿™ä¸ªçº¿ç¨‹å°±ä¼šè¢«é˜»å¡žï¼Œç›´åˆ°è¿™ä¸ª monitor çš„è®¡æ•°å˜æˆä¸º 0ï¼Œä»£è¡¨è¿™ä¸ª monitor å·²ç»è¢«é‡Šæ”¾äº†ï¼ŒäºŽæ˜¯å½“å‰è¿™ä¸ªçº¿ç¨‹å°±ä¼šå†æ¬¡å°è¯•èŽ·å–è¿™ä¸ª monitorã€‚ monitorexitmonitorexit çš„ä½œç”¨æ˜¯å°† monitor çš„è®¡æ•°å™¨å‡ 1ï¼Œç›´åˆ°å‡ä¸º 0 ä¸ºæ­¢ã€‚ä»£è¡¨è¿™ä¸ª monitor å·²ç»è¢«é‡Šæ”¾äº†ï¼Œå·²ç»æ²¡æœ‰ä»»ä½•çº¿ç¨‹æ‹¥æœ‰å®ƒäº†ï¼Œä¹Ÿå°±ä»£è¡¨ç€è§£é”ï¼Œæ‰€ä»¥ï¼Œå…¶ä»–æ­£åœ¨ç­‰å¾…è¿™ä¸ª monitor çš„çº¿ç¨‹ï¼Œæ­¤æ—¶ä¾¿å¯ä»¥å†æ¬¡å°è¯•èŽ·å–è¿™ä¸ª monitor çš„æ‰€æœ‰æƒã€‚ ä»Žä¸Šé¢ä¹Ÿå¯çœ‹åˆ° synchronizedæ˜¯å¯é‡å…¥é” synchronized æ–¹æ³•â€‹ åŒæ­¥ä»£ç å—æ˜¯ä½¿ç”¨ monitorenter å’Œ monitorexit æŒ‡ä»¤å®žçŽ°çš„ã€‚è€Œå¯¹äºŽ synchronized æ–¹æ³•ï¼Œå¹¶ä¸æ˜¯ä¾é  monitorenter å’Œ monitorexit æŒ‡ä»¤å®žçŽ°çš„ï¼Œè¢« javap åæ±‡ç¼–åŽå¯ä»¥çœ‹åˆ°ï¼Œsynchronized æ–¹æ³•å’Œæ™®é€šæ–¹æ³•å¤§éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒåœ¨äºŽï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæœ‰ä¸€ä¸ªå«ä½œ ACC_SYNCHRONIZED çš„ flag ä¿®é¥°ç¬¦ï¼Œæ¥è¡¨æ˜Žå®ƒæ˜¯åŒæ­¥æ–¹æ³•ã€‚ 123public synchronized void method() &#123; method body&#125; åç¼–è¯‘åŽçš„æŒ‡ä»¤ 123456789101112131415 public synchronized void synMethod(); descriptor: ()V flags: ACC_PUBLIC, ACC_SYNCHRONIZED Code: stack=0, locals=1, args_size=1 0: return LineNumberTable: line 16: 0 è¢« synchronized ä¿®é¥°çš„æ–¹æ³•ä¼šæœ‰ä¸€ä¸ª ACC_SYNCHRONIZED æ ‡å¿—ã€‚å½“æŸä¸ªçº¿ç¨‹è¦è®¿é—®æŸä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šé¦–å…ˆæ£€æŸ¥æ–¹æ³•æ˜¯å¦æœ‰ ACC_SYNCHRONIZED æ ‡å¿—ï¼Œå¦‚æžœæœ‰åˆ™éœ€è¦å…ˆèŽ·å¾— monitor é”ï¼Œç„¶åŽæ‰èƒ½å¼€å§‹æ‰§è¡Œæ–¹æ³•ï¼Œæ–¹æ³•æ‰§è¡Œä¹‹åŽå†é‡Šæ”¾ monitor é”ã€‚å…¶ä»–æ–¹é¢ï¼Œ synchronized æ–¹æ³•å’Œåˆšæ‰çš„ synchronized ä»£ç å—æ˜¯å¾ˆç±»ä¼¼çš„ï¼Œä¾‹å¦‚è¿™æ—¶å¦‚æžœå…¶ä»–çº¿ç¨‹æ¥è¯·æ±‚æ‰§è¡Œæ–¹æ³•ï¼Œä¹Ÿä¼šå› ä¸ºæ— æ³•èŽ·å¾— monitor é”è€Œè¢«é˜»å¡žã€‚ synchronized å’Œ Locké€‰æ‹© å¦‚æžœèƒ½ä¸ç”¨æœ€å¥½æ—¢ä¸ä½¿ç”¨ Lock ä¹Ÿä¸ä½¿ç”¨ synchronizedã€‚å› ä¸ºåœ¨è®¸å¤šæƒ…å†µä¸‹ä½ å¯ä»¥ä½¿ç”¨ java.util.concurrent åŒ…ä¸­çš„æœºåˆ¶ï¼Œå®ƒä¼šä¸ºä½ å¤„ç†æ‰€æœ‰çš„åŠ é”å’Œè§£é”æ“ä½œï¼Œä¹Ÿå°±æ˜¯æŽ¨èä¼˜å…ˆä½¿ç”¨å·¥å…·ç±»æ¥åŠ è§£é”ã€‚ å¦‚æžœ synchronized å…³é”®å­—é€‚åˆä½ çš„ç¨‹åºï¼Œ é‚£ä¹ˆè¯·å°½é‡ä½¿ç”¨å®ƒï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç¼–å†™ä»£ç çš„æ•°é‡ï¼Œå‡å°‘å‡ºé”™çš„æ¦‚çŽ‡ã€‚å› ä¸ºä¸€æ—¦å¿˜è®°åœ¨ finally é‡Œ unlockï¼Œä»£ç å¯èƒ½ä¼šå‡ºå¾ˆå¤§çš„é—®é¢˜ï¼Œè€Œä½¿ç”¨ synchronized æ›´å®‰å…¨ã€‚ å¦‚æžœç‰¹åˆ«éœ€è¦ Lock çš„ç‰¹æ®ŠåŠŸèƒ½ï¼Œæ¯”å¦‚å°è¯•èŽ·å–é”ã€å¯ä¸­æ–­ã€è¶…æ—¶åŠŸèƒ½ç­‰ï¼Œæ‰ä½¿ç”¨ Lockã€‚ Lock12345678public interface Lock &#123; void lock(); void lockInterruptibly() throws InterruptedException; boolean tryLock(); boolean tryLock(long time, TimeUnit unit) throws InterruptedException; void unlock(); Condition newCondition();&#125; lock() lock() æ˜¯æœ€åŸºç¡€çš„èŽ·å–é”çš„æ–¹æ³•,èŽ·å–é”å’Œé‡Šæ”¾é”éƒ½æ˜¯æ˜¾å¼çš„ï¼Œä¸åƒ synchronized é‚£æ ·æ˜¯éšå¼çš„ï¼Œæ‰€ä»¥ Lock ä¸ä¼šåƒ synchronized ä¸€æ ·åœ¨å¼‚å¸¸æ—¶è‡ªåŠ¨é‡Šæ”¾é”ï¼ˆsynchronized å³ä½¿ä¸å†™å¯¹åº”çš„ä»£ç ä¹Ÿå¯ä»¥é‡Šæ”¾ï¼‰,ä½¿ç”¨ lock() æ—¶å¿…é¡»ç”±æˆ‘ä»¬è‡ªå·±ä¸»åŠ¨åŽ»é‡Šæ”¾é”ï¼Œå› æ­¤æœ€ä½³å®žè·µæ˜¯æ‰§è¡Œ lock() åŽï¼Œé¦–å…ˆåœ¨ try{} ä¸­æ“ä½œåŒæ­¥èµ„æºï¼Œå¦‚æžœæœ‰å¿…è¦å°±ç”¨ catch{} å—æ•èŽ·å¼‚å¸¸ï¼Œç„¶åŽåœ¨ finally{} ä¸­é‡Šæ”¾é”ï¼Œä»¥ä¿è¯å‘ç”Ÿå¼‚å¸¸æ—¶é”ä¸€å®šè¢«é‡Šæ”¾. 12345678Lock lock = ...;lock.lock();try&#123; //èŽ·å–åˆ°äº†è¢«æœ¬é”ä¿æŠ¤çš„èµ„æºï¼Œå¤„ç†ä»»åŠ¡ //æ•èŽ·å¼‚å¸¸&#125;finally&#123; lock.unlock(); //é‡Šæ”¾é”&#125; tryLock() â€‹ å°è¯•èŽ·å–é”ï¼Œå¦‚æžœå½“å‰é”æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œåˆ™èŽ·å–æˆåŠŸï¼Œè¿”å›ž trueï¼Œå¦åˆ™è¿”å›ž falseï¼Œä»£è¡¨èŽ·å–é”å¤±è´¥ã€‚è¯¥æ–¹æ³•ä¼šç«‹å³è¿”å›žï¼Œå³ä¾¿åœ¨æ‹¿ä¸åˆ°é”æ—¶ä¹Ÿä¸ä¼šä¸€ç›´ç­‰å¾…ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨ if è¯­å¥åˆ¤æ–­ tryLock() çš„è¿”å›žç»“æžœ. 12345678910Lock lock = ...;if(lock.tryLock()) &#123; try&#123; //å¤„ç†ä»»åŠ¡ &#125;finally&#123; lock.unlock(); //é‡Šæ”¾é” &#125; &#125;else &#123; //å¦‚æžœä¸èƒ½èŽ·å–é”ï¼Œåˆ™åšå…¶ä»–äº‹æƒ…&#125; è¿™ä¸ªæ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„è§£å†³æ­»é”é—®é¢˜ 1234567891011121314151617181920public void tryLock(Lock lock1, Lock lock2) throws InterruptedException &#123; while (true) &#123; if (lock1.tryLock()) &#123; try &#123; if (lock2.tryLock()) &#123; try &#123; System.out.println(&quot;èŽ·å–åˆ°äº†ä¸¤æŠŠé”ï¼Œå®Œæˆä¸šåŠ¡é€»è¾‘&quot;); return; &#125; finally &#123; lock2.unlock(); &#125; &#125; &#125; finally &#123; lock1.unlock(); &#125; &#125; else &#123; Thread.sleep(new Random().nextInt(1000)); &#125; &#125; &#125; å¦‚æžœä»£ç ä¸­æˆ‘ä»¬ä¸ç”¨ tryLock() æ–¹æ³•,æ¯”å¦‚æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼ å…¥çš„ lock1 å’Œ lock2 æ°å¥½æ˜¯ç›¸åçš„ï¼Œé‚£ä¹ˆå¦‚æžœç¬¬ä¸€ä¸ªçº¿ç¨‹èŽ·å–äº† lock1 çš„åŒæ—¶ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹èŽ·å–äº† lock2ï¼Œå®ƒä»¬æŽ¥ä¸‹æ¥ä¾¿ä¼šå°è¯•èŽ·å–å¯¹æ–¹æŒæœ‰çš„é‚£æŠŠé”ï¼Œä½†æ˜¯åˆèŽ·å–ä¸åˆ°ï¼ŒäºŽæ˜¯ä¾¿ä¼šé™·å…¥æ­»é”ï¼Œä½¿ç”¨tryLock()åŽï¼Œå¦‚æžœèŽ·å–åˆ°äº† lock1 ä½†æ²¡æœ‰èŽ·å–åˆ° lock2ï¼Œé‚£ä¹ˆä¹Ÿä¼šé‡Šæ”¾æŽ‰ lock1 tryLock(long time, TimeUnit unit) ä½¿ç”¨ tryLock(long time, TimeUnit unit) æ—¶ï¼Œåœ¨ç­‰å¾…äº†ä¸€æ®µæŒ‡å®šçš„è¶…æ—¶æ—¶é—´åŽï¼Œçº¿ç¨‹ä¼šä¸»åŠ¨æ”¾å¼ƒè¿™æŠŠé”çš„èŽ·å–ï¼Œé¿å…æ°¸ä¹…ç­‰å¾…ï¼›åœ¨ç­‰å¾…çš„æœŸé—´ï¼Œä¹Ÿå¯ä»¥éšæ—¶ä¸­æ–­çº¿ç¨‹ï¼Œè¿™å°±é¿å…äº†æ­»é”çš„å‘ç”Ÿã€‚ lockInterruptibly() å¦‚æžœè¿™ä¸ªé”å½“å‰æ˜¯å¯ä»¥èŽ·å¾—çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•ä¼šç«‹åˆ»è¿”å›ž,ï¼Œä½†æ˜¯å¦‚æžœè¿™ä¸ªé”å½“å‰æ˜¯ä¸èƒ½èŽ·å¾—çš„ï¼ˆè¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ï¼‰ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹ä¾¿ä¼šå¼€å§‹ç­‰å¾…ï¼Œé™¤éžå®ƒç­‰åˆ°äº†è¿™æŠŠé”æˆ–è€…æ˜¯åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­è¢«Threadçš„interrupt()æ–¹æ³•ä¸­æ–­äº†ï¼Œå¦åˆ™è¿™ä¸ªçº¿ç¨‹ä¾¿ä¼šä¸€ç›´åœ¨è¿™é‡Œæ‰§è¡Œè¿™è¡Œä»£ç ã€‚ä¸€ç›´å°è¯•èŽ·å–ç›´åˆ°èŽ·å–åˆ°ä¸ºæ­¢ã€‚ ç›¸æ¯”äºŽä¸èƒ½å“åº”ä¸­æ–­çš„ synchronized é”ï¼ŒlockInterruptibly() å¯ä»¥è®©ç¨‹åºæ›´çµæ´»ï¼Œå¯ä»¥åœ¨èŽ·å–é”çš„åŒæ—¶ï¼Œä¿æŒå¯¹ä¸­æ–­çš„å“åº”ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ–¹æ³•ç†è§£ä¸ºè¶…æ—¶æ—¶é—´æ˜¯æ— ç©·é•¿çš„ tryLock(long time, TimeUnit unit)ï¼Œå› ä¸º tryLock(long time, TimeUnit unit) å’Œ lockInterruptibly() éƒ½èƒ½å“åº”ä¸­æ–­ï¼Œåªä¸è¿‡ lockInterruptibly() æ°¸è¿œä¸ä¼šè¶…æ—¶ã€‚ 123456789101112public void lockInterruptibly() &#123; try &#123; lock.lockInterruptibly(); try &#123; System.out.println(&quot;æ“ä½œèµ„æº&quot;); &#125; finally &#123; lock.unlock(); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; unlock() æœ€åŽè¦ä»‹ç»çš„æ–¹æ³•æ˜¯ unlock() æ–¹æ³•ï¼Œæ˜¯ç”¨äºŽè§£é”çš„ï¼Œuæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå¯¹äºŽ ReentrantLock è€Œè¨€ï¼Œæ‰§è¡Œ unlock() çš„æ—¶å€™ï¼Œå†…éƒ¨ä¼šæŠŠé”çš„â€œè¢«æŒæœ‰è®¡æ•°å™¨â€å‡ 1ï¼Œç›´åˆ°å‡åˆ° 0 å°±ä»£è¡¨å½“å‰è¿™æŠŠé”å·²ç»å®Œå…¨é‡Šæ”¾äº†ï¼Œå¦‚æžœå‡ 1 åŽè®¡æ•°å™¨ä¸ä¸º 0ï¼Œè¯´æ˜Žè¿™æŠŠé”ä¹‹å‰è¢«â€œé‡å…¥â€äº†ï¼Œé‚£ä¹ˆé”å¹¶æ²¡æœ‰çœŸæ­£é‡Šæ”¾ï¼Œä»…ä»…æ˜¯å‡å°‘äº†æŒæœ‰çš„æ¬¡æ•°ã€‚ https://www.yinxiang.com/everhub/note/c27d346d-ed4d-4e7b-aef9-0b501a44deb7 https://www.bilibili.com/video/BV1NT4y1G7WE?p=5 https://www.bilibili.com/video/BV1qE411q7fk?p=10 https://www.cnblogs.com/aspirant/p/11470858.html å¯é‡å…¥é”&#x2F;éžå¯é‡å…¥é”ï¼›â€‹ å¯é‡å…¥é” ï¼š å¯é‡å…¥é”æŒ‡çš„æ˜¯çº¿ç¨‹å½“å‰å·²ç»æŒæœ‰è¿™æŠŠé”äº†ï¼Œèƒ½åœ¨ä¸é‡Šæ”¾è¿™æŠŠé”çš„æƒ…å†µä¸‹ï¼Œå†æ¬¡èŽ·å–è¿™æŠŠé”ã€‚ â€‹ synchronizedæ˜¯å¯å†²å…¥é” 12345678910111213141516171819202122232425public class T &#123; synchronized void m1()&#123; System.out.println(&quot;m1 start&quot;); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; m2(); System.out.println(&quot;m1 end&quot;); &#125; private void m2() &#123; try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(&quot;m2&quot;); &#125; public static void main(String[] args) &#123; new T().m1(); &#125;&#125; è¿è¡Œç»“æžœ 123m1 startm2m1 end å¦‚æžœsynchronizedä¸æ˜¯å¯é‡å…¥é”ï¼Œæ‰§è¡Œm1()æ‰§è¡Œm2()ä¼šå‘ç”Ÿæ­»é”, ä¸ºä»€ä¹ˆsynchronizedå¿…é¡»æ˜¯å¯é‡å…¥é”å‘¢? å¦‚æžœçˆ¶ç±»m2()æ˜¯synchronizedæ–¹æ³•,å­ç±»é‡å†™m2()æ–¹æ³•ï¼Œè°ƒç”¨å­ç±»m2(),æŽ¥ç€è°ƒç”¨super.m2()å°±ä¼šå‘ç”Ÿæ­»é” å…±äº«é”&#x2F;ç‹¬å é” å…±äº«é” å…±äº«é”æŒ‡çš„æ˜¯æˆ‘ä»¬åŒä¸€æŠŠé”å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶èŽ·å¾— ç‹¬å é” è¿™æŠŠé”åªèƒ½åŒæ—¶è¢«ä¸€ä¸ªçº¿ç¨‹èŽ·å¾— è¯»å†™é”å°±æœ€å¥½åœ°è¯ é‡Šäº†å…±äº«é”å’Œç‹¬å é”çš„ç†å¿µã€‚è¯»å†™é”ä¸­çš„è¯»é”ï¼Œæ˜¯å…±äº«é”ï¼Œè€Œå†™é”æ˜¯ç‹¬å é”ã€‚è¯»é”å¯ä»¥è¢«åŒæ—¶è¯»ï¼Œå¯ä»¥åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹æŒæœ‰ï¼Œè€Œå†™é”æœ€å¤šåªèƒ½åŒæ—¶è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚ æ•´ä½“æ€è·¯æ˜¯å®ƒæœ‰ä¸¤æŠŠé”ï¼Œç¬¬ 1 æŠŠé”æ˜¯å†™é”ï¼ŒèŽ·å¾—å†™é”ä¹‹åŽï¼Œæ—¢å¯ä»¥è¯»æ•°æ®åˆå¯ä»¥ä¿®æ”¹æ•°æ®ï¼Œè€Œç¬¬ 2 æŠŠé”æ˜¯è¯»é”ï¼ŒèŽ·å¾—è¯»é”ä¹‹åŽï¼Œåªèƒ½æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚è¯»é”å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶æŒæœ‰ï¼Œæ‰€ä»¥å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æŸ¥çœ‹æ•°æ®ã€‚ æˆ‘ä»¬åœ¨ä½¿ç”¨è¯»å†™é”æ—¶éµå®ˆä¸‹é¢çš„èŽ·å–è§„åˆ™ï¼š å¦‚æžœæœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»å ç”¨äº†è¯»é”ï¼Œåˆ™æ­¤æ—¶å…¶ä»–çº¿ç¨‹å¦‚æžœè¦ç”³è¯·è¯»é”ï¼Œå¯ä»¥ç”³è¯·æˆåŠŸã€‚ å¦‚æžœæœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»å ç”¨äº†è¯»é”ï¼Œåˆ™æ­¤æ—¶å…¶ä»–çº¿ç¨‹å¦‚æžœè¦ç”³è¯·å†™é”ï¼Œåˆ™ç”³è¯·å†™é”çš„çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…é‡Šæ”¾è¯»é”ï¼Œå› ä¸ºè¯»å†™ä¸èƒ½åŒæ—¶æ“ä½œã€‚ å¦‚æžœæœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»å ç”¨äº†å†™é”ï¼Œåˆ™æ­¤æ—¶å…¶ä»–çº¿ç¨‹å¦‚æžœç”³è¯·å†™é”æˆ–è€…è¯»é”ï¼Œéƒ½å¿…é¡»ç­‰å¾…ä¹‹å‰çš„çº¿ç¨‹é‡Šæ”¾å†™é”ï¼ŒåŒæ ·ä¹Ÿå› ä¸ºè¯»å†™ä¸èƒ½åŒæ—¶ï¼Œå¹¶ä¸”ä¸¤ä¸ªçº¿ç¨‹ä¸åº”è¯¥åŒæ—¶å†™ã€‚ æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€å¥è¯æ€»ç»“ï¼šè¦ä¹ˆæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹åŒæ—¶æœ‰è¯»é”ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªçº¿ç¨‹æœ‰å†™é”ï¼Œä½†æ˜¯ä¸¤è€…ä¸ä¼šåŒæ—¶å‡ºçŽ°ã€‚ä¹Ÿå¯ä»¥æ€»ç»“ä¸ºï¼šè¯»è¯»å…±äº«ã€å…¶ä»–éƒ½äº’æ–¥ï¼ˆå†™å†™äº’æ–¥ã€è¯»å†™äº’æ–¥ã€å†™è¯»äº’æ–¥ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * æè¿°ï¼š æ¼”ç¤ºè¯»å†™é”ç”¨æ³• */public class ReadWriteLockDemo &#123; private static final ReentrantReadWriteLock reentrantReadWriteLock = new ReentrantReadWriteLock( false); private static final ReentrantReadWriteLock.ReadLock readLock = reentrantReadWriteLock .readLock(); private static final ReentrantReadWriteLock.WriteLock writeLock = reentrantReadWriteLock .writeLock(); private static void read() &#123; readLock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;å¾—åˆ°è¯»é”ï¼Œæ­£åœ¨è¯»å–&quot;); Thread.sleep(500); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; System.out.println(Thread.currentThread().getName() + &quot;é‡Šæ”¾è¯»é”&quot;); readLock.unlock(); &#125; &#125; private static void write() &#123; writeLock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;å¾—åˆ°å†™é”ï¼Œæ­£åœ¨å†™å…¥&quot;); Thread.sleep(500); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; System.out.println(Thread.currentThread().getName() + &quot;é‡Šæ”¾å†™é”&quot;); writeLock.unlock(); &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; new Thread(() -&gt; read()).start(); new Thread(() -&gt; read()).start(); new Thread(() -&gt; write()).start(); new Thread(() -&gt; write()).start(); &#125;&#125; è¿è¡Œç»“æžœ 12345678Thread-0å¾—åˆ°è¯»é”ï¼Œæ­£åœ¨è¯»å–Thread-1å¾—åˆ°è¯»é”ï¼Œæ­£åœ¨è¯»å–Thread-0é‡Šæ”¾è¯»é”Thread-1é‡Šæ”¾è¯»é”Thread-2å¾—åˆ°å†™é”ï¼Œæ­£åœ¨å†™å…¥Thread-2é‡Šæ”¾å†™é”Thread-3å¾—åˆ°å†™é”ï¼Œæ­£åœ¨å†™å…¥Thread-3é‡Šæ”¾å†™é” è¯»é”å¯ä»¥åŒæ—¶è¢«å¤šä¸ªçº¿ç¨‹èŽ·å¾—ï¼Œè€Œå†™é”ä¸èƒ½ã€‚ ä¸ºä»€ä¹ˆè¦å¯¹è¯»åŠ é” : è¯»æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒåŠ è¯»é”ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©å†™é”æ„ŸçŸ¥åˆ°ï¼Œåœ¨æœ‰äººè¯»å–çš„æ—¶å€™ï¼Œä¸è¦åŒæ—¶å†™å…¥ã€‚ ReentrantReadWriteLockTest.java 1234567891011121314151617181920212223242526272829303132333435private static ReentrantReadWriteLock reentrantLock = new ReentrantReadWriteLock();private static ReentrantReadWriteLock.ReadLock readLock = reentrantLock.readLock();private static ReentrantReadWriteLock.WriteLock writeLock = reentrantLock.writeLock();public static void read() &#123; readLock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;èŽ·å–è¯»é”ï¼Œå¼€å§‹æ‰§è¡Œ&quot;); Thread.sleep(2000); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; readLock.unlock(); System.out.println(Thread.currentThread().getName() + &quot;é‡Šæ”¾è¯»é”&quot;); &#125;&#125;public static void write() &#123; writeLock.lock(); try &#123; System.out.println(Thread.currentThread().getName() + &quot;èŽ·å–å†™é”ï¼Œå¼€å§‹æ‰§è¡Œ&quot;); Thread.sleep(2000); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; writeLock.unlock(); System.out.println(Thread.currentThread().getName() + &quot;é‡Šæ”¾å†™é”&quot;); &#125;&#125;public static void main(String[] args) &#123; new Thread(() -&gt; read(), &quot;Thread1&quot;).start(); new Thread(() -&gt; read(), &quot;Thread2&quot;).start(); new Thread(() -&gt; write(), &quot;Thread3&quot;).start(); new Thread(() -&gt; write(), &quot;Thread4&quot;).start();&#125; è¿è¡Œç»“æžœ: Thread1èŽ·å–è¯»é”ï¼Œå¼€å§‹æ‰§è¡ŒThread2èŽ·å–è¯»é”ï¼Œå¼€å§‹æ‰§è¡ŒThread1é‡Šæ”¾è¯»é”Thread2é‡Šæ”¾è¯»é”Thread3èŽ·å–å†™é”ï¼Œå¼€å§‹æ‰§è¡ŒThread3é‡Šæ”¾å†™é”Thread4èŽ·å–å†™é”ï¼Œå¼€å§‹æ‰§è¡ŒThread4é‡Šæ”¾å†™é” çº¿ç¨‹1å’Œçº¿ç¨‹2å¯ä»¥åŒæ—¶èŽ·å–è¯»é”ï¼Œè€Œçº¿ç¨‹3å’Œçº¿ç¨‹4åªèƒ½ä¾æ¬¡èŽ·å–å†™é”ï¼Œå› ä¸ºçº¿ç¨‹4å¿…é¡»ç­‰å¾…çº¿ç¨‹3é‡Šæ”¾å†™é”åŽæ‰èƒ½èŽ·å–åˆ°é” https://blog.csdn.net/fanrenxiang/article/details/104312606 å…¬å¹³é”&#x2F;éžå…¬å¹³é”ï¼› å…¬å¹³é” çº¿ç¨‹å°±éƒ½ä¼šè¿›å…¥ç­‰å¾…ï¼Œå¼€å§‹æŽ’é˜Ÿï¼Œåœ¨ç­‰å¾…é˜Ÿåˆ—é‡Œç­‰å¾…æ—¶é—´é•¿çš„çº¿ç¨‹ä¼šä¼˜å…ˆæ‹¿åˆ°è¿™æŠŠé”ï¼Œæœ‰å…ˆæ¥å…ˆå¾—çš„æ„æ€ï¼Œå…¬å¹³é”æŒ‡çš„æ˜¯æŒ‰ç…§çº¿ç¨‹è¯·æ±‚çš„é¡ºåºï¼Œæ¥åˆ†é…é” éžå…¬å¹³é” å®ƒä¼šåœ¨ä¸€å®šæƒ…å†µä¸‹ï¼Œå¿½ç•¥æŽ‰å·²ç»åœ¨æŽ’é˜Ÿçš„çº¿ç¨‹ï¼Œå‘ç”Ÿæ’é˜ŸçŽ°è±¡ï¼Œè€Œéžå…¬å¹³é”æŒ‡çš„æ˜¯ä¸å®Œå…¨æŒ‰ç…§è¯·æ±‚çš„é¡ºåºï¼Œåœ¨ä¸€å®šæƒ…å†µä¸‹ï¼Œå¯ä»¥å…è®¸æ’é˜Ÿ å…¬å¹³é” new ReentrantLock(false); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081public class FairAndUnfair &#123; public static void main(String args[]) &#123; PrintQueue printQueue = new PrintQueue(); Thread thread[] = new Thread[10]; for (int i = 0; i &lt; 10; i++) &#123; thread[i] = new Thread(new Job(printQueue), &quot;Thread &quot; + i); &#125; for (int i = 0; i &lt; 10; i++) &#123; thread[i].start(); try &#123; Thread.sleep(100); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;class Job implements Runnable &#123; private PrintQueue printQueue; public Job(PrintQueue printQueue) &#123; this.printQueue = printQueue; &#125; @Override public void run() &#123; System.out.printf(&quot;%s: Going to print a job\\n&quot;, Thread.currentThread().getName()); printQueue.printJob(new Object()); System.out.printf(&quot;%s: The document has been printed\\n&quot;, Thread.currentThread().getName()); &#125;&#125;class PrintQueue &#123; private final Lock queueLock = new ReentrantLock(false); //éžå…¬å¹³é” public void printJob(Object document) &#123; queueLock.lock(); try &#123; Long duration = (long) (Math.random() * 10000); System.out.printf(&quot;%s: PrintQueue: Printing a Job during %d seconds\\n&quot;, Thread.currentThread().getName(), (duration / 1000)); Thread.sleep(duration); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; queueLock.unlock(); &#125; queueLock.lock(); try &#123; Long duration = (long) (Math.random() * 10000); System.out.printf(&quot;%s: PrintQueue: Printing a Job during %d seconds\\n&quot;, Thread.currentThread().getName(), (duration / 1000)); Thread.sleep(duration); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; queueLock.unlock(); &#125; &#125;&#125; â€‹ è¿è¡Œç»“æžœ 12345678910111213141516171819202122232425262728293031323334353637383940Thread 0: Going to print a jobThread 0: PrintQueue: Printing a Job during 8 secondsThread 1: Going to print a jobThread 2: Going to print a jobThread 3: Going to print a jobThread 4: Going to print a jobThread 5: Going to print a jobThread 6: Going to print a jobThread 7: Going to print a jobThread 8: Going to print a jobThread 9: Going to print a jobThread 0: PrintQueue: Printing a Job during 2 secondsThread 0: The document has been printedThread 1: PrintQueue: Printing a Job during 8 secondsThread 1: PrintQueue: Printing a Job during 8 secondsThread 1: The document has been printedThread 2: PrintQueue: Printing a Job during 7 secondsThread 2: PrintQueue: Printing a Job during 5 secondsThread 2: The document has been printedThread 3: PrintQueue: Printing a Job during 5 secondsThread 3: PrintQueue: Printing a Job during 0 secondsThread 3: The document has been printedThread 4: PrintQueue: Printing a Job during 5 secondsThread 4: PrintQueue: Printing a Job during 9 secondsThread 4: The document has been printedThread 5: PrintQueue: Printing a Job during 6 secondsThread 5: PrintQueue: Printing a Job during 6 secondsThread 5: The document has been printedThread 6: PrintQueue: Printing a Job during 1 secondsThread 6: PrintQueue: Printing a Job during 5 secondsThread 6: The document has been printedThread 7: PrintQueue: Printing a Job during 1 secondsThread 7: PrintQueue: Printing a Job during 1 secondsThread 7: The document has been printedThread 8: PrintQueue: Printing a Job during 6 secondsThread 8: PrintQueue: Printing a Job during 1 secondsThread 8: The document has been printedThread 9: PrintQueue: Printing a Job during 1 secondsThread 9: PrintQueue: Printing a Job during 0 secondsThread 9: The document has been printed å¯ä»¥çœ‹åˆ°thread1é‡Šæ”¾é”åŽåˆé‡æ–°èŽ·å–åˆ°é” â€‹ ReentrantLockTest.java 123456789101112131415161718192021private static final int COUNT = 100;private static int start = 1;static ReentrantLock lock = new ReentrantLock(true);public static void main(String[] args) &#123; Runnable task = () -&gt; &#123; for (; ; ) &#123; lock.lock(); try &#123; if (start &lt;= COUNT) &#123; System.out.println(Thread.currentThread().getName() + &quot;=&gt; &quot; + start++); &#125; else &#123; System.exit(0); &#125; &#125; finally &#123; lock.unlock(); &#125; &#125; &#125;; new Thread(task).start(); new Thread(task).start(); è¿è¡Œç»“æžœ: Thread-0&#x3D;&gt; 1Thread-1&#x3D;&gt; 2Thread-0&#x3D;&gt; 3Thread-1&#x3D;&gt; 4â€¦Thread-1&#x3D;&gt; 36Thread-1&#x3D;&gt; 37Thread-1&#x3D;&gt; 38Thread-1&#x3D;&gt; 39 Thread-1&#x3D;&gt; 40Thread-1&#x3D;&gt; 41Thread-1&#x3D;&gt; 42Thread-1&#x3D;&gt; 43Thread-1&#x3D;&gt; 44Thread-1&#x3D;&gt; 45Thread-1&#x3D;&gt; 46Thread-1&#x3D;&gt; 47Thread-1&#x3D;&gt; 48 Otherwise this lock does not guarantee any particular access order.å¯è§å…¬å¹³é”ä¸ä¿è¯æœ‰åºã€‚ https://juejin.cn/post/6844903983308341261 https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantLock.html æ‚²è§‚é”&#x2F;ä¹è§‚é”ï¼› æ‚²è§‚é” å¿…é¡»å…ˆæ‹¿åˆ°é”ï¼Œä»¥ä¾¿è¾¾åˆ°â€œç‹¬å â€çš„çŠ¶æ€ï¼Œå½“å‰çº¿ç¨‹åœ¨æ“ä½œèµ„æºçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ç”±äºŽä¸èƒ½æ‹¿åˆ°é”. å®ƒè®¤ä¸ºå¦‚æžœä¸é”ä½è¿™ä¸ªèµ„æºï¼Œåˆ«çš„çº¿ç¨‹å°±ä¼šæ¥äº‰æŠ¢ï¼Œå°±ä¼šé€ æˆæ•°æ®ç»“æžœé”™è¯¯ï¼Œæ‰€ä»¥æ‚²è§‚é”ä¸ºäº†ç¡®ä¿ç»“æžœçš„æ­£ç¡®æ€§ï¼Œä¼šåœ¨æ¯æ¬¡èŽ·å–å¹¶ä¿®æ”¹æ•°æ®æ—¶ï¼Œéƒ½æŠŠæ•°æ®é”ä½ï¼Œè®©å…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®è¯¥æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿æ•°æ®å†…å®¹ä¸‡æ— ä¸€å¤±ã€‚ Java ä¸­æ‚²è§‚é”çš„å®žçŽ°åŒ…æ‹¬ synchronized å…³é”®å­—å’Œ Lock ç›¸å…³ç±»ç­‰ï¼Œæˆ‘ä»¬ä»¥ Lock æŽ¥å£ä¸ºä¾‹ï¼Œä¾‹å¦‚ Lock çš„å®žçŽ°ç±» ReentrantLockï¼Œç±»ä¸­çš„ lock() ç­‰æ–¹æ³•å°±æ˜¯æ‰§è¡ŒåŠ é”ï¼Œè€Œ unlock() æ–¹æ³•æ˜¯æ‰§è¡Œè§£é”ã€‚å¤„ç†èµ„æºä¹‹å‰å¿…é¡»è¦å…ˆåŠ é”å¹¶æ‹¿åˆ°é”ï¼Œç­‰åˆ°å¤„ç†å®Œäº†ä¹‹åŽå†è§£å¼€é”ï¼Œè¿™å°±æ˜¯éžå¸¸å…¸åž‹çš„æ‚²è§‚é”æ€æƒ³ã€‚ synchronized å…³é”®å­—å’Œ Lock æŽ¥å£ å¤§å–œå¤§æ‚²ï¼šæ•°æ®åº“ æ•°æ®åº“ä¸­åŒæ—¶æ‹¥æœ‰æ‚²è§‚é”å’Œä¹è§‚é”çš„æ€æƒ³ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¦‚æžœåœ¨ MySQL é€‰æ‹© select for update è¯­å¥ï¼Œé‚£å°±æ˜¯æ‚²è§‚é”ï¼Œåœ¨æäº¤ä¹‹å‰ä¸å…è®¸ç¬¬ä¸‰æ–¹æ¥ä¿®æ”¹è¯¥æ•°æ®ï¼Œè¿™å½“ç„¶ä¼šé€ æˆä¸€å®šçš„æ€§èƒ½æŸè€—ï¼Œåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹æ˜¯ä¸å¯å–çš„ ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªç‰ˆæœ¬ version å­—æ®µåœ¨æ•°æ®åº“ä¸­å®žçŽ°ä¹è§‚é”ã€‚åœ¨èŽ·å–åŠä¿®æ”¹æ•°æ®æ—¶éƒ½ä¸éœ€è¦åŠ é”ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨èŽ·å–å®Œæ•°æ®å¹¶è®¡ç®—å®Œæ¯•ï¼Œå‡†å¤‡æ›´æ–°æ•°æ®æ—¶ï¼Œä¼šæ£€æŸ¥ç‰ˆæœ¬å·å’ŒèŽ·å–æ•°æ®æ—¶çš„ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æžœä¸€è‡´å°±ç›´æŽ¥æ›´æ–°ï¼Œå¦‚æžœä¸ä¸€è‡´ï¼Œè¯´æ˜Žè®¡ç®—æœŸé—´å·²ç»æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®äº†ï¼Œé‚£æˆ‘å°±å¯ä»¥é€‰æ‹©é‡æ–°èŽ·å–æ•°æ®ï¼Œé‡æ–°è®¡ç®—ï¼Œç„¶åŽå†æ¬¡å°è¯•æ›´æ–°æ•°æ®ã€‚ ä¹è§‚é” åˆ©ç”¨ CAS ç†å¿µï¼Œåœ¨ä¸ç‹¬å èµ„æºçš„æƒ…å†µä¸‹ï¼Œå®Œæˆäº†å¯¹èµ„æºçš„ä¿®æ”¹ã€‚ ä¸ºäº†ç¡®ä¿æ•°æ®æ­£ç¡®æ€§ï¼Œåœ¨æ›´æ–°ä¹‹å‰ï¼Œä¼šåŽ»å¯¹æ¯”åœ¨æˆ‘ä¿®æ”¹æ•°æ®æœŸé—´ï¼Œæ•°æ®æœ‰æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹è¿‡ï¼šå¦‚æžœæ²¡è¢«ä¿®æ”¹è¿‡ï¼Œå°±è¯´æ˜ŽçœŸçš„åªæœ‰æˆ‘è‡ªå·±åœ¨æ“ä½œï¼Œé‚£æˆ‘å°±å¯ä»¥æ­£å¸¸çš„ä¿®æ”¹æ•°æ®ï¼›å¦‚æžœå‘çŽ°æ•°æ®å’Œæˆ‘ä¸€å¼€å§‹æ‹¿åˆ°çš„ä¸ä¸€æ ·äº†ï¼Œè¯´æ˜Žå…¶ä»–çº¿ç¨‹åœ¨è¿™æ®µæ—¶é—´å†…ä¿®æ”¹è¿‡æ•°æ®ï¼Œé‚£è¯´æ˜Žæˆ‘è¿Ÿäº†ä¸€æ­¥ï¼Œæ‰€ä»¥æˆ‘ä¼šæ”¾å¼ƒè¿™æ¬¡ä¿®æ”¹ï¼Œå¹¶é€‰æ‹©æŠ¥é”™ã€é‡è¯•ç­‰ç­–ç•¥ã€‚ â€‹ è‡ªæ—‹é”&#x2F;éžè‡ªæ—‹é”ï¼› è‡ªæ—‹é” è‡ªæ—‹é”çš„ç†å¿µæ˜¯å¦‚æžœçº¿ç¨‹çŽ°åœ¨æ‹¿ä¸åˆ°é”ï¼Œå¹¶ä¸ç›´æŽ¥é™·å…¥é˜»å¡žæˆ–è€…é‡Šæ”¾ CPU èµ„æºï¼Œè€Œæ˜¯å¼€å§‹åˆ©ç”¨å¾ªçŽ¯ï¼Œä¸åœåœ°å°è¯•èŽ·å–é”ï¼Œè¿™ä¸ªå¾ªçŽ¯è¿‡ç¨‹è¢«å½¢è±¡åœ°æ¯”å–»ä¸ºâ€œè‡ªæ—‹â€ é˜»å¡žå’Œå”¤é†’çº¿ç¨‹éƒ½æ˜¯éœ€è¦é«˜æ˜‚çš„å¼€é”€çš„ï¼Œå¦‚æžœåŒæ­¥ä»£ç å—ä¸­çš„å†…å®¹ä¸å¤æ‚ï¼Œé‚£ä¹ˆå¯èƒ½è½¬æ¢çº¿ç¨‹å¸¦æ¥çš„å¼€é”€æ¯”å®žé™…ä¸šåŠ¡ä»£ç æ‰§è¡Œçš„å¼€é”€è¿˜è¦å¤§ã€‚ éžè‡ªæ—‹é” å¦‚æžœå®ƒå‘çŽ°æ­¤æ—¶èŽ·å–ä¸åˆ°é”ï¼Œå®ƒå°±æŠŠè‡ªå·±çš„çº¿ç¨‹åˆ‡æ¢çŠ¶æ€ï¼Œè®©çº¿ç¨‹ä¼‘çœ ï¼Œç„¶åŽ CPU å°±å¯ä»¥åœ¨è¿™æ®µæ—¶é—´åŽ»åšå¾ˆå¤šå…¶ä»–çš„äº‹æƒ…ï¼Œç›´åˆ°ä¹‹å‰æŒæœ‰è¿™æŠŠé”çš„çº¿ç¨‹é‡Šæ”¾äº†é”ï¼ŒäºŽæ˜¯ CPU å†æŠŠä¹‹å‰çš„çº¿ç¨‹æ¢å¤å›žæ¥ï¼Œè®©è¿™ä¸ªçº¿ç¨‹å†åŽ»å°è¯•èŽ·å–è¿™æŠŠé”ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839/** * æŒæœ‰é”çš„çº¿ç¨‹ï¼Œnullè¡¨ç¤ºé”æœªè¢«çº¿ç¨‹æŒæœ‰ */private AtomicReference&lt;Thread&gt; ref = new AtomicReference&lt;&gt;();public void lock()&#123; Thread currentThread = Thread.currentThread(); while(!ref.compareAndSet(null, currentThread))&#123; //å½“refä¸ºnullçš„æ—¶å€™compareAndSetè¿”å›žtrueï¼Œåä¹‹ä¸ºfalse //é€šè¿‡å¾ªçŽ¯ä¸æ–­çš„è‡ªæ—‹åˆ¤æ–­é”æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰ &#125;&#125;public void unLock() &#123; Thread cur = Thread.currentThread(); if(ref.get() != cur)&#123; //exception ... &#125; ref.set(null);&#125;static int count = 0;public static void main(String[] args) throws InterruptedException &#123; ExecutorService executorService = Executors.newFixedThreadPool(100); CountDownLatch countDownLatch = new CountDownLatch(100); SimpleSpinningLock simpleSpinningLock = new SimpleSpinningLock(); for (int i = 0 ; i &lt; 100 ; i++)&#123; executorService.execute(() -&gt; &#123; simpleSpinningLock.lock(); ++count; simpleSpinningLock.unLock(); countDownLatch.countDown(); &#125;); &#125; countDownLatch.await(); System.out.println(count);&#125; å¯ä¸­æ–­é”&#x2F;ä¸å¯ä¸­æ–­é”ã€‚ç¬¬ 7 ç§åˆ†ç±»æ˜¯å¯ä¸­æ–­é”å’Œä¸å¯ä¸­æ–­é”ã€‚åœ¨ Java ä¸­ï¼Œsynchronized å…³é”®å­—ä¿®é¥°çš„é”ä»£è¡¨çš„æ˜¯ä¸å¯ä¸­æ–­é”ï¼Œä¸€æ—¦çº¿ç¨‹ç”³è¯·äº†é”ï¼Œå°±æ²¡æœ‰å›žå¤´è·¯äº†ï¼Œåªèƒ½ç­‰åˆ°æ‹¿åˆ°é”ä»¥åŽæ‰èƒ½è¿›è¡Œå…¶ä»–çš„é€»è¾‘å¤„ç†ã€‚è€Œæˆ‘ä»¬çš„ ReentrantLock æ˜¯ä¸€ç§å…¸åž‹çš„å¯ä¸­æ–­é”ï¼Œä¾‹å¦‚ä½¿ç”¨ lockInterruptibly æ–¹æ³•åœ¨èŽ·å–é”çš„è¿‡ç¨‹ä¸­ï¼Œçªç„¶ä¸æƒ³èŽ·å–äº†ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨ä¸­æ–­ä¹‹åŽåŽ»åšå…¶ä»–çš„äº‹æƒ…ï¼Œä¸éœ€è¦ä¸€ç›´å‚»ç­‰åˆ°èŽ·å–åˆ°é”æ‰ç¦»å¼€ã€‚ æ­»é” æ¡ä»¶ äº’æ–¥æ¡ä»¶ : ä»»åŠ¡ä½¿ç”¨çš„èµ„æºè‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ä¸èƒ½å…±äº«çš„ï¼›chopstickä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªPhilosopherä½¿ç”¨ è¯·æ±‚ä¿æŒæ¡ä»¶: è‡³å°‘æœ‰ä¸€ä¸ªä»»åŠ¡å¿…é¡»æŒæœ‰è·Ÿä¸€ä¸ªèµ„æºä¸”æ­£åœ¨ç­‰å¾…èŽ·å–ä¸€ä¸ªå½“å‰è¢«åˆ«çš„ä»»åŠ¡æŒæœ‰çš„èµ„æº ä¸å¯å‰¥å¤ºæ¡ä»¶: èµ„æºä¸èƒ½è¢«ä»»åŠ¡æŠ¢å  çŽ¯è·¯ç­‰å¾…æ¡ä»¶: å¿…é¡»æœ‰å¾ªçŽ¯ç­‰å¾…ã€‚ä¸€ä¸ªä»»åŠ¡ç­‰å¾…å…¶ä»–ä»»åŠ¡æ‰€æŒæœ‰çš„èµ„æºï¼ŒåŽè€…åˆç­‰å¾…å¦ä¸€ä¸ªä»»åŠ¡æ‰€æŒæœ‰çš„èµ„æº,ä½¿å¾—å¤§å®¶éƒ½è¢«é”ä½. å½“ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰çº¿ç¨‹ï¼ˆæˆ–è¿›ç¨‹ï¼‰ç›¸äº’æŒæœ‰å¯¹æ–¹æ‰€éœ€è¦çš„èµ„æºï¼Œå´åˆéƒ½ä¸ä¸»åŠ¨é‡Šæ”¾è‡ªå·±æ‰‹ä¸­æ‰€æŒæœ‰çš„èµ„æºï¼Œå¯¼è‡´å¤§å®¶éƒ½èŽ·å–ä¸åˆ°è‡ªå·±æƒ³è¦çš„èµ„æº é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šäº§ç”Ÿæ­»é”å‘¢? å­¦è¿‡æ“ä½œç³»ç»Ÿçš„æœ‹å‹åº”è¯¥éƒ½çŸ¥é“ï¼Œæ­»é”çš„äº§ç”Ÿå¿…é¡»å…·å¤‡ä»¥ä¸‹å››ä¸ªæ¡ä»¶ ã€‚ äº’æ–¥æ¡ä»¶: æŒ‡çº¿ç¨‹å¯¹å·±ç»èŽ·å–åˆ°çš„èµ„æºè¿›è¡ŒæŽ’å®ƒæ€§ä½¿ç”¨ ï¼Œå³è¯¥èµ„æºåŒæ—¶åªç”± ä¸€ä¸ªçº¿ç¨‹å ç”¨ã€‚å¦‚æžœ æ­¤æ—¶ è¿˜æœ‰å…¶ ä»– çº¿ç¨‹è¯·æ±‚èŽ·å–è¯¥èµ„æº ï¼Œåˆ™ è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æº çš„ çº¿ç¨‹é‡Šæ”¾è¯¥èµ„æºã€‚ .è¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶ : æŒ‡ä¸€ä¸ªçº¿ç¨‹å·±ç»æŒæœ‰äº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œæ–°èµ„æºå·±è¢«å…¶ ä»– çº¿ç¨‹å æœ‰ï¼Œæ‰€ ä»¥ å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ž ï¼Œä½† é˜»å¡ž çš„åŒæ—¶ å¹¶ä¸é‡Šæ”¾è‡ª å·±å·±ç»èŽ·å–çš„èµ„æºã€‚ ä¸å¯å‰¥å¤ºæ¡ä»¶ : æŒ‡çº¿ç¨‹èŽ·å–åˆ°çš„èµ„æºåœ¨è‡ªå·±ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹æŠ¢å  ï¼Œ åªæœ‰åœ¨è‡ªå·±ä½¿ç”¨å®Œ æ¯•åŽæ‰ ç”± è‡ª å·±é‡Šæ”¾è¯¥èµ„æºã€‚ çŽ¯è·¯ç­‰å¾…æ¡ä»¶ : æŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹â†’èµ„æºçš„çŽ¯å½¢é“¾ ï¼Œå³çº¿ç¨‹é›†åˆ{TO,TLT2ï¼Œâ€¦ï¼ŒTn}ä¸­çš„TOæ­£åœ¨ç­‰å¾…ä¸€ä¸ªTlå ç”¨çš„èµ„æºï¼Œ Tlæ­£åœ¨ç­‰å¾…T2å  ç”¨çš„èµ„æºï¼Œâ€¦â€¦Tnæ­£åœ¨ç­‰å¾…å·±è¢« TO å ç”¨çš„èµ„æºã€‚ é¿å…æ­»é”è¦æƒ³é¿å…æ­»é”ï¼Œåªéœ€è¦ç ´åæŽ‰è‡³å°‘ä¸€ä¸ªæž„é€ æ­»é”çš„å¿…è¦æ¡ä»¶å³å¯ï¼Œ ä½†æ˜¯å­¦è¿‡æ“ä½œç³»ç»Ÿ çš„è¯»è€…åº”è¯¥éƒ½çŸ¥é“ï¼Œç›®å‰åªæœ‰è¯·æ±‚å¹¶æŒæœ‰å’ŒçŽ¯è·¯ç­‰å¾…æ¡ä»¶æ˜¯å¯ ä»¥è¢«ç ´å çš„ã€‚é€ æˆæ­»é”çš„åŽŸå› å…¶å®žå’Œç”³è¯·èµ„æºçš„é¡ºåºæœ‰å¾ˆå¤§å…³ç³» ï¼Œ ç»å…¸çš„å“²å­¦å®¶åƒé¥­é—®é¢˜ 5ä½å“²å­¦å®¶ ï¼Œ5åªç­·å­åœ¨ä»–ä»¬ä¹‹é—´. ç­·å­ 123456789101112public class Chopstick &#123; private boolean taken = false; public int getNumber() &#123; return number; &#125; public void setNumber(int number) &#123; this.number = number; &#125; private int number; public synchronized void take(int numChop) throws InterruptedException &#123; while (taken) &#123; Print.print(numChop+&quot; wait&quot;); wait(); &#125; taken = true; &#125; public synchronized void drop() &#123; taken = false; notifyAll(); &#125; } 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152* å“²å­¦å®¶ ```javapublic class Philosopher implements Runnable &#123; private Chopstick left; private Chopstick right; private final int id; private final int ponderFactor; private Random rand = new Random(47); private void pause() throws InterruptedException &#123; if (ponderFactor == 0) return; TimeUnit.MILLISECONDS.sleep(rand.nextInt(ponderFactor * 250)); &#125; public Philosopher(Chopstick left, Chopstick right, int id, int ponderFactor) &#123; this.id = id; this.ponderFactor = ponderFactor; this.left = left; this.right = right; &#125; @Override public void run() &#123; try &#123; while (!Thread.interrupted()) &#123; Print.print(this + &quot; &quot; + &quot;need thinking &quot; + ponderFactor + &quot; æ¯«ç§’&quot;); pause(); //Philosopher becomes hungry Print.print(this + &quot; &quot; + &quot;grabbing right ç¬¬&quot; + (id + 1) + &quot; å·ç­·å­&quot;); right.take(id + 1);// if (id == 2) &#123;// System.out.println(right.taken);// &#125; pause(); //æ‹¿èµ·å³è¾¹çš„ç­·å­è¿›å…¥ç­‰å¾…çŠ¶æ€ Print.print(this + &quot; .&quot; + &quot;try grabbing left ç¬¬ &quot; + (id) + &quot; å·ç­·å­&quot;); //å°è¯•æ‹¿èµ·å·¦è¾¹çš„ç­·å­ left.take(id); Print.print(this + &quot; &quot; + &quot;eating&quot;); pause(); right.drop(); left.drop(); &#125; &#125; catch (InterruptedException e) &#123; Print.print(this + &quot; &quot; + &quot;exiting via interrupt&quot;); &#125; &#125; @Override public String toString() &#123; return &quot;Philosopher&quot; + id; &#125;&#125; è¿è¡Œ 1234567891011121314151617181920212223242526public class DeadlockingDiningPhilosophers &#123; public static void main(String[] args) throws Exception &#123; int ponder = 5; //é»˜è®¤ Philosopheræ€è€ƒçš„æ—¶é—´ if (args.length &gt; 0) ponder = Integer.parseInt(args[0]); int size = 5; //é»˜è®¤ç­·å­çš„ä¸ªæ•° if (args.length &gt; 1) size = Integer.parseInt(args[1]); ExecutorService exec = Executors.newCachedThreadPool(); Chopstick[] sticks = new Chopstick[size]; for (int i = 0; i &lt; size; i++) sticks[i] = new Chopstick(); for (int i = 0; i &lt; size; i++) exec.execute(new Philosopher(sticks[i], sticks[(i + 1) % size], i, ponder));// if (args.length == 3 &amp;&amp; args[2].equals(&quot;timeout&quot;)) TimeUnit.SECONDS.sleep(5);// else &#123;// System.out.println(&quot;Press &#x27;&#x27;Enter to quit&quot;);// System.in.read();// &#125; exec.shutdownNow(); &#125;&#125; ç»“æžœ 12345678910111213141516171819202122232425Philosopher0 need thinking 5 æ¯«ç§’Philosopher3 need thinking 5 æ¯«ç§’Philosopher2 need thinking 5 æ¯«ç§’Philosopher1 need thinking 5 æ¯«ç§’Philosopher4 need thinking 5 æ¯«ç§’Philosopher0 grabbing right ç¬¬1 å·ç­·å­Philosopher3 grabbing right ç¬¬4 å·ç­·å­Philosopher2 grabbing right ç¬¬3 å·ç­·å­Philosopher1 grabbing right ç¬¬2 å·ç­·å­Philosopher4 grabbing right ç¬¬5 å·ç­·å­Philosopher0 .try grabbing left ç¬¬ 0 å·ç­·å­Philosopher3 .try grabbing left ç¬¬ 3 å·ç­·å­Philosopher2 .try grabbing left ç¬¬ 2 å·ç­·å­Philosopher1 .try grabbing left ç¬¬ 1 å·ç­·å­Philosopher4 .try grabbing left ç¬¬ 4 å·ç­·å­2 wait3 wait4 wait0 wait1 waitPhilosopher1 exiting via interruptPhilosopher4 exiting via interruptPhilosopher0 exiting via interruptPhilosopher3 exiting via interruptPhilosopher2 exiting via interrupt é“¶è¡Œè½¬è´¦é—®é¢˜12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485public class TransferMoney implements Runnable &#123; int flag; static Account a = new Account(800); static Account b = new Account(600); static class Account &#123; public Account(int balance) &#123; this.balance = balance; &#125; int balance; &#125; @Override public void run() &#123; if (flag == 1) &#123; transferMoney(a, b, 200); &#125; if (flag == 0) &#123; transferMoney(b, a, 200); &#125; &#125; public static void transferMoney(Account from, Account to, int amount) &#123; //å…ˆèŽ·å–ä¸¤æŠŠé”ï¼Œç„¶åŽå¼€å§‹è½¬è´¦ int fromHash = System.identityHashCode(from); int toHash = System.identityHashCode(to); System.out.println(Thread.currentThread().getName() + &quot; fromHash &lt; toHash &quot;+(fromHash &lt; toHash)); if (fromHash &lt; toHash) &#123; synchronized (from) &#123; System.out.println(Thread.currentThread().getName() + &quot; èŽ·å¾—é”A &quot; + from.balance); try &#123; Thread.sleep(5000); &#125; catch (InterruptedException e) &#123; &#125; synchronized (to) &#123; System.out.println(Thread.currentThread().getName() + &quot; èŽ·å¾—é”B &quot; + to.balance); if (from.balance - amount &lt; 0) &#123; System.out.println(Thread.currentThread().getName() + &quot; ä½™é¢ä¸è¶³ï¼Œè½¬è´¦å¤±è´¥ã€‚&quot;); return; &#125;// from.balance -= amount;// to.balance += amount; System.out.println(Thread.currentThread().getName() + &quot; æˆåŠŸè½¬è´¦&quot; + amount + &quot;å…ƒ&quot;); &#125; &#125; &#125; else if (fromHash &gt; toHash) &#123; synchronized (to) &#123; System.out.println(Thread.currentThread().getName() + &quot; èŽ·å¾—é”A &quot; + to.balance); try &#123; Thread.sleep(5000); &#125; catch (InterruptedException e) &#123; &#125; synchronized (from) &#123; System.out.println(Thread.currentThread().getName() + &quot; èŽ·å¾—é”B &quot; + from.balance); if (from.balance - amount &lt; 0) &#123; System.out.println(Thread.currentThread().getName() + &quot; ä½™é¢ä¸è¶³ï¼Œè½¬è´¦å¤±è´¥ã€‚&quot;); return; &#125;// from.balance -= amount;// to.balance += amount; System.out.println(Thread.currentThread().getName() + &quot; æˆåŠŸè½¬è´¦&quot; + amount + &quot;å…ƒ&quot;); &#125; &#125; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; TransferMoney r1 = new TransferMoney(); TransferMoney r2 = new TransferMoney(); r1.flag = 1; r2.flag = 0; Thread t1 = new Thread(r1, &quot;t1&quot;); Thread t2 = new Thread(r2, &quot;t2&quot;); t1.start(); t2.start(); t1.join(); t2.join();// System.out.println(&quot;açš„ä½™é¢&quot; + a.balance);// System.out.println(&quot;bçš„ä½™é¢&quot; + b.balance); &#125;&#125; æ‰“å°ç»“æž„ t1 fromHash 1967932108 toHash 2072748565 fromHash &lt; toHash truet2 fromHash 2072748565 toHash 1967932108 fromHash &lt; toHash falset1 èŽ·å¾—é”At1 èŽ·å¾—é”Bt1 æˆåŠŸè½¬è´¦200å…ƒt2 èŽ·å¾—é”Bt2 èŽ·å¾—é”At2 æˆåŠŸè½¬è´¦200å…ƒaçš„ä½™é¢500 bçš„ä½™é¢500 ä½¿ç”¨ HashCode çš„å€¼æ¥å†³å®šé¡ºåº ä¸»è¦æ€æƒ³æ˜¯ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½å…ˆèŽ·å– é”A,å†èŽ·å–é”B,è¿™æ ·å°±ä¸ä¼šæœ‰æ­»é”äº† ä¸»é”® ID å…·æœ‰å”¯ä¸€ã€ä¸é‡å¤çš„ç‰¹ç‚¹ ç”±ä¸»é”® ID å¤§å°æ¥å†³å®šèŽ·å–é”çš„é¡ºåºï¼Œå°±å¯ä»¥ç¡®ä¿é¿å…æ­»é”ã€‚ CASAtomicStampedReference åœ¨å˜é‡å‰é¢æ·»åŠ ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å˜é‡æ›´æ–°çš„æ—¶å€™éƒ½æŠŠç‰ˆæœ¬å·åŠ 1 AQShttps://www.cnblogs.com/dennyzhangdd/p/7218510.html ä¿¡å·é‡12345678910111213141516171819202122232425262728293031323334353637383940public class SemaphoreTestMain &#123; static Semaphore sSemaphore = new Semaphore(6); public static void main(String[] args) &#123; final SemaphoreTestMain semaphoreTestMain = new SemaphoreTestMain(); for (int i = 0 ; i &lt; 1000;i++) &#123; Thread myThread = new Thread() &#123; @Override public void run() &#123; super.run(); try &#123; semaphoreTestMain.test(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;; myThread.setName(&quot;threat index:&quot; + i); myThread.start(); &#125; &#125; public void test() throws InterruptedException &#123; sSemaphore.acquire(); System.out.println(Thread.currentThread().getName() + &quot;--in&quot;); Thread.sleep(1000); System.out.println(Thread.currentThread().getName() + &quot;--out&quot; ); sSemaphore.release(); &#125;&#125; https://www.bilibili.com/video/BV1B7411L7tE https://tech.meituan.com/2018/11/15/java-lock.html https://blog.csdn.net/javazejian/article/details/72828483#t2 https://tech.meituan.com/2018/11/15/java-lock.html","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"concurrency","slug":"concurrency","permalink":"https://noteforme.github.io/tags/concurrency/"}]},{"title":"CaptureApp","slug":"CaptureApp","date":"2018-04-21T05:24:41.000Z","updated":"2024-01-07T07:53:54.108Z","comments":true,"path":"2018/04/21/CaptureApp/","link":"","permalink":"https://noteforme.github.io/2018/04/21/CaptureApp/","excerpt":"","text":"CharlesæŠ“åŒ… æŒ‰ç…§è¿™ä¸ªåœ°å€é…ç½® https://www.jianshu.com/p/e8dd1091d6d7 è®¾ç½®httpä»£ç† Httpsä¹±ç é—®é¢˜ å®‰è£…è¯ä¹¦ æ–­ç‚¹ä¿®æ”¹ä»£ç†è¿™æ ·å°±å¯ä»¥ä¿®æ”¹äº† https://www.jianshu.com/p/0caaea590c8c Other -&gt; keychain Access è¿˜æœ‰è®¾ç½®å°±è§£å†³äº†httpsä¹±ç çš„é—®é¢˜ https://www.jianshu.com/p/0caaea590c8c type â€œ chls.pro/ssl â€ in broswer ç„¶åŽæ‰‹æœºç”¨è¿™ä¸ªåœ°å€é…ç½®ä¸‹è½½ http://chls.pro/ssl Okhttp https://juejin.im/post/5ddddd2a6fb9a07161483fb2 Mock data https://zhuanlan.zhihu.com/p/140942687 Fiddlerhttps://www.jianshu.com/p/4a8dae519efehttps://www.jianshu.com/p/99b6b4cd273c WireSharkå®‰è£…https://www.linuxidc.com/Linux/2016-08/134526.htm http://www.cnblogs.com/wangqiguo/p/4529250.htmlhttp://www.cnblogs.com/TankXiao/archive/2012/10/10/2711777.html https://juejin.im/post/5cc313755188252d6f11b463","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"Generics","slug":"Generics","date":"2018-04-16T06:36:29.000Z","updated":"2023-01-02T03:31:39.074Z","comments":true,"path":"2018/04/16/Generics/","link":"","permalink":"https://noteforme.github.io/2018/04/16/Generics/","excerpt":"","text":"https://www.bilibili.com/video/BV1T441117u8 æ³›åž‹ç»§æ‰¿ç±»åž‹1class Button extends TextView ä¸èƒ½æŠŠå­ç±»çš„Listå¯¹è±¡ ArrayList èµ‹å€¼ç»™çˆ¶ç±»çš„Listå¼•ç”¨ List Java ? extends TextView1234567891011121314151617 List&lt;TextView&gt; textViews=new ArrayList&lt;&gt;(); List&lt;TextView&gt; textViews=new ArrayList&lt;Button&gt;(); //æŠ¥é”™ // è§£å†³åŠžæ³• List&lt;? extends TextView&gt; textViews =new ArrayList&lt;Button&gt;(); //è§£é™¤äº†èµ‹å€¼é™åˆ¶//æ–°å¢žäº†é™åˆ¶ï¼Œ åªèƒ½æ¶ˆè´¹ä½¿ç”¨,ä¸èƒ½ç”Ÿäº§ TextView textView = new TextView(this); textViews.add(textView); //æŠ¥é”™ï¼Œ ä¸èƒ½è°ƒç”¨textViewsçš„åŒ…å« ç±»åž‹å‚æ•°çš„æ–¹æ³• TextView textView = textViews.get(0); // æ²¡æœ‰é—®é¢˜ List&lt;Button&gt; buttons=new ArrayList&lt;Button&gt;(); textView = buttons;//æŠ¥é”™ ? super Button12345678910ArrayList&lt;Button&gt; textViews1 = new ArrayList&lt;TextView&gt;();ArrayList&lt;? super Button&gt; textViews2 = new ArrayList&lt;TextView&gt;(); //æ–°å¢žäº†é™åˆ¶Button button = textViews2.get(0); //æŠ¥é”™, ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½ç”Ÿäº§textViews1.add(new Button(this)); // æ²¡æœ‰é—®é¢˜ Java kotlinå¯¹æ¯”Java 123List&lt;? extends TextView&gt; textViews;List&lt;? super Button&gt; textViews; Kotlin 12var textVies: List&lt;out TextView&gt;var textVies: List&lt;in TextView&gt; kotlinæ–°å¢žç”¨æ³•è¡¨ç¤ºæˆ‘è¿™ä¸ªç±»åž‹,è¿™ä¸ªç±»åªç”¨æ¥è¾“å‡ºæˆ–è€…è¾“å…¥ 1234567interface Producer&lt;out T&gt;&#123; fun produce(): T&#125;interface Consumer&lt;in T&gt;&#123; fun consume(product:T)&#125; *ç”¨æ³•Java 123List&lt;?&gt; textViews;ç›¸å½“äºŽList&lt;? extends Object&gt; textViews; Kotlin 123var textVies: List&lt;*&gt;ç›¸å½“äºŽvar textVies: List&lt;out Any&gt; å¦‚æžœç±»åž‹å£°æ˜Žé‡Œï¼Œå·²ç»æœ‰äº†outæˆ–è€…in,è¿™ä¸ªé™åˆ¶åœ¨å˜é‡å£°æ˜Žæ—¶ä¹Ÿä¾ç„¶å­˜åœ¨,ä¸ä¼šå› ä¸º*åŽ»æŽ‰ 1234567interface Counter&lt;out T : Number&gt;&#123; fun count(): T&#125;var counter: Counter&lt;*&gt; =;é‚£ä¹ˆCounter&lt;*&gt;å°±ç›¸å½“äºŽä¸‹é¢çš„æƒ…å†µ Counter&lt;out Number&gt;var counter: Counter&lt;out Number&gt; ç±»åž‹å£°æ˜Žä¸Šç•Œæ³¨æ„è¿™é‡Œæ˜¯T extend Animal ï¼Œå’Œå¸¦? extend Animal çš„å£°æ˜Žä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ java 123class Monster&lt;T extends Animal &amp; Food&gt;&#123;&#125; kotlin 1234class Monster&lt;T : Animal&gt;&#123;&#125; // ä¸€ä¸ªä¸Šç•Œclass Monster&lt;T&gt; where T : Animal, T : Food&#123;&#125; // å¤šä¸ªä¸Šç•Œ refieldjava 123&lt;T&gt; void printIfTypeMatch(Object item)&#123; if(item instanceof T)&#123;&#125; // æŠ¥é”™ï¼Œä¸èƒ½æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡,æ˜¯ä¸æ˜¯ä¸€ä¸ªTçš„å®žä¾‹ &#125; kotlin 12345678fun &lt;T&gt; void printIfTypeMatch(item : Any)&#123; if(item instanceof T)&#123;&#125; // æŠ¥é”™ï¼Œä¸èƒ½æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡,æ˜¯ä¸æ˜¯ä¸€ä¸ªTçš„å®žä¾‹ &#125;inline fun &lt;reified T&gt; void printIfTypeMatch(item : Any)&#123;//reifiedè‡ªèº«é™åˆ¶ï¼Œåªèƒ½ç”¨åœ¨inline if(item instanceof T)&#123;&#125; // æ­£å¸¸ç¼–è¯‘ &#125; Javaæ³›åž‹ç±»1234567891011121314151617181920212223public class Order&lt;T&gt; &#123; String orderName; int orderId; T orderT; public Order() &#123; &#125; public Order(String orderName, int orderId, T orderT) &#123; this.orderName = orderName; this.orderId = orderId; this.orderT = orderT; &#125; public T getOrderT() &#123; return orderT; &#125; public void setOrderT(T orderT) &#123; this.orderT = orderT; &#125;&#125; å­ç±»ä¸æ˜¯æ³›åž‹ç±» çˆ¶ç±»æŒ‡æ˜Žç±»åž‹,ç”±äºŽå­ç±»åœ¨ç»§æ‰¿å¸¦æ³›åž‹çš„çˆ¶ç±»æ—¶ï¼ŒæŒ‡æ˜Žäº†æ³›åž‹ç±»åž‹ï¼Œåˆ™å®žä¾‹åŒ–å­ç±»å¯¹è±¡æ—¶ï¼Œä¸å†éœ€è¦æŒ‡æ˜Žæ³›åž‹ã€‚ 123456789public class SubOrder extends Order&lt;Integer&gt; &#123;&#125;@Testpublic void test1()&#123; //ç”±äºŽå­ç±»åœ¨ç»§æ‰¿å¸¦æ³›åž‹çš„çˆ¶ç±»æ—¶ï¼ŒæŒ‡æ˜Žäº†æ³›åž‹ç±»åž‹ï¼Œåˆ™å®žä¾‹åŒ–å­ç±»å¯¹è±¡æ—¶ï¼Œä¸å†éœ€è¦æŒ‡æ˜Žæ³›åž‹ã€‚ SubOrder subOrder = new SubOrder(); subOrder.setOrderT(1122); &#125; å­çˆ¶ç±»å…³ç³»ç±»Aæ˜¯ç±»Bçš„çˆ¶ç±»ï¼ŒGå’ŒGäºŒè€…ä¸å…·å¤‡çˆ¶å­ç±»å…³ç³»,ä¹Ÿä¸å…·ä»»ä½•å…³ç³»ã€‚ ç±»Aæ˜¯ç±»Bçš„çˆ¶ç±»ï¼ŒAæ˜¯ Bçš„çˆ¶ç±»ã€‚ åè¯æ³•: https://www.bilibili.com/video/BV1fi4y1b7NM?p=11 å­ç±»æ˜¯æ³›åž‹ç±»12345public class SubOrder1&lt;T&gt; extends Order&lt;T&gt; &#123;&#125;SubOrder1&lt;String&gt; sub2 = new SubOrder1&lt;&gt;();sub2.setOrderT(&quot;order...&quot;); æ³›åž‹æ–¹æ³•123456789101112131415161718public class Person3&lt;T&gt; &#123; //æ³›åž‹æ™®é€šæ–¹æ³• public void show(T name) &#123; System.out.println(name + &quot;æ­£åœ¨æ¼”è®²&quot;); &#125; public &lt;M&gt; void show1(M name) &#123; System.out.println(name + &quot;æ­£åœ¨æ¼”è®²&quot;); &#125; //é™æ€æ³›åž‹æ–¹æ³•ä¸­çš„ç±»åž‹å ä½ç¬¦å’Œç±»ä¸­çš„æ³›åž‹å ä½ç¬¦æ˜¯æ²¡æœ‰å…³ç³»çš„ public static &lt;W&gt; void show2(W name) &#123; System.out.println(name + &quot;ï¼šé™æ€æ–¹æ³•æ­£åœ¨æ¼”è®²!&quot;); &#125; public static &lt;E&gt; E show3(E name) &#123; return name; &#125;&#125; æ³›åž‹æŽ¥å£123interface PerInt&lt;T&gt; &#123; fun show(name: T)&#125; æ³›åž‹æŽ¥å£çš„å®žçŽ°ç±» å¯ä»¥æŒ‡å®šå…·ä½“çš„æ³›åž‹æŽ¥å£çš„å…·ä½“æ³›åž‹ç±»åž‹ 1234class PerImtImpl : PerInt&lt;String&gt; &#123; override fun show(name: String) &#123; &#125;&#125; æ³›åž‹æŽ¥å£çš„å®žçŽ°ç±»ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šå…·ä½“çš„æ³›åž‹ç±»åž‹ï¼Œå¿…é¡»è¦åœ¨è¿™ä¸ªå®žçŽ°ç±»ä¸­å£°æ˜Žä¸€ä¸ªæ³›åž‹ç±»åž‹çš„å ä½ç¬¦ç»™æŽ¥å£ç”¨ 1234class PerImtImpl01&lt;T&gt; : PerInt&lt;T&gt; &#123; override fun show(name: T) &#123; &#125;&#125; ç±»åž‹æ“¦é™¤Javaä¸­çš„æ³›åž‹åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨ç¼–è¯‘å™¨è¿™ä¸ªå±‚æ¬¡æ¥å®žçŽ°çš„ã€‚åœ¨ç”Ÿæˆçš„Javaå­—èŠ‚ç ä¸­æ˜¯ä¸åŒ…å«æ³›åž‹ä¸­çš„ç±»åž‹ä¿¡æ¯çš„ã€‚ä½¿ç”¨æ³›åž‹çš„æ—¶å€™åŠ ä¸Šçš„ç±»åž‹å‚æ•°ï¼Œä¼šåœ¨ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™åŽ»æŽ‰ã€‚è¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºç±»åž‹æ“¦é™¤ã€‚ æ³›åž‹çš„ä½œç”¨æ˜¯èƒ½åœ¨ç¼–è¯‘æœŸé—´å°±æç¤ºé”™è¯¯ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ã€‚ 1234val p1 = PerImtImpl01&lt;String&gt;()val p2 = PerImtImpl01&lt;Int&gt;()println(p1.javaClass == p2.javaClass)println(p1.javaClass === p2.javaClass) é€šé…ç¬¦Javaä¸­çš„ç»§æ‰¿ ï¼Œåœ¨æ³›åž‹ä¸­å¹¶ä¸æ˜¯çˆ¶å­ç±»å…³ç³» 12345678910111213141516class PerImtImpl01&lt;T&gt; : PerInt&lt;T&gt; &#123; var name: T get() &#123; return name &#125; set(value) &#123; name = value &#125; override fun show(name: T) &#123; &#125; fun show(p: PerImtImpl01&lt;*&gt;) &#123;//å¦‚æžœæ˜¯Tç±»åž‹ ç¼–è¯‘æŠ¥é”™ï¼Œè™½ç„¶Int:Number,ä½†æ˜¯åœ¨æ³›åž‹ä¸­ä¸å­˜åœ¨ç»§æ‰¿å…³ç³» name = p.name as T &#125;&#125; 1234val p3 = PerImtImpl01&lt;Number&gt;()val p4 = PerImtImpl01&lt;Int&gt;()p3.name = 111p4.show(p3) ç¬¦å·åŒºåˆ«Javaç”¨ ï¼Ÿ Kotlin ç”¨ * æ— ç•Œé€šé…ç¬¦ æ„å‘³ç€å¯ä»¥ä½¿ç”¨ä»»ä½•å¯¹è±¡ï¼Œå› æ­¤ä½¿ç”¨å®ƒç±»ä¼¼äºŽä½¿ç”¨åŽŸç”Ÿç±»åž‹ ç±»Aæ˜¯ç±»Bçš„çˆ¶ç±»ï¼ŒGå’ŒGçš„å…¬å…±çš„çˆ¶ç±»æ˜¯: G&lt;?&gt; éåŽ†List12345678910111213141516171819202122232425@Test public void test2()&#123; List&lt;Object&gt; list1 = null; List&lt;String&gt; list2 = null; List&lt;?&gt; list = null; list = list1; list = list2; print(list1); print(list2); &#125; public void print(List&lt;?&gt; list)&#123; Iterator&lt;?&gt; iterator = list.iterator(); while (iterator.hasNext())&#123; Object o = iterator.next(); System.out.println(o); &#125; list.forEach(o -&gt; &#123; System.out.println(o); &#125;); &#125; å¯¹äºŽList å°±ä¸èƒ½å‘å…¶æ·»åŠ æ•°æ®ã€‚å¦‚æžœä»»ä½•ç±»åž‹å¼•ç”¨é€šè¿‡èµ‹å€¼ç»™ List èƒ½æ·»åŠ æ•°æ®ï¼Œé‚£å®šä¹‰æ³›åž‹å°±æ²¡æ„ä¹‰äº† 123456789101112131415 List&lt;?&gt; list = null; ArrayList&lt;String&gt; list3 = new ArrayList&lt;&gt;(); list3.add(&quot;AA&quot;); list3.add(&quot;BB&quot;); list3.add(&quot;CC&quot;); list = list3; //æ·»åŠ (å†™å…¥):å¯¹äºŽList&lt;?&gt; å°±ä¸èƒ½å‘å…¶æ·»åŠ æ•°æ®ï¼Œå¦‚æžœèƒ½æ·»åŠ æ•°æ®ï¼Œé‚£å®šä¹‰æ³›åž‹å°±æ²¡æ„ä¹‰äº†ã€‚ //é™¤äº†æ·»åŠ nullä¹‹å¤–// list.add(&quot;MED&quot;);// list.add(&quot;?&quot;); list.add(null); //å¯ä»¥èŽ·å–æ•°æ®ï¼Œè¯»å–çš„æ•°æ®ç±»åž‹ä¸ºObject Object o = list.get(0); System.out.println(o); ä¸Šä¸‹ç•Œå¦‚æžœé™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›åž‹çš„è¯ï¼Œå¿…é¡»å°†é™æ€æ–¹æ³•ä¹Ÿå®šä¹‰æˆæ³›åž‹æ–¹æ³• 12345678910111213public class StaticGenerator&lt;T&gt; &#123; .... .... /** * å¦‚æžœåœ¨ç±»ä¸­å®šä¹‰ä½¿ç”¨æ³›åž‹çš„é™æ€æ–¹æ³•ï¼Œéœ€è¦æ·»åŠ é¢å¤–çš„æ³›åž‹å£°æ˜Žï¼ˆå°†è¿™ä¸ªæ–¹æ³•å®šä¹‰æˆæ³›åž‹æ–¹æ³•ï¼‰ * å³ä½¿é™æ€æ–¹æ³•è¦ä½¿ç”¨æ³›åž‹ç±»ä¸­å·²ç»å£°æ˜Žè¿‡çš„æ³›åž‹ä¹Ÿä¸å¯ä»¥ã€‚ * å¦‚ï¼špublic static void show(T t)&#123;..&#125;,æ­¤æ—¶ç¼–è¯‘å™¨ä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼š &quot;StaticGenerator cannot be refrenced from static context&quot; */ public static &lt;T&gt; void show(T t)&#123; &#125;&#125; ä¸Šç•Œ&lt;? extends T&gt;ä¸èƒ½å¾€é‡Œå­˜ï¼Œåªèƒ½å¾€å¤–å–ï¼Œé€‚åˆé¢‘ç¹å¾€å¤–é¢è¯»å–å†…å®¹çš„åœºæ™¯ã€‚ ä¸‹ç•Œ&lt;? super T&gt;ä¸å½±å“å¾€é‡Œå­˜ï¼Œä½†å¾€å¤–å–åªèƒ½æ”¾åœ¨Objectå¯¹è±¡é‡Œï¼Œé€‚åˆç»å¸¸å¾€é‡Œé¢æ’å…¥æ•°æ®çš„åœºæ™¯ã€‚ ä¸Šç•Œé€šé…ç¬¦ &lt;? extends T&gt;æ³›åž‹ä¸­çš„ç»§æ‰¿ æ³›åž‹ä¸­çš„ç»§æ‰¿ä¸æ˜¯Javaä¸­çš„ç»§æ‰¿ã€‚ä¹Ÿå°±æ˜¯è¯´javaä¸­çš„çˆ¶å­ç±»å…³ç³»ï¼Œ åœ¨æ³›åž‹ä¸­ å¹¶ä¸æ˜¯çˆ¶å­ç±»å…³ç³»ã€‚ 1234567891011121314151617181920212223class Fruit &#123;&#125;class Apple extends Fruit &#123;&#125;class Plate&lt;T&gt; &#123; T item; public Plate() &#123; &#125; public Plate(T item) &#123; this.item &#x3D; item; &#125; public T get() &#123; return item; &#125; public void set(T item) &#123; this.item &#x3D; item; &#125;&#125; ? extends Fruitèµ‹å€¼ ï¼Œæ— æ³•æ·»åŠ æ•°æ®ï¼Œä¸çŸ¥é“å­ç±»åˆ°åº•å¤šå°.? extends Fruit å¯ä»¥ç†è§£ä¸º &lt;= Fruit, List&lt;? extends Fruit&gt; å¯ä»¥ä½œä¸º List ï¼Œ Listçš„çˆ¶ç±»ã€‚ 1234567891011121314151617// List&lt;Fruit&gt; list1 = new ArrayList&lt;Apple&gt;(); //ç¼–è¯‘æŠ¥é”™ï¼Œæ³›åž‹å…·ä½“ç±»åž‹ List&lt;Fruit&gt; ,ArrayList&lt;Apple&gt; ä¸å­˜åœ¨ç»§æ‰¿å…³ç³» // ? extends Fruit å¯ä»¥ç†è§£ä¸º &lt;= Fruit // List&lt;? extends Fruit&gt; // å¯ä»¥ä½œä¸º List&lt;Apple&gt; ï¼Œ List&lt;Fruit&gt;çš„çˆ¶ç±»ã€‚ List&lt;? extends Fruit&gt; list4 = new ArrayList&lt;Apple&gt;(); List&lt;? extends Fruit&gt; list5= new ArrayList&lt;Fruit&gt;();// List&lt;? extends Fruit&gt; list5 =new ArrayList&lt;Object&gt;(); //ç¼–è¯‘æŠ¥é”™ï¼ŒObjectç±»ä¸åœ¨ &lt;= FruitèŒƒå›´å†… /** * åªèƒ½è¯»å–æ•°æ® , ä¸èƒ½ä¿®æ”¹æ•°æ® */ Fruit fruit = list4.get(0);// Apple apple =list2.get(0); //ç¼–è¯‘ä¸é€šè¿‡ï¼Œ &lt;= FruitèŒƒå›´ï¼Œlist1.get(0)å®žé™…ç±»åž‹å¯èƒ½æ˜¯Fruitï¼Œæ˜¯Appleçš„çˆ¶ç±»ã€‚// list1.add(new Apple()); //ç¼–è¯‘æŠ¥é”™ï¼Œ&lt;= FruitèŒƒå›´ï¼Œ List&lt;? extends Fruit&gt;å®žé™…ç±»åž‹å¯èƒ½æ¯”æ˜¯GreenApple,æ¯”AppleèŒƒå›´è¿˜å°ï¼Œéšæ„å­˜ä¸äº†æ•°æ® è¯»å–æ•°æ®? extends Fruit æ‰€ä»¥æ³›åž‹æœ€å¤§çš„çˆ¶ç±»å°±æ˜¯Fruit,å­ç±»åž‹å¯ä»¥ç›´æŽ¥å¤åˆ¶ç»™çˆ¶ç±» 12345678 /** * åªèƒ½è¯»å–æ•°æ® , ä¸èƒ½ä¿®æ”¹æ•°æ® */ Fruit fruit = list4.get(0);// Apple apple =list2.get(0); //ç¼–è¯‘ä¸é€šè¿‡ï¼Œ &lt;= FruitèŒƒå›´ï¼Œlist1.get(0)å®žé™…ç±»åž‹å¯èƒ½æ˜¯Fruitï¼Œæ˜¯Appleçš„çˆ¶ç±»ã€‚// list1.add(new Apple()); //ç¼–è¯‘æŠ¥é”™ï¼Œ&lt;= FruitèŒƒå›´ï¼Œ List&lt;? extends Fruit&gt;å®žé™…ç±»åž‹å¯èƒ½æ¯”æ˜¯GreenApple,æ¯”AppleèŒƒå›´è¿˜å°ï¼Œéšæ„å­˜ä¸äº†æ•°æ® ä½ ä¼šå‘çŽ°æ— æ³•å¾€é‡Œé¢è®¾ç½®ä»»ä½•æ•°æ®ï¼ŒæŒ‰é“ç†è¯´æˆ‘ä»¬å°†æ³›åž‹ç±»åž‹è®¾ç½®ä¸º? extend Fruitã€‚æŒ‰ç†è¯´æˆ‘ä»¬å¾€é‡Œé¢æ·»åŠ Fruitçš„å­ç±»åº”è¯¥æ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯Javaç¼–è¯‘å™¨ä¸å…è®¸è¿™æ ·æ“ä½œã€‚&lt;? extends Fruit&gt;ä¼šä½¿å¾€ç›˜å­é‡Œæ”¾ä¸œè¥¿çš„set()æ–¹æ³•å¤±æ•ˆã€‚ä½†å–ä¸œè¥¿get()æ–¹æ³•è¿˜æœ‰æ•ˆ åŽŸå› æ˜¯ï¼šJavaç¼–è¯‘æœŸåªçŸ¥é“å®¹å™¨é‡Œé¢å­˜æ”¾çš„æ˜¯Fruitå’Œå®ƒçš„å­ç±»ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆç±»åž‹ä¸çŸ¥é“ï¼Œå¯èƒ½æ˜¯Fruitï¼Ÿå¯èƒ½æ˜¯Appleï¼Ÿä¹Ÿå¯èƒ½æ˜¯Bananaï¼ŒRedAppleï¼ŒGreenAppleï¼Ÿç¼–è¯‘å™¨åœ¨åŽé¢çœ‹åˆ°Plate&lt; Apple &gt;èµ‹å€¼ä»¥åŽï¼Œç›˜å­é‡Œé¢æ²¡æœ‰æ ‡è®°ä¸ºâ€œè‹¹æžœâ€ã€‚åªæ˜¯æ ‡è®°äº†ä¸€ä¸ªå ä½ç¬¦â€œCAP#1â€ï¼Œæ¥è¡¨ç¤ºæ•èŽ·ä¸€ä¸ªFruitæˆ–è€…Fruitçš„æ´¾ç”Ÿç±»ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆç±»åž‹ä¸çŸ¥é“ã€‚æ‰€æœ‰è°ƒç”¨ä»£ç æ— è®ºå¾€å®¹å™¨é‡Œé¢æ’å…¥Appleæˆ–è€…Meatæˆ–è€…Fruitç¼–è¯‘å™¨éƒ½ä¸çŸ¥é“èƒ½ä¸èƒ½å’Œè¿™ä¸ªâ€œCAP#1â€åŒ¹é…ï¼Œæ‰€ä»¥è¿™äº›æ“ä½œéƒ½ä¸å…è®¸ã€‚ ä¸€ä¸ªPlate&lt;? extends Fruit&gt;çš„å¼•ç”¨ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªPlate ç±»åž‹çš„ç›˜å­ï¼Œè¦å¾€è¿™ä¸ªç›˜å­é‡Œæ”¾å½“ç„¶æ˜¯ä¸è¢«å…è®¸çš„. ä½†æ˜¯ä¸Šç•Œé€šé…ç¬¦æ˜¯å…è®¸è¯»å–æ“ä½œçš„ã€‚ä¾‹å¦‚ä»£ç  è¿™ä¸ªæˆ‘ä»¬å¾ˆå¥½ç†è§£ï¼Œç”±äºŽä¸Šç•Œé€šé…ç¬¦è®¾å®šå®¹å™¨ä¸­åªèƒ½å­˜æ”¾FruitåŠå…¶å­ç±»ï¼Œé‚£ä¹ˆèŽ·å–å‡ºæ¥çš„æˆ‘ä»¬éƒ½å¯ä»¥éšå¼çš„è½¬ä¸ºFruitåŸºç±»ã€‚æ‰€ä»¥ä¸Šç•Œæè¿°ç¬¦Extendsé€‚åˆé¢‘ç¹è¯»å–çš„åœºæ™¯ã€‚ Javaç±»åž‹æ“¦é™¤åªä¼šæ“¦é™¤åˆ°Fruitç±»åž‹,å¦‚æžœæ²¡æœ‰æŒ‡æ˜Žè¾¹ç•Œï¼Œé‚£ä¹ˆç±»åž‹å‚æ•°å°†è¢«æ“¦é™¤åˆ°Object. å†™å…¥æ•°æ®å¯ä»¥å‘çŽ°ä»»ä½•æ•°æ®éƒ½ä¸èƒ½å­˜å…¥ã€‚[-âˆž,Fruit]èŒƒå›´ï¼Œ-âˆžä¸çŸ¥é“å…·ä½“çš„ç±»åž‹å°åˆ°å¤šå°‘ 1list1.add(new Apple()); //ç¼–è¯‘æŠ¥é”™ï¼Œ&lt;= FruitèŒƒå›´ï¼Œ List&lt;? extends Fruit&gt;å®žé™…ç±»åž‹å¯èƒ½æ¯”æ˜¯GreenApple,æ¯”AppleèŒƒå›´è¿˜å°ï¼Œéšæ„å­˜ä¸äº†æ•°æ® ä¸‹ç•Œé€šé…ç¬¦ &lt;? super T&gt; ? super Fruitèµ‹å€¼,åªèƒ½æ·»åŠ æ•°æ® ã€‚ ? super Fruit å¯ä»¥ç†è§£ä¸º &gt;= Fruit 12345678910 //åªèƒ½ä¿®æ”¹æ•°æ®ï¼Œä¸èƒ½è¯»å–æ•°æ® // &lt;? super Fruit&gt; List&lt;? super Fruit&gt; list6 = new ArrayList&lt;Fruit&gt;(); // ? super Fruit å¯ä»¥ç†è§£ä¸º &gt;= Fruit List&lt;? super Fruit&gt; list7 = new ArrayList&lt;Object&gt;(); Object object = list6.get(0); //ç†è®ºä¸Šä¸èƒ½è¯»å–ï¼Œä½†æ˜¯éƒ½åˆ°Objectè¿˜æ˜¯å¯ä»¥çš„// Food food = list2.get(0); //ç¼–è¯‘ä¸é€šè¿‡ï¼Œ&gt;=FruitèŒƒå›´ï¼Œlist2.get(0)å®žé™…ç±»åž‹å¯èƒ½æ˜¯Object,ä¸èƒ½èµ‹å€¼ç»™å°äºŽå®ƒå­ç±»ï¼Œæ‰€ä»¥åªèƒ½æ˜¯Object è¯»å–æ•°æ®123 Object object = list6.get(0); //ç†è®ºä¸Šä¸èƒ½è¯»å–ï¼Œä½†æ˜¯éƒ½åˆ°Objectè¿˜æ˜¯å¯ä»¥çš„// Food food = list2.get(0); //ç¼–è¯‘ä¸é€šè¿‡ï¼Œ&gt;=FruitèŒƒå›´ï¼Œlist2.get(0)å®žé™…ç±»åž‹å¯èƒ½æ˜¯Object,ä¸èƒ½èµ‹å€¼ç»™å°äºŽå®ƒå­ç±»ï¼Œæ‰€ä»¥åªèƒ½æ˜¯Object å†™å…¥æ•°æ® ? super FruitèŒƒå›´æ˜¯æ˜¯ [Fruit,+âˆž), æ‰€ä»¥FruitèŒƒå›´å†…çš„éƒ½å¯ä»¥æ·»åŠ  123 list6.add(new Fruit()); list6.add(new Apple()); //// list6.add(new Food()); // ? super FruitèŒƒå›´æ˜¯æ˜¯ [Fruit,+âˆž), æ‰€ä»¥FruitèŒƒå›´å†…çš„éƒ½å¯ä»¥æ·»åŠ  ä¸‹ç•Œé€šé…ç¬¦&lt;? super Fruit&gt;ä¸å½±å“å¾€é‡Œé¢å­˜å‚¨ï¼Œä½†æ˜¯è¯»å–å‡ºæ¥çš„æ•°æ®åªèƒ½æ˜¯Objectç±»åž‹ã€‚ ä¸‹ç•Œé€šé…ç¬¦è§„å®šäº†å…ƒç´ æœ€å°çš„ç²’åº¦ï¼Œå¿…é¡»æ˜¯Fruitæˆ–å…¶åŸºç±»ï¼Œé‚£ä¹ˆæˆ‘å¾€é‡Œé¢å­˜å‚¨FruitåŠå…¶å­ç±»éƒ½æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºå®ƒéƒ½å¯ä»¥éšå¼çš„è½¬åŒ–ä¸ºFruitç±»åž‹ã€‚ä½†æ˜¯å¾€å¤–è¯»å°±ä¸å¥½æŽ§åˆ¶äº†ï¼Œé‡Œé¢å­˜å‚¨çš„éƒ½æ˜¯FruitåŠå…¶åŸºç±»ï¼Œæ— æ³•è½¬åž‹ä¸ºä»»ä½•ä¸€ç§ç±»åž‹ï¼Œåªæœ‰ObjectåŸºç±»æ‰èƒ½è£…ä¸‹ã€‚ https://juejin.im/post/5b614848e51d45355d51f792 www.jianshu.com/p/dd34211f2565 https://itimetraveler.github.io/2016/12/27/%E3%80%90Java%E3%80%91%E6%B3%9B%E5%9E%8B%E4%B8%AD%20extends%20%E5%92%8C%20super%20%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F/ https://www.bilibili.com/video/BV1xJ411n77R?p=7 kotlinout in å’Œ extend superæ²¡å…³ç³» outåªèƒ½èŽ·å– ä¸èƒ½ä¿®æ”¹ 1234 var list:MutableList&lt;out Fruit&gt; = ArrayList&lt;Apple&gt;() // ? extends Fruit å®žé™…ç±»åž‹å¯èƒ½æ¯”æ˜¯Appleå°// list.add(Apple()) ç¼–è¯‘æŠ¥é”™ var list2: ArrayList&lt;in Apple&gt; = ArrayList&lt;Fruit&gt;() // ? super Fruit å®žé™…ç±»åž‹å¯èƒ½æ¯”æ˜¯Appleå¤§å¾ˆå¤š// list2.get(0) https://www.bilibili.com/video/BV1xv411k7Dd?p=4&amp;spm_id_from=pageDriver https://noteforme.github.io/2021/08/21/kotlin-object/#Out-In https://www.bilibili.com/video/BV1Hy4y1H7oS?p=7 æ³›åž‹æ•°ç»„ å¯ä»¥å£°æ˜Žå¸¦æ³›åž‹çš„æ•°ç»„å¼•ç”¨ï¼Œä½†æ˜¯ä¸èƒ½ç›´æŽ¥åˆ›å»ºå¸¦æ³›åž‹çš„æ•°ç»„å¯¹è±¡ 123456789ArrayList&lt;Integer&gt; intList = new ArrayList&lt;&gt;();intList.add(100); ArrayList&lt;String&gt; strList = new ArrayList&lt;&gt;();strList.add(&quot;abc&quot;);listArr[0] = strList;String s = listArr[0].get(0);System.out.println(s); å¯ä»¥é€šè¿‡java.lang.reflect.Arrayçš„newInstance(Class,int) åˆ›å»ºT[]æ•°ç»„ 12345678910111213141516171819public class FruitArr&lt;T&gt; &#123; private T[] array; public FruitArr(Class&lt;T&gt; clz, int length) &#123; this.array = (T[]) Array.newInstance(clz, length); &#125; public void put(int index, T item) &#123; array[index] = item; &#125; public T get(int index)&#123; return array[index]; &#125; public T[] getArray()&#123; return array; &#125;&#125; 123456FruitArr&lt;String&gt; fruit = new FruitArr&lt;&gt;(String.class,3);fruit.put(0,&quot;è‹¹æžœ&quot;);fruit.put(1,&quot;è¥¿ç“œ&quot;);fruit.put(2,&quot;é¦™è•‰&quot;);String s1 = Arrays.toString(fruit.getArray());System.out.println(s1); â€‹ æ³›åž‹ä¸Žåå°„123Class&lt;Person&gt; personClass = Person.class;Constructor&lt;Person&gt; constructor = personClass.getConstructor();Person person = constructor.newInstance(); â€‹ https://www.bilibili.com/video/BV1xJ411n77R?p=12 $i$f$withM æœ‰æ—¶å€™çœ‹åˆ°$ä»¥ä¸ºæ˜¯æ“ä½œç¬¦ï¼Œå…¶å®žå°±æ˜¯$i$f$withMæ•´ä½“çš„å˜é‡ 123Array&lt;out Any&gt; å¯¹åº”äºŽ Java çš„ Array&lt;? extends Object&gt;Array&lt;in String&gt; å¯¹åº”äºŽ Java çš„ Array&lt;? super String&gt;","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"token","slug":"token","date":"2018-03-29T09:41:28.000Z","updated":"2021-08-19T11:11:44.316Z","comments":true,"path":"2018/03/29/token/","link":"","permalink":"https://noteforme.github.io/2018/03/29/token/","excerpt":"","text":"rxjava æ–¹å¼http://alighters.com/blog/2016/05/02/rxjava-plus-retrofitshi-xian-wang-luo-dai-li/http://alighters.com/blog/2016/08/22/rxjava-plus-retrofitshi-xian-zhi-demo/ æœ€æµè¡Œçš„ç½‘ç»œè¯·æ±‚æ¡†æž¶Rxjava2+Retrofitä¹‹Tokenå¤„ç† https://blog.csdn.net/jdsjlzx/article/details/52442113 https://blog.csdn.net/qq_20521573/article/details/76100558 æ‹¦æˆªå™¨åšæŽ§åˆ¶https://blog.csdn.net/u012771445/article/details/79750648 https://blog.csdn.net/bestlbw/article/details/53984647 https://www.jianshu.com/p/c325f5c32709 RxjavaPluginå¤„ç†tokenhttps://github.com/ssseasonnn/RxErrorHandler","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"RxJava01","slug":"RxJava01","date":"2018-03-28T09:58:39.000Z","updated":"2021-08-19T11:11:44.237Z","comments":true,"path":"2018/03/28/RxJava01/","link":"","permalink":"https://noteforme.github.io/2018/03/28/RxJava01/","excerpt":"","text":"RxJavaDescribe subscribeOn() æŒ‡å®šä¸Šæ¸¸å‘é€äº‹ä»¶çš„çº¿ç¨‹, observeOn æŒ‡å®šçš„æ˜¯ä¸‹æ¸¸æŽ¥æ”¶äº‹ä»¶çš„çº¿ç¨‹ å¤šæ¬¡æŒ‡å®šä¸Šæ¸¸çš„çº¿ç¨‹åªæœ‰ç¬¬ä¸€æ¬¡æŒ‡å®šçš„æœ‰æ•ˆ,å°±æ˜¯subscribeOn()åªæœ‰ç¬¬ä¸€æ¬¡æœ‰æ•ˆ,å…¶ä½™å¿½ç•¥ å¯ä»¥å¤šæ¬¡æŒ‡å®šä¸‹æ¸¸çº¿ç¨‹,æ¯è°ƒç”¨ä¸€æ¬¡observeOn(),ä¸‹æ¸¸çš„çº¿ç¨‹å°±ä¼šåˆ‡æ¢ä¸€æ¬¡ Demoåœ¨ AndroidDemo -&gt; RXLeran-&gt;RXåŸºç¡€-&gt;Rxçº¿ç¨‹åˆ‡æ¢ é“¾å¼è°ƒç”¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758RetrofitFactory.create(ICommonApis.class) .imgUpServer(part) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .doOnNext(new Consumer&lt;PictureUp&gt;() &#123; @Override public void accept(PictureUp pictureUp) throws Exception &#123; List&lt;PictureUp.ModelListBean&gt; picList = pictureUp.getModel_list(); if (picList != null &amp;&amp; !picList.isEmpty()) &#123; String feet_id = picList.get(0).getFile_group_id(); //ä¸Šä¼ æˆåŠŸ if (!isEmpty(feet_id) &amp;&amp; mvpView != null) &#123; mvpView.upFeetId(feet_id); &#125; &#125; &#125; &#125;) .observeOn(Schedulers.io()) .flatMap(new Function&lt;PictureUp, ObservableSource&lt;BaseCount&gt;&gt;() &#123; @Override public ObservableSource&lt;BaseCount&gt; apply(PictureUp pictureUp) throws Exception &#123; List&lt;PictureUp.ModelListBean&gt; picList = pictureUp.getModel_list(); if (picList != null &amp;&amp; !picList.isEmpty()) &#123; String feet_id = picList.get(0).getFile_group_id(); //ä¸Šä¼ æˆåŠŸ if (!isEmpty(feet_id) &amp;&amp; mvpView != null) &#123; mvpView.upFeetId(feet_id); &#125;else &#123; return Observable.error(new Exception()); &#125; &#125; return RetrofitFactory.create(ICommonApis.class).offlineBoxInfo(requestBody); &#125; &#125;) .subscribe(new Consumer&lt;BaseCount&gt;() &#123; @Override public void accept(BaseCount baseCount) throws Exception &#123; if (mvpView == null) &#123; return; &#125; if (baseCount.getMeta().getStatusCode() == AUTH_FAILED) &#123; mvpView.unOfficeEquip(baseCount); &#125; else if (baseCount.getMeta().getStatusCode() == 0) &#123; mvpView.upSuccess(); &#125; else &#123; if (baseCount.getMeta() != null &amp;&amp; !isEmpty(baseCount.getMeta().getDescribe())) &#123; ToastUtil.showBiggerText(baseCount.getMeta().getDescribe()); &#125; &#125; &#125; &#125;, new Consumer&lt;Throwable&gt;() &#123; @Override public void accept(Throwable throwable) throws Exception &#123; if (mvpView != null) &#123; mvpView.upUserInfoFailed(); &#125; &#125; &#125;); 123456789101112131415161718192021222324252627282930313233343536fun getImgScan() &#123; val request = RetrofitWeChatFactory.create(IApiStore::class.java) request.get_access_token() .flatMap &#123; request.getTicket(it.access_token, 2) &#125; .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .subscribe(object : Observer&lt;WeChatSecond&gt; &#123; override fun onComplete() &#123; &#125; override fun onSubscribe(d: Disposable) &#123; &#125; override fun onNext(t: WeChatSecond) &#123; val noncestr = LoginNewActivity.getRandomString(8) val timeStamp = (System.currentTimeMillis() / 1000).toString() t.ticket?.let &#123; val string1 = String.format( &quot;appid=%s&amp;noncestr=%s&amp;sdk_ticket=%s&amp;timestamp=%s&quot;, WeChatAppID, noncestr, it, timeStamp ) val sha = EncryptUtils.getSHA(string1) mvpView.sign(noncestr, timeStamp, sha) &#125; &#125; override fun onError(e: Throwable) &#123; &#125; &#125;)&#125; http://yamlee.me/2020/03/11/2020-03-11-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3RxJava%E4%B8%8ERxKotlin/ http://reactivex.io/documentation/operators.html https://www.jianshu.com/p/fa1828d70192 https://www.cnblogs.com/fuyaozhishang/p/8697404.html Sampleæ°´ç®¡ç³»åˆ— https://github.com/ReactiveX/RxAndroidhttps://github.com/amitshekhariitbhu/RxJava2-Android-Sampleshttps://github.com/rengwuxian/RxJavaSample https://github.com/ssseasonnn/RxJava2Demo https://juejin.im/post/5b8f536c5188255c352d3528 RxJava åªçœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº†(ä¸Š) RxJava åªçœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº† (ä¸­) RxJava åªçœ‹è¿™ä¸€ç¯‡æ–‡ç« å°±å¤Ÿäº† (ä¸‹) ä½¿ç”¨MVP Dagger2 https://juejin.im/post/5d5ce44d5188252231108e68 https://juejin.im/user/590210f4ac502e0063d338f5/posts","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"RxJava","slug":"RxJava","permalink":"https://noteforme.github.io/tags/RxJava/"}]},{"title":"interview-answer","slug":"interview-answer","date":"2018-03-12T04:44:01.000Z","updated":"2024-10-01T12:00:04.537Z","comments":true,"path":"2018/03/12/interview-answer/","link":"","permalink":"https://noteforme.github.io/2018/03/12/interview-answer/","excerpt":"","text":"é˜¿é‡Œé¢è¯•é¢˜1.androidäº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹ äº‹ä»¶åˆ†å‘ï¼ˆé¢è¯•ï¼‰.png 2.android viewç»˜åˆ¶æœºåˆ¶å’ŒåŠ è½½è¿‡ç¨‹ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹ 1.ViewRootImplä¼šè°ƒç”¨performTraversals(),å…¶å†…éƒ¨ä¼šè°ƒç”¨performMeasure()ã€performLayoutã€performDraw()ã€‚ 2.performMeasure()ä¼šè°ƒç”¨æœ€å¤–å±‚çš„ViewGroupçš„measure()â€“&gt;onMeasure(),ViewGroupçš„onMeasure()æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œä½†å…¶æä¾›äº†measureChildren()ï¼Œè¿™ä¹‹ä¸­ä¼šéåŽ†å­Viewç„¶åŽå¾ªçŽ¯è°ƒç”¨measureChild()è¿™ä¹‹ä¸­ä¼šç”¨getChildMeasureSpec()+çˆ¶Viewçš„MeasureSpec+å­Viewçš„LayoutParamä¸€èµ·èŽ·å–æœ¬Viewçš„MeasureSpecï¼Œç„¶åŽè°ƒç”¨å­Viewçš„measure()åˆ°Viewçš„onMeasure()â€“&gt;setMeasureDimension(getDefaultSize(),getDefaultSize()),getDefaultSize()é»˜è®¤è¿”å›žmeasureSpecçš„æµ‹é‡æ•°å€¼ï¼Œæ‰€ä»¥ç»§æ‰¿Viewè¿›è¡Œè‡ªå®šä¹‰çš„wrap_contentéœ€è¦é‡å†™ã€‚ 3.performLayout()ä¼šè°ƒç”¨æœ€å¤–å±‚çš„ViewGroupçš„layout(l,t,r,b),æœ¬Viewåœ¨å…¶ä¸­ä½¿ç”¨setFrame()è®¾ç½®æœ¬Viewçš„å››ä¸ªé¡¶ç‚¹ä½ç½®ã€‚åœ¨onLayout(æŠ½è±¡æ–¹æ³•)ä¸­ç¡®å®šå­Viewçš„ä½ç½®ï¼Œå¦‚LinearLayoutä¼šéåŽ†å­Viewï¼Œå¾ªçŽ¯è°ƒç”¨setChildFrame()â€“&gt;å­View.layout()ã€‚ 4.performDraw()ä¼šè°ƒç”¨æœ€å¤–å±‚ViewGroupçš„draw():å…¶ä¸­ä¼šå…ˆåŽè°ƒç”¨background.draw()(ç»˜åˆ¶èƒŒæ™¯)ã€onDraw()(ç»˜åˆ¶è‡ªå·±)ã€dispatchDraw()(ç»˜åˆ¶å­View)ã€onDrawScrollBars()(ç»˜åˆ¶è£…é¥°)ã€‚ 5.MeasureSpecç”±2ä½SpecMode(UNSPECIFIEDã€EXACTLY(å¯¹åº”ç²¾ç¡®å€¼å’Œmatch_parent)ã€AT_MOST(å¯¹åº”warp_content))å’Œ30ä½SpecSizeç»„æˆä¸€ä¸ªint,DecorViewçš„MeasureSpecç”±çª—å£å¤§å°å’Œå…¶LayoutParamså†³å®šï¼Œå…¶ä»–Viewç”±çˆ¶Viewçš„MeasureSpecå’Œæœ¬Viewçš„LayoutParamså†³å®šã€‚ViewGroupä¸­æœ‰getChildMeasureSpec()æ¥èŽ·å–å­Viewçš„MeasureSpecã€‚ 6.ä¸‰ç§æ–¹å¼èŽ·å–measure()åŽçš„å®½é«˜ï¼š 1.Activity#onWindowFocusChange()ä¸­è°ƒç”¨èŽ·å– 2.view.post(Runnable)å°†èŽ·å–çš„ä»£ç æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚ 3.ViewTreeObservable. è‡ªå®šä¹‰ View çš„ç»˜åˆ¶é¡ºåº 3.androidå››å¤§ç»„ä»¶çš„åŠ è½½è¿‡ç¨‹ï¼Œè¯·è¯¦ç»†ä»‹ç»ä¸‹ 1.androidå››å¤§ç»„ä»¶çš„åŠ è½½è¿‡ç¨‹:è¿™æ˜¯æˆ‘æ€»ç»“çš„ä¸€ç¯‡åšå®¢ 4.Activityçš„å¯åŠ¨æ¨¡å¼ 1.standard:é»˜è®¤æ ‡å‡†æ¨¡å¼ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®žä¾‹ï¼Œ 2.singleTopï¼šæ ˆé¡¶å¤ç”¨ï¼Œå¦‚æžœåœ¨æ ˆé¡¶å°±è°ƒç”¨onNewIntentå¤ç”¨ï¼Œä»ŽonResume()å¼€å§‹ 3.singleTaskï¼šæ ˆå†…å¤ç”¨ï¼Œæœ¬æ ˆå†…åªè¦ç”¨è¯¥ç±»åž‹Activityå°±ä¼šå°†å…¶é¡¶éƒ¨çš„activityå‡ºæ ˆ 4.singleInstanceï¼šå•ä¾‹æ¨¡å¼ï¼Œé™¤äº†3ä¸­ç‰¹æ€§ï¼Œç³»ç»Ÿä¼šå•ç‹¬ç»™è¯¥Activityåˆ›å»ºä¸€ä¸ªæ ˆï¼Œ 5.Aã€Bã€Cã€Dåˆ†åˆ«æ˜¯å››ç§Activityçš„å¯åŠ¨æ¨¡å¼ï¼Œé‚£ä¹ˆA-&gt;B-&gt;C-&gt;D-&gt;A-&gt;B-&gt;C-&gt;Dåˆ†åˆ«å¯åŠ¨ï¼Œæœ€åŽçš„activityæ ˆæ˜¯æ€Žä¹ˆæ ·çš„ 1.è¿™ä¸ªé¢˜ç›®éœ€è¦æ·±å…¥äº†è§£activityçš„å¯åŠ¨æ¨¡å¼ 2.æœ€åŽçš„ç­”æ¡ˆæ˜¯ï¼šä¸¤ä¸ªæ ˆï¼Œå‰å°æ ˆæ˜¯åªæœ‰Dï¼ŒåŽå°æ ˆä»Žåº•è‡³ä¸Šæ˜¯Aã€Bã€C 6.Activityç¼“å­˜æ–¹æ³• 1.é…ç½®æ”¹å˜å¯¼è‡´Activityè¢«æ€æ­»ï¼Œæ¨ªå±å˜ç«–å±ï¼šåœ¨onStopä¹‹å‰ä¼šè°ƒç”¨onSaveInstanceState()ä¿å­˜æ•°æ®åœ¨é‡å»ºActivityä¹‹åŽï¼Œä¼šåœ¨onStart()ä¹‹åŽè°ƒç”¨onRestoreInstanceState(),å¹¶æŠŠä¿å­˜ä¸‹æ¥çš„Bundleä¼ ç»™onCreate()å’Œå®ƒä¼šé»˜è®¤é‡å»ºActivityå½“å‰çš„è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨onCreate()ä¸­ï¼Œå›žå¤è‡ªå·±çš„æ•°æ®ã€‚ 2.å†…å­˜ä¸è¶³æ€æŽ‰Activityï¼Œä¼˜å…ˆçº§åˆ†åˆ«æ˜¯ï¼šå‰å°å¯è§ï¼Œå¯è§éžå‰å°ï¼ŒåŽå°ã€‚ 7.Serviceçš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸¤ç§å¯åŠ¨æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ« 1.context.startService() -&gt;onCreate()- &gt;onStart()-&gt;Service runningâ€“&gt;(å¦‚æžœè°ƒç”¨context.stopService() )-&gt;onDestroy() -&gt;Service shut down 1.å¦‚æžœServiceè¿˜æ²¡æœ‰è¿è¡Œï¼Œåˆ™è°ƒç”¨onCreate()ç„¶åŽè°ƒç”¨onStart()ï¼› 2.å¦‚æžœServiceå·²ç»è¿è¡Œï¼Œåˆ™åªè°ƒç”¨onStart()ï¼Œæ‰€ä»¥ä¸€ä¸ªServiceçš„onStartæ–¹æ³•å¯èƒ½ä¼šé‡å¤è°ƒç”¨å¤šæ¬¡ã€‚ 3.è°ƒç”¨stopServiceçš„æ—¶å€™ç›´æŽ¥onDestroyï¼Œ 4.å¦‚æžœæ˜¯è°ƒç”¨è€…è‡ªå·±ç›´æŽ¥é€€å‡ºè€Œæ²¡æœ‰è°ƒç”¨stopServiceçš„è¯ï¼ŒServiceä¼šä¸€ç›´åœ¨åŽå°è¿è¡Œã€‚è¯¥Serviceçš„è°ƒç”¨è€…å†å¯åŠ¨èµ·æ¥åŽå¯ä»¥é€šè¿‡stopServiceå…³é—­Serviceã€‚ 2.context.bindService()-&gt;onCreate()-&gt;onBind()-&gt;Service runningâ€“&gt;onUnbind() -&gt; onDestroy() -&gt;Service stop 1.onBindå°†è¿”å›žç»™å®¢æˆ·ç«¯ä¸€ä¸ªIBindæŽ¥å£å®žä¾‹ï¼ŒIBindå…è®¸å®¢æˆ·ç«¯å›žè°ƒæœåŠ¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚å¾—åˆ°Serviceè¿è¡Œçš„çŠ¶æ€æˆ–å…¶ä»–æ“ä½œã€‚ 2.è¿™ä¸ªæ—¶å€™ä¼šæŠŠè°ƒç”¨è€…å’ŒServiceç»‘å®šåœ¨ä¸€èµ·ï¼ŒContexté€€å‡ºäº†,Serviceå°±ä¼šè°ƒç”¨onUnbind-&gt;onDestroyç›¸åº”é€€å‡ºã€‚ 3.æ‰€ä»¥è°ƒç”¨bindServiceçš„ç”Ÿå‘½å‘¨æœŸä¸ºï¼šonCreate â€“&gt; onBind(åªä¸€æ¬¡ï¼Œä¸å¯å¤šæ¬¡ç»‘å®š) â€“&gt; onUnbind â€“&gt; onDestoryã€‚ 8.æ€Žä¹ˆä¿è¯serviceä¸è¢«æ€æ­» 1.æå‡serviceä¼˜å…ˆçº§ 2.æå‡serviceè¿›ç¨‹ä¼˜å…ˆçº§ 3.onDestroyæ–¹æ³•é‡Œé‡å¯service 9.é™æ€çš„Broadcast å’ŒåŠ¨æ€çš„æœ‰ä»€ä¹ˆåŒºåˆ« 1.åŠ¨æ€çš„æ¯”é™æ€çš„å®‰å…¨ 2.é™æ€åœ¨appå¯åŠ¨çš„æ—¶å€™å°±åˆå§‹åŒ–äº† åŠ¨æ€ä½¿ç”¨ä»£ç åˆå§‹åŒ– 3.é™æ€éœ€è¦é…ç½® åŠ¨æ€ä¸éœ€è¦ 4.ç”Ÿå­˜æœŸï¼Œé™æ€å¹¿æ’­çš„ç”Ÿå­˜æœŸå¯ä»¥æ¯”åŠ¨æ€å¹¿æ’­çš„é•¿å¾ˆå¤š 5.ä¼˜å…ˆçº§åŠ¨æ€å¹¿æ’­çš„ä¼˜å…ˆçº§æ¯”é™æ€å¹¿æ’­é«˜ 10.Intentå¯ä»¥ä¼ é€’å“ªäº›æ•°æ®ç±»åž‹ 1.Serializable 2.charsequence: ä¸»è¦ç”¨æ¥ä¼ é€’Stringï¼Œcharç­‰ 3.parcelable 4.Bundle 11.Jsonæœ‰ä»€ä¹ˆä¼˜åŠ£åŠ¿ã€è§£æžçš„åŽŸç† 1.JSONçš„é€Ÿåº¦è¦è¿œè¿œå¿«äºŽXML 2.JSONç›¸å¯¹äºŽXMLæ¥è®²ï¼Œæ•°æ®çš„ä½“ç§¯å° 3.JSONå¯¹æ•°æ®çš„æè¿°æ€§æ¯”XMLè¾ƒå·® 4.è§£æžçš„åŸºæœ¬åŽŸç†æ˜¯ï¼šè¯æ³•åˆ†æž 12.ä¸€ä¸ªè¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹ 1.è¯æ³•åˆ†æžï¼šå°†ä¸€ä¸²æ–‡æœ¬æŒ‰è§„åˆ™åˆ†å‰²æˆæœ€å°çš„ç»“æž„ï¼Œå…³é”®å­—ã€æ ‡è¯†ç¬¦ã€è¿ç®—ç¬¦ã€ç•Œç¬¦å’Œå¸¸é‡ç­‰ã€‚ä¸€èˆ¬å®žçŽ°æ–¹æ³•æ˜¯è‡ªåŠ¨æœºå’Œæ­£åˆ™è¡¨è¾¾å¼ 2.è¯­æ³•åˆ†æžï¼šå°†ä¸€ç³»åˆ—å•è¯ç»„åˆæˆè¯­æ³•æ ‘ã€‚ä¸€èˆ¬å®žçŽ°æ–¹æ³•æœ‰è‡ªé¡¶å‘ä¸‹å’Œè‡ªåº•å‘ä¸Š 3.è¯­ä¹‰åˆ†æžï¼šå¯¹ç»“æž„ä¸Šæ­£ç¡®çš„æºç¨‹åºè¿›è¡Œä¸Šä¸‹æ–‡æœ‰å…³æ€§è´¨çš„å®¡æŸ¥ 4.ç›®æ ‡ä»£ç ç”Ÿæˆ 5.ä»£ç ä¼˜åŒ–ï¼šä¼˜åŒ–ç”Ÿæˆçš„ç›®æ ‡ä»£ç ï¼Œ 13.åŠ¨ç”»æœ‰å“ªå‡ ç±»ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ 1.åŠ¨ç”»çš„åŸºæœ¬åŽŸç†ï¼šå…¶å®žå°±æ˜¯åˆ©ç”¨æ’å€¼å™¨å’Œä¼°å€¼å™¨ï¼Œæ¥è®¡ç®—å‡ºå„ä¸ªæ—¶åˆ»Viewçš„å±žæ€§ï¼Œç„¶åŽé€šè¿‡æ”¹å˜Viewçš„å±žæ€§æ¥ï¼Œå®žçŽ°Viewçš„åŠ¨ç”»æ•ˆæžœã€‚ 2.ViewåŠ¨ç”»:åªæ˜¯å½±åƒå˜åŒ–ï¼Œviewçš„å®žé™…ä½ç½®è¿˜åœ¨åŽŸæ¥çš„åœ°æ–¹ã€‚ 3.å¸§åŠ¨ç”»æ˜¯åœ¨xmlä¸­å®šä¹‰å¥½ä¸€ç³»åˆ—å›¾ç‰‡ä¹‹åŽï¼Œä½¿ç”¨AnimationDrawableæ¥æ’­æ”¾çš„åŠ¨ç”»ã€‚ 4.Viewçš„å±žæ€§åŠ¨ç”»ï¼š 1.æ’å€¼å™¨ï¼šä½œç”¨æ˜¯æ ¹æ®æ—¶é—´çš„æµé€çš„ç™¾åˆ†æ¯”æ¥è®¡ç®—å±žæ€§æ”¹å˜çš„ç™¾åˆ†æ¯” 2.ä¼°å€¼å™¨ï¼šåœ¨1çš„åŸºç¡€ä¸Šç”±è¿™ä¸ªä¸œè¥¿æ¥è®¡ç®—å‡ºå±žæ€§åˆ°åº•å˜åŒ–äº†å¤šå°‘æ•°å€¼çš„ç±» 14.Handlerã€Looperæ¶ˆæ¯é˜Ÿåˆ—æ¨¡åž‹ï¼Œå„éƒ¨åˆ†çš„ä½œç”¨ 1.MessageQueueï¼šè¯»å–ä¼šè‡ªåŠ¨åˆ é™¤æ¶ˆæ¯ï¼Œå•é“¾è¡¨ç»´æŠ¤ï¼Œåœ¨æ’å…¥å’Œåˆ é™¤ä¸Šæœ‰ä¼˜åŠ¿ã€‚åœ¨å…¶next()ä¸­ä¼šæ— é™å¾ªçŽ¯ï¼Œä¸æ–­åˆ¤æ–­æ˜¯å¦æœ‰æ¶ˆæ¯ï¼Œæœ‰å°±è¿”å›žè¿™æ¡æ¶ˆæ¯å¹¶ç§»é™¤ã€‚ 2.Looperï¼šLooperåˆ›å»ºçš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªMessageQueueï¼Œè°ƒç”¨loop()æ–¹æ³•çš„æ—¶å€™æ¶ˆæ¯å¾ªçŽ¯å¼€å§‹ï¼Œloop()ä¹Ÿæ˜¯ä¸€ä¸ªæ­»å¾ªçŽ¯ï¼Œä¼šä¸æ–­è°ƒç”¨messageQueueçš„next()ï¼Œå½“æœ‰æ¶ˆæ¯å°±å¤„ç†ï¼Œå¦åˆ™é˜»å¡žåœ¨messageQueueçš„next()ä¸­ã€‚å½“Looperçš„quit()è¢«è°ƒç”¨çš„æ—¶å€™ä¼šè°ƒç”¨messageQueueçš„quit(),æ­¤æ—¶next()ä¼šè¿”å›žnullï¼Œç„¶åŽloop()æ–¹æ³•ä¹Ÿè·Ÿç€é€€å‡ºã€‚ 3.Handlerï¼šåœ¨ä¸»çº¿ç¨‹æž„é€ ä¸€ä¸ªHandlerï¼Œç„¶åŽåœ¨å…¶ä»–çº¿ç¨‹è°ƒç”¨sendMessage(),æ­¤æ—¶ä¸»çº¿ç¨‹çš„MessageQueueä¸­ä¼šæ’å…¥ä¸€æ¡messageï¼Œç„¶åŽè¢«Looperä½¿ç”¨ã€‚ 4.ç³»ç»Ÿçš„ä¸»çº¿ç¨‹åœ¨ActivityThreadçš„main()ä¸ºå…¥å£å¼€å¯ä¸»çº¿ç¨‹ï¼Œå…¶ä¸­å®šä¹‰äº†å†…éƒ¨ç±»Activity.Hå®šä¹‰äº†ä¸€ç³»åˆ—æ¶ˆæ¯ç±»åž‹ï¼ŒåŒ…å«å››å¤§ç»„ä»¶çš„å¯åŠ¨åœæ­¢ã€‚ 5.MessageQueueå’ŒLooperæ˜¯ä¸€å¯¹ä¸€å…³ç³»ï¼ŒHandlerå’ŒLooperæ˜¯å¤šå¯¹ä¸€ 15.æ€Žæ ·é€€å‡ºç»ˆæ­¢App 1.è‡ªå·±è®¾ç½®ä¸€ä¸ªActivityçš„æ ˆï¼Œç„¶åŽä¸€ä¸ªä¸ªfinish() 16.Android IPC:BinderåŽŸç† 1.åœ¨Activityå’ŒServiceè¿›è¡Œé€šè®¯çš„æ—¶å€™ï¼Œç”¨åˆ°äº†Binderã€‚ 1.å½“å±žäºŽåŒä¸ªè¿›ç¨‹æˆ‘ä»¬å¯ä»¥ç»§æ‰¿Binderç„¶åŽåœ¨Activityä¸­å¯¹Serviceè¿›è¡Œæ“ä½œ 2.å½“ä¸å±žäºŽåŒä¸ªè¿›ç¨‹ï¼Œé‚£ä¹ˆè¦ç”¨åˆ°AIDLè®©ç³»ç»Ÿç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBinderï¼Œç„¶åŽåœ¨Activityä¸­å¯¹è¿œç«¯çš„Serviceè¿›è¡Œæ“ä½œã€‚ 2.ç³»ç»Ÿç»™æˆ‘ä»¬ç”Ÿæˆçš„Binderï¼š 1.Stubç±»ä¸­æœ‰:æŽ¥å£æ–¹æ³•çš„idï¼Œæœ‰è¯¥Binderçš„æ ‡è¯†ï¼Œæœ‰asInterface(IBinder)(è®©æˆ‘ä»¬åœ¨Activityä¸­èŽ·å–å®žçŽ°äº†Binderçš„æŽ¥å£ï¼ŒæŽ¥å£çš„å®žçŽ°åœ¨Serviceé‡Œï¼ŒåŒè¿›ç¨‹æ—¶å€™è¿”å›žStubå¦åˆ™è¿”å›žProxy)ï¼Œæœ‰onTransact()è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ä¸åŒè¿›ç¨‹çš„æ—¶å€™è®©Proxyåœ¨Activityè¿›è¡Œè¿œç«¯è°ƒç”¨å®žçŽ°Activityæ“ä½œService 2.Proxyç±»æ˜¯ä»£ç†ï¼Œåœ¨Activityç«¯ï¼Œå…¶ä¸­æœ‰:IBinder mRemote(è¿™å°±æ˜¯è¿œç«¯çš„Binder)ï¼Œä¸¤ä¸ªæŽ¥å£çš„å®žçŽ°æ–¹æ³•ä¸è¿‡æ˜¯ä»£ç†æœ€ç»ˆè¿˜æ˜¯è¦åœ¨è¿œç«¯çš„onTransact()ä¸­è¿›è¡Œå®žé™…æ“ä½œã€‚ 3.å“ªä¸€ç«¯çš„Binderæ˜¯å‰¯æœ¬ï¼Œè¯¥ç«¯å°±å¯ä»¥è¢«å¦ä¸€ç«¯è¿›è¡Œæ“ä½œï¼Œå› ä¸ºBinderæœ¬ä½“åœ¨å®šä¹‰çš„æ—¶å€™å¯ä»¥æ“ä½œæœ¬ç«¯çš„ä¸œè¥¿ã€‚æ‰€ä»¥å¯ä»¥åœ¨Activityç«¯ä¼ å…¥æœ¬ç«¯çš„Binderï¼Œè®©Serviceç«¯å¯¹å…¶è¿›è¡Œæ“ä½œç§°ä¸ºListenerï¼Œå¯ä»¥ç”¨RemoteCallbackListè¿™ä¸ªå®¹å™¨æ¥è£…Listenerï¼Œé˜²æ­¢Listenerå› ä¸ºç»åŽ†è¿‡åºåˆ—åŒ–è€Œäº§ç”Ÿçš„é—®é¢˜ã€‚ 4.å½“Activityç«¯å‘è¿œç«¯è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œå½“å‰çº¿ç¨‹ä¼šæŒ‚èµ·ï¼Œå½“æ–¹æ³•å¤„ç†å®Œæ¯•æ‰ä¼šå”¤é†’ã€‚ 5.å¦‚æžœä¸€ä¸ªAIDLå°±ç”¨ä¸€ä¸ªServiceå¤ªå¥¢ä¾ˆï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Binderæ± çš„æ–¹å¼ï¼Œå»ºç«‹ä¸€ä¸ªAIDLå…¶ä¸­çš„æ–¹æ³•æ˜¯è¿”å›žIBinderï¼Œç„¶åŽæ ¹æ®æ–¹æ³•ä¸­ä¼ å…¥çš„å‚æ•°è¿”å›žå…·ä½“çš„AIDLã€‚ 6.IPCçš„æ–¹å¼æœ‰ï¼šBundleï¼ˆåœ¨Intentå¯åŠ¨çš„æ—¶å€™ä¼ å…¥ï¼Œä¸è¿‡æ˜¯ä¸€æ¬¡æ€§çš„ï¼‰ï¼Œæ–‡ä»¶å…±äº«(å¯¹äºŽSharedPreferenceæ˜¯ç‰¹ä¾‹ï¼Œå› ä¸ºå…¶åœ¨å†…å­˜ä¸­ä¼šæœ‰ç¼“å­˜)ï¼Œä½¿ç”¨Messenger(å…¶åº•å±‚ç”¨çš„ä¹Ÿæ˜¯AIDLï¼ŒåŒç†è¦æ“ä½œå“ªç«¯ï¼Œå°±åœ¨å“ªç«¯å®šä¹‰Messenger)ï¼ŒAIDLï¼ŒContentProvider(åœ¨æœ¬è¿›ç¨‹ä¸­ç»§æ‰¿å®žçŽ°ä¸€ä¸ªContentProviderï¼Œåœ¨å¢žåˆ æ”¹æŸ¥æ–¹æ³•ä¸­è°ƒç”¨æœ¬è¿›ç¨‹çš„SQLiteï¼Œåœ¨å…¶ä»–è¿›ç¨‹ä¸­æŸ¥è¯¢)ï¼ŒSocket 17.æè¿°ä¸€æ¬¡è·¨è¿›ç¨‹é€šè®¯ 1.clientã€proxyã€serviceManagerã€BinderDriverã€implã€service 2.clientå‘èµ·ä¸€ä¸ªè¯·æ±‚serviceä¿¡æ¯çš„Binderè¯·æ±‚åˆ°BinderDriverä¸­ï¼ŒserviceManagerå‘çŽ°BinderDiriverä¸­æœ‰è‡ªå·±çš„è¯·æ±‚ ç„¶åŽå°†clinetè¯·æ±‚çš„serviceçš„æ•°æ®è¿”å›žç»™clientè¿™æ ·å®Œæˆäº†ä¸€æ¬¡Binderé€šè®¯ 3.clinetèŽ·å–çš„serviceä¿¡æ¯å°±æ˜¯è¯¥serviceçš„proxyï¼Œæ­¤æ—¶è°ƒç”¨proxyçš„æ–¹æ³•ï¼Œproxyå°†è¯·æ±‚å‘é€åˆ°BinderDriverä¸­ï¼Œæ­¤æ—¶serviceçš„ Binderçº¿ç¨‹æ± å¾ªçŽ¯å‘çŽ°æœ‰è‡ªå·±çš„è¯·æ±‚ï¼Œç„¶åŽç”¨implå°±å¤„ç†è¿™ä¸ªè¯·æ±‚æœ€åŽè¿”å›žï¼Œè¿™æ ·å®Œæˆäº†ç¬¬äºŒæ¬¡Binderé€šè®¯4.ä¸­é—´clientå¯æŒ‚èµ·ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‚èµ·ï¼Œæœ‰ä¸€ä¸ªå…³é”®å­—onewayå¯ä»¥è§£å†³è¿™ä¸ª 18.androidé‡è¦æœ¯è¯­è§£é‡Š 1.ActivityManagerServicesï¼Œç®€ç§°AMSï¼ŒæœåŠ¡ç«¯å¯¹è±¡ï¼Œè´Ÿè´£ç³»ç»Ÿä¸­æ‰€æœ‰Activityçš„ç”Ÿå‘½å‘¨æœŸ 2.ActivityThreadï¼ŒAppçš„çœŸæ­£å…¥å£ã€‚å½“å¼€å¯Appä¹‹åŽï¼Œä¼šè°ƒç”¨main()å¼€å§‹è¿è¡Œï¼Œå¼€å¯æ¶ˆæ¯å¾ªçŽ¯é˜Ÿåˆ—ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„UIçº¿ç¨‹æˆ–è€…å«ä¸»çº¿ç¨‹ã€‚ä¸ŽActivityManagerServicesé…åˆï¼Œä¸€èµ·å®ŒæˆActivityçš„ç®¡ç†å·¥ä½œ 3.ApplicationThreadï¼Œç”¨æ¥å®žçŽ°ActivityManagerServiceä¸ŽActivityThreadä¹‹é—´çš„äº¤äº’ã€‚åœ¨ActivityManagerServiceéœ€è¦ç®¡ç†ç›¸å…³Applicationä¸­çš„Activityçš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œé€šè¿‡ApplicationThreadçš„ä»£ç†å¯¹è±¡ä¸ŽActivityThreadé€šè®¯ã€‚ 4.ApplicationThreadProxyï¼Œæ˜¯ApplicationThreadåœ¨æœåŠ¡å™¨ç«¯çš„ä»£ç†ï¼Œè´Ÿè´£å’Œå®¢æˆ·ç«¯çš„ApplicationThreadé€šè®¯ã€‚AMSå°±æ˜¯é€šè¿‡è¯¥ä»£ç†ä¸ŽActivityThreadè¿›è¡Œé€šä¿¡çš„ã€‚ 5.Instrumentationï¼Œæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ªInstrumentationå¯¹è±¡ï¼Œæ¯ä¸ªActivityå†…éƒ½æœ‰ä¸€ä¸ªå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚Instrumentationå¯ä»¥ç†è§£ä¸ºåº”ç”¨è¿›ç¨‹çš„ç®¡å®¶ï¼ŒActivityThreadè¦åˆ›å»ºæˆ–æš‚åœæŸä¸ªActivityæ—¶ï¼Œéƒ½éœ€è¦é€šè¿‡Instrumentationæ¥è¿›è¡Œå…·ä½“çš„æ“ä½œã€‚ 6.ActivityStackï¼ŒActivityåœ¨AMSçš„æ ˆç®¡ç†ï¼Œç”¨æ¥è®°å½•å·²ç»å¯åŠ¨çš„Activityçš„å…ˆåŽå…³ç³»ï¼ŒçŠ¶æ€ä¿¡æ¯ç­‰ã€‚é€šè¿‡ActivityStackå†³å®šæ˜¯å¦éœ€è¦å¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚ 7.ActivityRecordï¼ŒActivityStackçš„ç®¡ç†å¯¹è±¡ï¼Œæ¯ä¸ªActivityåœ¨AMSå¯¹åº”ä¸€ä¸ªActivityRecordï¼Œæ¥è®°å½•Activityçš„çŠ¶æ€ä»¥åŠå…¶ä»–çš„ç®¡ç†ä¿¡æ¯ã€‚å…¶å®žå°±æ˜¯æœåŠ¡å™¨ç«¯çš„Activityå¯¹è±¡çš„æ˜ åƒã€‚ 8.TaskRecordï¼ŒAMSæŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªâ€œä»»åŠ¡â€çš„æ¦‚å¿µï¼Œæ˜¯è®°å½•ActivityRecordçš„æ ˆï¼Œä¸€ä¸ªâ€œTaskâ€åŒ…å«è‹¥å¹²ä¸ªActivityRecordã€‚AMSç”¨TaskRecordç¡®ä¿Activityå¯åŠ¨å’Œé€€å‡ºçš„é¡ºåºã€‚å¦‚æžœä½ æ¸…æ¥šActivityçš„4ç§launchModeï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªæ¦‚å¿µåº”è¯¥ä¸é™Œç”Ÿã€‚ 19.ç†è§£Windowå’ŒWindowManager 1.Windowç”¨äºŽæ˜¾ç¤ºViewå’ŒæŽ¥æ”¶å„ç§äº‹ä»¶ï¼ŒWindowæœ‰ä¸‰ç§ç±»åž‹ï¼šåº”ç”¨Window(æ¯ä¸ªActivityå¯¹åº”ä¸€ä¸ªWindow)ã€å­Window(ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œé™„å±žäºŽç‰¹å®šWindow)ã€ç³»ç»Ÿwindow(Toastå’ŒçŠ¶æ€æ ) 2.Windowåˆ†å±‚çº§ï¼Œåº”ç”¨Windowåœ¨1-99ã€å­Windowåœ¨1000-1999ã€ç³»ç»ŸWindowåœ¨2000-2999.WindowManageræä¾›äº†å¢žåˆ æ”¹Viewä¸‰ä¸ªåŠŸèƒ½ã€‚ 3.Windowæ˜¯ä¸ªæŠ½è±¡æ¦‚å¿µï¼šæ¯ä¸€ä¸ªWindowå¯¹åº”ç€ä¸€ä¸ªViewå’ŒViewRootImplï¼ŒWindowé€šè¿‡ViewRootImplæ¥å’ŒViewå»ºç«‹è”ç³»ï¼ŒViewæ˜¯Windowå­˜åœ¨çš„å®žä½“ï¼Œåªèƒ½é€šè¿‡WindowManageræ¥è®¿é—®Windowã€‚ 4.WindowManagerçš„å®žçŽ°æ˜¯WindowManagerImplå…¶å†å§”æ‰˜ç»™WindowManagerGlobalæ¥å¯¹Windowè¿›è¡Œæ“ä½œï¼Œå…¶ä¸­æœ‰å››ä¸ªListåˆ†åˆ«å‚¨å­˜å¯¹åº”çš„Viewã€ViewRootImplã€WindowManger.LayoutParamså’Œæ­£åœ¨è¢«åˆ é™¤çš„View 5.Windowçš„å®žä½“æ˜¯å­˜åœ¨äºŽè¿œç«¯çš„WindowMangerServiceä¸­ï¼Œæ‰€ä»¥å¢žåˆ æ”¹Windowåœ¨æœ¬ç«¯æ˜¯ä¿®æ”¹ä¸Šé¢çš„å‡ ä¸ªListç„¶åŽé€šè¿‡ViewRootImplé‡ç»˜Viewï¼Œé€šè¿‡WindowSession(æ¯ä¸ªåº”ç”¨ä¸€ä¸ª)åœ¨è¿œç«¯ä¿®æ”¹Windowã€‚ 6.Activityåˆ›å»ºWindowï¼šActivityä¼šåœ¨attach()ä¸­åˆ›å»ºWindowå¹¶è®¾ç½®å…¶å›žè°ƒ(onAttachedToWindow()ã€dispatchTouchEvent()),Activityçš„Windowæ˜¯ç”±Policyç±»åˆ›å»ºPhoneWindowå®žçŽ°çš„ã€‚ç„¶åŽé€šè¿‡Activity#setContentView()è°ƒç”¨PhoneWindowçš„setContentViewã€‚ 20.Bitmapçš„å¤„ç† 1.å½“ä½¿ç”¨ImageViewçš„æ—¶å€™ï¼Œå¯èƒ½å›¾ç‰‡çš„åƒç´ å¤§äºŽImageViewï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡BitmapFactory.Optionæ¥å¯¹å›¾ç‰‡è¿›è¡ŒåŽ‹ç¼©ï¼ŒinSampleSizeè¡¨ç¤ºç¼©å°2^(inSampleSize-1)å€ã€‚ 2.BitMapçš„ç¼“å­˜ï¼š 1.ä½¿ç”¨LruCacheè¿›è¡Œå†…å­˜ç¼“å­˜ã€‚ 2.ä½¿ç”¨DiskLruCacheè¿›è¡Œç¡¬ç›˜ç¼“å­˜ã€‚ 3.å®žçŽ°ä¸€ä¸ªImageLoaderçš„æµç¨‹ï¼šåŒæ­¥å¼‚æ­¥åŠ è½½ã€å›¾ç‰‡åŽ‹ç¼©ã€å†…å­˜ç¡¬ç›˜ç¼“å­˜ã€ç½‘ç»œæ‹‰å– 1.åŒæ­¥åŠ è½½åªåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç„¶åŽæŒ‰ç…§é¡ºåºè¿›è¡Œå›¾ç‰‡åŠ è½½ 2.å¼‚æ­¥åŠ è½½ä½¿ç”¨çº¿ç¨‹æ± ï¼Œè®©å­˜åœ¨çš„åŠ è½½ä»»åŠ¡éƒ½å¤„äºŽä¸åŒçº¿ç¨‹ 3.ä¸ºäº†ä¸å¼€å¯è¿‡å¤šçš„å¼‚æ­¥ä»»åŠ¡ï¼Œåªåœ¨åˆ—è¡¨é™æ­¢çš„æ—¶å€™å¼€å¯å›¾ç‰‡åŠ è½½ 21.å¦‚ä½•å®žçŽ°ä¸€ä¸ªç½‘ç»œæ¡†æž¶ 1.ç¼“å­˜é˜Ÿåˆ—,ä»¥urlä¸ºkeyç¼“å­˜å†…å®¹å¯ä»¥å‚è€ƒBitmapçš„å¤„ç†æ–¹å¼ï¼Œè¿™é‡Œå•ç‹¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹ã€‚ 2.ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—ï¼Œä½¿ç”¨çº¿ç¨‹æ± è¿›è¡Œè¯·æ±‚ã€‚ 3.æä¾›å„ç§ä¸åŒç±»åž‹çš„è¿”å›žå€¼çš„è§£æžå¦‚Stringï¼ŒJsonï¼Œå›¾ç‰‡ç­‰ç­‰ã€‚ 22.ClassLoaderçš„åŸºç¡€çŸ¥è¯† 1.åŒäº²å§”æ‰˜ï¼šä¸€ä¸ªClassLoaderç±»è´Ÿè´£åŠ è½½è¿™ä¸ªç±»æ‰€æ¶‰åŠçš„æ‰€æœ‰ç±»ï¼Œåœ¨åŠ è½½çš„æ—¶å€™ä¼šåˆ¤æ–­è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡ï¼Œç„¶åŽä¼šé€’å½’åŽ»ä»–çˆ¶ClassLoaderä¸­æ‰¾ã€‚ 2.å¯ä»¥åŠ¨æ€åŠ è½½Jaré€šè¿‡URLClassLoader 3.ClassLoader éš”ç¦»é—®é¢˜ JVMè¯†åˆ«ä¸€ä¸ªç±»æ˜¯ç”±ï¼šClassLoader id+PackageName+ClassNameã€‚ 4.åŠ è½½ä¸åŒJaråŒ…ä¸­çš„å…¬å…±ç±»ï¼š 1.è®©çˆ¶ClassLoaderåŠ è½½å…¬å…±çš„Jarï¼Œå­ClassLoaderåŠ è½½åŒ…å«å…¬å…±Jarçš„Jarï¼Œæ­¤æ—¶å­ClassLoaderåœ¨åŠ è½½å…¬å…±Jarçš„æ—¶å€™ä¼šå…ˆåŽ»çˆ¶ClassLoaderä¸­æ‰¾ã€‚(åªé€‚ç”¨Java) 2.é‡å†™åŠ è½½åŒ…å«å…¬å…±Jarçš„Jarçš„ClassLoaderï¼Œåœ¨loadClassä¸­æ‰¾åˆ°å·²ç»åŠ è½½è¿‡å…¬å…±Jarçš„ClassLoaderï¼Œä¹Ÿå°±æ˜¯æŠŠçˆ¶ClassLoaderæ›¿æ¢æŽ‰ã€‚(åªé€‚ç”¨Java) 3.åœ¨ç”ŸæˆåŒ…å«å…¬å…±Jarçš„Jaræ—¶å€™æŠŠå…¬å…±JaråŽ»æŽ‰ã€‚ 25.çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œå¸¸ç”¨çš„çº¿ç¨‹åŒæ­¥ 1.sycnï¼šä¿è¯äº†åŽŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ 2.é”ï¼šä¿è¯äº†åŽŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ 1.è‡ªæ—‹é”:å¯ä»¥ä½¿çº¿ç¨‹åœ¨æ²¡æœ‰å–å¾—é”çš„æ—¶å€™ï¼Œä¸è¢«æŒ‚èµ·ï¼Œè€Œè½¬åŽ»æ‰§è¡Œä¸€ä¸ªç©ºå¾ªçŽ¯ã€‚ 1.ä¼˜ç‚¹:çº¿ç¨‹è¢«æŒ‚èµ·çš„å‡ çŽ‡å‡å°‘ï¼Œçº¿ç¨‹æ‰§è¡Œçš„è¿žè´¯æ€§åŠ å¼ºã€‚ç”¨äºŽå¯¹äºŽé”ç«žäº‰ä¸æ˜¯å¾ˆæ¿€çƒˆï¼Œé”å ç”¨æ—¶é—´å¾ˆçŸ­çš„å¹¶å‘çº¿ç¨‹ã€‚ 2.ç¼ºç‚¹:è¿‡å¤šæµªè´¹CPUæ—¶é—´ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹è¿žç»­ä¸¤æ¬¡è¯•å›¾èŽ·å¾—è‡ªæ—‹é”å¼•èµ·æ­»é” 2.é˜»å¡žé”:æ²¡å¾—åˆ°é”çš„çº¿ç¨‹ç­‰å¾…æˆ–è€…æŒ‚èµ·ï¼ŒSycnã€Lock 3.å¯é‡å…¥é”:ä¸€ä¸ªçº¿ç¨‹å¯å¤šæ¬¡èŽ·å–è¯¥é”ï¼ŒSycnã€Lock 4.æ‚²è§‚é”:æ¯æ¬¡åŽ»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¼šé˜»å¡žå…¨éƒ¨å…¶ä»–çº¿ç¨‹ Sycnã€Lock 5.ä¹è§‚é”:æ¯æ¬¡åŽ»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰åŽ»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚cas 6.æ˜¾ç¤ºé”å’Œå†…ç½®é”:æ˜¾ç¤ºé”ç”¨Lockæ¥å®šä¹‰ã€å†…ç½®é”ç”¨synchronizedã€‚ 7.è¯»-å†™é”:ä¸ºäº†æé«˜æ€§èƒ½ï¼ŒJavaæä¾›äº†è¯» 3.volatile 1.åªèƒ½ä¿è¯å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŽŸå­æ€§ 2.è‡ªå¢žæ“ä½œæœ‰ä¸‰æ­¥ï¼Œæ­¤æ—¶å¤šçº¿ç¨‹å†™ä¼šå‡ºçŽ°é—®é¢˜ 4.cas 1.æ“ä½œ:å†…å­˜å€¼Vã€æ—§çš„é¢„æœŸå€¼Aã€è¦ä¿®æ”¹çš„å€¼Bï¼Œå½“ä¸”ä»…å½“é¢„æœŸå€¼Aå’Œå†…å­˜å€¼Vç›¸åŒæ—¶ï¼Œå°†å†…å­˜å€¼ä¿®æ”¹ä¸ºBå¹¶è¿”å›žtrueï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšå¹¶è¿”å›žfalseã€‚ 2.è§£é‡Š:æœ¬åœ°å‰¯æœ¬ä¸ºAï¼Œå…±äº«å†…å­˜ä¸ºVï¼Œçº¿ç¨‹Aè¦æŠŠVä¿®æ”¹æˆBã€‚æŸä¸ªæ—¶åˆ»çº¿ç¨‹Aè¦æŠŠVä¿®æ”¹æˆBï¼Œå¦‚æžœAå’ŒVä¸åŒé‚£ä¹ˆå°±è¡¨ç¤ºæœ‰å…¶ä»–çº¿ç¨‹åœ¨ä¿®æ”¹Vï¼Œæ­¤æ—¶å°±è¡¨ç¤ºä¿®æ”¹å¤±è´¥ï¼Œå¦åˆ™è¡¨ç¤ºæ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œé‚£ä¹ˆæŠŠVæ”¹æˆBã€‚ 3.å±€é™:å¦‚æžœVè¢«ä¿®æ”¹æˆV1ç„¶åŽåˆè¢«æ”¹æˆVï¼Œæ­¤æ—¶casè¯†åˆ«ä¸å‡ºå˜åŒ–ï¼Œè¿˜æ˜¯è®¤ä¸ºæ²¡æœ‰å…¶ä»–çº¿ç¨‹åœ¨ä¿®æ”¹Vï¼Œæ­¤æ—¶å°±ä¼šæœ‰é—®é¢˜ 4.å±€é™è§£å†³:å°†Vå¸¦ä¸Šç‰ˆæœ¬ã€‚ 5.çº¿ç¨‹ä¸å®‰å…¨åˆ°åº•æ˜¯æ€Žä¹ˆå›žäº‹ï¼š 1.ä¸€ä¸ªçº¿ç¨‹å†™ï¼Œå¤šä¸ªçº¿ç¨‹è¯»çš„æ—¶å€™ï¼Œä¼šé€ æˆå†™äº†ä¸€åŠå°±åŽ»è¯» 2.å¤šçº¿ç¨‹å†™ï¼Œä¼šé€ æˆè„æ•°æ® 26.Asynctaskå’Œçº¿ç¨‹æ± ï¼ŒGCç›¸å…³ï¼ˆæ€Žä¹ˆåˆ¤æ–­å“ªäº›å†…å­˜è¯¥GCï¼ŒGCç®—æ³•ï¼‰ 1.Asynctaskï¼šå¼‚æ­¥ä»»åŠ¡ç±»ï¼Œå•çº¿ç¨‹çº¿ç¨‹æ± +Handler 2.çº¿ç¨‹æ± ï¼š 1.ThreadPoolExecutorï¼šé€šè¿‡Executorså¯ä»¥æž„é€ å•çº¿ç¨‹æ± ã€å›ºå®šæ•°ç›®çº¿ç¨‹æ± ã€ä¸å›ºå®šæ•°ç›®çº¿ç¨‹æ± ã€‚ 2.ScheduledThreadPoolExecutorï¼šå¯ä»¥å»¶æ—¶è°ƒç”¨çº¿ç¨‹æˆ–è€…å»¶æ—¶é‡å¤è°ƒåº¦çº¿ç¨‹ã€‚ 3.GCç›¸å…³ï¼šé‡è¦ 1.æœç´¢ç®—æ³•ï¼š 1.å¼•ç”¨è®¡æ•° 2.å›¾æœç´¢ï¼Œå¯è¾¾æ€§åˆ†æž 2.å›žæ”¶ç®—æ³•ï¼š 1.æ ‡è®°æ¸…é™¤å¤åˆ¶ï¼šç”¨äºŽé’å¹´ä»£ 2.æ ‡è®°æ•´ç†ï¼šç”¨äºŽè€å¹´ä»£ 3.å †åˆ†åŒºï¼š 1.é’å¹´åŒºeden 80%ã€survivor1 10%ã€survivor2 10% 2.è€å¹´åŒº 4.è™šæ‹Ÿæœºæ ˆåˆ†åŒºï¼š 1.å±€éƒ¨å˜é‡è¡¨ 2.æ“ä½œæ•°æ ˆ 3.åŠ¨æ€é“¾æŽ¥ 4.æ–¹æ³•è¿”å›žåœ°å€ 5.GC Roots: 1.è™šæ‹Ÿæœºæ ˆ(æ ˆæ¡¢ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­çš„å¼•ç”¨çš„å¯¹è±¡ 2.æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±žæ€§å¼•ç”¨çš„å¯¹è±¡ 3.æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ 4.æœ¬åœ°æ–¹æ³•æ ˆä¸­JNIçš„å¼•ç”¨çš„å¯¹è±¡ 28.æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–ï¼šç´¢å¼•å’Œäº‹åŠ¡ï¼Œéœ€è¦æ‰¾æœ¬ä¸“é—¨çš„ä¹¦å¤§æ¦‚äº†è§£ä¸€ä¸‹29.13.APKæ‰“åŒ…æµç¨‹å’Œå…¶å†…å®¹ 1.æµç¨‹ 1.aaptç”ŸæˆRæ–‡ä»¶ 2.aidlç”Ÿæˆjavaæ–‡ä»¶ 3.å°†å…¨éƒ¨javaæ–‡ä»¶ç¼–è¯‘æˆclassæ–‡ä»¶ 4.å°†å…¨éƒ¨classæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹åŒ…åˆå¹¶æˆdexæ–‡ä»¶ 5.å°†èµ„æºã€soæ–‡ä»¶ã€dexæ–‡ä»¶æ•´åˆæˆapk 6.apkç­¾å 7.apkå­—èŠ‚å¯¹é½ 2.å†…å®¹ï¼šsoã€dexã€assetã€èµ„æºæ–‡ä»¶ 31.javaç±»åŠ è½½è¿‡ç¨‹ï¼š 1.åŠ è½½æ—¶æœºï¼šåˆ›å»ºå®žä¾‹ã€è®¿é—®é™æ€å˜é‡æˆ–æ–¹æ³•ã€åå°„ã€åŠ è½½å­ç±»ä¹‹å‰ 2.éªŒè¯ï¼šéªŒè¯æ–‡ä»¶æ ¼å¼ã€å…ƒæ•°æ®ã€å­—èŠ‚ç ã€ç¬¦å·å¼•ç”¨çš„æ­£ç¡®æ€§ 3.åŠ è½½ï¼šæ ¹æ®å…¨ç±»åèŽ·å–æ–‡ä»¶å­—èŠ‚æµã€å°†å­—èŠ‚æµè½¬åŒ–ä¸ºé™æ€å‚¨å­˜ç»“æž„æ”¾å…¥æ–¹æ³•åŒºã€ç”Ÿæˆclasså¯¹è±¡ 4.å‡†å¤‡ï¼šåœ¨å †ä¸Šä¸ºé™æ€å˜é‡åˆ’åˆ†å†…å­˜ 5.è§£æžï¼šå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æŽ¥å¼•ç”¨ 6.åˆå§‹åŒ–ï¼šåˆå§‹åŒ–é™æ€å˜é‡ 7.ä¹¦ç±æŽ¨èï¼šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºï¼Œåšå®¢æŽ¨èï¼šJava&#x2F;Androidé˜¿é‡Œé¢è¯•JVMéƒ¨åˆ†ç†è§£ 32.retrofitçš„äº†è§£ 1.åŠ¨æ€ä»£ç†åˆ›å»ºä¸€ä¸ªæŽ¥å£çš„ä»£ç†ç±» 2.é€šè¿‡åå°„è§£æžæ¯ä¸ªæŽ¥å£çš„æ³¨è§£ã€å…¥å‚æž„é€ httpè¯·æ±‚ 3.èŽ·å–åˆ°è¿”å›žçš„httpè¯·æ±‚ï¼Œä½¿ç”¨Adapterè§£æžæˆéœ€è¦çš„è¿”å›žå€¼ã€‚ 33.bundleçš„æ•°æ®ç»“æž„ï¼Œå¦‚ä½•å­˜å‚¨ 1.é”®å€¼å¯¹å‚¨å­˜ 2.ä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯booleanã€byteã€intã€longã€floatã€doubleã€stringç­‰åŸºæœ¬ç±»åž‹æˆ–å®ƒä»¬å¯¹åº”çš„æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„ã€‚ 3.å½“Bundleä¼ é€’çš„æ˜¯å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„æ—¶ï¼Œå¿…é¡»å®žçŽ°Serializable æˆ–ParcelableæŽ¥å£ 34.listviewå†…ç‚¹å‡»buttomå¹¶ç§»åŠ¨çš„äº‹ä»¶æµå®Œæ•´æ‹¦æˆªè¿‡ç¨‹ï¼š 1.ç‚¹ä¸‹æŒ‰é’®çš„æ—¶å€™ï¼š 1.äº§ç”Ÿäº†ä¸€ä¸ªdownäº‹ä»¶ï¼Œactivityâ€“&gt;phoneWindowâ€“&gt;ViewGroupâ€“&gt;ListViewâ€“&gt;botton,ä¸­é—´å¦‚æžœæœ‰é‡å†™äº†æ‹¦æˆªæ–¹æ³•ï¼Œåˆ™äº‹ä»¶è¢«è¯¥viewæ‹¦æˆªå¯èƒ½æ¶ˆè€—ã€‚ 2.æ²¡æ‹¦æˆªï¼Œäº‹ä»¶åˆ°è¾¾äº†buttonï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å»ºç«‹äº†ä¸€æ¡äº‹ä»¶ä¼ é€’çš„viewé“¾è¡¨ 3.åˆ°buttonçš„dispatchæ–¹æ³•â€“&gt;onTouchâ€“&gt;viewæ˜¯å¦å¯ç”¨â€“&gt;Touchä»£ç† 2.ç§»åŠ¨ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™: 1.äº§ç”Ÿmoveäº‹ä»¶ï¼ŒlistViewä¸­ä¼šå¯¹moveäº‹ä»¶åšæ‹¦æˆª 2.æ­¤æ—¶listViewä¼šå°†è¯¥æ»‘åŠ¨äº‹ä»¶æ¶ˆè´¹æŽ‰ 3.åŽç»­çš„æ»‘åŠ¨äº‹ä»¶éƒ½ä¼šè¢«listViewæ¶ˆè´¹æŽ‰ 3.æ‰‹æŒ‡æŠ¬èµ·æ¥æ—¶å€™ï¼šå‰é¢å»ºç«‹äº†ä¸€ä¸ªviewé“¾è¡¨ï¼ŒlistViewçš„çˆ¶viewåœ¨èŽ·å–äº‹ä»¶çš„æ—¶å€™ï¼Œä¼šç›´æŽ¥å–é“¾è¡¨ä¸­çš„listViewè®©å…¶è¿›è¡Œäº‹ä»¶æ¶ˆè€—ã€‚ 35.serviceçš„æ„ä¹‰ï¼šä¸éœ€è¦ç•Œé¢ï¼Œåœ¨åŽå°æ‰§è¡Œçš„ç¨‹åº36.androidçš„IPCé€šä¿¡æ–¹å¼ï¼Œçº¿ç¨‹ï¼ˆè¿›ç¨‹é—´ï¼‰é€šä¿¡æœºåˆ¶æœ‰å“ªäº› 1.ipcé€šä¿¡æ–¹å¼ï¼šbinderã€contentproviderã€socket 2.æ“ä½œç³»ç»Ÿè¿›ç¨‹é€šè®¯æ–¹å¼ï¼šå…±äº«å†…å­˜ã€socketã€ç®¡é“ 37.æ“ä½œç³»ç»Ÿè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« 1.ç®€è€Œè¨€ä¹‹,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹. 2.çº¿ç¨‹çš„åˆ’åˆ†å°ºåº¦å°äºŽè¿›ç¨‹ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜ã€‚ 3.å¦å¤–ï¼Œè¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ï¼Œä»Žè€Œæžå¤§åœ°æé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆçŽ‡ã€‚ 4.å¤šçº¿ç¨‹çš„æ„ä¹‰åœ¨äºŽä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰å¤šä¸ªæ‰§è¡Œéƒ¨åˆ†å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚æœ‰å°†å¤šä¸ªçº¿ç¨‹çœ‹åšå¤šä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œæ¥å®žçŽ°è¿›ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ä»¥åŠèµ„æºåˆ†é… 38.HashMapçš„å®žçŽ°è¿‡ç¨‹ï¼šCapacityå°±æ˜¯bucketsçš„æ•°ç›®ï¼ŒLoad factorå°±æ˜¯bucketså¡«æ»¡ç¨‹åº¦çš„æœ€å¤§æ¯”ä¾‹ã€‚å¦‚æžœå¯¹è¿­ä»£æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„è¯ä¸è¦æŠŠcapacityè®¾ç½®è¿‡å¤§ï¼Œä¹Ÿä¸è¦æŠŠload factorè®¾ç½®è¿‡å°ã€‚ 1.ç®€å•æ¥è¯´HashMapå°±æ˜¯ä¸€ä¸ªä¼šè‡ªåŠ¨æ‰©å®¹çš„æ•°ç»„é“¾è¡¨ 2.putè¿‡ç¨‹ 1.å¯¹keyçš„hashCode()åšhashï¼Œç„¶åŽå†è®¡ç®—index; 2.å¦‚æžœæ²¡ç¢°æ’žç›´æŽ¥æ”¾åˆ°bucketé‡Œï¼› 3.å¦‚æžœç¢°æ’žäº†ï¼Œä»¥é“¾è¡¨çš„å½¢å¼å­˜åœ¨bucketsåŽï¼› 4.å¦‚æžœç¢°æ’žå¯¼è‡´é“¾è¡¨è¿‡é•¿(å¤§äºŽç­‰äºŽTREEIFY_THRESHOLD)ï¼Œå°±æŠŠé“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘ï¼› 5.å¦‚æžœèŠ‚ç‚¹å·²ç»å­˜åœ¨å°±æ›¿æ¢old value(ä¿è¯keyçš„å”¯ä¸€æ€§) 6.å¦‚æžœbucketæ»¡äº†(è¶…è¿‡load factor*current capacity)ï¼Œå°±è¦resizeã€‚ 3.resizeï¼šå½“putæ—¶ï¼Œå¦‚æžœå‘çŽ°ç›®å‰çš„bucketå ç”¨ç¨‹åº¦å·²ç»è¶…è¿‡äº†Load Factoræ‰€å¸Œæœ›çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿresizeã€‚åœ¨resizeçš„è¿‡ç¨‹ï¼Œç®€å•çš„è¯´å°±æ˜¯æŠŠbucketæ‰©å……ä¸º2å€ï¼Œä¹‹åŽé‡æ–°è®¡ç®—indexï¼ŒæŠŠèŠ‚ç‚¹å†æ”¾åˆ°æ–°çš„bucketä¸­ 4.getè¿‡ç¨‹ 1.æ ¹æ®keyçš„hashç®—å‡ºæ•°ç»„ä¸‹è¡¨ 2.ä½¿ç”¨equalséåŽ†é“¾è¡¨è¿›è¡Œæ¯”è¾ƒ 39.mvcã€mvpã€mvvmï¼š 1.mvc:æ•°æ®ã€Viewã€Activityï¼ŒViewå°†æ“ä½œåé¦ˆç»™Activityï¼ŒActivitiyåŽ»èŽ·å–æ•°æ®ï¼Œæ•°æ®é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼åˆ·æ–°ç»™Viewã€‚å¾ªçŽ¯ä¾èµ– 1.Activityé‡ï¼Œå¾ˆéš¾å•å…ƒæµ‹è¯• 2.Viewå’ŒModelè€¦åˆä¸¥é‡ 2.mvp:æ•°æ®ã€Viewã€Presenterï¼ŒViewå°†æ“ä½œç»™Presenterï¼ŒPresenteråŽ»èŽ·å–æ•°æ®ï¼Œæ•°æ®èŽ·å–å¥½äº†è¿”å›žç»™Presenterï¼ŒPresenteråŽ»åˆ·æ–°Viewã€‚PVï¼ŒPMåŒå‘ä¾èµ– 1.æŽ¥å£çˆ†ç‚¸ 2.Presenterå¾ˆé‡ 3.mvvm:æ•°æ®ã€Viewã€ViewModelï¼ŒViewå°†æ“ä½œç»™ViewModelï¼ŒViewModelåŽ»èŽ·å–æ•°æ®ï¼Œæ•°æ®å’Œç•Œé¢ç»‘å®šäº†ï¼Œæ•°æ®æ›´æ–°ç•Œé¢æ›´æ–°ã€‚ 1.viewModelçš„ä¸šåŠ¡é€»è¾‘å¯ä»¥å•ç‹¬æ‹¿æ¥æµ‹è¯• 2.ä¸€ä¸ªview å¯¹åº”ä¸€ä¸ª viewModel ä¸šåŠ¡é€»è¾‘å¯ä»¥åˆ†ç¦»ï¼Œä¸ä¼šå‡ºçŽ°å…¨èƒ½ç±» 3.æ•°æ®å’Œç•Œé¢ç»‘å®šäº†ï¼Œä¸ç”¨å†™åžƒåœ¾ä»£ç ï¼Œä½†æ˜¯å¤ç”¨èµ·æ¥ä¸èˆ’æœ 40.javaçš„çº¿ç¨‹å¦‚ä½•å®žçŽ° 1.Threadç»§æ‰¿ 2.Runnale 3.Future 4.çº¿ç¨‹æ±  41.ArrayList å¦‚ä½•åˆ é™¤é‡å¤çš„å…ƒç´ æˆ–è€…æŒ‡å®šçš„å…ƒç´ ï¼› 1.åˆ é™¤é‡å¤ï¼šSet 2.åˆ é™¤æŒ‡å®šï¼šè¿­ä»£å™¨ 42.å¦‚ä½•è®¾è®¡åœ¨ UDP ä¸Šå±‚ä¿è¯ UDP çš„å¯é æ€§ä¼ è¾“ï¼› 1.ç®€å•æ¥è®²ï¼Œè¦ä½¿ç”¨UDPæ¥æž„å»ºå¯é çš„é¢å‘è¿žæŽ¥çš„æ•°æ®ä¼ è¾“ï¼Œå°±è¦å®žçŽ°ç±»ä¼¼äºŽTCPåè®®çš„è¶…æ—¶é‡ä¼ ï¼Œæœ‰åºæŽ¥å—ï¼Œåº”ç­”ç¡®è®¤ï¼Œæ»‘åŠ¨çª—å£æµé‡æŽ§åˆ¶ç­‰æœºåˆ¶,ç­‰äºŽè¯´è¦åœ¨ä¼ è¾“å±‚çš„ä¸Šä¸€å±‚ï¼ˆæˆ–è€…ç›´æŽ¥åœ¨åº”ç”¨å±‚ï¼‰å®žçŽ°TCPåè®®çš„å¯é æ•°æ®ä¼ è¾“æœºåˆ¶ã€‚ 2.æ¯”å¦‚ä½¿ç”¨UDPæ•°æ®åŒ…+åºåˆ—å·ï¼ŒUDPæ•°æ®åŒ…+æ—¶é—´æˆ³ç­‰æ–¹æ³•ï¼Œåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œåº”ç­”ç¡®è®¤æœºåˆ¶ï¼Œè¿™æ ·å°±ä¼šä¿è¯ä¸å¯é çš„UDPåè®®è¿›è¡Œå¯é çš„æ•°æ®ä¼ è¾“ã€‚ 3.åŸºäºŽudpçš„å¯é ä¼ è¾“åè®®æœ‰ï¼šRUDPã€RTPã€UDT 43.Java ä¸­å†…éƒ¨ç±»ä¸ºä»€ä¹ˆå¯ä»¥è®¿é—®å¤–éƒ¨ç±» 1.å› ä¸ºå†…éƒ¨ç±»åˆ›å»ºçš„æ—¶å€™ï¼Œéœ€è¦å¤–éƒ¨ç±»çš„å¯¹è±¡ï¼Œåœ¨å†…éƒ¨ç±»å¯¹è±¡åˆ›å»ºçš„æ—¶å€™ä¼šæŠŠå¤–éƒ¨ç±»çš„å¼•ç”¨ä¼ é€’è¿›åŽ» 44.è®¾è®¡ç§»åŠ¨ç«¯çš„è”ç³»äººå­˜å‚¨ä¸ŽæŸ¥è¯¢çš„åŠŸèƒ½ï¼Œè¦æ±‚å¿«é€Ÿæœç´¢è”ç³»äººï¼Œå¯ä»¥ç”¨åˆ°å“ªäº›æ•°æ®ç»“æž„ï¼Ÿæ•°æ®åº“ç´¢å¼•ï¼Œå¹³è¡¡äºŒå‰æ ‘(Bæ ‘ã€çº¢é»‘æ ‘)45.çº¢é»‘æ ‘ç‰¹ç‚¹ 1.rootèŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹æ˜¯é»‘è‰² 2.çº¢è‰²èŠ‚ç‚¹åŽå¿…é¡»ä¸ºé»‘è‰²èŠ‚ç‚¹ 3.ä»Žrootåˆ°å¶å­æ¯æ¡è·¯å¾„çš„é»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ 46.linuxå¼‚æ­¥å’ŒåŒæ­¥i&#x2F;o: 1.åŒæ­¥ï¼šå¯¹äºŽclientï¼Œclientä¸€ç›´ç­‰å¾…ï¼Œä½†æ˜¯clientä¸æŒ‚èµ·ï¼šä¸»çº¿ç¨‹è°ƒç”¨ 2.å¼‚æ­¥ï¼šå¯¹äºŽclientï¼Œclientå‘èµ·è¯·æ±‚ï¼Œserviceå¥½äº†å†å›žè°ƒclientï¼šå…¶ä»–çº¿ç¨‹è°ƒç”¨ï¼Œè°ƒç”¨å®Œæˆä¹‹åŽè¿›è¡Œå›žè°ƒ 3.é˜»å¡žï¼šå¯¹äºŽserviceï¼Œåœ¨å‡†å¤‡ioçš„æ—¶å€™ä¼šå°†serviceç«¯æŒ‚èµ·ï¼Œç›´è‡³å‡†å¤‡å®Œæˆç„¶åŽå”¤é†’serviceï¼šbio 3.éžé˜»å¡žï¼šå¯¹äºŽserviceï¼Œåœ¨å‡†å¤‡ioçš„æ—¶å€™ä¸ä¼šå°†serviceç«¯æŒ‚èµ·ï¼Œè€Œæ˜¯serviceä¸€ç›´åŽ»è½®è¯¢åˆ¤æ–­ioæ˜¯å¦å‡†å¤‡å®Œæˆï¼Œå‡†å¤‡å®Œæˆäº†å°±è¿›è¡Œæ“ä½œï¼šnioã€linuxçš„selectã€pollã€epoll 4.å¤šè·¯å¤ç”¨ioï¼šéžé˜»å¡žioçš„ä¸€ç§ä¼˜åŒ–ï¼Œjava nioï¼Œç”¨ä¸€ä¸ªçº¿ç¨‹åŽ»è½®è¯¢å¤šä¸ª ioç«¯å£æ˜¯å¦å¯ç”¨ï¼Œå¦‚æžœä¸€ä¸ªå¯ç”¨å°±é€šçŸ¥å¯¹åº”çš„ioè¯·æ±‚ï¼Œè¿™ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹è½®è¯¢å¯ä»¥å¤§å¤§å¢žå¼ºæ€§èƒ½ã€‚ 1.æˆ‘å¯ä»¥é‡‡ç”¨ å¤šçº¿ç¨‹+ é˜»å¡žIO è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæžœï¼Œä½†æ˜¯ç”±äºŽåœ¨å¤šçº¿ç¨‹ + é˜»å¡žIO ä¸­ï¼Œæ¯ä¸ªsocketå¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·ä¼šé€ æˆå¾ˆå¤§çš„èµ„æºå ç”¨ã€‚ 2.è€Œåœ¨å¤šè·¯å¤ç”¨IOä¸­ï¼Œè½®è¯¢æ¯ä¸ªsocketçŠ¶æ€æ˜¯å†…æ ¸åœ¨è¿›è¡Œçš„ï¼Œè¿™ä¸ªæ•ˆçŽ‡è¦æ¯”ç”¨æˆ·çº¿ç¨‹è¦é«˜çš„å¤šã€‚ 5.å¼‚æ­¥ioï¼šaioï¼Œç”¨æˆ·çº¿ç¨‹å®Œå…¨ä¸æ„ŸçŸ¥ioçš„è¿›è¡Œï¼Œæ‰€æœ‰æ“ä½œéƒ½äº¤ç»™å†…æ ¸ï¼Œioå®Œæˆä¹‹åŽå†…æ ¸é€šçŸ¥ç”¨æˆ·çº¿ç¨‹ã€‚ 1.è¿™ç§ioæ‰æ˜¯å¼‚æ­¥çš„ï¼Œ2ã€3ã€4éƒ½æ˜¯åŒæ­¥ioï¼Œå› ä¸ºå†…æ ¸è¿›è¡Œæ•°æ®æ‹·è´çš„è¿‡ç¨‹éƒ½ä¼šè®©ç”¨æˆ·çº¿ç¨‹é˜»å¡žã€‚ 2.å¼‚æ­¥IOæ˜¯éœ€è¦æ“ä½œç³»ç»Ÿçš„åº•å±‚æ”¯æŒï¼Œä¹Ÿå°±æ˜¯å†…æ ¸æ”¯æŒï¼ŒJava 7ä¸­ï¼Œæä¾›äº†Asynchronous IO 47.ConcurrentHashMapå†…éƒ¨å®žçŽ°ï¼ŒHashTableçš„å®žçŽ°è¢«åºŸå¼ƒçš„åŽŸå› : 1.HashTableå®¹å™¨åœ¨ç«žäº‰æ¿€çƒˆçš„å¹¶å‘çŽ¯å¢ƒä¸‹è¡¨çŽ°å‡ºæ•ˆçŽ‡ä½Žä¸‹çš„åŽŸå› ï¼Œæ˜¯å› ä¸ºæ‰€æœ‰è®¿é—®HashTableçš„çº¿ç¨‹éƒ½å¿…é¡»ç«žäº‰åŒä¸€æŠŠé”ï¼Œé‚£å‡å¦‚å®¹å™¨é‡Œæœ‰å¤šæŠŠé”ï¼Œæ¯ä¸€æŠŠé”ç”¨äºŽé”å®¹å™¨å…¶ä¸­ä¸€éƒ¨åˆ†æ•°æ®ï¼Œé‚£ä¹ˆå½“å¤šçº¿ç¨‹è®¿é—®å®¹å™¨é‡Œä¸åŒæ•°æ®æ®µçš„æ•°æ®æ—¶ï¼Œçº¿ç¨‹é—´å°±ä¸ä¼šå­˜åœ¨é”ç«žäº‰ï¼Œä»Žè€Œå¯ä»¥æœ‰æ•ˆçš„æé«˜å¹¶å‘è®¿é—®æ•ˆçŽ‡ï¼Œè¿™å°±æ˜¯ConcurrentHashMapæ‰€ä½¿ç”¨çš„é”åˆ†æ®µæŠ€æœ¯ï¼Œé¦–å…ˆå°†æ•°æ®åˆ†æˆä¸€æ®µä¸€æ®µçš„å­˜å‚¨ï¼Œç„¶åŽç»™æ¯ä¸€æ®µæ•°æ®é…ä¸€æŠŠé”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å ç”¨é”è®¿é—®å…¶ä¸­ä¸€ä¸ªæ®µæ•°æ®çš„æ—¶å€™ï¼Œå…¶ä»–æ®µçš„æ•°æ®ä¹Ÿèƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚ 2.ConcurrentHashMapæ˜¯ç”±Segmentæ•°ç»„ç»“æž„å’ŒHashEntryæ•°ç»„ç»“æž„ç»„æˆã€‚Segmentæ˜¯ä¸€ç§å¯é‡å…¥é”ReentrantLockï¼Œåœ¨ConcurrentHashMapé‡Œæ‰®æ¼”é”çš„è§’è‰²ï¼ŒHashEntryåˆ™ç”¨äºŽå­˜å‚¨é”®å€¼å¯¹æ•°æ®ã€‚ä¸€ä¸ªConcurrentHashMapé‡ŒåŒ…å«ä¸€ä¸ªSegmentæ•°ç»„ï¼ŒSegmentçš„ç»“æž„å’ŒHashMapç±»ä¼¼ï¼Œæ˜¯ä¸€ç§æ•°ç»„å’Œé“¾è¡¨ç»“æž„ï¼Œ ä¸€ä¸ªSegmenté‡ŒåŒ…å«ä¸€ä¸ªHashEntryæ•°ç»„ï¼Œæ¯ä¸ªHashEntryæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æž„çš„å…ƒç´ ï¼Œæ¯ä¸ªSegmentå®ˆæŠ¤è€…ä¸€ä¸ªHashEntryæ•°ç»„é‡Œçš„å…ƒç´ ,å½“å¯¹HashEntryæ•°ç»„çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¿…é¡»é¦–å…ˆèŽ·å¾—å®ƒå¯¹åº”çš„Segmenté”ã€‚ 48.HandlerThreadæ˜¯ä»€ä¹ˆ 1.MessageQueue + Looper + Handler 49.IntentServiceæ˜¯ä»€ä¹ˆ 1.å«æœ‰HandlerThreadçš„Serviceï¼Œå¯ä»¥å¤šæ¬¡startService()æ¥å¤šæ¬¡åœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œ onHandlerIntent()çš„è°ƒç”¨ã€‚ 50.classå’Œdex 1.dvmæ‰§è¡Œçš„æ˜¯dexæ ¼å¼æ–‡ä»¶ï¼Œjvmæ‰§è¡Œçš„æ˜¯classæ–‡ä»¶ï¼Œandroidç¨‹åºç¼–è¯‘å®Œä¹‹åŽç”Ÿäº§classæ–‡ä»¶ã€‚ç„¶åŽdexå·¥å…·ä¼šæŠŠclassæ–‡ä»¶å¤„ç†æˆdexæ–‡ä»¶ï¼Œç„¶åŽæŠŠèµ„æºæ–‡ä»¶å’Œ.dexæ–‡ä»¶ç­‰æ‰“åŒ…æˆapkæ–‡ä»¶ã€‚ 2.dvmæ˜¯åŸºäºŽå¯„å­˜å™¨çš„è™šæ‹Ÿæœºï¼Œè€Œjvmæ‰§è¡Œæ˜¯åŸºäºŽè™šæ‹Ÿæ ˆçš„è™šæ‹Ÿæœºã€‚å¯„å­˜å™¨å­˜å–é€Ÿåº¦æ¯”æ ˆå¿«çš„å¤šï¼Œdvmå¯ä»¥æ ¹æ®ç¡¬ä»¶å®žçŽ°æœ€å¤§çš„ä¼˜åŒ–ï¼Œæ¯”è¾ƒé€‚åˆç§»åŠ¨è®¾å¤‡ã€‚ 3.classæ–‡ä»¶å­˜åœ¨å¾ˆå¤šçš„å†—ä½™ä¿¡æ¯ï¼Œdexå·¥å…·ä¼šåŽ»é™¤å†—ä½™ä¿¡æ¯ï¼Œå¹¶æŠŠæ‰€æœ‰çš„classæ–‡ä»¶æ•´åˆåˆ°dexæ–‡ä»¶ä¸­ã€‚å‡å°‘äº†I&#x2F;Oæ“ä½œï¼Œæé«˜äº†ç±»çš„æŸ¥æ‰¾é€Ÿåº¦ 51.å†…å­˜æ³„æ¼ 1.å…¶ä»–çº¿ç¨‹æŒæœ‰ä¸€ä¸ªListenerï¼ŒListeneræ“ä½œactivityã€‚é‚£ä¹ˆåœ¨çº¿ç¨‹ä¹ˆæœ‰å®Œæ¯•çš„æ—¶å€™ï¼Œactivityå…³é—­äº†ï¼ŒåŽŸæœ¬æ˜¯è¦è¢«å›žæ”¶çš„ä½†æ˜¯ï¼Œä¸èƒ½è¢«å›žæ”¶ã€‚ 2.ä¾‹å¦‚Handlerå¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼ŒHandlerå°±ç›¸å½“äºŽListenerã€‚ 3.åœ¨activityå…³é—­çš„æ—¶å€™æ³¨æ„åœæ­¢çº¿ç¨‹ï¼Œæˆ–è€…å°†Listenerçš„æ³¨å†Œå–æ¶ˆ 3.ä½¿ç”¨å¼±å¼•ç”¨ï¼Œè¿™æ ·å³ä½¿ListeneræŒæœ‰äº†activityï¼Œåœ¨GCçš„æ—¶å€™è¿˜æ˜¯ä¼šè¢«å›žæ”¶ 4.å·¥å…·:LeakCanary 52.è¿‡åº¦ç»˜åˆ¶ã€å¡é¡¿ä¼˜åŒ–: 1.è¿‡åº¦ç»˜åˆ¶ï¼š 1.ç§»é™¤Windowé»˜è®¤çš„Backgroundï¼šgetWidow.setBackgroundDrawable(null); 2.ç§»é™¤XMLå¸ƒå±€æ–‡ä»¶ä¸­éžå¿…éœ€çš„Background 3.å‡å°‘å¸ƒå±€åµŒå¥—(æ‰å¹³åŒ–çš„ä¸€ä¸ªä½“çŽ°ï¼Œå‡å°‘Viewæ•°çš„æ·±åº¦ï¼Œä¹Ÿå°±å‡å°‘äº†Viewæ ‘çš„éåŽ†æ—¶é—´ï¼Œæ¸²æŸ“çš„æ—¶å€™ï¼Œå‰åŽæœŸçš„å·¥ä½œï¼Œæ€»æ˜¯æŒ‰Viewæ ‘ç»“ç‚¹æ¥) 4.åœ¨å¼•å…¥å¸ƒå±€æ–‡ä»¶é‡Œé¢ï¼Œæœ€å¤–å±‚å¯ä»¥ç”¨mergeæ›¿ä»£LinearLayout,RelativeLayoutï¼Œè¿™æ ·æŠŠå­UIå…ƒç´ ç›´æŽ¥è¡”æŽ¥åœ¨includeä½ç½® 5.å·¥å…·ï¼šHierarchyViewer æŸ¥çœ‹è§†å›¾å±‚çº§ 2.å¡é¡¿ä¼˜åŒ–ï¼š16msæ•°æ®æ›´æ–° 53.apkç˜¦èº«: 1.classes.dexï¼šé€šè¿‡ä»£ç æ··æ·†ï¼Œåˆ æŽ‰ä¸å¿…è¦çš„jaråŒ…å’Œä»£ç å®žçŽ°è¯¥æ–‡ä»¶çš„ä¼˜åŒ– 2.èµ„æºæ–‡ä»¶ï¼šé€šè¿‡Lintå·¥å…·æ‰«æä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°çš„é™æ€èµ„æº 3.å›¾ç‰‡èµ„æºï¼šä½¿ç”¨tinypngå’ŒwebPï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»å›¾ç‰‡èµ„æºä¼˜åŒ–çš„æ–¹æ¡ˆ,çŸ¢é‡å›¾ 4.SOæ–‡ä»¶å°†ä¸ç”¨çš„åŽ»æŽ‰ï¼Œç›®å‰ä¸»æµappä¸€èˆ¬åªæ”¾ä¸€ä¸ªarmçš„soåŒ… 54.ANRçš„å½¢æˆï¼Œå„ä¸ªç»„ä»¶ä¸Šå‡ºçŽ°ARNçš„æ—¶é—´é™åˆ¶æ˜¯å¤šå°‘ 1.åªè¦æ˜¯ä¸»çº¿ç¨‹è€—æ—¶çš„æ“ä½œå°±ä¼šARN å¦‚io 2.broadcastè¶…æ—¶æ—¶é—´ä¸º10ç§’ æŒ‰é”®æ— å“åº”çš„è¶…æ—¶æ—¶é—´ä¸º5ç§’ å‰å°serviceæ— å“åº”çš„è¶…æ—¶æ—¶é—´ä¸º20ç§’ï¼ŒåŽå°serviceä¸º200ç§’ 55.Serializableå’ŒParcelable çš„åŒºåˆ« 1.P æ¶ˆè€—å†…å­˜å° 2.ç½‘ç»œä¼ è¾“ç”¨S ç¨‹åºå†…ä½¿ç”¨P 3.Så°†æ•°æ®æŒä¹…åŒ–æ–¹ä¾¿ 4.Sä½¿ç”¨äº†åå°„ å®¹æ˜“è§¦å‘åžƒåœ¾å›žæ”¶ æ¯”è¾ƒæ…¢ 56.Sharedpreferencesæºç ç®€è¿° 1.å‚¨å­˜äºŽç¡¬ç›˜ä¸Šçš„xmlé”®å€¼å¯¹ï¼Œæ•°æ®å¤šäº†ä¼šæœ‰æ€§èƒ½é—®é¢˜ 2.ContextImplè®°å½•ç€SharedPreferencesçš„é‡è¦æ•°æ®ï¼Œæ–‡ä»¶è·¯å¾„å’Œå®žä¾‹çš„é”®å€¼å¯¹ 3.åœ¨xmlæ–‡ä»¶å…¨éƒ¨å†…åŠ è½½åˆ°å†…å­˜ä¸­ä¹‹å‰ï¼Œè¯»å–æ“ä½œæ˜¯é˜»å¡žçš„ï¼Œåœ¨xmlæ–‡ä»¶å…¨éƒ¨å†…åŠ è½½åˆ°å†…å­˜ä¸­ä¹‹åŽï¼Œæ˜¯ç›´æŽ¥è¯»å–å†…å­˜ä¸­çš„æ•°æ® 4.applyå› ä¸ºæ˜¯å¼‚æ­¥çš„æ²¡æœ‰è¿”å›žå€¼, commitæ˜¯åŒæ­¥çš„æœ‰è¿”å›žå€¼èƒ½çŸ¥é“ä¿®æ”¹æ˜¯å¦æäº¤æˆåŠŸ 5.å¤šå¹¶å‘çš„æäº¤commitæ—¶ï¼Œéœ€ç­‰å¾…æ­£åœ¨å¤„ç†çš„commitæ•°æ®æ›´æ–°åˆ°ç£ç›˜æ–‡ä»¶åŽæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä»Žè€Œé™ä½Žæ•ˆçŽ‡; è€Œapplyåªæ˜¯åŽŸå­æ›´æ–°åˆ°å†…å­˜ï¼ŒåŽè°ƒç”¨applyå‡½æ•°ä¼šç›´æŽ¥è¦†ç›–å‰é¢å†…å­˜æ•°æ®ï¼Œä»Žä¸€å®šç¨‹åº¦ä¸Šæé«˜å¾ˆå¤šæ•ˆçŽ‡ã€‚ 3.edit()æ¯æ¬¡éƒ½æ˜¯åˆ›å»ºæ–°çš„EditorImplå¯¹è±¡. 6.åšå®¢æŽ¨èï¼š**å…¨é¢å‰–æžSharedPreferences** 57.æ“ä½œç³»ç»Ÿå¦‚ä½•ç®¡ç†å†…å­˜çš„ï¼š 1.ä½¿ç”¨å¯„å­˜å™¨è¿›è¡Œå°†è¿›ç¨‹åœ°å€å’Œç‰©ç†å†…å­˜è¿›è¡Œæ˜ å°„ 2.è™šæ‹Ÿå†…å­˜è¿›è¡Œå†…å­˜æ˜ å°„åˆ°ç¡¬ç›˜ä¸Šå¢žå¤§å†…å­˜ 3.è™šæ‹Ÿå†…å­˜æ˜¯è¿›è¡Œå†…å­˜åˆ†é¡µç®¡ç† 4.é¡µè¡¨å®žçŽ°åˆ†é¡µï¼Œå°±æ˜¯ é¡µ+åœ°å€åç§»ã€‚ 5.å¦‚æžœç¨‹åºçš„å†…å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨é¡µç½®æ¢ç®—æ³•æ¥å°†å…¶è°ƒå…¥å†…å­˜ä¸­ï¼šå…ˆè¿›å…ˆå‡ºã€æœ€è¿‘æœªä½¿ç”¨æœ€å°‘ç­‰ç­‰ 6.åšå®¢æŽ¨èï¼š**çŽ°ä»£æ“ä½œç³»ç»Ÿéƒ¨åˆ†ç« èŠ‚ç¬”è®°** 58.æµè§ˆå™¨è¾“å…¥åœ°å€åˆ°è¿”å›žç»“æžœå‘ç”Ÿäº†ä»€ä¹ˆ 1.DNSè§£æž 2.TCPè¿žæŽ¥ 3.å‘é€HTTPè¯·æ±‚ 4.æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›žHTTPæŠ¥æ–‡ 5.æµè§ˆå™¨è§£æžæ¸²æŸ“é¡µé¢ 6.è¿žæŽ¥ç»“æŸ 59.javaæ³›åž‹ç±»åž‹æ“¦é™¤å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ï¼Œé€šé…ç¬¦æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„ã€‚ 1.å‘ç”Ÿåœ¨ç¼–è¯‘çš„æ—¶å€™ 2.PECSï¼Œextendså–„äºŽæä¾›ç²¾ç¡®çš„å¯¹è±¡ Aæ˜¯Bçš„å­é›†ï¼ŒSuperå–„äºŽæ’å…¥ç²¾ç¡®çš„å¯¹è±¡ Aæ˜¯Bçš„è¶…é›† 3.åšå®¢æŽ¨èï¼š**Effective Javaç¬”è®°ï¼ˆä¸å«ååºåˆ—åŒ–ã€å¹¶å‘ã€æ³¨è§£å’Œæžšä¸¾ï¼‰ã€androidé˜¿é‡Œé¢è¯•javaåŸºç¡€é”¦é›†** 60.activityçš„ç”Ÿå‘½å‘¨æœŸ 1.aå¯åŠ¨bï¼ŒåŽé€€é”®å†åˆ°açš„ç”Ÿå‘½å‘¨æœŸæµç¨‹ï¼ša.createâ€“&gt;a.startâ€“&gt;a.resumeâ€“&gt;a.pauseâ€“&gt;b.createâ€“&gt;b.startâ€“&gt;b.resumeâ€“&gt;bç•Œé¢ç»˜åˆ¶â€“&gt;a.stopâ€“&gt;b.pauseâ€“&gt;b.stopâ€“&gt;b.destroyâ€“&gt;a.restartâ€“&gt;a.startâ€“&gt;a.resume 2.æ„å¤–é”€æ¯ä¼šè°ƒç”¨saveInstanceï¼Œé‡æ–°æ¢å¤çš„æ—¶å€™å›žè°ƒç”¨restoreInstanceã€‚å‚¨å­˜æ•°æ®çš„æ—¶å€™ä½¿ç”¨äº†å§”æ‰˜æœºåˆ¶ï¼Œä»Žactivityâ€“&gt;windowâ€“&gt;viewGroupâ€“&gt;view ä¼šé€’å½’è°ƒç”¨saveæ¥ä¿æŒæœ¬viewçš„æ•°æ®ï¼Œrestoreåˆ™æ˜¯é€’å½’æ¢å¤æœ¬viewæ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢åšä¸€äº›è‡ªå·±éœ€è¦çš„æ•°æ®æ“ä½œã€‚ 61.é¢è¯•å¸¸è€ƒçš„ç®—æ³• 1.å¿«æŽ’ã€å †æŽ’åºä¸ºé¦–çš„å„ç§æŽ’åºç®—æ³• 2.é“¾è¡¨çš„å„ç§æ“ä½œï¼šåˆ¤æ–­æˆçŽ¯ã€åˆ¤æ–­ç›¸äº¤ã€åˆå¹¶é“¾è¡¨ã€å€’æ•°Kä¸ªèŠ‚ç‚¹ã€å¯»æ‰¾æˆçŽ¯èŠ‚ç‚¹ 3.äºŒå‰æ ‘ã€çº¢é»‘æ ‘ã€Bæ ‘å®šä¹‰ä»¥åŠæ—¶é—´å¤æ‚åº¦è®¡ç®—æ–¹å¼ 4.åŠ¨æ€è§„åˆ’ã€è´ªå¿ƒç®—æ³•ã€ç®€å•çš„å›¾è®º 5.æŽ¨èä¹¦ç±ï¼šç®—æ³•å¯¼è®ºï¼Œå°†å›¾è®ºä¹‹å‰çš„ä¾‹å­å†™ä¸€é 62.Launcherè¿›ç¨‹å¯åŠ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„è¿‡ç¨‹ï¼šå¯åŠ¨ä¸€ä¸ªapp63.å¼€æºæ¡†æž¶æºç  1.Fresco 1.mvcæ¡†æž¶ï¼š 1.ControlleræŽ§åˆ¶æ•°æ®æ˜¾ç¤ºåœ¨Hierarchyä¸­çš„Drawableçš„æ˜¾éš 2.ImagePipelineåœ¨Controllerä¸­è´Ÿè´£è¿›è¡Œæ•°æ®èŽ·å–ï¼Œè¿”å›žçš„æ•°æ®æ˜¯CloseableImage 3.DraweeæŠŠé™¤äº†åˆå§‹åŒ–ä¹‹å¤–çš„æ“ä½œå…¨éƒ¨äº¤ç»™HolderåŽ»åšï¼ŒHolderæŒæœ‰Controllerå’ŒHierarchy 2.Drawableå±‚æ¬¡ä»¥åŠç»˜åˆ¶ï¼š 1.å¦‚æžœè¦ç»˜åˆ¶ä¸€æ¬¡Drawableå°±è°ƒç”¨invalidateSelf()æ¥è§¦å‘onDraw() 2.Drawableåˆ†ä¸ºï¼šå®¹å™¨ç±»(ä¿å­˜ä¸€äº›Drawable)ã€è‡ªæˆ‘ç»˜åˆ¶ç±»(è¿›åº¦æ¡)ã€å›¾å½¢å˜æ¢ç±»(scaleã€rotateã€çŸ©é˜µå˜æ¢)ã€åŠ¨ç”»ç±»(å†…éƒ¨ä¸æ–­åˆ·æ–°ï¼Œè¿›è¡Œwebpå’Œgifçš„å¸§ç»˜åˆ¶) 3.ImagePipelineè¿”å›žçš„CloseableImageæ˜¯ç”±ä¸€ä¸ªä¸ªDrawableFactoryè§£æžæˆDrawableçš„ 4.webpå’ŒgifåŠ¨ç”»æ˜¯ç”±jniä»£ç è§£æžçš„ï¼Œç„¶åŽå…¶ä»–é™æ€å›¾ç‰‡æ˜¯æ ¹æ®ä¸åŒçš„androidå¹³å°ä½¿ç”¨BitmapFactoryæ¥è§£æžçš„ 3.èŒè´£é“¾æ¨¡å¼ï¼šproducerä¸åšæ“ä½œæ ‡nï¼Œè¡¨ç¤ºåªæ˜¯æä¾›ä¸€ä¸ªconsumerã€‚èŽ·å–å›¾ç‰‡â€“ã€‹è§£ç å›¾ç‰‡ç¼“å­˜Producerâ€“ã€‹åŽå°çº¿ç¨‹Producerâ€“ã€‹clientå›¾ç‰‡å¤„ç†producer(n)â€“ã€‹è§£ç producer(n)â€“ã€‹æ—‹è½¬æˆ–å‰ªè£producer(n)â€“ã€‹ç¼–ç å›¾ç‰‡å†…å­˜ç¼“å­˜producerâ€“ã€‹è¯»ç¡¬ç›˜ç¼“å­˜producerâ€“ã€‹å†™ç¡¬ç›˜ç¼“å­˜producer(n)â€“ã€‹ç½‘ç»œproduceræä¾›CloseableImageã€Šâ€“è§£ç å›¾ç‰‡ç¼“å­˜consumerã€Šâ€“clientå›¾ç‰‡å¤„ç†consumerã€Šâ€“è§£ç consumerã€Šâ€“æ—‹è½¬æˆ–å‰ªè£consumerã€Šâ€“ç¼–ç å›¾ç‰‡å†…å­˜ç¼“å­˜consumerã€Šâ€“å†™ç¡¬ç›˜ç¼“å­˜consumerã€Šâ€“å›¾ç‰‡æ•°æ® 4.å†…å­˜ç¼“å­˜ï¼š 1.ä¸€ä¸ªCountingLruMapä¿å­˜å·²ç»æ²¡æœ‰è¢«å¼•ç”¨çš„ç¼“å­˜æ¡ç›®ï¼Œä¸€ä¸ªCountingLruMapä¿å­˜æ‰€æœ‰çš„æ¡ç›®åŒ…æ‹¬æ²¡æœ‰å¼•ç”¨çš„æ¡ç›®ã€‚æ¯å½“ç¼“å­˜ç­–ç•¥æ”¹å˜å’Œä¸€å®šæ—¶é—´ç¼“å­˜é…ç½®çš„æ›´æ–°çš„æ—¶å€™ï¼Œå°±ä¼šå°† å¾…é”€æ¯æ¡ç›®Mapä¸­çš„æ¡ç›®ä¸€ä¸ªä¸ªç§»é™¤ï¼Œç›´åˆ°ç¼“å­˜å¤§å°ç¬¦åˆé…ç½®ã€‚ 2.è¿™é‡Œçš„å¼•ç”¨è®¡æ•°æ˜¯ç”¨Frescoç»„ä»¶å®žçŽ°çš„å¼•ç”¨è®¡æ•°å™¨ã€‚ 3.ç¼“å­˜æœ‰ä¸€ä¸ªä»£ç†ç±»ï¼Œç”¨æ¥è¿½è¸ªç¼“å­˜çš„å­˜å–ã€‚ 4.CountingLruMapæ˜¯ä½¿ç”¨LinkedHashMapæ¥å‚¨å­˜æ•°æ®çš„ã€‚ 5.ç¡¬ç›˜ç¼“å­˜ï¼š 1.DefaultDiskStorageä½¿ç”¨Lruç­–ç•¥ã€‚ 2.ä¸ºäº†ä¸è®©æ‰€æœ‰çš„æ–‡ä»¶é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåˆ›å»ºå¾ˆå¤šå‘½åä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œç„¶åŽä½¿ç”¨hashç®—æ³•æŠŠç¼“å­˜æ–‡ä»¶åˆ†æ•£ 3.DiskStorageCacheå°è£…äº†DefaultDiskStorageï¼Œä¸ä»…è¿›è¡Œç¼“å­˜å­˜å–è¿½è¸ªï¼Œå¹¶ä¸”å…¶åœ¨å†…å­˜é‡Œé¢ç»´æŒç€ä¸€ä¸ª &lt;key,value&gt; çš„é”®å€¼å¯¹ï¼Œå› ä¸ºæ–‡ä»¶ä¿®æ”¹é¢‘ç¹ï¼Œæ‰€æœ‰åªæ˜¯å®šæ—¶åˆ·æ–°ï¼Œå› æ­¤å¦‚æžœåœ¨å†…å­˜ä¸­æ‰¾ä¸åˆ°ï¼Œè¿˜è¦åŽ»ç¡¬ç›˜ä¸­æ‰¾ä¸€æ¬¡ã€‚ 4.åˆ é™¤ç¡¬ç›˜çš„ç¼“å­˜åªå‡ºçŽ°åœ¨ç¡¬ç›˜æ•°æ®å¤§å°è¶…é™çš„æ—¶å€™ï¼Œæ­¤æ—¶åŒæ—¶ä¹Ÿä¼šåˆ é™¤ç¼“å­˜ä¸­çš„keyï¼Œæ‰€ä»¥ä¸ä¼šå‡ºçŽ°å†…å­˜ä¸­æœ‰keyï¼Œä½†æ˜¯ç¡¬ç›˜ä¸Šæ²¡æœ‰çš„æƒ…å†µã€‚ 5.åœ¨æ’å…¥ç¡¬ç›˜æ•°æ®çš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯æ’å…¥å™¨çš„å½¢å¼ã€‚è¿”å›žä¸€ä¸ªInserterï¼Œåœ¨Inserter.writeData()ä¸­ä¼ å…¥ä¸€ä¸ªCallBack(é‡Œé¢å°è£…äº†å®¢æˆ·ç«¯æ’å…¥æ•°æ®çš„é€»è¾‘å’Œæ–‡ä»¶å¼•ç”¨)ï¼Œè®©å†…éƒ¨å®žçŽ°è°ƒç”¨CallBackçš„é€»è¾‘æ¥æ’å…¥æ–‡ä»¶æ•°æ®ï¼Œå‰é¢å†™çš„æ–‡ä»¶åŽç¼€æ˜¯.temp,åªæœ‰è°ƒç”¨commit()ä¹‹åŽæ‰ä¼šä¿®æ”¹åŽç¼€ï¼Œè®©æ–‡ä»¶å¯¹å®¢æˆ·ç«¯å¯è§ã€‚ 6.ä½¿ç”¨äº†javaæä¾›çš„FileTreeVisitoræ¥éåŽ†æ–‡ä»¶ 6.å¯¹è±¡æ± ï¼š 1.ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨ä¸€ä¸ªæ¡¶ï¼Œæ¡¶å†…éƒ¨æ˜¯ä¸€ä¸ªQueueã€‚æ•°ç»„ä¸‹æ ‡æ˜¯æ•°æ®ç”³è¯·å†…å­˜çš„byteå¤§å°ï¼Œæ¡¶å†…éƒ¨çš„Queueå­˜çš„æ˜¯å†…å­˜å—çš„ã€‚æ‰€ä»¥æ•°ç»„ä½¿ç”¨çš„æ˜¯ç¨€ç–æ•°ç»„ 2.ç”³è¯·å†…å­˜çš„æ–¹å¼æœ‰ä¸¤ç§ 1.javaå †ä¸Šå¼€è¾Ÿçš„å†…å­˜ 2.ashme çš„æœ¬åœ°å†…å­˜ä¸­å¼€è¾Ÿçš„å†…å­˜ 7.è®¾è®¡æ¨¡å¼ï¼šBuilderã€èŒè´£é“¾ã€è§‚å¯Ÿè€…ã€ä»£ç†ã€ç»„åˆã€äº«å…ƒã€é€‚é…å™¨ã€è£…é¥°è€…ã€ç­–ç•¥ã€ç”Ÿäº§è€…æ¶ˆè´¹è€…ã€æä¾›è€… 8.è‡ªå®šä¹‰è®¡æ•°å¼•ç”¨ï¼šç±»ä¼¼c++æ™ºèƒ½æŒ‡é’ˆ 1.ä½¿ç”¨ä¸€ä¸ªé™æ€IdentityHashMap &lt;å‚¨å­˜éœ€è¦è¢«è®¡æ•°å¼•ç”¨çš„å¯¹è±¡,å…¶è¢«å¼•ç”¨çš„æ¬¡æ•°&gt; 2.ç”¨SharedReferenceåˆ†è£…éœ€è¦è¢«è®¡æ•°å¼•ç”¨çš„å¯¹è±¡ï¼Œæä¾›ä¸€ä¸ªé”€æ¯èµ„æºçš„é”€æ¯å™¨ï¼Œæä¾›ä¸€ä¸ªé™æ€å·¥åŽ‚æ–¹æ³•æ¥å¤åˆ¶è‡ªå·±ï¼Œå¤åˆ¶ä¸€ä¸ªå¼•ç”¨è®¡æ•°åŠ ä¸€ã€‚æä¾›ä¸€ä¸ªæ–¹æ³•é”€æ¯è‡ªå·±ï¼Œè¡¨ç¤ºè‡ªå·±éœ€è¦å˜æˆæ— äººå¼•ç”¨çš„å¯¹è±¡äº†ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°å‡ä¸€ã€‚ 3.å¼•ç”¨è®¡æ•°å½’é›¶ï¼Œé”€æ¯å™¨å°†é”€æ¯èµ„æºï¼Œå¦‚bitmapçš„recycleæˆ–è€…æ˜¯jniå†…å­˜è°ƒç”¨jniæ–¹æ³•å½’è¿˜å†…å­˜ã€‚ 9.åšå®¢æŽ¨èï¼š**Android Frescoæºç æ–‡æ¡£ç¿»è¯‘ã€ä»Žé›¶å¼€å§‹æ’¸ä¸€ä¸ªFrescoä¹‹ç¡¬ç›˜ç¼“å­˜ã€ä»Žé›¶å¼€å§‹æ’¸ä¸€ä¸ªFrescoä¹‹gifå’ŒWebpåŠ¨ç”»ã€ä»Žé›¶å¼€å§‹æ’¸ä¸€ä¸ªFrescoä¹‹å†…å­˜ç¼“å­˜ã€ä»Žé›¶å¼€å§‹æ’¸ä¸€ä¸ªFrescoä¹‹æ€»ç»“** 2.oKhttpï¼š 1.åŒæ­¥å’Œå¼‚æ­¥ï¼š 1.å¼‚æ­¥ä½¿ç”¨äº†Dispatcheræ¥å°†å­˜å‚¨åœ¨ Deque ä¸­çš„è¯·æ±‚åˆ†æ´¾ç»™çº¿ç¨‹æ± ä¸­å„ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ 2.å½“ä»»åŠ¡æ‰§è¡Œå®ŒæˆåŽï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œfinallyä»£ç æ®µæ€»ä¼šè¢«æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨Dispatcherçš„finishedå‡½æ•°ï¼Œå®ƒå°†æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡Callä»Žé˜Ÿåˆ—runningAsyncCallsä¸­ç§»é™¤åŽï¼Œä¸»åŠ¨çš„æŠŠç¼“å­˜é˜Ÿåˆ—å‘å‰èµ°äº†ä¸€æ­¥ã€‚ 2.è¿žæŽ¥æ± ï¼š 1.ä¸€ä¸ªConnectionå°è£…äº†ä¸€ä¸ªsocketï¼ŒConnectionPoolä¸­å‚¨å­˜sç€æ‰€æœ‰çš„Connectionï¼ŒStreamAllocationæ˜¯å¼•ç”¨è®¡æ•°çš„ä¸€ä¸ªå•ä½ 2.å½“ä¸€ä¸ªè¯·æ±‚èŽ·å–ä¸€ä¸ªConnectionçš„æ—¶å€™è¦ä¼ å…¥ä¸€ä¸ªStreamAllocationï¼ŒConnectionä¸­å­˜ç€ä¸€ä¸ªå¼±å¼•ç”¨çš„StreamAllocationåˆ—è¡¨ï¼Œæ¯å½“ä¸Šå±‚åº”ç”¨å¼•ç”¨ä¸€æ¬¡Connectionï¼ŒStreamAllocationå°±ä¼šåŠ ä¸€ä¸ªã€‚åä¹‹å¦‚æžœä¸Šå±‚åº”ç”¨ä¸ä½¿ç”¨äº†ï¼Œå°±ä¼šåˆ é™¤ä¸€ä¸ªã€‚ 3.ConnectionPoolä¸­ä¼šæœ‰ä¸€ä¸ªåŽå°ä»»åŠ¡å®šæ—¶æ¸…ç†StreamAllocationåˆ—è¡¨ä¸ºç©ºçš„Connectionã€‚5åˆ†é’Ÿæ—¶é—´ï¼Œç»´æŒ5ä¸ªsocket 3.é€‰æ‹©è·¯çº¿ä¸Žå»ºç«‹è¿žæŽ¥ 1.é€‰æ‹©è·¯çº¿æœ‰ä¸¤ç§æ–¹å¼ï¼š 1.æ— ä»£ç†ï¼Œé‚£ä¹ˆåœ¨æœ¬åœ°ä½¿ç”¨DNSæŸ¥æ‰¾åˆ°ipï¼Œæ³¨æ„ç»“æžœæ˜¯æ•°ç»„ï¼Œå³ä¸€ä¸ªåŸŸåæœ‰å¤šä¸ªIPï¼Œè¿™å°±æ˜¯è‡ªåŠ¨é‡è¿žçš„æ¥æº 2.æœ‰ä»£ç†HTTPï¼šè®¾ç½®socketçš„ipä¸ºä»£ç†åœ°å€çš„ipï¼Œè®¾ç½®socketçš„ç«¯å£ä¸ºä»£ç†åœ°å€çš„ç«¯å£ 3.ä»£ç†å¥½å¤„ï¼šHTTPä»£ç†ä¼šå¸®ä½ åœ¨è¿œç¨‹æœåŠ¡å™¨è¿›è¡ŒDNSæŸ¥è¯¢ï¼Œå¯ä»¥å‡å°‘DNSåŠ«æŒã€‚ 2.å»ºç«‹è¿žæŽ¥ 1.è¿žæŽ¥æ± ä¸­å·²ç»å­˜åœ¨è¿žæŽ¥ï¼Œå°±ä»Žä¸­å–å‡º(get)RealConnectionï¼Œå¦‚æžœæ²¡æœ‰å‘½ä¸­å°±è¿›å…¥ä¸‹ä¸€æ­¥ 2.æ ¹æ®é€‰æ‹©çš„è·¯çº¿(Route)ï¼Œè°ƒç”¨Platform.get().connectSocketé€‰æ‹©å½“å‰å¹³å°Runtimeä¸‹æœ€å¥½çš„socketåº“è¿›è¡Œæ¡æ‰‹ 3.å°†å»ºç«‹æˆåŠŸçš„RealConnectionæ”¾å…¥(put)è¿žæŽ¥æ± ç¼“å­˜ 4.å¦‚æžœå­˜åœ¨TLSï¼Œå°±æ ¹æ®SSLç‰ˆæœ¬ä¸Žè¯ä¹¦è¿›è¡Œå®‰å…¨æ¡æ‰‹ 5.æž„é€ HttpStreamå¹¶ç»´æŠ¤åˆšåˆšçš„socketè¿žæŽ¥ï¼Œç®¡é“å»ºç«‹å®Œæˆ 4.èŒè´£é“¾æ¨¡å¼ï¼šç¼“å­˜ã€é‡è¯•ã€å»ºç«‹è¿žæŽ¥ç­‰åŠŸèƒ½å­˜åœ¨äºŽæ‹¦æˆªå™¨ä¸­ç½‘ç»œè¯·æ±‚ç›¸å…³ï¼Œä¸»è¦æ˜¯ç½‘ç»œè¯·æ±‚ä¼˜åŒ–ã€‚ç½‘ç»œè¯·æ±‚çš„æ—¶å€™é‡åˆ°çš„é—®é¢˜ 5.åšå®¢æŽ¨èï¼š**Androidæ•°æ®å±‚æž¶æž„çš„å®žçŽ° ä¸Šç¯‡ã€Androidæ•°æ®å±‚æž¶æž„çš„å®žçŽ° ä¸‹ç¯‡** 3.okio 1.ç®€ä»‹ï¼› 1.sinkï¼šè‡ªå·±â€“ã€‹åˆ«äºº 2.sourceï¼šåˆ«äººâ€“ã€‹è‡ªå·± 3.BufferSinkï¼šæœ‰ç¼“å­˜åŒºåŸŸçš„sink 4.BufferSourceï¼šæœ‰ç¼“å­˜åŒºåŸŸçš„source 5.Bufferï¼šå®žçŽ°äº†3ã€4çš„ç¼“å­˜åŒºåŸŸï¼Œå†…éƒ¨æœ‰Segmentçš„åŒå‘é“¾è¡¨ï¼Œåœ¨åœ¨è½¬ç§»æ•°æ®çš„æ—¶å€™ï¼Œåªéœ€è¦å°†æŒ‡é’ˆè½¬ç§»æŒ‡å‘å°±è¡Œ 2.æ¯”java ioçš„å¥½å¤„ï¼š 1.å‡å°‘å†…å­˜ç”³è¯·å’Œæ•°æ®æ‹·è´ 2.ç±»å°‘ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¼€å‘æ•ˆçŽ‡é«˜ 3.å†…éƒ¨å®žçŽ°ï¼š 1.Bufferçš„SegmentåŒå‘é“¾è¡¨ï¼Œå‡å°‘æ•°æ®æ‹·è´ 2.Segmentçš„å†…éƒ¨byteæ•°ç»„çš„å…±äº«ï¼Œå‡å°‘æ•°æ®æ‹·è´ 3.SegmentPoolçš„å…±äº«å’Œå›žæ”¶Segment 4.sinkå’Œsourceä¸­è¢«å®žé™…æ“ä½œçš„å…¶å®žæ˜¯Bufferï¼ŒBufferå¯ä»¥å……å½“sinkå’Œsource 5.æœ€ç»ˆokioåªæ˜¯å¯¹java ioçš„å°è£…ï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸºäºŽjava io çš„ å†™åœ¨æœ€åŽ:èƒ½çœ‹åˆ°è¿™é‡Œçš„äºº,æˆ‘æŒºä½©æœä½ çš„.è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨å¤´æ¡é¢è¯•ä¹‹å‰æ•´ç†çš„,æœ€åŽ**80%**çš„é¢˜ç›®éƒ½å‘½ä¸­äº†,æ‰€ä»¥ç¥ä½ å¥½è¿. ä¸è´©å–ç„¦è™‘ï¼Œä¹Ÿä¸æ ‡é¢˜å…šã€‚åˆ†äº«ä¸€äº›è¿™ä¸ªä¸–ç•Œä¸Šæœ‰æ„æ€çš„äº‹æƒ…ã€‚é¢˜æåŒ…æ‹¬ä¸”ä¸é™äºŽï¼šç§‘å¹»ã€ç§‘å­¦ã€ç§‘æŠ€ã€äº’è”ç½‘ã€ç¨‹åºå‘˜ã€è®¡ç®—æœºç¼–ç¨‹ã€‚ä¸‹é¢æ˜¯æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼šä¸–ç•Œä¸Šæœ‰æ„æ€çš„äº‹ï¼Œå¹²è´§å¤šå¤šç­‰ä½ æ¥çœ‹ã€‚ ä½œè€…ï¼šä½•æ—¶å¤•é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/cf5092fa2694æ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚ ç™¾åº¦é¢è¯•é¢˜ç”µè¯é¢è¯• 1234561. å®‰å“Viewç»˜åˆ¶æµç¨‹2. äº‹ä»¶åˆ†å‘æœºåˆ¶3. JAVAåŸºç¡€æ€æƒ³4. å¤šçº¿ç¨‹å’Œå®‰å…¨é—®é¢˜5. å®‰å“æ€§èƒ½ä¼˜åŒ–å’Œå…¼å®¹é—®é¢˜6. å†é—®ä¸€ä¸‹å¸¸è§„çš„ç»„ä»¶ç›¸å…³é—®é¢˜ çŽ°åœºç¬”è¯• 1234567891011121314151617181920212223242526272829303132331 è¯·æè¿°å®‰å“å››å¤§ç»„å»ºä¹‹é—´çš„å…³ç³»ï¼Œå¹¶è¯´ä¸‹å®‰å“MVCçš„è®¾è®¡æ¨¡å¼ã€‚2 çº¿ç¨‹ä¸­sleep()å’Œwait()æœ‰å’Œå´åˆ«ï¼Œå„æœ‰ä»€ä¹ˆå«ä¹‰ 3 abstractå’Œinterfaceçš„åŒºåˆ«?4 array,arrayList, List ,ä¸‰è€…æœ‰ä½•åŒºåˆ«ï¼Ÿ5 hashtableå’Œhashmapçš„åŒºåˆ«,å¹¶ç®€è¿°Hashmapçš„å®žçŽ°åŽŸç†6 StringBuilderå’Œ],String ,subStringæ–¹æ³•çš„ç»†å¾®å·®åˆ«7 è¯·å†™å‡ºå››ç§ä»¥ä¸Šä½ çŸ¥é“çš„è®¾è®¡æ¨¡å¼ï¼Œå¹¶ä»‹ç»ä¸‹å®žçŽ°åŽŸç†8 å®‰å“å­çº¿ç¨‹æ˜¯å¦èƒ½æ›´æ–°UIï¼Œå¦‚æžœèƒ½è¯·è¯´æ˜Žå…·ä½“ç»†èŠ‚ã€‚9 ANRäº§ç”Ÿçš„åŽŸå› å’Œè§£å†³æ­¥éª¤10 JavaGCæœºåˆ¶çš„åŽŸç†å’Œå†…å­˜æ³„éœ²11 å®‰å“å¸ƒå±€ä¼˜åŒ–æ–¹æ¡ˆï¼Œ 12 è¯·åœ¨100ä¸ªç”µè¯å·ç æ‰¾å‡º135çš„ç”µè¯å·ç  æ³¨æ„ ä¸èƒ½ç”¨æ­£åˆ™ï¼Œï¼ˆç±»ä¼¼æ€Žä¹ˆæœ€å¥½çš„éåŽ†LogGatæ—¥å¿—ï¼‰13 Handleræœºåˆ¶ï¼Œè¯·å†™å‡ºä¸€ç§æ›´æ–°UIçš„æ–¹æ³•å’Œä»£ç 14 è¯·è§£é‡Šå®‰å“ä¸ºå•¥è¦åŠ ç­¾åæœºåˆ¶ã€‚15 ä½ è§‰å¾—å®‰å“å¼€å‘æœ€å…³é”®çš„æŠ€æœ¯åœ¨å“ªé‡Œï¼Ÿ13 Handleræœºåˆ¶ï¼Œè¯·å†™å‡ºä¸€ç§æ›´æ–°UIçš„æ–¹æ³•å’Œä»£ç 14 è¯·è§£é‡Šå®‰å“ä¸ºå•¥è¦åŠ ç­¾åæœºåˆ¶ã€‚15 ä½ è§‰å¾—å®‰å“å¼€å‘æœ€å…³é”®çš„æŠ€æœ¯åœ¨å“ªé‡Œï¼Ÿ ä¸€è½®é¢è¯•ï¼š 12345678910111213141516171819202122232425262728291 ANR å…·ä½“äº§ç”Ÿçš„ç±»åž‹æœ‰å“ªäº›ï¼Œå…·ä½“è¯´ä¸‹å…¶äº§ç”Ÿçš„æœ€å¤§è¶…æ—¶æ—¶é—´ã€‚2 å¤šçº¿ç¨‹å¤šç‚¹ä¸‹è½½çš„è¿‡ç¨‹3 httpåè®®çš„ç†è§£å’Œç”¨æ³•4 å®‰å“è§£å†³çº¿ç¨‹å¹¶å‘é—®é¢˜5 ä½ çŸ¥é“çš„æ•°æ®ç»“æž„æœ‰å“ªäº›ï¼Œè¯´ä¸‹å…·ä½“å®žçŽ°æœºåˆ¶6 åå…­è¿›åˆ¶æ•°æ®æ€Žä¹ˆå’Œåè¿›åˆ¶å’ŒäºŒè¿›åˆ¶ä¹‹é—´è½¬æ¢7 è°ˆä¸‹å¯¹Java OOPä¸­å¤šæ€çš„ç†è§£8 activtyå’ŒFragmengtä¹‹é—´æ€Žä¹ˆé€šä¿¡ï¼ŒFragmengtå’ŒFragmengtæ€Žä¹ˆé€šä¿¡9 æ€Žä¹ˆè®©è‡ªå·±çš„è¿›ç¨‹ä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨æ€æŽ‰ï¼Œç³»ç»Ÿæ€æŽ‰ä¹‹åŽæ€Žä¹ˆèƒ½å¯åŠ¨èµ·æ¥ã€‚10 è¯´ä¸‹å¹³æ—¶å¼€å‘ä¸­æ¯”è¾ƒæ³¨æ„çš„ä¸€äº›é—®é¢˜ï¼Œç­” ï¼šå¯ä»¥ç†Ÿè¯´ä¸‹svnå’Œgitçš„ç»†èŠ‚ï¼Œå’Œä»£ç è§„èŒƒé—®é¢˜ï¼Œå’Œä¸€äº›å®‰å…¨ä¿¡æ¯çš„é—®é¢˜ç­‰11 è‡ªå®šä¹‰viewæ•ˆçŽ‡é«˜äºŽxmlå®šä¹‰å—ï¼Ÿè¯´æ˜Žç†ç”±ã€‚13 å¹¿æ’­æ³¨å†Œä¸€èˆ¬æœ‰å‡ ç§ï¼Œå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹14 æœåŠ¡å¯åŠ¨ä¸€èˆ¬æœ‰å‡ ç§ï¼ŒæœåŠ¡å’Œactivtyä¹‹é—´æ€Žä¹ˆé€šä¿¡ï¼ŒæœåŠ¡å’ŒæœåŠ¡ä¹‹é—´æ€Žä¹ˆé€šä¿¡15 å¸ƒå±€ä¼˜åŒ–ä¸»è¦å“ªäº›ï¼Ÿå…·ä½“ä¼˜åŒ–ï¼Ÿ16 æ•°æ®åº“çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬æœ¬åœ°æ•°æ®åº“ä¼˜åŒ–ç‚¹ã€‚ äºŒè½®é¢è¯• 123456789101112131415161718192021222324252627282930313233343536371 å®‰å“äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹2 å®‰å“viewç»˜åˆ¶æœºåˆ¶å’ŒåŠ è½½è¿‡ç¨‹ï¼Œè¯·è¯¦ç»†è¯´ä¸‹æ•´ä¸ªæµç¨‹3 activtyçš„åŠ è½½è¿‡ç¨‹ è¯·è¯¦ç»†ä»‹ç»ä¸‹ï¼ˆä¸æ˜¯ç”Ÿå‘½å‘¨æœŸåˆ‡è®°ï¼‰4 å®‰å“é‡‡ç”¨è‡ªåŠ¨åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œè¯·è¯´ä¸‹å®‰å“å†…å­˜ç®¡ç†çš„åŽŸç†5 è¯´ä¸‹å®‰å“è™šæ‹Ÿæœºå’Œjavaè™šæ‹Ÿæœºçš„åŽŸç†å’Œä¸åŒç‚¹ 6 å¤šçº¿ç¨‹ä¸­çš„å®‰å…¨é˜Ÿåˆ—ä¸€èˆ¬é€šè¿‡ä»€ä¹ˆå®žçŽ°ï¼Ÿçº¿ç¨‹æ± åŽŸç†ï¼Ÿï¼ˆjavaï¼‰7 å®‰å“æƒé™ç®¡ç†ï¼Œä¸ºä½•åœ¨æ¸…å•ä¸­æ³¨å†Œæƒé™ï¼Œå®‰å“APPå°±å¯ä»¥ä½¿ç”¨ï¼Œåä¹‹ä¸å¯ä»¥ï¼ˆæ“ä½œç³»ç»Ÿï¼‰8 socketçŸ­çº¿é‡è¿žæ€Žä¹ˆå®žçŽ°ï¼Œå¿ƒè·³æœºåˆ¶åˆæ˜¯æ€Žæ ·å®žçŽ°ï¼Œå››æ¬¡æ¡æ‰‹æ­¥éª¤æœ‰å“ªäº›ï¼ˆç½‘ç»œé€šè®¯åŽŸç†ï¼‰9 httpä¸­TCPå’ŒUDPæœ‰å•¥åŒºåˆ«ï¼Œè¯´ä¸‹HTTPè¯·æ±‚çš„IPæŠ¥æ–‡ç»“æž„ï¼ˆè®¡ç®—æœºç½‘ç»œï¼‰10 ä½ çŸ¥é“çš„å®‰å…¨åŠ å¯†æœ‰å“ªäº›ï¼Ÿ ï¼ˆå¦‚æžœä½ è¯´äº†ä¸€ä¸ªåŠ å¯†ï¼Œé¢è¯•å®˜å°±ä¼šæŽ¥ç€è·Ÿè¿›æé—®ï¼Œæ‰€ä»¥ä¹‹å‰ä½ å¿…é¡»è¦ä¼šï¼Œä¸ä¼šçš„è¯èƒŒä¹Ÿè¦èƒŒä¸‹æ¥ï¼‰ï¼ˆå®‰å…¨åŠ å¯†ï¼‰11 ä½ çŸ¥é“çš„æ•°æ®å­˜å‚¨ç»“æž„ï¼Ÿå †æ ˆå’Œé“¾è¡¨å†…éƒ¨æœºåˆ¶ã€‚ï¼ˆæ•°æ®ç»“æž„ï¼‰12 è¯´ä¸‹Linuxè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ã€‚è¿›ç¨‹è°ƒåº¦ä¼˜å…ˆçº§ï¼Œå’Œcpuè°ƒåº¦è¿›ç¨‹å…³ç³»ã€‚ï¼ˆæ“ä½œç³»ç»Ÿï¼‰13 è¯·ä½ è¯¦ç»†è¯´ä¸‹ä½ çŸ¥é“çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå¹¶è§£é‡Šä¸‹javaçš„é«˜å†…èšå’Œä½Žè€¦åˆã€‚14 spring çš„åå°„å’Œä»£ç†ï¼Œåœ¨å®‰å“ä¸­åº”ç”¨åœºæ™¯ï¼ˆæ’ä»¶å’ŒROMæ•°æ®æ¡†æž¶ï¼‰15 JNI è°ƒç”¨è¿‡ç¨‹ä¸­ æ··æ·†é—®é¢˜16 çœ‹è¿‡å®‰å“æºç å—ï¼Œè¯·è¯´å‡ºä¸€ä¸ªä½ çœ‹è¿‡çš„APIæˆ–è€…ç»„å»ºå†…éƒ¨åŽŸç†ã€‚17 android 5.0 6.0 ä»¥åŠ7.0é¢„æµ‹æ–°ç‰¹æ€§18 hybridæ··åˆå¼€å‘ï¼Œå“åº”å¼ç¼–ç¨‹ç­‰17ä¸ºå•¥ç¦»èŒå‘¢ å¯¹å¾…åŠ ç­çœ‹æ³•18 ä½ æ“…é•¿ä»€ä¹ˆï¼Œåšäº†é‚£äº›ä¸œè¥¿ã€‚ åä¼é¢è¯•é¢˜AndroidåŸºç¡€ [Android æºç ä¸­çš„è®¾è®¡æ¨¡å¼(ä½ éœ€è¦çŸ¥é“çš„è®¾è®¡æ¨¡å¼å…¨åœ¨è¿™é‡Œ)](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android æºç ä¸­çš„è®¾è®¡æ¨¡å¼(ä½ éœ€è¦çŸ¥é“çš„è®¾è®¡æ¨¡å¼å…¨åœ¨è¿™é‡Œ).md) å…¨é¢äº†è§£Activity Serviceå…¨é¢æ€»ç»“ IntentServiceä½¿ç”¨è¯¦è§£å’Œå®žä¾‹ä»‹ç» [Fragment å…¨è§£æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Fragment å…¨è§£æž.md) ContentProviderå®žä¾‹è¯¦è§£ BroadcastReceiverä½¿ç”¨æ€»ç»“ Androidå¼‚æ­¥ä»»åŠ¡æœºåˆ¶ä¹‹AsycTask Androidå¯åŠ¨è¿‡ç¨‹å›¾è§£ [Android è‡ªå®šä¹‰Viewå…¥é—¨](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android è‡ªå®šä¹‰Viewå…¥é—¨.md) [Android è‡ªå®šä¹‰ViewGroupå…¥é—¨å®žè·µ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android è‡ªå®šä¹‰ViewGroupå…¥é—¨å®žè·µ.md) [Android ç¼“å­˜æœºåˆ¶](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android ç¼“å­˜æœºåˆ¶.md) [Android æ•°æ®å­˜å‚¨äº”ç§æ–¹å¼ä½¿ç”¨ä¸Žæ€»ç»“](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android æ•°æ®å­˜å‚¨äº”ç§æ–¹å¼ä½¿ç”¨ä¸Žæ€»ç»“.md) [Android å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶æºç è§£æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶ï¼ˆHandler ã€ Looper ã€MessageQueueï¼‰æºç è§£æž.md) [Android Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android Viewäº‹ä»¶åˆ†å‘æœºåˆ¶æºç åˆ†æž.md) [Android SQLiteçš„ä½¿ç”¨å…¥é—¨](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android SQLiteçš„ä½¿ç”¨å…¥é—¨.md) AIDLçš„ä½¿ç”¨æƒ…å†µå’Œå®žä¾‹ä»‹ç» [Android åä¼é¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†ï¼ˆä¸€ï¼‰](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/android/Android åä¼é¢è¯•é¢˜åŠç­”æ¡ˆæ•´ç†ï¼ˆä¸€ï¼‰.md) é—®é¢˜ Android5.0ã€6.0ã€7.0æ–°ç‰¹æ€§ Androidä¸­å¼±å¼•ç”¨ä¸Žè½¯å¼•ç”¨çš„åº”ç”¨åœºæ™¯ Androidé•¿è¿žæŽ¥ï¼Œæ€Žä¹ˆå¤„ç†å¿ƒè·³æœºåˆ¶ Assetç›®å½•ä¸Žresç›®å½•çš„åŒºåˆ« Binderæœºåˆ¶åŽŸç†å’Œåº•å±‚å®žçŽ° Jsonä¼˜åŠ£åŠ¿ ListViewä¼˜åŒ– androidä¸­å›¾ç‰‡ç¼“å­˜ ä¸¤ç±»åŠ¨ç”» äº”å¤§å¸ƒå±€æ˜“æ··æ·†çŸ¥è¯† ä¿è¯serviceä¸è¢«æ€æ­» åŠ é€Ÿå¯åŠ¨activity æ€Žæ ·é€€å‡ºç»ˆæ­¢App activityåˆ‡æ¢åŠ¨ç”» å¤–é“¾ å¸ƒå±€æ€§èƒ½ä¼˜åŒ–(include, viewstub, merge) DOMã€SAXã€Pullè§£æžXML JavaåŸºç¡€ [ArrayListã€LinkedListã€Vectorçš„åŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] ArrayListã€LinkedListã€Vectorçš„åŒºåˆ«.md) [CollectionåŒ…ç»“æž„ï¼Œä¸ŽCollectionsçš„åŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] CollectionåŒ…ç»“æž„ï¼Œä¸ŽCollectionsçš„åŒºåˆ«.md) [Excptionä¸ŽErroråŒ…ç»“æž„,OOMå’ŒSOF](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Excptionä¸ŽErroråŒ…ç»“æž„%2COOMå’ŒSOF.md) [HashMapå’ŒHashTableçš„åŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] HashMapå’ŒHashTableçš„åŒºåˆ«.md) [HashMapæºç åˆ†æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] HashMapæºç åˆ†æž.md) [Hashcodeçš„ä½œç”¨](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Hashcodeçš„ä½œç”¨.md) [Mapã€Setã€Listã€Queueã€Stackçš„ç‰¹ç‚¹ä¸Žç”¨æ³•](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Mapã€Setã€Listã€Queueã€Stackçš„ç‰¹ç‚¹ä¸Žç”¨æ³•.md) [Objectæœ‰å“ªäº›å…¬ç”¨æ–¹æ³•ï¼Ÿ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Objectæœ‰å“ªäº›å…¬ç”¨æ–¹æ³•ï¼Ÿ.md) [Overrideå’ŒOverloadçš„ä½¿ç”¨è§„åˆ™å’ŒåŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Overrideå’ŒOverloadçš„ä½¿ç”¨è§„åˆ™å’ŒåŒºåˆ«.md) [Switchèƒ½å¦ç”¨stringåšå‚æ•°ï¼Ÿ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] Switchèƒ½å¦ç”¨stringåšå‚æ•°ï¼Ÿ.md) [ThreadLocalçš„ä½¿ç”¨è§„åˆ™å’Œæºç åˆ†æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] ThreadLocalçš„ä½¿ç”¨è§„åˆ™å’Œæºç åˆ†æž.md) [ThreadPoolç”¨æ³•ä¸Žç¤ºä¾‹](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] ThreadPoolç”¨æ³•ä¸Žç¤ºä¾‹.md) [equalsä¸Ž&#x3D;&#x3D;çš„åŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] equalsä¸Ž%3D%3Dçš„åŒºåˆ«.md) [try catch finallyï¼Œtryé‡Œæœ‰returnï¼Œfinallyè¿˜æ‰§è¡Œä¹ˆï¼Ÿ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] try catch finallyï¼Œtryé‡Œæœ‰returnï¼Œfinallyè¿˜æ‰§è¡Œä¹ˆï¼Ÿ.md) [ä¹ç§åŸºæœ¬æ•°æ®ç±»åž‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±»](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] ä¹ç§åŸºæœ¬æ•°æ®ç±»åž‹çš„å¤§å°ï¼Œä»¥åŠä»–ä»¬çš„å°è£…ç±».md) [ä»Žæºç åˆ†æžStringã€StringBufferä¸ŽStringBuilderåŒºåˆ«å’Œè”ç³»](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] ä»Žæºç åˆ†æžStringã€StringBufferä¸ŽStringBuilderåŒºåˆ«å’Œè”ç³».md) [å¤šçº¿ç¨‹ä¸‹ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜çš„äº”ç§åŒæ­¥æ–¹æ³•å®žçŽ°](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] å¤šçº¿ç¨‹ä¸‹ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜çš„äº”ç§åŒæ­¥æ–¹æ³•å®žçŽ°.md) [å®žçŽ°å¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹æ³•](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] å®žçŽ°å¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹æ³•.md) [æŽ¥å£ï¼ˆInterfaceï¼‰ä¸Ž æŠ½è±¡ç±» ï¼ˆAbstractï¼‰ä½¿ç”¨è§„åˆ™å’ŒåŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] æŽ¥å£ï¼ˆInterfaceï¼‰ä¸Ž æŠ½è±¡ç±» ï¼ˆAbstractï¼‰ä½¿ç”¨è§„åˆ™å’ŒåŒºåˆ«.md) [æ–¹æ³•é”ã€å¯¹è±¡é”å’Œç±»é”çš„æ„ä¹‰å’ŒåŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] æ–¹æ³•é”ã€å¯¹è±¡é”å’Œç±»é”çš„æ„ä¹‰å’ŒåŒºåˆ«.md) [å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™šï¼Œç”¨åˆ°çš„åœºæ™¯](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] çš„å››ç§å¼•ç”¨ï¼Œå¼ºå¼±è½¯è™šï¼Œç”¨åˆ°çš„åœºæ™¯.md) [çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼šsychronizedã€lockã€reentrantLockåˆ†æž](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼šsychronizedã€lockã€reentrantLockåˆ†æž.md) [é›†åˆæ¡†æž¶çš„å±‚æ¬¡ç»“æž„å’Œä½¿ç”¨è§„åˆ™æ¢³ç†](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] é›†åˆæ¡†æž¶çš„å±‚æ¬¡ç»“æž„å’Œä½¿ç”¨è§„åˆ™æ¢³ç†.md) [é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªç‰¹å¾ä¸Žå«ä¹‰](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[Java] é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªç‰¹å¾ä¸Žå«ä¹‰.md) [staticçš„ä½œç”¨å’Œæ„ä¹‰](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[java] staticçš„ä½œç”¨å’Œæ„ä¹‰.md) [å¤šæ€å®žçŽ°çš„JVMè°ƒç”¨è¿‡ç¨‹](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/java/[java] å¤šæ€å®žçŽ°çš„JVMè°ƒç”¨è¿‡ç¨‹.md) wait()å’Œsleep()çš„åŒºåˆ« gitå‘½ä»¤ä½¿ç”¨ Javaä¸ŽC++å¯¹æ¯” å¤–é“¾ javaåå°„ javaå›žè°ƒ Javaæ³›åž‹ java æ–°ç‰¹æ€§ Java IOä¸ŽNIO foreachä¸Žæ­£å¸¸forå¾ªçŽ¯æ•ˆçŽ‡å¯¹æ¯” [æ•°æ®ç»“æž„](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/tree/master/data structure)åŸºç¡€ [ä¹å¤§åŸºç¡€æŽ’åºæ€»ç»“ä¸Žå¯¹æ¯”(æŽ’åºç®—æ³•ä¸€ç½‘æ‰“å°½)](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] ä¹å¤§åŸºç¡€æŽ’åºæ€»ç»“ä¸Žå¯¹æ¯”.md) [AVLæ ‘å’ŒAVLæ—‹è½¬ã€å“ˆå¤«æ›¼æ ‘å’Œå“ˆå¤«æ›¼ç¼–ç ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] AVLæ ‘å’ŒAVLæ—‹è½¬ã€å“ˆå¤«æ›¼æ ‘å’Œå“ˆå¤«æ›¼ç¼–ç .md) [B(B-)æ ‘ã€B+æ ‘ã€Bæ ‘](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] B(B-)æ ‘ã€B%2Bæ ‘ã€Bæ ‘.md) [Hashè¡¨ã€Hashå‡½æ•°åŠå†²çªè§£å†³](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] Hashè¡¨ã€Hashå‡½æ•°åŠå†²çªè§£å†³.md) [KMPçš„ä¸€ä¸ªç®€å•è§£é‡Š](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] KMPçš„ä¸€ä¸ªç®€å•è§£é‡Š.md) [äºŒåˆ†æŸ¥æ‰¾ä¸Žå˜ç§äºŒåˆ†æŸ¥æ‰¾](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] äºŒåˆ†æŸ¥æ‰¾ä¸Žå˜ç§äºŒåˆ†æŸ¥æ‰¾.md) [äºŒå‰æ ‘å‰ä¸­åŽã€å±‚æ¬¡éåŽ†ç®—æ³•](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] äºŒå‰æ ‘å‰ä¸­åŽã€å±‚æ¬¡éåŽ†ç®—æ³•.md) [å›¾çš„BFSã€DFSã€primã€Dijkstraç®—æ³•](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] å›¾çš„BFSã€DFSã€primã€Dijkstraç®—æ³•.md) [å­—ç¬¦ä¸²æ“ä½œ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] å­—ç¬¦ä¸²æ“ä½œ.md) [æ•°ç»„ä¸Žé“¾è¡¨çš„ä¼˜ç¼ºç‚¹å’ŒåŒºåˆ«](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] æ•°ç»„ä¸Žé“¾è¡¨çš„ä¼˜ç¼ºç‚¹å’ŒåŒºåˆ«.md) [çº¢é»‘æ ‘](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] çº¢é»‘æ ‘.md) [é˜Ÿåˆ—å’Œæ ˆ](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/data structure&#x2F;[æ•°æ®ç»“æž„] é˜Ÿåˆ—å’Œæ ˆ.md) å¤–é“¾ æµ·é‡æ•°æ®å¤„ç† ç®—æ³•åŸºç¡€ äºŒå‰æœç´¢æ ‘ä¸ŽåŒå‘é“¾è¡¨ [äºŒå‰æ ‘ä¸­ å’Œä¸ºæŸå€¼ çš„æ‰€æœ‰è·¯å¾„](https://link.jianshu.com?t=https://github.com/helen-x/AndroidInterview/blob/master/algorithm/swordForOffer/äºŒå‰æ ‘ä¸­ å’Œä¸ºæŸå€¼ çš„æ‰€æœ‰è·¯å¾„.md) äºŒå‰æ ‘çš„é•œåƒ äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾ äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•° ä»Žä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘ ä»Žå°¾åˆ°å¤´æ‰“å°é“¾è¡¨ åˆ¤æ–­äºŒå‰æœç´¢æ ‘çš„åŽåºéåŽ†åºåˆ— åˆ¤æ–­æ ˆçš„å¼¹å‡ºåºåˆ— åˆ¤æ–­æ ‘Bæ˜¯ä¸æ˜¯æ ‘Açš„å­ç»“æž„ åŒ…å«minå‡½æ•°çš„æ ˆ åè½¬é“¾è¡¨ å˜æ€è·³å°é˜¶ åˆå¹¶ä¸¤ä¸ªæŽ’åºé“¾è¡¨ å¤æ‚é“¾è¡¨çš„å¤åˆ¶ å­—ç¬¦ä¸²ä¸­ç©ºæ ¼æ›¿æ¢ å­—ç¬¦ä¸²çš„é¡ºåºå…¨æŽ’åˆ— æ•°ç»„ä¸­å‡ºçŽ°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­— æ–æ³¢é‚£å¥‘æ•°åˆ— æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­— æµ®ç‚¹æ•°çš„æ•´æ•°æ¬¡æ–¹ ç”¨ä¸¤ä¸ªæ ˆå®žçŽ°é˜Ÿåˆ— çŸ©å½¢è¦†ç›– è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºŽå¶æ•°å‰é¢ è·³å°é˜¶ é‡å»ºäºŒå‰æ ‘ é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹ é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ å¤–é“¾ åˆ†æ²»ç®—æ³• åŠ¨æ€è§„åˆ’ è´ªå¿ƒç®—æ³• åˆ†æ”¯é™ç•Œæ³• ä½œè€…ï¼šèœåˆ€æ–‡é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/735be5ece9e8æ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚ é¢è¯•å’Œå¿…å¤‡çš„æŠ€èƒ½è¿™é‡Œåªç®€å•åˆ—ä¸¾ä¸€äº›ä¸œè¥¿ï¼Œå¯èƒ½ä¸æ˜¯ç‰¹åˆ«å…¨ï¼Œä½†æ˜¯å´ç‰¹åˆ«é€‚ç”¨ï¼Œä¹Ÿä¸ä¸€å®šæŒ‰ç…§ä¸‹é¢çš„æµç¨‹ï¼Œæœ‰å¯èƒ½æ˜¯ç©¿æ’çš„ï¼Œä¹Ÿæœ‰å¯èƒ½éƒ½æœ‰ï¼Œæ ¹æ®å…¬å¸çš„è§„æ¨¡ä»¥åŠé¢è¯•å®˜çš„å¿ƒæƒ…è€Œå®šï¼ˆå“ˆå“ˆå“ˆ ï¼Œä½ ä»¬å°±è‡ªæ±‚å¤šç¦å§ï¼‰ã€‚å»ºè®®å¤§å®¶è¿˜æ˜¯è¦å°†ä¸‹é¢çš„ä¸œè¥¿å…¨éƒ¨æŽŒæ¡ï¼Œæ²¡äº‹å†™å†™ä»£ç ï¼Œç»ƒç»ƒæ‰‹ï¼Œåœ¨é¡¹ç›®ä¸­èƒ½ç”¨åˆ°çš„åœ°æ–¹ä¸€å®šè¦ç”¨ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šå‘ï¼Œä¸€å®šè¦è‡ªå·±æƒ³åŠžæ³•å¡«å‘ï¼Œä¹‹åŽå›žå¿†èµ·è¿™æ®µç»åŽ†ï¼Œè‚¯å®šå¯ä»¥æ•¢ç†ç›´æ°”å£®çš„è·Ÿåˆ«äººè®¨è®ºã€‚å¦‚æžœä½ è¯´çš„å¤´å¤´æ˜¯é“ï¼Œé‚£ä¹ˆå¯¹æ–¹ä¼šå…ˆè¾“ä¸€å±‚ï¼Œç„¶åŽåœ¨å¿ƒé‡Œå¯¹ä½ ä½©æœã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ç¬¬ä¸€è½®éƒ½æ˜¯åŸºç¡€é¢è¯•ï¼Œéœ€è¦æ‰Žå®žçš„åŸºç¡€ æœ€å¸¸ç”¨çš„Android åŸºç¡€çŸ¥è¯† Java åŸºç¡€çŸ¥è¯† äº†è§£ä¸€äº› å¸¸ç”¨ä¸œè¥¿çš„åŽŸç†ï¼Œä¾‹å¦‚ï¼šhandlerï¼Œ thread ç­‰ é¡¹ç›®ä¸­çš„æŠ€æœ¯ç‚¹ ç¬¬äºŒè½®çš„æ—¶å€™éœ€è¦äº†è§£æ›´æ·±å±‚æ¬¡çš„ä¸œè¥¿ Android äº‹ä»¶åˆ†å‘æœºåˆ¶åŽŸç† Android ç»˜å›¾æœºåˆ¶åŽŸç† WindowManager çš„ç›¸å…³çŸ¥è¯† è¿›ç¨‹é—´ä¼ è¾“æ–¹å¼ Java å†…å­˜ç®¡ç†æœºåˆ¶ ä¸€äº›å¸¸ç”¨çš„ list,map åŽŸç†ï¼Œä»¥åŠå­ç±»ä¹‹é—´çš„å·®åˆ« èƒ½è¿›å…¥ç¬¬ä¸‰è½®åŸºæœ¬æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ è¯¥è½®ä¸€èˆ¬æ˜¯ è€å¤§æˆ–è€…éƒ¨é—¨è´Ÿè´£äººï¼Œé—®çš„é—®é¢˜ä¸€èˆ¬éƒ½çœ‹ æ·±åº¦ä¸Žå¹¿åº¦ å½“é—®åŠè–ªæ°´çš„æ—¶å€™ï¼Œè¦è¯´ä¸€ä¸ªåˆé€‚çš„ï¼Œå°å…¬å¸éšæ„ï¼Œå¤§å…¬å¸ä¸€å®šè¦æ…Žé‡ï¼Œå½“å¿ƒé‡Œæ²¡åº•çš„æ—¶å€™ï¼Œå¯ä»¥å‘Šè¯‰å¯¹æ–¹ï¼Œè®©å¯¹æ–¹ç»™ä¸€ä¸ªåˆç†çš„è–ªèµ„ã€‚ä¸€èˆ¬éƒ½æ˜¯åœ¨åŽŸå·¥èµ„åŸºç¡€ä¹‹ä¸Šå¢žé•¿ï¼Œå¬çŒŽå¤´è¯´ä¸€èˆ¬æ¶¨å¹…éƒ½åœ¨15%-30%ï¼Œè¶… NB çš„å¯ä»¥è¦30%åŠä»¥ä¸Šï¼Œå¦‚æžœæ„Ÿè§‰è‡ªå·±è¿˜ä¸é”™çš„ï¼ŒæŒºåŽ‰å®³çš„ï¼Œå»ºè®®æœ€é«˜20%ï¼Œä¸€èˆ¬äººå°±å®šåœ¨15% å·¦å³æœ€é è°±ã€‚å…¬å¸å†…éƒ¨ä¸€èˆ¬æœ‰ä¸€å¥—æœºåˆ¶ï¼Œæ ¹æ®å…¬å¸æƒ…å†µè€Œå®šã€‚ æˆ‘ä»¬çš„é¢è¯•åŽŸåˆ™å°±æ˜¯æ‹¿åˆ°åˆç†è–ªèµ„ï¼Œå¾—åˆ° offer ä¸ªäººå‘å±•æƒ…å†µï¼Œè¿™ä¸ªé—®é¢˜å¾ˆéš¾å›žç­”ï¼Œå¦‚æžœå’Œå…¬å¸æ–¹å‘ä¸ç¬¦åˆï¼Œæžæœ‰å¯èƒ½å’Œå…¬å¸æ— ç¼˜ã€‚å»ºè®®å¤šè¯•æŽ¢æ€§çš„é—®é—®å…¬å¸ç¼ºå°‘ä»€ä¹ˆï¼Œä½ èƒ½å¦ç»™äºˆå…¬å¸å¯¹åº”çš„ä¸œè¥¿ã€‚å½“ç„¶å¯¹äºŽæœ‰è‡ªæˆ‘è¿½æ±‚çš„äººï¼Œé‚£å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„æã€‚æˆ‘çš„æ–¹å‘å°±æ˜¯æž¶æž„å¸ˆï¼Œå“ˆå“ˆå“ˆï¼ŒæŒºæžç«¯çš„ï¼Œåˆ«å­¦æˆ‘å“¦ã€‚æˆ‘æ„Ÿè§‰é€‰æ‹©éƒ½æ˜¯åŒå‘çš„ï¼Œå› æ­¤æˆ‘çŸ¥é“è‡ªå·±éœ€è¦çš„æ˜¯ä»€ä¹ˆã€‚ ä½ æœ€æ“…é•¿ä»€ä¹ˆUI è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆï¼Ÿè¿™ä¸ªé—®é¢˜æ›´ä¸å¥½å›žç­”ã€‚ä½ è¦è¯´ä½ æ“…é•¿ UIï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€ä½ å…¶ä»–èƒ½åŠ›å°±ä¸è¡Œï¼Ÿè™½ç„¶æˆ‘ä¸çŸ¥é“é¢è¯•å®˜çš„ç”¨æ„ï¼Œä½†æ˜¯æˆ‘èƒ½æ„Ÿè§‰åˆ°ï¼Œè¿™ä¸ªé—®é¢˜ä¸æ˜¯é‚£ä¹ˆå¥½å›žç­”ï¼Œæˆ‘ä¼šå›žç­”è¯´è‡ªå·±éƒ½è¡Œï¼Œæ¥ä»€ä¹ˆä¸šåŠ¡æŽ¥ä»€ä¹ˆéœ€æ±‚ã€‚å¯èƒ½å›žç­”ä¸å¤ªå¥½ï¼Œæ€»ä¹‹å’Œå…¬å¸çš„èŒä½å»åˆå°±è¡Œï¼Œè¿™æ ·æ€»ä¸è‡³äºŽå‡ºé”™å§ã€‚ Android é«˜çº§é¢è¯•é¢˜åŠç­”æ¡ˆ 1.å¦‚ä½•å¯¹ Android åº”ç”¨è¿›è¡Œæ€§èƒ½åˆ†æž 2.ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¯¼è‡´å†…å­˜æ³„éœ² 3.å¦‚ä½•é¿å… OOM å¼‚å¸¸ 4.Android ä¸­å¦‚ä½•æ•èŽ·æœªæ•èŽ·çš„å¼‚å¸¸ 5.ANR æ˜¯ä»€ä¹ˆï¼Ÿæ€Žæ ·é¿å…å’Œè§£å†³ ANRï¼ˆé‡è¦ï¼‰ 6.Android çº¿ç¨‹é—´é€šä¿¡æœ‰å“ªå‡ ç§æ–¹å¼ 7.Devik è¿›ç¨‹ï¼Œlinux è¿›ç¨‹ï¼Œçº¿ç¨‹çš„åŒºåˆ« 8.æè¿°ä¸€ä¸‹ android çš„ç³»ç»Ÿæž¶æž„ 9.android åº”ç”¨å¯¹å†…å­˜æ˜¯å¦‚ä½•é™åˆ¶çš„?æˆ‘ä»¬åº”è¯¥å¦‚ä½•åˆç†ä½¿ç”¨å†…å­˜ï¼Ÿ 10. ç®€è¿° android åº”ç”¨ç¨‹åºç»“æž„æ˜¯å“ªäº› 11.è¯·è§£é‡Šä¸‹ Android ç¨‹åºè¿è¡Œæ—¶æƒé™ä¸Žæ–‡ä»¶ç³»ç»Ÿæƒé™çš„åŒºåˆ« 12.Framework å·¥ä½œæ–¹å¼åŠåŽŸç†ï¼ŒActivity æ˜¯å¦‚ä½•ç”Ÿæˆä¸€ä¸ª view çš„ï¼Œæœºåˆ¶æ˜¯ä»€ä¹ˆ 13.å¤šçº¿ç¨‹é—´é€šä¿¡å’Œå¤šè¿›ç¨‹ä¹‹é—´é€šä¿¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåˆ†åˆ«æ€Žä¹ˆå®žçŽ° 14.Android å±å¹•é€‚é… 15.ä»€ä¹ˆæ˜¯ AIDL ä»¥åŠå¦‚ä½•ä½¿ç”¨ 16.Handler æœºåˆ¶ 17.äº‹ä»¶åˆ†å‘æœºåˆ¶ 18.å­çº¿ç¨‹å‘æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹è¿›è¡Œæ›´æ–° UIï¼Œé™¤äº† handler å’Œ AsyncTaskï¼Œè¿˜æœ‰ä»€ä¹ˆ 19.å­çº¿ç¨‹ä¸­èƒ½ä¸èƒ½ new handlerï¼Ÿä¸ºä»€ä¹ˆ 20.Android ä¸­çš„åŠ¨ç”»æœ‰å“ªå‡ ç±»ï¼Œå®ƒä»¬çš„ç‰¹ç‚¹å’ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ 21.å¦‚ä½•ä¿®æ”¹ Activity è¿›å…¥å’Œé€€å‡ºåŠ¨ç”» 22.SurfaceView &amp; View çš„åŒºåˆ« 23.å¼€å‘ä¸­éƒ½ä½¿ç”¨è¿‡å“ªäº›æ¡†æž¶ã€å¹³å° 24.ä½¿ç”¨è¿‡é‚£äº›è‡ªå®šä¹‰View 25.è‡ªå®šä¹‰æŽ§ä»¶ï¼šç»˜åˆ¶åœ†çŽ¯çš„å®žçŽ°è¿‡ç¨‹ 26.è‡ªå®šä¹‰æŽ§ä»¶ï¼šæ‘©å¤©è½®çš„å®žçŽ°è¿‡ç¨‹ 28.æµå¼å¸ƒå±€çš„å®žçŽ°è¿‡ç¨‹ 29.ç¬¬ä¸‰æ–¹ç™»é™† [30.ç¬¬ä¸‰æ–¹æ”¯ä»˜](","categories":[],"tags":[{"name":"inter","slug":"inter","permalink":"https://noteforme.github.io/tags/inter/"}]},{"title":"TextView","slug":"TextView","date":"2018-03-04T13:16:56.000Z","updated":"2023-02-23T14:17:11.784Z","comments":true,"path":"2018/03/04/TextView/","link":"","permalink":"https://noteforme.github.io/2018/03/04/TextView/","excerpt":"","text":"Width ç»˜åˆ¶åˆ†æžæ²¡æœ‰å…¶ä»–å±žæ€§å½±å“çš„è¯ï¼Œå®½åº¦åº”è¯¥å°±æ˜¯å­—ä½“çš„å®½åº¦ï¼Œåœ¨æ¨ªå‘çš„recycleview adaterä¸­ä¸åŒçš„å­—ä½“ä¼šå¢žåŠ é—´è·ã€‚ 1234android:autoSizeTextType&#x3D;&quot;uniform&quot;android:autoSizeMinTextSize&#x3D;&quot;8sp&quot;android:autoSizeMaxTextSize&#x3D;&quot;12sp&quot;android:autoSizeStepGranularity&#x3D;&quot;1sp&quot; TextViewé¢œè‰²å˜åŒ–SpannableString https://juejin.im/entry/5729d28f1ea49300606854c9SpannableStringæœ‰ä¸€ä¸ªä¸æ–¹ä¾¿çš„åœ°æ–¹æ˜¯æˆªå–å­—ç¬¦ä¸² 123456789101112131415161718 TextView tvRegister = findViewById(R.id.tv_register); //å°†TextViewçš„æ˜¾ç¤ºæ–‡å­—è®¾ç½®ä¸ºSpannableStringâ€‹ tvRegister.setText(getClickableSpan());â€‹ //è®¾ç½®è¯¥å¥ä½¿æ–‡æœ¬çš„è¶…è¿žæŽ¥èµ·ä½œç”¨â€‹ tvRegister.setMovementMethod(LinkMovementMethod.getInstance());â€‹ â€‹ private SpannableString getClickableSpan() &#123;â€‹ SpannableString spanTxt = new SpannableString(&quot;é˜…è¯»å¹¶åŒæ„&lt;&lt;ç”¨æˆ·æ³¨å†Œåè®®&gt;&gt;&quot;);â€‹ //è®¾ç½®æ–‡å­—çš„å‰æ™¯è‰²â€‹ spanTxt.setSpan(new ForegroundColorSpan(Color.GREEN),5, 15,Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);â€‹ spanTxt.setSpan(new ClickableSpan() &#123; â€‹ @Overrideâ€‹ public void onClick(View widget) &#123;â€‹ Intent intent = new Intent(TextViewActivity.this, FirstActivity.class);â€‹ startActivity(intent);â€‹ &#125;â€‹ &#125;, 5, 15, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);â€‹ â€‹ Htmlæ ‡ç­¾æ–¹å¼ 123TextView textView = (TextView) findViewById(R.id.text_for_test);String textSource = &quot;ä¿®æ”¹TextViewä¸­éƒ¨åˆ†æ–‡å­—çš„&lt;font color=&#x27;#ff0000&#x27;&gt;&lt;big&gt;å¤§&lt;/big&gt;&lt;small&gt;å°&lt;/small&gt;&lt;/font&gt;å’Œ&lt;font color=&#x27;#00ff00&#x27;&gt;é¢œè‰²&lt;/font&gt;ï¼Œå±•ç¤ºå¤šå½©æ•ˆæžœï¼&quot;;textView.setText(Html.fromHtml(textSource)); http://www.jianshu.com/p/f6cef78e8652 https://github.com/liqy/TextViewDemo EditTextstyleé‡Œé¢çš„é…ç½® 12&lt;item name&#x3D;&quot;android:focusable&quot;&gt;true&lt;&#x2F;item&gt; &lt;item name&#x3D;&quot;android:focusableInTouchMode&quot;&gt;true&lt;&#x2F;item&gt; https://blog.csdn.net/u011630575/article/details/50775639 ä¸‹åˆ’çº¿é¢œè‰² https://blog.csdn.net/lindroid20/article/details/72551102 è‡ªå®šä¹‰è§£æžå™¨ https://my.oschina.net/ososchina/blog/3018393 å¯†ç è¾“å…¥æ¡† https://github.com/li504799868/ZEditText è¶…å‡ºå­—ç¬¦æ˜¾ç¤ºçœç•¥å·https://www.jianshu.com/p/025f49696882 ç›‘å¬å™¨è®¾ç½® https://blog.csdn.net/xiao_ziqiang/article/details/50790168 https://blog.csdn.net/u014748504/article/details/79083501 https://www.jianshu.com/p/1d0777d9bfdf","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"LeakMemory","slug":"LeakMemory","date":"2018-02-09T08:15:17.000Z","updated":"2023-01-02T03:31:39.092Z","comments":true,"path":"2018/02/09/LeakMemory/","link":"","permalink":"https://noteforme.github.io/2018/02/09/LeakMemory/","excerpt":"","text":"å†…å­˜æ³„æ¼ https://mp.weixin.qq.com/s/tO1yxFs2qNQlQ2bJ8vGzQA https://www.jianshu.com/p/ac00e370f83d å†…å­˜æ³„æ¼æ€»ç»“ 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class SampleActivity extends Activity &#123; &#x2F;** * Instances of static inner classes do not hold an implicit * reference to their outer class. *&#x2F; private static class MyHandler extends Handler &#123; private final WeakReference&lt;SampleActivity&gt; mActivity; public MyHandler(SampleActivity activity) &#123; mActivity &#x3D; new WeakReference&lt;SampleActivity&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; SampleActivity activity &#x3D; mActivity.get(); if (activity !&#x3D; null) &#123; &#x2F;&#x2F; ... &#125; &#125; &#125; private final MyHandler mHandler &#x3D; new MyHandler(this); &#x2F;** * Instances of anonymous classes do not hold an implicit * reference to their outer class when they are &quot;static&quot;. *&#x2F; private static final Runnable sRunnable &#x3D; new Runnable() &#123; @Override public void run() &#123; &#x2F;* ... *&#x2F; &#125; &#125;; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); &#x2F;&#x2F; Post a message and delay its execution for 10 minutes. mHandler.postDelayed(sRunnable, 1000 * 60 * 10); &#x2F;&#x2F; Go back to the previous Activity. finish(); &#125;&#125; kotin Fragmentæ–¹å¼ 12345678910111213class MyHandler : Handler &#123; private var mFragment: WeakReference&lt;Any&gt; constructor(fragment: Fragment) &#123; mFragment &#x3D; WeakReference(fragment) &#125; override fun handleMessage(msg: android.os.Message?) &#123; super.handleMessage(msg) val fragment &#x3D; mFragment.get() as PayProFragment fragment.reloadPay() &#125; &#125; å†…å­˜æ³„æ¼å¤„ç†-Handler æŸ¥æ‰¾æ–¹å¼ https://www.jianshu.com/p/bdfd2a6b2681 â€‹ https://developer.android.com/studio/profile/memory-profiler leakcanaryhttps://square.github.io/leakcanary/recipes/ https://juejin.im/post/5d617d6851882575e8054fab å†…å­˜æŠ–åŠ¨Profiler https://www.bilibili.com/video/BV1oz4y1m7Gw?p=14 Appç˜¦èº« å¤§å›¾è½¬æˆ webapp svgæ‰¹é‡è½¬æ¢ è®¾ç½® vectorDrawables.useSupportLibrary = true ç„¶åŽ app:srcCompat = å¦åˆ™ä¼šåœ¨æ¯ä¸ªdrawableç”Ÿæˆä¸€ä¸ªpngå›¾ç‰‡ï¼Œè¾¾ä¸åˆ°æ•ˆæžœäº†ã€‚ tinkä¿®æ”¹å›¾ç‰‡é¢œè‰² å›½é™…åŒ– 12345android&#123; defaultConfig&#123; resConfigs &#x27;en&#x27; //åªé€‚é…è‹±è¯­ &#125;&#125; è¿™æ ·åªä¼šä¿å­˜ è¯­è¨€çš„æ˜ å°„ soåº“ ä¸€èˆ¬åƒå¾®ä¿¡ç”¨Armeabi-v7a è™šæ‹Ÿæœºè¿è¡Œ è¿˜éœ€è¦ x86 åˆ é™¤æ— ç”¨èµ„æº 12345debug&#123; minifyEnabled true // åˆ é™¤æ— ç”¨ä»£ç  shrinkResource true //åˆ é™¤èµ„æºæ–‡ä»¶ minifyEnabled ä¸ºtrue,åˆ é™¤äº†æ— ç”¨ä»£ç ï¼Œè¿™ä¸ªæ‰çŸ¥é“åˆ é™¤å“ªäº›èµ„æºã€‚ &#125;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Hilt","slug":"Hilt","date":"2018-01-23T07:11:40.000Z","updated":"2023-12-17T12:43:26.284Z","comments":true,"path":"2018/01/23/Hilt/","link":"","permalink":"https://noteforme.github.io/2018/01/23/Hilt/","excerpt":"","text":"https://developer.android.google.cn/training/dependency-injection Hiltä½œç”¨ https://www.bilibili.com/video/BV18o4y1S7KH ã€Œç¤¾åŒºè¯´ã€ã€ŠHilt-æŠŠæ¡ä½Androidä¾èµ–é¡¹æ³¨å…¥çš„â€œåˆ©å™¨â€ã€‹ https://www.bilibili.com/video/BV1eM4y1G7aR ç ç‰› https://www.bilibili.com/video/BV1Ki4y1A7hA åŠ¨è„‘å­¦é™¢ https://services.google.cn/fh/files/misc/hilt-annotations-2.3.3_zh-cn.pdf https://mp.weixin.qq.com/s/OEX1d2cU1zGG5BBM-nANBg https://developer.android.google.cn/training/dependency-injection/hilt-android?hl=zh-cn Componentç§æ³¨å…¥äº†Activityå¯¹è±¡ ï¼ŒFactoryæä¾›çš„Moduleå¯¹è±¡å’ŒActivityå…³è”èµ·æ¥. ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆç”¨ è‡ªåŠ¨åŠ è½½ è‡ªåŠ¨åŠ è½½çš„å…³é”® : æ•°æ®å…±äº« https://www.bilibili.com/video/BV1e54y1S72A/ ç”±äºŽä¼šå’ŒDaggerå†²çªï¼Œæ‰€ä»¥å†™åœ¨JYKoté‡Œ ç”¨æ³•ä½¿ç”¨Hilt æ³¨å…¥ é…ç½®HiltAndroidAppæ³¨è§£ 12@HiltAndroidApp // 1. HiltAndroidAppæ³¨è§£,ç”Ÿæˆç›¸åº”çš„ç»„ä»¶class MyApp : Application() &#123;&#125; æž„é€ æ–¹æ³•æ³¨å…¥12// æž„é€ æ–¹æ³•ç»‘å®šclass User @Inject() constructor() 1234567891011121314@AndroidEntryPointclass HiltMainActivity : AppCompatActivity() &#123; private val TAG = javaClass.simpleName @Inject lateinit var user: User override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) val biding = ActivityHiltMainBinding.inflate(layoutInflater) setContentView(biding.root) Log.i(TAG, &quot;user: $user&quot;) &#125;&#125; Moduleå¯¹è±¡æ³¨å…¥å»ºç«‹ç»‘å®š,å°±æ˜¯è¯´Userå¯¹è±¡å®žä¾‹ç”±è°æä¾› å¯ä»¥é€šAppModuleæä¾› 1class User1 12345678910//Moduleè£…è½½åˆ°ApplicationComponentä¸­,Moduleä½œç”¨åŸŸå°±è¢«é™å®šèµ·æ¥äº†@InstallIn(ApplicationComponent.class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Modulepublic class AppModule &#123; @Provides User1 provideUser() &#123; return new User1(); &#125;&#125; å¾€Activityæ³¨å…¥å®žä¾‹ ä¸»è¦æ˜¯@AndroidEntryPoint @Inject 1234567891011121314151617@AndroidEntryPointpublic class HiltActivity extends AppCompatActivity &#123; String TAG =&quot;HiltActivity&quot;; @Inject User user; //injectæ³¨è§£ä½œç”¨åœ¨Userå˜é‡ä¸Š,æ³¨å…¥å¯¹è±¡å®žä¾‹ @Inject User1 user1; // æ–¹å¼2 @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_hilt); Log.i(TAG, &quot;user: &quot; + user); Log.i(TAG, &quot;user1: &quot; + user1); &#125;&#125; è¿è¡Œç»“æžœ 28743-28743/com.john.kot I/HiltActivity: user: com.john.kot.hilt.User@d33a8d528743-28743/com.john.kot I/HiltActivity: user1: com.john.kot.hilt.User1@62df8ea é»˜è®¤æ ‡å‡†ç»„ä»¶ Component lifetimes Hilt ä¹Ÿå…è®¸å°†ç»‘å®šçš„ä½œç”¨åŸŸé™å®šä¸ºç‰¹å®šç»„ä»¶ã€‚Hilt åªä¸ºç»‘å®šä½œç”¨åŸŸé™å®šåˆ°çš„ç»„ä»¶çš„æ¯ä¸ªå®žä¾‹åˆ›å»ºä¸€æ¬¡é™å®šä½œç”¨åŸŸçš„ç»‘å®šï¼Œå¯¹è¯¥ç»‘å®šçš„æ‰€æœ‰è¯·æ±‚å…±äº«åŒä¸€å®žä¾‹ã€‚ ç»„ä»¶å®žä¾‹ç”±å…³è”çš„Androidç±»æ¥åˆ›å»ºçš„ 1234567891011//Moduleè£…è½½åˆ°ActivityComponentä¸­@InstallIn(ActivityComponent.class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Modulepublic class AppModule1 &#123; @ActivityScoped //ActivityComponentåªèƒ½è®¾ç½®ActivityScopedä½œç”¨åŸŸ @Provides User1 provideUser() &#123; return new User1(); &#125;&#125; 123456789101112131415161718192021222324@AndroidEntryPointpublic class HiltActivity extends AppCompatActivity &#123; String TAG =&quot;HiltActivity&quot;; //injectæ³¨è§£ä½œç”¨åœ¨Userå˜é‡ä¸Š,æ³¨å…¥å¯¹è±¡å®žä¾‹ @Inject User1 user1; // æ–¹å¼2 @Inject User1 user2; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_hilt); //æµ‹è¯• ActivityComponent Log.i(TAG, &quot;user1: &quot; + user1); Log.i(TAG, &quot;user2: &quot; + user2); startActivity(new Intent(this,SecondActivity.class)); &#125;&#125; 123456789101112@AndroidEntryPointpublic class SecondActivity extends AppCompatActivity &#123; String TAG = &quot;SecondActivity&quot;; @Inject User1 user3; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_second); Log.i(TAG, &quot;user3: &quot; + user3); &#125;&#125; è¿è¡Œç»“æžœ 2021-09-25 23:02:57.595 29397-29397/com.john.kot I/HiltActivity: user1: com.john.kot.hilt.User1@62df8ea2021-09-25 23:02:57.595 29397-29397/com.john.kot I/HiltActivity: user2: com.john.kot.hilt.User1@62df8ea2021-09-25 23:02:57.883 29397-29397/com.john.kot I/SecondActivity: user3: com.john.kot.hilt.User1@1aa35b5 å¯ä»¥çœ‹åˆ°ä½œç”¨åŸŸåœ¨Activityä¸­ å•ä¾‹å¯¹è±¡çš„æ³¨å…¥æž„é€ æ–¹æ³•å•ä¾‹12@Singletonclass User6 @Inject constructor() 12@Injectlateinit var user6: User6 // æ–¹å¼2 åœ¨Activityè¿™æ ·æ³¨å…¥åŽï¼ŒUser6çš„å¯¹è±¡å°±æ˜¯å•ä¾‹çš„äº†ã€‚ AppModule1ä¿®æ”¹æˆ ApplicationComponent å’ŒSingleton 1234567891011//Moduleè£…è½½åˆ°ApplicationComponentä¸­@InstallIn(ApplicationComponent.class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Modulepublic class AppModule1 &#123; @Singleton //ActivityComponentåªèƒ½è®¾ç½®ActivityScopedä½œç”¨åŸŸ @Provides User1 provideUser() &#123; return new User1(); &#125;&#125; è¿è¡Œç»“æžœ 2021-09-25 23:09:24.752 29553-29553/com.john.kot I/HiltActivity: user1: com.john.kot.hilt.User1@62df8ea2021-09-25 23:09:24.752 29553-29553/com.john.kot I/HiltActivity: user2: com.john.kot.hilt.User1@62df8ea2021-09-25 23:09:25.106 29553-29553/com.john.kot I/SecondActivity: user3: com.john.kot.hilt.User1@62df8ea æ˜Žæ˜¾ä¸€æ ·çš„å®žä¾‹äº† æ–¹å¼ä¸€12345678910111213141516@InstallIn(SingletonComponent::class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Moduleclass AppModule5 &#123; @Singleton @Provides fun provideUser(): UserHilt5 &#123; return UserHilt5() &#125; @Singleton @Provides fun provideUserParam5(user: UserHilt5): UserParam5 &#123; return UserParam5(user) &#125;&#125; 1234Log.i(TAG, &quot;userParam: $&#123;userParam.user1&#125;&quot;)Log.i(TAG, &quot;userParam5: $&#123;userParam5.user5&#125;&quot;)Log.i(TAG, &quot;userParam: $&#123;userParam.user1&#125;&quot;)Log.i(TAG, &quot;userParam5: $&#123;userParam5.user5&#125;&quot;) ä»Žä¸‹é¢ç»“æžœå¯ä»¥çœ‹åˆ°userParam5æ˜¯ç›¸åŒçš„å¯¹è±¡ 1234com.john.kot I/HiltActivity: userParam: com.john.kot.hilt.model.User1@7459850com.john.kot I/HiltActivity: userParam5: com.john.kot.hilt.model.UserHilt5@aea6a49com.john.kot I/HiltSecondActivity: userParam: com.john.kot.hilt.model.User1@bf41510com.john.kot I/HiltSecondActivity: userParam5: com.john.kot.hilt.model.UserHilt5@aea6a49 æ–¹å¼2ä½†æ˜¯åœ¨Daggeré‡Œï¼Œç»„å»ºæ³¨å…¥ä¸åŒçš„Activityå¯¹è±¡åŽï¼Œå¯¹è±¡ä¹Ÿæ˜¯ä¸ç›¸åŒçš„,åªæœ‰åœ¨ç›¸åŒActivityæ‰æ˜¯å•ä¾‹çš„ã€‚ å¿…é¡»ç”¨Applicationç»„å»ºï¼Œæ‰èƒ½å®žçŽ°å…¨å±€APPçš„å•ä¾‹ 123456789101112@InstallIn(SingletonComponent::class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Moduleclass AppModule5 &#123; @Singleton @Provides fun provideUser(): User5 &#123; return User5() &#125;&#125;class UserParam5 @Inject constructor(var user5: User5) æ–¹å¼31234@Singletonclass User5 @Inject constructor()class UserParam5 @Inject constructor(var user5: User5) ç»„ä»¶ä½œç”¨åŸŸç»„ä»¶å’Œç»„ä»¶ä½œç”¨åŸŸä¸€ä¸€å¯¹åº”. Android class Generated component Scope Application SingletonComponent @Singleton Activity(åº”è¯¥æ˜¯view model) ActivityRetainedComponent @ActivityRetainedScoped ViewModel ViewModelComponent @ViewModelScoped Activity ActivityComponent @ActivityScoped Fragment FragmentComponent @FragmentScoped View ViewComponent @ViewScoped View annotated with @WithFragmentBindings ViewWithFragmentComponent @ViewScoped Service ServiceComponent @ServiceScoped @ActivityScoped123456789101112131415161718192021@AndroidEntryPointclass HiltMainActivity : AppCompatActivity() &#123; private val TAG = javaClass.simpleName @Inject lateinit var user3: User2 @Inject lateinit var user4: User2 override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) val biding = ActivityHiltMainBinding.inflate(layoutInflater) setContentView(biding.root) Log.i(TAG, &quot;user3: $user3&quot;) Log.i(TAG, &quot;user4: $user4&quot;) startActivity(Intent(this,HiltSecondActivity::class.java)) &#125;&#125; 1234567891011//Moduleè£…è½½åˆ°ActivityComponentä¸­@InstallIn(ActivityComponent::class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Moduleclass AppModule2 &#123; // ApplicationComponentå¯¹åº”çš„ä½œç”¨åŸŸ @Singleton @ActivityScoped @Provides fun provideUser(): User2 &#123; return User2() &#125;&#125; @ActivityScopedå¿…é¡»ç”¨ActivityComponent, å¯ä»¥çœ‹åˆ°åœ¨Activityç”Ÿå‘½å‘¨æœŸå†…å¯¹è±¡ç›¸åŒ 123469 5433-5433/com.john.kot I/HiltMainActivity: user3: com.john.kot.hilt.dn.di.User2@1ca33ad469 5433-5433/com.john.kot I/HiltMainActivity: user4: com.john.kot.hilt.dn.di.User2@1ca33ad521 5433-5433/com.john.kot I/HiltSecondActivity: user5: com.john.kot.hilt.dn.di.User2@8d0e984 @Singleton1234567891011//Moduleè£…è½½åˆ°ActivityComponentä¸­@InstallIn(SingletonComponent::class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Moduleclass AppModule2 &#123; // ApplicationComponentå¯¹åº”çš„ä½œç”¨åŸŸ @Singleton @Singleton @Provides fun provideUser(): User2 &#123; return User2() &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æƒ…å†µåº”ç”¨å†…å•ä¾‹ 123773 5726-5726/com.john.kot I/HiltMainActivity: user3: com.john.kot.hilt.dn.di.User2@aa56b56773 5726-5726/com.john.kot I/HiltMainActivity: user4: com.john.kot.hilt.dn.di.User2@aa56b56816 5726-5726/com.john.kot I/HiltSecondActivity: user5: com.john.kot.hilt.dn.di.User2@aa56b56 ç»„ä»¶å±‚æ¬¡ç»“æž„ ApplicationComponent é¡¶çº§çˆ¶ç»„ä»¶ ,ä¸‹ä¸€å±‚ActivityRetanedComponentæ˜¯çš„å­ç»„ä»¶ï¼Œå¾€ä¸‹æ˜¯å­å­ç»„ä»¶ã€‚ é‚£ä¹ˆActivityRetanedComponentå¯ä»¥èŽ·å–åˆ°ApplicationComponentæä¾›çš„å¯¹è±¡çš„å®žä¾‹. 1234567891011//Moduleè£…è½½åˆ°ActivityComponentä¸­@InstallIn(SingletonComponent::class) //é€šè¿‡è¿™ç§æ–¹å¼å’Œç»„ä»¶å…³è”@Moduleclass AppModule2 &#123; // ApplicationComponentå¯¹åº”çš„ä½œç”¨åŸŸ @Singleton @Singleton @Provides fun provideUser(): User2 &#123; return User2() &#125;&#125; ä¾‹å¦‚å°±åƒä¸Šé¢ä¸€æ ·ï¼Œ Activityä¸­å¯ä»¥è®¿é—®SingletonComponentç»„ä»¶çš„å®žä¾‹ã€‚ ç»„ä»¶é»˜è®¤ç»‘å®š Android component Default bindings SingletonComponent Application ActivityRetainedComponent Application ViewModelComponent SavedStateHandle ActivityComponent Application, Activity FragmentComponent Application, Activity, Fragment ViewComponent Application, Activity, View ViewWithFragmentComponent Application, Activity, Fragment, View ServiceComponent Application, Service ApplicationComponentè¿™é‡ŒViewModelå’Œjetpack viewmodelè¿˜æ²¡æœ‰å…³è” ã€‚ è€å¸ˆè¯´HiltViewModel3 é»˜è®¤è£…è½½åˆ°äº†ApplicationComponentä¸­,æˆ‘è§‰å¾—ä¸æ˜¯ï¼Œåº”è¯¥æ˜¯è£…è½½åˆ°ActivityComponentï¼Œå¦‚æžœSingletonComponentæ˜¯èŽ·å–ä¸åˆ°Activityçš„ã€‚ 12345678910111213// HiltViewModel3 é»˜è®¤è£…è½½åˆ°äº†ApplicationComponentä¸­class HiltViewModel3 @Inject constructor( var user: User3, var application: Application, var activity: Activity) &#123; var TAG = javaClass.simpleName fun test() &#123; Log.i(TAG, &quot;test:user $user&quot;) Log.i(TAG, &quot;test: application $application&quot;) Log.i(TAG, &quot;test: activity$activity&quot;) &#125;&#125; 123456789101112@AndroidEntryPointclass HiltMainActivity : AppCompatActivity() &#123; private val TAG = javaClass.simpleName @Inject lateinit var viewModel: HiltViewModel3 override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) val biding = ActivityHiltMainBinding.inflate(layoutInflater) setContentView(biding.root) viewModel.test() &#125;&#125; 1236613/com.john.kot I/ViewModel: test:user com.john.kot.hilt.dn.di.User3@1ca33ad6613/com.john.kot I/ViewModel: test: application com.john.kot.MyApp@3a4e6e26613/com.john.kot I/ViewModel: test: activitycom.john.kot.hilt.dn.HiltMainActivity@211813d å¯ä»¥çœ‹åˆ°éƒ½æœ‰ Application, Activityå®žä¾‹å¯¹è±¡,è¿™å°±æ˜¯é»˜è®¤ç»‘å®š Activityé»˜è®¤ç»‘å®šä¸‹é¢çš„æ²¡æœ‰ @Inject 12345678class HiltViewModel4(var user: User3, var application: Application, var activity: Activity) &#123; var TAG = javaClass.simpleName fun test() &#123; Log.i(TAG, &quot;test:user $user&quot;) Log.i(TAG, &quot;test: application $application&quot;) Log.i(TAG, &quot;test: activity$activity&quot;) &#125;&#125; 123456789101112131415//Moduleè£…è½½åˆ°ActivityComponentä¸­@InstallIn(ActivityComponent::class) //è¿™é‡Œç”¨SingletonComponentä¼šæŠ¥é”™,å› ä¸ºApplicationä¸èƒ½æä¾›activityå®žä¾‹@Moduleclass AppModule4 &#123; @Singleton //Singleton,å› ä¸ºApplicationä¸èƒ½æä¾›activityå®žä¾‹ @Provides fun provideViewModel( user: User3, application: Application, activity: Activity ): HiltViewModel4 &#123; return HiltViewModel4(user, application, activity) &#125;&#125; 1viewModel1.test(); 123com.john.kot I/HiltViewModel4: test:user com.john.kot.hilt.dn.di.User3@5b5a73com.john.kot I/HiltViewModel4: test: application com.john.kot.MyApp@3a4e6e2com.john.kot I/HiltViewModel4: test: activitycom.john.kot.hilt.dn.HiltMainActivity@211813d å¯ä»¥çœ‹åˆ°ä¹Ÿèƒ½æä¾›Appilicatonå’Œactivityé»˜è®¤ç»‘å®šçš„å®žä¾‹ é¢„å®šä¹‰é™å®šç¬¦æä¾›äº†å‡ ç§é¢„å®šä¹‰é™å®šç¬¦(Qualifier) : @ApplicationContext å’Œ @ActivityContext ApplicationContext VS ActivityContext ?Hiltæ”¯æŒJetpackç»„ä»¶ViewModel Userç”±æˆ‘ä»¬è‡ªå·±æä¾› Application application, Activity activityç”± Daggeræä¾› Contexté¢„å®šä¹‰çš„é™å®šç¬¦. 123456789101112131415161718192021222324public class MainViewModel extends ViewModel &#123; String TAG = &quot;MainViewModel&quot;; User3 user; Application application; Activity activity; Context context; @ViewModelInject public MainViewModel(User3 user, Application application, Activity activity,@ApplicationContext Context context) &#123; this.user = user; this.application = application; this.activity = activity; this.context =context; &#125; public void test()&#123; Log.i(TAG, &quot;test:user=&quot;+user); Log.i(TAG, &quot;test: application=&quot;+application); Log.i(TAG, &quot;test: activity=&quot;+activity); Log.i(TAG, &quot;test: context=&quot;+context); &#125;&#125; https://www.bilibili.com/video/BV1Ki4y1A7hA?spm_id_from=333.999.0.0 https://www.bilibili.com/video/BV1BK4y1V7no?p=4&amp;spm_id_from=pageDriver https://developer.android.com/codelabs/android-hilt?hl=zh-cn#7 Interface inject æŽ¥å£æ³¨å…¥https://juejin.cn/post/6967148539277213733 1234567@InstallIn(ActivityComponent::class)@Moduleabstract class BannerRepoModule &#123; //BannerRepositoryå®žä¾‹è‡ªåŠ¨newå‡ºæ¥äº¤ç»™å¯¹åº”çš„æŽ¥å£ @Binds abstract fun bannerRepo(repoImpl: BannerRepository): IBannerApi &#125; viewModelåœ¨ViewModelä¸Šæ·»åŠ @HiltViewModelï¼Œå¿…é¡»æœ‰å¸¦å‚çš„æž„é€ å‡½æ•°ï¼Œç”¨Injectæ³¨å…¥ 1. viewModelåœ¨ViewModelä¸Šæ·»åŠ @HiltViewModelï¼Œå¿…é¡»æœ‰å¸¦å‚çš„æž„é€ å‡½æ•°ï¼Œç”¨Injectæ³¨å…¥ 1234@HiltViewModelclass DataViewModel @Inject constructor( private val dataRepo: DataRepository) : ViewModel() 2. fragmentå’Œactivityåœ¨fragmentå’Œactivityä¸Šæ·»åŠ @AndroidEntryPointæ³¨è§£ ç„¶åŽå¯ä»¥ä½¿ç”¨by viewModels()ç›´æŽ¥èŽ·å–viewmodel 1234@AndroidEntryPointclass DataFragment : Fragment() &#123; private val dataViewModel: DataViewModel by viewModels()&#125; 3. é‡åˆ°çš„å‘é€šè¿‡ViewPageråˆ›å»ºçš„Fragmentæ— æ³•ä½¿ç”¨@HiltViewModelï¼Œåªèƒ½é€šè¿‡æ™®é€šçš„æ–¹å¼æ³¨å…¥ï¼Œå¼„äº†å¾ˆä¹…éƒ½æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚é…åˆnavigationä½¿ç”¨çš„è¯æ²¡æœ‰é—®é¢˜ å­—èŠ‚ç æŠ€æœ¯Javassit åŠ¨æ€ä¿®æ”¹å­—èŠ‚ç  Hilt UnitTesthttps://mahendranv.github.io/posts/hilt-instrument/ Entry pointDependency injection with Hilt &nbsp;|&nbsp; Android Developers 12345678class AnalyticsServiceImpl @Inject constructor( @ApplicationContext context: Context) : AnalyticsService &#123; ... &#125;// The Application binding is available without qualifiers.class AnalyticsServiceImpl @Inject constructor( application: Application) : AnalyticsService &#123; ... &#125; 12345678910class ExampleContentProvider : ContentProvider() &#123; @EntryPoint @InstallIn(SingletonComponent::class) interface ExampleContentProviderEntryPoint &#123; fun analyticsService(): AnalyticsService &#125; ...&#125;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"TEST_Espresso","slug":"TEST_Espresso","date":"2018-01-22T13:58:05.000Z","updated":"2022-06-12T03:17:58.728Z","comments":true,"path":"2018/01/22/TEST_Espresso/","link":"","permalink":"https://noteforme.github.io/2018/01/22/TEST_Espresso/","excerpt":"","text":"the difficulty tip is on recycleview â€˜s content that not visible in firtpage, which you can search for and find the views that match the non-unique R.id: https://developer.android.com/training/testing/espresso/lists å®˜æ–¹testå¯ä»¥æŒ‡å®škey å’Œvalue,æ˜¯å› ä¸ºè¿™ä¸ª 1234567@VisibleForTestingprotected static Map&lt;String, Object&gt; makeItem(int forRow) &#123; Map&lt;String, Object&gt; dataRow = Maps.newHashMap(); dataRow.put(ROW_TEXT, String.format(ITEM_TEXT_FORMAT, forRow)); dataRow.put(ROW_ENABLED, forRow == 1); return dataRow;&#125; ä½†æ˜¯æˆ‘ä»¬çš„é¡¹ç›®æ˜¯æ²¡æœ‰çš„ã€‚ Adapter view warningsNoMatchingViewException and AdapterView widgets are present in the view hierarchy, the most common solution is to use onData(). The exception message will include a warning with a list of the adapter views. You may use this information to invoke onData() to load the target view. onData() used in AdapterView like recyclieview , not AdapterView use ondata() will have error No views in hierarchy found matching: is assignable from class: class android.widget.AdapterView Espresso warns users about presence of AdapterView widgets. When an onView() operation throws a exception 12345678910111213141516171819202122232425262728293031@Rule@JvmFieldval rule &#x3D; ActivityTestRule(TestActivity::class.java)@Testfun useAppContext() &#123; val appContext &#x3D; InstrumentationRegistry.getInstrumentation().targetContext assertEquals(&quot;com.john.kot&quot;, appContext.packageName)&#125;@Testfun user_can_enter_first_name()&#123; onView(withId(R.id.firstName)).perform(typeText(&quot;Daniel&quot;))&#125;@Testfun user_can_enter_last_name()&#123; onView(withId(R.id.lastName)).perform(typeText(&quot;Malone&quot;))&#125;@Testfun when_user_enters_first_and_last_name_check_to_confirm_that_message_is_correct()&#123; onView(withId(R.id.firstName)).perform(typeText(&quot;Jake&quot;)) onView(withId(R.id.lastName)).perform(typeText(&quot;Smith&quot;)) onView(withId(R.id.button)).perform(click()) onView(withId(R.id.message)).check(matches(withText(&quot;Welcome,Jake Smith&quot;)))&#125; 12345678910111213141516171819202122232425262728&lt;android.support.constraint.ConstraintLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot; xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot; xmlns:tools&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;tools&quot; android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;match_parent&quot; tools:context&#x3D;&quot;.test.InstrumentActivity&quot;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_name&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; &#x2F;&gt; &lt;EditText android:id&#x3D;&quot;@+id&#x2F;et_name&quot; android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_10&quot; android:hint&#x3D;&quot;è¾“å…¥å§“å&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_name&quot; &#x2F;&gt; &lt;Button android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_10&quot; android:onClick&#x3D;&quot;sayClick&quot; android:text&#x3D;&quot;Say HELLO&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;et_name&quot; &#x2F;&gt;&lt;&#x2F;android.support.constraint.ConstraintLayout&gt; 12345public void sayClick(View v) &#123; TextView textView &#x3D; findViewById(R.id.tv_name); EditText editText &#x3D; findViewById(R.id.et_name); textView.setText(&quot;Say HELLO!&quot; + editText.getText().toString() + &quot;!&quot;);&#125; 1234567891011121314151617@RunWith(AndroidJUnit4.class)@LargeTestpublic class InstrumentActivityTest &#123; private static final String STRING_TO_BE_TYPED = &quot;Jon&quot;; @Rule public ActivityTestRule&lt;InstrumentActivity&gt; instrumentActivityTestRule = new ActivityTestRule&lt;&gt;(InstrumentActivity.class); @Test public void sayHelloTest() &#123; Espresso.onView(ViewMatchers.withId(R.id.et_name)).perform(ViewActions.typeText(STRING_TO_BE_TYPED), closeSoftKeyboard()); Espresso.onView(ViewMatchers.withText(&quot;Say HELLO&quot;)).perform(click()); String expectedText = &quot;Say HELLO!&quot; + STRING_TO_BE_TYPED + &quot;!&quot;; Espresso.onView(ViewMatchers.withId(R.id.tv_name)).check(ViewAssertions.matches(ViewMatchers.withText(expectedText))); &#125;&#125; https://testing.googleblog.com/2008/12/static-methods-are-death-to-testability.html https://www.jianshu.com/p/dc30338a3e84 https://www.jianshu.com/p/03118c11c199https://github.com/googlesamples/android-testing https://developer.android.com/training/testing Fragment Testhttps://developer.android.google.cn/training/basics/fragments/testing é—®é¢˜ class not found https://blog.csdn.net/xiaoluoli88/article/details/78657364","categories":[{"name":"TEST","slug":"TEST","permalink":"https://noteforme.github.io/categories/TEST/"}],"tags":[{"name":"Test","slug":"Test","permalink":"https://noteforme.github.io/tags/Test/"}]},{"title":"TEST-MOCKK","slug":"TEST-MOCKK","date":"2018-01-22T10:04:40.000Z","updated":"2022-06-12T03:17:58.725Z","comments":true,"path":"2018/01/22/TEST-MOCKK/","link":"","permalink":"https://noteforme.github.io/2018/01/22/TEST-MOCKK/","excerpt":"","text":"https://mockk.io/ presenter https://www.jianshu.com/p/899e80120071 https://blog.csdn.net/hard_working1/article/details/105613362 https://juejin.cn/post/6877824384694747143 LIST COMPARE12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849 @Test fun `compare to list`() &#123; val actual = listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) val expected = listOf(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;) //All passed / true //1. Test equal. //All passed / true //1. Test equal. Assert.assertThat(actual, CoreMatchers.`is`(expected)) //2. If List has this value? //2. If List has this value? Assert.assertThat(actual, CoreMatchers.hasItems(&quot;b&quot;)) //3. Check List Size //3. Check List Size Assert.assertThat(actual, Matchers.hasSize(3)) Assert.assertThat(actual.size, CoreMatchers.`is`(3)) //4. List order // Ensure Correct order //4. List order // Ensure Correct order Assert.assertThat(actual, Matchers.contains(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)) // Can be any order // Can be any order Assert.assertThat(actual, IsIterableContainingInAnyOrder.containsInAnyOrder(&quot;c&quot;, &quot;b&quot;, &quot;a&quot;)) //5. check empty list //5. check empty list Assert.assertThat(actual, CoreMatchers.not(IsEmptyCollection.empty()))// assertThat(ArrayList(), IsEmptyCollection.empty()) &#125; https://stackoverflow.com/questions/46788032/compare-2-liststring-if-they-contain-same-elements-in-any-order-junit-assethttps://mkyong.com/unittest/junit-how-to-test-a-list/ http://hamcrest.org/JavaHamcrest/distributables mockä¸Žspyçš„åŒºåˆ«1234567891011 @Testpublic void mockDifSpy() throws Exception &#123; User userMock &#x3D; mock(User.class); userMock.setNumber(2); int num &#x3D; userMock.getNumber(); System.out.println(&quot;mockè¿”å›ž &quot;+num); User userSpy &#x3D; spy(User.class); userSpy.setNumber(5); System.out.println(&quot;spyè¿”å›ž &quot;+userSpy.getNumber());&#125; mockè¿”å›ž 0 spyè¿”å›ž 5 mock : å¦‚æžœä¸æŒ‡å®šmockæ–¹æ³•çš„ç‰¹å®šè¡Œä¸ºï¼Œä¸€ä¸ªmockå¯¹è±¡çš„æ‰€æœ‰éžvoidæ–¹æ³•éƒ½å°†è¿”å›žé»˜è®¤å€¼ï¼šintã€longç±»åž‹æ–¹æ³•å°†è¿”å›ž0ï¼Œbooleanæ–¹æ³•å°†è¿”å›žfalseï¼Œå¯¹è±¡æ–¹æ³•å°†è¿”å›žnullç­‰ç­‰ï¼›è€Œvoidæ–¹æ³•å°†ä»€ä¹ˆéƒ½ä¸åšã€‚ spy : spyå¯¹è±¡çš„æ–¹æ³•é»˜è®¤è°ƒç”¨çœŸå®žçš„é€»è¾‘ï¼Œmockå¯¹è±¡çš„æ–¹æ³•é»˜è®¤ä»€ä¹ˆéƒ½ä¸åšï¼Œæˆ–ç›´æŽ¥è¿”å›žé»˜è®¤å€¼ã€‚ https://www.jianshu.com/p/0a8bbfe6cba2 å®žä¾‹è®²è§£ http://blog.csdn.net/qq_17766199/article/details/78450007 https://github.com/ChrisZou/android-unit-testing-tutorialhttps://github.com/qingmei2/Sample_AndroidTest ä¸€ä¸ªAndroidé¡¹ç›®æžå®šæ‰€æœ‰ä¸»æµæž¶ mvpç”Ÿæˆæ¨¡æ¿https://www.diycode.cc/topics/309https://github.com/boredream/DesignResCollection Robolectrichttp://robolectric.org/getting-started/ Robolectric 123456789testImplementation &quot;org.robolectric:robolectric:3.8&quot;android &#123; testOptions &#123; unitTests &#123; includeAndroidResources &#x3D; true &#125; &#125;&#125; MockkConstructor mocksverifyå¤±è´¥ 123456789101112131415161718192021 @Test fun `mock different constuctor`()&#123; mockkConstructor(MockCls::class) every &#123; constructedWith&lt;MockCls&gt;().add(1) &#125; returns 2 every &#123; constructedWith&lt;MockCls&gt;(OfTypeMatcher&lt;String&gt;(String::class)).add(2) // Mocks the constructor which takes a String &#125; returns 3 every &#123; constructedWith&lt;MockCls&gt;(EqMatcher(4)).add(any()) // Mocks the constructor which takes an Int &#125; returns 4 assertEquals(1, MockCls().add(1)) assertEquals(3, MockCls(&quot;2&quot;).add(2)) assertEquals(4, MockCls(4).add(7)) verify &#123; constructedWith&lt;MockCls&gt;().add(1) //è¿™é‡Œä¸é€šè¿‡ // constructedWith&lt;MockCls&gt;(&quot;2&quot;).add(2) constructedWith&lt;MockCls&gt;(EqMatcher(4)).add(7) &#125; ä¸ºæ— è¿”å›žå€¼çš„æ–¹æ³•åˆ†é…é»˜è®¤è¡Œä¸ºæŠŠ every {â€¦} åŽé¢çš„ Returns æ¢æˆ just Runs ï¼Œå°±å¯ä»¥è®© MockK ä¸ºè¿™ä¸ªæ²¡æœ‰è¿”å›žå€¼çš„æ–¹æ³•åˆ†é…ä¸€ä¸ªé»˜è®¤è¡Œä¸ºã€‚ 1234567@Testfun testGetGoods() &#123; val goods = presenter!!.getGoods(1) every &#123; view.showLoading() &#125; just Runs verify &#123; view.showLoading() &#125; assertEquals(goods.name, &quot;çº¸å·¾&quot;)&#125; ä¸ºæ‰€æœ‰æ¨¡æ‹Ÿå¯¹è±¡çš„æ–¹æ³•åˆ†é…é»˜è®¤è¡Œä¸º1234@Beforefun setUp() &#123; MockKAnnotations.init(this, relaxed = true)&#125; Annotationåªè¦åœ¨ @Before æ–¹æ³•è£¡é¢åŠ ä¸Š MockKAnnotations.init(this) å°±èƒ½åœ¨å¤–é¢ç”¨ Annotation çš„æ–¹å¼ Mock ç‰©ä»¶ã€‚ 12345678910111213141516171819202122class KidAnnotationTest &#123; @MockK lateinit var mother: Mother lateinit var kid: Kid @Before fun setUp() &#123; val mother = mockk&lt;Mother&gt;() // ä¸ä½¿ç”¨Annotationçš„ç‰ˆæœ¬ MockKAnnotations.init(this) kid = Kid(mother) &#125; @Test fun wantMoney() &#123; every &#123; mother.giveMoney() &#125; returns 30 kid.wantMoney() assertEquals(30, kid.money) &#125;&#125; https://proandroiddev.com/understanding-unit-tests-for-android-in-2021-71984f370240 https://medium.com/joe-tsai/mockk-%E4%B8%80%E6%AC%BE%E5%BC%B7%E5%A4%A7%E7%9A%84-kotlin-mocking-library-part-2-4-4be059331110 https://tngdigital.yuque.com/tngd-mobile/key-battle/wldcgt","categories":[{"name":"TEST","slug":"TEST","permalink":"https://noteforme.github.io/categories/TEST/"}],"tags":[{"name":"Test","slug":"Test","permalink":"https://noteforme.github.io/tags/Test/"}]},{"title":"Operators","slug":"Operators","date":"2018-01-07T12:41:41.000Z","updated":"2023-01-02T03:31:39.095Z","comments":true,"path":"2018/01/07/Operators/","link":"","permalink":"https://noteforme.github.io/2018/01/07/Operators/","excerpt":"","text":"JAVAè¿ç®—ç¬¦ èµ‹å€¼è¿ç®—ç¬¦ï¼†= æŒ‰ä½ä¸Žèµ‹å€¼è¿ç®—ç¬¦ Cï¼†= 2ç­‰ä»·äºŽC = Cï¼†2 | = æŒ‰ä½æˆ–èµ‹å€¼æ“ä½œç¬¦ C | = 2ç­‰ä»·äºŽC = C | 2 http://www.runoob.com/java/java-operators.html Javaä½è¿ç®—ç¬¦Javaå®šä¹‰äº†ä½è¿ç®—ç¬¦ï¼Œåº”ç”¨äºŽæ•´æ•°ç±»åž‹(int)ï¼Œé•¿æ•´åž‹(long)ï¼ŒçŸ­æ•´åž‹(short)ï¼Œå­—ç¬¦åž‹(char)ï¼Œå’Œå­—èŠ‚åž‹(byte)ç­‰ç±»åž‹ã€‚ ä½è¿ç®—ç¬¦ä½œç”¨åœ¨æ‰€æœ‰çš„ä½ä¸Šï¼Œå¹¶ä¸”æŒ‰ä½è¿ç®—ã€‚å‡è®¾a = 60ï¼Œb = 13;å®ƒä»¬çš„äºŒè¿›åˆ¶æ ¼å¼è¡¨ç¤ºå°†å¦‚ä¸‹ï¼š 1234567A &#x3D; 0011 1100B &#x3D; 0000 1101-----------------A&amp;B &#x3D; 0000 1100A | B &#x3D; 0011 1101A ^ B &#x3D; 0011 0001~A&#x3D; 1100 0011 ä¸‹è¡¨åˆ—å‡ºäº†ä½è¿ç®—ç¬¦çš„åŸºæœ¬è¿ç®—ï¼Œå‡è®¾æ•´æ•°å˜é‡ A çš„å€¼ä¸º 60 å’Œå˜é‡ B çš„å€¼ä¸º 13ï¼š æ“ä½œç¬¦ æè¿° ä¾‹å­ ï¼† æŒ‰ä½ä¸Ž å¦‚æžœç›¸å¯¹åº”ä½éƒ½æ˜¯1ï¼Œåˆ™ç»“æžœä¸º1ï¼Œå¦åˆ™ä¸º0 ï¼ˆAï¼†Bï¼‰ï¼Œå¾—åˆ°12ï¼Œå³0000 1100 | æŒ‰ä½æˆ– å¦‚æžœç›¸å¯¹åº”ä½éƒ½æ˜¯ 0ï¼Œåˆ™ç»“æžœä¸º 0ï¼Œå¦åˆ™ä¸º 1 ï¼ˆA | Bï¼‰å¾—åˆ°61ï¼Œå³ 0011 1101 ^ æŒ‰ä½å¼‚æˆ– å¦‚æžœç›¸å¯¹åº”ä½å€¼ç›¸åŒï¼Œåˆ™ç»“æžœä¸º0ï¼Œå¦åˆ™ä¸º1 ï¼ˆA ^ Bï¼‰å¾—åˆ°49ï¼Œå³ 0011 0001 ã€œ æŒ‰ä½å–åè¿ç®—ç¬¦ç¿»è½¬æ“ä½œæ•°çš„æ¯ä¸€ä½ï¼Œå³0å˜æˆ1ï¼Œ1å˜æˆ0ã€‚ ï¼ˆã€œAï¼‰å¾—åˆ°-61ï¼Œå³1100 0011 &lt;&lt; æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°æŒ‰ä½å·¦ç§»å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚ A &lt;&lt; 2å¾—åˆ°240ï¼Œå³ 1111 0000 &gt;&gt; æŒ‰ä½å³ç§»è¿ç®—ç¬¦ã€‚å·¦æ“ä½œæ•°æŒ‰ä½å³ç§»å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°ã€‚ A &gt;&gt; 2å¾—åˆ°15å³ 1111 &gt;&gt;&gt; æŒ‰ä½å³ç§»è¡¥é›¶æ“ä½œç¬¦ã€‚å·¦æ“ä½œæ•°çš„å€¼æŒ‰å³æ“ä½œæ•°æŒ‡å®šçš„ä½æ•°å³ç§»ï¼Œç§»åŠ¨å¾—åˆ°çš„ç©ºä½ä»¥é›¶å¡«å……ã€‚ A&gt;&gt;&gt;2å¾—åˆ°15å³0000 1111 1234567891011121314151617181920212223242526272829public class Test &#123; public static void main(String[] args) &#123; int a = 60; /* 60 = 0011 1100 */ int b = 13; /* 13 = 0000 1101 */ int c = 0; c = a &amp; b; /* 12 = 0000 1100 */ System.out.println(&quot;a &amp; b = &quot; + c ); c = a | b; /* 61 = 0011 1101 */ System.out.println(&quot;a | b = &quot; + c ); c = a ^ b; /* 49 = 0011 0001 */ System.out.println(&quot;a ^ b = &quot; + c ); c = ~a; /*-61 = 1100 0011 */ System.out.println(&quot;~a = &quot; + c ); c = a &lt;&lt; 2; /* 240 = 1111 0000 */ System.out.println(&quot;a &lt;&lt; 2 = &quot; + c ); c = a &gt;&gt; 2; /* 15 = 1111 */ System.out.println(&quot;a &gt;&gt; 2 = &quot; + c ); c = a &gt;&gt;&gt; 2; /* 15 = 0000 1111 */ System.out.println(&quot;a &gt;&gt;&gt; 2 = &quot; + c ); &#125;&#125; è¿è¡Œç»“æžœ 1234567a &amp; b = 12a | b = 61a ^ b = 49~a = -61a &lt;&lt; 2 = 240a &gt;&gt; 2 = 15a &gt;&gt;&gt; 2 = 15 Kotlin ä½è¿ç®—å¯¹äºŽä½è¿ç®—ï¼Œæ²¡æœ‰ç‰¹æ®Šå­—ç¬¦æ¥è¡¨ç¤ºï¼Œè€Œåªå¯ç”¨ä¸­ç¼€æ–¹å¼è°ƒç”¨å…·åå‡½æ•°ï¼Œä¾‹å¦‚: 1val x &#x3D; (1 shl 2) and 0x000FF000 è¿™æ˜¯å®Œæ•´çš„ä½è¿ç®—åˆ—è¡¨ï¼ˆåªç”¨äºŽ Int ä¸Ž Longï¼‰ï¼š shl(bits) â€“ æœ‰ç¬¦å·å·¦ç§» shr(bits) â€“ æœ‰ç¬¦å·å³ç§» ushr(bits) â€“ æ— ç¬¦å·å³ç§» and(bits) â€“ ä½ä¸Ž or(bits) â€“ ä½æˆ– xor(bits) â€“ ä½å¼‚æˆ– inv() â€“ ä½éž https://www.kotlincn.net/docs/reference/basic-types.html#%E8%BF%90%E7%AE%97 https://juejin.cn/post/6844903841293402126 æ“ä½œç¬¦ä¼˜å…ˆçº§https://www.cs.bilkent.edu.tr/~guvenir/courses/CS101/op_precedence.html https://www.jianshu.com/p/9d2204712097","categories":[],"tags":[{"name":"Operators","slug":"Operators","permalink":"https://noteforme.github.io/tags/Operators/"}]},{"title":"Navigation_Drawer","slug":"NavigationDrawer","date":"2017-12-27T07:05:34.000Z","updated":"2021-08-19T11:11:44.128Z","comments":true,"path":"2017/12/27/NavigationDrawer/","link":"","permalink":"https://noteforme.github.io/2017/12/27/NavigationDrawer/","excerpt":"","text":"Drawerä½¿ç”¨ ä¸šåŠ¡ 123456789101112131415161718192021222324252627282930313233343536373839private void initView() &#123; mPlanetTitles = getResources().getStringArray(R.array.recycle_array); mDrawerLayout = findViewById(R.id.drawer_layout); mDrawerList = findViewById(R.id.left_drawer); // Set the adapter for the list view mDrawerList.setAdapter(new ArrayAdapter&lt;String&gt;(this, R.layout.drawer_list_item, mPlanetTitles)); mDrawerList.setOnItemClickListener(new DrawerItemClickListener()); &#125; private class DrawerItemClickListener implements ListView.OnItemClickListener &#123; @Override public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int position, long l) &#123; selectItem(position); &#125; &#125; /** * Swaps fragments in the main content view */ private void selectItem(int position) &#123; // Create a new fragment and specify the planet to show based on position Fragment fragment = new PullToRefreshFragment(); // Insert the fragment by replacing any existing fragment FragmentManager fragmentManager = getFragmentManager(); fragmentManager.beginTransaction().replace(R.id.content_frame, fragment) .commit(); setTitle(mPlanetTitles[position]); mDrawerLayout.closeDrawer(mDrawerList); &#125; @Override public void setTitle(CharSequence title) &#123; super.setTitle(title);// getActionBar().setTitle(title); &#125; xml 123456789101112131415161718192021222324252627&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.v4.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/drawer_layout&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;com.jonzhou.mineutils.RecycleView.RecycleViewActivity&quot;&gt; &lt;FrameLayout android:id=&quot;@+id/content_frame&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; /&gt; &lt;ListView android:id=&quot;@+id/left_drawer&quot; android:layout_width=&quot;240dp&quot; android:layout_height=&quot;match_parent&quot; android:layout_gravity=&quot;start&quot; android:background=&quot;#111&quot; android:choiceMode=&quot;singleChoice&quot; android:divider=&quot;@android:color/transparent&quot; android:dividerHeight=&quot;0dp&quot; /&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; åŽŸç”Ÿç”¨æ³• ä¸€èˆ¬æƒ…å†µæŠ½å±‰å†…å®¹éƒ½ä¸ä¼šå¾ˆå¤šæ‰€ä»¥å°±å¯ä»¥ç”¨ NavigationViewæ›¿æ¢ListView 1234567891011121314151617181920212223242526 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.v4.widget.DrawerLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/drawer_layout&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:fitsSystemWindows=&quot;true&quot; tools:openDrawer=&quot;start&quot;&gt; &lt;include layout=&quot;@layout/app_bar_navigation&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; /&gt; &lt;android.support.design.widget.NavigationView android:id=&quot;@+id/nav_view&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;match_parent&quot; android:layout_gravity=&quot;start&quot; android:fitsSystemWindows=&quot;true&quot; app:headerLayout=&quot;@layout/nav_header_navigation&quot; app:menu=&quot;@menu/activity_navigation_drawer&quot; /&gt;&lt;/android.support.v4.widget.DrawerLayout&gt; æŸ¥çœ‹NavigationView,å¯ä»¥çœ‹åˆ° headerLayoutï¼Œmenuåˆ†åˆ«æ—¶æŠ½å±‰çš„ä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œactivity_navigation_draweræœ€å¥½åˆ«ç”¨è¿™ä¸ªåç§°ï¼Œå¦åˆ™å¯èƒ½åŠ è½½ç³»ç»Ÿé»˜è®¤å¸ƒå±€æ€Žä¹ˆæ”¹éƒ½æ²¡ç”¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576 @Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_navigation); Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar); setSupportActionBar(toolbar); FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab); fab.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View view) &#123; Snackbar.make(view, &quot;Replace with your own action&quot;, Snackbar.LENGTH_LONG) .setAction(&quot;Action&quot;, null).show(); &#125; &#125;); DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout); ActionBarDrawerToggle toggle = new ActionBarDrawerToggle( this, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close); drawer.addDrawerListener(toggle); toggle.syncState(); NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view); navigationView.setNavigationItemSelectedListener(this);&#125;@Overridepublic void onBackPressed() &#123; DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout); if (drawer.isDrawerOpen(GravityCompat.START)) &#123; drawer.closeDrawer(GravityCompat.START); &#125; else &#123; super.onBackPressed(); &#125;&#125;@Overridepublic boolean onCreateOptionsMenu(Menu menu) &#123; // Inflate the menu; this adds items to the action bar if it is present. getMenuInflater().inflate(R.menu.navigation, menu); return true;&#125;@Overridepublic boolean onOptionsItemSelected(MenuItem item) &#123; // Handle action bar item clicks here. The action bar will // automatically handle clicks on the Home/Up button, so long // as you specify a parent activity in AndroidManifest.xml. int id = item.getItemId(); //noinspection SimplifiableIfStatement if (id == R.id.action_settings) &#123; return true; &#125; return super.onOptionsItemSelected(item);&#125;@SuppressWarnings(&quot;StatementWithEmptyBody&quot;)@Overridepublic boolean onNavigationItemSelected(MenuItem item) &#123; // Handle navigation view item clicks here. int id = item.getItemId(); if (id == R.id.nav_camera) &#123; // Handle the camera action &#125; else if (id == R.id.nav_gallery) &#123; &#125; else if (id == R.id.nav_slideshow) &#123; &#125; DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout); drawer.closeDrawer(GravityCompat.START); return true;&#125; åŠ¨æ€ä¿®æ”¹ headLayoutçš„å†…å®¹ View headerLayout = navView.getHeaderView(0); TextView tevtView = headerLayout.findViewById(R.id.textView); tevtView.setText(&quot;nishiminglema &quot;); æ³¨æ„ NavigationViewä¹Ÿå¯ä»¥æ·»åŠ å¤´éƒ¨å‚è€ƒï¼š https://segmentfault.com/a/1190000004151222 https://developer.android.com/reference/android/support/design/widget/NavigationView.html https://developer.android.com/reference/android/support/v4/widget/DrawerLayout.html https://developer.android.com/training/implementing-navigation/nav-drawer.html?hl=zh-cn","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"Drawer","slug":"Drawer","permalink":"https://noteforme.github.io/tags/Drawer/"}]},{"title":"TAB_VIEWPAGER","slug":"TAB_VIEWPAGER","date":"2017-12-26T07:32:39.000Z","updated":"2021-08-19T11:11:44.238Z","comments":true,"path":"2017/12/26/TAB_VIEWPAGER/","link":"","permalink":"https://noteforme.github.io/2017/12/26/TAB_VIEWPAGER/","excerpt":"","text":"https://developer.android.com/reference/com/google/android/material/tabs/TabLayout ViewPagerTabLayoutæ–¹å¼ åŠ¨æ€ 1234TabLayout tabLayout = ...; tabLayout.addTab(tabLayout.newTab().setText(&quot;Tab 1&quot;)); tabLayout.addTab(tabLayout.newTab().setText(&quot;Tab 2&quot;)); tabLayout.addTab(tabLayout.newTab().setText(&quot;Tab 3&quot;)); é™æ€ 123456789101112&lt;com.google.android.material.tabs.TabLayout android:layout_height=&quot;wrap_content&quot; android:layout_width=&quot;match_parent&quot;&gt; &lt;com.google.android.material.tabs.TabItem android:text=&quot;@string/tab_text&quot;/&gt; &lt;com.google.android.material.tabs.TabItem android:icon=&quot;@drawable/ic_android&quot;/&gt; &lt;/com.google.android.material.tabs.TabLayout&gt; æ»‘åŠ¨TAB12345678910&lt;androidx.viewpager.widget.ViewPager android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;com.google.android.material.tabs.TabLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_gravity=&quot;top&quot; /&gt; &lt;/androidx.viewpager.widget.ViewPager&gt; è®¾ç½®Tab 12345678910111213TabLayout tabVp = rootView.findViewById(R.id.tab_vp);viewPager = rootView.findViewById(R.id.view_pager); framgents = new LinkedHashMap&lt;&gt;();framgents.put(&quot;é¡¹ç›®è¯¦æƒ…&quot;, introFragment);framgents.put(&quot;ç›¸å…³å›¾ç‰‡&quot;, imageFragment);framgents.put(&quot;æŠ•èµ„è®°å½•&quot;, rankFragment);titles = new LinkedList&lt;&gt;();titles.addAll(framgents.keySet());viewPager.setAdapter(new MyPagerAdapter(getFragmentManager()));tabVp.setupWithViewPager(viewPager); é»˜è®¤è®¾ç½® 12mTabLayout.getTabAt(roomType).select();viewpager.setCurrentItem(1); https://segmentfault.com/a/1190000008753052 è‡ªå®šä¹‰TabItem tab_item.xml 12345678910111213141516171819202122232425&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;TextView android:id=&quot;@+id/tv_item_title&quot; android:layout_width=&quot;40dp&quot; android:layout_height=&quot;40dp&quot; android:layout_gravity=&quot;center_horizontal&quot; android:background=&quot;@drawable/bg_tab_item_select&quot; android:gravity=&quot;center&quot; android:textColor=&quot;@drawable/bg_tab_item_select_txt&quot; android:textSize=&quot;@dimen/text_size_14&quot; /&gt; &lt;View android:id=&quot;@+id/view_line&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;1dp&quot; android:layout_gravity=&quot;center_vertical&quot; android:layout_marginLeft=&quot;@dimen/dimen_10&quot; android:layout_weight=&quot;1&quot; android:background=&quot;@android:color/darker_gray&quot; /&gt;&lt;/LinearLayout&gt; 1234567891011121314tabLayout = findViewById(R.id.tb_layout); for (int i = 0; i &lt; tabTitles.length; i++) &#123; tabLayout.addTab(tabLayout.newTab()); &#125; for (int i = 0; i &lt; tabTitles.length; i++) &#123; TabLayout.Tab tab = tabLayout.getTabAt(i); tab.setCustomView(R.layout.tab_item); TextView tvItemTitle = tab.getCustomView().findViewById(R.id.tv_item_title); tvItemTitle.setText(tabTitles[i]); if (i == tabTitles.length - 1) &#123; tab.getCustomView().findViewById(R.id.view_line).setVisibility(View.GONE); &#125; &#125; https://www.jianshu.com/p/ed129686f2cc https://blog.csdn.net/android_zhengyongbo/article/details/74726176 ä¿®æ”¹æŒ‡ç¤ºå™¨é¢œè‰²https://codeday.me/bug/20170629/35704.html è®¾ç½®Tabé€‰æ‹©èƒŒæ™¯https://blog.csdn.net/jdsjlzx/article/details/52171075 é¦–å…ˆè®¾ç½® tabGravity fillæ¨¡å¼ centeræ˜¯å±…ä¸­ é€šè¿‡layer-listè®¾ç½®é—´è· 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:state_selected=&quot;true&quot;&gt; &lt;layer-list&gt; &lt;item&gt; &lt;shape&gt; &lt;solid android:color=&quot;@android:color/transparent&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;item android:left=&quot;@dimen/dimen_10&quot; android:right=&quot;@dimen/dimen_10&quot;&gt; &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;corners android:radius=&quot;3dp&quot; /&gt; &lt;solid android:color=&quot;#ffa2cb79&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;/layer-list&gt; &lt;/item&gt; &lt;item &gt; &lt;layer-list&gt; &lt;item&gt; &lt;shape&gt; &lt;solid android:color=&quot;@android:color/transparent&quot;&gt;&lt;/solid&gt; &lt;/shape&gt; &lt;/item&gt; &lt;item android:left=&quot;@dimen/dimen_10&quot; android:right=&quot;@dimen/dimen_10&quot;&gt; &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;corners android:radius=&quot;3dp&quot; /&gt; &lt;solid android:color=&quot;#ffdddddd&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;/layer-list&gt; &lt;/item&gt;&lt;/selector&gt; ViewPager2migrationhttps://developer.android.com/training/animation/screen-slide-2#kotlin https://developer.android.com/training/animation/vp2-migration https://github.com/android/views-widgets-samples/tree/master/ViewPager2 123456&lt;androidx.viewpager2.widget.ViewPager2 android:id=&quot;@+id/view_pater2&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;0dp&quot; android:layout_marginTop=&quot;27dp&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt; 1view_pater2.adapter = ScreenSlidePagerAdapter(this) 12345678910private inner class ScreenSlidePagerAdapter(fa: Fragment) : FragmentStateAdapter(fa) &#123; override fun getItemCount(): Int = 2 override fun createFragment(position: Int): Fragment&#123; return if (position==1)&#123; BodyDataFragment.newInstance() &#125;else&#123; SleepFragment.newInstance() &#125; &#125;&#125;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"TabLayout","slug":"TabLayout","permalink":"https://noteforme.github.io/tags/TabLayout/"}]},{"title":"Keyboard","slug":"Keyboard","date":"2017-12-21T06:49:56.000Z","updated":"2021-08-19T11:11:44.095Z","comments":true,"path":"2017/12/21/Keyboard/","link":"","permalink":"https://noteforme.github.io/2017/12/21/Keyboard/","excerpt":"","text":"https://developer.android.com/training/keyboard-input/style.html 12345678910111213141516171819 static Timer timer = new Timer(); timer.schedule(new TimerTask() &#123; @Override public void run() &#123; showSoftKeyboard(etInvestMoney); &#125; &#125;, 200);private void showSoftKeyboard(View view) &#123; if (view.requestFocus()) &#123; InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE); imm.showSoftInput(view, InputMethodManager.RESULT_UNCHANGED_SHOWN); &#125; &#125; http://www.jianshu.com/p/215b388a6e7d https://juejin.im/post/5eddf8456fb9a04804041738","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"keyboard","slug":"keyboard","permalink":"https://noteforme.github.io/tags/keyboard/"}]},{"title":"proguard","slug":"proguard","date":"2017-12-18T23:29:23.000Z","updated":"2025-06-01T16:36:48.914Z","comments":true,"path":"2017/12/19/proguard/","link":"","permalink":"https://noteforme.github.io/2017/12/19/proguard/","excerpt":"","text":"Proguard VS R8Note: R8 doesnâ€™t let you disable or enable specific optimizations, or modify the behavior of an optimization. In fact, R8 ignores any ProGuard rules that attempt to modify default optimizations, such as -optimizations and -optimizationpasses. https://developer.android.com/topic/performance/app-optimization/add-keep-rules#kts ProGuard Fileå¼€å¯ProGuardï¼ŒAndroidå·¥ç¨‹è¢«BuildåŽï¼Œä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š\\app\\build\\outputs\\mapping\\release dump.txtapkæ–‡ä»¶ä¸­æ‰€æœ‰ç±»çš„æž„æˆä¸€è§ˆ mapping.txtè®°å½•äº†æ··æ·†åŽçš„åå­—ä¸Žæ··æ·†å‰çš„åå­—çš„å¯¹åº”å…³ç³»ï¼Œæ¯ä¸€æ¬¡æ··æ·†ç»“æžœå’Œæ˜ å°„å…³ç³»éƒ½ä¸ä¸€æ ·ã€‚å½“é‡åˆ°Bugæ˜¯ï¼ŒæŸ¥çœ‹åˆ°çš„å †ä¿¡æ¯ï¼Œè¦å’Œæ··æ·†å‰çš„æºç å…³è”èµ·æ¥ï¼Œæ‰€ä»¥ç®¡ç†è¿™ä¸ªæ–‡ä»¶å¾ˆé‡è¦ã€‚ seeds.txtæœªè¢«æ··æ·†çš„ç±»å’Œæ–¹æ³•ä¸€è§ˆ usage.txtè®°å½•äº†ä»Žapkæ–‡ä»¶ä¸­åˆ æŽ‰çš„ä»£ç ã€‚è¿™ä¸ªæ–‡ä»¶ä¸€å®šè¦è®¤çœŸç¡®è®¤ï¼Œæ˜¯å¦è¿™äº›ä»£ç çœŸçš„æ˜¯å¤šä½™çš„ã€‚ https://developer.android.com/build/shrink-code http://blog.csdn.net/guolin_blog/article/details/50451259 https://mp.weixin.qq.com/s/WmJyiA3fDNriw5qXuoA9MA When you enable app optimization, the isShrinkResources = true setting instructs the optimizer to remove resources that are unused, which helps reduce the size of your app. Resource shrinking works only in conjunction with code shrinking, so if youâ€™re optimizing resources, also set isMinifyEnabled = true 12345678910111213141516android &#123; buildTypes &#123; release &#123; isMinifyEnabled = true isShrinkResources = true proguardFiles( // Default file with default optimization rules. getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), // File with your custom rules. &quot;proguard-rules.pro&quot; ) &#125; &#125;&#125; Rulesproguard-android-optimize.txt preference -&gt; Languages &amp; Frameworks -&gt; Android SDK Recent Android SDK installations no longer include the traditional tools directory by default, replaced with 12val optimizeFile = getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;) println(&quot;Optimize file: $&#123;optimizeFile.absolutePath&#125;&quot;) &#x2F;home&#x2F;j&#x2F;AndroidStudioProjects&#x2F;MyApplication&#x2F;app&#x2F;build&#x2F;intermediates&#x2F;default_proguard_files&#x2F;global&#x2F;proguard-android-optimize.txt-8.3.1 -allowaccessmodification ProGuard can change access modifiers to enable better optimizations It can make private methods public or vice versa if it improves code optimization It can change class visibility to allow better dead code elimination Method Inlining: 1234567891011121314// Original codepublic class MyClass &#123; private void helperMethod() &#123; // some code &#125; public void publicMethod() &#123; helperMethod(); // This call can be inlined &#125;&#125;// With -allowaccessmodification, ProGuard might:// - Inline helperMethod() directly into publicMethod()// - Remove helperMethod() entirely if only used once Class Merging: 12// ProGuard can merge classes more aggressively// by changing their access modifiers to allow merging Dead Code Elimination: 12// ProGuard can make unused public methods private// then eliminate them if they&#x27;re not used anywhere Keep rule syntax1-&lt;KeepOption&gt; [OptionalModifier,...] &lt;ClassSpecification&gt; [&#123; OptionalMemberSpecification &#125;] Keep option Description -keep Preserve the class and the members listed in [&#123; OptionalMemberSpecification &#125;]. -keepclassmembers Allow optimization of the class; if the class is preserved, preserve the members listed in [&#123; OptionalMemberSpecification &#125;]. -keepnames Allow removal of class and members, but donâ€™t obfuscate or modify in other ways. -keepclassmembernames Allow removal of class and members, but donâ€™t obfuscate or modify members in other ways. -keepclasseswithmembers No removal or obfuscation of classes if members match the specified pattern. no rule12345678910class TestClass &#123; val publicField = &quot;public data&quot; private val privateField = &quot;private data&quot; fun publicMethod() = &quot;public method called&quot; private fun privateMethod() = &quot;private method called&quot; fun getPrivateData() = privateField fun callPrivateMethod() = privateMethod()&#125; 1234567891011121314151617class KeepTestActivty : ComponentActivity() &#123; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) // Use TestClass - this makes it reachable, so normally it would be kept// val test = TestClass()// Log.d(&quot;KeepDemo&quot;, &quot;Using TestClass: $&#123;test.publicMethod()&#125;&quot;) // Remove direct usage, use only reflection try &#123; val clazz = Class.forName(&quot;com.example.myapplication.keep.TestClass&quot;) val instance = clazz.getDeclaredConstructor().newInstance() // This will break if TestClass gets obfuscated! &#125; catch (e: Exception) &#123; Log.e(&quot;Test&quot;, &quot;Reflection failed: $&#123;e.message&#125;&quot;) &#125;&#125; mapping.txt 12com.example.myapplication.keep.TestClass -&gt; w1.a:# &#123;&quot;id&quot;:&quot;sourceFile&quot;,&quot;fileName&quot;:&quot;TestClass.kt&quot;&#125; otherwise ProGuardâ€™s logic: MainActivity is kept (Android framework entry point) MainActivity.onCreate() calls TestClass() constructor â†’ Keep TestClass test.publicMethod() is called â†’ Keep publicMethod() Since class is referenced, ProGuard keeps it to avoid breaking the code Keep Entire ClassWe recommend using package-wide keep rules as a way to temporarily disable R8 in parts of your app. You should always come back to fix these optimization issues later; this is generally a stop-gap solution to work around problem areas. For example, if part of your app uses Gson heavily and is causing problems with optimization, the ideal fix is to add more targeted keep rules or move to a codegen solution. But to unblock optimizing the rest of the app, you can place the code defining your Gson types in a dedicated subpackage, and add a rule like this to your proguard-rules.pro file: 1-keep class com.example.myapplication.keep.TestClass &#123; *; &#125; mapping.txt 12com.example.myapplication.keep.TestClass -&gt; com.example.myapplication.keep.TestClass:# &#123;&quot;id&quot;:&quot;sourceFile&quot;,&quot;fileName&quot;:&quot;TestClass.kt&quot;&#125; If some library youâ€™re using has reflection into internal components, you can similarly add a keep rule for the entire library. Youâ€™ll need to inspect the libraryâ€™s code or JAR&#x2F;AAR to find the appropriate package to keep. Again, this isnâ€™t recommended to maintain long term, but can unblock the optimization of the rest of the app: 1-keep class com.somelibrary.** &#123; *; &#125; https://developer.android.com/topic/performance/app-optimization/adopt-optimizations-incrementally#enable-rest Keep Specific Members123-keep class com.example.myapplication.keep.TestClass&#123; public java.lang.String publicMethod();&#125; Decompilation apk got 123456789public final class TestClass &#123; public static final /* synthetic */ int $r8$clinit = 0; public final String publicField = &quot;public data&quot;; public final String privateField = &quot;private data&quot;; public final String publicMethod() &#123; return &quot;public method called&quot;; &#125;&#125; keepclassmembers123-keepclassmembers [,modifier,...] class_specification &#123; member_specification&#125; User.java 12345678910111213141516171819202122public class User &#123; private String name; private int age; private String email; public User(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public int getAge() &#123; return age; &#125; public String getEmail() &#123; return email; &#125; public void setName(String name) &#123; this.name = name; &#125; public void setAge(int age) &#123; this.age = age; &#125; public void setEmail(String email) &#123; this.email = email; &#125; private void updateProfile() &#123; &#125;&#125; Keep Getter Methods1234# Keep all getter and setter methods in any class-keepclassmembers class * &#123; public *** get*();&#125; Classes can be renamed&#x2F;optimized But if a class survives optimization, its getter&#x2F;setter methods are preserved Method names like &#96;getName()&#96;&#96; wonâ€™t be obfuscated Result 12345678910111213141516171819202122public class User &#123; public int age; public String email; public String name; public User(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return this.name; &#125; public int getAge() &#123; return this.age; &#125; public String getEmail() &#123; return this.email; &#125;&#125; Keep Fields Used by Serialization123456789# Keep serializable fields-keepclassmembers class * implements java.io.Serializable &#123; static final long serialVersionUID; private static final java.io.ObjectStreamField[] serialPersistentFields; private void writeObject(java.io.ObjectOutputStream); private void readObject(java.io.ObjectInputStream); java.lang.Object writeReplace(); java.lang.Object readResolve();&#125; Keep Enum Values12345# Keep enum methods that might be called via reflection-keepclassmembers enum * &#123; public static **[] values(); public static ** valueOf(java.lang.String);&#125; Android config123456789buildTypes &#123; release &#123; isMinifyEnabled = true proguardFiles( getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot; ) &#125;&#125; proguard-android-optimize.txt in this file &#x2F;home&#x2F;mc&#x2F;Android&#x2F;Sdk&#x2F;tools&#x2F;proguard&#x2F;proguard-android-optimize.txt æŠŠApkåŽç¼€æ”¹æˆ zip ,è§£åŽ‹åŽæŠŠ classes.dex æ–‡ä»¶æ‹–åˆ° jadxé‡Œé¢ https://blog.csdn.net/xiaohai695943820/article/details/72367896 https://www.itread01.com/content/1548717866.html åç¼–è¯‘å·¥å…·ä»‹ç» https://www.cnblogs.com/zhen-android/p/7830249.html è„±ç³– å³åœ¨ç¼–è¯‘é˜¶æ®µå°†åœ¨è¯­æ³•å±‚é¢ä¸€äº›åº•å±‚å­—èŠ‚ç ä¸æ”¯æŒçš„ç‰¹æ€§è½¬æ¢ä¸ºåŸºç¡€çš„å­—èŠ‚ç ç»“æž„ï¼Œ(æ¯”å¦‚Listä¸Šçš„æ³›åž‹è„±ç³–åŽåœ¨å­—èŠ‚ç å±‚é¢å®žé™…ä¸ºObject)ï¼› Androidå·¥å…·é“¾å¯¹Java8è¯­æ³•ç‰¹æ€§è„±ç³–çš„è¿‡ç¨‹å¯è°“ä¸°å¯Œå¤šå½©ï¼Œå½“ç„¶ä»–ä»¬çš„æœ€ç»ˆç›®çš„æ˜¯ä¸€è‡´çš„ï¼šä½¿æ›´æ–°çš„è¯­æ³•å¯ä»¥åœ¨æ‰€æœ‰çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ https://juejin.cn/post/6844903828756643854","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"proguard","slug":"proguard","permalink":"https://noteforme.github.io/tags/proguard/"}]},{"title":"NewFeatures","slug":"NewFeatures","date":"2017-12-17T14:26:11.000Z","updated":"2023-02-23T14:17:11.781Z","comments":true,"path":"2017/12/17/NewFeatures/","link":"","permalink":"https://noteforme.github.io/2017/12/17/NewFeatures/","excerpt":"","text":"ANDROIDæ–°ç‰¹æ€§ apkå®‰è£… StrictMode APIæ”¿ç­– åœ¨AndroidManifest.xmlæ·»åŠ  12345678&lt;provider android:name&#x3D;&quot;android.support.v4.content.FileProvider&quot; android:authorities&#x3D;&quot;$&#123;applicationId&#125;.fileProvider&quot; &#x2F;&#x2F; com.cqianæ˜¯åŒ…å android:grantUriPermissions&#x3D;&quot;true&quot; android:exported&#x3D;&quot;false&quot;&gt; &lt;meta-data android:name&#x3D;&quot;android.support.FILE_PROVIDER_PATHS&quot; android:resource&#x3D;&quot;@xml&#x2F;provider_install&quot;&#x2F;&gt; &lt;&#x2F;provider&gt; ç¼–å†™provider_install.xmlæ–‡ä»¶ æ–°å»ºxmlæŒ‡å®šå…±äº«ç›®å½• æœ‰ä¸‹é¢å‡ ç§å­˜å‚¨æ–¹å¼, nameä¸å˜ï¼Œpathå°±æ˜¯ä¸‹é¢å¾—apkCacheFile 12345678910&lt;files-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; ç‰©ç†è·¯å¾„ç›¸å½“äºŽContext.getFilesDir() + &#x2F;path&#x2F; &lt;cache-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; ç‰©ç†è·¯å¾„ç›¸å½“äºŽContext.getCacheDir() + &#x2F;path&#x2F; &lt;external-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; ç‰©ç†è·¯å¾„ç›¸å½“äºŽEnvironment.getExternalStorageDirectory() + &#x2F;path&#x2F; &lt;external-files-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; ç‰©ç†è·¯å¾„ç›¸å½“äºŽContext.getExternalFilesDir(String) + &#x2F;path&#x2F; &lt;external-cache-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; ç‰©ç†è·¯å¾„ç›¸å½“äºŽContext.getExternalCacheDir() + &#x2F;path&#x2F; ç”±äºŽæˆ‘çš„å­˜å‚¨ç›®å½•ç”¨è¿™ä¸ªï¼ŒapkCacheFileæ˜¯SDkå¡ä¸Šå¾—ç›®å½•åç§° String downFile = context.getExternalCacheDir() + &quot;apkCacheFile&quot; 123&lt;external-cache-path name&#x3D;&quot;name&quot; path&#x3D;&quot;apkCacheFile&quot; &#x2F;&gt; å®‰è£…APK å°±è¿™ä¸ªå®‰è£…æ–¹æ³• 12345678910111213141516171819private static void installApk(Context context, File apkFile) &#123; Intent intent &#x3D; new Intent(); &#x2F;&#x2F; ç”±äºŽæ²¡æœ‰åœ¨ActivityçŽ¯å¢ƒä¸‹å¯åŠ¨Activity,è®¾ç½®ä¸‹é¢çš„æ ‡ç­¾ intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); intent.setAction(Intent.ACTION_VIEW); String type &#x3D; &quot;application&#x2F;vnd.android.package-archive&quot;; Uri uri; if (Build.VERSION.SDK_INT &gt;&#x3D; 24) &#123; &#x2F;&#x2F; å‚æ•°2 æ¸…å•æ–‡ä»¶ä¸­providerèŠ‚ç‚¹é‡Œé¢çš„authorities ; å‚æ•°3 å…±äº«çš„æ–‡ä»¶,å³apkåŒ…çš„fileç±» uri &#x3D; FileProvider.getUriForFile(context, &quot;getPackageName().fileProvider&quot;, apkFile); &#x2F;&#x2F;å¯¹ç›®æ ‡åº”ç”¨ä¸´æ—¶æŽˆæƒè¯¥Uriæ‰€ä»£è¡¨çš„æ–‡ä»¶ intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION); &#125; else &#123; uri &#x3D; Uri.fromFile(apkFile); &#125; intent.setDataAndType(uri, type); context.startActivity(intent); &#125; https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html http://blog.csdn.net/github_2011/article/details/74297460 å›¾ç‰‡æ‹ç…§Android P veridexå·¥å…·ä½¿ç”¨ win10å®‰è£…ubuntu https://www.linuxidc.com/Linux/2018-03/151256.htm å¯¹test.apkè¿›è¡Œæ‰«æ ./appcompat.sh â€“dex-file=test.apk åœ¨cmdé‡Œæ•²bashï¼Œæ‰¾åˆ°/mntï¼Œä½ ä¼šå‘çŽ°ä¸‹é¢æœ‰c d e f ï¼Œè¿™äº›å°±æ˜¯ä½ winä¸‹çš„ç¡¬ç›˜ï¼Œä½ å¯ä»¥ç›´æŽ¥å¯¹winä¸‹çš„æ–‡ä»¶è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬æ‰§è¡Œä¸€äº›linuxæŒ‡ä»¤æˆ–è€…ç¼–è¯‘Linuxç¨‹åº ç”¨mv /mnt/x/a/b-c.zip /home/user/b.zipè¿™ç±»å‘½ä»¤ ç¤ºä¾‹: http://www.10tiao.com/html/227/201812/2650244825/1.html android 11é€‚é…https://juejin.im/post/6860370635664261128 android12é€‚é…Splashhttps://www.youtube.com/watch?v=8F0lK2i3VJk https://developer.android.com/develop/ui/views/launch/splash-screen#elements","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"AndroidNewFeatures","slug":"AndroidNewFeatures","permalink":"https://noteforme.github.io/tags/AndroidNewFeatures/"}]},{"title":"Dialog","slug":"Dialog ","date":"2017-12-11T02:15:44.000Z","updated":"2021-08-19T11:11:43.802Z","comments":true,"path":"2017/12/11/Dialog /","link":"","permalink":"https://noteforme.github.io/2017/12/11/Dialog%20/","excerpt":"","text":"Dialoghttps://developer.android.com/guide/topics/ui/dialogs.htmlhttps://developer.android.com/reference/android/app/DialogFragment.html ä¸­é—´å¼¹å‡º12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576public class UpdateDialogFragment extends DialogFragment implements View.OnClickListener &#123; public static final String UPDATE_MSG = &quot;UPDATE_MSG&quot;; private UpdateBean updateMsg; public static DialogFragment newInstance(UpdateBean updateBean) &#123; UpdateDialogFragment upDialog = new UpdateDialogFragment(); Bundle bundle = new Bundle(); bundle.putParcelable(UPDATE_MSG, updateBean); upDialog.setArguments(bundle); return upDialog; &#125; @Override public Dialog onCreateDialog(Bundle savedInstanceState) &#123; updateMsg = getArguments().getParcelable(UPDATE_MSG); AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); // Get the layout inflater LayoutInflater inflater = getActivity().getLayoutInflater(); // Inflate and set the layout for the dialog // Pass null as the parent view because its going in the dialog layout View view = inflater.inflate(R.layout.dialog_update, null); TextView tvUpdatetitle = (TextView) view.findViewById(R.id.tv_update_title); TextView tvUpDescribe = (TextView) view.findViewById(R.id.tv_up_describe); tvUpDescribe.setText(updateMsg.getDesc()); TextView tvUpdateYes = (TextView) view.findViewById(R.id.tv_update_yes); TextView tvUpdateNo = (TextView) view.findViewById(R.id.tv_update_no); tvUpdateYes.setOnClickListener(this); tvUpdateNo.setOnClickListener(this); builder.setView(view); // Add action buttons return builder.create(); &#125; @Override public void onClick(View v) &#123; switch (v.getId()) &#123; case R.id.tv_update_yes: mListener.onDialogPositiveClick(this,updateMsg); break; case R.id.tv_update_no: mListener.onDialogNegativeClick(this); break; &#125; &#125; /* The activity that creates an instance of this dialog fragment must * implement this interface in order to receive event callbacks. * Each method passes the DialogFragment in case the host needs to query it. */ public interface NoticeDialogListener &#123; void onDialogPositiveClick(DialogFragment dialog,UpdateBean updateBean); void onDialogNegativeClick(DialogFragment dialog); &#125; // Use this instance of the interface to deliver action events NoticeDialogListener mListener; // Override the Fragment.onAttach() method to instantiate the NoticeDialogListener @Override public void onAttach(Activity activity) &#123; super.onAttach(activity); // Verify that the host activity implements the callback interface try &#123; // Instantiate the NoticeDialogListener so we can send events to the host mListener = (NoticeDialogListener) activity; &#125; catch (ClassCastException e) &#123; // The activity doesn&#x27;t implement the interface, throw exception throw new ClassCastException(activity.toString() + &quot; must implement NoticeDialogListener&quot;); &#125; &#125;&#125; åº•éƒ¨å¼¹å‡ºhttps://github.com/umano/AndroidSlidingUpPanelhttps://material.io/guidelines/components/dialogs.html#dialogs-specs http://www.jianshu.com/p/0a7383e0ad0f guide usehttps://blog.csdn.net/u014626094/article/details/105430981 https://mp.weixin.qq.com/s/VadRKHau_YBsV8miFiggEw","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"LOG","slug":"LOG","date":"2017-12-09T08:41:05.000Z","updated":"2021-08-19T11:11:44.095Z","comments":true,"path":"2017/12/09/LOG/","link":"","permalink":"https://noteforme.github.io/2017/12/09/LOG/","excerpt":"","text":"Timber æ·»åŠ åº“ implementation &#39;com.jakewharton.timber:timber:4.6.0&#39; **æ³¨æ„ **: ä¸€å¼€å§‹æ—¥å¿—æ‰“å°ä¸äº†è¿˜ä»¥ä¸º okhttploggerå†²çªï¼ŒBuildConfigéœ€è¦å¯¼å…¥é¡¹ç›®çš„åŒ…import com.jonzhou.nytime.BuildConfig;ï¼Œè€Œä¸æ˜¯Timberæˆ–å…¶ä»–çš„åŒ… 12345678910111213141516171819202122232425262728293031323334public class MyApplication extends Application &#123; @Override public void onCreate() &#123; super.onCreate(); if (BuildConfig.DEBUG) &#123; Timber.plant(new Timber.DebugTree()); &#125; else &#123; Timber.plant(new CrashReportingTree()); &#125; &#125; /** * A tree which logs important information for crash reporting. */ private static class CrashReportingTree extends Timber.Tree &#123; @Override protected void log(int priority, String tag, @NonNull String message, Throwable t) &#123; if (priority == Log.VERBOSE || priority == Log.DEBUG) &#123; return; &#125; FakeCrashLibrary.log(priority, tag, message); if (t != null) &#123; if (priority == Log.ERROR) &#123; FakeCrashLibrary.logError(t); &#125; else if (priority == Log.WARN) &#123; FakeCrashLibrary.logWarning(t); &#125; &#125; &#125; &#125;&#125; ä½¿ç”¨ jakeçš„ä¾‹å­ LintActivity 123456789101112131415161718192021222324252627282930313233343536373839 // LogNotTimber Log.d(&quot;TAG&quot;, &quot;msg&quot;); Log.d(&quot;TAG&quot;, &quot;msg&quot;, new Exception()); android.util.Log.d(&quot;TAG&quot;, &quot;msg&quot;); android.util.Log.d(&quot;TAG&quot;, &quot;msg&quot;, new Exception()); // StringFormatInTimber Timber.w(String.format(&quot;%s&quot;, getString())); Timber.w(format(&quot;%s&quot;, getString())); // ThrowableNotAtBeginning Timber.d(&quot;%s&quot;, new Exception()); // BinaryOperationInTimber String foo = &quot;foo&quot;; String bar = &quot;bar&quot;; Timber.d(&quot;foo&quot; + &quot;bar&quot;); Timber.d(&quot;foo&quot; + bar); Timber.d(foo + &quot;bar&quot;); Timber.d(foo + bar); // TimberArgCount Timber.d(&quot;%s %s&quot;, &quot;arg0&quot;); Timber.d(&quot;%s&quot;, &quot;arg0&quot;, &quot;arg1&quot;); Timber.tag(&quot;tag&quot;).d(&quot;%s %s&quot;, &quot;arg0&quot;); Timber.tag(&quot;tag&quot;).d(&quot;%s&quot;, &quot;arg0&quot;, &quot;arg1&quot;); // TimberArgTypes Timber.d(&quot;%d&quot;, &quot;arg0&quot;); Timber.tag(&quot;tag&quot;).d(&quot;%d&quot;, &quot;arg0&quot;); // TimberTagLength Timber.tag(&quot;abcdefghijklmnopqrstuvwx&quot;); Timber.tag(&quot;abcdefghijklmnopqrstuvw&quot; + &quot;x&quot;); // TimberExceptionLogging Timber.d(new Exception(), new Exception().getMessage()); Timber.d(new Exception(), &quot;&quot;); Timber.d(new Exception(), null); */&#125;private String getString() &#123; return &quot;foo&quot;;&#125; Xlog1 . çŽ¯å¢ƒé…ç½® å®‰è£… pyelliptic1.5.7 sudo python setup.py install è§£ç æ—¥å¿— python mars/log/crypt/decode_mars_nocrypt_log_file.py MarsSample_20200417.xlog ä½†æ˜¯çŽ°åœ¨ç¢°åˆ°äº†é—®é¢˜ mqåˆå§‹åŒ–æœ‰æ—¥å¿—ï¼ŒæŽ¥æ”¶æ¶ˆæ¯æ²¡æœ‰æ—¥å¿—ï¼Œå¯èƒ½åœ¨ä¸åŒçš„çº¿ç¨‹é‡Œï¼Œéœ€è¦åšå¤„ç†","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Permission","slug":"Permission","date":"2017-12-02T12:11:32.000Z","updated":"2023-08-26T07:51:44.920Z","comments":true,"path":"2017/12/02/Permission/","link":"","permalink":"https://noteforme.github.io/2017/12/02/Permission/","excerpt":"","text":"https://developer.android.com/training/permissions/requesting https://developer.android.com/guide/topics/permissions/overview#normal-dangerous æƒé™ç®¡ç†Normal permissionsDangerous permissions Android11æƒé™ç”³è¯·ç”³è¯·ä½ç½®æƒé™ï¼Œå…ˆç”³è¯·å‰å°ï¼ŒåŽç”³è¯·åŽå°æƒé™ã€‚ https://zhuanlan.zhihu.com/p/275758740 åŸºæœ¬ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839 public static final int PERMISSION_REQUEST_CODE = 1000; void requestPermission() &#123; // Here, thisActivity is the current activity if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123; //åˆ™æ¯æ¬¡æ‰§è¡Œéœ€è¦è¿™ä¸€æƒé™çš„æ“ä½œæ—¶æ‚¨éƒ½å¿…é¡»æ£€æŸ¥è‡ªå·±æ˜¯å¦å…·æœ‰è¯¥æƒé™ if (ActivityCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123; // Should we show an explanation? if (ActivityCompat.shouldShowRequestPermissionRationale(this, Manifest.permission.WRITE_EXTERNAL_STORAGE)) &#123;// å½“æŸæ¡æƒé™ä¹‹å‰å·²ç»è¯·æ±‚è¿‡ï¼Œå¹¶ä¸”ç”¨æˆ·å·²ç»æ‹’ç»äº†è¯¥æƒé™æ—¶ //å¼‚æ­¥å‘ç”¨æˆ·æ˜¾ç¤ºè§£é‡Šï¼Œè¿™é‡Œå…ˆå¼¹å‡ºè§£é‡Šæ¡†ï¼Œå†è¯·æ±‚æƒé™. Log.d(TAG, &quot;ç”¨æˆ·çœ‹åˆ°è§£é‡ŠåŽï¼Œå†æ¬¡å¸¸è¯†è¯·æ±‚æƒé™&quot;); ActivityCompat.requestPermissions(this, new String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, PERMISSION_REQUEST_CODE); &#125; else &#123; //æ— éœ€è§£é‡Šï¼Œé¦–æ¬¡è¯·æ±‚è®¸å¯ ActivityCompat.requestPermissions(this, new String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, PERMISSION_REQUEST_CODE); Log.d(TAG, &quot;requestPermissions&quot;); &#125; &#125; else &#123; //æƒé™å·²ç»æŽˆäºˆ Log.d(TAG, &quot;requestPermissions is ok&quot;); &#125; &#125; &#125; @Override public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) &#123; super.onRequestPermissionsResult(requestCode, permissions, grantResults); switch (requestCode) &#123; case PERMISSION_REQUEST_CODE: &#123; // If request is cancelled, the result arrays are empty. å¦‚æžœå–æ¶ˆè¯·æ±‚ï¼Œåˆ™grantResult ä¸ºç©º if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) &#123; Log.d(TAG, &quot;onRequestPermissionResult:ok&quot;); &#125; else &#123; Log.d(TAG, &quot;onRequestPermissionResult:no&quot;); &#125; return; &#125; &#125; &#125; æ³¨æ„:éœ€è¦åœ¨androidmanifest.xmlå£°æ˜Ž å¦åˆ™ä¸€ç›´è¿”å›žfalse 12&lt;uses-permission android:name&#x3D;&quot;android.permission.ACCESS_COARSE_LOCATION&quot; &#x2F;&gt;&lt;uses-permission android:name&#x3D;&quot;android.permission.ACCESS_FINE_LOCATION&quot; &#x2F;&gt; 1ã€æ£€æŸ¥æƒé™æ˜¯å¦æŽˆäºˆã€‚ 12Activity.javapublic int checkSelfPermission(permission) 2ã€ç”³è¯·æƒé™ã€‚ 12Activity.java public final void requestPermissions( new String[permission1,permission2,...], requestCode) è¿™ä¸ªæ—¶å€™ï¼Œä¼šå¼¹å‡ºç³»ç»ŸæŽˆæƒå¼¹çª—ï¼ˆæŽˆæƒå¼¹çª—æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰çš„ï¼ŒåŽŸå› ç†æ‰€å½“ç„¶ï¼‰ã€‚ 3ã€æƒé™å›žè°ƒã€‚ ç”¨æˆ·åœ¨ç³»ç»Ÿå¼¹çª—é‡Œé¢é€‰æ‹©åŽï¼Œç»“æžœä¼šé€šè¿‡Activityçš„ onRequestPermissionsResultæ–¹æ³•å›žè°ƒAPPã€‚ 123public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) &#123; &#x2F;&#x2F;ç»§ç»­æ‰§è¡Œé€»è¾‘æˆ–è€…æç¤ºæƒé™èŽ·å–å¤±è´¥&#125; 4ã€æƒé™è¯´æ˜Žã€‚ ç”¨æˆ·å¦‚æžœé€‰æ‹©äº†æ‹’ç»ï¼Œä¸‹ä¸€æ¬¡åœ¨éœ€è¦å£°æ˜Žè¯¥æƒé™çš„æ—¶å€™ï¼ŒGoogleå»ºè®®APPå¼€å‘è€…ç»™äºˆç”¨æˆ·æ›´å¤šçš„è¯´æ˜Žï¼Œå› æ­¤æä¾›äº†ä¸‹é¢è¿™ä¸ªAPI,è¿™ä¸ªæ–¹æ³•è¿”å›žå€¼åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šå‘çŽ°æœ‰ç‚¹çº ç»“ï¼ˆå…·ä½“è§£æžè§ä¸‹é¢ä»£ç å—è¯´æ˜Žï¼‰ã€‚ 1234567public boolean shouldShowRequestPermissionRationale(permission)&#123; 1ã€APPæ²¡æœ‰ç”³è¯·è¿™ä¸ªæƒé™çš„è¯ï¼Œè¿”å›žfalse 2ã€ç”¨æˆ·æ‹’ç»æ—¶ï¼Œå‹¾é€‰äº†ä¸å†æç¤ºçš„è¯ï¼Œè¿”å›žfalse 3ã€ç”¨æˆ·æ‹’ç»ï¼Œä½†æ˜¯æ²¡æœ‰å‹¾é€‰ä¸å†æç¤ºçš„è¯ï¼Œè¿”å›žtrue å› æ­¤å¦‚æžœæƒ³åœ¨ç¬¬ä¸€æ¬¡å°±ç»™ç”¨æˆ·æç¤ºï¼Œéœ€è¦è®°å½•æƒé™æ˜¯å¦ç”³è¯·è¿‡ï¼Œæ²¡æœ‰ç”³è¯·è¿‡çš„è¯ï¼Œå¼ºåˆ¶å¼¹çª—æç¤ºï¼Œè€Œä¸èƒ½æ ¹æ®è¿™ä¸ªæ–¹æ³•çš„è¿”å›žå€¼æ¥ã€‚&#125; è¿™ä¸ª çœ‹æƒ…å†µé€‰ç”¨ å‚è€ƒ https://juejin.im/entry/58b2e490ac502e0069d9ae62 https://developer.android.com/guide/topics/security/permissions?hl=zh-cn#normal-dangerous http://www.10tiao.com/html/227/201610/2650237473/1.html PERMISSIONâ€‹ 12345678910111213141516171819&lt;!-- è¿™ä¸ªæƒé™ç”¨äºŽè¿›è¡Œç½‘ç»œå®šä½--&gt; &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_COARSE_LOCATION&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- è¿™ä¸ªæƒé™ç”¨äºŽè®¿é—®GPSå®šä½--&gt; &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_FINE_LOCATION&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- ç”¨äºŽè®¿é—®wifiç½‘ç»œä¿¡æ¯ï¼Œwifiä¿¡æ¯ä¼šç”¨äºŽè¿›è¡Œç½‘ç»œå®šä½--&gt; &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_WIFI_STATE&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- èŽ·å–è¿è¥å•†ä¿¡æ¯ï¼Œç”¨äºŽæ”¯æŒæä¾›è¿è¥å•†ä¿¡æ¯ç›¸å…³çš„æŽ¥å£--&gt; &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- è¿™ä¸ªæƒé™ç”¨äºŽèŽ·å–wifiçš„èŽ·å–æƒé™ï¼Œwifiä¿¡æ¯ä¼šç”¨æ¥è¿›è¡Œç½‘ç»œå®šä½--&gt; &lt;permission android:name&#x3D;&quot;android.permission.CHANGE_WIFI_STATE&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- ç”¨äºŽè¯»å–æ‰‹æœºå½“å‰çš„çŠ¶æ€--&gt; &lt;permission android:name&#x3D;&quot;android.permission.READ_PHONE_STATE&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- å†™å…¥æ‰©å±•å­˜å‚¨ï¼Œå‘æ‰©å±•å¡å†™å…¥æ•°æ®ï¼Œç”¨äºŽå†™å…¥ç¦»çº¿å®šä½æ•°æ®--&gt; &lt;permission android:name&#x3D;&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;&#x2F;permission&gt; &lt;!-- è®¿é—®ç½‘ç»œï¼Œç½‘ç»œå®šä½éœ€è¦ä¸Šç½‘--&gt; &lt;permission android:name&#x3D;&quot;android.permission.INTERNET&quot; &#x2F;&gt; &lt;!-- SDå¡è¯»å–æƒé™ï¼Œç”¨æˆ·å†™å…¥ç¦»çº¿å®šä½æ•°æ®--&gt; &lt;permission android:name&#x3D;&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot;&gt;&lt;&#x2F;permission&gt; One-time permissionsStarting in Android 11 (API level 30), whenever your app requests a permission related to location, microphone, or camera, the user-facing permissions dialog contains an option called Only this time. If the user selects this option in the dialog, your app is granted a temporary one-time permission. Permission groups If the app has already been granted another dangerous permission in the same permission group, the system immediately grants the permission without any interaction with the user. For example, if an app had previously requested and been granted the READ_CONTACTS permission, and it then requests WRITE_CONTACTS, the system immediately grants that permission without showing the permissions dialog to the user. Caution: Future versions of the Android SDK might move a particular permission from one group to another. Therefore, donâ€™t base your appâ€™s logic on the structure of these permission groups. For example, READ_CONTACTS is in the same permission group as WRITE_CONTACTS as of Android 8.1 (API level 27). If your app requests the READ_CONTACTS permission, and then requests the WRITE_CONTACTS permission, donâ€™t assume that the system can automatically grant the WRITE_CONTACTS permission. å¤šæƒé™ç”³è¯·https://github.com/permissions-dispatcher/PermissionsDispatcher https://github.com/googlesamples/android-RuntimePermissions https://www.jianshu.com/p/a51593817825 https://developer.android.com/training/permissions/requesting livedata https://mp.weixin.qq.com/s/Hw_FI0GRpUDWJ1NwjK652w https://mp.weixin.qq.com/s/7RpGzTjXo9rnHRCVEnrYWQ https://mp.weixin.qq.com/s/i8K-6CSxYuLanR4x1WNSGA https://mp.weixin.qq.com/s/gaSmpT5UQLqNa4Ck0r0eOg http://blog.csdn.net/huaiyiheyuan/article/details/52473984https://developer.android.com/training/permissions/requesting.html Android 10æƒé™åœ¨åŽå°è¿è¡Œæ—¶è®¿é—®è®¾å¤‡ä½ç½®ä¿¡æ¯éœ€è¦æƒé™ &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;/&gt; è¯¥æƒé™å…è®¸åº”ç”¨ç¨‹åºåœ¨åŽå°è®¿é—®ä½ç½®ã€‚å¦‚æžœè¯·æ±‚æ­¤æƒé™ï¼Œåˆ™è¿˜å¿…é¡»è¯·æ±‚ACCESS_FINE_LOCATION æˆ– ACCESS_COARSE_LOCATIONæƒé™ã€‚åªè¯·æ±‚æ­¤æƒé™æ— æ•ˆæžœ åœ¨Android 10çš„è®¾å¤‡ä¸Šï¼Œå¦‚æžœä½ çš„åº”ç”¨çš„ targetSdkVersion &lt; 29ï¼Œåˆ™åœ¨è¯·æ±‚ACCESS_FINE_LOCATION æˆ–ACCESS_COARSE_LOCATIONæƒé™æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åŒæ—¶è¯·æ±‚ACCESS_BACKGROUND_LOCATIONã€‚åœ¨è¯·æ±‚å¼¹æ¡†ä¸­ï¼Œé€‰æ‹©â€œå§‹ç»ˆå…è®¸â€è¡¨ç¤ºåŒæ„åŽå°èŽ·å–ä½ç½®ä¿¡æ¯ï¼Œé€‰æ‹©â€œä»…åœ¨åº”ç”¨ä½¿ç”¨è¿‡ç¨‹ä¸­å…è®¸â€æˆ–â€æ‹’ç»â€é€‰é¡¹è¡¨ç¤ºæ‹’ç»æŽˆæƒã€‚ å¦‚æžœä½ çš„åº”ç”¨çš„ targetSdkVersion &gt;= 29ï¼Œåˆ™è¯·æ±‚ACCESS_FINE_LOCATION æˆ– ACCESS_COARSE_LOCATIONæƒé™è¡¨ç¤ºåœ¨å‰å°æ—¶æ‹¥æœ‰è®¿é—®è®¾å¤‡ä½ç½®ä¿¡æ¯çš„æƒé™ã€‚åœ¨è¯·æ±‚å¼¹æ¡†ä¸­ï¼Œé€‰æ‹©â€œå§‹ç»ˆå…è®¸â€è¡¨ç¤ºå‰åŽå°éƒ½å¯ä»¥èŽ·å–ä½ç½®ä¿¡æ¯ï¼Œé€‰æ‹©â€œä»…åœ¨åº”ç”¨ä½¿ç”¨è¿‡ç¨‹ä¸­å…è®¸â€åªè¡¨ç¤ºæ‹¥æœ‰å‰å°çš„æƒé™ã€‚ https://developer.android.com/about/versions/10/privacy/changes https://juejin.im/post/6844904073024503822#heading-5 request permission demohttps://github.com/android/platform-samples/tree/main/samples/privacy/permissions Custom Permissioncan run Demo https://github.com/Ibtisam/Dangerous-Activity https://github.com/Ibtisam/Using-Dangerous-Activity https://github.com/commonsguy/cwac-netsecurity https://medium.com/code-procedure-and-rants/android-permissions-create-custom-permissions-5784188311f3 https://www.youtube.com/watch?v=YeLmufMZfcI https://stackoverflow.com/questions/28975706/start-activity-with-permissions https://stackoverflow.com/questions/26700767/custom-permission-for-activity SensorsAn acceleration sensor measures the acceleration applied to the device, including the force of gravity. The following code shows you how to get an instance of the default acceleration sensor: 12val sensorManager &#x3D; getSystemService(Context.SENSOR_SERVICE) as SensorManagerval sensor: Sensor? &#x3D; sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER) https://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-accel If you are publishing your application on Google Play you can use the element in your manifest file to filter your application from devices that do not have the appropriate sensor configuration for your application. The element has several hardware descriptors that let you filter applications based on the presence of specific sensors. The sensors you can list include: accelerometer, barometer, compass (geomagnetic field), gyroscope, light, and proximity. The following is an example manifest entry that filters apps that do not have an accelerometer: 12&lt;uses-feature android:name&#x3D;&quot;android.hardware.sensor.accelerometer&quot; android:required&#x3D;&quot;true&quot; &#x2F;&gt;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"English-Pronounce","slug":"English-Pronounce","date":"2017-11-23T11:28:27.000Z","updated":"2024-11-17T13:44:54.301Z","comments":true,"path":"2017/11/23/English-Pronounce/","link":"","permalink":"https://noteforme.github.io/2017/11/23/English-Pronounce/","excerpt":"","text":"BOOK 1ä¸ªç»ƒä¹ 1ä¸ªæœˆ è®©ä½ èŒåœºè‹±æ–‡æµåˆ©è‡ªä¿¡ï¼ - YouTube James Clear: Atomic Habits Atomic Habits by James Clear (Audiobook) - YouTube The Almanac of Naval Ravikant https://archive.org/details/the-almanack-of-naval-ravikant/page/n11/mode/2up PronunciatiionAmerican English Vowels | IPA (International Phonetic Alphabet) vowel chart FREE DOWNLOAD - YouTube [ÊŒ]stuff [stÊŒf] [É‘]job &#x2F;dÊ’É‘Ëb&#x2F; åœ¨é‡éŸ³ä¸Šï¼Œ[É‘] å˜æˆ [É‘:] [Ã¦]pure [Ã¦]sat [sÃ¦t] Followed by M[m] or N[n][Ã¦] + [m] or [n] åŠ ä¸ŠåŽé¢ä¸¤ä¸ªéŸ³å°±ä¸åŒäº† aa - uh [Ã¦] + n &#x3D; aa-uh-n [Ã¦] + n &#x3D; aa-uh-m man [mÃ¦n] maa-uh-n hand [hÃ¦nd] [Ã¦] + [Å‹] seems [eÉª]ay[eÉª] gang &#x2F;É¡Ã¦Å‹&#x2F;, thanks &#x2F;Î¸Ã¦Å‹ks&#x2F; [É›]stressred [rÉ›d] never [nÉ›v.É™r] embrace &#x2F;Ëˆen.tÉ™r&#x2F;. &#x2F;ËˆÉ›n.tÉ™r&#x2F; å’Œ[É‘] ä¸€æ · å¼ºè°ƒåŽ é‡éŸ³æ‹‰é•¿ã€‚ unstressedempoy,ä½†æ˜¯å­—å…¸ä¸ä¸€æ ·.å­—å…¸æ˜¯i [u]issue &#x2F;ËˆÉªÊƒ.uË&#x2F; [É™]å’Œ [ÊŒ] å·®ä¸å¤šï¼Œä¸è¿‡åªä¼šå‡ºçŽ°åœ¨ éžé‡éŸ³å­—èŠ‚é‡Œã€‚ fllowed by L , M , N ,R,è¢«å¸æ”¶æœ‰ä¸€ç‚¹æ²¡ç†è§£ã€‚ allow extra data again visa about Bookæ„Ÿè°¢æ¥¼ä¸»æ¥¼ä¸» Dicthttps://forum.freemdict.com/ https://mdx.mdict.org/ https://mdx.mdict.org/%E6%8C%89%E8%AF%8D%E5%85%B8%E8%AF%AD%E7%A7%8D%E6%9D%A5%E5%88%86%E7%B1%BB/ https://freemdict.com/ https://mdict.org/ åˆ’è¯ç¿»è¯‘https://www.bilibili.com/video/av16816801/ https://www.youtube.com/watch?v=SIojtnMplHc https://www.bilibili.com/video/av455529337 English grammar in usehttps://dl.304304.xyz/uploads/Ludovicus/%E8%8B%B1%E8%AF%AD-%E6%90%AC%E8%BF%90/ å®‰è£…å®Œair,ç„¶åŽä»Žå®‰è£…æ–‡ä»¶é€‰æ‹©èµ„æºgrammar in useå³é”®é€‰æ‹© windows 7å®‰è£… ç‚¹å‡»brower é€‰æ‹©å®‰è£…çš„æ–‡ä»¶ IELTShttps://improvemyielts.com/ielts-speaking-topics-part-2-3 å®šè¯­ä»Žå¥ä¸€ä¸ªå¥å­ä½œå®šè¯­ä¿®é¥°é™å®šåè¯ This is the job which I have dreamed of for years. The job &#x3D; which Which ä½œä¸º å®¾è¯­æˆåˆ†. ç‰© which&#x2F;that äºº Who&#x2F;whom&#x2F;that äººçš„&#x2F;ç‰©çš„ Whose æ—¶é—´ When åœ°ç‚¹ Where åŽŸå›  Why å®šè¯­ä»Žå¥ä¸­æ¯ä¸ªå…³ç³»è¯éƒ½åšæˆåˆ† åŒ…æ‹¬ that å…³ç³»è¯ä½œå®¾è¯­å¯çœç•¥ I have a class which&#x2F;that begins at 8:00. ä¸»è¯­ The lawyer whom&#x2F;that&#x2F;who my brother called didnâ€™t answer the phone. My daughter asked me a question which&#x2F;that I couldnâ€™t answer. The people who&#x2F;that sat in the stadium cheered for the home team. Leo is the student whose bike was stolen Australia is one of the few country where people drive on the left. Sunday is the day when people usually donâ€™t go to work. Is there any particular reason why you canâ€™t come. å®šè¯­ä»Žå¥åˆ†ç±» ï¼š é™å®šæ€§ã€éžé™å®šæ€§ é™å®šæ€§ I meet you friend who is staying in Paris. å¾ˆå¤šæœ‹å‹ éžé™å®šæ€§ I met your mother, who is staying in Paris. åªæœ‰ä¸€ä¸ªå¦ˆå¦ˆ,ç”¨â€,â€éš”å¼€ åŒºåˆ«: å…ˆè¡Œè¯çš„èŒƒå›´æ˜¯å¦æ˜Žç¡® ç‰¹æ®Šçš„éžé™å®šæ€§å®šè¯­ä»Žå¥ The company will get back to you in three days, which is one of the typical rules. ä»‹è¯æå‰çš„å®šè¯­ä»Žå¥ Humans have the ability to modify the environment in which they live. The theory on which it is based may be right. å®šè¯­ä»Žå¥å’ŒåŒä½è¯­ä»Žå¥çš„åŒºåˆ« å®šè¯­ä»Žå¥ : n + that , that ä½œæˆåˆ† åŒä½è¯­ä»Žå¥ : that ä¸ä½œæˆåˆ† During the past generation, the American middle class family that one could count on hard work and fair play to keep itself financially secure has been transformed by economic risk and new realites. çŠ¶è¯­ä»Žå¥ä¸€ä¸ªå¥å­ä½œçŠ¶è¯­è¡¨è¾¾ç§’å±žæ€§çš„ä¿¡æ¯ æ—¶é—´çŠ¶è¯­ä»Žå¥ When , while , As , Before After Since Until , as soon as , No sooner than åœ°ç‚¹çŠ¶è¯­ä»Žå¥ where åŽŸå› çŠ¶è¯­ä»Žå¥ Because Since As ç»“æžœçŠ¶è¯­ä»Žå¥ So&#x2F;suchâ€¦that , In order that ç›®çš„çŠ¶è¯­ä»Žå¥ Soâ€¦that , In order that æ¡ä»¶çŠ¶è¯­ä»Žå¥ If unless , As long as è®©æ­¥çŠ¶è¯­ä»Žå¥ Although Through Even thought As æ˜Žè®©æ­¥ï¼Œæš—è½¬æŠ˜ æ¯”è¾ƒçŠ¶è¯­ä»Žå¥ Than as I am as tall as you (are). æ–¹å¼çŠ¶è¯­ä»Žå¥ As Do it as I told you yesterday. çŠ¶è¯­ä»Žå¥çš„æ—¶æ€ æ—¶é—´çŠ¶è¯­ä»Žå¥ä¸­è¡¨ç¤ºå°†æ¥ï¼Œæ¡ä»¶çŠ¶è¯­ä»Žå¥ä¸­è¡¨ç¤ºå°†æ¥ï¼Œä»–ä»¬éƒ½ç”¨ä¸€èˆ¬çŽ°åœ¨æ˜¯ If it rains tomorrow,we will not got to the park. I will let him know,when he comes home later æ¡ä»¶çŠ¶è¯­ä»Žå¥ï¼š if æ¡ä»¶çŠ¶è¯­ä»Žå¥ï¼Œä¸»å¥ è¡¨è¯­ä»Žå¥My concern is that people donâ€™t care about others.The question remains whether people will buy it. åŒä½è¯­ä»Žå¥ä½ç½®: éœ€è¦è§£é‡Šçš„æŠ½è±¡NåŽ,è§£é‡Šåè¯ Fact idea news dream suggestion advice report I support the argumentu&gt; that the problems of school buses must be taken seriously. The man wanted to fly to Rockcallu&gt;,a lonely island. ä¸»è¯­ä»Žå¥Whether we will go camping depend on the weather. It depends on the weather Whether we will go camping. chathow about tw","categories":[],"tags":[{"name":"ENGLISH","slug":"ENGLISH","permalink":"https://noteforme.github.io/tags/ENGLISH/"}]},{"title":"ubuntu_server","slug":"ubuntu-server","date":"2017-11-20T13:11:58.000Z","updated":"2025-03-22T11:07:55.433Z","comments":true,"path":"2017/11/20/ubuntu-server/","link":"","permalink":"https://noteforme.github.io/2017/11/20/ubuntu-server/","excerpt":"","text":"Linuxä¸‹ä¸Šä¼ http://www.jianshu.com/p/c3e4f96ced97åœ¨htmlç›®å½•ä¸‹æ”¾æ–‡ä»¶å°±å¯ä»¥äº† scp /home/jon/æ¡Œé¢/img.jpg root@45.77.222.97:/var/www/html/ nexus-3.20.0-04: not a regular file scp -r /home/jon/æ¡Œé¢/img.jpg root@45.77.222.97:/var/www/html/ windowsä¸‹ä¸Šä¼  å®‰è£…Xshell ç»™ubuntuå®‰è£…ç®¡ç†å™¨ apt-get install -y lrzsz https://www.linuxidc.com/Linux/2015-05/117975.htã€ rzå‘½ä»¤ä¸Šä¼ ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ¡†é€‰æ‹©æ–‡ä»¶ æŸ¥çœ‹å›¾ç‰‡ http://45.77.222.97/homedetail_pic.png JDK Environment ubuntu when I wget tar.gz from oracle office. I couldnâ€™t tar tar.gz ,so I upload one. scp jdk-11.0.5_linux-x64_bin.tar.gz root@xxx&#x2F;opt&#x2F;java&#x2F; tar -zxvf FileName.tar.gz Edit &#x2F;etc&#x2F;profile, touch it if not have, æˆ–è€…ç›´æŽ¥åœ¨æ ¹ç›®å½•â€˜ cd &#x2F; â€™è¾“å…¥ä¸‹é¢çš„è¿™äº›ï¼Œä¹Ÿå¯ä»¥ï¼Œå…·ä½“å†™å…¥åˆ°å“ªå…ˆä¸ç®¡äº† #set java JDK export JAVA_HOME&#x3D;&#x2F;opt&#x2F;java&#x2F;jdk1.8.0_231 export CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar export PATH&#x3D;$JAVA_HOME&#x2F;bin:$PATH make it work source &#x2F;etc&#x2F;profile set jdk. on Mac 123Open ~/.bash_profile export JAVA_HOME=$(/usr/libexec/java_home)source ~/.bash_profile åœ¨64ä½æœºå™¨ä¸Šè·‘x86çš„jdkä¸€ç›´æç¤º -bash: &#x2F;opt&#x2F;jdk&#x2F;jdk1.8.0_231&#x2F;bin&#x2F;java: No such file or directory free -m SSH Server1~/.ssh/known_hosts Install SSH server: 12sudo apt updatesudo apt install openssh-server Start and enable the SSH service: 12sudo systemctl enable sshsudo systemctl start ssh connect with another teminal 1ssh username@ip_address sshè¿œç¨‹è¿žæŽ¥Ubuntuï¼ˆå±€åŸŸç½‘å’Œéžå±€åŸŸç½‘ï¼‰ å†…ç½‘ç©¿é€ sshè¿œç¨‹è¿žæŽ¥Ubuntuï¼ˆå±€åŸŸç½‘å’Œéžå±€åŸŸç½‘ï¼‰_sshè¿žæŽ¥ubuntu-CSDNåšå®¢ 2.éžå±€åŸŸç½‘ è¿œç¨‹è¿žæŽ¥Attention:sshåªèƒ½ç”¨äºŽå¯ä»¥ç›¸äº’pingé€šçš„ä¸»æœºä¹‹é—´ ä½¿ç”¨Zerotierå¯ä»¥å°†æŽ¥å…¥çš„è®¾å¤‡æ”¾åœ¨ä¸€ä¸ªè™šæ‹Ÿçš„å±€åŸŸç½‘ä¸­ï¼Œè¿™æ ·ä½ åœ¨å¤–ç½‘ï¼Œåªè¦æœºå­é…ç½®äº†Zerotierå’Œå¦ä¸€å°æœºå­åœ¨ä¸€ä¸ªNetworkä¸­ï¼Œå°±å¯ä»¥ç›´æŽ¥è®¿é—®äº†ï¼ŒåºŸè¯ä¸å¤šè¯´çœ‹æ“ä½œã€‚ 1.ç™»å½•zerotier å®˜ç½‘ åˆ›å»ºä¸€ä¸ªnew network ï¼Œå¤åˆ¶NETWORK ID ä¸Šå›¾ä¸­çš„NETWORK IDå°±æ˜¯å‘½ä»¤è¡Œä¸­çš„ä½ çš„network ID2.Ubuntuå®‰è£…zerotier curl -s https://install.zerotier.com | sudo bash13.UbuntuåŠ å…¥zerotierå±€åŸŸç½‘ sudo zerotier-cli join ä½ çš„network ID14.Windowså®‰è£…zerotierå¹¶åŠ å…¥å±€åŸŸç½‘å®¢æˆ·ç«¯ä¸‹è½½åœ°å€ï¼šDownload - ZeroTier å®‰è£…ä¹‹åŽå³é”®join networkï¼Œè¾“å…¥ä½ çš„network ID 5.è¿”å›žzerotier å®˜ç½‘åœ¨Ubuntuå’ŒWindowså‰é¢æ‰“å‹¾ æŽˆæƒ 6.åœ¨Windowså®¢æˆ·ç«¯æ‰“å¼€sshè¿žæŽ¥ï¼Œè¾“å…¥ä¸Šå›¾ä¸­Ubuntuçš„Manager IPsï¼Œå³å¯è¿žæŽ¥æˆåŠŸã€‚ Zerotierå¸¸ç”¨å‘½ä»¤ï¼š å¯åŠ¨Zerotier sudo systemctl start zerotier-one.service é‡å¯Zerotier sudo systemctl restart zerotier-one.service è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ sudo systemctl enable zerotier-one.service æŸ¥çœ‹æœåŠ¡çŠ¶æ€ zerotier-cli status åŠ å…¥ç½‘ç»œ zerotier-cli join 8850xxxxxxxxxxxxxxx ç¦»å¼€ç½‘ç»œ zerotier-cli leave 8850xxxxxxxxxxxxxxx æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ zerotier-cli listnetworksâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” sshè¿œç¨‹è¿žæŽ¥Ubuntuï¼ˆå±€åŸŸç½‘å’Œéžå±€åŸŸç½‘ï¼‰_sshè¿žæŽ¥ubuntu-CSDNåšå®¢ Visit desktop8:00 ç«¯å£è½¬å‘ 13:20 DDNS-Go å¤–ç½‘è®¿é—®å®¶åº­å†…ç½‘çš„ä¸¤å¤§æœ€ä¼˜æ–¹æ¡ˆï¼Œé›¶åŸºç¡€æ•™ç¨‹ è¿œç¨‹æŽ§åˆ¶å®¶åº­ç”µè„‘ - YouTube å¦‚ä½•ä»Žå¤–ç½‘è¿œç¨‹æ¡Œé¢è®¿é—®è‡ªå·±çš„ç”µè„‘ - YouTube UbuntuæŠ€å·§-Ubuntuè¿œç¨‹è®¿é—®ä¹‹ç”µä¿¡å…¬ç½‘IP-CSDNåšå®¢ https://www.youtube.com/watch?v=NZVxl5-efSs å¤–ç½‘è®¿é—®å®¶åº­å†…ç½‘çš„ä¸¤å¤§æœ€ä¼˜æ–¹æ¡ˆï¼Œé›¶åŸºç¡€æ•™ç¨‹ è¿œç¨‹æŽ§åˆ¶å®¶åº­ç”µè„‘ ï¼Œå…¬ç½‘è®¿é—®å®¶åº­å±€åŸŸç½‘ - å“”å“©å“”å“© UbuntuæŠ€å·§-Ubuntuè¿œç¨‹è®¿é—®ä¹‹ç”µä¿¡å…¬ç½‘IP-CSDNåšå®¢ route config ç«¯å£è½¬å‘ è¯•ç”¨xrdp è¿œç¨‹è®¿é—® ä¸€ç›´è®¿é—®ä¸äº†ï¼Œé‡å¯åŽåˆå¯ä»¥äº†ï¼Œä¼°è®¡æ˜¯è¦è®¾ç½®å¯†ç ï¼Œubuntuç”µè„‘ä¸èƒ½å…ˆè¿›å…¥åˆ°æ¡Œé¢. 12345sudo apt updatesudo apt install xrdpsudo systemctl enable xrdpsudo ufw allow from any to any port 3389 proto tcp Linuxç§‘å­¦ä¸Šç½‘å·¥å…·ï¼Œæ”¯æŒClashå’Œv2rayï¼Œlinuxç¿»å¢™clashå®¢æˆ·ç«¯ï¼Œè™šæ‹Ÿæœºç¿»å¢™ &#8211; ç§‘æŠ€åˆ†äº«","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"view_flow","slug":"view_flow","date":"2017-11-12T13:24:33.000Z","updated":"2023-01-02T03:31:39.351Z","comments":true,"path":"2017/11/12/view_flow/","link":"","permalink":"https://noteforme.github.io/2017/11/12/view_flow/","excerpt":"","text":"è‡ªå®šä¹‰Viewå‡½æ•°è°ƒç”¨æµç¨‹ æž„é€ å‡½æ•°æ‰§è¡Œä¸€æ¬¡ onMeasure(), onLayout(), onDraw()éƒ½å¯èƒ½è¿è¡Œå¾ˆå¤šæ¬¡ã€‚ æ‰€ä»¥onMeasure() ç”¨çš„å˜é‡ä¸èƒ½åœ¨æž„é€ æ–¹æ³•åˆå§‹åŒ–ã€‚ http://www.gcssloop.com/category/customview.html çª—å£æ˜¾ç¤º æ¯ä¸ªActivityåŒ…å«ä¸€ä¸ªWindowå¯¹è±¡ï¼ŒAndroidä¸­windowå¯¹è±¡ç”±PhoneWindowå®žçŽ°ï¼ŒPhoneWindowå°†ä¸€ä¸ªDecorViewè®¾ç½®ä¸ºæ•´ä¸ªåº”ç”¨çª—å£çš„æ ¹View,DecorViewä½œä¸ºçª—å£ç•Œé¢çš„é¡¶å±‚è§†å›¾ï¼Œå°è£…äº†çª—å£æ“ä½œçš„é€šç”¨æ–¹æ³•ï¼ŒDecorViewå°†è¦æ˜¾ç¤ºçš„å…·ä½“å†…å®¹æ˜¾ç¤ºåœ¨PhoneWindowä¸Šï¼Œè¿™é‡Œæ‰€æœ‰çš„Viewç›‘å¬äº‹ä»¶é€šè¿‡WindowMangerServiceæ¥æŽ¥æ”¶,é€šè¿‡Activityå¯¹è±¡æ¥å›žè°ƒç›¸åº”çš„onCLicklistener.æ˜¾ç¤ºæ˜¯å°†å±å¹•åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªTitleViewï¼Œå¦ä¸€ä¸ªæ˜¯ContentView. Measureå¦‚æžœæ˜¯åŽŸå§‹çš„ View,é€šè¿‡measureæ–¹æ³•å°±å®Œæˆäº†æµ‹é‡è¿‡ç¨‹,å¦‚æžœæ˜¯ViewGroup,é™¤äº†å®Œæˆè‡ªå·±çš„æµ‹é‡å¤–ï¼Œè¿˜éœ€è¦éåŽ†æ‰€æœ‰çš„å­View,å„ä¸ªå­å…ƒç´ å†åŽ»é€’å½’æ‰§è¡Œè¿™ä¸ªæµç¨‹. View OnMeasure()æ–¹æ³•1234567891011121314151617181920val widthMode &#x3D; MeasureSpec.getMode(widthMeasureSpec);val widthSize &#x3D; MeasureSpec.getSize(widthMeasureSpec); widthSizeçˆ¶æŽ§ä»¶ç•™ä¸ªå­ç©ºé—´çš„æœ€å¤§å®½åº¦val heightMode &#x3D; MeasureSpec.getMode(heightMeasureSpec);val heightSize &#x3D; MeasureSpec.getSize(heightMeasureSpec);var width &#x3D; 10var height &#x3D; 10if (widthMode &#x3D;&#x3D; MeasureSpec.EXACTLY) &#123; &#x2F;&#x2F;å¦‚æžœmatch_parentæˆ–è€…å…·ä½“çš„å€¼ï¼Œç›´æŽ¥èµ‹å€¼ width &#x3D; widthSize&#125; else if (widthMode &#x3D;&#x3D; MeasureSpec.AT_MOST) &#123; &#x2F;&#x2F;wï¼Œæˆ‘ä»¬è¦å¾—åˆ°æŽ§ä»¶éœ€è¦å¤šå¤§çš„å°ºå¯¸ width &#x3D; paddingLeft + mBound.width() + paddingRight&#125;&#x2F;&#x2F;é«˜åº¦è·Ÿå®½åº¦å¤„ç†æ–¹å¼ä¸€æ ·if (heightMode &#x3D;&#x3D; MeasureSpec.EXACTLY) &#123; height &#x3D; heightSize&#125; else if (heightMode &#x3D;&#x3D; MeasureSpec.AT_MOST) &#123; height &#x3D; paddingTop + mBound.height() + paddingBottom&#125;setMeasuredDimension(width, height) ç†è§£onMeasure https://blog.csdn.net/tuke_tuke/article/details/73302595 åŠ è½½å¸ƒå±€ onSizeChangedå› ä¸ºViewçš„å¤§å°ä¸ä»…ç”±Viewæœ¬èº«æŽ§åˆ¶ï¼Œè€Œä¸”å—çˆ¶æŽ§ä»¶çš„å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç¡®å®šViewå¤§å°çš„æ—¶å€™æœ€å¥½ä½¿ç”¨ç³»ç»Ÿæä¾›çš„onSizeChangedå›žè°ƒå‡½æ•°ã€‚å®ƒåˆå››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º å®½åº¦ï¼Œé«˜åº¦ï¼Œä¸Šä¸€æ¬¡å®½åº¦ï¼Œä¸Šä¸€æ¬¡é«˜åº¦ã€‚è¿™ä¸ªå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨ å®½åº¦(w), é«˜åº¦(h) å³å¯ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å°±æ˜¯Viewæœ€ç»ˆçš„å¤§å°ã€‚ é“¾æŽ¥ï¼šhttps://juejin.cn/post/6844903448186454030 Layoutpublic void layout(int l, int t, int r, int b) è¯¥æŽ§ä»¶çš„å·¦ ä¸Š å³ ä¸‹è¾¹è· ScrollerscrollTo scrollByåœ¨ View ç±»ä¸­ï¼Œæœ‰ä¸¤ä¸ªå˜é‡ mScrollX å’Œ mScrollYï¼Œå®ƒä»¬è®°å½•çš„æ˜¯ View çš„å†…å®¹çš„åç§»å€¼ã€‚mScrollX å’Œ mScrollY çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ï¼Œå³é»˜è®¤ä¸åç§»ã€‚å¦å¤–æˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€ç‚¹ï¼Œå‘å·¦æ»‘åŠ¨ï¼ŒmScrollX ä¸ºæ­£æ•°ï¼Œåæ­£ä¸ºè´Ÿæ•°ã€‚å‡è®¾æˆ‘ä»¬ä»¤ mScrollX = 10ï¼Œé‚£ä¹ˆè¯¥ View çš„å†…å®¹ä¼šç›¸å¯¹äºŽåŽŸæ¥å‘å·¦åç§» 10pxã€‚ çœ‹çœ‹ç³»ç»Ÿçš„ View ç±»ä¸­çš„æºç ï¼š 123456789101112131415161718public class View &#123; /** * The offset, in pixels, by which the content of this view is scrolled * horizontally. * &#123;@hide&#125; */ protected int mScrollX; //æ•´ä¸ªæ»‘åŠ¨è¿‡ç¨‹çš„ Xç§»åŠ¨èŒƒå›´ /** * The offset, in pixels, by which the content of this view is scrolled * vertically. * &#123;@hide&#125; */ protected int mScrollY; &#125; æ»‘åŠ¨ç»å¯¹è·ç¦» 1public void scrollTo(int x, int y) æ»‘åŠ¨ç›¸å¯¹è·ç¦» 1public void scrollBy(int x, int y) Scrollerè¾…åŠ©ç±»HorizontalScrollViewEx 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113public class HorizontalScrollViewEx extends ViewGroup &#123; private static final String TAG = &quot;HorizontalScrollViewEx&quot;; private int mChildrenSize; private int mChildWidth; private int mChildIndex; // åˆ†åˆ«è®°å½•ä¸Šæ¬¡æ»‘åŠ¨çš„åæ ‡ private int mLastX = 0; private int mLastY = 0; // åˆ†åˆ«è®°å½•ä¸Šæ¬¡æ»‘åŠ¨çš„åæ ‡(onInterceptTouchEvent) private int mLastXIntercept = 0; private int mLastYIntercept = 0; private Scroller mScroller; private VelocityTracker mVelocityTracker; public HorizontalScrollViewEx(Context context, AttributeSet attrs) &#123; super(context, attrs); init(); &#125; private void init() &#123; mScroller = new Scroller(getContext()); mVelocityTracker = VelocityTracker.obtain(); &#125; @Override public boolean onTouchEvent(MotionEvent event) &#123; mVelocityTracker.addMovement(event); int x = (int) event.getX(); int y = (int) event.getY(); switch (event.getAction()) &#123; case MotionEvent.ACTION_DOWN: &#123; if (!mScroller.isFinished()) &#123; mScroller.abortAnimation(); &#125; break; &#125; case MotionEvent.ACTION_MOVE: &#123; int deltaX = x - mLastX; int deltaY = y - mLastY; scrollBy(-deltaX, 0); break; &#125; case MotionEvent.ACTION_UP: &#123; int scrollX = getScrollX();// int scrollToChildIndex = scrollX / mChildWidth; mVelocityTracker.computeCurrentVelocity(1000); float xVelocity = mVelocityTracker.getXVelocity(); if (Math.abs(xVelocity) &gt;= 50) &#123; mChildIndex = xVelocity &gt; 0 ? mChildIndex - 1 : mChildIndex + 1; &#125; else &#123; mChildIndex = (scrollX + mChildWidth / 2) / mChildWidth; &#125; mChildIndex = Math.max(0, Math.min(mChildIndex, mChildrenSize - 1)); Log.d(TAG, &quot;xVelocity &quot;+xVelocity+ &quot; mChildIndex &quot; +mChildIndex +&quot; mChildWidth &quot; + mChildWidth); int dx = mChildIndex * mChildWidth - scrollX; Log.d(TAG, &quot; scrollX &quot; + scrollX + &quot; dx &quot; + dx); smoothScrollBy(dx, 0); mVelocityTracker.clear(); break; &#125; default: break; &#125; mLastX = x; mLastY = y; return true; &#125; @Override protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; Log.d(TAG, &quot;left &quot; + l + &quot; top &quot; + t + &quot; right &quot; + r + &quot; bottom &quot; + b); int childLeft = 0; final int childCount = getChildCount(); mChildrenSize = childCount; for (int i = 0; i &lt; childCount; i++) &#123; final View childView = getChildAt(i); if (childView.getVisibility() != View.GONE) &#123; final int childWidth = childView.getMeasuredWidth(); mChildWidth = childWidth; childView.layout(childLeft, 0, childLeft + childWidth, childView.getMeasuredHeight()); childLeft += childWidth; &#125; &#125; &#125; private void smoothScrollBy(int dx, int dy) &#123; mScroller.startScroll(getScrollX(), 0, dx, 0, 500); invalidate(); &#125; @Override public void computeScroll() &#123; if (mScroller.computeScrollOffset()) &#123; Log.d(TAG,&quot;getCurrX &quot;+mScroller.getCurrX() + &quot;mScroller.getCurrY() &quot; +mScroller.getCurrY()); scrollTo(mScroller.getCurrX(), mScroller.getCurrY()); postInvalidate(); &#125; &#125; @Override protected void onDetachedFromWindow() &#123; mVelocityTracker.recycle(); super.onDetachedFromWindow(); &#125;&#125; å¯çŸ¥Viewçš„scrollTo()ã€scrollBy()æ˜¯çž¬é—´å®Œæˆçš„ï¼Œå½“æˆ‘ä»¬çš„æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨æ—¶ï¼Œå†…å®¹ä¼šè·Ÿç€æ‰‹æŒ‡æ»‘åŠ¨ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ‰‹æŒ‡ä¸€æŠ¬èµ·æ—¶ï¼Œæ»‘åŠ¨å°±ä¼šåœæ­¢,ä¸ºä½¿å¾—æ»šåŠ¨æ›´åŠ å¹³æ»‘,Scrolleråªæ˜¯è®¡ç®—è¾…åŠ©ç±»ï¼Œå®ƒçš„startScroll()å’ŒcomputeScrollOffset()æ–¹æ³•ä¸­ä¹Ÿåªæ˜¯å¯¹ä¸€äº›è½¨è¿¹å‚æ•°è¿›è¡Œè®¾ç½®å’Œè®¡ç®—ï¼ŒçœŸæ­£éœ€è¦è¿›è¡Œæ»‘åŠ¨è¿˜æ˜¯å¾—é€šè¿‡Viewçš„scrollTo()ã€scrollBy()æ–¹æ³• 123// å¼€å§‹æ»šåŠ¨ï¼Œå¹¶è®°ä¸‹å½“å‰æ—¶é—´ç‚¹ä½œä¸ºå¼€å§‹æ»šåŠ¨çš„æ—¶é—´ç‚¹startX startYï¼Œæ»‘åŠ¨æ—¶èµ·ç‚¹åç§»é‡ï¼Œpublic void startScroll(int startX, int startY, int dx, int dy, int duration) å¼€å§‹ä¸€ä¸ªåŠ¨ç”»æŽ§åˆ¶ï¼Œç”±(startX , startY)åœ¨durationæ—¶é—´å†…å‰è¿›(dx,dy)ä¸ªå•ä½ï¼Œå³åˆ°è¾¾åç§»åæ ‡ä¸º(startX+dx , startY+dy)å¤„ã€‚ æ»‘åŠ¨æ—¥å¿—,startX+dxæ˜¯1080 2160,å°è¯äº†ä¸Šé¢çš„åˆ¤æ–­ 12com.ryg.chapter_3 D&#x2F;HorizontalScrollViewEx: scrollX 821 dx 259com.ryg.chapter_3 D&#x2F;HorizontalScrollViewEx: scrollX 2007 dx 153 å®žé™…æ»‘åŠ¨å¤„ç†ç±»ï¼ŒScrollerç±»åº”è¯¥æœ‰ä¸ªæ’å€¼å™¨ï¼Œæä¾›æ»‘åŠ¨æŽ§åˆ¶ 12345678@Overridepublic void computeScroll() &#123; if (mScroller.computeScrollOffset()) &#123; Log.d(TAG,&quot;getCurrX &quot;+mScroller.getCurrX() + &quot;mScroller.getCurrY() &quot; +mScroller.getCurrY()); scrollTo(mScroller.getCurrX(), mScroller.getCurrY()); postInvalidate(); &#125;&#125; http://chanthuang.github.io/2016/08/31/Android-View-%E7%9A%84%E6%BB%9A%E5%8A%A8%E5%8E%9F%E7%90%86%E5%92%8C-Scroller%E3%80%81VelocityTracker-%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8/ https://www.jianshu.com/p/f10809e1964b DrawPaint ä¸ºäº†å±•ç¤ºæ–¹ä¾¿ï¼Œå®¹æ˜“çœ‹å‡ºæ•ˆæžœï¼Œä¹‹å‰ä½¿ç”¨çš„æ¨¡å¼ä¸€ç›´ä¸ºå¡«å……æ¨¡å¼ï¼Œå®žé™…ä¸Šç”»ç¬”æœ‰ä¸‰ç§æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š 123STROKE &#x2F;&#x2F;æè¾¹FILL &#x2F;&#x2F;å¡«å……FILL_AND_STROKE &#x2F;&#x2F;æè¾¹åŠ å¡«å…… ä¸ºäº†åŒºåˆ†ä¸‰è€…æ•ˆæžœæˆ‘ä»¬åšå¦‚ä¸‹å®žéªŒï¼š 123456789101112131415Paint paint &#x3D; new Paint();paint.setColor(Color.BLUE);paint.setStrokeWidth(40); &#x2F;&#x2F;ä¸ºäº†å®žéªŒæ•ˆæžœæ˜Žæ˜¾ï¼Œç‰¹åœ°è®¾ç½®æè¾¹å®½åº¦éžå¸¸å¤§&#x2F;&#x2F; æè¾¹paint.setStyle(Paint.Style.STROKE);canvas.drawCircle(200,200,100,paint);&#x2F;&#x2F; å¡«å……paint.setStyle(Paint.Style.FILL);canvas.drawCircle(200,500,100,paint);&#x2F;&#x2F; æè¾¹åŠ å¡«å……paint.setStyle(Paint.Style.FILL_AND_STROKE);canvas.drawCircle(200, 800, 100, paint); ç”»å¸ƒåæ ‡æ“ä½œ 1canvas.scale(1,-1); &#x2F;&#x2F; ç¿»è½¬Yè½´ setWillNotDrawViewGroupé»˜è®¤æƒ…å†µä¸‹ï¼Œå‡ºäºŽæ€§èƒ½è€ƒè™‘ï¼Œä¼šè¢«è®¾ç½®æˆWILL_NOT_DROWï¼Œè¿™æ ·ï¼Œondrawå°±ä¸ä¼šè¢«æ‰§è¡Œäº†ã€‚ å¦‚æžœæˆ‘ä»¬æƒ³é‡å†™ä¸€ä¸ªviewgroupçš„ondrawæ–¹æ³•ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š 1ï¼Œæž„é€ å‡½æ•°ä¸­ï¼Œç»™viewgroupè®¾ç½®ä¸€ä¸ªé¢œè‰²ã€‚ 2ï¼Œæž„é€ å‡½æ•°ä¸­ï¼Œè°ƒç”¨setWillNotDrawï¼ˆfalseï¼‰ï¼ŒåŽ»æŽ‰å…¶WILL_NOT_DRAW flagã€‚ åœ¨viewgroupåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒè°ƒç”¨äº†ä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼šinitViewGroupï¼Œå®ƒé‡Œé¢ä¼šæœ‰ä¸€å¥setFlagsï¼ˆWILLL_NOT_DRAW,DRAW_MASKï¼‰;ç›¸å½“äºŽè°ƒç”¨äº†setWillNotDrawï¼ˆtrueï¼‰ï¼Œæ‰€ä»¥è¯´ï¼Œå¯¹äºŽViewGroupï¼Œä»–å°±è®¤ä¸ºæ˜¯é€æ˜Žçš„äº†ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³è¦é‡å†™onDrawï¼Œå°±è¦è°ƒç”¨setWillNotDrawï¼ˆfalseï¼‰ã€‚ https://www.jianshu.com/p/7df7e8a0b1a6 https://juejin.im/post/5e6e0b91f265da5716712288 RelativeLayoutå°±æ˜¯æ‹“æ‰‘æŽ’åºï¼Œç”¨åˆ°äº†ä¸å…‰æ˜¯æ ‘ï¼Œè¿˜æœ‰å›¾ã€‚æ‰€ä»¥æ•°æ®ç»“æž„ä¸Žç®—æ³•çœŸçš„éžå¸¸é‡è¦ï¼Œä»–ä¼šè®©ä½ çš„å­¦ä¹ ä¸ä¼šå†é‚£ä¹ˆæž¯ç‡¥ã€‚ childview https://www.jianshu.com/p/c84693096e41 https://mp.weixin.qq.com/s/psrDADxwl782Fbs_vzxnQg UI ä¼˜åŒ–ç³»åˆ—ä¸“é¢˜https://www.jianshu.com/p/ea464eb15436 æ·˜å®è¯¦æƒ…onLayout ä¸¤ä¸ªå­viewåˆ‡æ¢ç»˜åˆ¶ https://juejin.cn/post/6844903828035207182 invalidate() Calling invalidate() is done when you want to schedule a redraw of the view. It will result in onDraw being called eventually (soon, but not immediately). An example of when a custom view would call it is when a text or background color property has changed. The view will be redrawn but the size will not change. requestLayout() If something about your view changes that will affect the size, then you should call requestLayout(). This will trigger onMeasure and onLayout not only for this view but all the way up the line for the parent views. Calling requestLayout() is not guaranteed to result in an onDraw (contrary to what the diagram in the accepted answer implies), so it is usually combined with invalidate(). 12invalidate();requestLayout(); An example of this is when a custom label has its text property changed. The label would change size and thus need to be remeasured and redrawn. forceLayout() When there is a requestLayout() that is called on a parent view group, it does not necessary need to remeasure and relayout its child views. However, if a child should be included in the remeasure and relayout, then you can call forceLayout() on the child. forceLayout() only works on a child if it occurs in conjunction with a requestLayout() on its direct parent. Calling forceLayout() by itself will have no effect since it does not trigger a requestLayout() up the view tree. Read this Q&amp;A for a more detailed description of forceLayout(). https://stackoverflow.com/questions/13856180/usage-of-forcelayout-requestlayout-and-invalidate","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"View_CanvasApi","slug":"View_CanvasApi","date":"2017-11-12T04:34:50.000Z","updated":"2021-08-19T11:11:44.279Z","comments":true,"path":"2017/11/12/View_CanvasApi/","link":"","permalink":"https://noteforme.github.io/2017/11/12/View_CanvasApi/","excerpt":"","text":"Canvasçš„å¸¸ç”¨æ“ä½œé€ŸæŸ¥è¡¨ æ“ä½œç±»åž‹ ç›¸å…³API å¤‡æ³¨ ç»˜åˆ¶é¢œè‰² drawColor, drawRGB, drawARGB ä½¿ç”¨å•ä¸€é¢œè‰²å¡«å……æ•´ä¸ªç”»å¸ƒ ç»˜åˆ¶åŸºæœ¬å½¢çŠ¶ drawPoint, drawPoints, drawLine, drawLines, drawRect, drawRoundRect, drawOval, drawCircle, drawArc ä¾æ¬¡ä¸º ç‚¹ã€çº¿ã€çŸ©å½¢ã€åœ†è§’çŸ©å½¢ã€æ¤­åœ†ã€åœ†ã€åœ†å¼§ ç»˜åˆ¶å›¾ç‰‡ drawBitmap, drawPicture ç»˜åˆ¶ä½å›¾å’Œå›¾ç‰‡ ç»˜åˆ¶æ–‡æœ¬ drawText, drawPosText, drawTextOnPath ä¾æ¬¡ä¸º ç»˜åˆ¶æ–‡å­—ã€ç»˜åˆ¶æ–‡å­—æ—¶æŒ‡å®šæ¯ä¸ªæ–‡å­—ä½ç½®ã€æ ¹æ®è·¯å¾„ç»˜åˆ¶æ–‡å­— ç»˜åˆ¶è·¯å¾„ drawPath ç»˜åˆ¶è·¯å¾„ï¼Œç»˜åˆ¶è´å¡žå°”æ›²çº¿æ—¶ä¹Ÿéœ€è¦ç”¨åˆ°è¯¥å‡½æ•° é¡¶ç‚¹æ“ä½œ drawVertices, drawBitmapMesh é€šè¿‡å¯¹é¡¶ç‚¹æ“ä½œå¯ä»¥ä½¿å›¾åƒå½¢å˜ï¼ŒdrawVerticesç›´æŽ¥å¯¹ç”»å¸ƒä½œç”¨ã€ drawBitmapMeshåªå¯¹ç»˜åˆ¶çš„Bitmapä½œç”¨ ç”»å¸ƒå‰ªè£ clipPath, clipRect è®¾ç½®ç”»å¸ƒçš„æ˜¾ç¤ºåŒºåŸŸ ç”»å¸ƒå¿«ç…§ save, restore, saveLayerXxx, restoreToCount, getSaveCount ä¾æ¬¡ä¸º ä¿å­˜å½“å‰çŠ¶æ€ã€ å›žæ»šåˆ°ä¸Šä¸€æ¬¡ä¿å­˜çš„çŠ¶æ€ã€ ä¿å­˜å›¾å±‚çŠ¶æ€ã€ å›žæ»šåˆ°æŒ‡å®šçŠ¶æ€ã€ èŽ·å–ä¿å­˜æ¬¡æ•° ç”»å¸ƒå˜æ¢ translate, scale, rotate, skew ä¾æ¬¡ä¸º ä½ç§»ã€ç¼©æ”¾ã€ æ—‹è½¬ã€é”™åˆ‡ Matrix(çŸ©é˜µ) getMatrix, setMatrix, concat å®žé™…ç”»å¸ƒçš„ä½ç§»ï¼Œç¼©æ”¾ç­‰æ“ä½œçš„éƒ½æ˜¯å›¾åƒçŸ©é˜µMatrixï¼Œåªä¸è¿‡Matrixæ¯”è¾ƒéš¾ä»¥ç†è§£å’Œä½¿ç”¨ï¼Œæ•…å°è£…äº†ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ã€‚ PSï¼š Canvaså¸¸ç”¨æ–¹æ³•åœ¨ä¸Šé¢è¡¨æ ¼ä¸­å·²ç»å…¨éƒ¨åˆ—å‡ºäº†ï¼Œå½“ç„¶è¿˜å­˜åœ¨ä¸€äº›å…¶ä»–çš„æ–¹æ³•æœªåˆ—å‡ºï¼Œå…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ Canvas Use CanvasPath lineToç®€å•å®žçŽ° 12345canvas.translate(DeviceUtil.mWidth / 2, DeviceUtil.mHeight / 2); //åŽŸç‚¹ç§»åŠ¨åˆ°å±å¹•ä¸­å¿ƒ Path path = new Path(); path.lineTo(200, 200); path.lineTo(200, 0); canvas.drawPath(path, mPaint); ä»Žå­—é¢æ„æ€ lineto,é¡¾åæ€ä¹‰è‚¯å®šå°±æœ‰fromçš„åæ ‡ç‚¹ï¼Œå†çœ‹è¿™ä¸ªå€Ÿçš„å›¾ï¼Œç¬¬ä¸€æ¡çº¿æ˜¯ä»ŽåŽŸç‚¹å¼€å§‹çš„ï¼Œç¬¬äºŒæ¡çº¿æ˜¯ä»ŽAå¼€å§‹çš„ï¼Œ 1path.close(); //å½¢æˆå°é—­çš„å›¾å½¢ è¿™äº›æ“ä½œéƒ½å¯ä»¥å åŠ  Rect RectFåŒºåˆ«: Rectæ˜¯ä½¿ç”¨intç±»åž‹ä½œä¸ºæ•°å€¼ï¼ŒRectFæ˜¯ä½¿ç”¨floatç±»åž‹ä½œä¸ºæ•°å€¼ã€‚ å››ä¸ªå‚æ•°æ˜¯ çŸ©å½¢å·¦ä¸Šè§’å’Œå³ä¸‹è§’ä¸¤ä¸ªç‚¹çš„åæ ‡ ç”»çº¿ 1234Path path = new Path();path.moveTo(100, 100);path.rLineTo(100, 200);canvas.drawPath(path, mPaint); Draw Circle ç”»ç¬” 1234mPaint = new Paint();mPaint.setColor(Color.BLUE);mPaint.setStyle(Paint.Style.FILL); // Fillæ˜¯ç©ºå¿ƒåœ† ï¼ŒSTROKEå®žå¿ƒåœ†,ç©ºå¿ƒåœ†å°±éœ€è¦è®¾ç½®setStrokeWidthè¿™ä¸ªå±žæ€§ canvas.drawCircle(getWidth()/2,getHeight()/2,getWidth()/2,mPaint); public void drawArc(RectF oval, float startAngle, float sweepAngle, boolean useCenter, Paint paint) oval :æŒ‡å®šåœ†å¼§çš„å¤–è½®å»“çŸ©å½¢åŒºåŸŸã€‚startAngle: åœ†å¼§èµ·å§‹è§’åº¦ï¼Œå•ä½ä¸ºåº¦ã€‚sweepAngle: åœ†å¼§æ‰«è¿‡çš„è§’åº¦(èµ·å§‹ä½ç½® Xè½´)ï¼Œé¡ºæ—¶é’ˆæ–¹å‘ï¼Œå•ä½ä¸ºåº¦,ä»Žå³ä¸­é—´å¼€å§‹ä¸ºé›¶åº¦ã€‚useCenter: å¦‚æžœä¸ºTrueæ—¶ï¼Œåœ¨ç»˜åˆ¶åœ†å¼§æ—¶å°†åœ†å¿ƒåŒ…æ‹¬åœ¨å†…ï¼Œé€šå¸¸ç”¨æ¥ç»˜åˆ¶æ‰‡å½¢ RectFæ˜¯çŸ©å½¢çš„å†…æŽ¥åœ†,left top right bottomåˆ†åˆ«å¯¹è±¡ å·¦ä¸Šè§’å’Œå³ä¸‹è§’ åæ ‡ drawTextåæ ‡(0,0)ä½äºŽå·¦ä¸‹è§’ 1canvas?.drawText(&quot;æµ‹è¯•æ–‡å­—&quot;,0f,0f,mPaint) measure textSize 123456val kgRect = Rect()var kgText = &quot;hello world&quot;mDialPaint.getTextBounds(kgText,0,kgText.length,kgRect)var txtHeight = kgRect.height()var txtWidth = kgRect.width() 123456canvas.drawPoint(200, 200, mPaint); canvas.drawPoints(new float[]&#123; //ç»˜åˆ¶ä¸€ç»„ç‚¹ï¼Œåæ ‡ä½ç½®ç”±floatæ•°ç»„æŒ‡å®š 500, 500, 500, 600, 500, 700 &#125;, mPaint); ä½ç§»(translate) 1234567// åœ¨åæ ‡åŽŸç‚¹ç»˜åˆ¶ä¸€ä¸ªé»‘è‰²åœ†å½¢ canvas.translate(200, 200); canvas.drawCircle(0, 0, 100, mPaint); // åœ¨åæ ‡åŽŸç‚¹ç»˜åˆ¶ä¸€ä¸ªè“è‰²åœ†å½¢ mPaint.setColor(Color.BLUE); canvas.translate(200, 200); canvas.drawCircle(0, 0, 100, mPaint); ç¼©æ”¾(scale) 12345678910111213141516canvas.translate(mWidth / 2, mHeight / 2); RectF rect = new RectF(0, -400, 400, 0); // çŸ©å½¢åŒºåŸŸ mPaint.setColor(Color.BLACK); // ç»˜åˆ¶é»‘è‰²çŸ©å½¢ canvas.drawRect(rect, mPaint); canvas.scale(-0.5f, -0.5f); // ç”»å¸ƒç¼©æ”¾ &lt;-- ç¼©æ”¾ä¸­å¿ƒå‘å³åç§»äº†200ä¸ªå•ä½ mPaint.setColor(Color.BLUE); // ç»˜åˆ¶è“è‰²çŸ©å½¢ canvas.drawRect(rect, mPaint); RectF rect = new RectF(-400, -400, 400, 400); canvas.drawRect(rect, mPaint); for (int i = 0; i &lt; 20; i++) &#123; canvas.scale(0.9f, 0.9f); canvas.drawRect(rect, mPaint); &#125; æ—‹è½¬(rotate) 1canvas.rotate(180); drawPicture ä¸‰ä¸ªæ–¹æ³• public void drawPicture (Picture picture) public void drawPicture (Picture picture, Rect dst) public void drawPicture (Picture picture, RectF dst) drawBitmap ä¸‰ä¸ªæ–¹æ³• // ç¬¬ä¸€ç§ public void drawBitmap (Bitmap bitmap, Matrix matrix, Paint paint) // ç¬¬äºŒç§ public void drawBitmap (Bitmap bitmap, float left, float top, Paint paint) // ç¬¬ä¸‰ç§ public void drawBitmap (Bitmap bitmap, Rect src, Rect dst, Paint paint) public void drawBitmap (Bitmap bitmap, Rect src, RectF dst, Paint paint) ç›´æŽ¥çœ‹ç¬¬ä¸‰ç§æ–¹æ³• 1234567// æŒ‡å®šå›¾ç‰‡ç»˜åˆ¶åŒºåŸŸ(å·¦ä¸Šè§’çš„å››åˆ†ä¹‹ä¸€)Rect src = new Rect(0, 0, bitmap.getWidth() / 2, bitmap.getHeight() / 2);// æŒ‡å®šå›¾ç‰‡åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„åŒºåŸŸRect dst = new Rect(0, 0, 400, 500);//ç»˜åˆ¶å›¾ç‰‡canvas.drawBitmap(bitmap, src, dst, null); Angle åœ¨å¸¸è§çš„æ•°å­¦åæ ‡ç³»ä¸­è§’åº¦å¢žå¤§æ–¹å‘ä¸ºé€†æ—¶é’ˆï¼Œ åœ¨é»˜è®¤çš„å±å¹•åæ ‡ç³»ä¸­è§’åº¦å¢žå¤§æ–¹å‘ä¸ºé¡ºæ—¶é’ˆã€‚ sweepAngleæ‰«è¿‡çš„è§’åº¦ 12drawArc(@NonNull RectF oval, float startAngle, float sweepAngle, boolean useCenter, @NonNull Paint paint) canvas?.drawArc(rectF,0f,145f,false,mDialPaint) save restoreSaveRestoreView 12345 canvas?.drawLine(0f,200f,700f,200f,linePaint)// canvas?.save() //å°†ç”»å¸ƒçŠ¶æ€ä¿å­˜ canvas?.rotate(90f, px / 2, py / 2);// canvas?.restore();//æ¢å¤ç”»å¸ƒçŠ¶æ€ è¿™ä¸ªæ“ä½œèƒ½æ’¤é”€åˆ° ä¸Šæ¬¡ä¿å­˜çš„ç”»å¸ƒçŠ¶æ€ canvas?.drawLine(0f,400f,700f,400f,bgPaint) è¿è¡Œæ•ˆæžœï¼š æ‰“å¼€æ³¨é‡ŠåŽçš„è¿è¡Œæ•ˆæžœï¼Œè¿™æ ·è¿è¡ŒåŽç›¸å½“äºŽ æ²¡æœ‰å‘ç”Ÿé€‰æ‹©ç”»å¸ƒè¿™ä»¶äº‹ã€‚ saveslayer å›¾å±‚https://blog.csdn.net/cquwentao/article/details/51423371 https://www.jianshu.com/p/0bd672626c8d Canvas demo https://medium.com/better-programming/learn-all-android-canvas-draw-functions-dd5d6595884a","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/tags/VIEW/"}]},{"title":"Gogs","slug":"Gogs","date":"2017-11-12T01:08:56.000Z","updated":"2021-08-19T11:11:43.902Z","comments":true,"path":"2017/11/12/Gogs/","link":"","permalink":"https://noteforme.github.io/2017/11/12/Gogs/","excerpt":"","text":"ubuntu 17.04 Gogsæ­å»ºgitæœåŠ¡å™¨ gogs Installåˆ›å»ºgitç”¨æˆ·12345678910sudo apt-get upgradesudo adduser git //åˆ›å»ºç”¨æˆ· å¯†ç  ******* (1234)su git//åˆ‡æ¢åˆ°gitç”¨æˆ·cd ~ //è¿›å…¥ç”¨æˆ·gitæ ¹ç›®å½•git --version //æ£€æŸ¥gitæ˜¯å¦å®‰è£… ä¿®æ”¹gitå¯†ç  åˆ°rootä¸‹ passwd git ç„¶åŽè¾“å…¥å¯†ç http://wangchujiang.com/linux-command/c/passwd.html # åˆ›å»ºæ•°æ®åº“ è¿™ä¸ªå¯ä»¥é€‰æ‹©é»˜è®¤çš„sqlite3æ•‘ä¸éœ€è¦å®‰è£…mysql 123456mysql -u root -pmysql&gt; SET GLOBAL storage_engine = &#x27;InnoDB&#x27;;mysql&gt; CREATE DATABASE gogs CHARACTER SET utf8 COLLATE utf8_bin;mysql&gt; GRANT ALL PRIVILEGES ON gogs.* TO â€˜rootâ€™@â€˜localhostâ€™ IDENTIFIED BY â€˜itadminâ€™;mysql&gt; FLUSH PRIVILEGES;mysql&gt; QUITï¼› ## å®‰è£…golangçŽ¯å¢ƒ(å¯ä»¥å¿½ç•¥) 1234567891011121314su gitçŽ¯å¢ƒå˜é‡export GOROOT=$HOME/go //ç›®å½•ä¸‹export GOARCH=amd64 #ç³»ç»Ÿä½æ•°ï¼Œ386è¡¨ç¤º32ä½ç³»ç»Ÿï¼Œamd64è¡¨ç¤º64ä½ç³»ç»Ÿã€‚export GOOS=linux #ç³»ç»Ÿç±»åž‹export PATH=$PATH:$GOROOT/bin//ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼šsource ~/.bashrcwget https://github.com/gogits/gogs/releases/download/v0.11.29/go1.9.2.linux-amd64.tar.gztar zxvf go1.9.2.linux-amd64.tar.gzmv go $GOROOT //è¿™ä¸€æ­¥æœ‰ç‚¹é—®é¢˜ï¼Œå·²å­˜åœ¨æ–‡ä»¶go env //æµ‹è¯•è¿™ä¸ªä¸€æ­¥ å€’æ˜¯æ²¡é—®é¢˜ å®‰è£…Gogs123456su git cd ~wget https://github.com/gogits/gogs/releases/download/v0.11.29/linux_amd64.tar.gztar zxvf linux_amd64.tar.gz //è§£åŽ‹åŽä¼šå³gogsæ–‡ä»¶ cd gogs ./gogs web å®‰è£…é…ç½®æµè§ˆå™¨è¾“å…¥ http://yourip:3000/install è¿›è¡Œé…ç½® å¦‚å›¾ æŠŠlocalhostæ”¹æˆyourip åŽå°è¿è¡Œ1234su gitcd /home/git/gogs nohup ./gogs web&amp; å‚è€ƒï¼šé›¨å··å‰ç«¯ é›¨å··å‰ç«¯ é‡å¯æŸ¥æ‰¾gogsç›®å½• find / -name &#39;gogs&#39; ç„¶åŽæŒ‰ç…§åŽå°è¿è¡Œ Gogs upgrade sudo su - git cd ~ pwd ls mv gogs gogs_old wget https://dl.gogs.io/0.11.91/gogs_0.11.91_linux_amd64.tar.gz tar -zxvf gogs_0.11.91_linux_amd64.tar.gz ls cp -R gogs_old&#x2F;{custom,data,log} gogs cd gogs .&#x2F;gogs web https://gogs.io/docs/upgrade/upgrade_from_binary cloneåœ°å€ä¸º localhosté—®é¢˜ &#x2F;home&#x2F;git&#x2F;gogs&#x2F;custom&#x2F;confä¸‹æŠŠapp.iniï¼ŒDOMAIN ROOT_URL æ”¹æˆä¸»æœºip Draw12/root/DRAW/apache-tomcat-8.5.65/bin./startup.sh","categories":[{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[]},{"title":"background_draw (èƒŒæ™¯å›¾å½¢ç»˜åˆ¶)","slug":"background_draw","date":"2017-11-03T01:59:57.000Z","updated":"2021-08-19T11:11:44.298Z","comments":true,"path":"2017/11/03/background_draw/","link":"","permalink":"https://noteforme.github.io/2017/11/03/background_draw/","excerpt":"","text":"** ä¸ºäº†æé«˜Appæ€§èƒ½ï¼Œç»å¸¸ä¼šç”¨åˆ°ä»£ç å†™èƒŒæ™¯ ** åŸºæœ¬å±žæ€§ solid : å¡«å……å†…å®¹ stroke: ç»˜åˆ¶è¾¹æ¡† ä»£ç é‡Œè®¾ç½®é¢œè‰² Color.parseColor(&quot;#fa6d62&quot;) ç‚¹å‡»é€‰ä¸­çŠ¶æ€ android:state_pressed æ˜¯å¦æŒ‰ä¸‹ï¼Œå¦‚ä¸€ä¸ªæŒ‰é’®è§¦æ‘¸æˆ–è€…ç‚¹å‡»ã€‚ android:state_focused æ˜¯å¦å–å¾—ç„¦ç‚¹ï¼Œæ¯”å¦‚ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–‡æœ¬æ¡†ã€‚ android:state_hovered å…‰æ ‡æ˜¯å¦æ‚¬åœï¼Œé€šå¸¸ä¸Žfocused stateç›¸åŒï¼Œå®ƒæ˜¯4.0çš„æ–°ç‰¹æ€§ android:state_selected è¢«é€‰ä¸­ï¼Œå®ƒä¸Žfocus stateå¹¶ä¸å®Œå…¨ä¸€æ ·ï¼Œå¦‚ä¸€ä¸ªlist view è¢«é€‰ä¸­çš„æ—¶å€™ï¼Œå®ƒé‡Œé¢çš„å„ä¸ªå­ç»„ä»¶å¯èƒ½é€šè¿‡æ–¹å‘é”®ï¼Œè¢«é€‰ä¸­äº†ã€‚ android:state_checkable ç»„ä»¶æ˜¯å¦èƒ½è¢«checkã€‚å¦‚ï¼šRadioButtonæ˜¯å¯ä»¥è¢«checkçš„ã€‚ android:state_checked è¢«checkedäº†ï¼Œå¦‚ï¼šä¸€ä¸ªRadioButtonå¯ä»¥è¢«checkäº†ã€‚ android:state_enabled èƒ½å¤ŸæŽ¥å—è§¦æ‘¸æˆ–è€…ç‚¹å‡»äº‹ä»¶ android:state_activated è¢«æ¿€æ´»(è¿™ä¸ªéº»çƒ¦ä¸¾ä¸ªä¾‹å­ï¼Œä¸æ˜¯ç‰¹æ˜Žç™½) android:state_window_focused åº”ç”¨ç¨‹åºæ˜¯å¦åœ¨å‰å°ï¼Œå½“æœ‰é€šçŸ¥æ è¢«æ‹‰ä¸‹æ¥æˆ–è€…ä¸€ä¸ªå¯¹è¯æ¡†å¼¹å‡ºçš„æ—¶å€™åº”ç”¨ç¨‹åºå°±ä¸åœ¨å‰å°äº† æ³¨æ„:å¦‚æžœæœ‰å¤šä¸ªitemï¼Œé‚£ä¹ˆç¨‹åºå°†è‡ªåŠ¨ä»Žä¸Šåˆ°ä¸‹è¿›è¡ŒåŒ¹é…ï¼Œæœ€å…ˆåŒ¹é…çš„å°†å¾—åˆ°åº”ç”¨ã€‚ï¼ˆä¸æ˜¯é€šè¿‡æœ€ä½³åŒ¹é…ï¼‰ å¦‚æžœä¸€ä¸ªitemæ²¡æœ‰ä»»ä½•çš„çŠ¶æ€è¯´æ˜Žï¼Œé‚£ä¹ˆå®ƒå°†å¯ä»¥è¢«ä»»ä½•ä¸€ä¸ªçŠ¶æ€åŒ¹é…ã€‚ https://blog.csdn.net/yinbucheng/article/details/52922759 selecedç”¨äºŽå•é€‰ï¼Œcheckedç”¨äºŽå¤šé€‰, selectedæ˜¯é€‰æ‹©å¾ˆå¤šé¡¹ï¼Œä½†æ˜¯åªå–å½“å‰çš„é¡¹ï¼Œå³æœ€åŽä¸€ä¸ªé€‰ä¸­çš„ checkedæ˜¯é€‰ä¸­å¾ˆå¤šé¡¹ï¼Œéƒ½é€‰ä¸­ã€‚ shape layer-list selectorè®¾ç½®ButtonæŒ‰é’®èƒŒæ™¯ 12345678910&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;corners android:radius=&quot;20dp&quot; /&gt; &lt;!-- è¾¹æ¡†çš„é¢œè‰²--&gt; &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#009cff&quot; /&gt; &lt;!--å¡«å……çš„é¢œè‰² --&gt; &lt;solid android:color=&quot;@android:color/transparent&quot; /&gt;&lt;/shape&gt; shape &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;solid android:color=&quot;#2e97f3&quot; /&gt; //å¡«å……é¢œè‰² &lt;stroke android:width=&quot;2dp&quot; //æè¾¹å®½åº¦ android:color=&quot;#2e97f3&quot; /&gt; //æè¾¹é¢œè‰² &lt;/shape&gt; layer-list&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item&gt; &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;solid android:color=&quot;#2e97f3&quot; /&gt; &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#2e97f3&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;item android:top=&quot;50dp&quot;&gt; &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;solid android:color=&quot;@android:color/holo_green_dark&quot; /&gt; &lt;padding android:left=&quot;50dp&quot;/&gt; &lt;/shape&gt; &lt;/item&gt; &lt;item android:top=&quot;100dp&quot;&gt; &lt;shape android:shape=&quot;rectangle&quot;&gt; &lt;solid android:color=&quot;@android:color/holo_orange_light&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;/layer-list&gt; LayerDrawable æ˜¯ç®¡ç†å…¶ä»–å¯ç»˜åˆ¶å¯¹è±¡é˜µåˆ—çš„å¯ç»˜åˆ¶å¯¹è±¡ã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªå¯ç»˜åˆ¶å¯¹è±¡æŒ‰ç…§åˆ—è¡¨çš„é¡ºåºç»˜åˆ¶ï¼Œåˆ—è¡¨ä¸­çš„æœ€åŽä¸€ä¸ªå¯ç»˜åˆ¶å¯¹è±¡ç»˜äºŽé¡¶éƒ¨ã€‚æ¯ä¸ªå¯ç»˜åˆ¶å¯¹è±¡ç”±å•ä¸€ å…ƒç´ å†…çš„ å…ƒç´ è¡¨ç¤ºã€‚æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯layer-listä¸­æœ‰itemçš„å…ˆåŽé¡ºåºä¼šå½±å“å±•ç¤ºæ•ˆæžœï¼Œä¸åŒé¡ºåºçš„æ•ˆæžœå¯èƒ½å¤§ç›¸å¾„åº­ï¼Œå› ä¸ºï¼ŒåŽé¢çš„itemæ€»æ˜¯åœ¨ä¹‹å‰çš„itemä¹‹ä¸Šå¹¶è¦†ç›–æ˜¾ç¤ºã€‚ selector åº•éƒ¨é€‰æ‹©å™¨ 123456789101112131415161718192021 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:state_selected=&quot;true&quot;&gt; &lt;layer-list&gt; &lt;item&gt; &lt;color android:color=&quot;#2e97f3&quot; /&gt; &lt;/item&gt; &lt;item android:bottom=&quot;5dp&quot; android:drawable=&quot;@color/white&quot; /&gt; &lt;/layer-list&gt; &lt;/item&gt; &lt;item&gt; &lt;layer-list&gt; &lt;item&gt; &lt;color android:color=&quot;#2e97f3&quot; /&gt; &lt;/item&gt; &lt;item android:drawable=&quot;@color/white&quot; /&gt; &lt;/layer-list&gt; &lt;/item&gt;&lt;/selector&gt; å‚è€ƒ https://keeganlee.me/post/android/20150909 èƒŒæ™¯é€‰æ‹©å™¨ 12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:drawable=&quot;@drawable/bg_circle_tab_yellow&quot; android:state_selected=&quot;true&quot; /&gt; &lt;item android:drawable=&quot;@drawable/bg_circle_tab_gray&quot; /&gt;&lt;/selector&gt; å­—ä½“é¢œè‰²é€‰æ‹©å™¨ 12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:color=&quot;@color/white&quot; android:state_selected=&quot;true&quot; /&gt; &lt;item android:color=&quot;#999999&quot; /&gt;&lt;/selector&gt; åŽé¢çš„itemåœ¨ä¹‹å‰çš„itemä¸Šæ˜¾ç¤ºï¼Œæ‰€æœ‰å‰é¢è®¾ç½®çš„padding,åŽé¢å åŠ å½¢æˆå›¾å±‚ http://blog.csdn.net/xiehuimx/article/details/70242676https://developer.android.com/guide/topics/resources/drawable-resource.html#Transition é¦–é¡µé˜´å½±æ•ˆæžœofficeå‰ç«¯æ—¶é—´ä¸€ç›´æ‰¾è¿™ç§èµ„æ–™ï¼Œæ•ˆæžœä¸€ç›´ä¸å¦‚æ„ï¼Œä¸å¾—å·²ç”¨äº†å›¾ç‰‡ï¼ŒçœŸæ˜¯ è¸ç ´é“éž‹æ— è§…å¤„https://developer.android.com/training/material/shadows-clipping.html 123456789 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:shape=&quot;rectangle&quot;&gt; &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;#f9fafc&quot; /&gt; &lt;corners android:radius=&quot;2dp&quot; /&gt; &lt;solid android:color=&quot;@color/white&quot; /&gt;&lt;/shape&gt; ä¸è¿‡è¿™ç§æ–¹æ³•è¿˜æ˜¯å·®å¼ºäººæ„ anotherå¯ä»¥è¯•è¯•ä¸‹é¢è¿™ç§æ–¹å¼ http://blog.csdn.net/u011421608/article/details/51923812http://yifeng.studio/2017/02/26/android-elevation-and-shadow/ ç”»è™šçº¿&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:shape=&quot;line&quot;&gt; &lt;!-- jon è™šçº¿--&gt; &lt;size android:height=&quot;1dp&quot; /&gt; &lt;stroke android:width=&quot;1dp&quot; android:color=&quot;@color/white&quot; android:dashGap=&quot;2dp&quot; android:dashWidth=&quot;4dp&quot; /&gt; &lt;!-- dashwidthæ˜¯æŒ‡- - -ä¸­æ¯ä¸€ä¸ª-çš„å®½åº¦--&gt; &lt;!-- dashGapæ˜¯æŒ‡è™šçº¿ä¸­æ¯ä¸€ä¸ªé—´éš”çš„å®½åº¦ --&gt; heightæ¯”heighté«˜ å…³é—­ç¡¬ä»¶åŠ é€Ÿ android:layerType=â€softwareâ€ 12345&lt;View android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;10dp&quot; android:layout_below=&quot;@+id/rl_time_day&quot; android:background=&quot;@drawable/bg_dash_line&quot; /&gt; å‚è€ƒï¼š https://lianyuchen.github.io/2017/05/09/%E5%85%B3%E4%BA%8Eshape%E7%94%BB%E8%99%9A%E7%BA%BF/ http://www.jianshu.com/p/75cc93195f7a?from=jiantop.com https://keeganlee.me/post/android/20150909 LinearLayouté»˜è®¤æ¨ªçº¿ android:divider=&quot;@drawable/shape_line android:dividerPadding=&quot;@dimen/dimen_15&quot; 123* shape_line.xml &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;solid android:color=&quot;@color/line_color&quot; /&gt; &lt;size android:height=&quot;0.5dp&quot; /&gt; &lt;/shape&gt; https://blog.csdn.net/BingShuShu/article/details/51444206","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[]},{"title":"Resource","slug":"Resource","date":"2017-10-21T00:53:39.000Z","updated":"2021-12-26T12:11:20.570Z","comments":true,"path":"2017/10/21/Resource/","link":"","permalink":"https://noteforme.github.io/2017/10/21/Resource/","excerpt":"","text":"12@ColorInt è¡¨æ˜Žè¯¥å‚æ•°ã€å˜é‡æˆ–è€…å‡½æ•°è¿”å›žå€¼åº”è¯¥æ˜¯ä¸€ä¸ªé¢œè‰²å€¼è€Œä¸æ˜¯é¢œè‰²èµ„æºå¼•ç”¨ï¼Œä¾‹å¦‚åº”è¯¥æ˜¯ä¸€ä¸ª AARRGGBB çš„æ•´æ•°å€¼ã€‚@ColorRes è¡¨æ˜Žè¯¥å‚æ•°ã€å˜é‡æˆ–è€…å‡½æ•°è¿”å›žå€¼åº”è¯¥æ˜¯ä¸€ä¸ª color ç±»åž‹çš„èµ„æºï¼Œè€Œä¸æ˜¯é¢œè‰²å€¼ã€‚æ³¨æ„å’Œ ColorInt åŒºåˆ« ColorInt: Color.Red å’ŒR.color.refrenceæ˜¯æœ‰åŒºåˆ«çš„ https://www.jianshu.com/p/2edbd53fa7b0 https://blog.csdn.net/ziwang_/article/details/70513932 æœ‰æ—¶å€™æƒ³å†™ç‚¹ä¸œè¥¿ è‹¦äºŽæ²¡æœ‰ç´ æ https://icons8.com/http://www.iconfont.cn https://icomoon.io/http://fontello.com/ ä¹Ÿå¯ä»¥å¯¼å…¥çŸ¢é‡å›¾https://developer.android.com/studio/write/vector-asset-studio.html?hl=zh-cn https://material.io/icons/ å®˜æ–¹å›¾","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"hot_patchï¼ˆçƒ­æ›´æ–°ï¼‰","slug":"hot-patch","date":"2017-10-17T07:25:56.000Z","updated":"2021-08-19T11:11:44.300Z","comments":true,"path":"2017/10/17/hot-patch/","link":"","permalink":"https://noteforme.github.io/2017/10/17/hot-patch/","excerpt":"","text":"ä¸ºäº†é¢„é˜²é¡¹ç›®ç´§æ€¥é—®é¢˜ï¼Œä½¿ç”¨çƒ­æ›´æ–°æ¯”å‘ç‰ˆè¦å¥½ç‚¹ çƒ­æ›´æ–°é€‰æ‹© VitrualApk æ»´æ»´å¼€æºçš„æ–¹æ¡ˆï¼Œä¹‹å‰çš„dynamic-load-apkæŽ¨åŠ¨çš„çƒ­æ›´æ–°çš„å‘å±•,ä¸è¿‡è¿™ä¸ªå¼€æºæ²¡å¤šä¹…ï¼Œå‡†å¤‡åŽé¢è¿ç§»åˆ°è¿™ä¸Šé¢æ¥ Tinker-Bugly è¿™ä¸ªå¾ˆä¸é”™å…è´¹ï¼Œå°±æ˜¯åªæ”¯æŒ å†·å¯åŠ¨ï¼Œé…åˆbuglyæ•™ç¨‹ç”¨èµ·æ¥æ–¹ä¾¿ sophix è¿™ä¸ªæ”¯æŒçƒ­å¯åŠ¨ é…ç½®ä¹Ÿæ–¹ä¾¿ï¼Œä¸è¿‡5ä¸‡è®¾å¤‡ä»¥ä¸Šå°±è¦æ”¶è´¹ï¼Œå¯¹äºŽæ”¶è´¹æˆ‘è§‰å¾—ä¹Ÿæ— å¯åŽšéžï¼Œæ¯•ç«Ÿæ˜¯åˆ«äººçš„åŠ³åŠ¨æˆæžœï¼Œ ä½œä¸ºå¼€å‘è€…çš„è§’åº¦ï¼Œè¿˜æ˜¯å¼€æºæœ€å¥½ï¼Œä»¥åŽå¯ä»¥å­¦ä¹ ä¸‹ã€‚ æ‰€ä»¥å…ˆé€‰æ‹©Tinker-Bugly æŽ¥å…¥ æŒ‰ç…§æŽ¥å…¥æ–‡æ¡£ é…åˆDemoæŽ¥å…¥é…ç½®ï¼Œç„¶åŽå°±å¼€å§‹åšè‡ªå·±çš„app å®šä¹‰ ä¿®æ”¹appid buglyå¹³å°ç”³è¯·åŽçš„ AppId 123// è¿™é‡Œå®žçŽ°SDKåˆå§‹åŒ–ï¼ŒappIdæ›¿æ¢æˆä½ çš„åœ¨Buglyå¹³å°ç”³è¯·çš„appId // è°ƒè¯•æ—¶ï¼Œå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºtrue Bugly.init(getApplication(), &quot;f7b6508f55&quot;, true); ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½® logæ˜¯å¦å±•ç¤º tinkerId æ¯æ¬¡ä¿®æ”¹ åŸºçº¿ç‰ˆæœ¬å’Œ è¡¥ä¸ç‰ˆæœ¬éƒ½è¦ä¿®æ”¹ tinkerId 12tinkerId = &quot;1.0.6-patch&quot; ç‚¹å‡» assembleDebug ç”Ÿæˆ åŸºçº¿ç‰ˆæœ¬ https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/ 1å®žé™…åº”ç”¨ä¸­ï¼Œè¯·æ³¨æ„ä¿å­˜çº¿ä¸Šå‘å¸ƒç‰ˆæœ¬çš„åŸºå‡†apkåŒ…ã€mappingæ–‡ä»¶ã€R.txtæ–‡ä»¶ï¼Œå¦‚æžœçº¿ä¸Šç‰ˆæœ¬æœ‰bugï¼Œå°±å¯ä»¥å€ŸåŠ©æˆ‘ä»¬tinker-supportæ’ä»¶è¿›è¡Œè¡¥ä¸åŒ…çš„ç”Ÿæˆã€‚ ä¿®æ”¹ def baseApkDir , ä¿®æ”¹ tinkerId ä¿®æ”¹bug baseApkDiræ˜¯æ ¹æ®åŸºçº¿ç‰ˆæœ¬ç”Ÿæˆçš„ç›®å½• ä¿®æ”¹tinkerId ç¼–è¯‘patchåŒ… ç‚¹å‡» buildTinkerPatchReleaseï¼Œç”Ÿæˆpatch_signed_7zip.apkä¸Šä¼ ,ç„¶åŽé‡å¯å°±å¯ä»¥äº† å¯¹äºŽå¼€å‘è®¾å¤‡å’Œå…¨é‡è®¾å¤‡ ä¿®æ”¹ 12//æŒ‡å®šä¸ºå¼€å‘è®¾å¤‡ Bugly.setIsDevelopmentDevice(getApplication(),true); å‚è€ƒ ï¼š https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/ https://github.com/Tencent/tinker https://github.com/BuglyDevTeam/Bugly-Android-Demo UncaughtExceptionHandler Buglyå†²çª ä¸ä¸ŠæŠ¥æ—¥å¿—https://blog.csdn.net/ZPCrobot/article/details/97390156 ä»Žé›¶å¼€å§‹å®žçŽ°ä¸€ä¸ªæ’ä»¶åŒ–æ¡†æž¶https://blog.csdn.net/qq_22090073/article/details/103946596 https://www.jianshu.com/p/af8c47fabb12","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"ConstraintLayout","slug":"ConstraintLayout","date":"2017-10-15T02:37:39.000Z","updated":"2023-02-23T14:17:11.776Z","comments":true,"path":"2017/10/15/ConstraintLayout/","link":"","permalink":"https://noteforme.github.io/2017/10/15/ConstraintLayout/","excerpt":"","text":"introducehttps://developer.android.google.cn/reference/androidx/constraintlayout/widget/ConstraintLayout https://developer.android.com/develop/ui/views/layout/constraint-layout https://juejin.cn/post/6949186887609221133#heading-6 Widgets dimensionwidgetçš„å°ºå¯¸å¯ä»¥é€šè¿‡è®¾ç½®android:layout_widthå’Œandroid:layout_heightçš„å±žæ€§å€¼æ¥æŒ‡å®šï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼š ä½¿ç”¨å…·ä½“å€¼ ä½¿ç”¨WRAP_CONTENTï¼Œè¿™æ ·widgetä¼šè®¡ç®—è‡ªèº«çš„å°ºå¯¸ Using 0dp, which is the equivalent of â€œMATCH_CONSTRAINTâ€œ (ä½¿ç”¨0dpï¼Œè¿™ç­‰äºŽâ€œMATCH_CONSTRAINTâ€ ) Groupå¯ä»¥æŽ§åˆ¶ä¸€ç»„æŽ§ä»¶çš„éšè—å’Œæ˜¾ç¤º 123456&lt;androidx.constraintlayout.widget.Group android:id&#x3D;&quot;@+id&#x2F;gp_1&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:visibility&#x3D;&quot;gone&quot; app:constraint_referenced_ids&#x3D;&quot;cl_h4,cl_h2&quot; &#x2F;&gt; 1((Group)findViewById(R.id.gp_1)).setVisibility(View.GONE); â€‹ findViewById(R.id.gp_2).setVisibility(View.INVISIBLE); doesnt not work https://juejin.cn/post/6844903875569254414#heading-17 Guidelineä½¿ç”¨https://developer.android.com/reference/android/support/constraint/Guideline.html 12app:layout_constraintGuide_percent&#x3D;&quot;0.2&quot;app:layout_constraintGuide_begin&#x3D;&quot;100dp&quot; ç‰¹è‰²å±žæ€§layout_constraintDimensionRatioæŒ‡å®šé«˜åº¦ï¼Œå®½åº¦éšç€å®½é«˜æ¯”è‡ªé€‚åº” 1234567&lt;ImageView android:id&#x3D;&quot;@+id&#x2F;iv_img01&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:src&#x3D;&quot;@mipmap&#x2F;img_1&quot; app:layout_constraintDimensionRatio&#x3D;&quot;1:1&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; &#x2F;&gt; layout_constraintHorizontal_bias å…ˆè®¾ç½®çº¦æŸ Biasä¸Šé¢çš„æ°´å¹³å±…ä¸­,æ˜¯ä½¿ç”¨çš„ä¸Žçˆ¶äº²å·¦ä¾§å¯¹é½+ä¸Žçˆ¶äº²å³ä¾§å¯¹é½. å¯ä»¥ç†è§£ä¸ºå·¦å³çš„æœ‰ä¸€ç§çº¦æŸåŠ›,é»˜è®¤æƒ…å†µä¸‹,å·¦å³çš„åŠ›åº¦æ˜¯ä¸€æ ·å¤§çš„,é‚£ä¹ˆviewå°±å±…ä¸­äº†. å½“å·¦ä¾§çš„åŠ›åº¦å¤§ä¸€äº›æ—¶,viewå°±ä¼šåå‘å·¦ä¾§.å°±åƒä¸‹é¢è¿™æ ·. layout_constraintHorizontal_bias æ°´å¹³çº¦æŸåŠ›layout_constraintVertical_bias åž‚ç›´çº¦æŸåŠ› 1234567&lt;android.support.constraint.ConstraintLayout &lt;Button android:text=&quot;æŒ‰é’®1&quot; app:layout_constraintHorizontal_bias=&quot;0.3&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot;/&gt;&lt;/android.support.constraint.ConstraintLayout&gt; ä¸Šé¢ä»£ç å°±åå·¦çº¦æŸ WRAP_CONTENT: å¼ºåˆ¶çº¦æŸæˆ‘ä»¬å¯èƒ½å¸Œæœ›ä½¿ç”¨WRAP_CONTENTï¼ŒåŒæ—¶ä»ç„¶å¼ºåˆ¶æ‰§è¡Œçº¦æŸä»¥é™åˆ¶æœ€ç»ˆçš„å°ºå¯¸ app:layout_constrainedWidth=â€true|falseâ€ button1å±…ä¸­æ˜¾ç¤ºï¼Œbutton2çº¦æŸåœ¨button1çš„å³è¾¹ã€parentçš„å·¦è¾¹ï¼š 123456789101112131415161718192021&lt;Button android:id=&quot;@+id/button1&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;aaaaaaa&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;&lt;Button android:id=&quot;@+id/button2&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;22222222222222222222222222222&quot; app:layout_constrainedWidth=&quot;true&quot; android:layout_marginTop=&quot;40dp&quot; app:layout_constraintTop_toTopOf=&quot;@id/button1&quot; app:layout_constraintStart_toEndOf=&quot;@id/button1&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt; å¯¹button2ä½¿ä¸ä½¿ç”¨app:layout_constrainedWidth=&quot;true&quot;çš„æ•ˆæžœå¦‚ä¸‹ï¼š çº¦æŸwidthå‰ &amp; çº¦æŸwidthåŽ å ç”¨çˆ¶å¸ƒå±€çš„æ¯”ä¾‹chain 3ä¸ªButton ä¸¤ä¸¤ä¾èµ–,ç›¸å½“äºŽç»„æˆäº†ä¸€ä¸ªé“¾ Buttonå‡åˆ† width = match_constraint (0dp) 1234567891011121314151617181920212223&lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_00&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_00&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_01&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_01&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_02&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_02&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot; app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; app:layout_constraintHorizontal_weight=â€2â€` çœ‹å±žæ€§ä¹Ÿå¯ä»¥çŒœåˆ°æ˜¯å¹²å˜›ç”¨çš„äº†. 12345678910111213141516171819202122232425262728293031&lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width&#x3D;&quot;match_parent&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;guideline_00&quot; android:layout_height&#x3D;&quot;wrap_content&quot;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_00&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_00&quot; app:layout_constraintHorizontal_weight&#x3D;&quot;2&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_01&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_01&quot; app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_02&quot; android:layout_width&#x3D;&quot;0dp&quot; android:layout_height&#x3D;&quot;wrap_content&quot; app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot; android:text&#x3D;&quot;Button_02&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot; app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; &lt;&#x2F;androidx.constraintlayout.widget.ConstraintLayout&gt; Buttonå‡ä»½ å®½åº¦ä¸ä¸ºmatch_constraint 1234567891011121314151617181920212223&lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_10&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_00&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_11&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_11&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_01&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_10&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_12&quot; &#x2F;&gt; &lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_12&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;Button_02&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_11&quot; app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; chainStyleChains are controlled by attributes set on the first element of the chain (the â€œheadâ€ of the chain): The head is the left-most widget for horizontal chains, and the top-most widget for vertical chains.ç¬¬ä¸€ä¸ªå…ƒç´ å†³å®šé“¾style è€Œä¸”åªæœ‰æ”¾åœ¨å¤´èŠ‚ç‚¹æ‰æœ‰æ•ˆï¼Œå¦åˆ™éƒ½æ²¡ç”¨ spread Chainlayout_constraintHorizontal_chainStyle è¿™ä¸ªå±žæ€§é»˜è®¤æ˜¯spread å…ƒç´ å±•å¼€ mineutil activity_constraint.xml 1234567891011121314151617181920212223&lt;Button android:id=&quot;@+id/bt_00&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Button_00&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_01&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_01&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Button_01&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_00&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_02&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_02&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Button_02&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_01&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt; Spread inside chain endpoints of the chain will not be spread out (ä¸¤ç«¯ä¸ä¼šå±•å¼€) å…¶å®žå°±ç›¸å½“äºŽä¸¤ç«¯çš„çº¦æŸåŽ»æŽ‰äº† 123456789101112131415161718192021222324252627&lt;Button android:id=&quot;@+id/bt_10&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Inside&quot; android:background=&quot;@android:color/holo_blue_light&quot; app:layout_constraintHorizontal_chainStyle=&quot;spread_inside&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_11&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_11&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Inside&quot; android:background=&quot;@android:color/holo_blue_light&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_10&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_12&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_12&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Inside&quot; android:background=&quot;@android:color/holo_blue_light&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_11&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt; Weighted chainsçœ‹ä¸Šé¢å®˜æ–¹çš„å›¾å°±èƒ½ç†è§£äº† packed chains 123456789101112131415161718192021222324252627&lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_20&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot; android:text&#x3D;&quot;packed&quot; app:layout_constraintHorizontal_chainStyle&#x3D;&quot;packed&quot; &#x2F;&#x2F;ç¬¬ä¸€ä¸ªæœ‰æ•ˆ app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_21&quot; &#x2F;&gt;&lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_21&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot; android:text&#x3D;&quot;packed&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_20&quot; app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_22&quot; &#x2F;&gt;&lt;Button android:id&#x3D;&quot;@+id&#x2F;bt_22&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot; android:text&#x3D;&quot;packed&quot; app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_21&quot; app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; Packed Chain with Bias 12345678910111213141516171819202122232425262728&lt;Button android:id=&quot;@+id/bt_30&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@android:color/holo_blue_light&quot; android:text=&quot;packedBias&quot; app:layout_constraintHorizontal_bias=&quot;0.2&quot; app:layout_constraintHorizontal_chainStyle=&quot;packed&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_31&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_31&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@android:color/holo_blue_light&quot; android:text=&quot;packedBias&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_30&quot; app:layout_constraintRight_toLeftOf=&quot;@+id/bt_32&quot; /&gt;&lt;Button android:id=&quot;@+id/bt_32&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@android:color/holo_blue_light&quot; android:text=&quot;packedBias&quot; app:layout_constraintLeft_toRightOf=&quot;@+id/bt_31&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt; Barrierç”¨äºŽæŽ§åˆ¶ Barrier ç›¸å¯¹äºŽç»™å®šçš„ View çš„ä½ç½®ï¼Œ app:barrierDirection=â€rightâ€,è¡¨ç¤ºbarrieråœ¨constraint_referenced_idsç»™å®šIDçš„å³ä¾§,constraint_referenced_idsçš„idå°±æ˜¯å·¦ä¾§çš„è¿™äº›æŽ§ä»¶ è¾“å…¥ä¿¡æ¯æŒºæœ‰ç”¨çš„ https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;android.support.constraint.ConstraintLayout android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_margin&#x3D;&quot;@dimen&#x2F;dimen_11&quot;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_order_num&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;è®¢å•ç¼–å·ï¼š10002220000001234&quot; android:textColor&#x3D;&quot;#ff999999&quot; android:textSize&#x3D;&quot;19sp&quot; app:layout_constraintTop_toTopOf&#x3D;&quot;parent&quot; app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot; &#x2F;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_order_pro&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot; android:text&#x3D;&quot;è®¢è´­äº§å“ï¼šçˆ±è¾¾åº·é«˜è¡€åŽ‹ç›‘æŠ¤æœåŠ¡&quot; android:textColor&#x3D;&quot;#ff666666&quot; android:textSize&#x3D;&quot;21sp&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_num&quot; &#x2F;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_service_team&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;æœåŠ¡å›¢é˜Ÿï¼šçˆ±è¾¾åº·è¿œç¨‹ç›‘æŠ¤å›¢é˜Ÿ&quot; android:textColor&#x3D;&quot;#ff666666&quot; android:textSize&#x3D;&quot;21sp&quot; app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_pro&quot; &#x2F;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_period_valid&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;æœ‰æ•ˆæœŸï¼š2019-03-01è‡³2019-12-31&quot; android:textColor&#x3D;&quot;#ff999999&quot; android:textSize&#x3D;&quot;19sp&quot; app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot; &#x2F;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_order_time&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot; android:text&#x3D;&quot;è®¢è´­æ—¶é—´ï¼š2019-03-11 12:00:00&quot; android:textColor&#x3D;&quot;#ff666666&quot; android:textSize&#x3D;&quot;21sp&quot; app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_period_valid&quot; &#x2F;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tv_order_count&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:text&#x3D;&quot;è®¢è´­æ•°é‡ï¼š500æ¬¡&quot; android:textColor&#x3D;&quot;#ff666666&quot; android:textSize&#x3D;&quot;21sp&quot; app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot; app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_time&quot; &#x2F;&gt; &lt;android.support.constraint.Barrier android:id&#x3D;&quot;@+id&#x2F;barrier&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; app:barrierDirection&#x3D;&quot;right&quot; app:constraint_referenced_ids&#x3D;&quot;tv_order_num,tv_order_pro,tv_service_team&quot; &#x2F;&gt; &lt;&#x2F;android.support.constraint.ConstraintLayout&gt; Dimensions constraintsYou can define minimum and maximum sizes for the ConstraintLayout itself: android:minWidth set the minimum width for the layout android:minHeight set the minimum height for the layout å¯ä»¥è®¾ç½®ç™¾åˆ†æ¯” Practiceéœ€æ±‚æ˜¯ç¾Žå¥³è·Ÿåœ¨æ–‡å­—åŽé¢ï¼Œå¦‚æžœæ–‡å­—å¤ªé•¿å°±ç”¨çœç•¥å· ä¸»è¦ç€ä¸¤ä¸ªå±žæ€§ 123app:layout_constrainedWidth=&quot;true&quot; // å¦‚æžœä¸ç”¨è¿™ä¸ªçº¦æŸï¼Œæ–‡å­—å¤ªé•¿,ä¼šæŠŠç›´æŽ¥åœ¨Learn moreåŽé¢app:layout_constraintHorizontal_bias=&quot;0&quot; // åŽ»æŽ‰å·¦è¾¹çš„çº¦æŸapp:layout_constraintHorizontal_chainStyle=&quot;packed&quot; // è®©æ–‡å­—å’Œç¾Žå¥³åœ¨ä¸€èµ· 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;ImageView android:id=&quot;@+id/iv_duitnow&quot; android:layout_width=&quot;36dp&quot; android:layout_height=&quot;36dp&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; app:layout_constraintStart_toStartOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;TextView android:id=&quot;@+id/tv_duit_text&quot; android:layout_width=&quot;0dp&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginStart=&quot;9dp&quot; android:textColor=&quot;#282828&quot; android:textSize=&quot;22sp&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintStart_toEndOf=&quot;@id/iv_duitnow&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; android:text=&quot;Reload via Transfer:&quot; /&gt;&lt;TextView android:id=&quot;@+id/tv_duitnow_id&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;4dp&quot; android:ellipsize=&quot;end&quot; android:lines=&quot;1&quot; android:textColor=&quot;#0064FF&quot; android:textSize=&quot;14sp&quot; app:layout_constrainedWidth=&quot;true&quot; app:layout_constraintEnd_toStartOf=&quot;@+id/img_copy&quot; app:layout_constraintHorizontal_bias=&quot;0&quot; app:layout_constraintHorizontal_chainStyle=&quot;packed&quot; app:layout_constraintStart_toStartOf=&quot;@+id/tv_duit_text&quot; app:layout_constraintTop_toBottomOf=&quot;@+id/tv_duit_text&quot; android:text=&quot;0124455660124455660124455666&quot; /&gt;&lt;ImageView android:id=&quot;@+id/img_copy&quot; android:layout_width=&quot;30dp&quot; android:layout_height=&quot;30dp&quot; android:scaleType=&quot;fitXY&quot; android:src=&quot;@drawable/meitu111e33&quot; app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot; app:layout_constraintEnd_toStartOf=&quot;@+id/bt_learn_more&quot; app:layout_constraintStart_toEndOf=&quot;@+id/tv_duitnow_id&quot; app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot; /&gt;&lt;TextView android:id=&quot;@+id/bt_learn_more&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:paddingLeft=&quot;15dp&quot; android:paddingTop=&quot;7dp&quot; android:background=&quot;@android:color/holo_blue_light&quot; android:paddingRight=&quot;15dp&quot; android:paddingBottom=&quot;7dp&quot; android:textSize=&quot;10sp&quot; android:textStyle=&quot;normal&quot; app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot; app:layout_constraintEnd_toEndOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot; android:text=&quot;Learn_More&quot; /&gt; https://blog.yorek.xyz/android/other/constraintlayout/#63-wrap_content-11 https://juejin.cn/post/6844903733948579847 https://jishuin.proginn.com/p/763bfbd5c73f","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"ConstraintLayout","slug":"ConstraintLayout","permalink":"https://noteforme.github.io/tags/ConstraintLayout/"}]},{"title":"tool_pc_phone","slug":"tool-miflash","date":"2017-10-13T15:22:47.000Z","updated":"2021-08-19T11:11:44.317Z","comments":true,"path":"2017/10/13/tool-miflash/","link":"","permalink":"https://noteforme.github.io/2017/10/13/tool-miflash/","excerpt":"","text":"miæ•‘ç –å‰ä¸¤å¤©ä¸å°å¿ƒæŠŠ æ–°ä¹°çš„å°ç±³ï¼”ç»™åˆ·æˆé»‘ç –äº†ï¼Œæˆ‘çš„æ“ä½œæ˜¯åŒå‡»ç£ç›˜æ¨¡å¼å·¥å…·ç›®å½•é‡Œçš„â€œæ¸…é™¤fastbootè¿›ç£ç›˜æ“ä½œ.batâ€è¿›å…¥ç£ç›˜æ¨¡å¼ ä½¿ç”¨è¿™ç§æ–¹å¼æŠŠfastbootæ¸…æŽ‰äº†ï¼Œç„¶åŽæ‰‹æœºéƒ½æ²¡æ³•è¿›å…¥fastbootæ¨¡å¼ï¼Œæ’å…¥ç”µè„‘æ— æ³•è¯†åˆ« æˆ‘çš„æ–¹æ³•è¿›å…¥æ–¹æ³•ä¸‰ï¼šé€šè¿‡çº¿åˆ·å‡çº§ ç‚¹ä»¥ä¸‹é“¾æŽ¥ http://www.miui.com/shuaji-393.html,ä¸‹è½½é€šç”¨åˆ·æœºå·¥å…·ï¼Œå®‰è£…åŽ(éœ€è¦ ä¸€æ®µæ—¶é—´)ï¼Œæ’ä¸Šå·²æˆç –æ‰‹æœºï¼Œwindowsè®¾å¤‡ç®¡ç†å™¨ ç«¯å£æˆ‘çš„æ˜¾ç¤º9006 ä¸‹è½½fastbootå®Œæ•´åŒ… ä¹Ÿæ˜¯åœ¨ä¸Šé¢é“¾æŽ¥è·¯å¾„ä¸‹é¢ ä¸‹è½½ miflash æˆ‘ä¸‹è½½çš„æ˜¯15ç‰ˆçš„miflash æ–°ç‰ˆ .batæ–‡ä»¶ä¸åŒä¼šæŠ¥å„ç§é”™è¯¯ é“¾æŽ¥: https://pan.baidu.com/s/1pKPLJdD å¯†ç : 94mi æ•‘æ´» é€‰æ‹©ä¸‹è½½çš„fastbootåŒ…ï¼Œåˆ·æœºï¼Œç„¶åŽæ˜¯ç­‰å¾… çœ‹åˆ°ä¸€ç¯‡æ–‡ç« é«˜é€šä¸‹æ•™ç¨‹ http://www.miui.com/thread-2689657-1-1.html Thinkpadæ›´æ¢å›ºæ€ç¡¬ç›˜ è§†é¢‘æ•™ç¨‹: https://v.qq.com/x/page/k0157zxhob1.html https://www.youtube.com/watch?v=Qgh5v6ccMOg http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0 æ–‡å­—æ•™ç¨‹: http://www.xinxunwei.com/bjbcj/2016/0119/5261.html Ubuntuç³»ç»Ÿå®‰è£…: https://blog.csdn.net/dkh_321/article/details/79304377","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"StateBar","slug":"StateBar","date":"2017-10-12T08:35:05.000Z","updated":"2022-05-06T11:24:51.263Z","comments":true,"path":"2017/10/12/StateBar/","link":"","permalink":"https://noteforme.github.io/2017/10/12/StateBar/","excerpt":"","text":"https://developer.android.com/training/appbar/setting-up.html https://github.com/xiewenfeng/statusbartextcolorchange https://mp.weixin.qq.com/s/NvmOlJzEkdrJREueIFd_DA ç›®å‰åªè¦è€ƒè™‘ 5.0ä»¥ä¸Šç³»ç»Ÿå°±å¯ä»¥äº†,æœ‰äº›flagè™½ç„¶è¢«æ ‡è®°ä¸ºDeprecated,ä½†æ˜¯ç³»ç»Ÿä¹Ÿè¿˜åœ¨ç”¨ï¼Œæ‰€ä»¥æœ‰å¿…è¦ç ”ç©¶ã€‚ statebarhttps://www.jianshu.com/p/f84f7e07e0d6 https://blog.csdn.net/u011200604/article/details/107959340 å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ ä¸»è¦è·Ÿä»¥ä¸‹å››ä¸ªApiç›¸å…³: View#setSystemUiVisibility() Window#addFlags() View#setFitsSystemWindows Window#setStatusBarColor() View#setSystemUiVisibility()åŠå…¶å„ç§Flagsé¦–å…ˆsetSystemUiVisibility()è¿™ä¸ªæ–¹æ³•å°±æ˜¯è®¾ç½®çŠ¶æ€æ æˆ–è€…å¯¼èˆªæ çš„å„ç§å±žæ€§çš„ï¼Œå“ªéƒ½æœ‰äº›å¯ä»¥è®¾ç½®çš„å±žæ€§å‘¢ï¼Ÿ View.SYSTEM_UI_FLAG_FULLSCREEN è§†å›¾å…¨å±å¹¶éšè—çŠ¶æ€æ ï¼Œå½“ç”¨æˆ·äº¤äº’æ—¶ï¼ˆå¦‚ä¸‹æ»‘çŠ¶æ€æ ï¼‰ä¼šæ¢å¤éšè—çš„çŠ¶æ€æ ï¼ˆä¾‹å­ï¼šç”µå­ä¹¦é˜…è¯»ï¼‰ç¼ºç‚¹ï¼šè¿›å…¥Activityä¼šäº§ç”Ÿä¸€ä¸ªä»Žéžå…¨å±åˆ°å…¨å±çš„é—ªåŠ¨æ•ˆæžœ View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY ç²˜æ€§æ²‰æµ¸æ¨¡å¼ï¼Œéœ€è¦å’ŒSYSTEM_UI_FLAG_FULLSCREENæˆ–è€…SYSTEM_UI_FLAG_HIDE_NAVIGATIONè”ç”¨ï¼Œå½“ä½¿ç”¨View.setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)è”ç”¨æ—¶è§†å›¾å…¨å±ï¼Œå½“ç”¨æˆ·äº§ç”Ÿäº¤äº’æ—¶ï¼ˆå¦‚ä¸‹æ»‘çŠ¶æ€æ ï¼‰ä¸ä¼šæ¢å¤çŠ¶æ€æ ï¼Œåªä¼šä»¥åŠé€æ˜Žçš„æ–¹å¼è¦†ç›–åœ¨è§†å›¾ä¸Šé¢å¹¶åœ¨ä¸€å®šæ—¶é—´å†…è‡ªåŠ¨æ¶ˆå¤± 1getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY) View.SYSTEM_UI_FLAG_IMMERSIVEï¼š æ²‰æµ¸æ¨¡å¼ï¼Œåªèƒ½å’ŒView.SYSTEM_UI_FLAG_FULLSCREENè”ç”¨ï¼Œæ•ˆæžœå’ŒView.SYSTEM_UI_FLAG_IMMERSIVE_STICKYä¸€æ ·ï¼Œç›®å‰å·²è¢«åŽè€…æ›¿ä»£ã€‚ View.SYSTEM_UI_FLAG_LOW_PROFILE: ä½Žé…æ¨¡å¼ï¼Œä¼šéšè—ä¸€äº›ä¸é‡è¦çš„çŠ¶æ€æ å’Œå¯¼èˆªæ çš„å›¾æ ‡,(ç”¨æ¨¡æ‹Ÿå™¨è·‘ï¼Œåªå‰©ä¸‹ç”µæ± äº†) View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREENï¼š è§†å›¾å…¨å±ä¸”ä¸ä¼šäº§ç”Ÿé—ªåŠ¨ï¼Œå¦‚æžœæ²¡æœ‰toolbar,contentviewä¼šå ä½statebarçš„ä½ç½®ï¼ŒçŠ¶æ€æ ä¼šè¦†ç›–åœ¨contentviewä¸Šé¢. 1234567891011var isWhite = falsefun change_statebar_element_color(view: View) &#123; if (isWhite) &#123; window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE //statebar å…ƒç´ æ˜¾ç¤ºç™½è‰² isWhite = false &#125; else &#123; window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN or SYSTEM_UI_FLAG_LIGHT_STATUS_BAR //æ˜¾ç¤ºé»‘è‰² isWhite = true &#125;&#125; View.SYSTEM_UI_FLAG_LAYOUT_STABLEï¼š ä½¿è§†å›¾ç¨³å®šï¼Œå½“ä½¿ç”¨fitSystemWindowsï¼ˆï¼‰ï¼ˆä¸‹é¢ä¼šä»‹ç»è¿™ä¸ªæ–¹æ³•ï¼‰éœ€è¦è§†å›¾ç¨³å®šï¼Œä¸€èˆ¬å’ŒSYSTEM_UI_FLAG_LAYOUT_FULLSCREENè”ç”¨,æˆ‘ä½¿ç”¨è¿™ä¸ªå±žæ€§åŽï¼Œèƒ½ä½¿statebarçš„ç”µæ± æ¡å˜æˆç™½è‰²ã€‚ View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR: Android6.0ç³»ç»Ÿä»¥ä¸Šå¢žåŠ çš„å±žæ€§ï¼Œè®¾ç½®äº†è¿™ä¸ªå±žæ€§ï¼ŒçŠ¶æ€æ ä¼šä»¥ä¸ŽçŠ¶æ€æ èƒŒæ™¯é¢œè‰²å…¼å®¹çš„æ¨¡å¼ç»˜åˆ¶ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¦‚æžœå½“å‰çš„çŠ¶æ€æ é¢œè‰²æ˜¯æµ…è‰²ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½é€ æˆçŠ¶æ€æ ä¸Šçš„å›¾æ ‡çœ‹ä¸æ¸…äº†ï¼Œä½†æ˜¯å¦‚æžœä½ è®¾ç½®è¿™ä¸ªå±žæ€§ä»¥åŽï¼ŒçŠ¶æ€æ çš„å›¾æ ‡å°±ä¼šä»¥æ·±è‰²ç»˜åˆ¶ï¼Œè¿™æ ·å°±æ²¡æœ‰ä»€ä¹ˆUIä¸Šçš„é—®é¢˜äº†ã€‚ Window#addFlags()è¿™ç§æ–¹å¼æ„Ÿè§‰æ˜¯setSystemUiVisibilityä¹‹å‰çš„ç”¨æ³•äº†ã€‚ WindowManager.LayoutParamsç›¸å…³å±žæ€§ï¼š FLAG_TRANSLUCENT_STATUS: Android4.4ç³»ç»Ÿå¢žåŠ çš„å±žæ€§ï¼Œå®ƒä¼šä½¿çŠ¶æ€æ é€æ˜Ž,å¹¶ä¸”è‡ªåŠ¨æ‰§è¡ŒView.SYSTEM_UI_FLAG_LAYOUT_STABLEå’ŒView.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN FLAG_FULLSCREEN: è§†å›¾å…¨å±å¹¶éšè—çŠ¶æ€æ ï¼Œæ•ˆæžœç›¸å½“äºŽView.SYSTEM_UI_FLAG_FULLSCREEN+View.SYSTEM_UI_FLAG_IMMERSIVE_STICKYï¼Œå¹¶ä¸”è§†å›¾ç¨³å®šï¼ˆä¸ä¼šå› ä¸ºç³»ç»ŸæŽ§ä»¶çš„å˜åŒ–ï¼ˆå¦‚è¾“å…¥æ³•ï¼‰ï¼Œè€Œé‡æ–°å¸ƒå±€ï¼‰ FLAG_FORCE_NOT_FULLSCREENï¼š é‡å†™äº†FLAG_FULLSCREENå¹¶å¼ºåˆ¶æ˜¾ç¤ºçŠ¶æ€æ ï¼ˆæ²¡æœ‰å•¥ç”¨ï¼‰ FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDSï¼š Android5.0ç³»ç»Ÿä»¥ä¸Šæ”¯æŒï¼Œå¦‚æžœè®¾ç½®äº†è¯¥å±žæ€§ï¼Œç³»ç»Ÿæ ï¼ˆçŠ¶æ€æ å’Œå¯¼èˆªæ ï¼‰å°†ä»¥é€æ˜ŽèƒŒæ™¯ç»˜åˆ¶ï¼Œå¹¶ä¸”è¯¥çª—å£ä¸­çš„ç›¸åº”åŒºåŸŸå°†å¡«å……setStatusBarï¼ˆï¼‰å’ŒsetNavigationBarColorï¼ˆï¼‰ä¸­è®¾ç½®çš„é¢œè‰²ã€‚ çŽ°åœ¨é¡¹ç›®å°±æ˜¯ç”¨è¿™ç§æ–¹å¼ã€‚ æ„Ÿè§‰è¿™ä¹Ÿæ˜¯è®¾ç½®stateBaré¢œè‰²ä¸€ç§ä¸»è¦çš„æ–¹å¼ã€‚ å¦ä¸€ç§å°±æ˜¯è‡ªå·±è®¾ç½®statebaré¢œè‰²ã€‚ å‡ ç§å…¨å±æ¨¡å¼Lean backå€¾æ–œæ¨¡å¼ When users want to bring back the system bars, they simply tap the screen anywhere. 12window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION è½»è§¦å±å¹• ä¼šæ˜¾ç¤º åº•éƒ¨å¯¼èˆªå¦‚è¿”å›žæŒ‰é’® Immersiveæ²‰æµ¸æ¨¡å¼ï¼šä»Žè¾¹ç¼˜æ»‘åŠ¨ï¼Œæ˜¾ç¤ºç³»ç»ŸBar,ä¹Ÿå¯ä»¥é€šè¿‡å›žè°ƒæ˜¾ç¤ºç³»ç»ŸæŽ§ä»¶ 12window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or SYSTEM_UI_FLAG_IMMERSIVE Sticky immersiveä»Žè¾¹ç¼˜æ»‘åŠ¨ï¼Œæ˜¾ç¤ºç³»ç»ŸBar,statebar.åˆæ¢å¤äº†ã€‚ 12window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or SYSTEM_UI_FLAG_IMMERSIVE_STICKY https://developer.android.com/training/system-ui/immersive android 11 systemUiVisibilityè¿‡æœŸéœ€è¦æ›´æ–° Statabar Color Application AppTheme statusBarColor 1234567&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt; &lt;!-- Customize your theme here. --&gt; &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt; &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt; &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt; &lt;item name=&quot;android:statusBarColor&quot;&gt; @android:color/white&lt;/item&gt;&lt;/style&gt; Activityè®¾ç½® 123456789if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.R) &#123; window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR&#125; else &#123; window.insetsController?.setSystemBarsAppearance( WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS, WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS )&#125; Statabar element Colorä¸¤ç§æ–¹å¼ systemUiVisibility123window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE //statebar å…ƒç´ æ˜¾ç¤ºç™½è‰²window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LIGHT_STATUS_BAR //æ˜¾ç¤ºé»‘è‰² ä¸»é¢˜é…ç½®&gt;231&lt;item name=&quot;android:windowLightStatusBar&quot;&gt;false&lt;/item&gt; false : ç™½è‰² true : é»‘è‰² https://developer.android.com/training/system-ui https://blog.csdn.net/shanshui911587154/article/details/86623646 WindowInsetsControllerAndroid11 ä½¿ç”¨ statabar text color123456789101112131415@RequiresApi(Build.VERSION_CODES.R)fun AppearanceLightStatusBars(view: android.view.View) &#123; if (isWhite) &#123; controller?.setSystemBarsAppearance( WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS, WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS ) &#125; else &#123; controller?.setSystemBarsAppearance( 0, WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS ) &#125; isWhite = !isWhite&#125; statebar hide12345678910var isHide = true@RequiresApi(Build.VERSION_CODES.R)fun hide_state_bar(view: android.view.View) &#123; if (isHide) &#123; controller?.hide(WindowInsetsCompat.Type.statusBars()) &#125; else &#123; controller?.show(WindowInsetsCompat.Type.statusBars()) &#125; isHide = !isHide&#125; https://blog.csdn.net/jingzz1/article/details/111468726 https://juejin.cn/post/6940048488071856164 https://blog.csdn.net/qq_39038178/article/details/119657376 https://segmentfault.com/a/1190000022129198 ToolBaré¢œè‰²è®¾ç½® AppThemeä¸‹çš„è®¾ç½® 12345678&lt;application android:name=&quot;.application.NBBApplication&quot; android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/icon&quot; android:label=&quot;@string/app_name&quot; android:supportsRtl=&quot;true&quot; android:theme=&quot;@style/AppTheme&quot;&gt; Toolbaré¢œè‰²:&lt;item name=&quot;colorPrimary&quot;&gt;@color/toolbar_color&lt;/item&gt; çŠ¶æ€æ è®¾ç½® :&lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt; åœ¨ API 19 åŠæ›´é«˜ç‰ˆæœ¬ä¸Šï¼ŒToolbar å†…å®¹å»¶ä¼¸è‡³çŠ¶æ€æ ä¸ŠåŽ»äº†, statebaræŠŠtoolbarç»™è¦†ç›–äº† è¦è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ä¸‹é¢çš„å±žæ€§ android:fitsSystemWindows =â€trueâ€ è¿™ä¸ªå±žæ€§èƒ½ä¿æŒä¸Žstatebarä¸€å®š çš„padding,èƒ½è§£å†³ä¸Šé¢windowTranslucentStatusçš„é‡å é—®é¢˜ å‚è€ƒ: äº¦æž« åŽ»æŽ‰é˜´å½±çº¿ toolbaråº•éƒ¨ä¼šæœ‰ä¸€æ¡é˜´å½±çº¿,é€šè¿‡AppBarLayoutæ ‡ç­¾ä¸‹çš„app:elevation=â€0dpâ€åŽ»æŽ‰ è‡ªå®šä¹‰è¿”å›žé”® mToolbar.setNavigationIcon(R.mipmap.ic_back);//è‡ªå®šä¹‰è¿”å›žé”® æˆ–è€…è¿™æ ·è®¾ç½® app:navigationIcon=&quot;@mipmap/ic_back&quot; toolbar.xmlè§£è¯»123456789101112131415161718192021222324252627&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;&lt;android.support.design.widget.AppBarLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot; xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot; android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;wrap_content&quot; app:elevation&#x3D;&quot;0dp&quot;&gt; &#x2F;&#x2F;è®¾ç½®ä»°è§’,0dpå¯ä»¥åŽ»æŽ‰åº•éƒ¨çš„çº¿ &lt;android.support.v7.widget.Toolbar android:layout_width&#x3D;&quot;match_parent&quot; android:layout_height&#x3D;&quot;?attr&#x2F;actionBarSize&quot; android:minHeight&#x3D;&quot;?actionBarSize&quot; android:theme&#x3D;&quot;@style&#x2F;ThemeOverlay.AppCompat.ActionBar&quot; &#x2F;&#x2F;toolbarä¸»é¢˜ app:popupTheme&#x3D;&quot;@style&#x2F;ThemeOverlay.AppCompat.Light&quot;&gt; &lt;TextView android:id&#x3D;&quot;@+id&#x2F;tb_title&quot; style&#x3D;&quot;@style&#x2F;TextAppearance.AppCompat.Widget.ActionBar.Title&quot; android:layout_width&#x3D;&quot;wrap_content&quot; android:layout_height&#x3D;&quot;wrap_content&quot; android:layout_gravity&#x3D;&quot;center&quot; android:text&#x3D;&quot;æ ‡é¢˜&quot; android:textColor&#x3D;&quot;#333333&quot; android:textSize&#x3D;&quot;18sp&quot; &#x2F;&gt; &lt;&#x2F;android.support.v7.widget.Toolbar&gt;&lt;&#x2F;android.support.design.widget.AppBarLayout&gt; è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯åœ¨applicationè®¾ç½®ï¼Œè¿™æ ·å°±ä¸ç”¨é›†æˆbaseActivity http://blog.csdn.net/a553181867/article/details/51336899 menuè®¾ç½®AppBarLayoutä¸‹çš„ app:theme=&quot;@style/toolbar_menu&quot;ç”¨äºŽè®¾ç½®menu menuå­—ä½“é¢œè‰²éœ€è¦è®¾ç½® app:theme ,ç”¨ android:themeä¸èµ·ä½œç”¨. &lt;item name=&quot;android:actionMenuTextColor&quot;&gt;@color/text_my_black&lt;/item&gt; menuäº‹ä»¶@Override public boolean onCreateOptionsMenu(Menu menu) &#123; getMenuInflater().inflate(R.menu.menu_login, menu); menu.findItem(R.id.item_right_text).setTitle(&quot;æ³¨å†Œ&quot;); //è®¾ç½®æ–‡å­— return true; &#125; @Override public boolean onOptionsItemSelected(MenuItem item) &#123; switch (item.getItemId()) &#123; break; &#125; return super.onOptionsItemSelected(item); &#125; https://blog.csdn.net/guyuealian/article/details/51721167 ä½¿ç”¨toolbarè¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ é—®é¢˜ 1 å¼¹å‡ºé”®ç›˜åŽ editextä¸è§äº†ï¼Œåº”è¯¥æ˜¯toolbarè¢«æ‹‰ä¼¸äº† æš‚æ—¶è§£å†³æ–¹å¼: 12345&lt;activity android:name=&quot;.activity.WebActivity&quot; android:hardwareAccelerated=&quot;true&quot; android:screenOrientation=&quot;portrait&quot; android:windowSoftInputMode=&quot;adjustPan&quot; /&gt; https://github.com/CoolThink/StatusBarAdapt/issues/2 fragmentä½¿ç”¨toolbarhttp://wuxiaolong.me/2015/12/21/fragmentToolbar/ ä¸‰æ¡çº¿çš„é¢œè‰²ä¿®æ”¹1234&lt;style name=&quot;DrawerArrowStyle&quot; parent=&quot;Base.Widget.AppCompat.DrawerArrowToggle&quot;&gt; &lt;item name=&quot;spinBars&quot;&gt;true&lt;/item&gt; &lt;item name=&quot;color&quot;&gt;@android:color/white&lt;/item&gt;&lt;/style&gt; å…·ä½“å¯ä»¥æŸ¥çœ‹mineutil:PopupWindowActivity æº¢å‡ºèœå•ä¸‰ä¸ªç‚¹ç¦»å³è¾¹çš„è·ç¦» AppThemeä¸­è®¾ç½® 1234567&lt;item name=&quot;android:actionOverflowButtonStyle&quot;&gt;@style/OverflowMenuStyle&lt;/item&gt; &lt;style name=&quot;OverflowMenuStyle&quot; parent=&quot;Widget.AppCompat.Light.PopupMenu.Overflow&quot;&gt; &lt;item name=&quot;overlapAnchor&quot;&gt;false&lt;/item&gt; &lt;!--æŠŠè¯¥å±žæ€§æ”¹ä¸ºfalseå³å¯ä½¿menuä½ç½®ä½äºŽtoolbarä¹‹ä¸‹--&gt; &lt;item name=&quot;android:src&quot;&gt;@mipmap/doc_ic_new_patient&lt;/item&gt; &lt;item name=&quot;android:paddingRight&quot;&gt;15dp&lt;/item&gt; &lt;/style&gt; æ“ä½œç¬¦ æè¿° ä¾‹å­ ï¼† å¦‚æžœç›¸å¯¹åº”ä½éƒ½æ˜¯1ï¼Œåˆ™ç»“æžœä¸º1ï¼Œå¦åˆ™ä¸º0 ï¼ˆAï¼†Bï¼‰ï¼Œå¾—åˆ°12ï¼Œå³0000 1100 | å¦‚æžœç›¸å¯¹åº”ä½éƒ½æ˜¯ 0ï¼Œåˆ™ç»“æžœä¸º 0ï¼Œå¦åˆ™ä¸º 1 ï¼ˆA | Bï¼‰å¾—åˆ°61ï¼Œå³ 0011 1101 ^ å¦‚æžœç›¸å¯¹åº”ä½å€¼ç›¸åŒï¼Œåˆ™ç»“æžœä¸º0ï¼Œå¦åˆ™ä¸º1 ï¼ˆA ^ Bï¼‰å¾—åˆ°49ï¼Œå³ 0011 0001 https://noteforme.github.io/2018/01/07/Operators/ Support display cutoutsåˆ˜æµ·å± https://developer.android.com/guide/topics/display-cutout https://blog.csdn.net/m0_64314432/article/details/121437314 https://developer.android.com/guide/topics/display-cutout?authuser=1 123456789101112131415161718192021222324252627@TargetApi(28)fun getNotchParams() &#123; val decorView: View = window.decorView if (decorView != null) &#123; decorView.post(Runnable &#123; val windowInsets: WindowInsets = decorView.rootWindowInsets if (windowInsets != null) &#123; // å½“å…¨å±é¡¶éƒ¨æ˜¾ç¤ºé»‘è¾¹æ—¶ï¼ŒgetDisplayCutout()è¿”å›žä¸ºnull val displayCutout = windowInsets.displayCutout Log.e(&quot;TAG&quot;, &quot;å®‰å…¨åŒºåŸŸè·ç¦»å±å¹•å·¦è¾¹çš„è·ç¦» SafeInsetLeft:&quot; + displayCutout!!.safeInsetLeft) Log.e(&quot;TAG&quot;, &quot;å®‰å…¨åŒºåŸŸè·ç¦»å±å¹•å³éƒ¨çš„è·ç¦» SafeInsetRight:&quot; + displayCutout.safeInsetRight) Log.e(&quot;TAG&quot;, &quot;å®‰å…¨åŒºåŸŸè·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦» SafeInsetTop:&quot; + displayCutout.safeInsetTop) Log.e(&quot;TAG&quot;, &quot;å®‰å…¨åŒºåŸŸè·ç¦»å±å¹•åº•éƒ¨çš„è·ç¦» SafeInsetBottom:&quot; + displayCutout.safeInsetBottom) // èŽ·å¾—åˆ˜æµ·åŒºåŸŸ val rects: List&lt;Rect&gt; = displayCutout.boundingRects if (rects == null || rects.isEmpty()) &#123; Log.e(&quot;TAG&quot;, &quot;ä¸æ˜¯åˆ˜æµ·å±&quot;) &#125; else &#123; Log.e(&quot;TAG&quot;, &quot;åˆ˜æµ·å±æ•°é‡:&quot; + rects.size) for (rect in rects) &#123; Log.e(&quot;TAG&quot;, &quot;åˆ˜æµ·å±åŒºåŸŸï¼š$rect&quot;) &#125; &#125; &#125; &#125;) &#125;&#125; éª¨æž¶å±åŠ è½½æ•ˆæžœhttps://juejin.cn/post/6963143268448239653 https://github.com/ethanhua/Skeleton https://www.jianshu.com/p/ded3c7e8adfe DialogFragment ä¿®æ”¹åº•éƒ¨å¯¼èˆªäº† https://www.jianshu.com/p/e28a54b44bdc","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"DesignPattern-Builder","slug":"DesignPattern_Builder","date":"2017-10-07T09:45:46.000Z","updated":"2024-10-01T11:59:22.050Z","comments":true,"path":"2017/10/07/DesignPattern_Builder/","link":"","permalink":"https://noteforme.github.io/2017/10/07/DesignPattern_Builder/","excerpt":"","text":"Builderæ¨¡å¼ä¸ç›´æŽ¥ç”Ÿæˆæƒ³è¦çš„å¯¹è±¡ï¼Œè€Œæ˜¯è®©å®¢æˆ·ç«¯åˆ©ç”¨æ‰€æœ‰å¿…è¦çš„å‚æ•°è°ƒç”¨æž„é€ å™¨ï¼ˆæˆ–è€…é™æ€å·¥åŽ‚ï¼‰ï¼Œå¾—åˆ°ä¸€ä¸ªbuilderå¯¹è±¡ï¼Œç„¶åŽå®¢æˆ·ç«¯åœ¨builderå¯¹è±¡ä¸Šè°ƒç”¨ç±»ä¼¼äºŽsetterçš„æ–¹æ³•ï¼Œæ¥è®¾ç½®æ¯ä¸ªç›¸å…³çš„å¯é€‰å‚æ•° æ—¢èƒ½ä¿è¯åƒé‡å æž„é€ å™¨æ¨¡å¼é‚£æ ·çš„å®‰å…¨æ€§ï¼Œä¹Ÿèƒ½ä¿è¯åƒJavaBeansæ¨¡å¼é‚£ä¹ˆå¥½çš„å¯è¯»æ€§ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class NutritionFacts_03_Builder &#123; private final int servingSize; private final int servings; private final int calories; private final int fat; private final int sodium; private final int carbohydrate; public static class Builder&#123; //Required parameters private final int servingSize; private final int servings; //Optional parameters = initialized to default values private int calories = 0; private int fat = 0; private int carbohydrate = 0; private int sodium = 0; public Builder(int servingSize, int servings) &#123; this.servingSize = servingSize; this.servings = servings; &#125; public Builder calories(int val)&#123; calories = val; return this; &#125; public Builder fat(int val)&#123; this.fat = fat; return this; &#125; public Builder carbohydrate(int val)&#123; carbohydrate = val; return this; &#125; public Builder sodium(int val)&#123; sodium = val; return this; &#125; public NutritionFacts_03_Builder build()&#123; return new NutritionFacts_03_Builder(this); &#125; &#125; private NutritionFacts_03_Builder(Builder builder) &#123; this.servingSize = builder.servingSize; this.servings = builder.servings; this.calories = builder.calories; this.fat = builder.fat; this.sodium = builder.sodium; this.carbohydrate = builder.carbohydrate; &#125; public static void main(String[] args) &#123; NutritionFacts_03_Builder cocaCola = new NutritionFacts_03_Builder.Builder(240,9) .calories(100).sodium(35).carbohydrate(27).build(); &#125;&#125; è¿”å›žçš„thisæ—¶æ€Žä¹ˆæ›¿ä»£å¯¹è±¡çš„ å¯¹è±¡åˆ›å»ºæ›´åŠ çµæ´»å½“ isRef ä¸º true çš„æ—¶å€™ï¼Œarg è¡¨ç¤º String ç±»åž‹çš„ refBeanIdï¼Œtype ä¸éœ€è¦è®¾ç½®ï¼›å½“ isRef ä¸º false çš„æ—¶å€™ï¼Œargã€type éƒ½éœ€è¦è®¾ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class ConstructorArg &#123; private boolean isRef; private Class type; private Object arg; private ConstructorArg(Builder builder) &#123; this.isRef = isRef; this.type = type; this.arg = arg; &#125; public static class Builder &#123; private static boolean isRef; private static Class type; private static Object arg; public Builder(boolean isRef) &#123; this.isRef = isRef; &#125; public Builder setType(Class type) &#123; this.type = type; return this; &#125; public Builder setArg(Object arg) &#123; this.arg = arg; return this; &#125; public ConstructorArg build() &#123; if (isRef) &#123; if (!(arg instanceof String)) &#123; //è¿™é‡ŒrefBeanIdæ˜¯ConstructorArgå—ï¼Ÿåªæ˜¯åˆ¤æ–­äº†ä¸‹argç±»åž‹æ˜¯å¦ä¸ºString throw new IllegalArgumentException(&quot;å½“ isRef ä¸º true çš„æ—¶å€™ï¼Œarg è¡¨ç¤º String ç±»åž‹refBeanId&quot;); &#125; if (type != null) &#123; throw new IllegalArgumentException(&quot;å½“ isRef ä¸º true çš„æ—¶å€™ï¼Œtype ä¸éœ€è¦è®¾ç½®&quot;); &#125; &#125; if (!isRef) &#123; if (arg == null || type == null) &#123; throw new IllegalArgumentException(&quot;å½“ isRef ä¸º false çš„æ—¶å€™ï¼Œargã€type éƒ½éœ€è¦è®¾ç½®&quot;); &#125; &#125; return new ConstructorArg(this); &#125; &#125;&#125;","categories":[{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"}],"tags":[]},{"title":"Fragment","slug":"Fragment","date":"2017-10-05T11:54:50.000Z","updated":"2023-09-04T00:33:26.027Z","comments":true,"path":"2017/10/05/Fragment/","link":"","permalink":"https://noteforme.github.io/2017/10/05/Fragment/","excerpt":"","text":"https://juejin.cn/post/6970998913754988552#heading-16 https://developer.android.com/reference/android/app/Fragment.html https://developer.android.com/guide/components/fragments.html https://www.51cto.com/article/672135.html https://juejin.cn/post/7021398731056480269 12345678static final int INVALID_STATE &#x3D; -1; &#x2F;&#x2F; ä¸ºç©ºæ—¶æ— æ•ˆstatic final int INITIALIZING &#x3D; 0; &#x2F;&#x2F; æœªåˆ›å»ºstatic final int CREATED &#x3D; 1; &#x2F;&#x2F; å·²åˆ›å»ºï¼Œä½äºŽåŽå°static final int ACTIVITY_CREATED &#x3D; 2; &#x2F;&#x2F; Activityå·²ç»åˆ›å»ºï¼ŒFragmentä½äºŽåŽå°static final int STOPPED &#x3D; 3; &#x2F;&#x2F; åˆ›å»ºå®Œæˆï¼Œæ²¡æœ‰å¼€å§‹static final int STARTED &#x3D; 4; &#x2F;&#x2F; å¼€å§‹è¿è¡Œï¼Œä½†æ˜¯ä½äºŽåŽå°static final int RESUMED &#x3D; 5; &#x2F;&#x2F; æ˜¾ç¤ºåˆ°å‰å° ä½œè€…ï¼šå°æ¾æ¼«æ­¥é“¾æŽ¥ï¼šhttps://juejin.cn/post/7021398731056480269 ä¸‹é¢çš„lifecycleä¹Ÿå¯ä»¥çœ‹åˆ°,fragmentç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€è½¬ç§»ã€‚ Lifecyclehttps://developer.android.com/guide/fragments/lifecycle onViewCreated(View view, Bundle savedInstanceState) Called immediately after onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle) has returned, but before any saved state has been restored in to the view. çŠ¶æ€è½¬ç§»Fragment 123456789static final int INITIALIZING = -1; // Not yet attached.static final int ATTACHED = 0; // Attached to the host.static final int CREATED = 1; // Created.static final int VIEW_CREATED = 2; // View Created.static final int AWAITING_EXIT_EFFECTS = 3; // Downward state, awaiting exit effectsstatic final int ACTIVITY_CREATED = 4; // Fully created, not started.static final int STARTED = 5; // Created and started, not resumed.static final int AWAITING_ENTER_EFFECTS = 6; // Upward state, awaiting enter effectsstatic final int RESUMED = 7; // Created started and resumed. è¿™ä¸ªå›¾å’ŒçŽ°åœ¨fragmentçŠ¶æ€æœ‰ç‚¹ä¸åŒï¼ŒçŽ°åœ¨æ–°å¢žäº†ä¸€äº›çŠ¶æ€ï¼Œæœ‰å¿…è¦çš„è¯ï¼Œè‡ªå·±ç ”ç©¶ç»˜åˆ¶ä¸€å¼ ã€‚ commit1234commit();commitAllowingStateLoss();commitNow();commitNowAllowingStateLoss(); commitAllowingStateLoss VS commit()å¯ä»¥çœ‹åˆ° allowStateLoss å¦‚æžœæ˜¯falseï¼ŒmHost,mDestroyed=true,å°±ä¼šcrashäº†,å¦åˆ™åªæ˜¯returnäº†,æ‰€ä»¥ä»Žè¿™é‡Œçœ‹ï¼Œä»–ä»¬åŒºåˆ«ä¸å¤§ã€‚ 123456789101112131415161718192021222324void enqueueAction(@NonNull OpGenerator action, boolean allowStateLoss) &#123; if (!allowStateLoss) &#123; if (mHost == null) &#123; if (mDestroyed) &#123; throw new IllegalStateException(&quot;FragmentManager has been destroyed&quot;); &#125; else &#123; throw new IllegalStateException(&quot;FragmentManager has not been attached to a &quot; + &quot;host.&quot;); &#125; &#125; checkStateLoss(); &#125; synchronized (mPendingActions) &#123; if (mHost == null) &#123; if (allowStateLoss) &#123; // This FragmentManager isn&#x27;t attached, so drop the entire transaction. return; &#125; throw new IllegalStateException(&quot;Activity has been destroyed&quot;); &#125; mPendingActions.add(action); scheduleCommit(); &#125;&#125; https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/ commitNow VS commit()FragmentFragment tag1234567891011121314151617181920212223ArrayList&lt;Op&gt; mOps &#x3D; new ArrayList&lt;&gt;();void doAddOp(int containerViewId, Fragment fragment, @Nullable String tag, int opcmd) &#123; if (tag !&#x3D; null) &#123; if (fragment.mTag !&#x3D; null &amp;&amp; !tag.equals(fragment.mTag)) &#123; throw new IllegalStateException(&quot;Can&#39;t change tag of fragment &quot; + fragment + &quot;: was &quot; + fragment.mTag + &quot; now &quot; + tag); &#125; fragment.mTag &#x3D; tag; &#125; if (containerViewId !&#x3D; 0) &#123; if (fragment.mFragmentId !&#x3D; 0 &amp;&amp; fragment.mFragmentId !&#x3D; containerViewId) &#123; throw new IllegalStateException(&quot;Can&#39;t change container ID of fragment &quot; + fragment + &quot;: was &quot; + fragment.mFragmentId + &quot; now &quot; + containerViewId); &#125; fragment.mContainerId &#x3D; fragment.mFragmentId &#x3D; containerViewId; &#125; addOp(new Op(opcmd, fragment));&#125; æœ€ç»ˆæ˜¯æŠŠ fragmentåŠ å…¥åˆ° mOps ä¸­ Fragmentæœ¬è´¨æ˜¯View ã€Œå½“ç„¶äº†Fragmentæœ¬è´¨æ˜¯Viewä½†æ˜¯åˆä¸ä»…é™äºŽæ­¤ï¼Œã€ åœ¨çœŸå®žçš„é¡¹ç›®ä¸­ï¼Œç•Œé¢å¾€å¾€å¾ˆå¤æ‚ï¼Œä¸šåŠ¡é€»è¾‘ä¹Ÿå¾ˆå¤æ‚ï¼Œå¾€å¾€éœ€è¦å¤„ç†å„ç§UIçŠ¶æ€å˜åŒ–ï¼Œæ¯”å¦‚ï¼šå¢žåŠ ä¸€ç»„Viewï¼Œæ›¿æ¢ä¸€ç»„Viewï¼Œåˆ é™¤ä¸€ç»„Viewï¼Œè¿˜éœ€è¦å’ŒActivityåä½œã€‚æ€»ä¹‹ï¼Œå¦‚æžœè®©å¼€å‘è€…è‡ªå·±åŽ»å®žçŽ°è¿™ä¸€å¥—é€»è¾‘ï¼Œææ€•æ¯”ä½¿ç”¨Fragmentè¦éº»çƒ¦çš„å¤šå§ã€‚å°½ç®¡Fragmentçœ‹èµ·æ¥è›®å¤æ‚çš„ï¼Œä½†æ˜¯è¿˜æ˜¯è¿œæ¯”æˆ‘ä»¬è‡ªå·±åŽ»å®žçŽ°ç›¸åŒåŠŸèƒ½ç®€å•çš„å¤šã€‚ 3.1.2 Fragmentæœ¬è´¨ä¸ä»…é™äºŽView Fragmentä½œä¸ºä¸€ä¸ªViewå¯ä»¥è¢«æ·»åŠ åˆ°Activityçš„å¸ƒå±€ä¸­åŽ»ã€‚ä½†æ˜¯ä»–æ›´å¼ºå¤§ï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š å¤„ç†ç”Ÿå‘½å‘¨æœŸï¼Œæ¯”Activityç”Ÿå‘½å‘¨æœŸè¿˜è¦å¤æ‚ é€šè¿‡FragmentTransactionæ“ä½œå¤šä¸ªFragment é€šè¿‡FragmentManagerç»´æŠ¤ä¸€ä¸ªå›žé€€æ ˆï¼Œå›žé€€åˆ°ä¸Šä¸€ä¸ªFragmentTransactionæ“ä½œçš„ç•Œé¢ https://www.51cto.com/article/672135.html commit() vs commitAllowingStateLoss() commit()å’ŒcommitAllowingStateLoss()åœ¨å®žçŽ°ä¸Šå”¯ä¸€çš„ä¸åŒå°±æ˜¯å½“ä½ è°ƒç”¨commit()çš„æ—¶å€™, FragmentMangerä¼šæ£€æŸ¥mDestory, mHost å¦‚æžœmHost ==null, å°±æŠ›å‡ºIllegalStateException. https://juejin.cn/post/7063377212736536607 FragmentPagerAdapterä¸ŽFragmentStatePagerAdapterçš„åŒºåˆ« FragmentPagerAdapteré€‚ç”¨äºŽé¡µé¢è¾ƒå°‘çš„æƒ…å†µï¼ŒdestroyItemæ–¹æ³•ä¸­åªæ˜¯è°ƒç”¨äº†fragmentransactionçš„detachæ–¹æ³• FragmentStatePagerAdapteré€‚ç”¨äºŽé¡µé¢è¾ƒå¤šçš„æƒ…å†µï¼Œæ¯æ¬¡åˆ‡æ¢ViewPagerçš„æ—¶å€™æ˜¯å›žæ”¶å†…å­˜çš„ã€‚destroyItemè°ƒç”¨äº†fragmentransactionçš„removeæ–¹æ³• Fragment å„ä¸ªæ–¹æ³•ç»†èŠ‚ https://fuhongliang.gitbooks.io/android/content/di-shi-san-zhang-mian-shi-ti/mu-ke-wang-quan-mian-sheng-ji-android-mian-shi/fragmentmian-shi-ti.html onSaveInstanceState æ–¹æ³•å•¥æ—¶å€™è°ƒç”¨ã€‚ ä½†æ˜¯ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ åŽŸå› æ˜¯åœ¨Android 11ç‰ˆæœ¬åŽçš„activityä¼šç®¡ç†fragmentï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨activity åœ¨æ‰§è¡ŒonSaveInstanceState()çš„æ—¶å€™ä¼šä¿å­˜fragmentçš„çŠ¶æ€ï¼Œç”¨äºŽåœ¨æ¢å¤activityçš„æ—¶å€™ä½¿ç”¨ã€‚é‚£ä¹ˆåœ¨ä¿å­˜fragmentçš„çŠ¶æ€åŽï¼Œå°±ä¸èƒ½å†åŽ»æ”¹å˜fragmentçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸æäº¤äº‹åŠ¡ï¼Œè¿™æ ·æ‰èƒ½ä¿éšœactivityæ¢å¤çš„æ—¶å€™ï¼Œå¯ä»¥æ˜¾ç¤ºåŽŸæ¥fragmentçš„çŠ¶æ€ã€‚ https://blog.csdn.net/xx326664162/article/details/88379490 https://blog.csdn.net/qq_19560943/article/details/78112903 æ¨ªç«–å±åˆ‡æ¢ è¢«ç³»ç»Ÿå›žæ”¶ï¼ˆå¤çŽ° è¿›å…¥å¼€å‘è€…é€‰é¡¹ -ã€‹ä¸ä¿ç•™æ´»åŠ¨ï¼‰ https://www.jianshu.com/p/c12a98a36b2b BottomNavigationView errorä½¿ç”¨BottomNavigationViewå‡ºçŽ°å¾ˆä¸¥é‡çš„é—®é¢˜,å¾ˆä¹…æ‰æ‰¾åˆ°åŽŸå›  12Caused by: android.view.InflateException: Binary XML file line #16: Binary XML file line #16: Error inflating class com.google.android.material.bottomnavigation.BottomNavigationView Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.android.material.bottomnavigation.BottomNavigationView å› ä¸º AndroidManifest.xml applicationä¸‹çš„android:theme=â€@style/AppThemeâ€å¤šå‡ºäº†,æŠŠä¸‹é¢çš„åˆ é™¤äº†å°±å¥½äº†. 123&lt;item name&#x3D;&quot;android:textColorSecondary&quot;&gt;#ffffff&lt;&#x2F;item&gt;&lt;item name&#x3D;&quot;android:actionOverflowButtonStyle&quot;&gt;@style&#x2F;OverflowMenuStyle&lt;&#x2F;item&gt;&lt;item name&#x3D;&quot;android:listDivider&quot;&gt;@drawable&#x2F;divider&lt;&#x2F;item&gt; é‡å åŽŸå›  æ—‹è½¬å±å¹•æ—¶å€™ï¼Œåˆ›å»ºçš„homeFragmentä¼šè¢«å›žæ”¶,åœ¨é”€æ¯å‰ï¼Œæ‰§è¡Œäº†onSaveInstanceState(Bundle outState)è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šä¿å­˜activityçš„ä¸€äº›ä¿¡æ¯ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æ·»åŠ è¿‡çš„fragmentï¼ŒActivityé‡å»ºåŽï¼Œå†æ¬¡åˆå§‹åŒ–homeFragmentï¼ŒæŽ¥ç€æ˜¾ç¤ºï¼Œå¯¼è‡´äº†é‡å çš„é—®é¢˜ã€‚ ä»£ç éªŒè¯1234567891011121314151617181920private fun initFragment() &#123; if (homeFragment &#x3D;&#x3D; null) &#123; homeFragment &#x3D; HomeFragment() addFragment(homeFragment!!) showFragment(homeFragment) &#125;&#125;override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) Timber.d(&quot;onCreate() $homeFragment&quot;) initFragment() Timber.d(&quot;initFragment() $homeFragment&quot;) &#125; override fun onDestroy() &#123; super.onDestroy() Timber.tag(TAG).d(&quot;onDestroy() homeFragment $homeFragment&quot;) &#125; æ—¥å¿— 12345678910111213141516D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId 641D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() homeFragment nullD&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;1adc3fa&#125; (b0660244-39c4-4104-b558-f5384c7adb0d) id&#x3D;0x7f09010e&#125;D&#x2F;TabBottomActivity LaunchModeActivity: onStart()D&#x2F;TabBottomActivity LaunchModeActivity: onResume()D&#x2F;TabBottomActivity LaunchModeActivity: onPause()D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState()D&#x2F;TabBottomActivity LaunchModeActivity: onStop()D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy()D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;1adc3fa&#125; (d84f5956-fa2c-4cd2-8397-0904040d2a6f)&#125;D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId 641D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() homeFragment nullD&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;ac076db&#125; (f8ee348b-6ff7-4b1e-ba27-6e47e848f623) id&#x3D;0x7f09010e&#125;D&#x2F;TabBottomActivity LaunchModeActivity: onStart()D&#x2F;TabBottomActivity LaunchModeActivity: onRestoreInstanceState()D&#x2F;TabBottomActivity LaunchModeActivity: onResume() ä»Ž initFragmentï¼ˆï¼‰ 1adc3fa , ac076db å¯ä»¥çœ‹åˆ°ï¼ŒHomeFrgmenté‡æ–°åˆ›å»ºäº†. å¤„ç†æ–¹æ³• onSaveInstanceState ä¸ä¿å­˜ä¿¡æ¯ 123 override fun onSaveInstanceState(outState: Bundle) &#123;// super.onSaveInstanceState(outState) &#125; è¿™ç§æ–¹å¼çš„å¼Šç«¯å°±æ˜¯ï¼Œåˆ‡æ¢åŽæ€»æ˜¯å›žåˆ°é¦–é¡µ. onSaveInstanceState() ä¿å­˜Fragment 123456789101112131415161718192021222324252627282930override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) if (savedInstanceState !&#x3D; null) &#123; &#x2F;*èŽ·å–ä¿å­˜çš„fragment æ²¡æœ‰çš„è¯è¿”å›žnull*&#x2F; homeFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, HOME_FRAGMENT_KEY) as HomeFragment? healthFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, DASHBOARD_FRAGMENT_KEY) as HealthFragment? personFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, NOTICE_FRAGMENT_KEY) as PersonFragment? addToList(homeFragment) addToList(healthFragment) addToList(personFragment) &#125; else &#123; initFragment() &#125; &#125; override fun onSaveInstanceState(outState: Bundle) &#123; super.onSaveInstanceState(outState) Timber.d(&quot;MainActivity onSaveInstanceState&quot;) &#x2F;*fragmentä¸ä¸ºç©ºæ—¶ ä¿å­˜*&#x2F;if (homeFragment !&#x3D; null) &#123; supportFragmentManager.putFragment(outState!!, HOME_FRAGMENT_KEY, homeFragment!!) &#125; if (healthFragment !&#x3D; null) &#123; supportFragmentManager.putFragment(outState!!, DASHBOARD_FRAGMENT_KEY, healthFragment!!) &#125; if (personFragment !&#x3D; null) &#123; supportFragmentManager.putFragment(outState!!, NOTICE_FRAGMENT_KEY, personFragment!!) &#125; &#125; è¿™ç§æ–¹å¼ï¼Œå¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯æ‰“å°çš„æ—¥å¿—HomeFragmentè¿˜æ˜¯ä¸ä¸€æ ·ï¼Œæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ 12345678910111213141516171819202122232425D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId 4437 D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;dc2914d&#125; (5f30b0dd-a8d2-4b3c-a27f-1d160a9da58e) id&#x3D;0x7f09010e&#125; D&#x2F;TabBottomActivity LaunchModeActivity: onStart() D&#x2F;TabBottomActivity LaunchModeActivity: onResume() D&#x2F;TabBottomActivity$onCreate: navigation_health D&#x2F;TabBottomActivity LaunchModeActivity: onPause() D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState() D&#x2F;TabBottomActivity: MainActivity onSaveInstanceState D&#x2F;TabBottomActivity LaunchModeActivity: onStop() D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;dc2914d&#125; (ab276ea2-5fa2-4d79-b6a6-af7143b114e8)&#125; D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId 4437 D&#x2F;TabBottomActivity: fragmentListæ•°é‡1 D&#x2F;TabBottomActivity: fragmentListæ•°é‡2 D&#x2F;TabBottomActivity: fragmentListæ•°é‡2 D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;9139494&#125; (5f30b0dd-a8d2-4b3c-a27f-1d160a9da58e) id&#x3D;0x7f09010e&#125; D&#x2F;TabBottomActivity LaunchModeActivity: onStart() D&#x2F;TabBottomActivity LaunchModeActivity: onRestoreInstanceState() D&#x2F;TabBottomActivity LaunchModeActivity: onResume() D&#x2F;TabBottomActivity LaunchModeActivity: onPause() D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState() D&#x2F;TabBottomActivity: MainActivity onSaveInstanceState D&#x2F;TabBottomActivity LaunchModeActivity: onStop() D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;9139494&#125; (cadcb63f-8516-4d44-8f3c-75b0c8e9f27f)&#125; https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591 https://www.jianshu.com/p/78ec81b42f92 ä¸‹é¢è¿™ç§æ–¹å¼æ²¡ç†è§£https://www.jianshu.com/p/d9143a92ad94 https://www.jianshu.com/p/c12a98a36b2b æ¨ªç«–å±åˆ‡æ¢ï¼ŒFragmentå®žä¾‹å¤ç”¨setRetainInstance=true retainInstance = trueå·²ç»è¿‡æœŸï¼Œæ”¹ç”¨ViewModel LifeFragment 1234override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) retainInstance &#x3D; true&#125; 12345678private fun initFragment() &#123; var lifeFragment &#x3D; supportFragmentManager.findFragmentById(R.id.fl_content) if (lifeFragment &#x3D;&#x3D; null) &#123; lifeFragment &#x3D; LifeFragment() supportFragmentManager.beginTransaction().add(R.id.fl_content, lifeFragment).commit() &#125; Timber.d(&quot;LifeFragment $lifeFragment&quot;)&#125; åˆ‡æ¢å±å¹•åŽ LifeFragment,ondestroy()æ²¡å¿—è¡Œ,åŽé¢çš„Oncreate()ä¹Ÿæ²¡æœ‰åˆ›å»º. 12345678910111213141516171819D&#x2F;LifeActivity LaunchModeActivity: onCreate() taskId 599D&#x2F;LifeActivity: LifeFragment LifeFragment&#123;6a86311&#125; (70133a14-6dcf-4f8b-beee-6cd31d6623ba) id&#x3D;0x7f090109&#125;D&#x2F;LifeFragment LaunchModeFragment: onAttach(Context context)D&#x2F;LifeFragment LaunchModeFragment: onCreate() savedInstanceState nullD&#x2F;LifeFragment LaunchModeFragment: onCreateView()D&#x2F;LifeFragment LaunchModeFragment: onActivityCreated()D&#x2F;LifeFragment LaunchModeFragment: onStart()D&#x2F;LifeFragment LaunchModeFragment: onResume()D&#x2F;LifeFragment LaunchModeFragment: onPause() D&#x2F;LifeFragment LaunchModeFragment: onStop()D&#x2F;LifeFragment LaunchModeFragment: onDestroyView()D&#x2F;LifeFragment LaunchModeFragment: onDetach()D&#x2F;LifeFragment LaunchModeFragment: onAttach(Context context)D&#x2F;LifeActivity LaunchModeActivity: onCreate() taskId 599D&#x2F;LifeActivity: LifeFragment LifeFragment&#123;6a86311&#125; (70133a14-6dcf-4f8b-beee-6cd31d6623ba) id&#x3D;0x7f090109&#125;D&#x2F;LifeFragment LaunchModeFragment: onCreateView()D&#x2F;LifeFragment LaunchModeFragment: onActivityCreated()D&#x2F;LifeFragment LaunchModeFragment: onStart()D&#x2F;LifeFragment LaunchModeFragment: onResume() Fragmentä¹‹é—´ä¼ é€’æ•°æ® Fragment.setArguments()æ–¹æ³•ä¼ é€’bundle findFragmentById()æ‰¾åˆ°tag,ç„¶åŽç›´æŽ¥æ“ä½œFramgent 123456789101112131415161718public void onArticleSelected(int position) &#123; ArticleFragment articleFrag = (ArticleFragment) getSupportFragmentManager().findFragmentById(R.id.article_fragment); if (articleFrag != null) &#123; articleFrag.updateArticleView(position); &#125; else &#123; ArticleFragment newFragment = new ArticleFragment(); Bundle args = new Bundle(); args.putInt(ArticleFragment.ARG_POSITION, position); newFragment.setArguments(args); FragmentTransaction transaction = getSupportFragmentManager().beginTransaction(); transaction.replace(R.id.fragment_container, newFragment); transaction.addToBackStack(null); transaction.commit(); &#125; &#125; æŽ¥å£å›žè°ƒ ViewModel Livedata ç»™å·²ç»åˆ›å»ºframentä¼ é€’æ•°æ®ä¹Ÿæ˜¯ç›´æŽ¥ Fragment.refresh(),ç¬¬ä¸€è¡Œä»£ç ç¬¬ä¸‰ç‰ˆP227ï¼Œä¹Ÿæ˜¯è¿™æ ·åšçš„ã€‚ fragmentå›žé€€æ ˆtx.addToBackStack(null); æ·»åŠ å›žé€€åŠŸèƒ½ï¼Œç±»ä¼¼ActivityåŽ‹æ ˆçš„è¿‡ç¨‹ https://www.jianshu.com/p/fe16553ca2ca https://blog.csdn.net/zhiyuan0932/article/details/52593039 FragmentæŽ§åˆ¶çˆ¶Fragmentå±•ç¤º Communication between nested fragments in Android https://blog.csdn.net/u011481547/article/details/71552720 Fragmetå…¨å±€æµç¨‹å›¾ https://kotlintc.com/articles/5693 https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q https://juejin.im/post/5bcd58b6e51d45404c71d23f https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"Fragment","slug":"Fragment","permalink":"https://noteforme.github.io/tags/Fragment/"}]},{"title":"onActivityResult","slug":"onActivityResult","date":"2017-09-26T06:01:53.000Z","updated":"2023-01-02T03:31:39.310Z","comments":true,"path":"2017/09/26/onActivityResult/","link":"","permalink":"https://noteforme.github.io/2017/09/26/onActivityResult/","excerpt":"","text":"ä¼ ç»Ÿæ–¹å¼å•ä¸ªé¡µé¢è·³è½¬ ä¸»è¦æœ‰ä¸‰ä¸ªæ–¹æ³•å®žçŽ° startActivityForResult(@RequiresPermission Intent intent, int requestCode) setResult(int resultCode, Intent data) onActivityResult(int requestCode, int resultCode, Intent data) ä¸‹é¢æ˜¯ç®€å•ä¾‹å­è·³è½¬MainActivity ç›®æ ‡SecondAcitivty å…¶ä¸­æ•°æ®ä¼ é€’å¾ˆç®€å•,ç‰¹åˆ«æ³¨æ„requestCodeï¼ŒresultCodeä¸åŒçš„åŒºåˆ†çš„åŒºåˆ« requestCodeï¼šå‡è®¾ MainActivity button1 button2åˆ°SecondAcitivty,å›žæ¥çš„åœ¨onActivityResultå°±éœ€è¦ åˆ¤æ–­æ˜¯å“ªä¸ªbuttonç‚¹å‡»çš„ resultCode: å‡è®¾MainActivity button1è·³è½¬åˆ°SecondAcitivty, button2åˆ°ThirdActiivty,å›žæ¥åŽonActivityResult å°±éœ€è¦åˆ¤æ–­æ˜¯å“ªä¸ªActivityå›žæ¥çš„ å‚è€ƒ:http://blog.csdn.net/jiangwei0910410003/article/details/16983049 æ³¨æ„:onActivityResultæ–¹æ³•ç”¨çš„ç®—æ¯”è¾ƒæ™®éï¼Œåˆšå¥½æœ‰ä¸ªå›°æƒ‘ï¼Œå›žä¼ æ•°æ®æ—¶intent.putExtra(&quot;text&quot;,122); ä½¿ç”¨ String couponId = data.getStringExtra(&quot;text&quot;); æŽ¥æ”¶æ—¶ä¸ºnull,é‡Œé¢è·³è½¬å’Œå›žä¼ ,å­˜çš„å€¼æ˜¯intç±»åž‹ï¼ŒèŽ·å–stringç±»åž‹ FragmentæŽ¥æ”¶onActivityResultå¿…é¡»ä½¿ç”¨Fragment çš„ startActivityForResult()* 12345public static void startForResult(Activity activity, Fragment fragment) &#123; Intent intent = new Intent(activity, LoginActivity.class); fragment.startActivityForResult(intent, REQUEST_CODE_MINE_FRAGMENT); &#125; setResult(RESULT_OK, result); ,finish()åŽ onActivityResult è¿”å›ž resultCode ActivityåµŒå¥—Fragment,ä»–ä»¬å„è‡ªå‘èµ·startActivityForResultå‘èµ·æ•°æ®è¯·æ±‚ç»“è®º Fragmentå‘èµ· Fragment onActivityResultèƒ½æŽ¥æ”¶ã€‚Activity onActivityResultèƒ½æŽ¥æ”¶,ä½†æ˜¯requestCodeä¸æ­£ç¡®ã€‚ Activityå‘èµ· Fragmentä¸èƒ½æŽ¥æ”¶ã€‚ Activity onActivityResultèƒ½æŽ¥æ”¶ã€‚ ä»£ç éªŒè¯FirstResultActivity 12345678910111213141516171819val requestCode = 1000 override fun initView() &#123; super.initView() val intent = Intent(this, SecondResultActivity::class.java) findViewById&lt;View&gt;(R.id.bt_activity).setOnClickListener &#123; startActivityForResult(intent, requestCode) Timber.i(&quot;startActivityForResult $requestCode&quot;) &#125; &#125; override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123; super.onActivityResult(requestCode, resultCode, data) Timber.d(&quot;onActivityResult resultCode $requestCode resultCode $resultCode data $&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;&quot;) &#125; private fun initFragment() &#123; val ftn = supportFragmentManager.beginTransaction().replace(R.id.fl_content, newInstance(&quot;æ•°æ®&quot;)) ftn.commit() &#125; ResultOkFragment 123456789101112131415161718private val requestCode: Int = 2000override fun onActivityCreated(savedInstanceState: Bundle?) &#123; super.onActivityCreated(savedInstanceState) val intent = Intent(context, SecondResultActivity::class.java) bt_fragment.setOnClickListener &#123; startActivityForResult(intent, requestCode) Timber.d(&quot;startActivityForResult $requestCode&quot;) &#125;&#125;override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123; super.onActivityResult(requestCode, resultCode, data) Timber.d(&quot;onActivityResult resultCode $requestCode resultCode $resultCode data $&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;&quot;)&#125; SecondResultActivity 12setResult(21, new Intent().putExtra(sData, &quot;æˆ‘è¦å›žè°ƒå•¦!!!&quot;));finish(); Activityå‘èµ· 12I&#x2F;FirstResultActivity$initView: startActivityForResult 1000D&#x2F;FirstResultActivity: onActivityResult resultCode 1000 resultCode 21 data æˆ‘è¦å›žè°ƒå•¦!!! Fragmentå‘èµ· 123D&#x2F;ResultOkFragment$onActivityCreated: startActivityForResult 2000D&#x2F;ResultOkFragment: onActivityResult resultCode 2000 resultCode 21 data æˆ‘è¦å›žè°ƒå•¦!!!D&#x2F;FirstResultActivity: onActivityResult resultCode 329680 resultCode 21 data æˆ‘è¦å›žè°ƒå•¦!!! è·³è½¬å¤šä¸ªé¡µé¢ å›žæ¥ä¸­é—´é¡µé¢ä¸èƒ½finishï¼Œä¹Ÿéœ€è¦åœ¨onActivityResultæ–¹æ³•å†…éƒ¨ èµ·åˆ°æ¡¥æ¢ä½œç”¨ï¼Œå›žä¼ æ•°æ® http://blog.csdn.net/lanyachuanshu/article/details/52172143https://developer.android.com/training/basics/intents/result.html http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/result/FirstResultActivity.java https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650826252&amp;idx=1&amp;sn=9ec620d630706c9f8de328e87bb8a0f1&amp;chksm=80b7b292b ActivityResultContractæ–°æ–¹å¼https://mp.weixin.qq.com/s/o2_2DeAIcJGYSvm2WlhUxg å›žè°ƒä½œç”¨123456789101112131415161718class PlayStoreActivity : AppCompatActivity() &#123; binding.opengoogle.setOnClickListener &#123; intent.action = &quot;com.google.android.payments.standard.TOPUP_V2&quot; intent.putExtra(&quot;gspTopUpRequest&quot;, resources.getString(R.string.secret_key)) resultLauncher.launch(intent) &#125; var resultLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) &#123; result -&gt; when (result.resultCode) &#123; Activity.RESULT_OK -&gt; Toast.makeText(this, &quot;succuss&quot;, Toast.LENGTH_SHORT).show() 0 -&gt; Toast.makeText(this, &quot;user topup Abandon&quot;, Toast.LENGTH_SHORT).show() 1 -&gt; Toast.makeText(this, &quot;topup Failed&quot;, Toast.LENGTH_SHORT).show() &#125; &#125;&#125; 12345678910111213class GoogleTopUpActivity : BaseActivity() &#123; val biding by lazy &#123; ActivityGoogleTopUpBinding.inflate(layoutInflater) &#125; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(biding.root) biding.btPage.setOnClickListener &#123; onTopUpAbandon() &#125; biding.btGoReload.setOnClickListener &#123; startActivity(Intent(this, ReloadActivity::class.java)) finish() &#125; &#125; 12345678910class ReloadActivity : AppCompatActivity() &#123; val biding by lazy &#123; ActivityReloadBinding.inflate(layoutInflater) &#125; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(biding.root) biding.btReloadPage.setOnClickListener &#123; finish() &#125; &#125;&#125; PlayStoreActivity -&gt; GoogleTopUpActivity -&gt; ReloadActivity GoogleTopUpActivityçš„æ—¶å€™å·²ç»å…³é—­äº†,ReloadActivity å…³é—­åŽå›žåˆ°PlayStoreActivityè¿˜æ˜¯ä¼šæœ‰å›žè°ƒ","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"ScreenCompatibility","slug":"ScreenCompatibility","date":"2017-09-23T13:41:20.000Z","updated":"2024-02-21T00:48:48.674Z","comments":true,"path":"2017/09/23/ScreenCompatibility/","link":"","permalink":"https://noteforme.github.io/2017/09/23/ScreenCompatibility/","excerpt":"","text":"Androidå±å¹•çš„ä¸€äº›æŠ€å·§ å®˜ç½‘é€‚é…æ–¹æ¡ˆhttps://developer.android.com/training/basics/supporting-devices/index.htmlhttps://developer.android.com/training/multiscreen/screensizes.html èµ„æºå›¾ç‰‡é€‚é…Provide alternative bitmaps To provide good graphical qualities on devices with different pixel densities, you should provide multiple versions of each bitmap in your appâ€”one for each density bucket, at a corresponding resolution. Otherwise, Android must scale your bitmap so it occupies the same visible space on each screen, resulting in scaling artifacts such as blurring. Figure 2. Relative sizes for bitmaps at different density sizes There are several density buckets available for use in your apps. Table 1 describes the different configuration qualifiers available and what screen types they apply to. Table 1. Configuration qualifiers for different pixel densities. Density qualifier Description ldpi Resources for low-density (ldpi) screens (~120dpi). mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.) hdpi Resources for high-density (hdpi) screens (~240dpi). xhdpi Resources for extra-high-density (xhdpi) screens (~320dpi). xxhdpi Resources for extra-extra-high-density (xxhdpi) screens (~480dpi). xxxhdpi Resources for extra-extra-extra-high-density (xxxhdpi) uses (~640dpi). nodpi Resources for all densities. These are density-independent resources. The system does not scale resources tagged with this qualifier, regardless of the current screenâ€™s density. tvdpi Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a â€œprimaryâ€ density group. It is mostly intended for televisions and most apps shouldnâ€™t need itâ€”providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. If you find it necessary to provide tvdpi resources, you should size them at a factor of 1.33*mdpi. For example, a 100px x 100px image for mdpi screens should be 133px x 133px for tvdpi. To create alternative bitmap drawables for different densities, you should follow the 3:4:6:8:12:16 scaling ratio between the six primary densities. For example, if you have a bitmap drawable thatâ€™s 48x48 pixels for medium-density screens, all the different sizes should be: 36x36 (0.75x) for low-density (ldpi) 48x48 (1.0x baseline) for medium-density (mdpi) 72x72 (1.5x) for high-density (hdpi) 96x96 (2.0x) for extra-high-density (xhdpi) 144x144 (3.0x) for extra-extra-high-density (xxhdpi) 192x192 (4.0x) for extra-extra-extra-high-density (xxxhdpi) Then, place the generated image files in the appropriate subdirectory under res/ and the system will pick the correct one automatically based on the pixel density of the device your app is running on: 1234567891011res/ drawable-xxxhdpi/ awesome-image.png drawable-xxhdpi/ awesome-image.png drawable-xhdpi/ awesome-image.png drawable-hdpi/ awesome-image.png drawable-mdpi/ awesome-image.png Then, any time you reference @drawable/awesomeimage, the system selects the appropriate bitmap based on the screenâ€™s dpi. If you donâ€™t provide a density-specific resource for that density, the system picks the next best match and scales it to fit the screen. This means that if you generate a 200x200 image for xhdpi devices, you should generate the same resource in 150x150 for hdpi, 100x100 for mdpi, and 75x75 for ldpi devices.è€ŒUIé—®æˆ‘ä»¬éœ€è¦å¤šå°‘å¤§å°çš„å›¾ï¼Œå¦‚æžœæ•ˆæžœå›¾æ ¹æ®750*1334çš„è¯ï¼Œå¯ä»¥å‘Šè¯‰ä»–ï¼Œä¸è¿‡PSæœ‰ä¸ªå«cuttermançš„å·¥å…·å¯ä»¥è‡ªåŠ¨ç”Ÿæˆä¸åŒåˆ†è¾¨çŽ‡çš„å›¾ç‰‡ PXè½¬ dp ä»¥5X ä¸ºä¾‹: 5Xçš„dpi =420, PPI = 420/160 = 2.625è®¾ç½®viewçš„å®½åº¦æˆ‘ä»¬ç”¨ match_parent,é‚£ä¹ˆåœ¨5Xä¸Šï¼Œä»–æ˜¯å¤šå°‘dpå‘¢ï¼Ÿ 5X : width = 1080 pxdp = 1080 / PPI = 411.428571429,æ‰€ä»¥411dpå°±æ˜¯5Xçš„match_parent http://blog.csdn.net/u010983881/article/details/51993157 å®žé™…åº”ç”¨ å¼€å‘ä¸­çš„å®žé™…è½¬åŒ– ç”Ÿæˆä¸»æµå±å¹•çš„valuesï¼Œå®‰å®½åˆ†æˆ320ä»½,é«˜400ä»½ å‡è®¾ï¼µï¼©æ ¹æ® iphone6(750Ã—1334)è®¾è®¡çš„æ•ˆæžœå›¾ æ ¹æ®ä¸‹å›¾å…¬å¼è®¡ç®— Dpi iphone6æ˜¯4.7å¯¸çš„ åˆ†è¾¨çŽ‡ 750 * 1334, å®ƒçš„dpi å°±æ˜¯ âˆš(750Â²+1334Â²)/4.7 = 325 â€‹ å’Œdrawable-xhdpi 320æŽ¥è¿‘ drawable-xhdpi 480ä¸Šåšçš„å›¾å°±æ˜¯å¤§æ¦‚æ˜¯1.5å€çš„æ ·å­ ,åˆ†è¾¨çŽ‡åœ¨1920 *1080ä¸Šçš„ä¹Ÿæ˜¯ä¸€æ ·çš„ â€‹ ç„¶è€Œpixel 2çš„æ¨¡æ‹Ÿå™¨æ˜¯420 çœŸæœºæ˜¯441ï¼Œè¿™æ˜¯ä»€ä¹ˆåŽŸå› å‘¢!!! http://blog.csdn.net/zengd0/article/details/52464627 æ‰€ä»¥è¯´ ç»™çš„1334 * 750 å›¾å°±æ˜¯ 10px æˆ‘ä»¬å†™5dp â€‹ å‚è€ƒ: http://www.jianshu.com/p/ec5a1a30694b http://blog.csdn.net/lmj623565791/article/details/45460089 DPIå‚è€ƒ è‡ªå·±è®¡ç®—æŒ‰ç…§ä¸Šé¢çš„å…¬å¼å¾ˆç®€å•ï¼Œæœ€æ£˜æ‰‹çš„è¿˜æ˜¯æ‰‹æœºå°ºå¯¸ç»™å‡ºä¸€ä¸ªæ‰‹æœºdpiç½‘ç«™ get what you wanthttp://dpi.lv/ https://mp.weixin.qq.com/s/v_aauFjx-f91WrpCAaNMVQ) https://developer.android.com/guide/practices/screens_support ä»Šæ—¥å¤´æ¡é€‚é… https://www.jianshu.com/p/55e0fca23b4f https://github.com/JessYanCoding/AndroidAutoSize ä¸ºä»€ä¹ˆåŽŸæ¥é•¿åº¦ ic_launcher.png 192*192 åˆ°äº†nexus5 ä¸­æ˜¾ç¤ºæ˜¯216 * 216 è€Œä¸æ˜¯åŽŸæ¥çš„å°ºå¯¸","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/tags/VIEW/"}]},{"title":"Package-signature","slug":"Package-signature","date":"2017-09-21T02:56:13.000Z","updated":"2021-08-19T11:11:44.199Z","comments":true,"path":"2017/09/21/Package-signature/","link":"","permalink":"https://noteforme.github.io/2017/09/21/Package-signature/","excerpt":"","text":"Apkæ‰“åŒ…æµç¨‹ ç›¸åŒç­¾å ä¸åŒåŒ…åé—®é¢˜çŽ°åœ¨æŠŠé¡¹ç›®é‡æ–°ç”Ÿæˆç­¾åï¼Œç„¶åŽå®‰è£…ï¼Œå®‰è£…åŽä¼šå®‰è£…å¤±è´¥ï¼Œå› ä¸ºå’Œä»¥å‰çš„appå†²çª åº”ç”¨å®‰è£…åŽä¼šåœ¨data/data ç›®å½•ç”Ÿæˆå’ŒåŒ…åä¸€æ ·çš„æ–‡ä»¶å¤¹ è™½ç„¶ç”Ÿæˆäº†äº†æ–°çš„ç­¾åä½†æ˜¯ä¼šè¦†ç›– æ‰“åŒ…android studioæ›´æ–°äº†æ–°ç‰ˆæœ¬ æ‰“åŒ…çš„æ—¶å€™v1å’Œv2éƒ½éœ€è¦å‹¾é€‰æ‰èƒ½å®‰è£… http://blog.h5min.cn/daihuimaozideren/article/details/77842549 walleæ‰“åŒ…ç”Ÿæˆæ¸ é“åŒ… ç”Ÿæˆæ¸ é“åŒ… ./gradlew clean assembleReleaseChannels æ”¯æŒ productFlavors ./gradlew clean assembleMeituanReleaseChannels https://github.com/Meituan-Dianping/walle","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"ubuntu_guide","slug":"ubuntu_guide","date":"2017-09-20T13:42:17.000Z","updated":"2021-08-19T11:11:44.318Z","comments":true,"path":"2017/09/20/ubuntu_guide/","link":"","permalink":"https://noteforme.github.io/2017/09/20/ubuntu_guide/","excerpt":"","text":"è§£å†³Ubuntu 16.04 ç³»ç»Ÿçš„ä¸€äº›é”™è¯¯ Unable to mount root fs on unknown-block çœ‹åˆ°Ubuntuç³»ç»Ÿæœ‰æ›´æ–°å°±ç‚¹äº†ä¸‹ï¼Œæ—©ä¸Šæ‰“å¼€ç”µè„‘ Ubuntuç›´æŽ¥è¿›ä¸åŽ»æœ€ä¸‹é¢å¼¹å‡ºè¿™è¿™æ ·çš„ é”™è¯¯ Unable to mount root fs on unknown-block è€Œä¸”åªèƒ½å¼ºåˆ¶å…³æœºï¼Œå¿ƒæƒ³å®Œäº†æˆ‘çš„ èµ„æ–™ï¼Œè¿˜æœ‰è¾›è‹¦ç¼–è¯‘çš„æºç ï¼Œä¸è¿‡å¥½åœ¨æ™šä¸Šå›žæ¥å€’è…¾äº†ä¸€æŠŠ ç»ˆäºŽå¥½äº†ã€‚ æ­¥éª¤1ã€ Advanced options for Ubuntuï¼’ã€ubuntu Linux 4.4.0-96â€¦ (recovery mdoe) è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯ç¬¬äºŒä¸ªï¼Œç¬¬ä¸€ä¸ªç‚¹å‡»åŽè¿˜æ˜¯ ä¼šæŠ¥é”™3ã€Menuç•Œé¢ ï¼ŒæŠŠèƒ½æ¸…çš„å…ˆæ¸…äº†ï¼Œç„¶åŽç‚¹å‡»grub,æ‰§è¡ŒåŽç»­æ“ä½œ 4ã€ç™»å½•è¿›å…¥å‘½ä»¤è¡Œç•Œé¢ 12345sudo mount -o rw //è¿™ä¸€è¡Œå’Œå‚è€ƒèµ„æ–™ä¸åŒsudo dpkg --configure -a //åœ¨è¿™é‡Œç­‰äº†å¾ˆä¹… Device ....Startçš„å­—æ ·,æŽ¥ç€å°±æŒ‰äº† Ctrl + Alt + Delete , é‡å¯å°±å¥½äº†sudo apt-get install -f # to finish upgrades æœ€å¥½åŠ è¿™ä¸ªå§type reboot https://askubuntu.com/questions/875862/kernel-panic-unable-to-mount-root-in-ubuntu-16-04/875868 è§£åŽ‹ä¹±ç åœ¨windowsä¸ŠåŽ‹ç¼©çš„æ–‡ä»¶ï¼Œæ˜¯ä»¥ç³»ç»Ÿé»˜è®¤ç¼–ç ä¸­æ–‡æ¥åŽ‹ç¼©æ–‡ä»¶ã€‚ç”±äºŽzipæ–‡ä»¶ä¸­æ²¡æœ‰å£°æ˜Žå…¶ç¼–ç ï¼Œæ‰€ä»¥linuxä¸Šçš„unzipä¸€èˆ¬ä»¥é»˜è®¤ç¼–ç è§£åŽ‹ï¼Œä¸­æ–‡æ–‡ä»¶åä¼šå‡ºçŽ°ä¹±ç ã€‚å¯ä»¥ä½¿ç”¨ç»ˆç«¯zipæ–‡ä»¶è¿›è¡Œè§£åŽ‹å¹¶æŒ‡å®šè§£åŽ‹çš„ç¼–ç  unzip -O GBK xxx.zipè§£åŽ‹åŽçš„æ–‡ä»¶çš„è·¯å¾„ä¸ºå½“å‰ç»ˆç«¯æ‰€åœ¨çš„è·¯å¾„ å‚è€ƒï¼š Eric Chan ** 17.10çš„é—®é¢˜ ** Android studio3.1æ— æ³•è¾“å…¥ä¸­æ–‡ ä½¿ç”¨ fcitx é€‰æ‹©sunpingying ä¹Ÿå¯ä»¥é€‰æ‹© google pinyin ç„¶åŽè¾“å…¥è¿™ä¸¤è¡Œå‘½ä»¤ pidof fcitx | xargs kill #æ‰¾åˆ°åŽŸæœ‰çš„fcitxç«¯å£å¹¶killæŽ‰ fcitx #å¼€å¯fcitx å‚è€ƒï¼š https://blog.csdn.net/he729164860/article/details/78484713 å®‰è£…Gnome shell12sudo apt-get install gnome-tweak-toolsudo apt-get install chrome-gnome-shell æ‰“å¼€tweakå¯ä»¥çœ‹åˆ°æŒ‰é’® æµè§ˆç‚¹å‡» ||| offæŒ‰é’®ç³»ç»Ÿå°±ä¼šå®‰è£… å¼€æºchromiumåŠ è½½æœ‰é—®é¢˜ï¼Œä½¿ç”¨firefox å¾ˆæœ‰ç”¨çš„æ’ä»¶ https://extensions.gnome.org/extension/545/hide-top-bar/ å‚è€ƒ:https://www.mobibrw.com/2017/9342 ctrl + alt + left ï¼ˆIntellij idea shortcut conflictï¼‰ install Dconf Editor in ubuntu software launch Dconf Editor, go to /org/gnome/desktop/wm/keybindings/switch-to-workspace-left double click like below use default value(click Off) -&gt; Custom value(like me or else) you could use it in intellij idea now . genymotionå®‰è£… ä¸‹è½½Virtualbox ä¸‹è½½genymotion ä¸‹è½½Android stuido genymotionæ’ä»¶ 12chmod +x genymotion-2.6.0-linux_x64.bin ./genymotion-2.6.0-linux_x64.bin -d /home/qiu/Work/genymotion //æ³¨æ„ï¼š chmod +x æœ‰ç©ºæ ¼ è¾“å…¥æ³•è®¾ç½®ubuntu 18.04 intellij è¾“å…¥æ³•é€‰æ‹©æœ‰é—®é¢˜ï¼Œå¯ä»¥ç”¨å‘½ä»¤è¡Œå®‰è£… ibus-pinyinï¼Œç„¶åŽinput souceé€‰æ‹©æ‹¼éŸ³è¾“å…¥æ³•","categories":[{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[]},{"title":"SDK_Integration","slug":"SDK_Integration","date":"2017-09-19T06:44:01.000Z","updated":"2021-08-19T11:11:44.237Z","comments":true,"path":"2017/09/19/SDK_Integration/","link":"","permalink":"https://noteforme.github.io/2017/09/19/SDK_Integration/","excerpt":"","text":"å¹³å¸¸é›†æˆSDKè™½ç„¶ç®€å•ï¼Œä½†æ˜¯è¿‡äº†åŠå¹´å°±å…¨å¿˜äº†ï¼Œåˆå¾—é‡æ–°æ¥è¿‡ å‹ç›Ÿåˆ†äº«å¾®ä¿¡å¼€å‘è€…å¹³å°åˆ›å»ºåº”ç”¨éœ€è¦ åº”ç”¨ç­¾å éœ€è¦ç­¾åå·¥å…·,å¯ä»¥ä»Ž å¾®ä¿¡èµ„æºä¸­å¿ƒ èŽ·å– æ³¨æ„è¦æ‰“åŒ…æ‰èƒ½è¿è¡Œ å•†æ±¤è®¤è¯æ–‡æ¡£ èº«ä»½è¯è®¤è¯ åœ¨common-idcardåŒ…ä¸­çš„assetsç›®å½•ä¸‹æ·»åŠ  SenseID_OCR.licæ–‡ä»¶å°±å¯ä»¥äº† åœ¨androidmanifest.xmlæ³¨å†Œactivity æ´»ä½“è®¤è¯ æœ€ç»ˆè°ƒç”¨onDetectOver 1public void onDetectOver(ResultCode code, String id, List imageData) ä¼šè¿”å›žid,ç„¶åŽæŠŠid,èº«ä»½è¯number,nameä¼ ç»™å•†æ±¤å¯¹æ¯” æžå…‰æŽ¨é€ é›†æˆè¿‡ç¨‹ æŒ‰ç…§æ–‡æ¡£ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„è¿™ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨å°±å¯ä»¥äº† 1234567891011121314151617&lt;receiver android:name=&quot;.jpush.MyReceiver&quot; android:enabled=&quot;true&quot;&gt; &lt;intent-filter&gt; &lt;!--Required ç”¨æˆ·æ³¨å†ŒSDKçš„intent--&gt; &lt;action android:name=&quot;cn.jpush.android.intent.REGISTRATION&quot; /&gt; &lt;!--Required ç”¨æˆ·æŽ¥æ”¶SDKæ¶ˆæ¯çš„intent--&gt; &lt;action android:name=&quot;cn.jpush.android.intent.MESSAGE_RECEIVED&quot; /&gt; &lt;!--Required ç”¨æˆ·æŽ¥æ”¶SDKé€šçŸ¥æ ä¿¡æ¯çš„intent--&gt; &lt;action android:name=&quot;cn.jpush.android.intent.NOTIFICATION_RECEIVED&quot; /&gt; &lt;!--Required ç”¨æˆ·æ‰“å¼€è‡ªå®šä¹‰é€šçŸ¥æ çš„intent--&gt; &lt;action android:name=&quot;cn.jpush.android.intent.NOTIFICATION_OPENED&quot; /&gt; &lt;!-- æŽ¥æ”¶ç½‘ç»œå˜åŒ– è¿žæŽ¥/æ–­å¼€ since 1.6.3 --&gt; &lt;action android:name=&quot;cn.jpush.android.intent.CONNECTION&quot; /&gt; &lt;category android:name=&quot;com.zhujia.land&quot; /&gt; &lt;/intent-filter&gt; &lt;/receiver&gt; æœ‰ç‚¹ç–‘æƒ‘çš„æ˜¯æŽ¨é€ç»™ç‰¹å®šçš„APP ç›®å‰èŽ·å–RegistrationIDï¼Œç™»é™†æŽ¥å£æŠŠ RegistrationIDä¼ ç»™æœåŠ¡ç«¯, ç„¶åŽServeræŽ¨é€è¿‡æ¥å°±å¯ä»¥äº† http://blog.jiguang.cn/push_audience_tech-2/ æš‚æ—¶åˆ«è¯•ç”¨Jcenteré›†æˆ,ä¼šå‡ºçŽ°å„ç§é—®é¢˜ å¾®ä¿¡ç™»é™†Appç™»å½•https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Resource_Center_Homepage.html é—®é¢˜1 E/MtaSDK: [pool-4-thread-1(320): null:705] - Server response error code:404, error:&#123;&quot;ret&quot;:-1, &quot;msg&quot;:&quot;invalid appkey&quot;&#125; Demoé‡Œçš„wechat-sdk-android-with-mta æ¢æˆ api â€˜com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+â€™ è¿™ä¸ªå¼„äº†ä¸€ä¸Šåˆ é—®é¢˜2 No value for openid. WXEntryActivity {â€œerrcodeâ€:40029,â€errmsgâ€:â€invalid codeâ€} WXEntryActivity appid secreté”™è¯¯ 1234567if (resp.getType() == ConstantsAPI.COMMAND_SENDAUTH) &#123; SendAuth.Resp authResp = (SendAuth.Resp)resp; final String code = authResp.code; NetworkUtil.sendWxAPI(handler, String.format(&quot;https://api.weixin.qq.com/sns/oauth2/access_token?&quot; + &quot;appid=%s&amp;secret=%s&amp;code=%s&amp;grant_type=authorization_code&quot;, &quot;wx930ea5d5a258f4f&quot;, &quot;1d6d1d57a3dd06336d917bc0b44d964&quot;, code), NetworkUtil.GET_TOKEN);&#125; 1GET https://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&amp;secret=SECRET&amp;code=CODE&amp;grant_type=authorization_code demoä¸­ appid wxd930ea5d5a2584fè¦æ¢æˆè‡ªå·±çš„ secret 1d6d1d57a3dd063b36d91bc0b44d964ä¹Ÿè¦æ¢æˆè‡ªå·±çš„ é—®é¢˜3 éœ€è¦æ³¨å†Œï¼Œå¦åˆ™WXEntryActivityä¸èƒ½æ”¶åˆ°å›žè°ƒ 1234567891011121314151617181920212223private static final String APP_ID = &quot;wx88888888&quot;;// IWXAPI æ˜¯ç¬¬ä¸‰æ–¹appå’Œå¾®ä¿¡é€šä¿¡çš„openApiæŽ¥å£private IWXAPI api;private regToWx() &#123; // é€šè¿‡WXAPIFactoryå·¥åŽ‚ï¼ŒèŽ·å–IWXAPIçš„å®žä¾‹ api = WXAPIFactory.createWXAPI(this, APP_ID, true); // å°†åº”ç”¨çš„appIdæ³¨å†Œåˆ°å¾®ä¿¡ api.registerApp(APP_ID); //å»ºè®®åŠ¨æ€ç›‘å¬å¾®ä¿¡å¯åŠ¨å¹¿æ’­è¿›è¡Œæ³¨å†Œåˆ°å¾®ä¿¡ registerReceiver(new BroadcastReceiver() &#123; @Override public void onReceive(Context context, Intent intent) &#123; // å°†è¯¥appæ³¨å†Œåˆ°å¾®ä¿¡ api.registerApp(Constants.APP_ID); &#125; &#125;, new IntentFilter(ConstantsAPI.ACTION_REFRESH_WXAPP));&#125; äºŒç»´ç æ‰«ç ç™»å½•https://developers.weixin.qq.com/doc/oplatform/Mobile_App/WeChat_Login/Login_via_Scan.html ç™»å½•å…¬ä¼—å¹³å° https://mp.weixin.qq.com/cgi-bin/home?t=home ,ç‚¹å‡»é…ç½®è¿›å…¥IPç™½åå• ç‚¹å‡»é…ç½®è¿›å…¥IPç™½åå•è®¾ç½®é¡µ https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1495617578&amp;version=1&amp;lang=zh_CN&amp;platform=2&amp;token=38764305 äºŒç»´ç æ‰«ç ç™»å½•çš„appid secret keyç”¨å¼€æ”¾å¹³å°çš„ https://open.weixin.qq.com/cgi-bin/index?t=home/index&amp;lang=zh_CN æ³¨æ„ä¸¤ä¸ªä¸åŒçš„å¹³å°é…ç½® äºŒç»´ç å¤±æ•ˆ: é¦–å…ˆæ™®åŠä¸€ä¸‹äºŒç»´ç æ˜¯æœ‰å¤±æ•ˆæ—¶é—´ä»¥åŠå¤±æ•ˆçŠ¶æ€çš„ï¼Œä¸€æ—¦ä½ æ‰«è¿‡ä¸€æ¬¡äºŒç»´ç æˆ–è€…åœ¨æŸæ®µæ—¶é—´å†…æ²¡æœ‰æ‰«æé¡µé¢ä¸Šçš„äºŒç»´ç ï¼Œè¯¥äºŒç»´ç å°±å¤±æ•ˆäº† appåˆ†äº«æ‹‰æ–°è§„åˆ™ https://mp.weixin.qq.com/s/3bsmiv78yJ4XKwd8iu-0Ig Wechat Payhttps://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=8_5 Alipayhttps://opendocs.alipay.com/open/204/105296 orderInfoè®¢å•ä¿¡æ¯ ç”±æŽ¥å£æ‹¼æŽ¥å°±å¯ä»¥äº† https://mp.weixin.qq.com/s/wWB5ENo3eQJH03OXvoup8w https://mp.weixin.qq.com/s?__biz=MzUxODg0MzU2OQ==&amp;mid=2247485318&amp;idx=1&amp;sn=174338566ad8c0426c95815c4f4aee5a&amp;scene=21#wechat_redirect æŽ¨é€ç›¸å…³ https://juejin.im/post/6881414546859229192","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"JavaIo","slug":"JavaIo","date":"2017-09-12T02:14:41.000Z","updated":"2021-08-19T11:11:44.087Z","comments":true,"path":"2017/09/12/JavaIo/","link":"","permalink":"https://noteforme.github.io/2017/09/12/JavaIo/","excerpt":"","text":"![Screen Shot 2020-09-12 at 5.20.14 PM](JavaIo/Screen Shot 2020-09-12 at 5.20.14 PM.png) ![Screen Shot 2020-09-12 at 5.22.29 PM](JavaIo/Screen Shot 2020-09-12 at 5.22.29 PM.png) Byte Stream : å¯¹äºŽäºŒè¿›åˆ¶æ–‡ä»¶æˆ–å¤„ç† æ•°å­—å­—æ¯ä¹‹ç±»çš„æ•°æ® https://www.javazhiyin.com/17362.html FileInputStreamå•ä¸ªå­—èŠ‚è¯» 123456789101112FileInputStream fis = null;try &#123; fis = new FileInputStream(&quot;/Users/john/Documents/jywork/THINKJAVA/src/main/resource/a.txt&quot;); int data; while ((data = fis.read()) != -1) &#123; System.out.print((char) data+&quot; &quot;); &#125;&#125; catch (FileNotFoundException e) &#123; e.printStackTrace();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; è¯»åˆ°bytesæ•°ç»„é‡Œé¢ 12345678910111213FileInputStream fis = null;try &#123; byte[] bytes = new byte[14]; fis = new FileInputStream(&quot;/Users/john/Documents/jywork/THINKJAVA/src/main/resource/a.txt&quot;); int read = fis.read(bytes); String s = new String(bytes); System.out.println(s); System.out.println(read);&#125; catch (FileNotFoundException e) &#123; e.printStackTrace();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; è¯»åˆ°bytesé‡Œé¢ ,é™å®šè¯»çš„å­—èŠ‚ä¸ªæ•° 12345678910111213FileInputStream fis = null;try &#123; byte[] bytes = new byte[14]; fis = new FileInputStream(&quot;/Users/john/Documents/jywork/THINKJAVA/src/main/resource/a.txt&quot;); int read = fis.read(bytes,0,4); String s = new String(bytes); System.out.println(s); System.out.println(read);&#125; catch (FileNotFoundException e) &#123; e.printStackTrace();&#125; catch (IOException e) &#123; e.printStackTrace();&#125; å¯¹äºŽä¸ºä»€ä¹ˆå¿…é¡»ç»§æ‰¿è£…é¥°å™¨çˆ¶ç±» FilterInputStreamçš„æ€è€ƒ å®žé™…ä¸Šï¼Œå¦‚æžœåŽ»æŸ¥çœ‹ JDK çš„æºç ï¼Œä½ ä¼šå‘çŽ°ï¼ŒBufferedInputStreamã€DataInputStream å¹¶éžç»§æ‰¿è‡ª InputStreamï¼Œè€Œæ˜¯å¦å¤–ä¸€ä¸ªå« FilterInputStream çš„ç±»ã€‚é‚£è¿™åˆæ˜¯å‡ºäºŽä»€ä¹ˆæ ·çš„è®¾è®¡æ„å›¾ï¼Œæ‰å¼•å…¥è¿™æ ·ä¸€ä¸ªç±»å‘¢ï¼Ÿæˆ‘ä»¬å†é‡æ–°æ¥çœ‹ä¸€ä¸‹ BufferedInputStream ç±»çš„ä»£ç ã€‚InputStream æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»è€ŒéžæŽ¥å£ï¼Œè€Œä¸”å®ƒçš„å¤§éƒ¨åˆ†å‡½æ•°ï¼ˆæ¯”å¦‚ read()ã€available()ï¼‰éƒ½æœ‰é»˜è®¤å®žçŽ°ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ BufferedInputStream ç±»ä¸­é‡æ–°å®žçŽ°é‚£äº›éœ€è¦å¢žåŠ ç¼“å­˜åŠŸèƒ½çš„å‡½æ•°å°±å¯ä»¥äº†ï¼Œå…¶ä»–å‡½æ•°ç»§æ‰¿ InputStream çš„é»˜è®¤å®žçŽ°ã€‚ä½†å®žé™…ä¸Šï¼Œè¿™æ ·åšæ˜¯è¡Œä¸é€šçš„ã€‚å¯¹äºŽå³ä¾¿æ˜¯ä¸éœ€è¦å¢žåŠ ç¼“å­˜åŠŸèƒ½çš„å‡½æ•°æ¥è¯´ï¼ŒBufferedInputStream è¿˜æ˜¯å¿…é¡»æŠŠå®ƒé‡æ–°å®žçŽ°ä¸€éï¼Œç®€å•åŒ…è£¹å¯¹ InputStream å¯¹è±¡çš„å‡½æ•°è°ƒç”¨ã€‚å…·ä½“çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚å¦‚æžœä¸é‡æ–°å®žçŽ°ï¼Œé‚£ BufferedInputStream ç±»å°±æ— æ³•å°†æœ€ç»ˆè¯»å–æ•°æ®çš„ä»»åŠ¡ï¼Œå§”æ‰˜ç»™ä¼ é€’è¿›æ¥çš„ InputStream å¯¹è±¡æ¥å®Œæˆã€‚è¿™ä¸€éƒ¨åˆ†ç¨å¾®æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œä½ è‡ªå·±å¤šæ€è€ƒä¸€ä¸‹ã€‚","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"WebView","slug":"WebView","date":"2017-09-01T08:07:15.000Z","updated":"2023-01-02T03:31:39.097Z","comments":true,"path":"2017/09/01/WebView/","link":"","permalink":"https://noteforme.github.io/2017/09/01/WebView/","excerpt":"","text":"https://developer.android.com/guide/webapps/webview.html ä½¿ç”¨åŠ è½½apkåŒ…ä¸­çš„htmlé¡µé¢ webView.loadUrl(&quot;file:///android_asset/java.html&quot;); Enabling JavaScript12345678910111213141516171819202122WebView myWebView &#x3D; (WebView) findViewById(R.id.webview);WebSettings webSettings &#x3D; myWebView.getSettings(); &#x2F;&#x2F;æ”¯æŒJavaScript&#x2F;&#x2F; webSettings.setJavaScriptEnabled(true); &#x2F;&#x2F; åœ¨ onStop å’Œ onResume é‡Œåˆ†åˆ«æŠŠ setJavaScriptEnabled() ç»™è®¾ç½®æˆ false å’Œ true å³å¯ &#x2F;** * è®¾ç½®è‡ªé€‚åº”å±å¹•,ä¸¤è€…åˆç”¨ *&#x2F; webSettings.setUseWideViewPort(true); &#x2F;&#x2F;å°†å›¾ç‰‡è°ƒæ•´åˆ°é€‚åˆwebviewçš„å¤§å° webSettings.setLoadWithOverviewMode(true); &#x2F;&#x2F;ç¼©æ”¾è‡³å±å¹•çš„å¤§å° &#x2F;** * ç¼©æ”¾æ“ä½œ *&#x2F; webSettings.setSupportZoom(true); &#x2F;&#x2F;æ”¯æŒç¼©æ”¾ï¼Œé»˜è®¤ä¸ºtrueã€‚æ˜¯ä¸‹é¢é‚£ä¸ªçš„å‰æã€‚ webSettings.setBuiltInZoomControls(true); &#x2F;&#x2F;è®¾ç½®å†…ç½®çš„ç¼©æ”¾æŽ§ä»¶ã€‚è‹¥ä¸ºfalseï¼Œåˆ™è¯¥WebViewä¸å¯ç¼©æ”¾ webSettings.setDisplayZoomControls(false);&#x2F;&#x2F;éšè—åŽŸç”Ÿçš„ç¼©æ”¾æŽ§ä»¶&#x2F;&#x2F; myWebView.setWebChromeClient(new MyWebViewClient()); myWebView.setWebViewClient(new MyViewClient()); ä¸Šé¢æ˜¯ä¸€äº›å¸¸ç”¨çš„æ“ä½œ Binding JavaScript code to Android code(JSäº¤äº’)When developing a web application thatâ€™s designed specifically for the WebView in your Android application, you can create interfaces between your JavaScript code and client-side Android code. For example, your JavaScript code can call a method in your Android code to display a Dialog, instead of using JavaScriptâ€™s alert() function. To bind a new interface between your JavaScript and Android code, call addJavascriptInterface(), passing it a class instance to bind to your JavaScript and an interface name that your JavaScript can call to access the class. office Demo 12345678910111213inner class WebLoginInterface(context: Context?) &#123; @JavascriptInterface fun showToast() &#123; Timber.i(&quot;appLogin&quot;) mWebView?.post &#123; val mSessionId &#x3D; SharedPreferencesUtils.getParam(AppCtxUtil.getApp(), GsonUtil.SHARE_TOKEN_KEY, &quot;&quot;) as String Timber.i(&quot;mSessionId $&#123;mSessionId&#125;&quot;) val jsMethodName &#x3D; &quot;javascript:appLoginCallBack(&#39;$mSessionId&#39;,&#39;4&#39;)&quot;; &#x2F;&#x2F;éœ€è¦å‚æ•°çš„JSå‡½æ•°å Timber.i(&quot;jsMethodName $jsMethodName&quot;) mWebView?.loadUrl(jsMethodName) &#125; &#125; &#125; æ³¨æ„ Caution: If youâ€™ve set your targetSdkVersion to 17 or higher, you must add the @JavascriptInterface annotation to any method that you want available to your JavaScript (the method must also be public). If you do not provide the annotation, the method is not accessible by your web page when running on Android 4.2 or higher. htmlå°ä¾‹å­ 1234567&lt;input type&#x3D;&quot;button&quot; value&#x3D;&quot;Say hello&quot; onClick&#x3D;&quot;showAndroidToast(&#39;Hello Android!&#39;)&quot; &#x2F;&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; function showAndroidToast(toast) &#123; Android.showToast(toast); &#125;&lt;&#x2F;script&gt; æŽ¥ç€åŠ è½½JS 12WebView webView &#x3D; (WebView) findViewById(R.id.webview);webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;); http://www.jianshu.com/p/3c94ae673e2a http://www.jianshu.com/p/c20513cad758 ç¼“å­˜æ–¹æ¡ˆoffice (åŽŸç”Ÿç¼“å­˜)1234567891011121314 WebSettings webSettings &#x3D; wbNews.getSettings(); webSettings.setJavaScriptEnabled(true);&#x2F;&#x2F; å¯ç”¨æ”¯æŒjavascript webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);&#x2F;&#x2F;ç¼“å­˜æ¨¡å¼ webSettings.setDomStorageEnabled(true); &#x2F;&#x2F; å¼€å¯DOM storage API åŠŸèƒ½ &#x2F;&#x2F; å¼€å¯database storage APIåŠŸèƒ½ webSettings.setDatabaseEnabled(true); webSettings.setAllowFileAccess(true);&#x2F;&#x2F;å¯ä»¥è®¿é—®æ–‡ä»¶ webSettings.setBuiltInZoomControls(true);&#x2F;&#x2F;æ”¯æŒç¼©æ”¾ &#x2F;&#x2F; è®¾ç½®æ•°æ®åº“ç¼“å­˜è·¯å¾„ String cacheDirPath &#x3D; getFilesDir().getAbsolutePath() + APP_CACHE_DIRNAME; webSettings.setAppCachePath(cacheDirPath); webSettings.setAppCacheEnabled(true); http://blog.csdn.net/coder_pig/article/details/48468969 å›¾ç‰‡æ›¿æ¢æ–¹å¼https://github.com/GcsSloop/diycode/blob/master/blog/journal-02.md å…¶ä»–å¸¸ç”¨æ–¹å¼ç¾Žå›¢ç‚¹è¯„è…¾è®¯ https://juejin.im/post/5a94f9d15188257a63113a74 é¡µé¢ç™½å±1webSettings.setDomStorageEnabled(true); &#x2F;&#x2F; å¼€å¯DOM storage API åŠŸèƒ½ â€‹ https://blog.csdn.net/ONLYMETAGAIN/article/details/78390643 https://iluhcm.com/2017/12/10/design-an-elegant-and-powerful-android-webview-part-one/ ä¸æ˜¾ç¤ºå›¾ç‰‡çš„é—®é¢˜ 1234webSettings.setBlockNetworkImage(false);if (Build.VERSION.SDK_INT&gt;&#x3D;Build.VERSION_CODES.LOLLIPOP)&#123; webSettings.setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);&#125; ä½†æ˜¯æˆ‘çš„è¿˜æ˜¯ä¸æ˜¾ç¤º 1android:hardwareAccelerated&#x3D;&quot;false&quot; WebViewç¼“å­˜åŠŸèƒ½ https://github.com/yale8848/CacheWebView http://blog.leanote.com/post/zbyzhlsp/%E6%BC%AB%E8%B0%88Android-Webview%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E5%9C%BA%E6%99%AF%E4%B8%8E%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95 https://www.zybuluo.com/zyl06/note/737188 https://juejin.im/post/5b94ca52e51d450e7d097f38 2ã€ç¼“å­˜æ¨¡å¼(5ç§) LOAD_CACHE_ONLY: ä¸ä½¿ç”¨ç½‘ç»œï¼Œåªè¯»å–æœ¬åœ°ç¼“å­˜æ•°æ® LOAD_DEFAULT: æ ¹æ®cache-controlå†³å®šæ˜¯å¦ä»Žç½‘ç»œä¸Šå–æ•°æ®ã€‚ LOAD_CACHE_NORMAL: API level 17ä¸­å·²ç»åºŸå¼ƒ, ä»ŽAPI level 11å¼€å§‹ä½œç”¨åŒLOAD_DEFAULTæ¨¡å¼ LOAD_NO_CACHE: ä¸ä½¿ç”¨ç¼“å­˜ï¼Œåªä»Žç½‘ç»œèŽ·å–æ•°æ®. LOAD_CACHE_ELSE_NETWORKï¼Œåªè¦æœ¬åœ°æœ‰ï¼Œæ— è®ºæ˜¯å¦è¿‡æœŸï¼Œæˆ–è€…no-cacheï¼Œéƒ½ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ã€‚å¦‚ï¼šwww.taobao.comçš„cache-controlä¸ºno-cacheï¼Œåœ¨æ¨¡å¼LOAD_DEFAULTä¸‹ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šä»Žç½‘ç»œä¸Šå–æ•°æ®ï¼Œå¦‚æžœæ²¡æœ‰ç½‘ç»œï¼Œå°±ä¼šå‡ºçŽ°é”™è¯¯é¡µé¢ï¼›åœ¨LOAD_CACHE_ELSE_NETWORKæ¨¡å¼ä¸‹ï¼Œæ— è®ºæ˜¯å¦æœ‰ç½‘ç»œï¼Œåªè¦æœ¬åœ°æœ‰ç¼“å­˜ï¼Œéƒ½ä½¿ç”¨ç¼“å­˜ã€‚æœ¬åœ°æ²¡æœ‰ç¼“å­˜æ—¶æ‰ä»Žç½‘ç»œä¸ŠèŽ·å–ã€‚www.360.com.cnçš„cache-controlä¸ºmax-age=60ï¼Œåœ¨ä¸¤ç§æ¨¡å¼ä¸‹éƒ½ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ•°æ®ã€‚ https://juejin.im/entry/5ad70987f265da239148a614 zipç¦»çº¿ç¼“å­˜ https://mp.weixin.qq.com/s/AV2SwFfwwJH7xyrIBJemgw å®‰å…¨é—®é¢˜WebViewæ¼æ´žçš„æ ¹æºåœ¨äºŽå¼ºåˆ¶å…¶è®¿é—®æ”»å‡»è€…æŽ§åˆ¶çš„ç½‘é¡µã€‚ç½‘é¡µä¸­å«æœ‰æ”»å‡»è€…å¯ä»¥æŽ§åˆ¶çš„JS,å› æ­¤å¯èƒ½é’“é±¼ï¼Œçªƒå–ç§æœ‰æ–‡ä»¶ï¼Œç”šè‡³æ˜¯ RCE,å¸¦æ¥æ¯”è¾ƒå¤§çš„å±å®³ã€‚ ä¸‹é¢ä¸»è¦æ˜¯4.4ç³»ç»Ÿä»¥ä¸Šçš„æœºåž‹ Webviewå¯†ç æ˜Žæ–‡å­˜å‚¨æ¼æ´žWebViewé»˜è®¤å¼€å¯å¯†ç ä¿å­˜åŠŸèƒ½mWebView.setSavePassword(true),å¦‚æžœæœªå…³é—­ï¼Œç”¨æˆ·è¾“å…¥å¯†ç æ—¶ï¼Œä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦ä¿å­˜å¯†ç ï¼Œå¦‚æžœé€‰æ˜¯ï¼Œå¯†ç ä¼šæ˜Žæ–‡ä¿å­˜åˆ° /data/data/com.package.name/databases/webview.db WebViewåŸŸæŽ§åˆ¶ä¸ä¸¥æ ¼æ¼æ´žsetAllowFileAccess(true) : çªƒå–APPä»»æ„ç›®å½•ä¸‹çš„ç§æœ‰æ–‡ä»¶ setAllowUniversalAccessFromFileURLs : å…è®¸é€šè¿‡fileåŸŸurlä¸­çš„ javascriptè®¿é—®å…¶ä»–çš„æºã€‚ æ–¹æ¡ˆ é€šè¿‡ä»¥ä¸‹è®¾ç½®ï¼Œé˜²æ­¢è¶Šæƒè®¿é—®ï¼Œè·¨åŸŸç­‰å®‰å…¨é—®é¢˜ 12345setAllowFileAccess(false)setAllowFileAccessFromFileURLs(false)setAllowUniversalAccessFromFileURLs(false) WebSettings.setSavePassword(false) å…³é—­å¯†ç ä¿å­˜æé†’åŠŸèƒ½ å»ºè®®å¼€å‘è€…é€šè¿‡ä»¥ä¸‹æ–¹å¼ç§»é™¤è¯¥JavaScriptæŽ¥å£ 12345removeJavascriptInterface(&quot;searchBoxJavaBridge_&quot;)removeJavascriptInterface(&quot;accessibility&quot;)ï¼›removeJavascriptInterface(&quot;accessibilityTraversal&quot;) https://zhuanlan.zhihu.com/p/21787366 https://zhuanlan.kanxue.com/article-14155.htm","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Camera","slug":"Camera","date":"2017-08-28T14:16:43.000Z","updated":"2021-08-19T11:11:43.750Z","comments":true,"path":"2017/08/28/Camera/","link":"","permalink":"https://noteforme.github.io/2017/08/28/Camera/","excerpt":"","text":"https://developer.android.com/training/camera/photobasics.html#TaskPath Get the thumbnail(ç¼©ç•¥å›¾)12345678public static final int REQUEST_IMAGE_CAPTURE = 1;private void btAlbum() &#123; Intent takePictureIntent = new Intent( Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI); startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);&#125; 123456789@Override public void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == Activity.RESULT_OK) &#123; data?.extras?.let &#123; val imageBitmap = it.get(&quot;data&quot;) as Bitmap img_show.setImageBitmap(imageBitmap) &#125; &#125; Save the full-size photo provider_camera.xml 123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;external-path name=&quot;my_images&quot; path=&quot;Android/data/com.zhujia.land/files/Pictures&quot; /&gt;&lt;/paths&gt; è·³è½¬æ‹ç…§ : è¿˜å¾—æ³¨æ„ç”³è¯·æƒé™ 1234567891011121314151617181920212223private void dispatchTakePictureIntent(int num) &#123; Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); if (takePictureIntent.resolveActivity(this.getPackageManager()) != null) &#123; try &#123; photoFile = createImageFile(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; if (photoFile == null) &#123; return; &#125; Uri imgUri; if (Build.VERSION.SDK_INT &lt; 24) &#123; imgUri = Uri.fromFile(photoFile); &#125; else &#123; //Android 7.0ç³»ç»Ÿå¼€å§‹ ä½¿ç”¨æœ¬åœ°çœŸå®žçš„Uriè·¯å¾„ä¸å®‰å…¨,ä½¿ç”¨FileProviderå°è£…å…±äº«Uri //å‚æ•°äºŒ:fileproviderç»å¯¹è·¯å¾„ com.dyb.testcamerademoï¼šé¡¹ç›®åŒ…å imgUri = FileProvider.getUriForFile(this, &quot;com.zhujia.land.fileprovider&quot;, photoFile); &#125; takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, imgUri); &#125; startActivityForResult(takePictureIntent, num); &#125; 12345678910111213override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) &#123; super.onActivityResult(requestCode, resultCode, data) if (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == Activity.RESULT_OK) &#123; //å¦‚æžœæ‹ç…§æˆåŠŸï¼Œå°†Uriç”¨BitmapFactoryçš„decodeStreamæ–¹æ³•è½¬ä¸ºBitmap val imageBitmap = BitmapFactory.decodeStream(photoURI?.let &#123; contentResolver.openInputStream( it ) &#125;) galleryAddPic(mImageUriFromFile) //å°†æ‹çš„ç…§ç‰‡æ·»åŠ åˆ°ç›¸å†Œ img_show.setImageBitmap(imageBitmap) &#125; &#125; ç…§ç‰‡æ·»åŠ åˆ°ç›¸å†Œ 123456789/** * å°†æ‹çš„ç…§ç‰‡æ·»åŠ åˆ°ç›¸å†Œ * * @param uri æ‹çš„ç…§ç‰‡çš„Uri */private fun galleryAddPic(uri: Uri?) &#123; val mediaScanIntent = Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,uri) sendBroadcast(mediaScanIntent)&#125; But it has a question 12345678910111213141516 fun createImageFile(context: Context): File? &#123; // Create an image file name val timeStamp: String = SimpleDateFormat(yyyyMMDD_HHmmss).format(Date())// val storageDir: File? = context.getExternalFilesDir(Environment.DIRECTORY_PICTURES) val storageDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) return File.createTempFile( &quot;JPEG_$&#123;timeStamp&#125;_&quot;, /* prefix */ &quot;.jpg&quot;, /* suffix */ storageDir /* directory */ ).apply &#123; // Save a file: path for use with ACTION_VIEW intents var currentPhotoPath = absolutePath Timber.i(&quot;createImageFile $currentPhotoPath&quot;) &#125; &#125; ACTION_MEDIA_SCANNER_SCAN_FILE è¿˜æœ‰ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼Œé‚£å°±æ˜¯ä¼ é€’è¿›åŽ»çš„æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼Œå¿…é¡»æ˜¯ä»¥ Environment.getExternalStorageDirectory() æ–¹æ³•çš„è¿”å›žå€¼å¼€å¤´ã€‚ è¿™æ · â€˜context.getExternalFilesDir(Environment.DIRECTORY_PICTURES)â€™ è¿™ä¸ªæš‚æ—¶æ²¡å¼„å¥½ https://juejin.im/post/5ae0541df265da0b9d77e45a https://www.jianshu.com/p/f269bcda335f# https://www.jianshu.com/p/26d29e187f89 servlethttps://my.oschina.net/u/2008084/blog/524937 7.0https://blog.csdn.net/u011418943/article/details/77712662 Android 10 https://mp.weixin.qq.com/s/31esIqMudRRDBY8JDs8D4A https://juejin.im/post/5a33a5106fb9a04525782db5","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"ConcurrencyThreadPool","slug":"ConcurrencyThreadPool","date":"2017-08-27T02:40:55.000Z","updated":"2021-08-19T14:06:15.145Z","comments":true,"path":"2017/08/27/ConcurrencyThreadPool/","link":"","permalink":"https://noteforme.github.io/2017/08/27/ConcurrencyThreadPool/","excerpt":"","text":"çº¿ç¨‹æ± çŠ¶æ€åˆ‡æ¢ 1ã€RUNNING (1) çŠ¶æ€è¯´æ˜Žï¼šçº¿ç¨‹æ± å¤„åœ¨RUNNINGçŠ¶æ€æ—¶ï¼Œèƒ½å¤ŸæŽ¥æ”¶æ–°ä»»åŠ¡ï¼Œä»¥åŠå¯¹å·²æ·»åŠ çš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚ (02) çŠ¶æ€åˆ‡æ¢ï¼šçº¿ç¨‹æ± çš„åˆå§‹åŒ–çŠ¶æ€æ˜¯RUNNINGã€‚æ¢å¥è¯è¯´ï¼Œçº¿ç¨‹æ± è¢«ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±å¤„äºŽRUNNINGçŠ¶æ€ï¼Œå¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æ•°ä¸º0ï¼ 1 2ã€ SHUTDOWN (1) çŠ¶æ€è¯´æ˜Žï¼šçº¿ç¨‹æ± å¤„åœ¨SHUTDOWNçŠ¶æ€æ—¶ï¼Œä¸æŽ¥æ”¶æ–°ä»»åŠ¡ï¼Œä½†èƒ½å¤„ç†å·²æ·»åŠ çš„ä»»åŠ¡ã€‚ (2) çŠ¶æ€åˆ‡æ¢ï¼šè°ƒç”¨çº¿ç¨‹æ± çš„shutdown()æŽ¥å£æ—¶ï¼Œçº¿ç¨‹æ± ç”±RUNNING -&gt; SHUTDOWNã€‚ 3ã€STOP (1) çŠ¶æ€è¯´æ˜Žï¼šçº¿ç¨‹æ± å¤„åœ¨STOPçŠ¶æ€æ—¶ï¼Œä¸æŽ¥æ”¶æ–°ä»»åŠ¡ï¼Œä¸å¤„ç†å·²æ·»åŠ çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¼šä¸­æ–­æ­£åœ¨å¤„ç†çš„ä»»åŠ¡ã€‚ (2) çŠ¶æ€åˆ‡æ¢ï¼šè°ƒç”¨çº¿ç¨‹æ± çš„shutdownNow()æŽ¥å£æ—¶ï¼Œçº¿ç¨‹æ± ç”±(RUNNING or SHUTDOWN ) -&gt; STOPã€‚ 4ã€TIDYING (1) çŠ¶æ€è¯´æ˜Žï¼šå½“æ‰€æœ‰çš„ä»»åŠ¡å·²ç»ˆæ­¢ï¼Œctlè®°å½•çš„â€ä»»åŠ¡æ•°é‡â€ä¸º0ï¼Œçº¿ç¨‹æ± ä¼šå˜ä¸ºTIDYINGçŠ¶æ€ã€‚å½“çº¿ç¨‹æ± å˜ä¸ºTIDYINGçŠ¶æ€æ—¶ï¼Œä¼šæ‰§è¡Œé’©å­å‡½æ•°terminated()ã€‚terminated()åœ¨ThreadPoolExecutorç±»ä¸­æ˜¯ç©ºçš„ï¼Œè‹¥ç”¨æˆ·æƒ³åœ¨çº¿ç¨‹æ± å˜ä¸ºTIDYINGæ—¶ï¼Œè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼›å¯ä»¥é€šè¿‡é‡è½½terminated()å‡½æ•°æ¥å®žçŽ°ã€‚ (2) çŠ¶æ€åˆ‡æ¢ï¼šå½“çº¿ç¨‹æ± åœ¨SHUTDOWNçŠ¶æ€ä¸‹ï¼Œé˜»å¡žé˜Ÿåˆ—ä¸ºç©ºå¹¶ä¸”çº¿ç¨‹æ± ä¸­æ‰§è¡Œçš„ä»»åŠ¡ä¹Ÿä¸ºç©ºæ—¶ï¼Œå°±ä¼šç”± SHUTDOWN -&gt; TIDYINGã€‚ å½“çº¿ç¨‹æ± åœ¨STOPçŠ¶æ€ä¸‹ï¼Œçº¿ç¨‹æ± ä¸­æ‰§è¡Œçš„ä»»åŠ¡ä¸ºç©ºæ—¶ï¼Œå°±ä¼šç”±STOP -&gt; TIDYINGã€‚ 5ã€ TERMINATED (1) çŠ¶æ€è¯´æ˜Žï¼šçº¿ç¨‹æ± å½»åº•ç»ˆæ­¢ï¼Œå°±å˜æˆTERMINATEDçŠ¶æ€ã€‚ (2) çŠ¶æ€åˆ‡æ¢ï¼šçº¿ç¨‹æ± å¤„åœ¨TIDYINGçŠ¶æ€æ—¶ï¼Œæ‰§è¡Œå®Œterminated()ä¹‹åŽï¼Œå°±ä¼šç”± TIDYING -&gt; TERMINATEDã€‚ https://blog.csdn.net/nmjhehe/article/details/115901549 https://www.cnblogs.com/east7/p/14417977.html çº¿ç¨‹æ± å·¥ä½œåŽŸç† å„å‚æ•°å«ä¹‰corePoolSizeçº¿ç¨‹æ± åˆå§‹åŒ–æ—¶çº¿ç¨‹æ•°é»˜è®¤ä¸º 0ï¼Œå½“æœ‰æ–°çš„ä»»åŠ¡æäº¤åŽï¼Œä¼šåˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æžœä¸åšç‰¹æ®Šè®¾ç½®ï¼Œæ­¤åŽçº¿ç¨‹æ•°é€šå¸¸ä¸ä¼šå†å°äºŽ corePoolSize ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ ¸å¿ƒçº¿ç¨‹ï¼Œå³ä¾¿æœªæ¥å¯èƒ½æ²¡æœ‰å¯æ‰§è¡Œçš„ä»»åŠ¡ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚ maximumPoolSizeâ€‹ maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¼šåœ¨ corePoolSize æ ¸å¿ƒçº¿ç¨‹æ•°çš„åŸºç¡€ä¸Šç»§ç»­åˆ›å»ºçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå‡è®¾ä»»åŠ¡è¢«ä¸æ–­æäº¤ï¼Œçº¿ç¨‹æ± ä¼šæŒç»­åˆ›å»ºçº¿ç¨‹ç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ° maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°ï¼Œå¦‚æžœä¾ç„¶æœ‰ä»»åŠ¡è¢«æäº¤ï¼Œè¿™å°±è¶…è¿‡äº†çº¿ç¨‹æ± çš„æœ€å¤§å¤„ç†èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹æ± å°±ä¼šæ‹’ç»è¿™äº›ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®žé™…ä¸Šä»»åŠ¡è¿›æ¥ä¹‹åŽï¼Œçº¿ç¨‹æ± ä¼šé€ä¸€åˆ¤æ–­ corePoolSizeã€workQueueã€maximumPoolSizeï¼Œå¦‚æžœä¾ç„¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œåˆ™ä¼šæ‹’ç»ä»»åŠ¡ã€‚ keepAliveTime+æ—¶é—´å•ä½â€‹ å½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡å¤šäºŽæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œè€Œæ­¤æ—¶åˆæ²¡æœ‰ä»»åŠ¡å¯åšï¼Œçº¿ç¨‹æ± å°±ä¼šæ£€æµ‹çº¿ç¨‹çš„ keepAliveTimeï¼Œå¦‚æžœè¶…è¿‡è§„å®šçš„æ—¶é—´ï¼Œæ— äº‹å¯åšçš„çº¿ç¨‹å°±ä¼šè¢«é”€æ¯ï¼Œä»¥ä¾¿å‡å°‘å†…å­˜çš„å ç”¨å’Œèµ„æºæ¶ˆè€—ã€‚ä½†æ˜¯è¦æ³¨æ„åˆ°äº†æ ¸å¿ƒçº¿ç¨‹æ•°å°±ä¸ä¼šé”€æ¯äº†ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æäº¤ä»»åŠ¡åŽï¼Œçº¿ç¨‹æ± é¦–å…ˆä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ•°ï¼Œå¦‚æžœæ­¤æ—¶çº¿ç¨‹æ•°å°äºŽæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œæ¯”å¦‚æœ€å¼€å§‹çº¿ç¨‹æ•°é‡ä¸º 0ï¼Œåˆ™æ–°å»ºçº¿ç¨‹å¹¶æ‰§è¡Œä»»åŠ¡ï¼Œéšç€ä»»åŠ¡çš„ä¸æ–­å¢žåŠ ï¼Œçº¿ç¨‹æ•°ä¼šé€æ¸å¢žåŠ å¹¶è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œæ­¤æ—¶å¦‚æžœä»æœ‰ä»»åŠ¡è¢«ä¸æ–­æäº¤ï¼Œå°±ä¼šè¢«æ”¾å…¥ workQueue ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…æ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œå®Œå½“å‰ä»»åŠ¡åŽé‡æ–°ä»Ž workQueue ä¸­æå–æ­£åœ¨ç­‰å¾…è¢«æ‰§è¡Œçš„ä»»åŠ¡ã€‚ æ­¤æ—¶ï¼Œå‡è®¾æˆ‘ä»¬çš„ä»»åŠ¡ç‰¹åˆ«çš„å¤šï¼Œå·²ç»è¾¾åˆ°äº† workQueue çš„å®¹é‡ä¸Šé™ï¼Œè¿™æ—¶çº¿ç¨‹æ± å°±ä¼šå¯åŠ¨åŽå¤‡åŠ›é‡ï¼Œä¹Ÿå°±æ˜¯ maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¼šåœ¨ corePoolSize æ ¸å¿ƒçº¿ç¨‹æ•°çš„åŸºç¡€ä¸Šç»§ç»­åˆ›å»ºçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå‡è®¾ä»»åŠ¡è¢«ä¸æ–­æäº¤ï¼Œçº¿ç¨‹æ± ä¼šæŒç»­åˆ›å»ºçº¿ç¨‹ç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ° maximumPoolSize æœ€å¤§çº¿ç¨‹æ•°ï¼Œå¦‚æžœä¾ç„¶æœ‰ä»»åŠ¡è¢«æäº¤ï¼Œè¿™å°±è¶…è¿‡äº†çº¿ç¨‹æ± çš„æœ€å¤§å¤„ç†èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹æ± å°±ä¼šæ‹’ç»è¿™äº›ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®žé™…ä¸Šä»»åŠ¡è¿›æ¥ä¹‹åŽï¼Œçº¿ç¨‹æ± ä¼šé€ä¸€åˆ¤æ–­ corePoolSizeã€workQueueã€maximumPoolSizeï¼Œå¦‚æžœä¾ç„¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œåˆ™ä¼šæ‹’ç»ä»»åŠ¡ã€‚ 6 ç§çº¿ç¨‹æ±  FixedThreadPool å®ƒçš„æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°æ˜¯ä¸€æ ·çš„ CachedThreadPool å®ƒçš„ç‰¹ç‚¹åœ¨äºŽçº¿ç¨‹æ•°æ˜¯å‡ ä¹Žå¯ä»¥æ— é™å¢žåŠ çš„ï¼ˆå®žé™…æœ€å¤§å¯ä»¥è¾¾åˆ° Integer.MAX_VALUEï¼Œä¸º 2^31-1),å½“æˆ‘ä»¬æäº¤ä¸€ä¸ªä»»åŠ¡åŽï¼Œçº¿ç¨‹æ± ä¼šåˆ¤æ–­å·²åˆ›å»ºçš„çº¿ç¨‹ä¸­æ˜¯å¦æœ‰ç©ºé—²çº¿ç¨‹ï¼Œå¦‚æžœæœ‰ç©ºé—²çº¿ç¨‹åˆ™å°†ä»»åŠ¡ç›´æŽ¥æŒ‡æ´¾ç»™ç©ºé—²çº¿ç¨‹ï¼Œå¦‚æžœæ²¡æœ‰ç©ºé—²çº¿ç¨‹ï¼Œåˆ™æ–°å»ºçº¿ç¨‹åŽ»æ‰§è¡Œä»»åŠ¡ï¼Œè¿™æ ·å°±åšåˆ°äº†åŠ¨æ€åœ°æ–°å¢žçº¿ç¨‹ã€‚ 12345ExecutorService service = Executors.newCachedThreadPool(); for (int i = 0; i &lt; 1000; i++) &#123; service.execute(new Task() &#123; &#125;); &#125; ä½¿ç”¨ for å¾ªçŽ¯æäº¤ 1000 ä¸ªä»»åŠ¡ç»™ CachedThreadPoolï¼Œå‡è®¾è¿™äº›ä»»åŠ¡å¤„ç†çš„æ—¶é—´éžå¸¸é•¿ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿå› ä¸º for å¾ªçŽ¯æäº¤ä»»åŠ¡çš„æ“ä½œæ˜¯éžå¸¸å¿«çš„ï¼Œä½†æ‰§è¡Œä»»åŠ¡å´æ¯”è¾ƒè€—æ—¶ï¼Œå°±å¯èƒ½å¯¼è‡´ 1000 ä¸ªä»»åŠ¡éƒ½æäº¤å®Œäº†ä½†ç¬¬ä¸€ä¸ªä»»åŠ¡è¿˜æ²¡æœ‰è¢«æ‰§è¡Œå®Œï¼Œæ‰€ä»¥æ­¤æ—¶ CachedThreadPool å°±å¯ä»¥åŠ¨æ€çš„ä¼¸ç¼©çº¿ç¨‹æ•°é‡ï¼Œéšç€ä»»åŠ¡çš„æäº¤ï¼Œä¸åœåœ°åˆ›å»º 1000 ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œè€Œå½“ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åŽï¼Œå‡è®¾æ²¡æœ‰æ–°çš„ä»»åŠ¡äº†ï¼Œé‚£ä¹ˆå¤§é‡çš„é—²ç½®çº¿ç¨‹åˆä¼šé€ æˆå†…å­˜èµ„æºçš„æµªè´¹ï¼Œè¿™æ—¶çº¿ç¨‹æ± å°±ä¼šæ£€æµ‹çº¿ç¨‹åœ¨ 60 ç§’å†…æœ‰æ²¡æœ‰å¯æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æžœæ²¡æœ‰å°±ä¼šè¢«é”€æ¯ï¼Œæœ€ç»ˆçº¿ç¨‹æ•°é‡ä¼šå‡ä¸º 0ã€‚ ScheduledThreadPool å‘¨æœŸæ€§çš„æ‰§è¡Œä»»åŠ¡ SingleThreadExecutor å®ƒä¼šä½¿ç”¨å”¯ä¸€çš„çº¿ç¨‹åŽ»æ‰§è¡Œä»»åŠ¡ï¼ŒåŽŸç†å’Œ FixedThreadPool æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è¿™é‡Œçº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œå¦‚æžœçº¿ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡çš„è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œçº¿ç¨‹æ± ä¹Ÿä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡ŒåŽç»­çš„ä»»åŠ¡ SingleThreadScheduledExecutor å®ƒå®žé™…å’Œç¬¬ä¸‰ç§ ScheduledThreadPool çº¿ç¨‹æ± éžå¸¸ç›¸ä¼¼ï¼Œå®ƒåªæ˜¯ ScheduledThreadPool çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå†…éƒ¨åªæœ‰ä¸€ä¸ªçº¿ç¨‹. ForkJoinPool æˆ‘ä»¬æœ‰ä¸€ä¸ª Taskï¼Œè¿™ä¸ª Task å¯ä»¥äº§ç”Ÿä¸‰ä¸ªå­ä»»åŠ¡ï¼Œä¸‰ä¸ªå­ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œå®Œæ¯•åŽå°†ç»“æžœæ±‡æ€»ç»™ Resultã€‚ æ‹’ç»ç­–ç•¥ ç¬¬ä¸€ç§æ‹’ç»ç­–ç•¥æ˜¯ AbortPolicyï¼Œè¿™ç§æ‹’ç»ç­–ç•¥åœ¨æ‹’ç»ä»»åŠ¡æ—¶ï¼Œä¼šç›´æŽ¥æŠ›å‡ºä¸€ä¸ªç±»åž‹ä¸º RejectedExecutionException çš„ RuntimeExceptionï¼Œè®©ä½ æ„ŸçŸ¥åˆ°ä»»åŠ¡è¢«æ‹’ç»äº†ï¼ŒäºŽæ˜¯ä½ ä¾¿å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘é€‰æ‹©é‡è¯•æˆ–è€…æ”¾å¼ƒæäº¤ç­‰ç­–ç•¥ã€‚ ç¬¬äºŒç§æ‹’ç»ç­–ç•¥æ˜¯ DiscardPolicyï¼Œè¿™ç§æ‹’ç»ç­–ç•¥æ­£å¦‚å®ƒçš„åå­—æ‰€æè¿°çš„ä¸€æ ·ï¼Œå½“æ–°ä»»åŠ¡è¢«æäº¤åŽç›´æŽ¥è¢«ä¸¢å¼ƒæŽ‰ï¼Œä¹Ÿä¸ä¼šç»™ä½ ä»»ä½•çš„é€šçŸ¥ï¼Œç›¸å¯¹è€Œè¨€å­˜åœ¨ä¸€å®šçš„é£Žé™©ï¼Œå› ä¸ºæˆ‘ä»¬æäº¤çš„æ—¶å€™æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ªä»»åŠ¡ä¼šè¢«ä¸¢å¼ƒï¼Œå¯èƒ½é€ æˆæ•°æ®ä¸¢å¤±ã€‚ ç¬¬ä¸‰ç§æ‹’ç»ç­–ç•¥æ˜¯ DiscardOldestPolicyï¼Œå¦‚æžœçº¿ç¨‹æ± æ²¡è¢«å…³é—­ä¸”æ²¡æœ‰èƒ½åŠ›æ‰§è¡Œï¼Œåˆ™ä¼šä¸¢å¼ƒä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å¤´ç»“ç‚¹ï¼Œé€šå¸¸æ˜¯å­˜æ´»æ—¶é—´æœ€é•¿çš„ä»»åŠ¡ï¼Œè¿™ç§ç­–ç•¥ä¸Žç¬¬äºŒç§ä¸åŒä¹‹å¤„åœ¨äºŽå®ƒä¸¢å¼ƒçš„ä¸æ˜¯æœ€æ–°æäº¤çš„ï¼Œè€Œæ˜¯é˜Ÿåˆ—ä¸­å­˜æ´»æ—¶é—´æœ€é•¿çš„ï¼Œè¿™æ ·å°±å¯ä»¥è…¾å‡ºç©ºé—´ç»™æ–°æäº¤çš„ä»»åŠ¡ï¼Œä½†åŒç†å®ƒä¹Ÿå­˜åœ¨ä¸€å®šçš„æ•°æ®ä¸¢å¤±é£Žé™©ã€‚ ç¬¬å››ç§æ‹’ç»ç­–ç•¥æ˜¯ CallerRunsPolicyï¼Œç›¸å¯¹è€Œè¨€å®ƒå°±æ¯”è¾ƒå®Œå–„äº†ï¼Œå½“æœ‰æ–°ä»»åŠ¡æäº¤åŽï¼Œå¦‚æžœçº¿ç¨‹æ± æ²¡è¢«å…³é—­ä¸”æ²¡æœ‰èƒ½åŠ›æ‰§è¡Œï¼Œåˆ™æŠŠè¿™ä¸ªä»»åŠ¡äº¤äºŽæäº¤ä»»åŠ¡çš„çº¿ç¨‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è°æäº¤ä»»åŠ¡ï¼Œè°å°±è´Ÿè´£æ‰§è¡Œä»»åŠ¡ã€‚è¿™æ ·åšä¸»è¦æœ‰ä¸¤ç‚¹å¥½å¤„ã€‚ç¬¬ä¸€ç‚¹æ–°æäº¤çš„ä»»åŠ¡ä¸ä¼šè¢«ä¸¢å¼ƒï¼Œè¿™æ ·ä¹Ÿå°±ä¸ä¼šé€ æˆä¸šåŠ¡æŸå¤±ã€‚ç¬¬äºŒç‚¹å¥½å¤„æ˜¯ï¼Œç”±äºŽè°æäº¤ä»»åŠ¡è°å°±è¦è´Ÿè´£æ‰§è¡Œä»»åŠ¡ï¼Œè¿™æ ·æäº¤ä»»åŠ¡çš„çº¿ç¨‹å°±å¾—è´Ÿè´£æ‰§è¡Œä»»åŠ¡ï¼Œè€Œæ‰§è¡Œä»»åŠ¡åˆæ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œåœ¨è¿™æ®µæœŸé—´ï¼Œæäº¤ä»»åŠ¡çš„çº¿ç¨‹è¢«å ç”¨ï¼Œä¹Ÿå°±ä¸ä¼šå†æäº¤æ–°çš„ä»»åŠ¡ï¼Œå‡ç¼“äº†ä»»åŠ¡æäº¤çš„é€Ÿåº¦ï¼Œç›¸å½“äºŽæ˜¯ä¸€ä¸ªè´Ÿåé¦ˆã€‚åœ¨æ­¤æœŸé—´ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ä¹Ÿå¯ä»¥å……åˆ†åˆ©ç”¨è¿™æ®µæ—¶é—´æ¥æ‰§è¡ŒæŽ‰ä¸€éƒ¨åˆ†ä»»åŠ¡ï¼Œè…¾å‡ºä¸€å®šçš„ç©ºé—´ï¼Œç›¸å½“äºŽæ˜¯ç»™äº†çº¿ç¨‹æ± ä¸€å®šçš„ç¼“å†²æœŸã€‚ æäº¤ä»»åŠ¡çš„çº¿ç¨‹æ˜¯ä¸å›ºå®šçš„ï¼Œå–å†³äºŽå…·ä½“æ˜¯å“ªä¸ªçº¿ç¨‹æ‰§è¡Œsubmitç­‰æ–¹æ³•çš„ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=248 çº¿ç¨‹æ•°é‡å’ŒCPUæ ¸æ•°å…³ç³»çº¿ç¨‹æ•° = CPU æ ¸å¿ƒæ•° *ï¼ˆ1+å¹³å‡ç­‰å¾…æ—¶é—´/å¹³å‡å·¥ä½œæ—¶é—´ï¼‰ çº¿ç¨‹å¹³å‡ç­‰å¾…æ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œå°±éœ€è¦è¶Šå¤šçš„çº¿ç¨‹ è€—æ—¶ IO åž‹ä»»åŠ¡ , æ¯”å¦‚æ•°æ®åº“ã€æ–‡ä»¶çš„è¯»å†™ï¼Œç½‘ç»œé€šä¿¡ç­‰ä»»åŠ¡ï¼Œè¿™ç§ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯å¹¶ä¸ä¼šç‰¹åˆ«æ¶ˆè€— CPU èµ„æºï¼Œä½†æ˜¯ IO æ“ä½œå¾ˆè€—æ—¶ï¼Œæ€»ä½“ä¼šå ç”¨æ¯”è¾ƒå¤šçš„æ—¶é—´ , å› ä¸º IO è¯»å†™é€Ÿåº¦ç›¸æ¯”äºŽ CPU çš„é€Ÿåº¦è€Œè¨€æ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œå¦‚æžœæˆ‘ä»¬è®¾ç½®è¿‡å°‘çš„çº¿ç¨‹æ•°ï¼Œå°±å¯èƒ½å¯¼è‡´ CPU èµ„æºçš„æµªè´¹,è€Œå¦‚æžœæˆ‘ä»¬è®¾ç½®æ›´å¤šçš„çº¿ç¨‹æ•°ï¼Œé‚£ä¹ˆå½“ä¸€éƒ¨åˆ†çº¿ç¨‹æ­£åœ¨ç­‰å¾… IO çš„æ—¶å€™ï¼Œå®ƒä»¬æ­¤æ—¶å¹¶ä¸éœ€è¦ CPU æ¥è®¡ç®—ï¼Œé‚£ä¹ˆå¦å¤–çš„çº¿ç¨‹ä¾¿å¯ä»¥åˆ©ç”¨ CPU åŽ»æ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ï¼Œäº’ä¸å½±å“ï¼Œè¿™æ ·çš„è¯åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…çš„ä»»åŠ¡å°±ä¼šå‡å°‘ï¼Œå¯ä»¥æ›´å¥½åœ°åˆ©ç”¨èµ„æºã€‚ çº¿ç¨‹çš„å¹³å‡å·¥ä½œæ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œå°±éœ€è¦è¶Šå°‘çš„çº¿ç¨‹ å¹³å‡å·¥ä½œæ—¶é—´é•¿ : CPUå¯†é›†åž‹ä»»åŠ¡ï¼ŒåŠ å¯†ã€è§£å¯†ã€åŽ‹ç¼©ã€è®¡ç®—ç­‰ä¸€ç³»åˆ—éœ€è¦å¤§é‡è€—è´¹ CPU èµ„æºçš„ä»»åŠ¡ã€‚å› ä¸ºè®¡ç®—ä»»åŠ¡éžå¸¸é‡ï¼Œä¼šå ç”¨å¤§é‡çš„ CPU èµ„æºï¼Œæ‰€ä»¥è¿™æ—¶ CPU çš„æ¯ä¸ªæ ¸å¿ƒå·¥ä½œåŸºæœ¬éƒ½æ˜¯æ»¡è´Ÿè·çš„ï¼Œè€Œæˆ‘ä»¬åˆè®¾ç½®äº†è¿‡å¤šçš„çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æƒ³åŽ»åˆ©ç”¨ CPU èµ„æºæ¥æ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡ï¼Œè¿™å°±ä¼šé€ æˆä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ­¤æ—¶çº¿ç¨‹æ•°çš„å¢žå¤šå¹¶æ²¡æœ‰è®©æ€§èƒ½æå‡ï¼Œåè€Œç”±äºŽçº¿ç¨‹æ•°é‡è¿‡å¤šä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ å¯ä»¥é€šè¿‡å†™ä»£ç ç­‰åŠžæ³•ç»Ÿè®¡åˆ°å„éƒ¨åˆ†è¯­å¥çš„è¿è¡Œæ—¶é•¿ å¦‚æžœæˆ‘ä»¬æ‰§è¡Œçš„ä»»åŠ¡ç±»åž‹ä¸æ˜¯å›ºå®šçš„ï¼Œæ¯”å¦‚å¯èƒ½ä¸€æ®µæ—¶é—´æ˜¯ CPU å¯†é›†åž‹ï¼Œå¦ä¸€æ®µæ—¶é—´æ˜¯ IO å¯†é›†åž‹ï¼Œæˆ–æ˜¯åŒæ—¶æœ‰ä¸¤ç§ä»»åŠ¡ç›¸äº’æ··æ­ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæœ€å¤§çº¿ç¨‹æ•°è®¾ç½®æˆæ ¸å¿ƒçº¿ç¨‹æ•°çš„å‡ å€ï¼Œä»¥ä¾¿åº”å¯¹ä»»åŠ¡çªå‘æƒ…å†µã€‚å½“ç„¶æ›´å¥½çš„åŠžæ³•æ˜¯ç”¨ä¸åŒçš„çº¿ç¨‹æ± æ‰§è¡Œä¸åŒç±»åž‹çš„ä»»åŠ¡ï¼Œè®©ä»»åŠ¡æŒ‰ç…§ç±»åž‹åŒºåˆ†å¼€ï¼Œè€Œä¸æ˜¯æ··æ‚åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±å¯ä»¥æŒ‰ç…§ä¸Šä¸€è¯¾æ—¶ä¼°ç®—çš„çº¿ç¨‹æ•°æˆ–ç»è¿‡åŽ‹æµ‹å¾—åˆ°çš„ç»“æžœæ¥è®¾ç½®åˆç†çš„çº¿ç¨‹æ•°äº†ï¼Œè¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚ https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=254 é˜»å¡žé˜Ÿåˆ—5ç§å¸¸è§çš„çº¿ç¨‹æ±  12345ExecutorService fixedThreadPool = Executors.newFixedThreadPool(1); //LinkedBlockingQueueExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor(); // LinkedBlockingQueueExecutorService cachedThreadPool = Executors.newCachedThreadPool(); // SynchronousQueueScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(1); //DelayedWorkQueueScheduledExecutorService singleThreadScheduledExecutor = Executors.newSingleThreadScheduledExecutor(); //DelayedWorkQueue ä¸Šå›¾ å‰é¢æ˜¯çº¿ç¨‹æ± ï¼ŒåŽé¢æ˜¯ä½¿ç”¨çš„é˜»å¡žé˜Ÿåˆ— LinkedBlockingQueue (FixedThreadPool,SingleThreadExector) ä½¿ç”¨çš„æœ‰ FixedThreadPool ,SingleThreadExector,å®ƒä»¬ä½¿ç”¨çš„é˜»å¡žé˜Ÿåˆ—æ˜¯å®¹é‡ä¸º Integer.MAX_VALUE çš„ LinkedBlockingQueue,å¯ä»¥è®¤ä¸ºæ˜¯æ— ç•Œé˜Ÿåˆ—ã€‚ç”±äºŽ FixedThreadPool çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŠžæ³•å¢žåŠ ç‰¹åˆ«å¤šçš„çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œè¿™æ—¶å°±éœ€è¦ LinkedBlockingQueue è¿™æ ·ä¸€ä¸ªæ²¡æœ‰å®¹é‡é™åˆ¶çš„é˜»å¡žé˜Ÿåˆ—æ¥å­˜æ”¾ä»»åŠ¡ã€‚ ç¼ºç‚¹: æœ€ç»ˆå¤§é‡å †ç§¯çš„ä»»åŠ¡ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œå¹¶å‘ç”Ÿ OOM ï¼Œä¹Ÿå°±æ˜¯OutOfMemoryError. SynchronousQueue (CachedThreadPool) å¯¹åº”çš„çº¿ç¨‹æ± æ˜¯ CachedThreadPool,çº¿ç¨‹æ±  CachedThreadPool çš„æœ€å¤§çº¿ç¨‹æ•°æ˜¯ Integer çš„æœ€å¤§å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºçº¿ç¨‹æ•°æ˜¯å¯ä»¥æ— é™æ‰©å±•çš„ã€‚å’ŒLinkedBlockingQueueé˜»å¡žé˜Ÿåˆ—é‡å¤ç›¸åï¼Œ ç¼ºç‚¹: å½“ä»»åŠ¡æ•°é‡ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´åˆ›å»ºéžå¸¸å¤šçš„çº¿ç¨‹ï¼Œæœ€ç»ˆè¶…è¿‡äº†æ“ä½œç³»ç»Ÿçš„ä¸Šé™è€Œæ— æ³•åˆ›å»ºæ–°çº¿ç¨‹ï¼Œæˆ–è€…å¯¼è‡´å†…å­˜ä¸è¶³ã€‚ DelayedWorkQueue (DelayedWorkQueue) é¡¾åæ€ä¹‰ï¼Œç‰¹ç‚¹å°±æ˜¯å¯ä»¥å»¶è¿Ÿæ‰§è¡Œä»»åŠ¡ ç¼ºç‚¹: å®ƒé‡‡ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯ DelayedWorkQueueï¼Œè¿™æ˜¯ä¸€ä¸ªå»¶è¿Ÿé˜Ÿåˆ—ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œæ‰€ä»¥å’Œ LinkedBlockingQueue ä¸€æ ·ï¼Œå¦‚æžœé˜Ÿåˆ—ä¸­å­˜æ”¾è¿‡å¤šçš„ä»»åŠ¡ï¼Œå°±å¯èƒ½å¯¼è‡´ OOM OkHttpçº¿ç¨‹æ± 12ThreadPoolExecutor executor = new ThreadPoolExecutor( 0, Integer.MAX_VALUE, 60, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;()); å¯ä»¥çœ‹åˆ° corePoolSize 0 , MaxPoolSize Integer.MAX_VALUE æ ¹æ®çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹ï¼š é¦–å…ˆæ ¸å¿ƒçº¿ç¨‹ï¼ŒcorePoolSize ä¸º0 ã€‚ æŠŠä»»åŠ¡åŠ å…¥SynchronousQueueï¼Œä½†æ˜¯è¿™ä¸ªé˜Ÿåˆ—åŠ å…¥å°±ä¼šå¤±è´¥ã€‚ åˆ›å»ºéžæ ¸å¿ƒçº¿ç¨‹ï¼Œæ•°é‡ä¸ºInteger.MAX_VALUEï¼Œå¯ä»¥åˆ›å»ºã€‚ å½“ä»»åŠ¡æ‰§è¡Œå®ŒåŽï¼Œ3åˆ›å»ºçš„éžæ ¸å¿ƒçº¿ç¨‹ æ ¹æ®keepAliveTimeæ—¶é—´ï¼Œé€æ­¥é”€æ¯ã€‚ é—®é¢˜OkHttpThreadPool.java 12345678910111213141516171819ThreadPoolExecutor executor = new ThreadPoolExecutor( 0, Integer.MAX_VALUE, 60, TimeUnit.SECONDS, new LinkedBlockingDeque&lt;&gt;());executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread()); while (true) &#123; &#125;&#125;);executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread());&#125;);executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread());&#125;); è¿è¡Œç»“æžœ: ä»»åŠ¡1Thread[pool-1-thread-1,5,main] å¦‚æžœ new LinkedBlockingDeque&lt;&gt;(1)èƒ½æ­£å¸¸æ‰§è¡Œï¼Œå› ä¸ºLinkedBlockingDequeåŠ å…¥ ä»»åŠ¡1 å°±æ»¡äº†ï¼ŒåŽé¢çš„ä»»åŠ¡åˆ›å»ºéžæ ¸å¿ƒçº¿ç¨‹ ä½†æ˜¯æœ‰ç‚¹ç–‘æƒ‘ï¼Œæˆ‘è¿™é‡Œæ ¸å¿ƒçº¿ç¨‹æ˜¯0ï¼Œä»»åŠ¡éƒ½åŠ å…¥åˆ°LinkedBlockingDeque, æŒ‰ç…§çº¿ç¨‹æ± æµç¨‹ï¼Œéžæ ¸å¿ƒå°±ä¸åº”è¯¥åˆ›å»ºå‘€ï¼Ÿæ€Žä¹ˆä»»åŠ¡1å°±æ‰§è¡Œäº†å‘¢ https://www.bilibili.com/video/BV15y4y1B7Rw?p=5 https://mp.weixin.qq.com/s/BHDrSgwUVXkzvswK1khidQ https://github.com/Snailclimb/programmer-advancement https://juejin.im/post/6855586076132655118 https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485441&amp;idx=1&amp;sn=303a25ab02fa9f14a319923e6b0d9759&amp;chksm=cea247caf9d5cedc3a5e1d31f26c08d8ae4c11c349fbdc91ac1d90d8b35807517accb5f5d527&amp;token=2128752750&amp;lang=zh_CN#rd","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[{"name":"concurrency","slug":"concurrency","permalink":"https://noteforme.github.io/tags/concurrency/"}]},{"title":"Handler","slug":"Handler","date":"2017-08-21T09:06:35.000Z","updated":"2021-12-10T09:58:02.917Z","comments":true,"path":"2017/08/21/Handler/","link":"","permalink":"https://noteforme.github.io/2017/08/21/Handler/","excerpt":"","text":"Handlerä½œç”¨æ—¢ç„¶processå†…çš„thread share their memories. why we need handler.æˆ‘ä»¬ç›´æŽ¥å¯ä»¥ subThread get data,èµ‹å€¼ç»™Ui threadçš„å˜é‡å‘€ã€‚ æ­£å¸¸æ¥è¯´æ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯åƒä¸‹é¢è¿™ç§æƒ…å†µã€‚ 12345678910111213141516171819202122232425public class MainActivity extends AppCompatActivity &#123; private static final String TAG = &quot;123&quot;; public static int anInt = 1; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); // å­ new Thread(new Runnable() &#123; @Override public void run() &#123; anInt = 2; Log.i(TAG, &quot;å­çº¿ç¨‹: &quot; + anInt); &#125; &#125;).start(); // ä¸» Log.i(TAG, &quot;ä¸»çº¿ç¨‹: &quot; + anInt); &#125;&#125;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç‰ˆæƒå£°æ˜Žï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œdevæ™´å¤©ã€çš„åŽŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŽŸæ–‡å‡ºå¤„é“¾æŽ¥åŠæœ¬å£°æ˜Žã€‚åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/qq_38350635/article/details/90440833 å¦‚ä¸Šï¼šä¸»çº¿ç¨‹å®šä¹‰äº†anIntï¼Œå­çº¿ç¨‹å¯¹å…¶ä¿®æ”¹ã€‚æˆ‘ä»¬å†åœ¨ä¸»çº¿ç¨‹æ‰“å°ï¼Œèƒ½å¾—åˆ°ä¿®æ”¹åŽçš„anInt = 2 å—ï¼Ÿ ç­”æ¡ˆï¼šä¸ç¡®å®š åŽŸå› ï¼šçº¿ç¨‹äº‰å¤ºcupä½¿ç”¨æƒé¡ºåºä¸ç¡®å®šï¼Œå¯èƒ½,å­çº¿ç¨‹å…ˆèŽ·å¾—ä½¿ç”¨æƒï¼Œåˆ™ä¸¤ä¸ªLogéƒ½æ‰“å°2ã€‚å½“ç„¶ä¸»çº¿ç¨‹å…ˆèŽ·å¾—ä½¿ç”¨æƒæ—¶ä¸»çº¿ç¨‹çš„logæ‰“å°æ•°å€¼ä¸º1ã€‚ è§£å†³æ–¹æ¡ˆ1ã€è®©å­çº¿ç¨‹å…ˆæ‰§è¡Œã€‚ æ¯”å¦‚ä¸»çº¿ç¨‹è®¾ç½®ä½Žä¼˜å…ˆçº§ã€ä¸»çº¿ç¨‹ä¼‘æ¯ç­‰ç­‰ï¼ˆä¸é è°±ï¼Œæä¾›ä¸€ç§æƒ³æ³•å§ï¼‰ 2ã€å®‰å“ä¸­çš„Handleræœºåˆ¶ å­çº¿ç¨‹å‘é€æ¶ˆæ¯ï¼Œä¸»çº¿ç¨‹æŽ¥å—æ¶ˆæ¯ï¼Œåªæœ‰ä¸»çº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯å†æ‰“å°å¤„ç†æ•°å€¼ã€‚ handlerä½¿ç”¨ç•¥ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ 3ã€æŽ¥å£å›žè°ƒæœºåˆ¶ åŽŸç†å›¾ å„ç»„ä»¶ä½œç”¨ Handlerï¼šäº‹ä»¶çš„å‘é€åŠå¤„ç†è€…ï¼Œåœ¨æž„é€ æ–¹æ³•ä¸­å¯ä»¥è®¾ç½®å…¶ asyncï¼Œé»˜è®¤ä¸º falseã€‚è‹¥ async ä¸º true åˆ™è¯¥ Handler å‘é€çš„ Message å‡ä¸ºå¼‚æ­¥æ¶ˆæ¯ï¼Œæœ‰åŒæ­¥å±éšœçš„æƒ…å†µä¸‹ä¼šè¢«ä¼˜å…ˆå¤„ç†ã€‚ Looperï¼šä¸€ä¸ªç”¨äºŽéåŽ† MessageQueue çš„ç±»ï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰ä¸€ä¸ªç‹¬æœ‰çš„ Looperï¼Œå®ƒä¼šåœ¨æ‰€å¤„çš„çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ­»å¾ªçŽ¯ï¼Œä¸æ–­ä»Ž MessageQueue ä¸­æ‹¿å‡ºæ¶ˆæ¯ï¼Œå¹¶å°†å…¶å‘é€ç»™ target è¿›è¡Œå¤„ç† MessageQueueï¼šåœ¨ä¸»çº¿ç¨‹,ç”¨äºŽå­˜å‚¨ Messageï¼Œå†…éƒ¨ç»´æŠ¤äº† Message çš„é“¾è¡¨ï¼Œæ¯æ¬¡æ‹¿å– Message æ—¶ï¼Œè‹¥è¯¥ Message ç¦»çœŸæ­£æ‰§è¡Œè¿˜éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œä¼šé€šè¿‡ nativePollOnce è¿›å…¥é˜»å¡žçŠ¶æ€ï¼Œé¿å…èµ„æºçš„æµªè´¹ã€‚è‹¥å­˜åœ¨æ¶ˆæ¯å±éšœï¼Œåˆ™ä¼šå¿½ç•¥åŒæ­¥æ¶ˆæ¯ä¼˜å…ˆæ‹¿å–å¼‚æ­¥æ¶ˆæ¯ï¼Œä»Žè€Œå®žçŽ°å¼‚æ­¥æ¶ˆæ¯çš„ä¼˜å…ˆæ¶ˆè´¹ã€‚ æ¶ˆæ¯å…¥é˜Ÿç®—æ³•https://www.jianshu.com/p/9efe3b48b730 https://juejin.cn/post/6844904113470177293 https://www.bilibili.com/video/BV1VE411Z7Ay?p=4 ThreadLocalå­˜å–ç®—æ³• ThreadLocalæ˜¯ä¸€ä¸ªçº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œå®ƒå¯ä»¥æŒ‡å®šçº¿ç¨‹çš„å­˜å‚¨æ•°æ®ï¼Œæ•°æ®å­˜å‚¨åŽåªæœ‰åœ¨æŒ‡å®šçš„çº¿ç¨‹ç§è£å¯ä»¥èŽ·å–åˆ°å­˜å‚¨çš„æ•°æ®, å…¶ä»–çº¿ç¨‹æ— æ³•èŽ·å–ã€‚ éªŒè¯: private ThreadLocal&lt;String&gt; mStringThreadLocal = new ThreadLocal&lt;&gt;(); mStringThreadLocal.set(&quot;æˆ‘æ˜¯ä¸»çº¿ç¨‹&quot;); Log.d(TAG, &quot;mStringThreadLocal ä¸»çº¿ç¨‹ : &quot; + mStringThreadLocal.get()); exec.submit(new Runnable() &#123; @Override public void run() &#123; mStringThreadLocal.set(&quot;æˆ‘æ˜¯çº¿ç¨‹ï¼‘&quot;); Log.d(TAG, &quot;mStringThreadLocal çº¿ç¨‹ï¼‘: &quot; + mStringThreadLocal.get()); &#125; &#125;); exec.submit(new Runnable() &#123; @Override public void run() &#123; Log.d(TAG, &quot;mStringThreadLocal çº¿ç¨‹2: &quot; + mStringThreadLocal.get()); &#125; &#125;); è¿è¡Œç»“æžœ: D/MainActivity: mStringThreadLocal ä¸»çº¿ç¨‹ : æˆ‘æ˜¯ä¸»çº¿ç¨‹ D/MainActivity: mStringThreadLocal çº¿ç¨‹ï¼‘: æˆ‘æ˜¯çº¿ç¨‹ï¼‘ D/MainActivity: mStringThreadLocal çº¿ç¨‹2: null ä»Žæ—¥å¿—å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶åœ¨ä¸åŒçº¿ç¨‹è®¿é—®çš„åŒä¸€ä¸ªThreadLocalå¯¹è±¡ï¼Œä½†æ˜¯ä»–ä»¬é€šè¿‡ThreadLocalèŽ·å–åˆ°çš„å€¼ç¡®ä¸ä¸€æ · ç»“è®ºï¼š å¯¹ThreadLocalæ‰€åšçš„ è¯»å†™æ“ä½œä»…é™äºŽå„è‡ªçº¿ç¨‹çš„å†…éƒ¨ï¼ŒThreadLocalå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹äº’ä¸å¹²æ‰°çš„å­˜å‚¨å’Œä¿®æ”¹æ•°æ®ã€‚ !!!ä»»åŠ¡ï¼š åˆ†æžThreadLocalå­˜å–ç®—æ³• [^å‚è€ƒï¼šAndroidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ p377] æ¶ˆæ¯åŒæ­¥æ¶ˆæ¯ æ¥ä¸ªç®€å•çš„ä¾‹å­ 12345678new Thread(new Runnable() &#123; @Override public void run() &#123; Looper.prepare(); handler = new Handler(); Looper.loop(); &#125; &#125;).start();æŠŠ Looper.prepare();æ³¨é‡Šï¼ŒæŠ¥é”™æ—¥å¿— : java.lang.RuntimeException: Can&#39;t create handler inside thread that has not called Looper.prepare() ä»ŽæŠ¥é”™ä¿¡æ¯å…¥æ‰‹çœ‹åŽŸå› ï¼Œåˆå§‹åŒ–Handler (API = 25) 12345678910111213141516171819public Handler(Callback callback, boolean async) &#123; if (FIND_POTENTIAL_LEAKS) &#123; final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) &#123; Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; + klass.getCanonicalName()); &#125; &#125; mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( &quot;Can&#x27;t create handler inside thread that has not called Looper.prepare()&quot;); //æŠ¥é”™ä¿¡æ¯ &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async; &#125; mLooperä¸ºç©º,æ‰€ä»¥æŠ¥é”™ï¼Œçœ‹ä¸‹Looper.myLooper(); 1234567/** * Return the Looper object associated with the current thread. Returns * null if the calling thread is not associated with a Looper. */ public static @Nullable Looper myLooper() &#123; return sThreadLocal.get(); &#125; æ³¨é‡Šå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰çº¿ç¨‹æ²¡æœ‰Looperå¯¹è±¡, é‚£ä¹ˆLooperå¯¹è±¡æ˜¯æ€Žä¹ˆåˆ›å»ºçš„å‘¢ï¼Œå¾ˆæ˜¾ç„¶å°±æ˜¯ä¸Šé¢ä¾‹å­é‡Œçš„ Looper.prepare(); 12345678910111213141516/** Initialize the current thread as a looper. * This gives you a chance to create handlers that then reference * this looper, before actually starting the loop. Be sure to call * &#123;@link #loop()&#125; after calling this method, and end it by calling * &#123;@link #quit()&#125;. */ public static void prepare() &#123; prepare(true); &#125; private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;); &#125; sThreadLocal.set(new Looper(quitAllowed)); &#125; å¦‚æžœæ²¡æœ‰Looper åˆ™new ä¸€ä¸ªï¼Œç”±æ­¤ä¹Ÿçœ‹åˆ°æ¯ä¸ªçº¿ç¨‹æœ€å¤šä¸€ä¸ªLooperå¯¹è±¡,æŽ¥ç€çœ‹åˆå§‹åŒ–çš„Looper 1234private Looper(boolean quitAllowed) &#123; mQueue = new MessageQueue(quitAllowed); mThread = Thread.currentThread(); &#125; MesageQueueä¹Ÿæ˜¯é€šè¿‡Looperåˆ›å»ºçš„ï¼Œçœ‹åˆ°private æž„é€ æ–¹æ³•,ä¸€ä¸ªLooperç®¡ç†ä¸€ä¸ª ï¼­esageQueue,ä½†æ˜¯æˆ‘ä»¬é€šå¸¸åœ¨UIçº¿ç¨‹åˆå§‹åŒ–Handlerä¸éœ€è¦è°ƒç”¨ Looper.prepare();,è¿™æ˜¯å› ä¸ºåº”ç”¨å¯åŠ¨åŽ,ä¸»çº¿ç¨‹ActivityThread mainæ–¹æ³•ä¸ºæˆ‘ä»¬åšäº†å·¥ä½œã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public static void main(String[] args) &#123; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;ActivityThreadMain&quot;); SamplingProfilerIntegration.start(); // CloseGuard defaults to true and can be quite spammy. We // disable it here, but selectively enable it later (via // StrictMode) on debug builds, but using DropBox, not logs. CloseGuard.setEnabled(false); Environment.initForCurrentUser(); // Set the reporter for event logging in libcore EventLogger.setReporter(new EventLoggingReporter()); // Make sure TrustedCertificateStore looks in the right place for CA certificates final File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId()); TrustedCertificateStore.setDefaultUserDirectory(configDir); Process.setArgV0(&quot;&lt;pre-initialized&gt;&quot;); Looper.prepareMainLooper(); ActivityThread thread = new ActivityThread(); thread.attach(false); if (sMainThreadHandler == null) &#123; sMainThreadHandler = thread.getHandler(); &#125; if (false) &#123; Looper.myLooper().setMessageLogging(new LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;)); &#125; // End of event ActivityThreadMain. Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); Looper.loop(); throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;); &#125; è¿™æ ·åˆå§‹åŒ–Handleræ“ä½œåˆ†æžå¥½äº†ï¼ŒæŽ¥ç€å°±å¼€å§‹å‘æ¶ˆæ¯äº† handler.sendMessage(message);,ç»è¿‡å±‚å±‚è°ƒç”¨æ¥åˆ°è¿™ä¸ªæ–¹æ³• 12345678910 public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + &quot; sendMessageAtTime() called with no mQueue&quot;); Log.w(&quot;Looper&quot;, e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125; ç¬¬äºŒä¸ªå‚æ•°æ—¶é—´æ˜¯å¯ä»¥æ·»åŠ å»¶æ—¶çš„å‚æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253boolean enqueueMessage(Message msg, long when) &#123; if (msg.target == null) &#123; throw new IllegalArgumentException(&quot;Message must have a target.&quot;); &#125; if (msg.isInUse()) &#123; throw new IllegalStateException(msg + &quot; This message is already in use.&quot;); &#125; synchronized (this) &#123; if (mQuitting) &#123; IllegalStateException e = new IllegalStateException( msg.target + &quot; sending message to a Handler on a dead thread&quot;); Log.w(TAG, e.getMessage(), e); msg.recycle(); return false; &#125; msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when &lt; p.when) &#123; // New head, wake up the event queue if blocked. msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; // Inserted within the middle of the queue. Usually we don&#x27;t have to wake // up the event queue unless there is a barrier at the head of the queue // and the message is the earliest asynchronous message in the queue. needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123; prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; // We can assume mPtr != 0 because mQuitting is false. if (needWake) &#123; nativeWake(mPtr); &#125; &#125; return true; &#125; è¿™è¦Mesageæ¶ˆæ¯å°±æ·»åŠ åˆ° MesageQueueä¸­äº†ï¼ŒæŒ‰äº‹ä»¶é¡ºåºæ·»åŠ ï¼Œç„¶åŽå°±æ˜¯å–æ¶ˆæ¯äº†ï¼Œé€šè¿‡è°ƒç”¨Looper.loop(); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * Run the message queue in this thread. Be sure to call * &#123;@link #quit()&#125; to end the loop. */ public static void loop() &#123; final Looper me = myLooper(); if (me == null) &#123; throw new RuntimeException(&quot;No Looper; Looper.prepare() wasn&#x27;t called on this thread.&quot;); &#125; final MessageQueue queue = me.mQueue; // Make sure the identity of this thread is that of the local process, // and keep track of what that identity token actually is. Binder.clearCallingIdentity(); final long ident = Binder.clearCallingIdentity(); for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; // This must be in a local variable, in case a UI event sets the logger final Printer logging = me.mLogging; if (logging != null) &#123; logging.println(&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot; + msg.target + &quot; &quot; + msg.callback + &quot;: &quot; + msg.what); &#125; final long traceTag = me.mTraceTag; if (traceTag != 0 &amp;&amp; Trace.isTagEnabled(traceTag)) &#123; Trace.traceBegin(traceTag, msg.target.getTraceName(msg)); &#125; try &#123; msg.target.dispatchMessage(msg); &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; if (logging != null) &#123; logging.println(&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot; + msg.target + &quot; &quot; + msg.callback); &#125; // Make sure that during the course of dispatching the // identity of the thread wasn&#x27;t corrupted. final long newIdent = Binder.clearCallingIdentity(); if (ident != newIdent) &#123; Log.wtf(TAG, &quot;Thread identity changed from 0x&quot; + Long.toHexString(ident) + &quot; to 0x&quot; + Long.toHexString(newIdent) + &quot; while dispatching to &quot; + msg.target.getClass().getName() + &quot; &quot; + msg.callback + &quot; what=&quot; + msg.what); &#125; msg.recycleUnchecked(); &#125; &#125; é€šè¿‡ Message msg = queue.next(); èŽ·å–æ¶ˆæ¯ï¼Œç„¶åŽç”¨ msg.target.dispatchMessage(msg);æŠŠæ¶ˆæ¯å¾€å“ªå‘å‘¢ ? 123456789101112131415/** * Handle system messages here. */ public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125; &#125; ç‚¹å¼€ handleMesage(msg),msg.target å°±æ˜¯Handler 12345/** * Subclasses must implement this to receive messages. */ public void handleMessage(Message msg) &#123; &#125; è¿™é‡Œå°±æ¸…æ¥šäº†ï¼Œæ¶ˆæ¯å°±ä¼ åˆ°äº† Hanlderé‡Œé¢handleMessageçš„å®žçŽ°æ–¹æ³•ä»Žä¸Šé¢åˆ†æžhandleræ¶ˆæ¯ä¼ é€’åŸºæœ¬äº†è§£äº†ï¼Œå€Ÿå¼ å›¾çœ‹ä¸‹æ•´ç‰‡æ£®æž— å¼‚æ­¥æ¶ˆæ¯Androidç³»ç»Ÿ16msä¼šåˆ·æ–°ä¸€æ¬¡å±å¹•ï¼Œå¦‚æžœä¸»çº¿ç¨‹çš„æ¶ˆæ¯è¿‡å¤šï¼Œåœ¨16msä¹‹å†…æ²¡æœ‰æ‰§è¡Œå®Œï¼Œå¿…ç„¶ä¼šé€ æˆå¡é¡¿æˆ–è€…æŽ‰å¸§ã€‚é‚£æ€Žä¹ˆæ‰èƒ½ä¸æŽ’é˜Ÿï¼Œæ²¡æœ‰å»¶æ—¶çš„å¤„ç†å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦å¼‚æ­¥æ¶ˆæ¯ï¼Œåœ¨å¤„ç†å¼‚æ­¥æ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åŒæ­¥å±éšœï¼Œè®©å¼‚æ­¥æ¶ˆæ¯ä¸ç”¨æŽ’é˜Ÿç­‰å€™å¤„ç†ã€‚å¯ä»¥ç†è§£ä¸ºåŒæ­¥å±éšœæ˜¯ä¸€å µå¢™ï¼ŒæŠŠåŒæ­¥æ¶ˆæ¯é˜Ÿåˆ—æ‹¦ä½ï¼Œå…ˆå¤„ç†å¼‚æ­¥æ¶ˆæ¯ï¼Œç­‰å¼‚æ­¥æ¶ˆæ¯å¤„ç†å®Œäº†ï¼Œè¿™å µå¢™å°±ä¼šå–æ¶ˆï¼Œç„¶åŽç»§ç»­å¤„ç†åŒæ­¥æ¶ˆæ¯ã€‚ https://blog.csdn.net/ly502541243/article/details/109091386 æŸ¥æ‰¾å¼‚æ­¥æ¶ˆæ¯æ–¹æ³• MessageQueue.java 12345678910111213141516171819202122Message next() &#123; for (;;) &#123; if (nextPollTimeoutMillis != 0) &#123; Binder.flushPendingCommands(); &#125; nativePollOnce(ptr, nextPollTimeoutMillis); synchronized (this) &#123; // Try to retrieve the next message. Return if found. final long now = SystemClock.uptimeMillis(); Message prevMsg = null; Message msg = mMessages; if (msg != null &amp;&amp; msg.target == null) &#123; // Stalled by a barrier. Find the next asynchronous message in the queue. do &#123; prevMsg = msg; msg = msg.next; &#125; while (msg != null &amp;&amp; !msg.isAsynchronous()); //å¾ªçŽ¯æŸ¥æ‰¾ ç›´åˆ°æ‰¾åˆ°å¼‚æ­¥æ¶ˆæ¯ä¸ºæ­¢. &#125; &#125; &#125; https://blog.csdn.net/ly502541243/article/details/109091386 å‘é€å»¶æ—¶æ¶ˆæ¯çœ‹ä¸‹é¢é—®é¢˜:handlerå¦‚ä½•å®žçŽ°å»¶æ—¶å‘æ¶ˆæ¯postdelay() https://zhuanlan.zhihu.com/p/260661053 https://blog.csdn.net/thh159/article/details/103644489 IdleHandlerä½¿ç”¨å½“æ¶ˆæ¯é˜Ÿåˆ—ç©ºé—²æ—¶ä¼šæ‰§è¡ŒIdleHandlerçš„queueIdle()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªbooleanå€¼ï¼Œå¦‚æžœä¸ºfalseåˆ™æ‰§è¡Œå®Œæ¯•ä¹‹åŽç§»é™¤è¿™æ¡æ¶ˆæ¯ï¼Œå¦‚æžœä¸ºtrueåˆ™ä¿ç•™ï¼Œç­‰åˆ°ä¸‹æ¬¡ç©ºé—²æ—¶ä¼šå†æ¬¡æ‰§è¡Œï¼Œä¸‹é¢çœ‹ä¸‹MessageQueueçš„next()æ–¹æ³•å¯ä»¥å‘çŽ°ç¡®å®žæ˜¯è¿™æ · 12345Message next() &#123; // Run the idle handlers. // We only ever reach this code block during the first iteration. keep = idler.queueIdle();&#125; Activityå¯åŠ¨ä¼˜åŒ–ï¼šonCreateï¼ŒonStartï¼ŒonResumeä¸­è€—æ—¶è¾ƒçŸ­ä½†éžå¿…è¦çš„ä»£ç å¯ä»¥æ”¾åˆ°IdleHandlerä¸­æ‰§è¡Œï¼Œå‡å°‘å¯åŠ¨æ—¶é—´ æƒ³è¦åœ¨ä¸€ä¸ªViewç»˜åˆ¶å®Œæˆä¹‹åŽæ·»åŠ å…¶ä»–ä¾èµ–äºŽè¿™ä¸ªViewçš„Viewï¼Œå½“ç„¶è¿™ä¸ªç”¨View#post()ä¹Ÿèƒ½å®žçŽ°ï¼ŒåŒºåˆ«å°±æ˜¯å‰è€…ä¼šåœ¨æ¶ˆæ¯é˜Ÿåˆ—ç©ºé—²æ—¶æ‰§è¡Œ ä¸€äº›ç¬¬ä¸‰æ–¹åº“ä¸­æœ‰ä½¿ç”¨ï¼Œæ¯”å¦‚LeakCanaryï¼ŒGlideä¸­æœ‰ä½¿ç”¨åˆ°ï¼Œå…·ä½“å¯ä»¥è‡ªè¡ŒåŽ»æŸ¥çœ‹ ä»¥å‰æˆ‘ä»¬åœ¨Activityä¸­èŽ·å–æŸä¸ªæŽ§ä»¶çš„å®½é«˜çš„æ—¶å€™æ€»æ˜¯å¾—åˆ°çš„æ˜¯0ï¼Œé‚£æ˜¯å› ä¸ºviewçš„æµ‹é‡è¿˜æœªå®Œæˆã€‚é€šå¸¸çš„åšæ³•æ˜¯ç›‘å¬ViewTreeObserverï¼Œå®ƒæ˜¯åœ¨ViewRootImplæµ‹é‡å®Œæˆä¹‹åŽè°ƒç”¨ViewTreeObserver.dispatchOnGlobalLayout()æ–¹æ³•ï¼Œè¿™æ—¶å€™åœ¨onGlobalLayoutå›žè°ƒä¸­èŽ·å–çš„æŽ§ä»¶å®½é«˜éƒ½æ˜¯æ­£ç¡®çš„æ•°æ®ã€‚ 1234Looper.myQueue().addIdleHandler &#123; Log.i(&quot;HandlerActivity&quot;, &quot;width $&#123;btFive.width&#125; height $&#123;btFive.height&#125;&quot;) false&#125; https://blog.csdn.net/ZYJWR/article/details/103086664 https://www.wanandroid.com/wenda/show/8723 é—®é¢˜handlerçš„æ˜¯æ€Žæ ·å®žçŽ°çš„ï¼Ÿæ–°çº¿ç¨‹ä¸­æ‰§è¡Œäº†ä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œç„¶åŽæŠŠè¯¥ç»“æžœå¡žç»™messageï¼Œhandlerå°†å‘é€è¿™ä¸ªmessageQueueï¼ŒLoopä¸åœçš„ä»Žæ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¶ˆæ¯ã€‚Handler åˆ†å‘ç»™Ui. Handleræ˜¯æ€Žä¹ˆåˆ‡æ¢çº¿ç¨‹çš„æˆ‘ä»¬åœ¨ä¸åŒçš„çº¿ç¨‹å‘é€æ¶ˆæ¯ï¼Œçº¿ç¨‹ä¹‹é—´çš„èµ„æºæ˜¯å…±äº«çš„ Handleræœºåˆ¶äº†è§£å—ï¼Ÿä¸€ä¸ªçº¿ç¨‹æœ‰å‡ ä¸ªLooperï¼Ÿä¸ºä»€ä¹ˆï¼Ÿåªèƒ½æœ‰ä¸€ä¸ªï¼Œä¸ç„¶è°ƒç”¨Looper.prepare()ä¼šæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œæç¤ºâ€œOnly one Looper may be created per threadâ€ handlerå¦‚ä½•å®žçŽ°å»¶æ—¶å‘æ¶ˆæ¯postdelay(),å¯ä»¥çœ‹åˆ°è¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªforå¾ªçŽ¯éåŽ†é˜Ÿåˆ—ï¼Œæ ¸å¿ƒå˜é‡å°±æ˜¯nextPollTimeoutMillisã€‚å¯ä»¥çœ‹åˆ°ï¼Œè®¡ç®—å‡ºnextPollTimeoutMillisåŽå°±è°ƒç”¨nativiePollOnceè¿™ä¸ªnativeæ–¹æ³•ã€‚è¿™é‡Œçš„è¯å¤§æ¦‚å¯ä»¥çŒœåˆ°ä»–çš„è¿è¡Œæœºåˆ¶ï¼Œå› ä¸ºä»–æ˜¯æ ¹æ®æ‰§è¡Œæ—¶é—´è¿›è¡ŒæŽ’åºçš„ï¼Œé‚£ä¼ å…¥çš„è¿™ä¸ªnextPollTimeoutMillisåº”è¯¥å°±æ˜¯ä¼‘çœ æ—¶é—´ï¼Œç±»ä¼¼äºŽjavaçš„sleep(time)ã€‚ä¼‘çœ åˆ°ä¸‹ä¸€æ¬¡messageçš„æ—¶å€™å°±æ‰§è¡Œã€‚é‚£å¦‚æžœæˆ‘åœ¨è¿™æ®µæ—¶é—´åˆæ’å…¥äº†ä¸€ä¸ªæ–°çš„messageæ€Žä¹ˆåŠžï¼Œæ‰€ä»¥handleræ¯æ¬¡æ’å…¥messageéƒ½ä¼šå”¤é†’çº¿ç¨‹ï¼Œé‡æ–°è®¡ç®—æ’å…¥åŽï¼Œå†èµ°ä¸€æ¬¡è¿™ä¸ªä¼‘çœ æµç¨‹ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•æ²¡æœ‰å¼€å¯å­çº¿ç¨‹ï¼Œåªæ˜¯è°ƒç”¨äº†run(), åœ¨ msg.target.dispatchMessage(msg)å¯ä»¥çœ‹åˆ°ï¼ŒæŽ¥ç€è°ƒç”¨äº†handleCallback(). https://www.jianshu.com/p/68083d432b3f å¦‚æžœç§»é™¤ä¸€ä¸ªå»¶æ—¶æ¶ˆæ¯ä¼šè§£é™¤ä¼‘çœ å—ä¸»çº¿ç¨‹æ­»å¾ªçŽ¯ä¸ä¼šå¡æ­»å—ä»Žå‰é¢çš„ä¸»çº¿ç¨‹ã€å­çº¿ç¨‹çš„åˆ†æžå¯ä»¥çœ‹å‡ºï¼ŒLooperä¼šåœ¨çº¿ç¨‹ä¸­ä¸æ–­çš„æ£€ç´¢æ¶ˆæ¯ï¼Œå¦‚æžœæ˜¯å­çº¿ç¨‹çš„Looperæ­»å¾ªçŽ¯ï¼Œä¸€æ—¦ä»»åŠ¡å®Œæˆï¼Œç”¨æˆ·åº”è¯¥æ‰‹åŠ¨é€€å‡ºï¼Œè€Œä¸æ˜¯è®©å…¶ä¸€ç›´ä¼‘çœ ç­‰å¾…ã€‚ï¼ˆå¼•ç”¨è‡ªGityuanï¼‰çº¿ç¨‹å…¶å®žå°±æ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ä»£ç ï¼Œå½“å¯æ‰§è¡Œçš„ä»£ç æ‰§è¡Œå®ŒæˆåŽï¼Œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¾¿è¯¥ç»ˆæ­¢äº†ï¼Œçº¿ç¨‹é€€å‡ºã€‚è€Œå¯¹äºŽä¸»çº¿ç¨‹ï¼Œæˆ‘ä»¬æ˜¯ç»ä¸å¸Œæœ›ä¼šè¢«è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œè‡ªå·±å°±é€€å‡ºï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯èƒ½ä¸€ç›´å­˜æ´»å‘¢ï¼Ÿç®€å•åšæ³•å°±æ˜¯å¯æ‰§è¡Œä»£ç æ˜¯èƒ½ä¸€ç›´æ‰§è¡Œä¸‹åŽ»çš„ï¼Œæ­»å¾ªçŽ¯ä¾¿èƒ½ä¿è¯ä¸ä¼šè¢«é€€å‡ºï¼Œä¾‹å¦‚ï¼Œbinder çº¿ç¨‹ä¹Ÿæ˜¯é‡‡ç”¨æ­»å¾ªçŽ¯çš„æ–¹æ³•ï¼Œé€šè¿‡å¾ªçŽ¯æ–¹å¼ä¸åŒä¸Ž Binder é©±åŠ¨è¿›è¡Œè¯»å†™æ“ä½œï¼Œå½“ç„¶å¹¶éžç®€å•åœ°æ­»å¾ªçŽ¯ï¼Œæ— æ¶ˆæ¯æ—¶ä¼šä¼‘çœ ã€‚Androidæ˜¯åŸºäºŽæ¶ˆæ¯å¤„ç†æœºåˆ¶çš„ï¼Œç”¨æˆ·çš„è¡Œä¸ºéƒ½åœ¨è¿™ä¸ªLooperå¾ªçŽ¯ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¼‘çœ æ—¶ç‚¹å‡»å±å¹•ï¼Œä¾¿å”¤é†’ä¸»çº¿ç¨‹ç»§ç»­è¿›è¡Œå·¥ä½œã€‚ ä¸»çº¿ç¨‹çš„æ­»å¾ªçŽ¯ä¸€ç›´è¿è¡Œæ˜¯ä¸æ˜¯ç‰¹åˆ«æ¶ˆè€— CPU èµ„æºå‘¢ï¼Ÿ å…¶å®žä¸ç„¶ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ° Linux pipe/epollæœºåˆ¶ï¼Œç®€å•è¯´å°±æ˜¯åœ¨ä¸»çº¿ç¨‹çš„ MessageQueue æ²¡æœ‰æ¶ˆæ¯æ—¶ï¼Œä¾¿é˜»å¡žåœ¨ loop çš„ queue.next() ä¸­çš„ nativePollOnce() æ–¹æ³•é‡Œï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹ä¼šé‡Šæ”¾ CPU èµ„æºè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°ä¸‹ä¸ªæ¶ˆæ¯åˆ°è¾¾æˆ–è€…æœ‰äº‹åŠ¡å‘ç”Ÿï¼Œé€šè¿‡å¾€ pipe ç®¡é“å†™ç«¯å†™å…¥æ•°æ®æ¥å”¤é†’ä¸»çº¿ç¨‹å·¥ä½œã€‚è¿™é‡Œé‡‡ç”¨çš„ epoll æœºåˆ¶ï¼Œæ˜¯ä¸€ç§IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå¯ä»¥åŒæ—¶ç›‘æŽ§å¤šä¸ªæè¿°ç¬¦ï¼Œå½“æŸä¸ªæè¿°ç¬¦å°±ç»ª(è¯»æˆ–å†™å°±ç»ª)ï¼Œåˆ™ç«‹åˆ»é€šçŸ¥ç›¸åº”ç¨‹åºè¿›è¡Œè¯»æˆ–å†™æ“ä½œï¼Œæœ¬è´¨åŒæ­¥I/Oï¼Œå³è¯»å†™æ˜¯é˜»å¡žçš„ã€‚ æ‰€ä»¥è¯´ï¼Œä¸»çº¿ç¨‹å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯å¤„äºŽä¼‘çœ çŠ¶æ€ï¼Œå¹¶ä¸ä¼šæ¶ˆè€—å¤§é‡CPUèµ„æºã€‚ https://www.jianshu.com/p/a7969d73c120 handlerå†…å­˜æ³„éœ²é—®é¢˜è¯´è¯´ä½ å¯¹Handleræœºåˆ¶çš„äº†è§£ï¼ŒåŒæ­¥æ¶ˆæ¯ï¼Œå¼‚æ­¥æ¶ˆæ¯ç­‰IdleHandlerç”¨è¿‡å—,IdleHandleråº”ç”¨åœºæ™¯ï¼Ÿ è§ä¸Šé¢IdleHandlerä½¿ç”¨ handlerå¦‚ä½•å®žçŽ°å»¶æ—¶å‘æ¶ˆæ¯postdelay()ã€‚callbackï¼Œrunnableï¼Œmsgçš„æ‰§è¡Œä¼˜å…ˆçº§ã€‚é˜»å¡žæ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿä¸ºä»€ä¹ˆä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ï¼Ÿ Handlerä¼‘çœ æ˜¯æ€Žæ ·çš„ï¼Ÿepollçš„åŽŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å®žçŽ°å»¶æ—¶æ¶ˆæ¯ï¼Œå¦‚æžœç§»é™¤ä¸€ä¸ªå»¶æ—¶æ¶ˆæ¯ä¼šè§£é™¤ä¼‘çœ å—ï¼ŸHandlerå†…å­˜æ³„æ¼çš„GCRootæ˜¯ä»€ä¹ˆï¼Ÿ epollçš„æ—¶å€™ç®—æ˜¯å¡é¡¿å— æ€Žä¹ˆæ ·ç®—æ˜¯å¡é¡¿äº† æ€Žä¹ˆåˆ©ç”¨æ¶ˆæ¯æœºåˆ¶æ£€æµ‹å¡é¡¿ é™¤äº†è¿™ç§æ–¹å¼è¿˜æœ‰åˆ«çš„ç›‘æµ‹å¡é¡¿çš„æ–¹å¼å— Androidä¸­ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šå› ä¸ºLooper.loop()é‡Œçš„æ­»å¾ªçŽ¯å¡æ­»ï¼Ÿå¯¹äºŽçº¿ç¨‹å³æ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ä»£ç ï¼Œå½“å¯æ‰§è¡Œä»£ç æ‰§è¡Œå®ŒæˆåŽï¼Œçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¾¿è¯¥ç»ˆæ­¢äº†ï¼Œçº¿ç¨‹é€€å‡ºã€‚è€Œå¯¹äºŽä¸»çº¿ç¨‹ï¼Œæˆ‘ä»¬æ˜¯ç»ä¸å¸Œæœ›ä¼šè¢«è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œè‡ªå·±å°±é€€å‡ºï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯èƒ½ä¸€ç›´å­˜æ´»å‘¢ï¼Ÿç®€å•åšæ³•å°±æ˜¯å¯æ‰§è¡Œä»£ç æ˜¯èƒ½ä¸€ç›´æ‰§è¡Œä¸‹åŽ»çš„ï¼Œæ­»å¾ªçŽ¯ä¾¿èƒ½ä¿è¯ä¸ä¼šè¢«é€€å‡ºï¼Œä¾‹å¦‚ï¼Œbinderçº¿ç¨‹ä¹Ÿæ˜¯é‡‡ç”¨æ­»å¾ªçŽ¯çš„æ–¹æ³•ï¼Œé€šè¿‡å¾ªçŽ¯æ–¹å¼ä¸åŒä¸ŽBinderé©±åŠ¨è¿›è¡Œè¯»å†™æ“ä½œï¼Œå½“ç„¶å¹¶éžç®€å•åœ°æ­»å¾ªçŽ¯ï¼Œæ— æ¶ˆæ¯æ—¶ä¼šä¼‘çœ ã€‚ä½†è¿™é‡Œå¯èƒ½åˆå¼•å‘äº†å¦ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶æ˜¯æ­»å¾ªçŽ¯åˆå¦‚ä½•åŽ»å¤„ç†å…¶ä»–äº‹åŠ¡å‘¢ï¼Ÿé€šè¿‡åˆ›å»ºæ–°çº¿ç¨‹çš„æ–¹å¼ã€‚çœŸæ­£ä¼šå¡æ­»ä¸»çº¿ç¨‹çš„æ“ä½œæ˜¯åœ¨å›žè°ƒæ–¹æ³•onCreate/onStart/onResumeç­‰æ“ä½œæ—¶é—´è¿‡é•¿ï¼Œä¼šå¯¼è‡´æŽ‰å¸§ï¼Œç”šè‡³å‘ç”ŸANRï¼Œlooper.loopæœ¬èº«ä¸ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ã€‚ ä¸»çº¿ç¨‹çš„æ­»å¾ªçŽ¯ä¸€ç›´è¿è¡Œæ˜¯ä¸æ˜¯ç‰¹åˆ«æ¶ˆè€—CPUèµ„æºå‘¢ï¼Ÿ å…¶å®žä¸ç„¶ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°Linux pipe/epollæœºåˆ¶ï¼Œç®€å•è¯´å°±æ˜¯åœ¨ä¸»çº¿ç¨‹çš„MessageQueueæ²¡æœ‰æ¶ˆæ¯æ—¶ï¼Œä¾¿é˜»å¡žåœ¨loopçš„queue.next()ä¸­çš„nativePollOnce()æ–¹æ³•é‡Œï¼Œæ­¤æ—¶ä¸»çº¿ç¨‹ä¼šé‡Šæ”¾CPUèµ„æºè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°ä¸‹ä¸ªæ¶ˆæ¯åˆ°è¾¾æˆ–è€…æœ‰äº‹åŠ¡å‘ç”Ÿï¼Œé€šè¿‡å¾€pipeç®¡é“å†™ç«¯å†™å…¥æ•°æ®æ¥å”¤é†’ä¸»çº¿ç¨‹å·¥ä½œã€‚è¿™é‡Œé‡‡ç”¨çš„epollæœºåˆ¶ï¼Œæ˜¯ä¸€ç§IOå¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œå¯ä»¥åŒæ—¶ç›‘æŽ§å¤šä¸ªæè¿°ç¬¦ï¼Œå½“æŸä¸ªæè¿°ç¬¦å°±ç»ª(è¯»æˆ–å†™å°±ç»ª)ï¼Œåˆ™ç«‹åˆ»é€šçŸ¥ç›¸åº”ç¨‹åºè¿›è¡Œè¯»æˆ–å†™æ“ä½œï¼Œæœ¬è´¨åŒæ­¥I/Oï¼Œå³è¯»å†™æ˜¯é˜»å¡žçš„ã€‚ æ‰€ä»¥è¯´ï¼Œä¸»çº¿ç¨‹å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯å¤„äºŽä¼‘çœ çŠ¶æ€ï¼Œå¹¶ä¸ä¼šæ¶ˆè€—å¤§é‡CPUèµ„æºã€‚ Gityuanâ€“Handler(Nativeå±‚) Handleré€šä¿¡ï¼ŒBinderé€šä¿¡ HandleråŒæ­¥å±éšœHandlerå‘é€çš„æ¶ˆæ¯åˆ†ä¸ºæ™®é€šæ¶ˆæ¯ã€å±éšœæ¶ˆæ¯ã€å¼‚æ­¥æ¶ˆæ¯ï¼Œä¸€æ—¦Looperåœ¨å¤„ç†æ¶ˆæ¯æ—¶é‡åˆ°å±éšœæ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±ä¸å†å¤„ç†æ™®é€šçš„æ¶ˆæ¯ï¼Œè€Œä»…ä»…å¤„ç†å¼‚æ­¥çš„æ¶ˆæ¯ã€‚ä¸å†ä½¿ç”¨å±éšœåŽï¼Œéœ€è¦æ’¤é”€å±éšœï¼Œä¸ç„¶å°±å†ä¹Ÿæ‰§è¡Œä¸åˆ°æ™®é€šæ¶ˆæ¯äº†ã€‚ ä¸ºä»€ä¹ˆéœ€è¦è¿™æ ·ï¼Ÿå®ƒæ˜¯è®¾è®¡æ¥ä¸ºäº†è®©æŸäº›ç‰¹æ®Šçš„æ¶ˆæ¯å¾—ä»¥æ›´å¿«è¢«æ‰§è¡Œçš„æœºåˆ¶ã€‚æ¯”å¦‚ç»˜åˆ¶ç•Œé¢ï¼Œè¿™ç§æ¶ˆæ¯å¯èƒ½ä¼šæ˜Žæ˜¾çš„è¢«ç”¨æˆ·æ„ŸçŸ¥åˆ°ï¼Œç¨æœ‰ä¸æ…Žå°±ä¼šå¼•èµ·å¡é¡¿ã€æŽ‰å¸§ä¹‹ç±»çš„ï¼Œæ‰€ä»¥éœ€è¦åŠæ—¶å¤„ç†ï¼ˆå¯èƒ½æ¶ˆæ¯é˜Ÿåˆ—ä¸­æœ‰å¤§é‡çš„æ¶ˆæ¯ï¼Œå¦‚æžœåƒå¹³æ—¶ä¸€æ ·æŒ¨ä¸ªè¿›è¡Œå¤„ç†ï¼Œé‚£ç»˜åˆ¶ç•Œé¢è¿™ä¸ªæ¶ˆæ¯å°±å¾—ç­‰å¾ˆä¹…ï¼Œè¿™æ˜¯ä¸æƒ³çœ‹åˆ°çš„ï¼‰ã€‚ å±éšœæ¶ˆæ¯ä»…ä»…æ˜¯èµ·ä¸€ä¸ªå±éšœçš„ä½œç”¨ï¼Œæœ¬èº«ä¸€èˆ¬ä¸é™„å¸¦å…¶ä»–ä¸œè¥¿ï¼Œå®ƒéœ€è¦é…åˆå…¶ä»–Handlerç»„ä»¶æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚ 1ã€Handleré—®é¢˜ä¸‰è¿žï¼šæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Œä¸ç”¨è¡Œä¸è¡Œï¼Ÿ 2ã€Android UIæ›´æ–°æœºåˆ¶(GUI) ä¸ºä½•è®¾è®¡æˆäº†å•çº¿ç¨‹çš„ï¼Ÿ 3ã€çœŸçš„åªèƒ½åœ¨ä¸»(UI)çº¿ç¨‹ä¸­æ›´æ–°UIå—ï¼Ÿ 4ã€çœŸçš„ä¸èƒ½åœ¨ä¸»(UI)çº¿ç¨‹ä¸­æ‰§è¡Œç½‘ç»œæ“ä½œå—ï¼Ÿ 6ã€ä¸ºä»€ä¹ˆå»ºè®®ä½¿ç”¨Message.obtain()æ¥åˆ›å»ºMessageå®žä¾‹ï¼Ÿ 7ã€ä¸ºä»€ä¹ˆå­çº¿ç¨‹ä¸­ä¸å¯ä»¥ç›´æŽ¥new Handler()è€Œä¸»çº¿ç¨‹ä¸­å¯ä»¥ï¼Ÿ 8ã€ä¸»çº¿ç¨‹ç»™å­çº¿ç¨‹çš„Handlerå‘é€æ¶ˆæ¯æ€Žä¹ˆå†™ï¼Ÿ 9ã€HandlerThreadå®žçŽ°çš„æ ¸å¿ƒåŽŸç†ï¼Ÿ 10ã€å½“ä½ ç”¨Handlerå‘é€ä¸€ä¸ªMessageï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ 11ã€Looperæ˜¯æ€Žä¹ˆæ‹£é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯çš„ï¼Ÿ 12ã€åˆ†å‘ç»™Handlerçš„æ¶ˆæ¯æ˜¯æ€Žä¹ˆå¤„ç†çš„ï¼Ÿ 14ã€Looperåœ¨ä¸»çº¿ç¨‹ä¸­æ­»å¾ªçŽ¯ï¼Œä¸ºå•¥ä¸ä¼šANRï¼Ÿ 15ã€Handleræ³„éœ²çš„åŽŸå› åŠæ­£ç¡®å†™æ³• 16ã€Handlerä¸­çš„åŒæ­¥å±éšœæœºåˆ¶ 17ã€Android 11 Handlerç›¸å…³å˜æ›´ https://juejin.cn/post/6844904150140977165 handler postå’ŒhandleMesageåŒºåˆ« â€‹ postçš„runnableä¼šç›´æŽ¥åœ¨callbackä¸­è°ƒç”¨runæ–¹æ³•æ‰§è¡Œï¼Œè€ŒsendMessageæ–¹æ³•è¦ç”¨æˆ·ä¸»åŠ¨é‡å†™mCallbackæˆ–è€…handleMessageæ–¹æ³•æ¥å¤„ç† https://www.bilibili.com/video/BV1A7411M7zQ?from=search&amp;seid=14693797999095810218 https://juejin.im/post/6844904150140977165 http://blog.csdn.net/guolin_blog/article/details/9991569 https://xiaozhuanlan.com/topic/0843791256 glide handler https://www.bilibili.com/video/BV1FU4y1V7HE https://segmentfault.com/a/1190000039809784","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"AnimationResource","slug":"AnimationResource","date":"2017-08-16T03:22:57.000Z","updated":"2021-08-19T11:11:43.675Z","comments":true,"path":"2017/08/16/AnimationResource/","link":"","permalink":"https://noteforme.github.io/2017/08/16/AnimationResource/","excerpt":"","text":"https://developer.android.com/guide/topics/resources/animation-resource.html AndroidåŠ¨ç”»ç®€ä»‹,ç›´æŽ¥copyäº† The Android framework provides two animation systems: property animation and view animation. Both animation systems are viable options, but the property animation system, in general, is the preferred method to use, because it is more flexible and offers more features. In addition to these two systems, you can utilize Drawable animation, which allows you to load drawable resources and display them one frame after another. å¯ä»¥çœ‹å‡ºå®˜æ–¹æ›´æŽ¨å´‡ Property Animiation,æ›´çµæ´»è€Œä¸”æä¾›æ›´å¤šçš„åŠŸèƒ½,çœ‹ä¸‹ï¼“ç§åŠ¨ç”»æ–¹å¼ Drawable Animation (FrameåŠ¨ç”»ï¼Œå¸§åŠ¨ç”») Drawable animation involves displaying Drawable resources one after another, like a roll of film. This method of animation is useful if you want to animate things that are easier to represent with Drawable resources, such as a progression of bitmaps. é€šè¿‡äººè§†è§‰çš„å»¶è¿Ÿï¼ŒæŠŠå›¾ç‰‡ä¸€å¼ è¿žæŽ¥ä¸€å¼ ï¼Œç±»ä¼¼æ”¾ç”µå½± View Animation(TweenåŠ¨ç”») View Animation is the older system and can only be used for Views. It is relatively easy to setup and offers enough capabilities to meet many applicationâ€™s needs. Property Animation Introduced in Android 3.0 (API level 11), the property animation system lets you animate properties of any object, including ones that are not rendered to the screen. The system is extensible and lets you animate properties of custom types as well. viewåŠ¨ç”»ç¤ºä¾‹: æ–‡ä»¶ä½ç½®æ”¾å“ªå‘¢ï¼Ÿ åœ¨å®˜ç½‘ç¡®è®¤äº†äº†ä½ç½® The animation XML file belongs in the res/anim/ directory of your Android project. The file must have a single root element: this will be either a single , , , , interpolator element, or element that holds groups of these elements (which may include another ). By default, all animation instructions are applied simultaneously. To make them occur sequentially, you must specify the startOffset attribute, as shown in the example below. 123456789101112131415161718192021222324252627282930&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:duration=&quot;1000&quot; android:fillAfter=&quot;true&quot; android:interpolator=&quot;@android:anim/accelerate_decelerate_interpolator&quot; android:shareInterpolator=&quot;true&quot;&gt; &lt;!-- ä½ç½®ç§»åŠ¨--&gt; &lt;translate android:fromXDelta=&quot;0.0&quot; android:fromYDelta=&quot;0.0&quot; android:toXDelta=&quot;500.0&quot; android:toYDelta=&quot;500.0&quot; /&gt; &lt;!-- æ”¾å¤§æˆ–ç¼©å° --&gt; &lt;scale android:fromXScale=&quot;0.0&quot; android:fromYScale=&quot;0.0&quot; android:pivotX=&quot;50%&quot; android:pivotY=&quot;50%&quot; android:toXScale=&quot;1.0&quot; android:toYScale=&quot;1.0&quot; /&gt; &lt;rotate android:fromDegrees=&quot;0.0&quot; android:pivotX=&quot;50%&quot; android:pivotY=&quot;50%&quot; android:toDegrees=&quot;30.0&quot; /&gt; &lt;alpha android:fromAlpha=&quot;0.0&quot; android:toAlpha=&quot;0.5&quot; /&gt;&lt;/set&gt; æ¼”ç¤ºä»£ç :å‚è€ƒï¼šhttp://www.jianshu.com/p/b7aa2a4a9787http://blog.csdn.net/yanbober/article/details/46481171 è·‘å®Œä»£ç åŽï¼Œç‚¹å‡»åŠ¨ç”»ç»“æŸåŽçš„å›¾ç‰‡ï¼Œæ²¡ååº”ï¼Œå®žé™…ä¸ŠæŒ‰é’®è¿˜æ˜¯åœç•™åœ¨å±å¹•å·¦ä¸Šè§’ï¼Œåªä¸è¿‡viewåŠ¨ç”»æŠŠå›¾ç‰‡ç»˜åˆ¶åˆ°äº†æ–°çš„ä½ç½®ã€‚æ‰€ä»¥è¯´ ViewåŠ¨ç”»æ˜¯å¯¹Viewçš„å½±åƒåšæ“ä½œï¼Œå®ƒå¹¶ä¸èƒ½æ”¹å˜Viewçš„ä½ç½®å‚æ•° Property Animation å±žæ€§åŠ¨ç”»å°±æ˜¯å¯¹ å¯¹è±¡çš„å±žæ€§è¿›è¡Œå®žè´¨çš„æ”¹å˜äº†ï¼Œè€Œä¸åªæ˜¯æŠ•å½±äº†ï¼Œæ¯”å¦‚åˆšæ‰çš„å›¾ç‰‡ä¿®æ”¹åŽæ˜¯å¯ä»¥ç‚¹å‡»çš„ ValueAnimator: é€šè¿‡ä¸æ–­çš„å¯¹å€¼è¿›è¡Œæ“ä½œæ¥å®žçŽ°çš„ï¼Œåˆå§‹å€¼ç›’ç»“æŸå€¼ä¹‹é—´çš„åŠ¨ç”»è¿‡æ¸¡å°±æ˜¯ç”±ValueAnimatoræ¥è´Ÿè´£è®¡ç®—çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è´Ÿè´£ç®¡ç†åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°ï¼Œæ’­æ”¾æ¨¡å¼ï¼Œä»¥åŠç›‘å¬ç­‰ã€‚ /** * 300 mså†…,valueå€¼ä»Ž0 å¹³æ»‘çš„è¿‡æ¸¡åˆ°äº†1 */ // ValueAnimator anim = ValueAnimator.ofFloat(0f, 1f);// anim.setDuration(300); /** * valueå€¼ä»Ž0è¿‡æ¸¡åˆ°ï¼•ï¼Œå†åˆ°ï¼“æœ€åŽåˆ°10çš„è¿‡ç¨‹ */ // ValueAnimator anim = ValueAnimator.ofFloat(0f, 5f, 3f, 10f); //æ•´å½¢æ•°ä»Ž 0åˆ° 100 ValueAnimator anim = ValueAnimator.ofInt(0, 100); anim.setDuration(5000); anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator valueAnimator) &#123; Object currentValue = valueAnimator.getAnimatedValue(); Log.d(TAG, &quot; current value is &quot; + currentValue); &#125; &#125;); anim.start(); ObjectAnimatorObjectAnimatorç»§æ‰¿ValueAnimatorï¼Œå®ƒå¯ä»¥ç›´æŽ¥å¯¹ä»»æ„å¯¹è±¡çš„ä»»æ„å±žæ€§è¿›è¡ŒåŠ¨ç”»æ“ä½œæ¼”ç¤ºç¤ºä¾‹ /** * é€æ˜Ž: ï¼•ç§’å†…ä»Žå¸¸è§„å˜æ¢æˆå…¨ é€æ˜Ž,å†ä»Žé€æ˜Žå˜æˆå¸¸è§„ */ // ObjectAnimator animator = ObjectAnimator.ofFloat(v, â€œalphaâ€, 1f, 0f, 1f); /** * æ—‹è½¬ : å¯¹æŒ‰é’®è¿›è¡Œæ—‹è½¬ 360 */ // ObjectAnimator animator = ObjectAnimator.ofFloat(v, â€œrotationâ€, 0f, 360f); /** * ä½ç½®ç§»åŠ¨: Buttonå‘å·¦ç§»åŠ¨å†å›žæ¥ */ // float curTranslationX = v.getTranslationX(); //èŽ·å–å½“å‰Buttonçš„translationXä½ç½®// ObjectAnimator animator = ObjectAnimator.ofFloat(v, â€œtranslationXâ€,// curTranslationX, -500f, curTranslationX); //ä¼ å…¥translationXï¼ŒåŽé¢ï¼“ä¸ªå‚æ•°å‘Šè¯‰å®ƒæ€Žä¹ˆç§»åŠ¨ /** * ç¼©æ”¾ï¼š å‚æ•°æ”¹ä¸º scaleY,è¡¨ç¤ºå†åž‚ç›´æ–¹å‘ä¸Šæ”¾å¤§ï¼“å€å†è¿˜åŽŸ */ ObjectAnimator animator = ObjectAnimator.ofFloat(v, &quot;scaleY&quot;, 1f, 3f, 1f); animator.setDuration(5000); animator.start(); ObjectAnimatorä¼ å…¥å‚æ•°æ˜¯æ ¹æ®ï¼¶iewçš„å±žæ€§è¿›è¡Œæ“ä½œçš„ï¼Œå¦‚setRotation()ã€getRotation()ã€setTranslationX()ã€getTranslationX()ã€setScaleY()ã€getScaleY() ï¼ƒ ç»„åˆåŠ¨ç”» : å°±æ˜¯å±žæ€§åŠ¨ç”»ç»„åˆèµ·æ¥,å€ŸåŠ©AnimatorSet å¾®é£Žå¹ç€ï¼Œé£˜æ¥å‘¨ä¼ é›„çš„éŸ³ä¹â€¦ æ•²ç€é”®ç›˜ äººç”Ÿä¸è¿‡å¦‚æ­¤ï½žï½ž after(Animator anim) : çŽ°æœ‰åŠ¨ç”»æ”¾åœ¨ä¼ å…¥åŠ¨ç”»ä¹‹åŽæ‰§è¡Œ after(long delay) : å°‡çŽ°æœ‰åŠ¨ç”»å»¶è¿Ÿ â€œdelayâ€ åŽæ‰§è¡Œ before(Animator anim) :å‚è€ƒæ¥¼ä¸Š with(Animator anim) : çŽ°æœ‰åŠ¨ç”»ç›’ä¼ å…¥åŠ¨ç”»åŒæ—¶æ‰§è¡Œ ç¤ºä¾‹ ObjectAnimator moveIn = ObjectAnimator.ofFloat(v, â€œtranslationXâ€, -500f, 0f); ObjectAnimator rotation = ObjectAnimator.ofFloat(v, â€œrotationâ€, 0f, 360f); ObjectAnimator fadeInOut = ObjectAnimator.ofFloat(v, â€œalphaâ€, 1f, 0f, 1f); AnimatorSet animSet = new AnimatorSet(); animSet.play(rotation).with(fadeInOut).after(moveIn); animSet.setDuration(5000); animSet.addListener(new Animator.AnimatorListener() { @Override public void onAnimationStart(Animator animation) { Log.d(TAG, â€œ onAnimationStart â€œ); } @Override public void onAnimationEnd(Animator animation) &#123; Log.d(TAG, &quot; onAnimationEnd &quot;); &#125; @Override public void onAnimationCancel(Animator animation) &#123; Log.d(TAG, &quot; onAnimationCancel &quot;); &#125; @Override public void onAnimationRepeat(Animator animation) &#123; Log.d(TAG, &quot; onAnimationRepeat &quot;); &#125; &#125;); animSet.start(); ä¸‹é¢æ˜¯ç›‘å¬å™¨ï¼Œä¹Ÿå¯ä»¥ç”¨AnimatorListenerAdapter é€‰æ‹©æƒ³è¦é‡å†™çš„æ–¹æ³• XMLæ”¯æŒçš„Property Animation tags å¯¹åº”ä»£ç ä¸­çš„ValueAnimator - ObjectAnimator - AnimatorSet - è¿™é‡Œä¹Ÿéœ€è¦å»ºä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ The property animation system lets you declare property animations with XML instead of doing it programmatically. By defining your animations in XML, you can easily reuse your animations in multiple activities and more easily edit the animation sequence. To distinguish animation files that use the new property animation APIs from those that use the legacy view animation framework, starting with Android 3.1, you should save the XML files for property animations in the **res/animator/ **directory. 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;animator xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:valueFrom=&quot;0&quot; android:valueTo=&quot;100&quot; android:valueType=&quot;intType&quot; /&gt;åŠ è½½Animator anim = AnimatorInflater.loadAnimator(this, R.animator.propery_first); anim.setTarget(v); anim.start(); æ ¹æ®å®˜æ–¹ä¾‹å­,ä¹Ÿå¯ä»¥å¼ºè½¬ValueAnimatorï¼Œæ·»åŠ ç›‘å¬å™¨,å…¶ä»–å½¢å¼çš„xmlæ–‡ä»¶ä¹Ÿç±»ä¼¼ è®¾ç½®åŠ¨ç”»å‚æ•° 12345678910111213141516// ValueAnimatoré‡‡ç”¨&lt;animator&gt; æ ‡ç­¾&lt;animator xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:valueFrom=&quot;0&quot; // åˆå§‹å€¼ android:valueTo=&quot;100&quot; // ç»“æŸå€¼ android:valueType=&quot;intType&quot; // å˜åŒ–å€¼ç±»åž‹ ï¼šfloatType &amp; intType android:duration=&quot;3000&quot; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆmsï¼‰ï¼Œå¿…é¡»è®¾ç½®ï¼ŒåŠ¨ç”»æ‰æœ‰æ•ˆæžœ android:startOffset =&quot;1000&quot; // åŠ¨ç”»å»¶è¿Ÿå¼€å§‹æ—¶é—´ï¼ˆmsï¼‰ android:fillBefore = â€œtrueâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»å¼€å§‹çš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºtrue android:fillAfter = â€œfalseâ€ // åŠ¨ç”»æ’­æ”¾å®ŒåŽï¼Œè§†å›¾æ˜¯å¦ä¼šåœç•™åœ¨åŠ¨ç”»ç»“æŸçš„çŠ¶æ€ï¼Œä¼˜å…ˆäºŽfillBeforeå€¼ï¼Œé»˜è®¤ä¸ºfalse android:fillEnabled= â€œtrueâ€ // æ˜¯å¦åº”ç”¨fillBeforeå€¼ï¼Œå¯¹fillAfterå€¼æ— å½±å“ï¼Œé»˜è®¤ä¸ºtrue android:repeatMode= â€œrestartâ€ // é€‰æ‹©é‡å¤æ’­æ”¾åŠ¨ç”»æ¨¡å¼ï¼Œrestartä»£è¡¨æ­£åºé‡æ”¾ï¼Œreverseä»£è¡¨å€’åºå›žæ”¾ï¼Œé»˜è®¤ä¸ºrestart| android:repeatCount = â€œ0â€ // é‡æ”¾æ¬¡æ•°ï¼ˆæ‰€ä»¥åŠ¨ç”»çš„æ’­æ”¾æ¬¡æ•°=é‡æ”¾æ¬¡æ•°+1ï¼‰ï¼Œä¸ºinfiniteæ—¶æ— é™é‡å¤ android:interpolator = @[package:]anim/interpolator_resource // æ’å€¼å™¨ï¼Œå³å½±å“åŠ¨ç”»çš„æ’­æ”¾é€Ÿåº¦,ä¸‹é¢ä¼šè¯¦ç»†è®²/&gt; https://blog.csdn.net/carson_ho/article/details/72909894 å‚è€ƒï¼šhttp://blog.csdn.net/guolin_blog/article/details/43536355","categories":[{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/categories/anim/"}],"tags":[]},{"title":"PerformancePatterns","slug":"PerformancePatterns","date":"2017-08-16T01:56:08.000Z","updated":"2022-06-12T03:17:58.718Z","comments":true,"path":"2017/08/16/PerformancePatterns/","link":"","permalink":"https://noteforme.github.io/2017/08/16/PerformancePatterns/","excerpt":"","text":"https://developer.android.com/topic/performance/vitals Vitalsæ ¹æ®vitasæç¤ºç¡®è®¤è§£å†³æ–¹æ¡ˆ https://support.google.com/googleplay/android-developer/answer/9844486?visit_id=637902898856761718-3795427085&amp;rd=1&amp;hl=zh-Hans#zippy= https://play.google.com/console/u/0/developers/5313279702199603526/app/4975846927718251228/vitals/metrics/overview?days=30 https://www.youtube.com/playlist?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE Vitals vs firebasehttps://developer.android.google.cn/distribute/best-practices/launch/debug-crashes?hl=zh-cn çº¢æ©™https://www.jianshu.com/p/888d959683a4 https://juejin.cn/post/6950608825942868004 å›¾ç‰‡å¤„ç† https://developer.android.com/topic/performance/graphics/index.htmlhttps://developer.android.com/topic/performance/graphics/load-bitmap.html#read-bitmap æ€§èƒ½ä¼˜åŒ– https://mp.weixin.qq.com/s/ceXsH06fUFa7y4lzi4uXzw https://mp.weixin.qq.com/s/xqrGukIqA2zpGsGzah2EzA åŒ…ä½“ç§¯ä¼˜åŒ– https://juejin.im/post/6854573210408189960 https://mp.weixin.qq.com/s/jnZpgaRFQT5ULk9tHWMAGg https://www.jianshu.com/p/fba7b43bdc9c å¸ƒå±€ä¼˜åŒ–https://www.jianshu.com/p/ee9e4b8cb95f strict mode https://www.bilibili.com/video/BV1wh411H78Z?p=7 Troubleshooting app performance issues with System Trace in Android Studio https://www.youtube.com/watch?v=EjmIit_amnE ç¡¬ä»¶åŠ é€ŸåŽŸç† ç›¸ä¿¡ç»å¸¸çœ‹åˆ°æœ‰çš„æ–‡ç« è¯´å¼€å¯ç¡¬ä»¶åŠ é€Ÿè§£å†³å¡çš„é—®é¢˜ï¼Œä½†ç¡¬ä»¶åŠ é€Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ç¡¬ä»¶åŠ é€Ÿçš„ä¸»è¦åŽŸç†æ˜¯é€šå¤šåº•å±‚é€»è¾‘ï¼Œå°†CPUä¸æ“…é•¿çš„å›¾å½¢è®¡ç®—è½¬æ¢æˆGPUä¸“ç”¨æŒ‡ä»¤ï¼Œè®©æ›´æ“…é•¿å›¾å½¢è®¡ç®—çš„GPUæ¥å®Œæˆæ¸²æŸ“ã€‚ ç¡¬ä»¶åŠ é€Ÿè¿‡ç¨‹ä¸­åŒ…å«ä¸¤ä¸ªæ­¥éª¤ ï¼š æž„å»ºé˜¶æ®µ ï¼š éåŽ†æ‰€æœ‰è§†å›¾ï¼Œå°†éœ€è¦ç»˜åˆ¶çš„æ“ä½œç¼“å­˜ä¸‹æ¥ï¼Œäº¤ç»™å•ç‹¬çš„Renderçº¿ç¨‹ä½¿ç”¨GPUè¿›è¡Œç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ã€‚(è¿™ä¸€é˜¶æ®µåœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨CPUæž„å»º) ç»˜åˆ¶é˜¶æ®µ ï¼š è°ƒç”¨OpenGLï¼ˆå³ä½¿ç”¨GPUï¼‰å¯¹æž„å»ºå¥½çš„è§†å›¾è¿›è¡Œç»˜åˆ¶æ¸²æŸ“ï¼Œç»˜åˆ¶çš„å†…å®¹ä¿å­˜åœ¨Graphic Buffer å¹¶äº¤ç”± SurfaceFlinger æ˜¾ç¤ºã€‚(Android 5.0+ ä½¿ç”¨Render Threadçº¿ç¨‹ï¼Œä¸“é—¨è´Ÿè´£ UI æ¸²æŸ“å’ŒåŠ¨ç”»æ˜¾ç¤ºã€‚) ä»¥ä¸Šè¯å¾—ç¡¬ä»¶åŠ é€Ÿå…·æœ‰ä¸é”™çš„ä¼˜ç‚¹ï¼Œä½†å®ƒä¸æ˜¯ä¸‡èƒ½çš„ã€‚ æˆ‘ä»¬å¹³æ—¶ç”¨çš„æ—¶å€™å¯èƒ½æ˜¯ç›´æŽ¥åœ¨Applicationä¸­ç”¨ï¼Œä¸€é”…ç«¯ï¼Œè¿™å¹¶ä¸ä¸¥è°¨ï¼Œå› ä¸ºç¡¬ä»¶åŠ é€Ÿè¿˜æ²¡æ³•åšåˆ°æ”¯æŒæ‰€æœ‰çš„ç»˜åˆ¶æ“ä½œï¼ˆæ¯”å¦‚å¤æ‚çš„è‡ªå®šä¹‰Viewï¼‰ï¼Œè¿™æ ·çš„è¯å°±ä¼šé€ æˆä¸€å®šçš„å½±å“ï¼š \\1. åƒç´ é”™ä½ç­‰è§†è§‰é—®é¢˜ \\2. ä¸åŒè®¾å¤‡ç‰ˆæœ¬APIå…¼å®¹é—®é¢˜ https://segmentfault.com/a/1190000041325538 Apkç˜¦èº« https://blog.csdn.net/qq_32175491/article/details/80071987 ä¹Ÿæœ‰ä¸å»ºè®®åˆ SOåº“çš„è¯´æ³• http://kaedea.com/2016/06/04/android-dynamical-loading-04-so-problems/ Code CheckCode Reviewä¹‹å‰å¯ä»¥åšçš„äº‹æƒ…. https://developer.android.google.cn/studio/write/annotations https://www.jianshu.com/p/cf1b97941856 https://www.cnblogs.com/endv/p/12541442.html","categories":[],"tags":[{"name":"Performance","slug":"Performance","permalink":"https://noteforme.github.io/tags/Performance/"}]},{"title":"TouchEvent2","slug":"TouchEvent2","date":"2017-08-13T14:01:04.000Z","updated":"2021-08-19T11:11:44.255Z","comments":true,"path":"2017/08/13/TouchEvent2/","link":"","permalink":"https://noteforme.github.io/2017/08/13/TouchEvent2/","excerpt":"","text":"Android touch Event äº‹ä»¶åˆ†å‘å…¶å®žå°±æ˜¯å¯¹MotionEventäº‹ä»¶å¾—åˆ†å‘è¿‡ç¨‹,å½“MotionEvetäº§ç”ŸåŽï¼Œç³»ç»Ÿéœ€è¦æŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’ç»™ä¸€ä¸ªå…·ä½“å¾—View,è€Œè¿™ä¸ªä¼ é€’å¾—è¿‡ç¨‹å°±æ˜¯åˆ†å‘è¿‡ç¨‹ æ¦‚è¿° ä¸ºä»€ä¹ˆä¼šæœ‰äº‹ä»¶åˆ†å‘æœºåˆ¶? Androidå¾—Viewæ˜¯æ ‘å½¢ç»“æž„ï¼Œç»˜åˆ¶å¾—æ—¶å€™éåŽ†å­View,ä»–ä»¬å¿…å®šæ˜¯ä¼šé‡åˆåˆ†å¸ƒï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬ç‚¹å‡»å¾—æ—¶å€™ï¼Œæ˜¯åº”è¯¥è°æ¥å“åº”è¿™ä¸ªäº‹ä»¶å‘¢? ç„¶åŽæ‰æœ‰äº‹ä»¶åˆ†å‘ Activity ï¼&gt; PhoneWindow ï¼&gt; DecorView ï¼&gt; ViewGroup ï¼&gt; â€¦ ï¼&gt; View æ•´ä¸ªåˆ†å‘çš„å®è§‚è¿‡ç¨‹,Androidç¾¤è‹±ä¼  è¿™æœ¬ä¹¦æè¿°çš„å¾ˆæ¸…æ™°,ç„¶åŽé…åˆ Androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ï¼Œçš„æºç åˆ†æžï¼Œç®€ç›´å¤©ä½œä¹‹åˆï¼Ž ä¸»è¦æ–¹æ³• methodäº‹ä»¶åˆ†å‘æœºåˆ¶äº‹ç”± Activity -&gt; ViewGroup -&gt; View æ–¹å‘ä¸Šå¾—ä¼ é€’é€šè¿‡ä¸‰ä¸ªå¾ˆé‡è¦å¾—æ–¹æ³•å…±åŒå®Œæˆ dispatchTouchEventã€onInterceptTouchEventã€onTouchEvent dispatchTouchEvent() å±žæ€§ ä»‹ç» ä½¿ç”¨å¯¹è±¡ Activityã€ViewGroupã€View ä½œç”¨ äº‹ä»¶åˆ†å‘ onInterceptTouchEvent() å±žæ€§ ä»‹ç» ä½œç”¨ æ‹¦æˆªäº‹ä»¶ è°ƒç”¨æ—¶åˆ» åœ¨ViewGroupçš„dispatchTouchEvent()å†…éƒ¨è°ƒç”¨ onTouchEvent() å±žæ€§ ä»‹ç» ä½¿ç”¨å¯¹è±¡ Activityã€ViewGroupã€View ä½œç”¨ äº‹ä»¶æ¶ˆè´¹ è°ƒç”¨æ—¶åˆ» åœ¨dispatchTouchEvent()å†…éƒ¨è°ƒç”¨ ä¸‰ä¸ªæ–¹æ³•çš„å…³ç³» å¯ä»¥ç”¨ singwhatiwanna å†™çš„ä¼ªä»£ç è¡¨ç¤º: 123456789public boolean dispatchTouchEvent(MotionEvent ev)&#123; boolean consume = false; if(onInterceptTouchEvent(ev))&#123; consume = onTouchEvent(ev); &#125;else&#123; consume = child.dispatchTouchEvent(ev); &#125; return consume;&#125; dispatchTouchEvent ï¼šå¯¹äºŽViewGroupï¼Œç‚¹å‡»äº‹ä»¶äº§ç”ŸåŽé¦–å…ˆä¼šä¼ é€’ç»™å®ƒï¼Œ onInterceptTouchEvent(evï¼‰: å¦‚æžœæ–¹æ³•è¿”å›žtrue,åˆ™æ‹¦æˆªäº‹ä»¶,äº‹ä»¶å°±äº¤ç»™å½“å‰ViewGroupå¤„ç†,æŽ¥ç€è°ƒç”¨å½“å‰ ViewGroupçš„onTouchEvent.å¦‚æžœè¿”å›žflase,å°±äº¤ç»™å®ƒçš„å­å…ƒç´ ,å­å…ƒç´ çš„dispatchTouchEventå°±ä¼šè°ƒç”¨ onTouchEvent : å¦‚æžœè¿”å›žfalseï¼Œé‚£ä¹ˆçˆ¶å®¹å™¨çš„onTouchEventå°†ä¼šè¢«è°ƒç”¨. Activity ViewGroup Viewsource code Activity 123456789public boolean dispatchTouchEvent(MotionEvent ev) &#123; if (ev.getAction() == MotionEvent.ACTION_DOWN) &#123; onUserInteraction(); &#125; if (getWindow().superDispatchTouchEvent(ev)) &#123; return true; &#125; return onTouchEvent(ev);&#125; ViewGroup 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215@Override public boolean dispatchTouchEvent(MotionEvent ev) &#123; if (mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onTouchEvent(ev, 1); &#125; // If the event targets the accessibility focused view and this is it, start // normal event dispatch. Maybe a descendant is what will handle the click. if (ev.isTargetAccessibilityFocus() &amp;&amp; isAccessibilityFocusedViewOrHost()) &#123; ev.setTargetAccessibilityFocus(false); &#125; boolean handled = false; if (onFilterTouchEventForSecurity(ev)) &#123; final int action = ev.getAction(); final int actionMasked = action &amp; MotionEvent.ACTION_MASK; // Handle an initial down. if (actionMasked == MotionEvent.ACTION_DOWN) &#123; // Throw away all previous state when starting a new touch gesture. // The framework may have dropped the up or cancel event for the previous gesture // due to an app switch, ANR, or some other state change. cancelAndClearTouchTargets(ev); resetTouchState(); &#125; // Check for interception. final boolean intercepted; if (actionMasked == MotionEvent.ACTION_DOWN || mFirstTouchTarget != null) &#123; final boolean disallowIntercept = (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT) != 0; if (!disallowIntercept) &#123; intercepted = onInterceptTouchEvent(ev); ev.setAction(action); // restore action in case it was changed &#125; else &#123; intercepted = false; &#125; &#125; else &#123; // There are no touch targets and this action is not an initial down // so this view group continues to intercept touches. intercepted = true; &#125; // If intercepted, start normal event dispatch. Also if there is already // a view that is handling the gesture, do normal event dispatch. if (intercepted || mFirstTouchTarget != null) &#123; ev.setTargetAccessibilityFocus(false); &#125; // Check for cancelation. final boolean canceled = resetCancelNextUpFlag(this) || actionMasked == MotionEvent.ACTION_CANCEL; // Update list of touch targets for pointer down, if needed. final boolean split = (mGroupFlags &amp; FLAG_SPLIT_MOTION_EVENTS) != 0; TouchTarget newTouchTarget = null; boolean alreadyDispatchedToNewTouchTarget = false; if (!canceled &amp;&amp; !intercepted) &#123; // If the event is targeting accessibility focus we give it to the // view that has accessibility focus and if it does not handle it // we clear the flag and dispatch the event to all children as usual. // We are looking up the accessibility focused host to avoid keeping // state since these events are very rare. View childWithAccessibilityFocus = ev.isTargetAccessibilityFocus() ? findChildWithAccessibilityFocus() : null; if (actionMasked == MotionEvent.ACTION_DOWN || (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_DOWN) || actionMasked == MotionEvent.ACTION_HOVER_MOVE) &#123; final int actionIndex = ev.getActionIndex(); // always 0 for down final int idBitsToAssign = split ? 1 &lt;&lt; ev.getPointerId(actionIndex) : TouchTarget.ALL_POINTER_IDS; // Clean up earlier touch targets for this pointer id in case they // have become out of sync. removePointersFromTouchTargets(idBitsToAssign); final int childrenCount = mChildrenCount; if (newTouchTarget == null &amp;&amp; childrenCount != 0) &#123; final float x = ev.getX(actionIndex); final float y = ev.getY(actionIndex); // Find a child that can receive the event. // Scan children from front to back. final ArrayList&lt;View&gt; preorderedList = buildTouchDispatchChildList(); final boolean customOrder = preorderedList == null &amp;&amp; isChildrenDrawingOrderEnabled(); final View[] children = mChildren; for (int i = childrenCount - 1; i &gt;= 0; i--) &#123; final int childIndex = getAndVerifyPreorderedIndex( childrenCount, i, customOrder); final View child = getAndVerifyPreorderedView( preorderedList, children, childIndex); // If there is a view that has accessibility focus we want it // to get the event first and if not handled we will perform a // normal dispatch. We may do a double iteration but this is // safer given the timeframe. if (childWithAccessibilityFocus != null) &#123; if (childWithAccessibilityFocus != child) &#123; continue; &#125; childWithAccessibilityFocus = null; i = childrenCount - 1; &#125; if (!child.canReceivePointerEvents() || !isTransformedTouchPointInView(x, y, child, null)) &#123; ev.setTargetAccessibilityFocus(false); continue; &#125; newTouchTarget = getTouchTarget(child); if (newTouchTarget != null) &#123; // Child is already receiving touch within its bounds. // Give it the new pointer in addition to the ones it is handling. newTouchTarget.pointerIdBits |= idBitsToAssign; break; &#125; resetCancelNextUpFlag(child); if (dispatchTransformedTouchEvent(ev, false, child, idBitsToAssign)) &#123; // Child wants to receive touch within its bounds. mLastTouchDownTime = ev.getDownTime(); if (preorderedList != null) &#123; // childIndex points into presorted list, find original index for (int j = 0; j &lt; childrenCount; j++) &#123; if (children[childIndex] == mChildren[j]) &#123; mLastTouchDownIndex = j; break; &#125; &#125; &#125; else &#123; mLastTouchDownIndex = childIndex; &#125; mLastTouchDownX = ev.getX(); mLastTouchDownY = ev.getY(); newTouchTarget = addTouchTarget(child, idBitsToAssign); alreadyDispatchedToNewTouchTarget = true; break; &#125; // The accessibility focus didn&#x27;t handle the event, so clear // the flag and do a normal dispatch to all children. ev.setTargetAccessibilityFocus(false); &#125; if (preorderedList != null) preorderedList.clear(); &#125; if (newTouchTarget == null &amp;&amp; mFirstTouchTarget != null) &#123; // Did not find a child to receive the event. // Assign the pointer to the least recently added target. newTouchTarget = mFirstTouchTarget; while (newTouchTarget.next != null) &#123; newTouchTarget = newTouchTarget.next; &#125; newTouchTarget.pointerIdBits |= idBitsToAssign; &#125; &#125; &#125; // Dispatch to touch targets. if (mFirstTouchTarget == null) &#123; // No touch targets so treat this as an ordinary view. handled = dispatchTransformedTouchEvent(ev, canceled, null, TouchTarget.ALL_POINTER_IDS); &#125; else &#123; // Dispatch to touch targets, excluding the new touch target if we already // dispatched to it. Cancel touch targets if necessary. TouchTarget predecessor = null; TouchTarget target = mFirstTouchTarget; while (target != null) &#123; final TouchTarget next = target.next; if (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) &#123; handled = true; &#125; else &#123; final boolean cancelChild = resetCancelNextUpFlag(target.child) || intercepted; if (dispatchTransformedTouchEvent(ev, cancelChild, target.child, target.pointerIdBits)) &#123; handled = true; &#125; if (cancelChild) &#123; if (predecessor == null) &#123; mFirstTouchTarget = next; &#125; else &#123; predecessor.next = next; &#125; target.recycle(); target = next; continue; &#125; &#125; predecessor = target; target = next; &#125; &#125; // Update list of touch targets for pointer up or cancel, if needed. if (canceled || actionMasked == MotionEvent.ACTION_UP || actionMasked == MotionEvent.ACTION_HOVER_MOVE) &#123; resetTouchState(); &#125; else if (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_UP) &#123; final int actionIndex = ev.getActionIndex(); final int idBitsToRemove = 1 &lt;&lt; ev.getPointerId(actionIndex); removePointersFromTouchTargets(idBitsToRemove); &#125; &#125; if (!handled &amp;&amp; mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onUnhandledEvent(ev, 1); &#125; return handled; &#125; View 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public boolean dispatchTouchEvent(MotionEvent event) &#123; // If the event should be handled by accessibility focus first. if (event.isTargetAccessibilityFocus()) &#123; // We don&#x27;t have focus or no virtual descendant has it, do not handle the event. if (!isAccessibilityFocusedViewOrHost()) &#123; return false; &#125; // We have focus and got the event, then use normal event dispatch. event.setTargetAccessibilityFocus(false); &#125; boolean result = false; if (mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onTouchEvent(event, 0); &#125; final int actionMasked = event.getActionMasked(); if (actionMasked == MotionEvent.ACTION_DOWN) &#123; // Defensive cleanup for new gesture stopNestedScroll(); &#125; if (onFilterTouchEventForSecurity(event)) &#123; if ((mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; handleScrollBarDragging(event)) &#123; result = true; &#125; //noinspection SimplifiableIfStatement ListenerInfo li = mListenerInfo; if (li != null &amp;&amp; li.mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; li.mOnTouchListener.onTouch(this, event)) &#123; result = true; &#125; if (!result &amp;&amp; onTouchEvent(event)) &#123; result = true; &#125; &#125; if (!result &amp;&amp; mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onUnhandledEvent(event, 0); &#125; // Clean up after nested scrolls if this is the end of a gesture; // also cancel it if we tried an ACTION_DOWN but we didn&#x27;t want the rest // of the gesture. if (actionMasked == MotionEvent.ACTION_UP || actionMasked == MotionEvent.ACTION_CANCEL || (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) &#123; stopNestedScroll(); &#125; return result;&#125; å›¾ACTION_DOWNåˆ†æž1.MotionEvent.ACTION_DOWN éƒ½ä¸æ‹¦æˆª Activity dispatchTouchEvent() 1 =&gt; 5 RootView dispatchTouchEvent() 29 =&gt; (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT)==0 â€‹ =&gt; 33 =&gt; 58 =&gt; 68 =&gt; 122 =&gt; dispatchTransformedTouchEventæœ‰å­viewé‡å¤ä¸Šé¢æµç¨‹ =&gt; dispatchTransformedTouchEventæ²¡æœ‰å­View =&gt; View1 dispatchTouchEvent() 36 =&gt; 54 result=false =&gt;äº‹ä»¶å¼€å§‹å¾€å›žä¼ =&gt; ViewGroupA 122=&gt;163=&gt; 164 dispatchTransformedTouchEvent childä¼ null =&gt;å¼€å§‹è°ƒç”¨View dispatchTouchEvent()=false =&gt; äº‹ä»¶ç»§ç»­å›žä¼ =&gt; RootView =&gt;é‡å¤ä¸Šé¢ViewGroupAçš„æµç¨‹ =&gt; 164 handled=false =&gt; Activity =&gt;5 getWindow().superDispatchTouchEvent(ev) =&gt; onTouchEvent(ev); å›¾ACTION_MOVE UPåˆ†æž RootView onInterceptTouchEvent =true Activity dispatchTouchEvent() 1 =&gt; 5 RootView dispatchTouchEvent() 29 =&gt; (mGroupFlags &amp; FLAG_DISALLOW_INTERCEPT)==0 =&gt; 164 &gt;handler = false =&gt; Activity =&gt;5 getWindow().superDispatchTouchEvent(ev) =&gt; onTouchEvent(ev); å›¾ACTION_MOVE UPåˆ†æž View touchevent = true Activity dispatchTouchEvent() 1 =&gt; 5 RootView dispatchTouchEvent() 29 =&gt; 41 =&gt; 170 =&gt; 183 éåŽ†æŸ¥æ‰¾æ¶ˆè´¹eventçš„View =&gt; handled = true Activity =&gt;5 getWindow().superDispatchTouchEvent(ev) =&gt; onTouchEvent(ev); Viewç‚¹å‡»äº‹ä»¶å¤„ç†(ä¸æ˜¯ViewGroup) onTouchè¿”å›žfalse 1234567891011121314button2.setOnTouchListener(new View.OnTouchListener() &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; Log.d(TAG, &quot;æ‰§è¡Œ button2 onTouch() åŠ¨ä½œ&quot; + event.getAction()); return false; &#125; &#125;); button2.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Log.d(TAG, &quot;you clicked button2&quot;); &#125; &#125;); æ‰“å°ç»“æžœ: D/DispatchActivity: æ‰§è¡Œ button2 onTouch() åŠ¨ä½œ0 D/DispatchActivity: æ‰§è¡Œ button2 onTouch() åŠ¨ä½œ1 D/DispatchActivity: you clicked button2 onTouchè¿”å›žtrueLogæ‰“å°ç»“æžœ: D/DispatchActivity: æ‰§è¡Œ button2 onTouch() åŠ¨ä½œ0D/DispatchActivity: æ‰§è¡Œ button2 onTouch() åŠ¨ä½œ1 ä¸åŒå¾—è¿”å›žå€¼,å¾—åˆ°ä¸åŒå¾—ç»“æžœ çœ‹ä¸‹ä¸ºä»€ä¹ˆçœ‹ä¸‹ Viewçš„dispatchTouchEventï¼ˆï¼‰ API 23 æºç çš„äº‹ä»¶åˆ†å‘æµç¨‹ç‚¹å‡» Buttonå¯»æ‰¾dispatchTouchEvent() Button -&gt; dispatchTouchEvent() -&gt; TextView-&gt;View (ç‚¹å‡»ButtonåŽå°±ä¼šæ‰¾ dispatchTouchEvent()ï¼ŒButtonæ²¡æœ‰ï¼Œç„¶åŽå°±åŽ»çˆ¶ç±»TextViewè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œæœ€åŽåœ¨Viewæ‰¾åˆ°äº†) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859/** * Pass the touch screen motion event down to the target view, or this * view if it is the target. * * @param event The motion event to be dispatched. * @return True if the event was handled by the view, false otherwise. */ public boolean dispatchTouchEvent(MotionEvent event) &#123; // If the event should be handled by accessibility focus first. if (event.isTargetAccessibilityFocus()) &#123; // We don&#x27;t have focus or no virtual descendant has it, do not handle the event. if (!isAccessibilityFocusedViewOrHost()) &#123; return false; &#125; // We have focus and got the event, then use normal event dispatch. event.setTargetAccessibilityFocus(false); &#125; boolean result = false; if (mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onTouchEvent(event, 0); &#125; final int actionMasked = event.getActionMasked(); if (actionMasked == MotionEvent.ACTION_DOWN) &#123; // Defensive cleanup for new gesture stopNestedScroll(); &#125; if (onFilterTouchEventForSecurity(event)) &#123; //noinspection SimplifiableIfStatement ListenerInfo li = mListenerInfo; if (li != null &amp;&amp; li.mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; li.mOnTouchListener.onTouch(this, event)) &#123; result = true; &#125; if (!result &amp;&amp; onTouchEvent(event)) &#123; result = true; &#125; &#125; if (!result &amp;&amp; mInputEventConsistencyVerifier != null) &#123; mInputEventConsistencyVerifier.onUnhandledEvent(event, 0); &#125; // Clean up after nested scrolls if this is the end of a gesture; // also cancel it if we tried an ACTION_DOWN but we didn&#x27;t want the rest // of the gesture. if (actionMasked == MotionEvent.ACTION_UP || actionMasked == MotionEvent.ACTION_CANCEL || (actionMasked == MotionEvent.ACTION_DOWN &amp;&amp; !result)) &#123; stopNestedScroll(); &#125; return result; &#125; åˆ†æžç¬¬34è¡Œ,resulté»˜è®¤ä¸ºfalse,li.mOnTouchListener.onTouch(this, event))é»˜è®¤ä¹Ÿæ˜¯false,æŽ¥ç€ç¬¬40è¡Œ,onTouchEvent(event)) æ–¹æ³•ä¹Ÿä¼šå¾—åˆ°æ‰§è¡Œ -&gt; performClick()ä¼šç»™ç‚¹å‡»äº‹ä»¶ ä¸€ä¸ªå›žè°ƒ; ä»¥ä¸‹å†…å®¹å‚è€ƒ: gcssloopViewGroupçš„ dispatchTouchEvent()è§£æžhttp://blog.csdn.net/guolin_blog/article/details/9097463 https://mp.weixin.qq.com/s/KU32XpwDFBOl8ueXIaA8Tw","categories":[{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"}],"tags":[{"name":"TouchEvent","slug":"TouchEvent","permalink":"https://noteforme.github.io/tags/TouchEvent/"}]},{"title":"AndroidStudioTool","slug":"AndroidStudioTool","date":"2017-08-13T10:20:17.000Z","updated":"2025-05-30T11:59:02.402Z","comments":true,"path":"2017/08/13/AndroidStudioTool/","link":"","permalink":"https://noteforme.github.io/2017/08/13/AndroidStudioTool/","excerpt":"","text":"é™ä½Ž compileSdkVersion ç‰ˆæœ¬ æœ‰æ—¶å€™éœ€è¦çœ‹ä½Žç‰ˆæœ¬çš„æºç ï¼Œå°±è¦ä¿®æ”¹compileSdkVersionç‰ˆæœ¬ ä¿®æ”¹ç¼–è¯‘ç‰ˆæœ¬ targetSdkVersionç‰ˆæœ¬ä¿®æ”¹æˆ 21 ç„¶åŽ compile â€˜com.android.support:appcompat-v7:21.+â€™ ç»§æ‰¿çš„AppCompatActivityæ”¹æˆActivity ç¼–è¯‘åŽæŠ¥é”™ Error:(11) No resource identifier found for attribute â€˜roundIconâ€™ in package â€˜androidâ€™ æ ¹æ®é”™è¯¯åˆ é™¤ android:roundIcon ,ç„¶åŽç¼–è¯‘ å‚è€ƒï¼šhttp://blog.csdn.net/hyr83960944/article/details/39941683 android stuidoä»£ç†æ™®é€šä»£ç†ä¿®æ”¹Gradleé…ç½®æ–‡ä»¶åŽå°±ä¸€ç›´å¡åœ¨é‚£ï¼Œåœ¨ build.gradleå€¼ä¿®æ”¹ä¸‹é¢å¦‚æžœç”¨äº†ssä»£ç†ï¼Œåœ¨ubuntuè®¾ç½®httpæ²¡ç”¨ï¼Œå¯ä»¥åœ¨ å·¥ç¨‹æ ¹ç›®å½•ä¸‹ gradle.properties æ·»åŠ  org.gradle.jvmargs=-DsocksProxyHost=127.0.0.1 -DsocksProxyPort=1080 å‚è€ƒ: https://www.zhihu.com/question/37810416 å¹³å¸¸githubä¸‹è½½é¡¹ç›®å¯¼å…¥AndroidStudioç›´æŽ¥å¡æ­»ï¼Œå¿ƒé‡ŒçœŸä¸æ˜¯â€¦., ç›®å‰å®žéªŒä¸€ç§æ–¹å¼åº”è¯¥ä¼šå¿«ç‚¹ä¿®æ”¹ gradle\\wrapper\\gradle-wrapper.propertiesä¸‹çš„ distributionUrl&#x3D;https:&#x2F;&#x2F;services.gradle.org&#x2F;distributions&#x2F;gradle-3.3-all.zipï¼Œ æˆ‘çš„AndroidStudioé»˜è®¤æ˜¯è¿™ä¸ª æ‰€ä»¥å°±ä¿®æ”¹æˆè¿™æ ·çš„. jcenteråº“ä»£ç† (è¿™å‡ å¥è¯èŠ±äº†å…³é”®å¾—ä¸€å¤©æ—¶é—´)å‰å¤©å‡çº§äº†ç³»ç»Ÿï¼Œä¹‹å‰ä¸‹å¾—Demoä¸€ç›´è·‘ä¸èµ·æ¥ï¼Œâ€™https://jitpack.io&#39;å¾—æ–‡ä»¶ä¸€ç›´ä¸‹è½½ä¸ä¸‹æ¥ ï¼žé”™è¯¯ï¼š jcenter.bintray.com:443 failed to respond æŠ˜è…¾äº†ä¸€å¤©ç»ˆäºŽå¼„å¥½äº†,éœ€è¦è®¾ç½®proxyä»£ç†,æŠŠsocketæµé‡è½¬ä¸ºhttp ç„¶åŽåœ¨ ï¼­anual proxy configurationä¸‹é¢é€‰æ‹©HTTP å¡«ä¸Š 127.0.0.1 8118 å°±å¯ä»¥ä¸‹è½½jitpacké‡Œé¢å¾—æ–‡ä»¶äº† é˜¿é‡Œäº‘é•œåƒ &#x2F;Users&#x2F;john&#x2F;.gradle&#x2F;init.gradle ä¸‹è½½gradle æœ‰æ—¶å€™æƒ³ç”¨æ–°çš„çš„gradleï¼Œä½†æ˜¯æ–°çš„æ›´æ–°å‡ åMçš„æ–‡ä»¶ï¼Œä¸€å¤©éƒ½ä¸ä¸€å®šèƒ½ä¸‹ä¸‹æ¥ ç›´æŽ¥åŽ»å®˜ç½‘ä¸‹è½½ https://gradle.org/releases/ ï¼Œå¯¹åº”ç‰ˆæœ¬çš„zipæ–‡ä»¶ï¼Œæ”¾åˆ°ç›¸åº”ç›®å½• æ¯”å¦‚æˆ‘çš„å°±æ˜¯ C:\\Users\\Administrator.gradle\\wrapper\\dists\\gradle-3.3-all\\55gk2rcmfc6p2dg9u9ohc3hw9\\ è¿˜ä¸€ä¸ªæ˜¯åœ¨${home}&#x2F;.gradleç›®å½•ä¸‹å¾—gradle.propertiesæ–‡ä»¶é…ç½®åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ å¿«æ·é”® Ctrlï¼‹F12ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æž„Ctrlï¼‹Shiftï¼‹F7 å¯ä»¥é«˜äº®å½“å‰å…ƒç´ åœ¨å½“å‰æ–‡ä»¶ä¸­çš„ä½¿ç”¨Ctrlï¼‹Eï¼Œå¯ä»¥æ˜¾ç¤ºæœ€è¿‘ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨ Altï¼‹Up å’Œ Altï¼‹Downå¯åœ¨æ–¹æ³•é—´å¿«é€Ÿç§»åŠ¨ Shiftï¼‹Clickå¯ä»¥å…³é—­æ–‡ä»¶ Ctrl+ H æŸ¥çœ‹ç±»çš„ç»§æ‰¿å…³ç³» Ctrlï¼‹Altï¼‹Bå¯ä»¥è·³è½¬åˆ°æŠ½è±¡æ–¹æ³•çš„å®žçŽ° Ctrlï¼‹Qå¯ä»¥çœ‹JavaDoc å…¨å±€ä¿®æ”¹å¿«æ·é”®Shift+F6 æƒ³è¦å°†é‡Œé¢çš„cardNameå…¨éƒ¨æ›¿æ¢æˆuserNameï¼Œåˆ™é€‰ä¸­å…¶ä¸­ä¸€ä¸ªï¼ŒæŒ‰shift+f6å›žè½¦å³å¯æ‰¹é‡ä¿®æ”¹ã€‚ å‚è€ƒï¼šhttps://github.com/1sters/Android-Studio-Guide/blob/master/tips-shortcuts.md å¸¸ç”¨å¿«æ·é”®:https://mp.weixin.qq.com/s/lYBHtg342-t3NkPPY9E-YQ Build Variants è®¾ç½®æˆdebug 12345debug &#123; debuggable false minifyEnabled false signingConfig signingConfigs.debug &#125; debuggableè®¾ç½®æˆ true SVNåˆ†æ”¯åˆå¹¶ ä¸»å¹²,ä¸»å¹²æ–°å¢žæ–‡ä»¶è¢«åˆ é™¤å¼„äº†ä¸¤ä¸ªå¤šå°æ—¶ï¼Œè¯´å¤šäº†éƒ½æ˜¯æ³ª https://www.jianshu.com/p/e50af339259f æ— çº¿è°ƒè¯•https://juejin.im/entry/5a6a7e69518825733b0f1635 è®¾ç½®ä¾¦å¬æ–­å¼€ : 123adb tcpip 8888adb connect 192.168.31.76:8888 å®‰è£…åŒ…å®‰è£… adb -s acac34d7 install /e/JYWORK/ win10 jdkçŽ¯å¢ƒå˜é‡è®¾ç½®åœ¨ç³»ç»Ÿå˜é‡ä¸­è®¾ç½® ,æ³¨æ„è¦ç‚¹å¼€ç¼–è¾‘æ–‡æœ¬æ˜¯ä¸æ˜¯ä¹‹å‰è¾“å…¥çš„æœ‰ â€œâ€ Android stuidoå‘å¸ƒé¡¹ç›®Jcenter1gradlew clean build bintrayUpload -PbintrayUser=blogforme -PbintrayKey=4c7511bba437157d77baeb5c17d339ce92c2bee7 -PdryRun=false https://github.com/novoda/bintray-release https://www.jianshu.com/p/9f81d5b5a451 https://blog.csdn.net/qq_32452623/article/details/79282605 ä¾èµ–å…¶ä»–moudlehttps://mp.weixin.qq.com/s/trAxRzz573TFyJk2klKdag android stuido æ—¥å¿—è¿‡æ»¤ä¸éœ€è¦çš„æ—¥å¿—123^(?!.*(eglMakeCurrent|OpenGLRenderer)).*$eglMakeCurrent OpenGLRendererä¸¤ä¸ªåŒ…å«éœ€è¦è¿‡æ»¤çš„å­—æ®µ ç•™ä¸‹éœ€è¦çš„æ—¥å¿— https://www.jianshu.com/p/11e56991ff28 Emulatoræ˜¾ç¤º gradle panel taskspreference -&gt; Experimental -&gt; Configure all gradle tasks during Gradle Sync","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"BroadcastReceiver","slug":"BroadcastReceiver","date":"2017-08-12T07:44:53.000Z","updated":"2021-08-19T11:11:43.750Z","comments":true,"path":"2017/08/12/BroadcastReceiver/","link":"","permalink":"https://noteforme.github.io/2017/08/12/BroadcastReceiver/","excerpt":"","text":"BroadcastReceiver https://developer.android.com/guide/components/broadcasts.html å¹¿æ’­ä½¿åº”ç”¨ç¨‹åºé—´ä¼ è¾“ä¼ è¾“ä¿¡æ¯çš„æœºåˆ¶ï¼Œä¸»è¦ç”¨æ¥ç›‘å¬ç³»ç»Ÿæˆ–è€…åº”ç”¨å‘å‡ºçš„å¹¿æ’­ä¿¡æ¯ã€‚ BroadcastReceiverä½¿ç”¨æ³¨æ„ å½“ç³»ç»Ÿæˆ–åº”ç”¨å‘å‡ºå¹¿æ’­æ—¶ï¼Œæ‰«æç³»ç»Ÿæ‰€æœ‰å¹¿æ’­æŽ¥æ”¶è€…(æ— è®ºæ—¶é™æ€æ³¨å†Œè¿˜æ˜¯åŠ¨æ€æ³¨å†Œæ–¹å¼)ï¼Œé€šè¿‡actionåŒ¹é…å°‡å¹¿æ’­å‘ç»™ç›¸åº”æŽ¥æ”¶è€…ï¼ŒæŽ¥æ”¶è€…æ”¶åˆ° å¹¿æ’­åŽä¼šäº§ç”Ÿä¸€ä¸ªå¹¿æ’­å®žä¾‹ï¼Œæ‰§è¡ŒonReceiver()ï¼Œè¿™ä¸ªå®žä¾‹ç”Ÿå‘½å‘¨æœŸåªæœ‰10ç§’,10ç§’å†…æ²¡æ‰§è¡Œç»“æŸonReceiverï¼Œç³»ç»Ÿä¼šæŠ¥é”™,æ‰€ä»¥ä¸èƒ½å†onReceiver()æ‰§è¡Œè€—æ—¶æ“ä½œ,onReceiverç»“æŸåŽï¼Œå®žä¾‹è¢«é”€æ¯. BroadcastReceiveræ³¨å†Œæ–¹å¼Context-registered receivers (åŠ¨æ€æ³¨å†Œ)æ³¨å†Œ 12345678910private UpdateBroadcastReceiver updateBr;@Overrideprotected void onStart() &#123; super.onStart(); updateBr = new UpdateBroadcastReceiver(); IntentFilter intentFilter = new IntentFilter(); intentFilter.addAction(ACTION_UPDATE); registerReceiver(updateBr, intentFilter);&#125; å‘é€æ³¨é”€å¹¿æ’­ 123456789101112131415//ç‚¹å‡»å‘é€å¹¿æ’­public void btBroadcast(View v) &#123; Intent intentBroad = new Intent(); intentBroad.setAction(ACTION_UPDATE); sendBroadcast(intentBroad);&#125;@Overrideprotected void onDestroy() &#123; super.onDestroy(); if (updateBr != null) &#123; unregisterReceiver(updateBr); &#125;&#125; æ³¨æ„:è¿™ç§æ³¨å†Œæ–¹å¼ AndroidManifest.xmlä¸ç”¨åšä»»ä½•æ“ä½œ é™æ€æ³¨å†ŒAndroid 8.0ä¹‹åŽï¼Œé™æ€æ³¨å†Œæ˜¯æ— æ³•æŽ¥æ”¶éšå¼å¹¿æ’­çš„ï¼Œè€Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‘å‡ºçš„å¹¿æ’­éƒ½æ˜¯éšå¼å¹¿æ’­ï¼Œå› æ­¤ä¸€å®šè¦è°ƒç”¨setPackage()æ–¹æ³•ï¼ŒæŒ‡å®šè¿™æ¡å¹¿æ’­æ˜¯å‘é€ç»™å“ªä¸ªåº”ç”¨ç¨‹åºçš„ï¼Œä»Žè€Œè®©å®ƒå˜æˆä¸€æ¡æ˜¾ç¤ºå¹¿æ’­ã€‚ï¼ˆç¬¬ä¸€è¡Œä»£ç ï¼‰ AndroidManifest.xmlæ·»åŠ  12345&lt;receiver android:name=&quot;.broadcastservice.UpdateBroadcastReceiver&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.UpdateBroadcastReceiver&quot;/&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; æ³¨æ„ ä¸ºäº†æœç»APPæ»¥ç”¨èµ„æº,å®˜æ–¹å¯¹æœ‰çš„å¹¿æ’­åšäº†é™åˆ¶ Note: If your app targets API level 26 or higher, you cannot use the manifest to declare a receiver for implicit broadcasts (broadcasts that do not target your app specifically), except for a few implicit broadcasts that are exempted from that restriction. In most cases, you can use scheduled jobs instead. 1intent.setPackage(&quot;com.comm.util&quot;) Sending broadcastsæ–¹å¼æ™®é€šå¹¿æ’­æœ‰åºå¹¿æ’­FirstOrderBroadCast 12345678910class FirstOrderBroadCast : BroadcastReceiver() &#123; override fun onReceive(context: Context?, intent: Intent?) &#123; Log.e(&quot;receive&quot;, &quot;Low&quot;); val code = 1 val data = &quot;hello I am FirstOrderBroadCast&quot; val bundle: Bundle? = Bundle() bundle?.putString(&quot;first&quot;,&quot;from FirstOrderBroadCast&quot;) setResult(code, data, bundle) &#125;&#125; SecondOrderBroadCast 1234567891011class SecondOrderBroadCast : BroadcastReceiver() &#123; override fun onReceive(context: Context?, intent: Intent?) &#123; Log.e(&quot;receive&quot;, &quot;Mid&quot;) //èŽ·å–ä¸Šä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ç»“æžœ val code = resultCode val data = resultData var bundleResult = getResultExtras(true).get(&quot;first&quot;); Log.e(&quot;receive&quot;, &quot;èŽ·å–åˆ°ä¸Šä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ç»“æžœï¼šcode= $code data= $data bundleResult $bundleResult&quot;) &#125;&#125; ThirdOrderBroadCast 12345678910class ThirdOrderBroadCast : BroadcastReceiver() &#123; override fun onReceive(context: Context?, intent: Intent?) &#123; Log.e(&quot;receive&quot;, &quot;High&quot;) //ä¼ é€’ç»“æžœåˆ°ä¸‹ä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ val code = 3 val data = &quot;hello&quot; val bundle: Bundle? = null setResult(code, data, bundle) &#125;&#125; AndroidMnifest.xml 123456789101112131415&lt;receiver android:name=&quot;.component.broadcastservice.FirstOrderBroadCast&quot;&gt; &lt;intent-filter android:priority=&quot;3000&quot;&gt; &lt;action android:name=&quot;com.broadcast.android&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver&gt;&lt;receiver android:name=&quot;.component.broadcastservice.SecondOrderBroadCast&quot;&gt; &lt;intent-filter android:priority=&quot;2000&quot;&gt; &lt;action android:name=&quot;com.broadcast.android&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver&gt;&lt;receiver android:name=&quot;.component.broadcastservice.ThirdOrderBroadCast&quot;&gt; &lt;intent-filter android:priority=&quot;1000&quot;&gt; &lt;action android:name=&quot;com.broadcast.android&quot; /&gt; &lt;/intent-filter&gt;&lt;/receiver&gt; or 1234updateBr = UpdateBroadcastReceiver()val intentFilter = IntentFilter()intentFilter.addAction(UpdateBroadcastReceiver.ACTION_UPDATE)registerReceiver(updateBr, intentFilter) ä½¿ç”¨ BroadcastReceiverActivity 123456val intent = Intent()intent.action = &quot;com.broadcast.android&quot;bt_order_broadcast.setOnClickListener &#123; sendOrderedBroadcast(intent,null)&#125; è¿è¡Œç»“æžœ 1234E/receive: LowE/receive: MidE/receive: èŽ·å–åˆ°ä¸Šä¸€ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ç»“æžœï¼šcode= 1 data= hello I am FirstOrderBroadCast bundleResult from FirstOrderBroadCastE/receive: High LocalBroadcastManager.sendBroadcastmethod sends broadcasts to receivers that are in the same app as the sender. If you donâ€™t need to send broadcasts across apps, use local broadcasts.he implementation is much more efficient (no interprocess communication needed) and you donâ€™t need to worry about any security issues related to other apps being able to receive or send your broadcasts.(åº”ç”¨å†…å‘é€å¹¿æ’­) å‘é€ 123val intentBroad = Intent()intentBroad.action = UpdateBroadcastReceiver.ACTION_UPDATELocalBroadcastManager.getInstance(this).sendBroadcast(intentBroad) æ³¨å†Œ 1234567updateBr = UpdateBroadcastReceiver()val intentFilter = IntentFilter()intentFilter.addAction(UpdateBroadcastReceiver.ACTION_UPDATE)registerReceiver(updateBr, intentFilter)updateBr?.let &#123; LocalBroadcastManager.getInstance(this).registerReceiver(it,intentFilter)&#125; https://blog.csdn.net/qq_30379689/article/details/53341313","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"SERVICE","slug":"SERVICE","date":"2017-08-11T10:21:06.000Z","updated":"2025-07-09T14:35:26.346Z","comments":true,"path":"2017/08/11/SERVICE/","link":"","permalink":"https://noteforme.github.io/2017/08/11/SERVICE/","excerpt":"","text":"Servicehttps://developer.android.com/guide/components/services https://developer.android.com/reference/android/app/Service Serviceå¯åŠ¨æœåŠ¡ä¸¤ç§æ–¹å¼ startService bindService startServiceä¸€ä¸ªServiceè¢«startServiceå¤šæ¬¡å¯åŠ¨,é‚£ä¹ˆonCreateåªä¼šè°ƒç”¨ä¸€æ¬¡,onstart()ä¼šè¢«è°ƒç”¨å¤šæ¬¡, StartServcie:ä¸€æ—¦å¯åŠ¨ï¼ŒæœåŠ¡å³å¯åœ¨åŽå°æ— é™æœŸè¿è¡Œï¼Œå³ä½¿å¯åŠ¨æœåŠ¡çš„ï¼¡ctivityå·²è¢«é”€æ¯ä¹Ÿä¸å—å½±å“,ç›´åˆ°è°ƒç”¨stipServiceï¼Œæˆ–è‡ªèº«çš„stopSelfæ–¹æ³•ã€‚å†…å­˜ä¸è¶³ç³»ç»Ÿä¹Ÿä¼šç»“æŸæœåŠ¡ã€‚ bindServiceå®¢æˆ·ç«¯é€šè¿‡IBinderæŽ¥å£äºŽæœåŠ¡è¿›è¡Œé€šä¿¡,å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨unbindServieå…³é—­è¿žæŽ¥,å½“æ‰€æœ‰å®¢æˆ·ç«¯å…³é—­è¿žæŽ¥åŽç³»ç»Ÿä¼šé”€æ¯æœåŠ¡.å¯åŠ¨Logæ—¥å¿—I&#x2F;LearnService: â€“ onCreate() â€“I&#x2F;LearnService: â€“ onBind() â€“ ä¸€ä¸ªServiceè¢«æŸä¸ªActivityè°ƒç”¨Context.bindServiceç»‘å®šå¯åŠ¨ï¼Œä¸ç®¡bindServiceè°ƒç”¨å‡ æ¬¡ï¼ŒonCreateæ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡,onStartä¸ä¼šè°ƒç”¨. service 1public class BluetoothService extends Service &#123; @Override public void onCreate() &#123; super.onCreate(); Timber.i(&quot; onCreate()&quot;); &#125; @Override public int onStartCommand(Intent intent, int flags, int startId) &#123; Timber.i(&quot; onStartCommand()&quot;); String param = intent.getStringExtra(PARRAM); Timber.i(&quot;æŽ¥å— &quot; + param); return super.onStartCommand(intent, flags, startId); &#125; @Override public void onDestroy() &#123; super.onDestroy(); Timber.i(&quot; onDestroy()&quot;); &#125; @Override public void onLowMemory() &#123; super.onLowMemory(); Timber.i(&quot;onLowMemory()&quot;); &#125; @Override public boolean onUnbind(Intent intent) &#123; Timber.i(&quot;onUnbind(intent)()&quot;); return super.onUnbind(intent); &#125; @Override public void onRebind(Intent intent) &#123; super.onRebind(intent); Timber.i(&quot;onRebind(intent)()&quot;); &#125; public class LocalBinder extends Binder &#123; public BluetoothService getService() &#123; return BluetoothService.this; &#125; &#125; private final IBinder mBinder = new LocalBinder(); @Nullable @Override public IBinder onBind(Intent intent) &#123; Timber.i(&quot;onBind(intent)()&quot;); return mBinder; &#125; } 123456789101112131415161718192. å¯åŠ¨3. `bindService(intent,mServiceConnection,BIND_AUTO_CREATE);`3. å›žè°ƒ```java ServiceConnection mServiceConnection = new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName name, IBinder service) &#123; mBlueService = ((BluetoothService.LocalBinder)service).getService(); Timber.i(&quot;onServiceConnected(ComponentName name, IBinder service)&quot;); &#125; @Override public void onServiceDisconnected(ComponentName name) &#123; Timber.i(&quot;onServiceDisconnected(ComponentName name)&quot;); &#125; &#125;; å…ˆstartServiceåˆ›å»ºæœåŠ¡ï¼Œç„¶åŽbindServiceç»‘å®šï¼Œè¿™æ—¶å€™è°ƒç”¨stopServiceæˆ–stopSelf(),ä¸ä¼šåœæ­¢ï¼Œåªèƒ½ä½¿unbindService()åœæ­¢æœåŠ¡ IntentService é€šè¿‡HandlerThreadå•ç‹¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡å¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ ä¸éœ€è¦è°ƒç”¨stopSelft()å…³é—­æœåŠ¡ï¼Œä»»åŠ¡ç»“æŸåŽè‡ªåŠ¨å…³é—­ 1234567808-12 13:38:26.601 30532-30532/com.hyhy.lern I/MyIntentService: -- onCreate() --08-12 13:38:26.601 30532-30532/com.hyhy.lern I/MyIntentService: -- onStartCommand() --08-12 13:38:26.601 30532-30532/com.hyhy.lern I/MyIntentService: -- onStartCommand() --08-12 13:38:26.601 30532-30532/com.hyhy.lern I/MyIntentService: -- onStartCommand() --08-12 13:38:26.601 30532-30655/com.hyhy.lern I/MyIntentService: do task108-12 13:38:26.601 30532-30655/com.hyhy.lern I/MyIntentService: do task208-12 13:38:26.601 30532-30655/com.hyhy.lern I/MyIntentService: do task108-12 13:38:26.617 30532-30532/com.hyhy.lern I/MyIntentService: -- onDestroy() -- https://developer.android.com/training/run-background-service/create-service.html onStartCommand()1. onStartCommandæ–¹å¼ä¸­ï¼Œè¿”å›žSTART_STICKY é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹onStartCommandéƒ½å¯ä»¥è¿”å›žå“ªäº›å€¼ï¼š è°ƒç”¨Context.startServiceæ–¹å¼å¯åŠ¨Serviceæ—¶ï¼Œå¦‚æžœAndroidé¢ä¸´å†…å­˜åŒ®ä¹ï¼Œå¯èƒ½ä¼šé”€æ¯å½“å‰è¿è¡Œçš„Serviceï¼Œå¾…å†…å­˜å……è¶³æ—¶å¯ä»¥é‡å»ºServiceã€‚è€ŒServiceè¢«Androidç³»ç»Ÿå¼ºåˆ¶é”€æ¯å¹¶å†æ¬¡é‡å»ºçš„è¡Œä¸ºä¾èµ–äºŽServiceçš„onStartCommand()æ–¹æ³•çš„è¿”å›žå€¼ã€‚ START_NOT_STICKY å¦‚æžœè¿”å›žSTART_NOT_STICKYï¼Œè¡¨ç¤ºå½“Serviceè¿è¡Œçš„è¿›ç¨‹è¢«Androidç³»ç»Ÿå¼ºåˆ¶æ€æŽ‰ä¹‹åŽï¼Œä¸ä¼šé‡æ–°åˆ›å»ºè¯¥Serviceã€‚å½“ç„¶å¦‚æžœåœ¨å…¶è¢«æ€æŽ‰ä¹‹åŽä¸€æ®µæ—¶é—´åˆè°ƒç”¨äº†startServiceï¼Œé‚£ä¹ˆè¯¥Serviceåˆå°†è¢«å®žä¾‹åŒ–ã€‚é‚£ä»€ä¹ˆæƒ…å¢ƒä¸‹è¿”å›žè¯¥å€¼æ¯”è¾ƒæ°å½“å‘¢ï¼Ÿ å¦‚æžœæˆ‘ä»¬æŸä¸ªServiceæ‰§è¡Œçš„å·¥ä½œè¢«ä¸­æ–­å‡ æ¬¡æ— å…³ç´§è¦æˆ–è€…å¯¹Androidå†…å­˜ç´§å¼ çš„æƒ…å†µä¸‹éœ€è¦è¢«æ€æŽ‰ä¸”ä¸ä¼šç«‹å³é‡æ–°åˆ›å»ºè¿™ç§è¡Œä¸ºä¹Ÿå¯æŽ¥å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿å¯å°† onStartCommandçš„è¿”å›žå€¼è®¾ç½®ä¸ºSTART_NOT_STICKYã€‚ ä¸¾ä¸ªä¾‹å­ï¼ŒæŸä¸ªServiceéœ€è¦å®šæ—¶ä»ŽæœåŠ¡å™¨èŽ·å–æœ€æ–°æ•°æ®ï¼šé€šè¿‡ä¸€ä¸ªå®šæ—¶å™¨æ¯éš”æŒ‡å®šçš„Nåˆ†é’Ÿè®©å®šæ—¶å™¨å¯åŠ¨ServiceåŽ»èŽ·å–æœåŠ¡ç«¯çš„æœ€æ–°æ•°æ®ã€‚å½“æ‰§è¡Œåˆ°Serviceçš„onStartCommandæ—¶ï¼Œåœ¨è¯¥æ–¹æ³•å†…å†è§„åˆ’ä¸€ä¸ªNåˆ†é’ŸåŽçš„å®šæ—¶å™¨ç”¨äºŽå†æ¬¡å¯åŠ¨è¯¥Serviceå¹¶å¼€è¾Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹åŽ»æ‰§è¡Œç½‘ç»œæ“ä½œã€‚å‡è®¾Serviceåœ¨ä»ŽæœåŠ¡å™¨èŽ·å–æœ€æ–°æ•°æ®çš„è¿‡ç¨‹ä¸­è¢«Androidç³»ç»Ÿå¼ºåˆ¶æ€æŽ‰ï¼ŒServiceä¸ä¼šå†é‡æ–°åˆ›å»ºï¼Œè¿™ä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºå†è¿‡Nåˆ†é’Ÿå®šæ—¶å™¨å°±ä¼šå†æ¬¡å¯åŠ¨è¯¥Serviceå¹¶é‡æ–°èŽ·å–æ•°æ® START_STICKY å¦‚æžœè¿”å›žSTART_STICKYï¼Œè¡¨ç¤ºServiceè¿è¡Œçš„è¿›ç¨‹è¢«Androidç³»ç»Ÿå¼ºåˆ¶æ€æŽ‰ä¹‹åŽï¼ŒAndroidç³»ç»Ÿä¼šå°†è¯¥Serviceä¾ç„¶è®¾ç½®ä¸ºstartedçŠ¶æ€ï¼ˆå³è¿è¡ŒçŠ¶æ€ï¼‰ï¼Œä½†æ˜¯ä¸å†ä¿å­˜onStartCommandæ–¹æ³•ä¼ å…¥çš„intentå¯¹è±¡ï¼Œç„¶åŽAndroidç³»ç»Ÿä¼šå°è¯•å†æ¬¡é‡æ–°åˆ›å»ºè¯¥Serviceï¼Œå¹¶æ‰§è¡ŒonStartCommandå›žè°ƒæ–¹æ³•ï¼Œä½†æ˜¯onStartCommandå›žè°ƒæ–¹æ³•çš„Intentå‚æ•°ä¸ºnullï¼Œä¹Ÿå°±æ˜¯onStartCommandæ–¹æ³•è™½ç„¶ä¼šæ‰§è¡Œä½†æ˜¯èŽ·å–ä¸åˆ°intentä¿¡æ¯ã€‚å¦‚æžœä½ çš„Serviceå¯ä»¥åœ¨ä»»æ„æ—¶åˆ»è¿è¡Œæˆ–ç»“æŸéƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸”ä¸éœ€è¦intentä¿¡æ¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨onStartCommandæ–¹æ³•ä¸­è¿”å›žSTART_STICKYï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æ¥æ’­æ”¾èƒŒæ™¯éŸ³ä¹åŠŸèƒ½çš„Serviceå°±é€‚åˆè¿”å›žè¯¥å€¼ã€‚ START_REDELIVER_INTENT å¦‚æžœè¿”å›žSTART_REDELIVER_INTENTï¼Œè¡¨ç¤ºServiceè¿è¡Œçš„è¿›ç¨‹è¢«Androidç³»ç»Ÿå¼ºåˆ¶æ€æŽ‰ä¹‹åŽï¼Œä¸Žè¿”å›žSTART_STICKYçš„æƒ…å†µç±»ä¼¼ï¼ŒAndroidç³»ç»Ÿä¼šå°†å†æ¬¡é‡æ–°åˆ›å»ºè¯¥Serviceï¼Œå¹¶æ‰§è¡ŒonStartCommandå›žè°ƒæ–¹æ³•ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼ŒAndroidç³»ç»Ÿä¼šå†æ¬¡å°†Serviceåœ¨è¢«æ€æŽ‰ä¹‹å‰æœ€åŽä¸€æ¬¡ä¼ å…¥onStartCommandæ–¹æ³•ä¸­çš„Intentå†æ¬¡ä¿ç•™ä¸‹æ¥å¹¶å†æ¬¡ä¼ å…¥åˆ°é‡æ–°åˆ›å»ºåŽçš„Serviceçš„onStartCommandæ–¹æ³•ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è¯»å–åˆ°intentå‚æ•°ã€‚åªè¦è¿”å›žSTART_REDELIVER_INTENTï¼Œé‚£ä¹ˆonStartCommandé‡çš„intentä¸€å®šä¸æ˜¯nullã€‚å¦‚æžœæˆ‘ä»¬çš„Serviceéœ€è¦ä¾èµ–å…·ä½“çš„Intentæ‰èƒ½è¿è¡Œï¼ˆéœ€è¦ä»ŽIntentä¸­è¯»å–ç›¸å…³æ•°æ®ä¿¡æ¯ç­‰ï¼‰ï¼Œå¹¶ä¸”åœ¨å¼ºåˆ¶é”€æ¯åŽæœ‰å¿…è¦é‡æ–°åˆ›å»ºè¿è¡Œï¼Œé‚£ä¹ˆè¿™æ ·çš„Serviceå°±é€‚åˆè¿”å›žSTART_REDELIVER_INTENTã€‚ https://juejin.im/post/5b1747e5e51d45069a39ef45 https://developer.android.com/guide/components/bound-services#kotlin bindService callback 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950class BindingActivity : Activity() &#123; private lateinit var mService: LocalService private var mBound: Boolean = false /** Defines callbacks for service binding, passed to bindService() */ private val connection = object : ServiceConnection &#123; override fun onServiceConnected(className: ComponentName, service: IBinder) &#123; // We&#x27;ve bound to LocalService, cast the IBinder and get LocalService instance val binder = service as LocalService.LocalBinder mService = binder.getService() mBound = true &#125; override fun onServiceDisconnected(arg0: ComponentName) &#123; mBound = false &#125; &#125; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.main) &#125; override fun onStart() &#123; super.onStart() // Bind to LocalService Intent(this, LocalService::class.java).also &#123; intent -&gt; bindService(intent, connection, Context.BIND_AUTO_CREATE) &#125; &#125; override fun onStop() &#123; super.onStop() unbindService(connection) mBound = false &#125; /** Called when a button is clicked (the button in the layout file attaches to * this method with the android:onClick attribute) */ fun onButtonClick(v: View) &#123; if (mBound) &#123; // Call a method from the LocalService. // However, if this call were something that might hang, then this request should // occur in a separate thread to avoid slowing down the activity performance. val num: Int = mService.randomNumber Toast.makeText(this, &quot;number: $num&quot;, Toast.LENGTH_SHORT).show() &#125; &#125;&#125; get Service object in this place 12val binder = service as LocalService.LocalBindermService = binder.getService() Using a Messenger If you need your service to communicate with remote processes, then you can use a Messenger to provide the interface for your service. stopself()â€‹ ç›®å‰æµ‹è¯•åªæœ‰åœ¨onStartCommand()æœ‰æ•ˆï¼Œå¤šæ¬¡ç‚¹å‡»startService(intent),startIdæŒç»­é€’å¢ž. onRebind()ä»€ä¹ˆæƒ…å†µä¸‹æ‰§è¡Œ éªŒè¯æ–¹æ³•: startService(intent) å¯åŠ¨Service - bindService() ç»‘å®šService - unBindService()è§£ç»‘- bindService() ç»§ç»­ç»‘å®š å°±ä¼šæ‰§è¡ŒonRebind() å¤šä¸ªacitivtyä¸Žserviceé€šä¿¡https://www.jianshu.com/p/9885acf65405 https://blog.csdn.net/pihailailou/article/details/78588496 foreground servicehttps://developer.android.com/develop/background-work/services/fgs A foreground service performs some operation that is noticeable to the user. For example, an audio app would use a foreground service to play an audio track. Foreground services must display a Notification. Foreground services continue running even when the user isnâ€™t interacting with the app. When you use a foreground service, you must display a notification so that users are actively aware that the service is running. This notification cannot be dismissed unless the service is either stopped or removed from the foreground. https://developer.android.com/develop/background-work/services#Types-of-services https://www.jianshu.com/p/5505390503fa background serviceA background service performs an operation that isnâ€™t directly noticed by the user. For example, if an app used a service to compact its storage, that would usually be a background service. Note: If your app targets API level 26 or higher, the system imposes restrictions on running background services when the app itself isnâ€™t in the foreground. In most situations, for example, you shouldnâ€™t access location information from the background. Instead, schedule tasks using WorkManager. codelab https://github.com/android/codelab-android-workmanager/blob/master/app/src/main/java/com/example/background/BlurActivity.kt https://developer.android.com/codelabs/basic-android-kotlin-compose-workmanager#12 JobIntentServiceThe Android framework also provides the IntentService subclass of Service that uses a worker thread to handle all of the start requests, one at a time. Using this class is not recommended for new apps as it will not work well starting with Android 8 Oreo, due to the introduction of Background execution limits. Moreover, itâ€™s deprecated starting with Android 11. You can use JobIntentService as a replacement for IntentService that is compatible with newer versions of Android. https://developer.android.com/develop/background-work/services#Types-of-services In most cases, apps can work around these limitations by using JobScheduler jobs. This approach lets an app arrange to perform work when the app isnâ€™t actively running, but still gives the system the leeway to schedule these jobs in a way that doesnâ€™t affect the user experience https://developer.android.com/develop/background-work/background-tasks WorkMangerUse WorkManager for reliable work,WorkManager handles three types of persistent work: Immediate: Tasks that must begin immediately and complete soon. May be expedited. Long Running: Tasks which might run for longer, potentially longer than 10 minutes. Deferrable: Scheduled tasks that start at a later time and can run periodically. Figure 1 outlines how the different types of persistent work relate to one another. https://developer.android.com/topic/libraries/architecture/workmanager https://medium.com/androiddevelopers/introducing-workmanager-2083bcfc4712 https://android-developers.googleblog.com/2018/10/modern-background-execution-in-android.html OneTimeWork123456789101112// Create and enqueue the workerval workRequest = OneTimeWorkRequestBuilder&lt;LogWorker&gt;().build()workManager.enqueue(workRequest)class LogWorker(context: Context, workerParams: WorkerParameters) : Worker(context, workerParams) &#123; override fun doWork(): Result &#123; Log.d(&quot;LogWorker&quot;, &quot;Background task executed!&quot;) return Result.success() &#125;&#125; https://github.com/android/codelab-android-workmanager https://developer.android.com/codelabs/basic-android-kotlin-compose-workmanager#12 Schedule expedited workStarting in WorkManager 2.7, your app can call setExpedited() to declare that a WorkRequest should run as quickly as possible using an expedited job. 123456private fun scheduleExpeditedWork() &#123; val workRequest: WorkRequest = OneTimeWorkRequestBuilder&lt;LogWorker&gt;() .setExpedited(OutOfQuotaPolicy.RUN_AS_NON_EXPEDITED_WORK_REQUEST) .build() WorkManager.getInstance(this).enqueue(workRequest)&#125; PeriodicWorkPeriodic work has a minimum interval of 15 minutes. https://developer.android.com/reference/androidx/work/PeriodicWorkRequest 1234567private fun schedulePeriodicWork() &#123; val periodicWorkRequest = PeriodicWorkRequestBuilder&lt;LogWorker&gt;(15, TimeUnit.MINUTES) // every 15 minutes .build() // Enqueue the work request WorkManager.getInstance(this).enqueue(periodicWorkRequest)&#125; &#x2F;&#x2F; The code is not verified by the log. migrateMigrating from Firebase JobDispatcher to WorkManager https://developer.android.com/develop/background-work/background-tasks/persistent/migrate-from-legacy/firebase https://medium.com/androiddevelopers/introducing-workmanager-2083bcfc4712 JobIntentServiceBehavior changes: Apps targeting Android 15 or higher &nbsp;|&nbsp; Android Developers 1234567adb shell am compat enable FGS_INTRODUCE_TIME_LIMITS com.example.myapplicationadb shell device_config put activity_manager data_sync_fgs_timeout_duration 60000adb logcat | grep -E &quot;(DataSync|onTimeout|RemoteServiceException)&quot;","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"Accessibility","slug":"Accessibility","date":"2017-08-09T13:27:05.000Z","updated":"2022-05-06T11:24:51.146Z","comments":true,"path":"2017/08/09/Accessibility/","link":"","permalink":"https://noteforme.github.io/2017/08/09/Accessibility/","excerpt":"","text":"å…ˆä¸Šå®˜ç½‘åœ°å€ https://developer.android.com/guide/topics/ui/accessibility/services.htmlä¸‹é¢çš„æ˜¯ä¾‹å­ https://developer.android.com/training/accessibility/index.html ç„¶åŽæ˜¯codelab çœ‹çœ‹ https://codelabs.developers.google.com/codelabs/developing-android-a11y-service/index.html?index=..%2F..%2Findex#0 è¿™æ˜¯codelab githubä¸Šçš„åœ°å€ https://github.com/googlecodelabs/android-accessibilityä¸€ã€ç®€å•å®žçŽ°1ã€åˆ›å»ºä¸€ä¸ª MyAccessibilityServiceç±» ç»§æ‰¿ AccessibilityService â€¦ public class MyAccessibilityService extends AccessibilityService &#123; @Override public void onAccessibilityEvent(AccessibilityEvent event) &#123; &#125; @Override public void onInterrupt() &#123; &#125; }â€¦ 2ã€åˆ›å»ºä¸€ä¸ªvaluesä¸‹åˆ›å»ºXMLæ–‡ä»¶å¤¹ 3ã€ å®žçŽ° onServiceConnected() @Override public void onServiceConnected() &#123; // Set the type of events that this service wants to listen to. Others // won&#39;t be passed to this service. info.eventTypes = AccessibilityEvent.TYPE_VIEW_CLICKED | AccessibilityEvent.TYPE_VIEW_FOCUSED; // If you only want this service to work with specific applications, set their // package names here. Otherwise, when the service is activated, it will listen // to events from all applications. info.packageNames = new String[] &#123;&quot;com.example.android.myFirstApp&quot;, &quot;com.example.android.mySecondApp&quot;&#125;; // Set the type of feedback your service will provide. info.feedbackType = AccessibilityServiceInfo.FEEDBACK_SPOKEN; // Default services are invoked only if no package-specific ones are present // for the type of AccessibilityEvent generated. This service *is* // application-specific, so the flag isn&#39;t necessary. If this was a // general-purpose service, it would be worth considering setting the // DEFAULT flag. // info.flags = AccessibilityServiceInfo.DEFAULT; info.notificationTimeout = 100; this.setServiceInfo(info); Log.i(&quot;test&quot;,&quot;æµ‹è¯•&quot;); &#125; 4ã€å®žçŽ° onAccessibilityEventæ–¹æ³• @Override public void onAccessibilityEvent(AccessibilityEvent event) &#123; final int eventType = event.getEventType(); String eventText = null; switch(eventType) &#123; case AccessibilityEvent.TYPE_VIEW_CLICKED: eventText = &quot;Focused: &quot;; break; case AccessibilityEvent.TYPE_VIEW_FOCUSED: eventText = &quot;Focused: &quot;; break; &#125; eventText = eventText + event.getContentDescription(); // Do something nifty with this text, like speak the composed string // back to the user. speakToUser(eventText); &#125; ... ç„¶åŽå°±å¯ä»¥å¼€å¯è¾…åŠ©åŠŸèƒ½ï¼Œçœ‹ä¸‹log","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"OKHTTP","slug":"OKHTTP","date":"2017-08-07T02:04:29.000Z","updated":"2024-09-15T10:08:39.154Z","comments":true,"path":"2017/08/07/OKHTTP/","link":"","permalink":"https://noteforme.github.io/2017/08/07/OKHTTP/","excerpt":"","text":"Okhttpä¼˜åŠ¿https://square.github.io/okhttp/ OkHttp is an HTTP client thatâ€™s efficient by default: HTTP&#x2F;2 support allows all requests to the same host to share a socket. Connection pooling reduces request latency (if HTTP&#x2F;2 isnâ€™t available). Transparent GZIP shrinks download sizes. Response caching avoids the network completely for repeat requests. okhttpçš„è¯·æ±‚åŽŸç† OkHttpçš„å†…éƒ¨å®žçŽ°é€šè¿‡ä¸€ä¸ªè´£ä»»é“¾æ¨¡å¼å®Œæˆï¼Œå°†ç½‘ç»œè¯·æ±‚çš„å„ä¸ªé˜¶æ®µå°è£…åˆ°å„ä¸ªé“¾æ¡ä¸­ï¼Œå®žçŽ°äº†å„å±‚çš„è§£è€¦ã€‚ OKHttpè¯·æ±‚æ•´ä½“æµç¨‹ä»‹ç»æ•´ä¸ªç½‘ç»œè¯·æ±‚è¿‡ç¨‹å¤§è‡´å¦‚ä¸Šæ‰€ç¤º é€šè¿‡å»ºé€ è€…æ¨¡å¼æž„å»º OKHttpClient ä¸Ž Request OKHttpClient é€šè¿‡ newCall å‘èµ·ä¸€ä¸ªæ–°çš„è¯·æ±‚ é€šè¿‡åˆ†å‘å™¨ç»´æŠ¤è¯·æ±‚é˜Ÿåˆ—ä¸Žçº¿ç¨‹æ± ï¼Œå®Œæˆè¯·æ±‚è°ƒé… é€šè¿‡äº”å¤§é»˜è®¤æ‹¦æˆªå™¨å®Œæˆè¯·æ±‚é‡è¯•ï¼Œç¼“å­˜å¤„ç†ï¼Œå»ºç«‹è¿žæŽ¥ç­‰ä¸€ç³»åˆ—æ“ä½œå¾—åˆ°ç½‘ç»œè¯·æ±‚ç»“æžœ OKHttpåˆ†å‘å™¨æ˜¯æ€Žæ ·å·¥ä½œçš„åˆ†å‘å™¨çš„ä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤è¯·æ±‚é˜Ÿåˆ—ä¸Žçº¿ç¨‹æ± ,æ¯”å¦‚æˆ‘ä»¬æœ‰100ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œè‚¯å®šä¸èƒ½æŠŠå®ƒä»¬åŒæ—¶è¯·æ±‚ï¼Œè€Œæ˜¯åº”è¯¥æŠŠå®ƒä»¬æŽ’é˜Ÿåˆ†ä¸ªç±»ï¼Œåˆ†ä¸ºæ­£åœ¨è¯·æ±‚ä¸­çš„åˆ—è¡¨å’Œæ­£åœ¨ç­‰å¾…çš„åˆ—è¡¨ï¼Œ ç­‰è¯·æ±‚å®ŒæˆåŽï¼Œå³å¯ä»Žç­‰å¾…ä¸­çš„åˆ—è¡¨ä¸­å–å‡ºç­‰å¾…çš„è¯·æ±‚ï¼Œä»Žè€Œå®Œæˆæ‰€æœ‰çš„è¯·æ±‚ è€Œè¿™é‡ŒåŒæ­¥è¯·æ±‚å„å¼‚æ­¥è¯·æ±‚åˆç•¥æœ‰ä¸åŒ åŒæ­¥è¯·æ±‚123synchronized void executed(RealCall call) &#123; runningSyncCalls.add(call); &#125; å› ä¸ºåŒæ­¥è¯·æ±‚ä¸éœ€è¦çº¿ç¨‹æ± ï¼Œä¹Ÿä¸å­˜åœ¨ä»»ä½•é™åˆ¶ã€‚æ‰€ä»¥åˆ†å‘å™¨ä»…åšä¸€ä¸‹è®°å½•ã€‚åŽç»­æŒ‰ç…§åŠ å…¥é˜Ÿåˆ—çš„é¡ºåºåŒæ­¥è¯·æ±‚å³å¯ å¼‚æ­¥è¯·æ±‚æœ€æ–°çš„masteråˆ†æ”¯ 12345678910111213141516171819private fun promoteAndExecute(): Boolean &#123; this.assertThreadDoesntHoldLock() val executableCalls = mutableListOf&lt;AsyncCall&gt;() val isRunning: Boolean synchronized(this) &#123; val i = readyAsyncCalls.iterator() // å–å‡ºå¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ ¹æ®æ¡ä»¶æ·»åŠ åˆ°runningAsyncCalls while (i.hasNext()) &#123; val asyncCall = i.next() println(&quot;runningAsyncCalls $&#123;runningAsyncCalls.size&#125;&quot;) if (runningAsyncCalls.size &gt;= this.maxRequests) break // Max capacity. if (asyncCall.callsPerHost.get() &gt;= this.maxRequestsPerHost) continue // Host max capacity. i.remove() asyncCall.callsPerHost.incrementAndGet() executableCalls.add(asyncCall) runningAsyncCalls.add(asyncCall) &#125; isRunning = runningCallsCount() &gt; 0 &#125; æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šå…ˆæ·»åŠ åˆ°readyAsyncCallsï¼Œå½“æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æœªè¶…è¿‡æœ€å¤§é™åˆ¶64ï¼Œå¹¶ä¸”åŒä¸€ Host çš„è¯·æ±‚ä¸è¶…è¿‡5ä¸ªï¼Œåˆ™ä¼šæ·»åŠ åˆ°æ­£åœ¨æ‰§è¡Œé˜Ÿåˆ—ï¼ŒåŒæ—¶æäº¤ç»™çº¿ç¨‹æ± ã€‚æ¯ä¸ªä»»åŠ¡å®ŒæˆåŽï¼Œéƒ½ä¼šè°ƒç”¨åˆ†å‘å™¨çš„ finished æ–¹æ³•,è¿™é‡Œé¢ä¼šå–å‡ºç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç»§ç»­æ‰§è¡Œ. &#x2F;&#x2F; å¯ä»¥å°è¯•ä¿®æ”¹ maxRequestsPerHost &#x3D;12,maxRequests &#x3D; 10 123for (int i =0 ; i &lt; 20;i++)&#123; client.newCall(request).enqueue(callback);&#125; æ ¹æ®è¯·æ±‚runningAsyncCalls.size æ‰“å°ç»“æžœã€‚å¯ä»¥çœ‹åˆ°è¿è¡ŒçŠ¶æ€ okhttpçº¿ç¨‹ä½¿ç”¨æ–¹å¼ æ ¹æ®çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹ï¼š ä¸€å¼€å§‹çœ‹äº†ç½‘ä¸Šè§†é¢‘ï¼Œå°±è¯´Okhttpæ˜¯è‡ªé©±åŠ¨å¾ªçŽ¯è°ƒç”¨ï¼Œç›¸å¯¹äºŽAsyncTaskçš„ä¼˜åŠ¿å°±æ˜¯ å¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯è¿™ä¸¤æ¡ä¸å°±çŸ›ç›¾äº†å—ï¼Œæ—¢ç„¶çŽ¯å½¢é“¾å¼è°ƒç”¨ï¼Œæ€Žä¹ˆèƒ½å¹¶å‘å‘¢ã€‚å°±ä»Žæºç ä¸­æ‰¾ç­”æ¡ˆã€‚ çœ‹äº†biç«™çš„è§†é¢‘ï¼Œè¶…è¿‡5ä¸ªåœ¨é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼Œåº”è¯¥æ˜¯å®Œæˆä¸€ä¸ªç½‘ç»œè¯·æ±‚,ç»§ç»­ä»Žé˜Ÿåˆ—ä¸­å–å‡ºï¼Œä»»åŠ¡ç»§ç»­æ‰§è¡Œã€‚ Dispatcher æœ€å¤§è¯·æ±‚æ•°é‡ runningAsyncCalls è¿è¡Œæ—¶çš„æœ€å¤§è¯·æ±‚æ•°é‡64,åªæœ‰å¤šä¸ªä¸åŒçš„hostè¯·æ±‚æ‰èƒ½å¯èƒ½è®©èµ°åˆ°ä¸‹é¢ä»£ç .å› ä¸ºè¿˜æœ‰ if (asyncCall.callsPerHost.get() &gt;&#x3D; this.maxRequestsPerHost)è¿™ä¸ªæ¡ä»¶é™åˆ¶. 1234if (runningAsyncCalls.size &gt;= this.maxRequests)&#123; println(&quot;promoteAndExecute &gt;= maxRequests&quot; ) break &#125; Okhttp å¼‚æ­¥è¯·æ±‚ç»´æŠ¤çš„ä¸¤ä¸ªé˜Ÿåˆ— Dispatcher.java 1234567891011121314151617181920212223242526272829303132333435363738 /** Ready async calls in the order they&#x27;ll be run. */ private val readyAsyncCalls = ArrayDeque&lt;AsyncCall&gt;() /** Running asynchronous calls. Includes canceled calls that haven&#x27;t finished yet. */ private val runningAsyncCalls = ArrayDeque&lt;AsyncCall&gt;()private int maxRequests = 64;private int maxRequestsPerHost = 5;synchronized void enqueue(AsyncCall call) &#123; if (runningAsyncCalls.size() &lt; maxRequests &amp;&amp; runningCallsForHost(call) &lt; maxRequestsPerHost) &#123; runningAsyncCalls.add(call); executorService().execute(call); &#125; else &#123; readyAsyncCalls.add(call); &#125;&#125;å¯ä»¥çœ‹åˆ°æäº¤ä»»åŠ¡ &gt;5æ—¶ï¼Œæ‰ä¼šè¢«æ·»åŠ åˆ°readyAsyncCallsé˜Ÿåˆ—ä¸­ã€‚&lt;5çš„ä»»åŠ¡ç›´æŽ¥æäº¤ã€‚ private void promoteCalls() &#123; if (runningAsyncCalls.size() &gt;= maxRequests) return; // Already running max capacity. if (readyAsyncCalls.isEmpty()) return; // No ready calls to promote. for (Iterator&lt;AsyncCall&gt; i = readyAsyncCalls.iterator(); i.hasNext(); ) &#123; AsyncCall call = i.next(); if (runningCallsForHost(call) &lt; maxRequestsPerHost) &#123; i.remove(); runningAsyncCalls.add(call); Log.i(&quot;Dispatcher&quot;, &quot;promoteCalls: å‡†å¤‡é˜Ÿåˆ— &quot;+call.request().tag+&quot; æ‰§è¡Œ&quot;); executorService().execute(call); &#125; if (runningAsyncCalls.size() &gt;= maxRequests) return; // Reached max capacity. &#125; &#125;readyAsyncCallsä¸ä¸ºç©ºï¼Œç„¶åŽå–å‡ºä¸€æ¡ï¼Œå†æ‰§è¡Œï¼Œå¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæœ‰5æ¡çŽ¯å½¢ä»»åŠ¡é“¾ã€‚ if (asyncCall.callsPerHost.get() &gt;&#x3D; this.maxRequestsPerHost) è¿™ä¸ªæ¡ä»¶æ—¶å¦‚ä½•åˆ¤æ–­çš„å‘¢? ä¸»è¦æ˜¯ä¸‹é¢çš„æ–¹æ³•,é»˜è®¤forWebSocket&#x3D;&#x3D;true,èµ°åˆ°æ¡ä»¶é‡Œ.å¦‚æžœAsyncCallå·²ç»å­˜åœ¨é˜Ÿåˆ—ä¸­,é‚£ä¹ˆå°±ç›´æŽ¥è¿”å›žï¼ŒæŠŠcallsPerHostæ•°å€¼å åŠ .ä»Žè€Œå®žçŽ°ï¼Œä¸Šé¢çš„æ¡ä»¶åˆ¤æ–­. 12345678910 // Mutate the AsyncCall so that it shares the AtomicInteger of an existing running call to // the same host. if (!call.call.forWebSocket) &#123; val existingCall = findExistingCallWithHost(call.host) if (existingCall != null) call.reuseCallsPerHostFrom(existingCall) &#125;fun reuseCallsPerHostFrom(other: AsyncCall) &#123; this.callsPerHost = other.callsPerHost&#125; é—®é¢˜ OkHttpThreadPool.java 123456789101112131415161718ThreadPoolExecutor executor = new ThreadPoolExecutor( 0, Integer.MAX_VALUE, 60, TimeUnit.SECONDS, new LinkedBlockingDeque&lt;&gt;());executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread()); while (true) &#123; &#125;&#125;);executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread());&#125;);executor.execute(() -&gt; &#123; System.out.println(&quot;ä»»åŠ¡1&quot;); System.out.println(Thread.currentThread());&#125;); è¿è¡Œç»“æžœ: ä»»åŠ¡1 Thread[pool-1-thread-1,5,main] å¦‚æžœ new LinkedBlockingDeque&lt;&gt;(1)èƒ½æ­£å¸¸æ‰§è¡Œï¼Œå› ä¸ºLinkedBlockingDequeåŠ å…¥ ä»»åŠ¡1 å°±æ»¡äº†ï¼ŒåŽé¢çš„ä»»åŠ¡åˆ›å»ºéžæ ¸å¿ƒçº¿ç¨‹ ä½†æ˜¯æœ‰ç‚¹ç–‘æƒ‘ï¼Œæˆ‘è¿™é‡Œæ ¸å¿ƒçº¿ç¨‹æ˜¯0ï¼Œä»»åŠ¡éƒ½åŠ å…¥åˆ°LinkedBlockingDeque, æŒ‰ç…§çº¿ç¨‹æ± æµç¨‹ï¼Œéžæ ¸å¿ƒå°±ä¸åº”è¯¥åˆ›å»ºå‘€ï¼Ÿæ€Žä¹ˆä»»åŠ¡1å°±æ‰§è¡Œäº†å‘¢ https://www.bilibili.com/video/BV15y4y1B7Rw?p=5https://mp.weixin.qq.com/s/BHDrSgwUVXkzvswK1khidQhttps://github.com/Snailclimb/programmer-advancementhttps://juejin.im/post/6855586076132655118https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485441&amp;idx=1&amp;sn=303a25ab02fa9f14a319923e6b0d9759&amp;chksm=cea247caf9d5cedc3a5e1d31f26c08d8ae4c11c349fbdc91ac1d90d8b35807517accb5f5d527&amp;token=2128752750&amp;lang=zh_CN#rd OkHttpé‡Œé¢è®¾è®¡æ¨¡å¼ï¼Ÿè´£ä»»é“¾æ¨¡å¼OKHttp çš„æ ¸å¿ƒå°±æ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Œé€šè¿‡5ä¸ªé»˜è®¤æ‹¦æˆªå™¨æž„æˆçš„è´£ä»»é“¾å®Œæˆè¯·æ±‚çš„é…ç½® . æ‹¦æˆªå™¨ 12345678910111213141516+----------------------------------+| OkHttpInterceptor |+----------------------------------+| - configuration: Configuration || - enabled: boolean |+----------------------------------+| + intercept(chain: Chain): Response || + enable(): void || + disable(): void |+----------------------------------+| &lt;&lt;interface&gt;&gt; || Chain |+----------------------------------+| + request(): Request || + proceed(request: Request): Response |+----------------------------------+ OkHttpçš„æ‹¦æˆªå™¨ï¼šinterceptor 12345678910111213141516171819internal fun getResponseWithInterceptorChain(): Response &#123; // Build a full stack of interceptors. val interceptors = mutableListOf&lt;Interceptor&gt;() interceptors += client.interceptors interceptors += RetryAndFollowUpInterceptor(client) interceptors += BridgeInterceptor(client.cookieJar) interceptors += CacheInterceptor(client.cache) interceptors += ConnectInterceptor interceptors += CallServerInterceptor(forWebSocket) val chain = RealInterceptorChain( call = this, interceptors = interceptors, index = 0, request = originalRequest, ) val response = chain.proceed(originalRequest) return response &#125; RetryAndFollowUpInterceptorï¼šå¤±è´¥å’Œé‡å®šå‘æ‹¦æˆªå™¨ï¼› BridgeInterceptorï¼šè´Ÿè´£å°†httpåè®®å¿…å¤‡çš„è¯·æ±‚å¤´åŠ å…¥å…¶ä¸­(host),å¹¶æ·»åŠ ä¸€äº›é»˜è®¤çš„è¡Œä¸º(gzip),èŽ·å¾—ç»“æžœåŽï¼Œè°ƒç”¨cookieæŽ¥å£å¹¶è§£æžGZIPæ•°æ®ã€‚ CacheInterceptorï¼šç¼“å­˜å¤„ç†ç›¸å…³çš„æ‹¦æˆªå™¨ï¼› ConnectInterceptorï¼š è´Ÿè´£æ‰¾åˆ°æˆ–è€…æ–°å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œå¹¶èŽ·å–å¯¹åº”çš„socketæµï¼›åœ¨èŽ·å¾—ç»“æžœåŽä¸è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚ CallServerInterceptorï¼šè¿›è¡ŒçœŸæ­£çš„ä¸ŽæœåŠ¡å™¨çš„é€šä¿¡ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚å’Œè¯»å“åº”çš„æ‹¦æˆªå™¨ï¼› æœ€ç»ˆç½‘ç»œè¿”å›žçš„æ•°æ®è¯·æ±‚ 1234567fun openResponseBody(response: Response): ResponseBody &#123; try &#123; val contentType = response.header(&quot;Content-Type&quot;) val contentLength = codec.reportedContentLength(response) val rawSource = codec.openResponseBodySource(response) val source = ResponseBodySource(rawSource, contentLength) return RealResponseBody(contentType, contentLength, source.buffer()) æž„é€ è€…æ¨¡å¼ : OkHttpClient ,Request,CacheControl å¤–è§‚æ¨¡å¼ : OkHttpä½¿ç”¨äº†å¤–è§‚æ¨¡å¼,å°†æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚æ€§ç»™éšè—èµ·æ¥ï¼Œå°†å­ç³»ç»ŸæŽ¥å£é€šè¿‡ä¸€ä¸ªå®¢æˆ·ç«¯ OkHttpClient ç»Ÿä¸€æš´éœ²å‡ºæ¥ å·¥åŽ‚æ¨¡å¼ : ï¼ˆåœ¨ Call æŽ¥å£ä¸­ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨å·¥åŽ‚ Factory æŽ¥å£ï¼‰,åªæœ‰ä¸€ä¸ªå®žçŽ°RealCallï¼Œ è€Œä¸”è¿™ä¸ªRealCallåœ¨okhttp ä»£ç ä¸­æ·±åº¦è€¦åˆï¼Œæ„Ÿè§‰è¿™ä¸ªå·¥åŽ‚æ²¡ä»€ä¹ˆç”¨ã€‚ äº«å…ƒæ¨¡å¼ : Dispatcher çš„çº¿ç¨‹æ± ä¸­ï¼Œä¸é™é‡çš„çº¿ç¨‹æ± å®žçŽ°äº†å¯¹è±¡å¤ç”¨,è¿™ä¸ªåªæ˜¯çº¿ç¨‹æ± çš„ç‰¹æ€§,çº¿ç¨‹æ± å¯¹çº¿ç¨‹çš„æ“ä½œï¼Œæ²¡æœ‰ä»€ä¹ˆä»£ç çš„é—®é¢˜. ç­–ç•¥æ¨¡å¼ : CacheInterceptor ,åœ¨å“åº”æ•°æ®çš„é€‰æ‹©ä¸­ä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼Œé€‰æ‹©ç¼“å­˜æ•°æ®è¿˜æ˜¯é€‰æ‹©ç½‘ç»œè®¿é—®ã€‚ https://www.cnblogs.com/jimuzz/p/13935677.htmlhttps://www.codetd.com/article/4354895https://www.jianshu.com/p/d85e556b8da6 Okhttp Cachehttps://web.dev/articles/http-cache The app requests an API for the first time. åœ¨å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œæ­¤æ—¶ç¼“å­˜æ•°æ®åº“ä¸­æ²¡æœ‰å¯¹åº”çš„ç¼“å­˜æ•°æ®ï¼Œéœ€è¦è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›žåŽï¼Œå°†æ•°æ®å­˜å‚¨è‡³ç¼“å­˜æ•°æ®åº“ä¸­ï¼š ç¼“å­˜è§„åˆ™ è¿™å¼ å›¾æè¿°äº†æ•´ä¸ªç¼“å­˜ç­–ç•¥ï¼Œå…¶ä¸­æœ‰ç¼“å­˜ æ¨¡å—ï¼Œä»£è¡¨äº† å¼ºåˆ¶ç¼“å­˜æ¨¡å—. ç¼“å­˜åº”ç”¨å‡è®¾ç¼“å­˜æ•°æ®åº“å­˜åœ¨ç¼“å­˜æ•°æ®ï¼Œä»…åŸºäºŽå¼ºåˆ¶ç¼“å­˜ï¼Œè¯·æ±‚æ•°æ®çš„æµç¨‹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334val client: OkHttpClient = OkHttpClient.Builder() .cache( Cache( directory = context.cacheDir, maxSize = 10L * 1024L * 1024L // 10 MiB ) ) .build() val request = Request.Builder() .url(&quot;https://publicobject.com/helloworld.txt&quot;) .build() val response1Body = client.newCall(request).execute().use &#123; if (!it.isSuccessful) throw IOException(&quot;Unexpected code $it&quot;) println(&quot;Response 1 response: $it&quot;) println(&quot;Response 1 cache response: $&#123;it.cacheResponse&#125;&quot;) println(&quot;Response 1 network response: $&#123;it.networkResponse&#125;&quot;) return@use it.body?.string() &#125; println(&quot;Response 1 response: $response1Body&quot;) val response2Body = client.newCall(request).execute().use &#123; if (!it.isSuccessful) throw IOException(&quot;Unexpected code $it&quot;) println(&quot;Response 2 response: $it&quot;) println(&quot;Response 2 cache response: $&#123;it.cacheResponse&#125;&quot;) println(&quot;Response 2 network response: $&#123;it.networkResponse&#125;&quot;) return@use it.body?.string() &#125; println(&quot;Response 2 response: $response2Body&quot;) println(&quot;Response 2 equals Response 1? &quot; + (response1Body == response2Body)) Response 1 cache response: null Response 1 network response: Response{protocol&#x3D;http&#x2F;1.1, code&#x3D;200, message&#x3D;OK, url&#x3D;https://publicobject.com/helloworld.txt} Response 2 cache response: Response{protocol&#x3D;http&#x2F;1.1, code&#x3D;200, message&#x3D;OK, url&#x3D;https://publicobject.com/helloworld.txt} Response 2 network response: null å¼ºåˆ¶ç¼“å­˜å‡è®¾ç¼“å­˜æ•°æ®åº“å­˜åœ¨ç¼“å­˜æ•°æ®ï¼Œä»…åŸºäºŽå¼ºåˆ¶ç¼“å­˜ï¼Œè¯·æ±‚æ•°æ®çš„æµç¨‹å¦‚ä¸‹ï¼š flowchart LR A[Start] --> B{private or public ?} B -- Yes --> C[max-age or Expires] B -- No ----> E[End] C -- No ----> D[no-cache ?] å¼ºåˆ¶ç¼“å­˜ï¼Œç±»ä¼¼è¿™ç§å›¾ç¤ºã€‚ å¯ä»¥çœ‹å‡ºï¼Œå¼ºåˆ¶ç¼“å­˜å¦‚æžœç”Ÿæ•ˆï¼Œå°±ä¸éœ€è¦å†å’ŒæœåŠ¡å™¨å‘ç”Ÿäº¤äº’ã€‚ å¼ºåˆ¶ç¼“å­˜çš„å®žçŽ°ä¾é äºŽExpireså’ŒCache-Controlè¿™ä¸¤ä¸ªHeaderã€‚ Expires&#x2F;Cache-Control Expires æ˜¯ HTTP&#x2F;1.0 æ‰€æä¾›çš„å¯¹ç¼“å­˜çš„æ”¯æŒï¼Œé€šè¿‡è¿™ä¸ª Header ï¼ŒæœåŠ¡ç«¯å¯ä»¥å‘Šè¯‰å®¢æˆ·ç«¯ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ï¼Œè¡¨ç¤ºåœ¨è¿‡æœŸæ—¶é—´å†…è¯¥èµ„æºéƒ½ä¸ä¼šè¢«æ›´æ”¹ï¼Œå¯ä»¥ä¸ç”¨å†å‘è‡ªå·±è¯·æ±‚äº†ã€‚ ä¾‹å¦‚ï¼šExpires: Mon, 22 Nov 2021 16:21:00 GMT å°±æ ‡æ˜Žäº†ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ã€‚ å¯ä»¥å‘çŽ°ï¼Œå®ƒæ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸ªå…·ä½“æ—¶é—´ï¼Œæµè§ˆå™¨ä¹‹ç±»çš„å®¢æˆ·ç«¯åº”ç”¨ä¼šæ ¹æ®æœ¬åœ°çš„æ—¶é—´ä¸Žè¯¥å…·ä½“æ—¶é—´å¯¹æ¯”ï¼Œè€Œå®¢æˆ·ç«¯çš„æ—¶é—´å¯èƒ½è·ŸæœåŠ¡ç«¯çš„æ—¶é—´æœ‰è¯¯å·®ï¼Œè¿™å°±ä¼šå¯¼è‡´ç¼“å­˜å‘½ä¸­çš„è¯¯å·®ã€‚ ç”±äºŽ Expires å­˜åœ¨ä¸Šè¿°çš„é—®é¢˜ï¼Œå› æ­¤åœ¨ HTTP&#x2F;1.1 åè®®ä¸­å¼•å…¥äº† Cache-Control æœºåˆ¶ï¼Œé€šè¿‡è¿™ä¸ª Header å¯ä»¥åœ¨æœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯ä¹‹é—´æ²Ÿé€šç¼“å­˜ä¿¡æ¯ã€‚å¸¸è§çš„ç¼“å­˜æŒ‡ä»¤å¦‚ä¸‹ private å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ public å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ max-age&#x3D;xxx ç¼“å­˜æ•°æ®åœ¨xxxç§’åŽè¿‡æœŸ no-cache éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ® å…¶ä¸­privateæ˜¯é»˜è®¤å€¼ã€‚ åœ¨Http&#x2F;1.0ç‰ˆæœ¬ï¼Œå¦‚æžœåŒæ—¶å‡ºçŽ°äº† Cache-Control:max-age&#x3D; ä»¥åŠ Expiresï¼Œmax-ageæŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼Œä»¥Expiresä¸ºå‡†ï¼› åœ¨Http&#x2F;1.1ç‰ˆæœ¬ï¼Œå¦‚æžœåŒæ—¶å‡ºçŽ°äº† Cache-Control:max-age&#x3D; ä»¥åŠ Expiresï¼ŒExpiresä¼šè¢«å¿½ç•¥ï¼Œä»¥ max-age ä¸ºå‡†ã€‚ å¦‚æžœæœ‰no-cacheå°±è€ƒè™‘ä½¿ç”¨å¯¹æ¯”ç¼“å­˜ å¯¹æ¯”ç¼“å­˜å‡è®¾ç¼“å­˜æ•°æ®åº“å­˜åœ¨ç¼“å­˜æ•°æ®ï¼Œä»…åŸºäºŽå¯¹æ¯”ç¼“å­˜ï¼Œè¯·æ±‚æ•°æ®çš„æµç¨‹å¦‚ä¸‹ï¼š å¯ä»¥çœ‹å‡ºï¼Œ éƒ½éœ€è¦è¯·æ±‚æœåŠ¡å™¨éªŒè¯ç¼“å­˜æ ‡è¯†å¯¹åº”çš„æ•°æ®æ˜¯å¦å¤±æ•ˆ,å¯¹æ¯”ç¼“å­˜ä¸ç®¡æ˜¯å¦ç”Ÿæ•ˆï¼Œæ‰€ä»¥éƒ½éœ€è¦ä¸ŽæœåŠ¡ç«¯å‘ç”Ÿäº¤äº’ã€‚ æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå°†ç¼“å­˜æ ‡è¯†ä¸Žæ•°æ®ä¸€èµ·è¿”å›žç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°†äºŒè€…å¤‡ä»½è‡³ç¼“å­˜æ•°æ®åº“ä¸­ã€‚ å†æ¬¡è¯·æ±‚æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å°†å¤‡ä»½çš„ç¼“å­˜æ ‡è¯†å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥ç¼“å­˜èµ„æºä»æœ‰æ•ˆï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ž304çŠ¶æ€ç ï¼Œé€šçŸ¥å®¢æˆ·ç«¯æ¯”è¾ƒæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚ åˆ†ä¸ºä¸¤ç§æ ‡è¯†ä¼ é€’ï¼Œåˆ†åˆ«æ˜¯Last-Modified &#x2F; If-Modified-Sinceå’ŒEtag &#x2F; If-None-Matchï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ã€‚ Last-Modified &#x2F; If-Modified-Sinceè¿™ä¸¤ä¸ªå­—æ®µéœ€è¦é…åˆ Cache-Control è¿›è¡Œä½¿ç”¨ï¼ŒIf-Modified-Since ä½äºŽè¯·æ±‚å¤´,Last-Modified ä½äºŽå“åº”å¤´ï¼Œã€‚å®ƒä»¬çš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š If-Modified-Sinceï¼š å®¢æˆ·ç«¯ç¼“å­˜è¿‡æœŸæ—¶ï¼ˆmax-age æ—¶é—´åˆ°æœŸï¼‰ï¼Œå‘çŽ°è¯¥èµ„æºå…·æœ‰ Last-Modified å­—æ®µï¼Œå¯ä»¥åœ¨ Header ä¸­å¡«å…¥ If-Modified-Since å­—æ®µï¼Œå¹¶å¡«å…¥Last-Modifiedè®°å½•çš„æ—¶é—´,(If-Modified-Since &#x3D; Last-Modified time)ã€‚æœåŠ¡ç«¯æ”¶åˆ°è¯¥æ—¶é—´åŽä¼šä¸Žè¯¥èµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´è¿›è¡Œæ¯”è¾ƒã€‚ Last-Modifiedï¼š è¯¥å“åº”èµ„æºæœ€åŽçš„ä¿®æ”¹æ—¶é—´ï¼ŒæœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚çš„æ—¶å€™å¯ä»¥å¡«å…¥è¯¥å­—æ®µã€‚ è‹¥è¯¥èµ„æºå·²ç»è¢«ä¿®æ”¹ ï¼Œåˆ™ä¼šè¿”å›žçŠ¶æ€ç 200ï¼Œå¹¶å¯¹æ•´ä¸ªèµ„æºå“åº”ã€‚ å¦åˆ™è¯´æ˜Žè¯¥èµ„æºåœ¨è®¿é—®æ—¶æœªè¢«ä¿®æ”¹ï¼Œåˆ™ä¼šå“åº”çŠ¶æ€ç  304ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç¼“å­˜çš„èµ„æºã€‚ Etag &#x2F; If-None-MatchåŒæ ·éœ€è¦é…åˆ Cache-Control ä½¿ç”¨ï¼ŒEtag ä½äºŽå“åº”å¤´ï¼ŒIf-None-Match ä½äºŽè¯·æ±‚å¤´ã€‚å¹¶ä¸”å®ƒä»¬çš„ä¼˜å…ˆçº§é«˜äºŽ Last-Modified&#x2F;If-Modified-Sinceã€‚ å®ƒä»¬çš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š Etagï¼š è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸­çš„å”¯ä¸€æ ‡è¯†ï¼Œè§„åˆ™ç”±æœåŠ¡å™¨å†³å®šã€‚ If-None-Matchï¼š è‹¥å®¢æˆ·ç«¯åœ¨ç¼“å­˜è¿‡æœŸæ—¶ï¼ˆmax-age åˆ°æœŸï¼‰ï¼Œå‘çŽ°è¯¥èµ„æºå…·æœ‰ Etag å­—æ®µï¼Œå°±å¯ä»¥æ·»åŠ  If-None-Match Headerï¼Œå¹¶ä¼ å…¥ Etag ä¸­çš„å€¼ (If-None-Match &#x3D; Etag value)ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åŽå°±ä¼šå°†If-None-Matchçš„å€¼ä¸Žè¢«è¯·æ±‚èµ„æºçš„å”¯ä¸€æ ‡è¯†è¿›è¡Œæ¯”å¯¹ è‹¥æ¯”å¯¹ä¸åŒï¼Œè¯´æ˜Žèµ„æºæœ‰è¢«æ”¹åŠ¨è¿‡ï¼Œåˆ™ä¼šè¿”å›žçŠ¶æ€ç 200ï¼Œå¹¶å“åº”æ•´ä¸ªèµ„æºå†…å®¹ è‹¥æ¯”å¯¹ç›¸åŒï¼Œè¯´æ˜Žèµ„æºæ²¡æœ‰æ–°çš„ä¿®æ”¹ï¼Œåˆ™ä¼šè¿”å›žçŠ¶æ€ç  304ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜çš„èµ„æºã€‚ å¯¹äºŽå¼ºåˆ¶ç¼“å­˜ï¼ŒæœåŠ¡ç«¯é€šçŸ¥å®¢æˆ·ç«¯ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…å®¢æˆ·ç«¯å¯ä»¥ç›´æŽ¥ä½¿ç”¨ç¼“å­˜çš„èµ„æºï¼Œä¸åœ¨ç¼“å­˜æ—¶é—´å†…ï¼Œè‹¥å®¢æˆ·ç«¯éœ€è¦èŽ·å–æ•°æ®ï¼Œåˆ™éœ€è¦æ‰§è¡Œå¯¹æ¯”ç¼“å­˜ç­–ç•¥ã€‚ å¯¹äºŽæ¯”è¾ƒç¼“å­˜ï¼Œå®¢æˆ·ç«¯å°†ç¼“å­˜ä¿¡æ¯ä¸­çš„Etagå’ŒLast-Modifiedé€šè¿‡è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¡éªŒï¼Œè‹¥è¿”å›ž304çŠ¶æ€ç ï¼Œåˆ™å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æºã€‚ ç½‘ç»œè¯·æ±‚ç¼“å­˜å¤„ç†ï¼Œokhttpå¦‚ä½•å¤„ç†ç½‘ç»œç¼“å­˜çš„ æ€»ç»“ å¼ºåˆ¶ç¼“å­˜å’Œå¯¹æ¯”ç¼“å­˜å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆçº§é«˜äºŽå¯¹æ¯”ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ‰§è¡Œå¼ºåˆ¶ç¼“å­˜çš„è§„åˆ™æ—¶ï¼Œå¦‚æžœç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æŽ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸å†æ‰§è¡Œå¯¹æ¯”ç¼“å­˜è§„åˆ™ã€‚ å½“å¼ºåˆ¶ç¼“å­˜å’Œå¯¹æ¯”ç¼“å­˜åŒæ—¶å­˜åœ¨æ—¶ï¼š å¯¹äºŽå¼ºåˆ¶ç¼“å­˜ï¼ŒæœåŠ¡ç«¯é€šçŸ¥å®¢æˆ·ç«¯ä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…å®¢æˆ·ç«¯å¯ä»¥ç›´æŽ¥ä½¿ç”¨ç¼“å­˜çš„èµ„æºï¼Œä¸åœ¨ç¼“å­˜æ—¶é—´å†…ï¼Œè‹¥å®¢æˆ·ç«¯éœ€è¦èŽ·å–æ•°æ®ï¼Œåˆ™éœ€è¦æ‰§è¡Œå¯¹æ¯”ç¼“å­˜ç­–ç•¥ã€‚ å¯¹äºŽæ¯”è¾ƒç¼“å­˜ï¼Œå®¢æˆ·ç«¯å°†ç¼“å­˜ä¿¡æ¯ä¸­çš„Etagå’ŒLast-Modifiedé€šè¿‡è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æ ¡éªŒï¼Œè‹¥è¿”å›ž304çŠ¶æ€ç ï¼Œåˆ™å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç¼“å­˜ä¸­çš„èµ„æºã€‚ offline cache Cached responses can be served even when the device is offline or has limited connectivity, ensuring that your app remains functional in challenging network conditions. é—ç•™çš„é—®é¢˜ï¼Œsprintbootå¼„å¥½åŽï¼ŒmockæœåŠ¡ç«¯çš„headè¯·æ±‚ï¼Œå†éªŒè¯CacheInterceptor ç­–ç•¥ã€‚ https://www.cnblogs.com/giagor/p/15706508.htm https://www.bilibili.com/video/BV12Q4y1d7uDOKHTTPä¹‹ç¼“å­˜é…ç½®è¯¦è§£ CacheInterceptorBy default, OkHttpâ€™s CacheInterceptor only supports caching for GET requests. 123456789101112131415161718 internal fun put(response: Response): CacheRequest? &#123; val requestMethod = response.request.method if (HttpMethod.invalidatesCache(response.request.method)) &#123; //This method determines whether it is not a get request try &#123; remove(response.request) &#125; catch (_: IOException) &#123; // The cache cannot be written. &#125; return null &#125; if (requestMethod != &quot;GET&quot;) &#123; // Don&#x27;t cache non-GET responses. We&#x27;re technically allowed to cache HEAD requests and some // POST requests, but the complexity of doing so is high and the benefit is low. return null &#125;&#125; RequestRequestBodyThe RequestBody is a basic request for OkHttp. It also provides FormBody and MultipartBody to construct the request body. 12345678910111213141516171819202122 RequestBody body = RequestBody.create(json, JSON); Request request = new Request.Builder() .url(url) .post(body) .build();fun ByteArray.commonToRequestBody( contentType: MediaType?, offset: Int, byteCount: Int,): RequestBody &#123; return object : RequestBody() &#123; override fun writeTo(sink: BufferedSink) &#123; sink.write(this@commonToRequestBody, offset, byteCount) &#125; &#125;&#125;actual sealed interface BufferedSink : Sink, WritableByteChannel &#123; fun buffer(): Buffer actual val buffer: Buffer&#125; é’ˆå¯¹è¿™ä¸€å¼€å§‹ä¸ç†è§£ï¼Œ sink.write æ˜¯æ€Žä¹ˆå†™å…¥çš„,å®ƒåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ²¡æ³•æ‰§è¡Œ,ä¸­é—´ä»¥ä¸ºacualå­—æ®µä¼šæž„é€ å¯¹è±¡ï¼Œå…¶å®žä¸æ˜¯çš„ï¼ŒåŽæ¥å†™äº†ä¸ªdemoã€‚ å…¶å®žæ˜¯åœ¨ CallServerInterceptorä¸­createRequestBody,åˆ›å»ºäº†bufferedRequestBody,ç„¶åŽæŠŠä¹‹å‰RequestBodyçš„æ•°æ®å†™å…¥ã€‚ 12val bufferedRequestBody = exchange.createRequestBody(request, false).buffer()requestBody.writeTo(bufferedRequestBody) FormBodyFormBody é‡å†™äº†writetoæ–¹æ³•ï¼Œä¸Šé¢è§£æžåŽï¼Œèµ°çš„å°±æ˜¯ 123override fun writeTo(sink: BufferedSink) &#123; writeOrCountBytes(sink, false)&#125; OkHttpæ€Žä¹ˆå®žçŽ°è¿žæŽ¥æ± OkHttpå¯¹äºŽç½‘ç»œè¯·æ±‚éƒ½æœ‰å“ªäº›ä¼˜åŒ–Okhttp demoWebSocketEcho https://juejin.cn/post/6844904102669844493https://juejin.im/post/5f0452615188252e5522b747 è¿žæŽ¥æ± é…ç½®maxIdleConnections å’Œ keepAliveDuration æ˜¯å½±å“è¿žæŽ¥æ± è¡Œä¸ºçš„é‡è¦å‚æ•°ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨ç¨‹åºéœ€æ±‚å’ŒæœåŠ¡å™¨é…ç½®è¿›è¡Œé€‚å½“çš„è®¾ç½®ã€‚ maxIdleConnectionsï¼ˆæœ€å¤§ç©ºé—²è¿žæŽ¥æ•°ï¼‰è¿™ä¸ªå‚æ•°è¡¨ç¤ºè¿žæŽ¥æ± ä¸­å…è®¸å­˜åœ¨çš„æœ€å¤§ç©ºé—²è¿žæŽ¥æ•°ã€‚ç©ºé—²è¿žæŽ¥æ˜¯æŒ‡å½“å‰æ²¡æœ‰æ­£åœ¨ä½¿ç”¨çš„è¿žæŽ¥ã€‚å¦‚æžœè¿žæŽ¥æ± ä¸­çš„ç©ºé—²è¿žæŽ¥æ•°è¾¾åˆ°äº†è¿™ä¸ªæœ€å¤§å€¼ï¼Œé‚£ä¹ˆæ–°çš„è¿žæŽ¥å°†ä¸å†è¢«åˆ›å»ºï¼Œè€Œæ˜¯ä¼šè¢«å…³é—­ã€‚è¾ƒå¤§çš„ç©ºé—²è¿žæŽ¥æ•°å¯ä»¥æé«˜è¿žæŽ¥çš„å¤ç”¨æ€§å’Œè¯·æ±‚å“åº”é€Ÿåº¦ï¼Œä½†ä¹Ÿä¼šå ç”¨æ›´å¤šçš„ç³»ç»Ÿèµ„æºã€‚å¯¹äºŽå…·ä½“çš„å€¼ï¼Œå¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨ç¨‹åºè´Ÿè½½å’ŒæœåŠ¡å™¨è´Ÿè½½è¿›è¡Œè¯„ä¼°å’Œè°ƒæ•´ã€‚ keepAliveDurationï¼ˆä¿æŒæ´»åŠ¨è¿žæŽ¥çš„æ—¶é—´ï¼‰ è¿™ä¸ªå‚æ•°è¡¨ç¤ºè¿žæŽ¥çš„æœ€å¤§ç©ºé—²æ—¶é—´ã€‚å¦‚æžœä¸€ä¸ªè¿žæŽ¥åœ¨è¿™æ®µæ—¶é—´å†…å¤„äºŽç©ºé—²çŠ¶æ€ï¼ˆæ²¡æœ‰è¢«ä½¿ç”¨ï¼‰ï¼Œå®ƒå°†è¢«å…³é—­å¹¶ä»Žè¿žæŽ¥æ± ä¸­ç§»é™¤ã€‚è¾ƒé•¿çš„ keep-alive æ—¶é—´å¯ä»¥å‡å°‘é¢‘ç¹åˆ›å»ºå’Œå…³é—­è¿žæŽ¥çš„å¼€é”€ï¼Œå¹¶æé«˜è¿žæŽ¥çš„å¤ç”¨æ€§ï¼Œä½†ä¹Ÿä¼šå¢žåŠ æœåŠ¡å™¨ç«¯èµ„æºçš„å ç”¨ã€‚åœ¨è®¾ç½®è¿™ä¸ªå€¼æ—¶ï¼Œå¯ä»¥è€ƒè™‘æœåŠ¡å™¨çš„ keep-alive é…ç½®å’Œç½‘ç»œå»¶è¿Ÿç­‰å› ç´ ã€‚ åœ¨è¿žæŽ¥æ± ä¸­æ‰¾è¿žæŽ¥çš„æ—¶å€™ä¼šå¯¹æ¯”è¿žæŽ¥æ± ä¸­ç›¸åŒhostçš„è¿žæŽ¥ã€‚ å¦‚æžœåœ¨è¿žæŽ¥æ± ä¸­æ‰¾ä¸åˆ°è¿žæŽ¥çš„è¯ï¼Œä¼šåˆ›å»ºè¿žæŽ¥ï¼Œåˆ›å»ºå®ŒåŽä¼šå­˜å‚¨åˆ°è¿žæŽ¥æ± ä¸­ã€‚ åœ¨æŠŠè¿žæŽ¥æ”¾å…¥è¿žæŽ¥æ± ä¸­æ—¶ï¼Œä¼šæŠŠæ¸…é™¤æ“ä½œçš„ä»»åŠ¡æ”¾å…¥åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œåˆ é™¤ä»»åŠ¡ä¸­ä¼šåˆ¤æ–­å½“å‰è¿žæŽ¥æœ‰æ²¡æœ‰åœ¨ä½¿ç”¨ä¸­ï¼Œæœ‰æ²¡æœ‰æ­£åœ¨ä½¿ç”¨é€šè¿‡RealConnectionçš„transmittersé›†åˆçš„sizeæ˜¯å¦ä¸º0æ¥åˆ¤æ–­ï¼Œå¦‚æžœä¸åœ¨ä½¿ç”¨ä¸­ï¼Œæ‰¾å‡ºç©ºé—²æ—¶é—´æœ€é•¿çš„è¿žæŽ¥ï¼Œå¦‚æžœç©ºé—²æ—¶é—´æœ€é•¿çš„è¿žæŽ¥è¶…è¿‡äº†keep-aliveé»˜è®¤çš„5åˆ†é’Ÿæˆ–è€…ç©ºé—²çš„è¿žæŽ¥æ•°è¶…è¿‡äº†æœ€å¤§çš„keep-aliveè¿žæŽ¥æ•°5ä¸ªçš„è¯ï¼Œä¼šæŠŠå­˜æ´»æ—¶é—´æœ€é•¿çš„è¿žæŽ¥ä»Žè¿žæŽ¥æ± ä¸­åˆ é™¤ã€‚ä¿è¯keep-aliveçš„æœ€å¤§ç©ºé—²æ—¶é—´å’Œæœ€å¤§çš„è¿žæŽ¥æ•° è¿žæŽ¥å¤ç”¨å®žçŽ°1234567891011121314151617181920fun callAcquirePooledConnection( connectionUser: ConnectionUser, routes: List&lt;Route&gt;?,): RealConnection? &#123; for (connection in connections) &#123; // In the first synchronized block, acquire the connection if it can satisfy this call. val acquired = synchronized(connection) &#123; when &#123; requireMultiplexed &amp;&amp; !connection.isMultiplexed -&gt; false !connection.isEligible(address, routes) -&gt; false else -&gt; &#123; connectionUser.acquireConnectionNoEvents(connection) &#125; &#125; &#125; // Confirm the connection is healthy and return it. if (connection.isHealthy(doExtensiveHealthChecks)) return connection &#125;&#125; OkHttp å¯¹è¿žæŽ¥æ± çš„ä¼˜åŒ–æ€è·¯ï¼šcleanup æ ¹æ®è¿žæŽ¥æ± ä¸­çš„è¿žæŽ¥å¯¹è±¡é—²ç½®äº†å¤šä¹… æŒ‡å®šé—²ç½®æ—¶é—´é™åˆ¶ï¼šè¶…è¿‡äº†ï¼Œå°±æ¸…ç†æŽ‰é»˜è®¤ä¸º5 min è¿žæŽ¥æ± ä¸­å­˜æ”¾äº†å¤§é‡çš„ç©ºé—²è¿žæŽ¥å¯¹è±¡ æ­¤æ—¶æ²¡æœ‰æ­£åœ¨ä½¿ç”¨ï¼Œå°†é—²ç½®æ—¶é—´æœ€é•¿çš„æ¸…ç†æŽ‰ï¼ŒçŸ¥é“ä¸è¶…è¿‡5 ä¸ªè¿žæŽ¥(LRU æ€æƒ³) cleanup å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ éåŽ†æ‰€æœ‰çš„è¿žæŽ¥ï¼Œè®°å½•æ­£åœ¨ä½¿ç”¨çš„è¿žæŽ¥æ•°ä¸Žç©ºé—²çš„è¿žæŽ¥æ•°(ä¼šè®°å½•ç©ºé—²æ—¶é—´) https://juejin.cn/post/7126235541917401119 okhttpæ€Žä¹ˆæ”¯æŒhttp2.0Handshakeåˆ™ä¼šæŠŠæœåŠ¡ç«¯æ”¯æŒçš„Tlsç‰ˆæœ¬ï¼ŒåŠ å¯†æ–¹å¼ç­‰éƒ½å¸¦å›žæ¥ï¼Œç„¶åŽä¼šæŠŠè¿™ä¸ªæ²¡æœ‰éªŒè¯è¿‡çš„HandShakeç”¨X509CertificateåŽ»éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚ç„¶åŽä¼šé€šè¿‡PlatformåŽ»ä»ŽSSLSocketåŽ»èŽ·å–ALPNçš„åè®®æ”¯æŒä¿¡æ¯ï¼Œå½“åŽç«¯æ”¯æŒçš„åè®®å†…åŒ…å«Http2.0æ—¶ï¼Œåˆ™å°±ä¼šæŠŠè¯·æ±‚å‡çº§åˆ°Http2.0é˜¶æ®µã€‚ glideå’ŒOkHttpçš„ä»»åŠ¡è°ƒåº¦æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼ˆæ¯”å¦‚åŒæ—¶å‘èµ·å¾ˆå¤šè¯·æ±‚ï¼‰ 4.é—®ç¬¬ä¸‰æ–¹åº“å¦‚okhttpã€picassoç­‰åº•å±‚åŽŸç†å¦‚ç¼“å­˜æœºåˆ¶ç­‰ï¼ˆä¸€ä¸ªä¹Ÿæ²¡ç­”ä¸Šæ¥ï¼Œliterally Http1 Http2æ˜¯æ€Žä¹ˆåˆ‡æ¢çš„okhttp æ˜¯å¦‚ä½•æ”¯æŒ Http2 çš„ï¼Ÿ Handshakeåˆ™ä¼šæŠŠæœåŠ¡ç«¯æ”¯æŒçš„Tlsç‰ˆæœ¬ï¼ŒåŠ å¯†æ–¹å¼ç­‰éƒ½å¸¦å›žæ¥ï¼Œç„¶åŽä¼šæŠŠè¿™ä¸ªæ²¡æœ‰éªŒè¯è¿‡çš„HandShakeç”¨X509CertificateåŽ»éªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚ç„¶åŽä¼šé€šè¿‡PlatformåŽ»ä»ŽSSLSocketåŽ»èŽ·å–ALPNçš„åè®®æ”¯æŒä¿¡æ¯ï¼Œå½“åŽç«¯æ”¯æŒçš„åè®®å†…åŒ…å«Http2.0æ—¶ï¼Œåˆ™å°±ä¼šæŠŠè¯·æ±‚å‡çº§åˆ°Http2.0é˜¶æ®µã€‚ 13.Retrofitä¸­çš„Callå¯¹è±¡å¦‚ä½•è½¬æ¢æˆokhttpçš„callå¯¹è±¡(è¿™ä¸ªé¢˜ç›®æ˜¯åŸ‹å‘çš„) Interview Questions æ±‡æ€» https://www.jianshu.com/p/dfdfd45b076e åˆ†æž https://juejin.cn/post/6873476209737629709/ OKHTTP æŠ“åŒ…å¦‚æžœè¦ï¼Œéœ€è¦è®¾ç½®Okhttpè¯ä¹¦ 123456789101112131415161718192021222324252627282930fun disableCertificateVerification(): OkHttpClient &#123; val trustAllCerts = arrayOf&lt;TrustManager&gt;(object : X509TrustManager &#123; override fun checkClientTrusted( chain: Array&lt;out java.security.cert.X509Certificate&gt;?, authType: String?, ) &#123; &#125; override fun checkServerTrusted( chain: Array&lt;out java.security.cert.X509Certificate&gt;?, authType: String?, ) &#123; &#125; override fun getAcceptedIssuers(): Array&lt;java.security.cert.X509Certificate&gt; &#123; return arrayOf() &#125; &#125;) val sslContext = SSLContext.getInstance(&quot;TLS&quot;) sslContext.init(null, trustAllCerts, java.security.SecureRandom()) val sslSocketFactory = sslContext.socketFactory val trustAllHostnames = HostnameVerifier &#123; _, _ -&gt; true &#125; return OkHttpClient.Builder() .sslSocketFactory(sslSocketFactory, trustAllCerts[0] as X509TrustManager) .hostnameVerifier(trustAllHostnames) .build() &#125; éªŒè¯è¯ä¹¦ 123456789101112131415161718192021222324252627282930 private fun connectTls( sslSocket: SSLSocket, connectionSpec: ConnectionSpec, ) &#123; if (connectionSpec.supportsTlsExtensions) &#123; Platform.get().configureTlsExtensions(sslSocket, address.url.host, address.protocols) &#125; // Force handshake. This can throw! sslSocket.startHandshake() // Verify that the socket&#x27;s certificates are acceptable for the target host. if (!address.hostnameVerifier!!.verify(address.url.host, sslSocketSession)) &#123; val peerCertificates = unverifiedHandshake.peerCertificates if (peerCertificates.isNotEmpty()) &#123; val cert = peerCertificates[0] as X509Certificate throw SSLPeerUnverifiedException( &quot;&quot;&quot; |Hostname $&#123;address.url.host&#125; not verified: | certificate: $&#123;CertificatePinner.pin(cert)&#125; | DN: $&#123;cert.subjectDN.name&#125; | subjectAltNames: $&#123;OkHostnameVerifier.allSubjectAltNames(cert)&#125; &quot;&quot;&quot;.trimMargin(), ) val certificatePinner = address.certificatePinner!! // Check that the certificate pinner is satisfied by the certificates presented. certificatePinner.check(address.url.host) &#123; handshake.peerCertificates.map &#123; it as X509Certificate &#125; &#125; &#125;&#125; åº”ç”¨æ‹¦æˆªå™¨å’Œç½‘ç»œæ‹¦æˆªå™¨æœ‰ä»€ä¹ˆåŒºåˆ«ä»Žä¸‹é¢çš„ä»£ç å¯ä»¥çœ‹åˆ° interceptorså’ŒnetworkInterceptorsçš„åŒºåˆ«. interceptors æ˜¯åœ¨æœ€å‰é¢ 12345678910111213141516171819202122internal fun getResponseWithInterceptorChain(): Response &#123; // Build a full stack of interceptors. val interceptors = mutableListOf&lt;Interceptor&gt;() interceptors += client.interceptors interceptors += RetryAndFollowUpInterceptor(client) interceptors += BridgeInterceptor(client.cookieJar) interceptors += CacheInterceptor(client.cache) interceptors += ConnectInterceptor if (!forWebSocket) &#123; interceptors += client.networkInterceptors &#125; interceptors += CallServerInterceptor(forWebSocket) val chain = RealInterceptorChain( call = this, interceptors = interceptors, index = 0, request = originalRequest ) val response = chain.proceed(originalRequest) return response&#125; åº”ç”¨æ‹¦æˆªå™¨ ä»…è°ƒç”¨ä¸€æ¬¡ï¼Œå³ä½¿ http å“åº”æ˜¯ä»Žç¼“å­˜ä¸­èŽ·å–çš„ç»“æžœã€‚ä¸»è¦å…³æ³¨åº”ç”¨ç¨‹åºçš„åŽŸå§‹æ„å›¾ï¼Œä¸å…³å¿ƒ okhttp æ³¨å…¥çš„å¤´ï¼Œå¦‚ If-None-Match â€¦å…è®¸çŸ­è·¯æ“ä½œï¼Œå³ ä¸è°ƒç”¨ Chain.proceed()ã€‚å…è®¸é‡è¯•å¹¶å¤šæ¬¡è°ƒç”¨ Chain.proceed()å¯ä»¥ä½¿ç”¨ withConnectTimeout, withReadTimeout, withWriteTimeout æ¥è°ƒæ•´ Call è¶…æ—¶æ—¶é—´ã€‚ ç½‘ç»œæ‹¦æˆªå™¨ èƒ½å¤Ÿæ“ä½œä¸­é—´å¤„ç†è¿‡ç¨‹ï¼Œå¦‚é‡å®šå‘å’Œé‡è¯•ã€‚ä¸å…³æ³¨ cache å±‚æ‹¦æˆªçš„çŸ­è·¯æ“ä½œå…³æ³¨ç½‘ç»œå±‚æ•°æ®ä¼ è¾“æ‰§è¡Œ Connection è¯·æ±‚ https://juejin.cn/post/7151761448757264415 OKHttp å¦‚ä½•å¤ç”¨ TCP è¿žæŽ¥ChatGptResuming TCP connections in OkHttp is not straightforward because TCP connection resumption at the application level is generally managed by the underlying operating system and network stack rather than by application-level code. However, you can manage HTTP request retries and connection pooling to effectively handle network interruptions and failures. Here are a few steps and strategies to handle TCP connection issues and retries in OkHttp: Connection PoolingOkHttp manages connections in a connection pool, which can be reused for multiple requests. This reduces latency by avoiding the need to establish a new TCP connection for each request. Ensure your connection pool is properly configured. 1234ConnectionPool connectionPool = new ConnectionPool(5, 5, TimeUnit.MINUTES);OkHttpClient client = new OkHttpClient.Builder() .connectionPool(connectionPool) .build(); è¿™ä¸ªlink è¯¦ç»†ä»‹ç»äº†ç‰©ç†å±‚é¢ è¿žæŽ¥å¤ç”¨è§„åˆ™Keep-Alivehttps://juejin.cn/post/6844904037167415310#heading-8 OKHttp ç©ºé—²è¿žæŽ¥å¦‚ä½•æ¸…é™¤ Find the longest-idle connections in 2 categories: 1. OLD: Connections that have been idle for at least keepAliveDurationNs. We close these if we find them, regardless of what the address policies need. 2. EVICTABLE: Connections not required by any address policy. This matches connections that don&#39;t participate in any policy, plus connections whose policies won&#39;t be violated if the connection is closed. We only close these if the idle connection limit is exceeded. Also count the evictable connections to find out if we must close an EVICTABLE connection åœ¨å°†è¿žæŽ¥åŠ å…¥è¿žæŽ¥æ± æ—¶å°±ä¼šå¯åŠ¨å®šæ—¶ä»»åŠ¡ RealConenctionPool 123456fun put(connection: RealConnection) &#123;connection.assertThreadHoldsLock()connections.add(connection)// connection.queueEvent &#123; connectionListener.connectEnd(connection) &#125;scheduleCloser()&#125; æœ‰ç©ºé—²è¿žæŽ¥çš„è¯ï¼Œå¦‚æžœæœ€é•¿çš„ç©ºé—²æ—¶é—´å¤§äºŽ5åˆ†é’Ÿ æˆ– ç©ºé—²æ•° å¤§äºŽ5ï¼Œå°±ç§»é™¤å…³é—­è¿™ä¸ªæœ€é•¿ç©ºé—²è¿žæŽ¥ï¼›å¦‚æžœ ç©ºé—²æ•° ä¸å¤§äºŽ5 ä¸” æœ€é•¿çš„ç©ºé—²æ—¶é—´ä¸å¤§äºŽ5åˆ†é’Ÿï¼Œå°±è¿”å›žåˆ°5åˆ†é’Ÿçš„å‰©ä½™æ—¶é—´ï¼Œç„¶åŽç­‰å¾…è¿™ä¸ªæ—¶é—´å†æ¥æ¸…ç†ã€‚ RealConnectionPool 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112fun closeConnections(now: Long): Long &#123; // Compute the concurrent call capacity for each address. We won&#x27;t close a connection if doing // so would violate a policy, unless it&#x27;s OLD. val addressStates = this.addressStates for (state in addressStates.values) &#123; state.concurrentCallCapacity = 0 &#125; for (connection in connections) &#123; val addressState = addressStates[connection.route.address] ?: continue synchronized(connection) &#123; addressState.concurrentCallCapacity += connection.allocationLimit &#125; &#125; // Find the longest-idle connections in 2 categories: // // 1. OLD: Connections that have been idle for at least keepAliveDurationNs. We close these if // we find them, regardless of what the address policies need. // // 2. EVICTABLE: Connections not required by any address policy. This matches connections that // don&#x27;t participate in any policy, plus connections whose policies won&#x27;t be violated if the // connection is closed. We only close these if the idle connection limit is exceeded. // // Also count the evictable connections to find out if we must close an EVICTABLE connection // before its keepAliveDurationNs is reached. var earliestOldIdleAtNs = (now - keepAliveDurationNs) + 1 var earliestOldConnection: RealConnection? = null var earliestEvictableIdleAtNs = Long.MAX_VALUE var earliestEvictableConnection: RealConnection? = null var inUseConnectionCount = 0 var evictableConnectionCount = 0 for (connection in connections) &#123; synchronized(connection) &#123; // If the connection is in use, keep searching. å¦‚æžœè¯¥è¿žæŽ¥æ­£åœ¨è¢«ä½¿ç”¨ï¼Œåˆ™ç»§ç»­éåŽ†ï¼Œä½¿ç”¨è¿žæŽ¥æ•°+1 if (pruneAndGetAllocationCount(connection, now) &gt; 0) &#123; inUseConnectionCount++ return@synchronized &#125; // è®°å½•æœ€é•¿ç©ºé—²æ—¶é•¿ï¼Œä»¥åŠæœ€é•¿ç©ºé—²æ—¶é•¿å¯¹åº”çš„è¿žæŽ¥ val idleAtNs = connection.idleAtNs if (idleAtNs &lt; earliestOldIdleAtNs) &#123; earliestOldIdleAtNs = idleAtNs earliestOldConnection = connection &#125; if (isEvictable(addressStates, connection)) &#123; evictableConnectionCount++ if (idleAtNs &lt; earliestEvictableIdleAtNs) &#123; // å½“è¿žæŽ¥æœ€é•¿ç©ºé—²æ—¶é•¿å¤§äºŽé…ç½®çš„æ—¶é•¿ earliestEvictableIdleAtNs = idleAtNs earliestEvictableConnection = connection &#125; &#125; &#125; &#125; val toEvict: RealConnection? val toEvictIdleAtNs: Long when &#123; // We had at least one OLD connection. Close the oldest one. earliestOldConnection != null -&gt; &#123; toEvict = earliestOldConnection toEvictIdleAtNs = earliestOldIdleAtNs &#125; // We have too many EVICTABLE connections. Close the oldest one. evictableConnectionCount &gt; maxIdleConnections -&gt; &#123; //ç©ºé—²è¿žæŽ¥ä¸ªæ˜¯&gt; é…ç½®çš„ä¸ªæ•° toEvict = earliestEvictableConnection toEvictIdleAtNs = earliestEvictableIdleAtNs &#125; else -&gt; &#123; toEvict = null toEvictIdleAtNs = -1L &#125; &#125; when &#123; toEvict != null -&gt; &#123; // We&#x27;ve chosen a connection to evict. Confirm it&#x27;s still okay to be evicted, then close it. synchronized(toEvict) &#123; if (toEvict.calls.isNotEmpty()) return 0L // No longer idle. if (toEvict.idleAtNs != toEvictIdleAtNs) return 0L // No longer oldest. toEvict.noNewExchanges = true connections.remove(toEvict) &#125; addressStates[toEvict.route.address]?.scheduleOpener() toEvict.socket().closeQuietly() connectionListener.connectionClosed(toEvict) if (connections.isEmpty()) cleanupQueue.cancelAll() // Clean up again immediately. return 0L &#125; earliestEvictableConnection != null -&gt; &#123; // A connection will be ready to evict soon. return earliestEvictableIdleAtNs + keepAliveDurationNs - now &#125; inUseConnectionCount &gt; 0 -&gt; &#123; // All connections are in use. It&#x27;ll be at least the keep alive duration &#x27;til we run again. return keepAliveDurationNs &#125; else -&gt; &#123; // No connections, idle or in use. return -1 &#125; &#125;&#125; close OkhttpClientç«‹å³å…³é—­ç©ºé—²è¿žæŽ¥ï¼ŒmaxIdleã€keepAliveDurationé™åˆ¶ 12345678910111213141516171819202122232425fun evictAll() &#123; val i = connections.iterator() while (i.hasNext()) &#123; val connection = i.next() val socketToClose = synchronized(connection) &#123; if (connection.calls.isEmpty()) &#123; i.remove() connection.noNewExchanges = true // åªæœ‰è¿žæŽ¥ç©ºé—²ï¼Œå…ˆæ ‡è®°ï¼Œé˜²æ­¢closeå‰åˆè¢«å¤ç”¨. return@synchronized connection.socket() &#125; else &#123; return@synchronized null &#125; &#125; if (socketToClose != null) &#123; socketToClose.closeQuietly() connectionListener.connectionClosed(connection) &#125; &#125; if (connections.isEmpty()) cleanupQueue.cancelAll() for (policy in addressStates.values) &#123; policy.scheduleOpener() &#125;&#125; https://juejin.cn/post/6844904054095790087 æ²¡æœ‰ç©ºé—²è¿žæŽ¥å°±ç­‰5åˆ†é’ŸåŽå†å°è¯•æ¸…ç†ã€‚ æ²¡æœ‰è¿žæŽ¥ä¸æ¸…ç†ã€‚","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"HexoConfigure","slug":"HexoConfigure","date":"2017-08-01T06:03:52.000Z","updated":"2024-10-01T12:01:45.494Z","comments":true,"path":"2017/08/01/HexoConfigure/","link":"","permalink":"https://noteforme.github.io/2017/08/01/HexoConfigure/","excerpt":"","text":"åŸºæœ¬é…ç½®select theme Best Hexo Themes (Hand-picked) | Statichunt å®‰è£…å‡ºé—®é¢˜ æ›´æ¢é•œåƒæº https://www.lemonneko.cn/win10%E6%90%AD%E5%BB%BAhexo%E5%8F%8A%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/ ä¸Šä¼ åˆ°åˆ†æ”¯ // gitåˆå§‹åŒ– git init // æ·»åŠ ä»“åº“åœ°å€ git remote add origin https://github.com/ç”¨æˆ·å/ä»“åº“å.git // æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°å»ºçš„åˆ†æ”¯ git checkout -b åˆ†æ”¯å // æ·»åŠ æ‰€æœ‰æœ¬åœ°æ–‡ä»¶åˆ°git git add . // gitæäº¤ git commit -m &quot;&quot; // æ–‡ä»¶æŽ¨é€åˆ°hexoåˆ†æ”¯ git push origin hexo å…¶ä»–è®¾å¤‡å®‰è£…å¥½çŽ¯å¢ƒ(æ”¯æŒè·¨å¹³å°)ï¼Œå…ˆclone hexoåˆ†æ”¯åˆ°æœ¬åœ° git clone -b hexo git@github.com:noteforme/noteforme.github.io.git // å®‰è£…hexo , ä¸‹ä¸ä¸‹æ¥å°±ç”¨privoxy npm install hexo // æ³¨æ„è¿™é‡Œä¸éœ€è¦hexoåˆå§‹åŒ–ï¼šhexo initï¼›å¦åˆ™ä¹‹å‰çš„hexoé…ç½®å‚æ•°ä¼šé‡ç½® // å®‰è£…ä¾èµ–åº“ npm install // å®‰è£…éƒ¨ç½²ç›¸å…³é…ç½® npm install hexo-deployer-git //å¦‚æžœå‡ºé”™æ‰§è¡Œä¸‹é¢çš„ npm install -g hexo-cli è¿™è¦å°±å®ŒæˆåŒæ­¥äº†(ä¸Šé¢çš„æµç¨‹è¿˜ä¸æ˜¯å¾ˆè§„èŒƒï¼Œä¸è¿‡æ‰§è¡Œä¸Šé¢å‡ ä¸ªå‘½ä»¤åŸºæœ¬éƒ½èƒ½è§£å†³) å¦‚æžœæœ‰è¿™äº›ä¸ç”¨ç®¡äº† npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules\\chokidar\\node_modules\\fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for &#x66;&#115;&#x65;&#118;&#101;&#x6e;&#x74;&#115;&#x40;&#49;&#46;&#49;&#x2e;&#x32;: wanted {â€œosâ€:â€darwinâ€,â€archâ€:â€anyâ€} (current: {â€œosâ€:â€win32â€,â€archâ€:â€x64â€ é—®é¢˜:åœ¨ubuntuä¸Šï¼Œæ‰§è¡Œhexo déƒ¨ç½²åŽæ¯æ¬¡éƒ½è¦è¾“å…¥githubç”¨æˆ·åå’Œå¯†ç ï¼Œåœ¨è¿™é‡Œä¹Ÿæ‰¾åˆ°äº†ç­”æ¡ˆï¼Œå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„ _config.ymlæ–‡ä»¶æ²¡æœ‰é…ç½®æˆssh,ä¹‹å‰æ˜¯è¿™æ ·çš„ repository:https://github.com/noteforme/noteforme.github.io.git Deployment Docs: https://hexo.io/docs/deployment.html deploy: type: git repository: &#x67;&#105;&#116;&#x40;&#x67;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#x6f;&#109;:noteforme&#x2F;noteforme.github.io.git branch: master å‚è€ƒï¼šhttp://www.jianshu.com/p/6fb0b287f950 httpsè®¤è¯:Cloudflareå…è´¹çš„sslåˆ›å»ºè´¦æˆ·æ³¨å†Œ https://www.cloudflare.com/a/sign-up ç™»å½•åŽè¾“å…¥åŸŸå,ç‚¹å‡»æ‰«æ å¦‚å›¾ ä¸€ç›´continueï¼Œåˆ°äº†Selet a Cloudflare Plan é€‰æ‹©Free Website è§£æžåŸŸåçš„åœ°æ–¹ï¼Œä¿®æ”¹åŸŸåæœåŠ¡å™¨,æˆ‘è¿™é‡Œæ˜¯åœ¨godaddyä¿®æ”¹ï¼Œç„¶åŽcontinue ç‚¹å‡»Preview on your site instantlyï¼&gt; ç‚¹å‡»Overview(æ˜¾ç¤ºï¼¡ctiveå³å¯)ï¼&gt;ç‚¹å‡»Crypto(é€‰æ‹©ï¼¦lexible) å‚è€ƒï¼šhttp://www.jianshu.com/p/92b6d4a6ecd5 mac install hero1sudo npm install -g hero-cli theme didnâ€™t commit to GitHub ,so you could clone theme hexo next themeä¿®æ”¹ä¸»é¢˜ git clone git@github.com:ppoffice/hexo-theme-icarus.git themes/icarusé‡Œé¢éƒ½æœ‰ä»‹ç»ï¼Œä¸»è¦çŸ³npmå®‰è£…ä¸äº†æ’ä»¶å°±éœ€è¦è¿™ç¯‡æ–‡ç«  çš„polipoå·¥å…·ï¼Œæœ€æœ‰åçš„Privoxyåè€Œä¸èµ·ä½œç”¨ åˆ†ç±»åªè¦åœ¨ åšå®¢å¤´éƒ¨åŠ  categories: â€œBLOGâ€ å°±ä¼šè‡ªåŠ¨å±•ç¤ºåˆ†ç±»äº†ï¼Œå¦‚æžœè§‰å¾—æ¯æ¬¡æ·»åŠ éº»çƒ¦çš„è¯ï¼Œä¿®æ”¹scaffolds&#x2F;post.md æ¨¡æ¿ title: HexoConfigure date: 1501567432000 tags: categories: comments: true ç„¶åŽhexo n â€œyourblogâ€,å°±ä¼šæœ‰è¿™äº›äº†ï¼ŒæŽ¥ä¸‹é‡Œå°±æ˜¯åœ¨é¦–é¡µåˆ†ç±»è¿›è¡Œå…³è”äº† ç”Ÿæˆ åˆ†ç±»ï¼ˆé»˜è®¤å·²æœ‰åˆ†ç±»ï¼‰ 1hexo new page &quot;categories&quot; æ–°å»ºpage: $ hexo new page â€œcategoriesâ€ ï¼Œåœ¨ hexo &gt; source æ–‡ä»¶å¤¹ä¸­ä¼šå‡ºçŽ°ä¸€ä¸ªcategoriesæ–‡ä»¶å¤¹ æ‰“å¼€categoriesæ–‡ä»¶å¤¹ä¸­çš„index.mdé¡µé¢ï¼Œåœ¨å¤´éƒ¨æ·»åŠ  â€“ type: â€œcategoriesâ€ ï¼ˆä¸ºäº†ç‚¹å‡»çš„æ—¶å€™é“¾æŽ¥ç”Ÿæ•ˆï¼‰ åœ¨hexo &gt; theme &gt; next &gt; _config.yml ä¸­ä¿®æ”¹menuä¸‹çš„categorues,åŽ»æŽ‰å‰é¢äº•å·æ³¨é‡Šã€‚ ç„¶åŽå°±å¯ä»¥çœ‹åˆ°åˆ†ç±»é¡µé¢äº† å‚è€ƒï¼šhttps://lannly.github.io/2016/11/16/Hexo-Next-%E6%B7%BB%E5%8A%A0%E8%8F%9C%E5%8D%95%E5%88%86%E7%B1%BB/ next æ·»åŠ å¤´åƒæ–°å»ºuploadsæ–‡ä»¶å¤¹ï¼Œæ”¾å…¥å›¾ç‰‡ æ‰¾åˆ°themes&#x2F;next ä¸‹çš„ -config.yml,ä¿®æ”¹å¦‚ä¸‹å›¾æ‰€ç¤º 1234# Sidebar Avatar# in theme directory(source/images): /images/avatar.jpg# in site directory(source/uploads): /uploads/avatar.jpg avatar: /uploads/author.png https://github.com/iissnan/hexo-theme-next/wiki/%E8%AE%BE%E7%BD%AE%E4%BE%A7%E8%BE%B9%E6%A0%8F%E5%A4%B4%E5%83%8F Mac Hexoå®‰è£…command not found: hexoçš„è§£å†³æ–¹æ³• $ npm root -gèŽ·å–node_modulesåœ°å€&#x2F;Users&#x2F;guo&#x2F;.npm-global&#x2F;lib&#x2F;node_modules 1$export PATH=$PATH:/Users/m/.npm-global/lib/node_modules/hexo-cli/bin ä¹Ÿå¯ä»¥åŽ»ä¿®æ”¹&#x2F;.zshrc æˆ–è€…&#x2F;.bashrcï¼Œåœ¨é‡Œé¢æ·»åŠ ä¸Šè¿°å‘½ä»¤ï¼Œç„¶åŽ source ~&#x2F;.zshrc å›¾ç‰‡ä¸æ˜¾ç¤ºè¿™ä¸ªå›¾ç‰‡æ€Žä¹ˆå¼„ä¹Ÿæ²¡ç”¨ï¼Œæœ€ç»ˆæŠŠèµ„æºåŒ…ä»Žæ—§çš„ç”µè„‘ï¼Œå¤åˆ¶åˆ°æ–°ç”µè„‘è§£å†³äº† æ‰“å¼€&#x2F;node_modules&#x2F;hexo-asset-image&#x2F;index.jsï¼Œå°†å†…å®¹æ›´æ¢ä¸ºä¸‹é¢çš„ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061&#x27;use strict&#x27;;var cheerio = require(&#x27;cheerio&#x27;);// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-stringfunction getPosition(str, m, i) &#123; return str.split(m, i).join(m).length;&#125;var version = String(hexo.version).split(&#x27;.&#x27;);hexo.extend.filter.register(&#x27;after_post_render&#x27;, function(data)&#123; var config = hexo.config; if(config.post_asset_folder)&#123; var link = data.permalink; if(version.length &gt; 0 &amp;&amp; Number(version[0]) == 3) var beginPos = getPosition(link, &#x27;/&#x27;, 1) + 1; else var beginPos = getPosition(link, &#x27;/&#x27;, 3) + 1; // In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;. var endPos = link.lastIndexOf(&#x27;/&#x27;) + 1; link = link.substring(beginPos, endPos); var toprocess = [&#x27;excerpt&#x27;, &#x27;more&#x27;, &#x27;content&#x27;]; for(var i = 0; i &lt; toprocess.length; i++)&#123; var key = toprocess[i]; var $ = cheerio.load(data[key], &#123; ignoreWhitespace: false, xmlMode: false, lowerCaseTags: false, decodeEntities: false &#125;); $(&#x27;img&#x27;).each(function()&#123; if ($(this).attr(&#x27;src&#x27;))&#123; // For windows style path, we replace &#x27;\\&#x27; to &#x27;/&#x27;. var src = $(this).attr(&#x27;src&#x27;).replace(&#x27;\\\\&#x27;, &#x27;/&#x27;); if(!/http[s]*.*|\\/\\/.*/.test(src) &amp;&amp; !/^\\s*\\//.test(src)) &#123; // For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed. // In addition, to support multi-level local directory. var linkArray = link.split(&#x27;/&#x27;).filter(function(elem)&#123; return elem != &#x27;&#x27;; &#125;); var srcArray = src.split(&#x27;/&#x27;).filter(function(elem)&#123; return elem != &#x27;&#x27; &amp;&amp; elem != &#x27;.&#x27;; &#125;); if(srcArray.length &gt; 1) srcArray.shift(); src = srcArray.join(&#x27;/&#x27;); $(this).attr(&#x27;src&#x27;, config.root + link + src); console.info&amp;&amp;console.info(&quot;update link as:--&gt;&quot;+config.root + link + src); &#125; &#125;else&#123; console.info&amp;&amp;console.info(&quot;no src attr, skipped...&quot;); console.info&amp;&amp;console.info($(this)); &#125; &#125;); data[key] = $.html(); &#125; &#125;&#125;); https://moeci.com/posts/hexo-typora/ https://juejin.cn/post/7006594302604214280 https://www.bilibili.com/video/BV1D7411U7Yk/ å¸è½½æ’ä»¶12npm listnpm uninstall &lt;ä½ çš„æ’ä»¶å&gt; å®‰è£…æ’ä»¶ 1npm install https://github.com/fulsun/hexo-asset-image-master.git --save https://carolinelh.github.io/2019/11/20/hexo%E6%96%87%E7%AB%A0%E5%9B%BE%E7%89%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E7%9A%84%E5%9D%91/ _config.yml 12## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: https://noteforme.github.io // ä¹‹å‰è¿™ä¸ªåœ°å€ä¸å¯¹,å¤šåŠ äº†ä¸œè¥¿ hexo node å‡çº§1234567æœç´¢çŽ°æœ‰nodeç‰ˆæœ¬brew search nodeå®‰è£…æŒ‡å®šç‰ˆæœ¬brew install node@x https://blog.csdn.net/lvqinglou/article/details/115858349 npm-check æ£€æŸ¥å‡çº§ https://ephen.me/2022/blog-updates-plus/ wordpress on mac How to Install WordPress Locally (Windows, Mac, Linux) database name : mysql","categories":[],"tags":[{"name":"BLOG","slug":"BLOG","permalink":"https://noteforme.github.io/tags/BLOG/"}]},{"title":"ContentProvider","slug":"ContentProvider","date":"2017-07-31T01:35:40.000Z","updated":"2021-08-19T11:11:43.768Z","comments":true,"path":"2017/07/31/ContentProvider/","link":"","permalink":"https://noteforme.github.io/2017/07/31/ContentProvider/","excerpt":"","text":"https://developer.android.com/guide/topics/providers/content-provider-basics.html?hl=zh-cn è¿˜éœ€è¦å®Œå–„å•æ¡è®°å½• æŸ¥è¯¢ ä¿®æ”¹ç­‰ä¸€ã€æ–°å»ºæ•°æ®åº“ https://github.com/BlogForMe/AndroidProject/blob/master/ContentProvider/mylibrary/src/main/java/com/hyhy/mylibrary/ArticleDbHelper.javaäºŒã€åˆ›å»ºContentProvider public class ArticlesProvider extends ContentProvider &#123; public static final String AUTHORITY = &quot;com.hyhy.contenttest.db.ArticlesProvider&quot;; //æ ‡è¯†ç‰¹å®šContentProvider,ä½¿ç”¨åŒ…åä½¿ä»–å”¯ä¸€ private static final Uri NOTIFY_URI = Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/&quot; + TABLE_NAME); private static final UriMatcher uriMatcher; /** * Match Code */ public static final int ARTICLE_ALL = 0; public static final int ARTICLE_SINGLE = 1; /** * MIME */ public static final String CONTENT_TYPE = &quot;vnd.android.cursor.dir/vnd.com.hyhy.article&quot;; private static final String CONTENT_ITEM_TYPE = &quot;vnd.android.cursor.item/vnd.com.hyhy.article&quot;; static &#123; uriMatcher = new UriMatcher(UriMatcher.NO_MATCH); uriMatcher.addURI(AUTHORITY, TABLE_NAME, ARTICLE_ALL); //åŒ¹é…è®°å½•é›†åˆ uriMatcher.addURI(AUTHORITY, TABLE_NAME + &quot;/#&quot;, ARTICLE_SINGLE); //åŒ¹é…å•æ¡è®°å½• &#125; private ArticleDbHelper helper; private SQLiteDatabase db; private ContentResolver resolver; @Override public boolean onCreate() &#123; resolver = getContext().getContentResolver(); helper = new ArticleDbHelper(getContext()); return false; &#125; @Nullable @Override public String getType(@NonNull Uri uri) &#123; int match = uriMatcher.match(uri); switch (match) &#123; case ARTICLE_ALL: return CONTENT_TYPE; case ARTICLE_SINGLE: return CONTENT_ITEM_TYPE; default: throw new IllegalArgumentException(&quot;Unknown URI: &quot; + uri); &#125; &#125; @Override public Cursor query(@NonNull Uri uri, @Nullable String[] projection, @Nullable String selection, @Nullable String[] selectionArgs, @Nullable String sortOrder) &#123; db = helper.getReadableDatabase(); int match = uriMatcher.match(uri); switch (match) &#123; case ARTICLE_ALL: //doesn&#39;t need any code in my provider. break; case ARTICLE_SINGLE: // long _id = ContentUris.parseId() break; default: throw new IllegalArgumentException(&quot;Unknown URI: &quot; + uri); &#125; return db.query(TABLE_NAME, projection, selection, selectionArgs, null, null, sortOrder); &#125; @Nullable @Override public Uri insert(@NonNull Uri uri, @Nullable ContentValues values) &#123; int match = uriMatcher.match(uri); if (match != ARTICLE_ALL) &#123; throw new IllegalArgumentException(&quot;Wrong URI:&quot; + uri); &#125; db = helper.getWritableDatabase(); long rowId = db.insert(TABLE_NAME, null, values); if (rowId &gt; 0) &#123; notifyDataChanged(); return ContentUris.withAppendedId(uri, rowId); &#125; return null; &#125; @Override public int delete(@NonNull Uri uri, @Nullable String selection, @Nullable String[] selectionArgs) &#123; return 0; &#125; @Override public int update(@NonNull Uri uri, @Nullable ContentValues values, @Nullable String selection, @Nullable String[] selectionArgs) &#123; return 0; &#125; private void notifyDataChanged() &#123; getContext().getContentResolver().notifyChange(NOTIFY_URI, null); &#125; &#125; é…ç½®Androidmanifest.xml &lt;provider android:name=&quot;.db.ArticlesProvider&quot; android:authorities=&quot;com.hyhy.contenttest.db.ArticlesProvider&quot; android:exported=&quot;true&quot; /&gt; ä¸‰ã€æ“ä½œContentProvider public class MainActivity extends AppCompatActivity &#123; private static final String AUTHORITY = &quot;com.hyhy.contenttest.db.ArticlesProvider&quot;; private static final Uri ARTICLE_ALL_URI = Uri.parse(&quot;content://&quot; + AUTHORITY + &quot;/&quot; + TABLE_NAME); private ContentResolver resolver; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); resolver = getContentResolver(); &#125; public void addDb(View v) &#123; ContentValues values; for (int i = 1; i &lt; 5; i++) &#123; values = new ContentValues(); values.put(ArticleReaderContract.Articles.COLUMN_NAME_ENTRY_ID, i); values.put(ArticleReaderContract.Articles.COLUMN_NAME_TITLE, &quot;heh &quot; + i); values.put(ArticleReaderContract.Articles.COLUMN_NAME_SUBTITLE, &quot;describe &quot; + i); resolver.insert(ARTICLE_ALL_URI, values); &#125; Toast.makeText(MainActivity.this, &quot;æ’å…¥æˆåŠŸ&quot;, Toast.LENGTH_SHORT).show(); &#125; public void btQueryAll(View v) &#123; Cursor c = resolver.query(ARTICLE_ALL_URI, null, null, null, null); while (c.moveToNext()) &#123; System.out.println(c.getString(c.getColumnIndex(COLUMN_NAME_TITLE))); &#125; &#125; &#125; å‚è€ƒ ï¼š http://blog.csdn.net/liuhe688/article/details/7050868 è¿™ä¸€å—è¿˜ä¸ç†Ÿæ‚‰","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"EclipseIdeaWeb","slug":"EclipseIdeaWeb","date":"2017-07-23T11:16:39.000Z","updated":"2021-08-19T11:11:43.802Z","comments":true,"path":"2017/07/23/EclipseIdeaWeb/","link":"","permalink":"https://noteforme.github.io/2017/07/23/EclipseIdeaWeb/","excerpt":"","text":"Eclipseå¯¼å…¥webé¡¹ç›®1ã€srcå¹¶å…¥åŒ…å¯¼å…¥é¡¹ç›®åŽå¯ä»¥çœ‹è¿™ç§æƒ…å†µ â€‹ å¤„ç†æ–¹æ³•ï¼šVideoServerå³é”®ï¼&gt;Build Path-&gt;Configure Build Path-&gt;Source-&gt;Brower-&gt;src-&gt;Apply;æŽ¥ç€å°±å¯ä»¥çœ‹åˆ° ,ç‚¹å‡»YesåŽï¼Œé¡¹ç›®ç›®å½•æ­£å¸¸äº†ï¼Œä½†æ˜¯å‘çŽ°è¿™æ˜¯ä¸€ä¸ªï¼ªavaé¡¹ç›®,æ²¡æœ‰javax.ç›¸å…³çš„åŒ… ï¼’ã€Javaé¡¹ç›®è½¬ï¼·ebé¡¹ç›®VideoServerå³é”®ï¼&gt;Properties-&gt;Project Facets åœ¨è¿™é‡Œå‹¾é€‰ Dynamic Web Module:ä¸‹é¢ä¼šæœ‰ä¸ªæç¤º ï¼¤ynamic Web Module 3.0 Requires Java 1.6 or newer. å‹¾é€‰ ï¼ªava å‹¾é€‰ ï¼ªavaScriptç‚¹å‡»Apply Ideaå®‰è£…http://justcode.ikeepstudying.com/2017/12/%E6%9B%B4%E6%96%B0-intellij-idea-2017-3-1-%E6%B3%A8%E5%86%8C%E7%A0%81-%EF%BC%88%E4%BA%B2%E6%B5%8B%E5%8F%AF%E7%94%A8%EF%BC%89/ http://idea.lanyus.com/ https://www.jetbrains.com/help/idea/developing-a-java-ee-application.html","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]},{"title":"String","slug":"String","date":"2017-07-21T06:54:53.000Z","updated":"2021-08-19T11:11:44.238Z","comments":true,"path":"2017/07/21/String/","link":"","permalink":"https://noteforme.github.io/2017/07/21/String/","excerpt":"","text":"å­—ç¬¦ä¸²è¿žæŽ¥æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ—¶ â€œ + â€œ,å¦ä¸€ç§æ˜¯ StringBuilderæ–¹å¼ å‘½ä»¤è¡Œè¿è¡Œjava å¹³å¸¸ç”¨å¼€å‘å·¥å…·ä¹ æƒ¯äº†ï¼Œéƒ½å¿˜äº†æ€Žä¹ˆç”¨å‘½ä»¤è¡Œè¿è¡Œï¼Œç‰¹æ­¤è®°å½•ä¸‹ æ–°å»º Concatenation.javaæ–‡ä»¶ï¼Œcmdåˆ°è¯¥ç›®å½•ä¸‹ï¼Œå†™å…¥ä»£ç  public class Concatenation&#123; public static void main(String[] args)&#123; String mango = &quot;mango&quot;; String s = &quot;abc&quot; + mango + &quot;def&quot; + 47; System.out.print(s); &#125; &#125; ç”Ÿæˆ Concatenation.calss æ–‡ä»¶ D:\\DemoExo&gt;javac Concatenation.java è¿è¡ŒConcatenation.classæ–‡ä»¶,åŽé¢æ˜¯è¿è¡Œç»“æžœ D:\\DemoExo&gt;java Concatenation abcmangodef47 Stringå­—ç¬¦ä¸²è¿žæŽ¥æ–¹å¼å›žåˆ°ä¸»é¢˜ æŸ¥çœ‹JDKæ–‡æ¡£ï¼ˆä¸çŸ¥é“åœ¨å“ªï¼‰ï¼ŒString ç±»ä¸­æ¯ä¸€ä¸ªçœ‹èµ·æ¥ä¼šä¿®æ”¹Stringå€¼çš„æ–¹æ³•ï¼Œå®žé™…ä¸Šéƒ½æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„Stringå¯¹è±¡,ä»¥åŒ…å«ä¿®æ”¹åŽçš„å­—ç¬¦ä¸²å†…å®¹. public class Immutable&#123; public static String upcase(String s)&#123; return s.toUpperCase(); &#125; public static void println(String q)&#123; System.out.println(q); &#125; public static void main(String[] args)&#123; String q = &quot;howdy&quot;; print(q); // howdy String qq= upcase(q); print(qq); //HOWDY print(q); //howdy &#125; &#125; è¿è¡Œç»“æžœï¼šhowdyHOWDYhowdyå½“æŠŠqä¼ ç»™upcase()æ—¶ï¼Œå®žé™…ä¼ é€’çš„æ˜¯å¼•ç”¨çš„æ‹·è´ ç¼–è¯‘å™¨è¿è¡Œè¿‡ç¨‹åç¼–è¯‘Concatenation,ç”ŸæˆJVMå­—èŠ‚ç  javap -c Concatenation.class å­—èŠ‚ç æ˜¯è¿™æ ·çš„ C:\\DemoExo&gt;javap -c Concatenation.class Compiled from &quot;Concatenation.java&quot; public class Concatenation &#123; public Concatenation(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public static void main(java.lang.String[]); Code: 0: ldc #2 // String mango 2: astore_1 3: new #3 // class java/lang/StringBuilder 6: dup 7: invokespecial #4 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 10: ldc #5 // String abc 12: invokevirtual #6 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 15: aload_1 16: invokevirtual #6 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 19: ldc #7 // String def 21: invokevirtual #6 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 24: bipush 47 26: invokevirtual #8 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder; 29: invokevirtual #9 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 32: astore_2 33: getstatic #10 // Field java/lang/System.out:Ljava/io/PrintStream; 36: aload_2 37: invokevirtual #11 // Method java/io/PrintStream.print:(Ljava/lang/String;)V 40: return &#125; å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨åˆ›å»ºäº†ä¸€ä¸ªStringBuilderå¯¹è±¡,ç”¨ä»¥æž„é€ æœ€ç»ˆçš„Stringï¼Œå¹¶å››æ¬¡è°ƒç”¨äº†append(),æœ€åŽä½¿ç”¨å‘½ä»¤astore_2ç”Ÿæˆ så¯¹è±¡ã€‚è¿™æ ·æ¥çœ‹ï¼Œä½¿ç”¨ â€œ+â€ è¿žæŽ¥ç¬¦ï¼Œæ˜¯ä¸ä¼šå½±å“æ€§èƒ½çš„å’¯ï¼ŒæŽ¥ç€å¾€ä¸‹ â€œ+â€è¿žæŽ¥ç¬¦ å’Œ StringBuilderå¯¹æ¯”è¿è¡Œjavap -c WhitherStringBuilder.class çœ‹åˆ°ä¸¤ä¸ªæ–¹æ³•å¯¹è±¡çš„å­—èŠ‚ç ï¼Œå…ˆçœ‹å‰åŠéƒ¨åˆ†implicit() public class WhitherStringBuilder &#123; public WhitherStringBuilder(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public java.lang.String implicit(java.lang.String[]); Code: 0: ldc #2 // String 2: astore_2 3: iconst_0 4: istore_3 5: iload_3 6: aload_1 7: arraylength 8: if_icmpge 38 11: new #3 // class java/lang/StringBuilder 14: dup 15: invokespecial #4 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 18: aload_2 19: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 22: aload_1 23: iload_3 24: aaload 25: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 28: invokevirtual #6 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; 31: astore_2 32: iinc 3, 1 35: goto 5 38: aload_2 39: areturn ç¬¬8åˆ°35è¡Œï¼Œåœ¨forå¾ªçŽ¯ä½“å†…ï¼Œæ¯ä¸€æ¬¡å¾ªçŽ¯å°±åˆ›å»ºäº†ä¸€ä¸ªStringBuilderå¯¹è±¡ï¼ŒæŽ¥ç€çœ‹çœ‹explicit() public java.lang.String explicit(java.lang.String[]); Code: 0: new #3 // class java/lang/StringBuilder 3: dup 4: invokespecial #4 // Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 7: astore_2 8: iconst_0 9: istore_3 10: iload_3 11: aload_1 12: arraylength 13: if_icmpge 30 16: aload_2 17: aload_1 18: iload_3 19: aaload 20: invokevirtual #5 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder; 23: pop 24: iinc 3, 1 27: goto 10 30: aload_2 31: invokevirtual #6 // Method java/lang/StringBuilder.toString:()Ljava/lang/String; ç¬¬13åˆ°27è¡Œåœ¨forå¾ªçŽ¯ä½“å†…ï¼ŒStringBuilderåªä¼šç”Ÿæˆä¸€ä¸ªå¯¹è±¡ æ€»ç»“ï¼š ç”±æ­¤æ¥çœ‹ï¼Œå¦‚æžœå­—ç¬¦ä¸²æ“ä½œæ¯”è¾ƒç®€å•ï¼Œå°±å¯ä»¥ç”¨â€œ+â€è¿žæŽ¥è®©ç¼–è¯‘å™¨å¤„ç†å­—ç¬¦ä¸²å¦‚æžœåœ¨å¾ªçŽ¯ä¸­ï¼Œé‚£ä¹ˆè‡ªå·±åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ å‚è€ƒï¼šæ‘˜è‡ªThinkInJava4 P286 é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º Stringå¯¹è±¡ æœ€å¥½èƒ½é‡ç”¨å¯¹è±¡è€Œä¸æ˜¯æ¯æ¬¡éœ€è¦çš„æ—¶å€™å°±åˆ›å»ºä¸€ä¸ªåŠŸèƒ½ç›¸åŒçš„æ–°å¯¹è±¡ï¼Œé‡ç”¨æ–¹å¼å³å¿«é€Ÿåˆæµè¡Œã€‚å¦‚æžœå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œå®ƒå§‹ç»ˆå¯ä»¥è¢«é‡ç”¨ã€‚ æžç«¯çš„åé¢ä¾‹å­ ï½€ï¼³tring s = new String(â€œstringetteâ€); //DONâ€™T DO THIS ! ï½€è¯¥è¯­å¥æ¯æ¬¡è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„Stringå®žä¾‹ï¼Œä¼ é€’ç»™Stringæž„é€ å™¨çš„å‚æ•°â€stringetteâ€™æœ¬èº«å°±æ˜¯ä¸€ä¸ªStringå®žä¾‹ï¼Œå¦‚æžœè¿™ç§ç”¨æ³•åœ¨ä¸€ä¸ªå¾ªçŽ¯ä¸­ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªé¢‘ç¹è°ƒç”¨çš„æ–¹æ³•ä¸­ï¼Œå°±ä¼šåˆ›å»ºå‡ºæˆåƒä¸Šä¸‡ä¸å¿…è¦çš„String å®žä¾‹ã€‚ æ”¹è¿›åŽçš„ç‰ˆæœ¬å¦‚ä¸‹æ‰€ç¤º 1String s = &quot;stringette&#x27;; è¿™ä¸ªç‰ˆæœ¬åªç”¨äº†ä¸€ä¸ªStringå®žä¾‹ï¼Œè€Œä¸”å®ƒå¯ä»¥ä¿è¯ï¼Œå¯¹äºŽæ‰€æœ‰çš„åŒä¸€å°è™šæ‹Ÿæœºä¸­è¿è¡Œçš„ä»£ç ï¼Œåªè¦åŒ…å«ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢å¸¸é‡ï¼Œè¯¥å¯¹è±¡å°±ä¼šè¢«é‡ç”¨. è¿”å›žæ•°æ®å¤„ç†å¯¹äºŽåŒæ—¶æä¾›é™æ€å·¥åŽ‚æ–¹æ³•å’Œæž„é€ å™¨çš„ä¸å¯å˜ç±»ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨é™æ€å·¥åŽ‚æ–¹æ³•ï¼Œè€Œä¸æ˜¯æž„é€ å™¨ä»¥é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼Œé™æ€å·¥åŽ‚æ–¹æ³•Boolean.valueof(String)ç”±äºŽæž„é€ å™¨Boolean(String),æž„é€ å™¨æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œé™æ€å·¥åŽ‚æ–¹æ³•åˆ™ä¸ä¼š æˆ‘ä»¬å¹³å¸¸è§£æžå›žæ¥åŽéžStringç±»åž‹çš„æ•°æ®ï¼Œéœ€è¦è½¬æ¢æˆStringå¯¹è±¡ çœ‹åˆ°è¿™é‡ŒåŽå°±éœ€è¦ä½¿ç”¨String.valueof(String) 123456789101112/** * Returns the string representation of the &#123;@code Object&#125; argument. * * @param obj an &#123;@code Object&#125;. * @return if the argument is &#123;@code null&#125;, then a string equal to * &#123;@code &quot;null&quot;&#125;; otherwise, the value of * &#123;@code obj.toString()&#125; is returned. * @see java.lang.Object#toString() */ public static String valueOf(Object obj) &#123; return (obj == null) ? &quot;null&quot; : obj.toString(); &#125; ä»Žæºç ä¸­çœ‹åˆ°å¯¹å½¢å‚ åšäº† nullåˆ¤æ–­ï¼Œæ‰€ä»¥ç”¨è¿™ç§æ–¹å¼é¡µä¸ç”¨æ‹…å¿ƒé—ªé€€çš„æƒ…å†µäº†å‚è€ƒ Effective Java page17 java 8 èŽ·å–å¯¹è±¡æ•°æ® 12345678910111213private WchatMobile decodeMobile(String encryptedData, String iv, String unionid) &#123; WchatMiniAppSession miniAppSession = getWchatMiniAppSession(unionid); String sessionKey = Optional.ofNullable(miniAppSession) .orElseThrow(() -&gt; new ServiceExecutionException(&quot;ç”¨æˆ·å°ç¨‹åºç™»å½•ä¿¡æ¯ä¸ºç©º&quot;)) .getSessionKey(); return Optional.ofNullable(wchatMiniAppService) .map(as -&gt; as.getWxMaService()) .map(s -&gt; s.getUserService()) .map(se -&gt; se.getPhoneNoInfo(sessionKey, encryptedData, iv)) .map(num -&gt; WchatMobile.from(num)) .orElse(null); &#125; https://time.geekbang.org/column/article/209343 äº¨å…ƒæ¨¡å¼Integer a = 1; Integer b = 2; Integer c = 3; Integer d = 3; Integer e = 321; Integer f = 321; Long g = 3L; System.out.println(c==d); System.out.println(e==f); System.out.println(c==(a+b)); System.out.println(c.equals(a+b)); System.out.println(g ==(a+b)); System.out.println(g.equals(a+b));","categories":[{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"}],"tags":[]},{"title":"linux","slug":"linux","date":"2017-07-19T07:03:07.000Z","updated":"2025-06-28T01:04:32.300Z","comments":true,"path":"2017/07/19/linux/","link":"","permalink":"https://noteforme.github.io/2017/07/19/linux/","excerpt":"","text":"Linuxä½¿ç”¨ find ï¼š $ find . -name â€˜my*â€™ æœç´¢å½“å‰ç›®å½•ï¼ˆå«å­ç›®å½•ï¼Œä»¥ä¸‹åŒï¼‰ä¸­ï¼Œæ‰€æœ‰æ–‡ä»¶åä»¥myå¼€å¤´çš„æ–‡ä»¶ã€‚ http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html ubuntu wifiçƒ­ç‚¹http://blog.csdn.net/sunmc1204953974/article/details/45740853 åˆ é™¤buildæ–‡ä»¶find . -name &quot;build&quot; | xargs rm -rf VIMvim-plug Installation12curl -fLo ~/.vim/autoload/plug.vim --create-dirs \\ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim https://github.com/junegunn/vim-plug https://www.bilibili.com/video/BV1NG4y1p74h?spm_id_from=333.788.videopod.episodes&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=18 https://www.bilibili.com/video/BV1sPAAeUE55/?spm_id_from=333.788.player.switch&amp;vd_source=d4c5260002405798a57476b318eccac9&amp;p=8 coc.nvim pluginGitHub - neoclide&#x2F;coc.nvim: Nodejs extension host for vim &amp; neovim, load extensions like VSCode and host language servers. ~&#x2F;.vimrc 123456call plug#begin()&quot; Use release branch (recommended)Plug &#x27;neoclide/coc.nvim&#x27;, &#123;&#x27;branch&#x27;: &#x27;release&#x27;&#125;call plug#end() GitHub - neoclide&#x2F;coc.nvim: Nodejs extension host for vim &amp; neovim, load extensions like VSCode and host language servers. https://www.youtube.com/watch?v=7-dfpQ5sexk debugrequirement vim &gt; 8.1 need gdb installed exmamplecloop.c 12345678#include &lt;stdio.h&gt;int main() &#123; for (int i = 1; i &lt;= 10; i++) &#123; printf(format: &quot;%d\\n&quot;, i); &#125; return 0;&#125; compile 1gcc -g cloop.c -o cloop g++ works too plugin load å‘½ä»¤æ¨¡å¼ä¸‹ 1234// set code line number:set numberpackadd termdebugTermdebug cloop 123456set args your_arg1 your_arg2// setting breakpoint position , in genral in main()b mainrunp i // check value i others command 1234567891011- file bin åŠ è½½åä¸º bin çš„äºŒè¿›åˆ¶æ–‡ä»¶ - CTRL-C ä¸­æ–­ç¨‹åº- run/r è¿è¡Œ- next/n æ‰§è¡Œå½“å‰è¡Œï¼Œåœåœ¨ä¸‹ä¸€è¡Œ ï¼ˆstep overï¼‰- step/s æ‰§è¡Œå½“å‰è¡Œï¼Œè¿›å…¥ä¸‹ä¸€å±‚å‡½æ•° ï¼ˆstep inï¼‰- finish æ‰§è¡Œç›´è‡³ç¦»å¼€å½“å‰å‡½æ•°- where æ˜¾ç¤ºæ ˆ- continue/c ç»§ç»­æ‰§è¡Œ- break/b N åœ¨ç¬¬ N è¡ŒåŠ æ–­ç‚¹- break/b f åœ¨å‡½æ•° f å¤„åŠ æ–­ç‚¹- delete åˆ é™¤æ‰€æœ‰æ–­ç‚¹ https://sourceware.org/gdb/current/onlinedocs/gdb/ https://medium.com/swlh/debugging-c-programs-in-vim-683ec257b9e2 Vim TermDebug Plugin - YouTube Vim Techniques 03 - GDB Debugging right inside Vim - YouTube prepare nodejs1234567sudo npm i -g yarn cd .vim/plugged/coc.nvimyarn installcd ~vim .vimrcCocInstall coc-clangdCocCommand clangd.install reformat codeAs soon you open a file in VIM, just press the â€œgâ€ key twice. This should move the cursor to the beginning of the file. Then hit the â€œ&#x3D;â€ key. Finally, hold â€œshiftâ€ and hit the â€œgâ€ key again. https://www.jimlynchcodes.com/blog/vim-auto-indenting-with-gg-g#:~:text=As%20soon%20you%20open%20a,the%20%22g%22%20key%20again. Search1. Move to the Next Match:After the first match is found, to move to the next match, press: 1n This will move the cursor to the next occurrence of the search pattern. 2. Move to the Previous Match:If you want to move to the previous match, press: 1N 3. Search Backwards:If you want to search backward (from your current cursor position toward the beginning of the file), use: 1?your_pattern Then, use n to move to the previous match (in the reverse direction) and N to move in the opposite direction.","categories":[{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[]},{"title":"ubuntu-mariaDb","slug":"ubuntu-mariaDb","date":"2017-07-18T07:31:21.000Z","updated":"2021-08-19T11:11:44.318Z","comments":true,"path":"2017/07/18/ubuntu-mariaDb/","link":"","permalink":"https://noteforme.github.io/2017/07/18/ubuntu-mariaDb/","excerpt":"","text":"æ•°æ®åº“å¸¸ç”¨ç”¨æ³•W3Cæ•™ç¨‹ : https://www.w3cschool.cn/mariadb/1ã€åˆ›å»º/åˆ é™¤ æ•°æ®åº“ï¼šCREATE DATABASE æ•°æ®åº“å / drop database æ•°æ®åº“å;2ã€å»ºè¡¨/åˆ é™¤è¡¨ ï¼š h_idä¸ºä¸»é”® /DROP TABLE table_name ; MariaDB [person]&gt; CREATE TABLE home_recycler( h_id INT NOT NULL AUTO_INCREMENT, h_title VARCHAR(100) NOT NULL, h_describe VARCHAR(100) NOT NULL, h_imgurl VARCHAR(40) NOT NULL, PRIMARY KEY(h_id) ); Query OK, 0 rows affected (0.29 sec) 3ã€ æ’å…¥æ•°æ® MariaDB [person]&gt; INSERT INTO home_recycler(h_title,h_describable,h_imgurl) VALUES(&#39;1&#39;,&#39;D&#39;,&#39;m&#39;); åˆ é™¤æ•°æ®,åˆ é™¤å…¨éƒ¨è¡¨çš„æ•°æ®å°±ä¸éœ€è¦æ¡ä»¶äº† DELETE FROM home_recycler WHERE product_id=133; æ³¨æ„ï¼šæ’å…¥æ•°æ®ä¹±ç ï¼š åœ¨å‘½ä»¤è¡Œä¹Ÿæ˜¯æ’å…¥æ•°æ®ä¹Ÿæ˜¯ä¸­æ–‡ä¹±ç ï¼Œè§£å†³æ–¹æ³• https://my.oschina.net/u/1011130/blog/864540 é‡å¯æ•°æ®åº“ï¼šhttp://www.cnblogs.com/anseey/archive/2013/04/28/3049785.html ã€ Ubuntuæ•°æ®åº“å®‰è£… æ›´æ–°ç³»ç»Ÿ $ sudo apt update $ sudo apt upgrade å®‰è£…MariaDBï¼š $ sudo apt install mariadb-server ç™»é™†MariaDBå‘½ä»¤è¡Œ $ sudo mysql -u root -p å‚è€ƒï¼šhttp://blog.topspeedsnail.com/archives/6323 https://linux.cn/article-6210-1.html ã€ æ•°æ®åº“æ“ä½œ ç™»å½• ï¼šmysql -u root -p æ•°æ®åº“å¯¼å‡º å¯¼å…¥åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œå¯¼å‡ºå‘½ä»¤ åƒéä¸€å¾‹ éƒ½æ˜¯è¿™æ ·çš„ mysqldump -u username -p dbname &gt; filename.sql ï¼ŒæŒ‰ç…§è¿™ä¸ªæ“ä½œï¼Œè¯­æ³•é”™è¯¯ï¼Œ åœ¨æˆ‘çš„æƒ¯æ€§æ€ç»´ä¸­ï¼Œè§‰å¾—æ˜¯å‘½ä»¤è¡Œç™»å½•æ•°æ®åº“åŽå†å¯¼å‡ºï¼Œå…¶å®žæ˜¯ä¸éœ€è¦ç™»å½•çš„ï¼Œé¦–å…ˆWin + r è¾“å…¥cmd,è¿›å…¥å‘½ä»¤è¡Œ è¾“å…¥ mysqldumpï¼Œå¦‚æžœçœ‹åˆ°ä¸‹é¢è¿™ä¸ª C:\\Users\\Administrator&gt;mysqldump&#39; mysqldump&#39; ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚ è¯´æ˜Žéœ€è¦é…ç½®çŽ¯å¢ƒå˜é‡äº†ï¼Œç±»ä¼¼æˆ‘çš„å°±éœ€è¦ D:\\install\\Mariadb\\binï¼›åŠ å…¥pathè·¯å¾„åŽé¢ ç„¶åŽè¾“å…¥mysqldump ï¼Œ C:\\Users\\Administrator&gt;mysqldump Usage: mysqldump [OPTIONS] database [tables] OR mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...] OR mysqldump [OPTIONS] --all-databases [OPTIONS] For more options, use mysqldump --help ç„¶åŽä¸»é¢˜æ¥äº† mysqldump -u root -p person &gt; &quot;C:\\mysql.sql&quot; rootæ˜¯ç”¨æˆ·å ï¼Œ personæ˜¯æ•°æ®åº“ï¼Œ&gt;åŽé¢æ˜¯å­˜æ”¾ä½ç½® ï¼Œæ ‡å‡†æ ¼å¼æ˜¯è¿™æ ·çš„ mysqldump -u username -p dbname &gt; filename.sql ç„¶åŽå¯¼å…¥ï¼šmysql -u username -p dbname &lt; filename.sql ä½†æ˜¯æˆ‘åœ¨vpså¯¼å…¥åŽæ•°æ®åº“ä¸ºç©º å‚è€ƒï¼š https://www.youtube.com/watch?v=2hsOk0XcYC4 https://john-dugan.com/dump-and-restore-mysql-databases-in-windows/ http://wqss.2008.blog.163.com/blog/static/912428082010102092548409/ MariaDB é…ç½®è¿œç¨‹è®¿é—® æœ‰æ—¶å€™åœ¨å®¶ä¹Ÿè¦æ•´æ•´è¿™äº›çŽ©æ„å„¿ï¼Œä»£ç å¯ä»¥ç”¨githubåŒæ­¥ï¼Œæ¯æ¬¡æ•°æ®åº“æ•°æ®è¿˜å€’è…¾æ¥å€’è…¾åŽ»çš„ ï¼Œå¦‚æžœåœ¨vpsç›´æŽ¥è®¿é—®å°±æœ€å¥½äº† æ‰¾åˆ°é»˜è®¤é…ç½®æ–‡ä»¶ : ç›®çš„æ˜¯è¦æ‰¾åˆ° my.cnf ï¼Œ å¯ä»¥å…ˆ â€œ cd /â€œ ï¼Œåˆ°æ ¹ç›®å½•ä¸‹ ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤ root@TrustingDevoted-VM:/# find -name &quot;my.cnf&quot; ./etc/mysql/my.cnf 2.ä¿®æ”¹my.cnfï¼Œ æ‰¾åˆ°ã€mysqldã€‘ â€ bind-address = 127.0.0.1â€œ ï¼Œå‰é¢åŠ ä¸ªâ€ # â€œå°±å¯ä»¥äº†ï¼Œ æ•™ç¨‹è¯´ â€œskip-networkingâ€å‰é¢ä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ²¡æœ‰å°±ä½œç½¢äº† 3 æŽˆäºˆæƒé™ ï¼Œè¿™é‡ŒæŽˆäºˆçš„æ˜¯183.129.133.0/24æ®µçš„ip GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;183.129.133.%&#39; IDENTIFIED BY &#39;123456&#39; WITH GRANT OPTION; 4 ç»™è¿œç¨‹ä¸»æœºç»™äºˆè¿žæŽ¥ç”¨æˆ·ï¼ŒæŸ¥è¯¢å·²ç»å­˜åœ¨çš„è¿œç¨‹ç”¨æˆ· SELECT User, Host FROM mysql.user WHERE Host &lt;&gt; &#39;localhost&#39;; | User | Host | +-----------+--------------------+ | user_name | % | | root | 127.0.0.1 | | root | 183.129.133.% | | root | ::1 | | root | trustingdevoted-vm | +-----------+--------------------+ â€œuser_nameâ€ æ˜¯ç»™çš„æ‰€æœ‰ç”¨æˆ·æŽˆäºˆçš„ ,â€root æš‚æ—¶ä¸çŸ¥é“æ€Žä¹ˆåˆ é™¤ï¼Œ | 183.129.133.%â€æ˜¯åˆšæ‰æ·»åŠ çš„ï¼Œç„¶åŽ sudo reboot é‡å¯ä¸‹ 5 æœ¬åœ°è¿œç¨‹ç™»å½• mysql -h66.168.1.11 -uroot -p123456 æ³¨æ„ä¸­é—´æ²¡æœ‰ç©ºæ ¼, -h åŽé¢yourVpsIp ,-uåŽé¢ ç”¨æˆ·åï¼Œ -p åŽé¢å¯†ç  å‚è€ƒï¼šhttps://mariadb.com/kb/zh-cn/configuring-mariadb-for-remote-client-access/ http://blog.csdn.net/ithomer/article/details/6976148 http://www.jianshu.com/p/9c175e9293e2 å®‰è£…Navicathttps://www.jianshu.com/p/42a33b0dda9c","categories":[{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[]},{"title":"proxy_wall","slug":"proxy_wall","date":"2017-07-18T06:34:53.000Z","updated":"2025-07-15T14:42:45.739Z","comments":true,"path":"2017/07/18/proxy_wall/","link":"","permalink":"https://noteforme.github.io/2017/07/18/proxy_wall/","excerpt":"","text":"è‡ªä»Žshadowsockså‡ºæ¥ï¼Œæˆ‘ä»¬çš„ä¸Šç½‘é—®é¢˜ç®—æ˜¯è§£å†³äº†ï¼Œé€šè¿‡googleæŸ¥èµ„æ–™ç¡®å®žæ›´ä¾¿åˆ© shadowsockså®‰è£… å¯¹äºŽæ–°æ‰‹ ä½œè€…å»ºè®®å®‰è£…åœ¨ubuntuä¸Šï¼Œé‚£å°±ç”¨ä»–å¼€å§‹å§ æŽ¥ç€å°±å¯ä»¥æ„‰å¿«çš„çŽ©è€äº† å¸è½½shadowsocks å…ˆåœæŽ‰æœåŠ¡ sudo ssserver -d stop ç„¶åŽ pip uninstall shadowsocks shadowsocks-libevå®‰è£…ubuntu 17 12sudo apt updatesudo apt install shadowsocks-libev å¦‚æžœæ˜¯å…¶ä»–ç‰ˆæœ¬å¯ä»¥çœ‹ä¸‹é¢ å‚è€ƒfrom :https://github.com/shadowsocks/shadowsocks-libev#install-from-repository å¯åŠ¨æµ‹è¯•è¿žæŽ¥ å’Œshadowsockså¯åŠ¨ç±»ä¼¼ ssserver æ¢æˆäº† ss-server å¯åŠ¨æµ‹è¯• : ss-server -s 0.0.0.0 -p 8388 -k 123456 -m aes-256-cfb æ²¡æœ‰ -d startå¯èƒ½ä¼šå ç”¨ç«¯å£ é…ç½®æ–‡ä»¶å¯åŠ¨To run in the foreground: ss-server -c /etc/shadowsocks-libev/config.json To run in the background: ï½€nohup ss-server -c &#x2F;etc&#x2F;shadowsocks-libev&#x2F;config.jsonï½€ åœæ­¢è¿è¡Œ: sudo ss-server -d stop é…ç½®ubuntuå¼€æœºå¯åŠ¨ homeä¸‹ æ–°å»º run_server.shè¾“å…¥ 123#!/bin/bashcd /home/jon/shadowsocksr/shadowsockspython local.py -c /etc/shadowsocks.json ä¿®æ”¹è„šæœ¬æƒé™ä¸€å®šè¦è®©è„šæœ¬å…·å¤‡å¯æ‰§è¡Œæƒé™ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š$ sudo chmod 755 run_server.sh å°†è„šæœ¬æ”¾ç½®åœ¨å¯åŠ¨è·¯å¾„ä¸‹å°†run_server.shç§»åŠ¨åˆ°&#x2F;etc&#x2F;init.dè·¯å¾„ä¸‹ï¼Œå¯ä»¥ç›´æŽ¥æ‹·è´ï¼Œä¹Ÿå¯ä»¥é“¾æŽ¥è¿‡åŽ»$ sudo cp run_server.sh /etc/init.d/ å°†è„šæœ¬æ·»åŠ åˆ°å¯åŠ¨è„šæœ¬ã€‚æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼Œåœ¨è¿™é‡Œ90è¡¨æ˜Žä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¶Šé«˜è¡¨ç¤ºæ‰§è¡Œçš„è¶Šæ™š 12$ cd /etc/init.d/$ sudo update-rc.d run_server.sh defaults 90 å¦‚ä½•ç§»é™¤è¯¥è„šæœ¬å¾ˆç®€å•ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š sudo update-rc.d -f run_server.sh remove http://jackqdyulei.github.io/2016/03/06/linux-auto-script/ è®¾ç½®ç³»ç»Ÿå…¨å±€ä»£ç† https://blog.csdn.net/u012810317/article/details/52139361 terminalä»£ç† 12export http_proxy=http://127.0.0.1:7890export https_proxy=http://127.0.0.1:7890 æˆ–è€… git config â€“global http.proxy â€œlocalhost:1080â€ git config â€“global http.proxy â€œlocalhost:1080â€ git clone â€“recurse-submodules &#103;&#105;&#116;&#x40;&#x67;&#105;&#x74;&#x68;&#x75;&#98;&#46;&#x63;&#x6f;&#109;:shadowsocks&#x2F;shadowsocks-android.git ä¿®æ”¹åŒ…å æŠŠapkæ”¹æˆ shadowsocks.apk 1234567![SS_20190DD](E:\\noteforme.github.io\\source\\_posts\\ubuntu_ssr\\SS_20190DD.png)java -jar apktool.jar d shadowsocks.apk //è§£åŒ… //ä¸­é—´åšä¿®æ”¹java -jar apktool.jar b shadowsocks //æ‰“æˆapkå†distç›®å½•ä¸‹jarsigner -verbose -keystore androidTest.jks -signedjar signed.apk AndroidTest.apk test //ç”Ÿæˆç­¾åjarsigner -verbose -keystore androidTest.jks -signedjar signed.apk shadowsockstt.apk test https://blog.csdn.net/huaiyiheyuan/article/details/53114490 windowså…¨å±€ä»£ç†https://www.flyzy2005.com/fan-qiang/shadowsocks/proxifier-with-shadowsocks/ win7ä¸‹ä½¿ç”¨ é¦–å…ˆä¸‹è½½ Microsoft .NET Framework 4.6.2ï¼Œä½†æ˜¯win7ç³»ç»Ÿä¸æ”¯æŒå®‰è£… ä¸‹è½½ éœ€è¦å‡çº§ä¸ºWindows 7 SP1 éœ€è¦åŽ»å®˜ç½‘ä¸‹è½½ Windows 7 SP1 VR INSTALL å®‰è£… https://toutyrater.github.io/prep/install.html Install wget https://install.direct/go.sh sudo bash go.sh 1234567893. check cat /etc/v2ray/config.json you will see the config,I won&#x27;t be change it4. ff $ sudo systemctl start v2ray 1234567891011121314 sudo: unable to resolve host vm8l5. $ cat /etc/hostname vm8lcxg8.hostflyte.com or you could use this[vrä½¿ç”¨](https://github.com/233boy/v2ray/wiki/V2Ray%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B)* macOS useproxyGithub slowly git config --global http.proxy socks5://127.0.0.1:1081 git config â€“global https.proxy socks5:&#x2F;&#x2F;127.0.0.1:1081 123[ç»ˆç«¯ä½¿ç”¨ä»£ç†åŠ é€Ÿçš„æ­£ç¡®æ–¹å¼ï¼ˆClashï¼‰ | Ln&#x27;s Blog](https://weilining.github.io/294.html) export http_proxy&#x3D;http://127.0.0.1:7890 export https_proxy&#x3D;http://127.0.0.1:7890 123456789https://www.jianshu.com/p/5e74b1042b70GitHub é•œåƒ https://github.com/Zenquan/quickgitclonegit clone https://github.com.cnpmjs.org/android/media-samples.git sudo dscacheutil -flushcache 123456Terminal```bashexport http_proxy=&quot;http://127.0.0.1:13658&quot;export https_proxy=&quot;http://127.0.0.1:13658&quot; google æ­å»ºvr æŸ¥çœ‹ç½‘ç»œè¯¦æƒ… -ã€‹é˜²ç«å¢™ æŒ‰ç…§è¿™ä¸ªæ•™ç¨‹ https://zelikk.blogspot.com/2019/01/gcp-v2ray-firewall.html ç½‘ç»œæ ‡è®°å°±é€‰äº†å…¨éƒ¨å®žä¾‹ æ³¨æ„å¤åˆ¶çš„ç«¯å£å· å¸¦ä¸Šäº†é€—å· â€‹ rootèº«ä»½è¿è¡Œ -bash: sudo: command not found 123dpkg -l|grep sudoapt-get install sudosudo apt-get install wget rootè¿è¡Œ 1sudo -i å®‰è£… 123wget https://install.direct/go.shsudo bash go.shsudo systemctl start v2ray è®¾ç½®macç»ˆç«¯èµ°ssræˆ–è€…æ˜¯v2rayä»£ç† http://www.xiaosuiyin.com/2020/02/15/%E8%AE%BE%E7%BD%AEmac%E7%BB%88%E7%AB%AF%E8%B5%B0ssr%E6%88%96%E8%80%85%E6%98%AFv2ray%E4%BB%A3%E7%90%86/ https://github.com/233boy/v2ray/wiki/V2Ray%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E5%9B%BE%E6%96%87%E6%95%99%E7%A8%8B https://github.com/v2fly/fhs-install-v2ray/blob/master/README.zh-Hans-CN.md æ³¨æ„é…ç½® tcpç«¯å£ https://justmysocks3.net wordpress backup - YouTube bridge modehttps://www.bilibili.com/video/BV1wa411H7NJ/ - YouTube V2rayU éœ€è¦å…¨å±€çš„æ‰èµ·ä½œç”¨ [https://pagespr.pages.dev/trojan] [https://workerpr.huaiyiheyuan.workers.dev/trojan123] [https://pagespr.pages.dev/trojan] client needs fragments åˆ†ç‰‡feature ws ç«¯å£(port)ï¼š7ä¸ªhttpç«¯å£å¯ä»»æ„é€‰æ‹©(80ã€8080ã€8880ã€2052ã€2082ã€2086ã€2095) tls ç«¯å£(port)ï¼š6ä¸ªhttpsç«¯å£å¯ä»»æ„é€‰æ‹©(443ã€8443ã€2053ã€2083ã€2087ã€2096) airportFlowerCloudï¼ˆä¸­è½¬æœºåœºï¼‰ 11.LinkCubeï¼ˆä¸­è½¬æœºåœºï¼‰ DuyaoSS-æœºåœºæµ‹é€Ÿå’Œç®€ä»‹ [SS&#x2F;SSR&#x2F;V2Ray&#x2F;Trojan] ã€è”é€šã€‘æ›´æ–°ä¸­ - DuyaoSS-æœºåœºæµ‹é€Ÿå’Œç®€ä»‹ 13.FastLinkï¼ˆä¸­è½¬æœºåœºï¼‰ï¼š è·‘è·¯ FacMataï¼ˆä¸­è½¬æœºåœºï¼‰ é’äº‘æ¢¯ï¼ˆä¸­è½¬æœºåœºï¼‰ 38.ssLinksï¼ˆä¸­è½¬æœºåœºï¼‰ 42.Aladdinï¼ˆä¸­è½¬æœºåœºï¼‰ ã€é«˜ç­‰çº§ä¸“çº¿&#x2F;ä¸“çº¿æœºåœºã€‘Fancy networkï¼š15å…ƒ120G&#x2F;28å…ƒ240G&#x2F;56å…ƒ500G ä¸é™åˆ¶åˆç§Ÿ - æ€§ä»·æ¯”æœºåœºæµ‹é€Ÿ ã€ä¸“çº¿&#x2F;åˆ†ç«™ã€‘V2tunæœºåœºï¼š58å…ƒ&#x2F;å­£&#x2F;æ¯æœˆ200Gæµé‡ ytooåˆ†ç«™&#x2F;æ¯æœˆæ‰“æŠ˜ - æ€§ä»·æ¯”æœºåœºæµ‹é€Ÿ youtulink3 ä¸èƒ½è§£é”max tutugood ä¸èƒ½è§£é” å¾·å›½èŠ‚ç‚¹æœºåœº DuyaoSS-æœºåœºæµ‹é€Ÿå’Œç®€ä»‹ [SS&#x2F;SSR&#x2F;V2Ray&#x2F;Trojan] ã€è”é€šã€‘æ›´æ–°ä¸­ - DuyaoSS-æœºåœºæµ‹é€Ÿå’Œç®€ä»‹ TKV Network ï¼šå¼€å­¦å­£å…¨åœº8æŠ˜ä¼˜æƒ ï¼š PCF7KIY38Y ï¼Œæœ‰æ•ˆæœŸè‡³ï¼š2024-12-31 : ä¸èƒ½è§£é”max ssrcloud. Arisaka : ä¸è¡Œï¼Œå·¥å•æ— å›žåº”ï¼Œæ— å®¢æœã€‚ å¤§å“¥äº‘ : è´­ä¹°ä¸é€€æ¬¾ åº“æ´›ç±³ MITCE : å¯ä»¥è§£é”max,èŠ‚ç‚¹ä¸ç¨³å®š å°æ—‹é£Ž MESL ï¼š ä¸è¡Œ BitzNet æµ‹è¯„ : å¾·å›½ä¸“çº¿ BitzNet ï¼š *netflix***ä¸èƒ½è§£é” ä¸‡è¾¾äº‘ : Americat node unable to unlock hbomax","categories":[{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[]},{"title":"RecyclerView","slug":"RecyclerView","date":"2017-07-17T03:30:18.000Z","updated":"2024-12-24T11:35:45.102Z","comments":true,"path":"2017/07/17/RecyclerView/","link":"","permalink":"https://noteforme.github.io/2017/07/17/RecyclerView/","excerpt":"","text":"Question https://www.bilibili.com/video/BV1Fi4y1x7p5?from=search&amp;seid=3244755609076396172 RecycleViewå¤ç”¨æœºåˆ¶ æ—  é—®é¢˜3 é€‚é…ä¸åŒç±»åž‹çš„Viewå¸ƒå±€ï¼Œå°†ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºä¸Žé€»è¾‘ä»£ç åˆ†ç¦» æ—  åŸºæœ¬ä½¿ç”¨https://github.com/googlesamples/android-RecyclerView http://blog.csdn.net/lmj623565791/article/details/51854533 http://blog.csdn.net/qibin0506/article/details/49716795 æ»‘åŠ¨RecyclerViewç³»åˆ—_è‹ç«ç«ä¸¶çš„åšå®¢-CSDNåšå®¢ æˆ‘ä»¬åœ¨æ‹–åŠ¨DependencyViewçš„æ—¶å€™ï¼ŒImageViewä¹Ÿè·Ÿéšç€DependencyViewç§»åŠ¨ã€‚å½“ç„¶è¿™ç§ä¾èµ–å¹¶éžåªæœ‰ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€å¯¹å¤šæˆ–è€…å¤šå¯¹å¤šã€‚ 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:fitsSystemWindows=&quot;true&quot;&gt; &lt;ImageView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:src=&quot;@mipmap/ic_head&quot; app:layout_behavior=&quot;com.antiphon.recyclerviewdemo.weight.MyBehavior&quot; /&gt; &lt;com.antiphon.recyclerviewdemo.weight.DependencyView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@color/colorAccent&quot; android:padding=&quot;4dp&quot; android:text=&quot;DependencyView&quot; android:textColor=&quot;#fff&quot; android:textSize=&quot;18sp&quot; /&gt;&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt; å¤ç”¨åˆ†æžåˆ†æžonCreateViewHolder onBindViewHolderå’Œ viewæ˜¯æ€Žä¹ˆå¤ç”¨çš„ https://www.jianshu.com/p/ec6585e5220d æ»‘åŠ¨åæ ‡ç¬¬ä¸€ä¸ªå·¦è¾¹ - ç¬¬äºŒä¸ªåæ ‡ æ‰€ä»¥è´Ÿå€¼ ä¸€å®šæ˜¯å¾€ä¸‹æ»‘ ç”¨æ ˆæ•°ç»„ä¿å­˜ä¸åŒç±»åž‹å›žæ”¶çš„view å›žæ”¶æƒ…å†µScrollY ç¬¬ä¸€ä¸ªå¯è§Itemçš„å·¦ä¸Šé¡¶ç‚¹ è·ç¦»å±å¹•å·¦ä¸Šè§’çš„è·ç¦»ã€‚ é¡¶éƒ¨itemå›žæ”¶ å¾€ä¸Šæ»‘åŠ¨ â€‹ å½“é¡¶éƒ¨itemæ»‘å‡ºå±å¹•ï¼ŒScrollYçš„é«˜åº¦ç­‰äºŽç¬¬ä¸€ä¸ªitemé«˜åº¦æ—¶ï¼Œå°±è¢«æ»‘å‡ºäº†å±å¹•ã€‚ â€‹ åº•éƒ¨itemå†æ·»åŠ  ç½‘ä¸Šæ»‘åŠ¨ â€‹ å½“ å±å¹•æ˜¾ç¤ºçš„å‡ ä¸ªItem é•¿åº¦ - ScrollY åˆšå¥½ç­‰äºŽ å±å¹•é«˜åº¦ï¼Œåº•éƒ¨itemä¹‹ä¸‹å†å¼€å§‹æ·»åŠ itemã€‚ â€‹ å› ä¸ºScrollYå˜å¤§. é¡¶éƒ¨itemæ·»åŠ å‘ä¸‹æ»‘åŠ¨ ScrollY &#x3D; é¡¶éƒ¨itemé«˜åº¦ï¼Œé¡¶éƒ¨æ·»åŠ item åº•éƒ¨itemå›žæ”¶ ScrollY &#x3D; åº•éƒ¨itemé«˜åº¦ï¼Œåº•éƒ¨å›žæ”¶ã€‚ Jectpack Paginghttps://developer.android.com/topic/libraries/architecture/paging https://www.youtube.com/watch?v=BE5bsyGGLf4&amp;t=841s https://codelabs.developers.google.com/codelabs/android-paging/index.html?index=..%2F..%2Findex#1 ItemKeyedDataSourceçš„å­ç±»éœ€è¦å®žçŽ°loadInitialã€loadAfterã€loadBeforeå’ŒgetKeyæ–¹æ³•ã€‚å®ƒä»¬åˆ†åˆ«çš„ä½œç”¨å¦‚ä¸‹ï¼š loadInitialï¼šæ­¤æ–¹æ³•ä¹‹åŽåœ¨ç”¨DataSourceæž„å»ºPageListçš„æ—¶å€™æ‰ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚ç”¨äºŽè¿›è¡ŒåŠ è½½åˆå§‹åŒ–ã€‚ loadAfterï¼šåœ¨æ¯æ¬¡RecyclerViewæ»‘åŠ¨åˆ°åº•éƒ¨æ²¡æœ‰æ•°æ®çš„æ—¶å€™å°±ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œæ•°æ®çš„åŠ è½½ã€‚ loadBeforeï¼šåœ¨æ¯æ¬¡RecyclerViewæ»‘åŠ¨åˆ°é¡¶éƒ¨æ²¡æœ‰æ•°æ®çš„æ—¶å€™å°±ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œæ•°æ®çš„åŠ è½½ã€‚ getKey: è¿™è¿”å›žä¸‹ä¸€ä¸ªloadAfterè°ƒç”¨æ‰€éœ€è¦ç”¨åˆ°çš„keyã€‚å°±ç›¸å½“äºŽé“¾è¡¨çš„æŒ‡é’ˆã€‚ https://anriku.top/2018/09/25/Android%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD-Paging%E7%9A%84%E4%BD%BF%E7%94%A8/ https://github.com/fmtjava/Jetpack_GitHub https://github.com/Hankkin/JetPack_Note è§£é‡Š paging diff http://www.jeepxie.net/article/25492.html https://www.jianshu.com/p/bbb96fc62bcd https://www.jianshu.com/p/10bf4bf59122 https://juejin.im/post/5db06bb6518825646d79070b Itemåˆ†ç±»å‰é¢æ·»åŠ header, footerå°±ç”¨åˆ°äº†itemåˆ†ç±»reclverviewä¹Ÿæœ‰å¾ˆå¤šåˆ†ç±»æ–¹å¼ ä½¿ç”¨adapter ç»„åˆè®¾è®¡æ¨¡å¼ï¼Œè¿›è¡Œç»„è£…ï¼Œä»£ç ç®€æ´ï¼Œæ¯”è¾ƒå¥½æ“ä½œå¤šadapteråˆ†ç±» https://github.com/luizgrp/SectionedRecyclerViewAdapterhttp://blog.csdn.net/wzlyd1/article/details/52292548https://github.com/luizgrp/SectionedRecyclerViewAdapter https://github.com/donkingliang/GroupedRecyclerViewAdapter https://mp.weixin.qq.com/s/oCl4BQ8uB9ZDSOEKESM7hA å¤æ‚å¸ƒå±€: https://github.com/385841539/RecycleviewStaggered ç«–ç›´åµŒå¥—æ°´å¹³:https://github.com/drakeet/MultiType/issues/67 previewhttps://medium.com/aubergine-solutions/creating-recyclerview-layout-in-android-no-pain-only-gain-404280471003 12tools:itemCount=&quot;5&quot;tools:listitem=&quot;@layout/adapter_red_pack&quot; 1tools:src=&quot;@sample/RedPack.json/dataList/redEnvelopeMoney&quot; é—®é¢˜ä½¿ç”¨recycleViewä¸­ä¼šé‡åˆ°ä¸€äº›é—®é¢˜,æ€»ç»“ä¸€ä¸‹ é—®é¢˜1ä¸‹æ‹‰åˆ·æ–° æ»‘åŠ¨åˆ—è¡¨ crash ä½¿ç”¨ä¸‹æ‹‰åˆ·æ–°çš„æ—¶å€™ å¾€ä¸Šæ»‘åŠ¨itemä¼šå‡ºçŽ°è¿™æ ·çš„é”™è¯¯ 1234567891011121314151617E/CrashReport: sys default last handle start!FATAL EXCEPTION: main Process: com.huifu, PID: 22865 java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid item position 4(offset:4).state:10 at android.support.v7.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:5504) at android.support.v7.widget.GapWorker.prefetchPositionWithDeadline(GapWorker.java:282) at android.support.v7.widget.GapWorker.flushTaskWithDeadline(GapWorker.java:336) at android.support.v7.widget.GapWorker.flushTasksWithDeadline(GapWorker.java:349) at android.support.v7.widget.GapWorker.prefetch(GapWorker.java:356) at android.support.v7.widget.GapWorker.run(GapWorker.java:387) at android.os.Handler.handleCallback(Handler.java:739) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:148) at android.app.ActivityThread.main(ActivityThread.java:5417) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) åˆ·æ–°ä¹‹åŽæ•°æ®æ¸…ç©ºï¼Œå†æ»‘åŠ¨æ•°æ®å’Œitemä¸ä¸€è‡´, æƒ…å†µæ•°æ®åº”è¯¥åœ¨æ‹¿åˆ°æ•°æ®ä¹‹åŽ, ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼è§£å†³é—®é¢˜ï¼Œ 123456789101112131415 @Override public void onRefresh() &#123;// if (!mProjectList.isEmpty()) &#123;// mProjectList.clear();// &#125; start = 0; loadData(); &#125;//æ‹¿åˆ°æ•°æ®åŽ public void onSuccess(List&lt;Project&gt; projects) &#123; swipeInvest.setRefreshing(false); isloading = false; if (start == 0) mProjectList.clear(); &#125; http://blog.csdn.net/weixiao_812/article/details/78138075 ä¸‹æ‹‰åˆ·æ–°æ—¶å¿«é€Ÿæ»‘åŠ¨å´©æºƒçš„é—®é¢˜è§£å†³ é—®é¢˜2 ç•Œé¢ä¸èƒ½å±•ç¤º ,å’ŒListView ä¸åŒçš„æ˜¯RecyclerViewä¸åŒ,æ²¡è®¾ç½®ä¸‹é¢çš„å‚æ•°æ˜¯ä¸æ˜¾ç¤ºçš„ 12mLayoutManager = new LinearLayoutManager(getActivity());rcvRrecord.setLayoutManager(mLayoutManager); å¦‚æžœè¿˜æ˜¯æ²¡æœ‰å°±çœ‹çœ‹ recycleviewå¸ƒå±€æ˜¯å¦æ˜¾ç¤º https://blog.csdn.net/mjb00000/article/details/106014544 ä¸ç”¨ç­‰æ•°æ®æ¥äº†åŽå†æ˜¾ç¤º https://github.com/leobert-lan/Pandora RecyclerViewæ‹–æ‹½åŠŸèƒ½https://www.jianshu.com/p/9605d14ddcc2 https://www.jianshu.com/p/b9a22f0c537d https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf dragç¦ç”¨ https://github.com/CymChad/BaseRecyclerViewAdapterHelper/issues/3378 BaseRecyclerViewAdapterHelpergetLayoutPosition getAdapterPositionåŒºåˆ« å¦‚æžœç•Œé¢åœ¨notifyDataSetChanged()åˆ·æ–°æ‰€æœ‰æ•°æ®,èŽ·å–çš„adapterPosition æœ‰å¯èƒ½ä¼šæ˜¯-1,è€ŒlayoutPositionèŽ·å–åˆ°çš„è¿˜æ˜¯æ—§çš„å€¼. å¦‚æžœä½¿ç”¨ä½†å¦‚æžœç”¨çš„æ˜¯notifyItemInserted(0),èŽ·å–çš„adapterPositionå°±èƒ½ç«‹åˆ»èŽ·å–åˆ°æ–°çš„å€¼. ä½œè€…ï¼šJimmyZou92é“¾æŽ¥ï¼šhttps://juejin.cn/post/6999213411204595720æ¥æºï¼šç¨€åœŸæŽ˜é‡‘è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚ ã€ä¸–çºªçº ç»“ã€‘Jetpack Compose å’Œè‡ªå®šä¹‰ Viewï¼Œå­¦å“ªä¸ªï¼Ÿ","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"VideoAudio","slug":"VideoAudio","date":"2017-07-14T08:50:09.000Z","updated":"2021-08-19T11:11:44.259Z","comments":true,"path":"2017/07/14/VideoAudio/","link":"","permalink":"https://noteforme.github.io/2017/07/14/VideoAudio/","excerpt":"","text":"å…ˆå®‰è£…codelabsæŠŠæ•´ä¸ªæµç¨‹èµ°ä¸€ä¾¿ï¼Œå¯¹åº“çš„ä½¿ç”¨æœ‰äº†æ•´ä½“çš„è®¤è¯†ï¼Œhttps://codelabs.developers.google.com/codelabs/exoplayer-intro/#1 æŽ¥ç€äº†è§£åŸºæœ¬æ¦‚å¿µ è¯­éŸ³è½¬åŒ– AudioApplication /Applications/VLC.app/Contents/MacOS/VLC â€“demux=rawaud â€“rawaud-channels 1 â€“rawaud-samplerate 44100 /Users/john/Desktop/audio/recording.pcm å£°éŸ³å£°éŸ³ä¸‰è¦ç´ éŸ³è°ƒ : éŸ³é¢‘çš„å¿«æ…¢ ç”·ç”Ÿ &lt; å¥³ç”Ÿ &lt; å„¿ç«¥ éŸ³é‡: æŒ¯åŠ¨çš„å¹…åº¦ éŸ³è‰²: è°æ³¢ PCMé‡‡æ ·å¤§å° ï¼š ä¸€ä¸ªé‡‡æ ·ç”¨å¤šå°‘bitå­˜æ”¾ã€‚å¸¸ç”¨16bit é‡‡æ ·çŽ‡ : é‡‡æ ·é¢‘çŽ‡ 8k , 16k , 32k, 44.1k 48k å£°é“æ•° ï¼š å•å£°é“ ï¼Œ åŒå£°é“ ï¼Œ å¤šå£°é“ WAV![](/Users/john/Documents/noteforme.github.io/source/_posts/VideoAudio/Screen Shot 2021-03-07 at 5.21.18 PM.png) ![](/Users/john/Documents/noteforme.github.io/source/_posts/VideoAudio/Screen Shot 2021-03-07 at 5.23.23 PM.png) é‡‡é›†å‘½ä»¤é‡‡é›†12ffmpeg -f avfoundation -i :0 out.wav //é‡‡é›†ffplay out.wav //æ’­æ”¾","categories":[{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"}],"tags":[]},{"title":"MarkdownStnddard","slug":"Markdown-Standard","date":"2017-07-11T02:46:11.000Z","updated":"2025-02-04T13:55:28.241Z","comments":true,"path":"2017/07/11/Markdown-Standard/","link":"","permalink":"https://noteforme.github.io/2017/07/11/Markdown-Standard/","excerpt":"","text":"first blog ç¬¬ä¸€ç¯‡è¿˜æ²¡å†™ åœ¨CSDNå†™äº†ä¸€å¹´å¤šçš„åšå®¢ä¹Ÿç®—æ˜¯è‡ªå·±åŽ†ç¨‹çš„ç®€å•è®°å½•ï¼Œç«Ÿç„¶èŽ«åå¥‡å¦™çš„å°±è¢«å°äº†ï¼Œå®¢æœè¯´è¢«ç³»ç»Ÿè¯¯å°äº†ï¼ŒæŽ¥ç€å¸®æˆ‘è§£å°ï¼Œç„¶è€Œè‡ªå·±å»ºåšå®¢å°±æå‰æŽ’ä¸Šäº†æ—¥å¸¸ï¼ŒæŽ¥ç€å°±æ˜¯Googleäº†ï¼Œå¥½åœ¨å‡ å¤©å°±å»ºå¥½äº†ï¼Œå¼€å§‹å§ éªšå¹´ï¼ï¼ï¼ ** Markdownè§„èŒƒ** 1a b . DogsAnatomy of the dogCatsAnatomy of the catå‚è€ƒ: http://einverne.github.io/markdown-style-guide/zh.html","categories":[{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"}],"tags":[]}],"categories":[{"name":"CPP","slug":"CPP","permalink":"https://noteforme.github.io/categories/CPP/"},{"name":"OS","slug":"OS","permalink":"https://noteforme.github.io/categories/OS/"},{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/categories/TOOL/"},{"name":"Computer Composition principles","slug":"Computer-Composition-principles","permalink":"https://noteforme.github.io/categories/Computer-Composition-principles/"},{"name":"JETPACK","slug":"JETPACK","permalink":"https://noteforme.github.io/categories/JETPACK/"},{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/categories/ANDROID/"},{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/categories/DesignPattern/"},{"name":"Architecture","slug":"Architecture","permalink":"https://noteforme.github.io/categories/Architecture/"},{"name":"test","slug":"Architecture/test","permalink":"https://noteforme.github.io/categories/Architecture/test/"},{"name":"NETWORK","slug":"NETWORK","permalink":"https://noteforme.github.io/categories/NETWORK/"},{"name":"Library","slug":"Library","permalink":"https://noteforme.github.io/categories/Library/"},{"name":"JAVA","slug":"JAVA","permalink":"https://noteforme.github.io/categories/JAVA/"},{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/categories/LIFE/"},{"name":"INTERVIEW","slug":"INTERVIEW","permalink":"https://noteforme.github.io/categories/INTERVIEW/"},{"name":"NETWORK","slug":"INTERVIEW/NETWORK","permalink":"https://noteforme.github.io/categories/INTERVIEW/NETWORK/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://noteforme.github.io/categories/Kotlin/"},{"name":"DataStructure","slug":"DataStructure","permalink":"https://noteforme.github.io/categories/DataStructure/"},{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/categories/VIEW/"},{"name":"Organization","slug":"Organization","permalink":"https://noteforme.github.io/categories/Organization/"},{"name":"flutter","slug":"flutter","permalink":"https://noteforme.github.io/categories/flutter/"},{"name":"Jetpack","slug":"Jetpack","permalink":"https://noteforme.github.io/categories/Jetpack/"},{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/categories/anim/"},{"name":"TEST","slug":"TEST","permalink":"https://noteforme.github.io/categories/TEST/"},{"name":"BLE","slug":"BLE","permalink":"https://noteforme.github.io/categories/BLE/"},{"name":"LINUX","slug":"LINUX","permalink":"https://noteforme.github.io/categories/LINUX/"}],"tags":[{"name":"AOSP","slug":"AOSP","permalink":"https://noteforme.github.io/tags/AOSP/"},{"name":"BE","slug":"BE","permalink":"https://noteforme.github.io/tags/BE/"},{"name":"DesignPattern","slug":"DesignPattern","permalink":"https://noteforme.github.io/tags/DesignPattern/"},{"name":"Library","slug":"Library","permalink":"https://noteforme.github.io/tags/Library/"},{"name":"LIFE","slug":"LIFE","permalink":"https://noteforme.github.io/tags/LIFE/"},{"name":"permission","slug":"permission","permalink":"https://noteforme.github.io/tags/permission/"},{"name":"ANDROID","slug":"ANDROID","permalink":"https://noteforme.github.io/tags/ANDROID/"},{"name":"compose","slug":"compose","permalink":"https://noteforme.github.io/tags/compose/"},{"name":"LEETCODE","slug":"LEETCODE","permalink":"https://noteforme.github.io/tags/LEETCODE/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"https://noteforme.github.io/tags/RecyclerView/"},{"name":"Fragment","slug":"Fragment","permalink":"https://noteforme.github.io/tags/Fragment/"},{"name":"TOOL","slug":"TOOL","permalink":"https://noteforme.github.io/tags/TOOL/"},{"name":"Performance","slug":"Performance","permalink":"https://noteforme.github.io/tags/Performance/"},{"name":"JVM","slug":"JVM","permalink":"https://noteforme.github.io/tags/JVM/"},{"name":"anim","slug":"anim","permalink":"https://noteforme.github.io/tags/anim/"},{"name":"coroutie","slug":"coroutie","permalink":"https://noteforme.github.io/tags/coroutie/"},{"name":"Assembly","slug":"Assembly","permalink":"https://noteforme.github.io/tags/Assembly/"},{"name":"concurrency","slug":"concurrency","permalink":"https://noteforme.github.io/tags/concurrency/"},{"name":"TouchEvent","slug":"TouchEvent","permalink":"https://noteforme.github.io/tags/TouchEvent/"},{"name":"RxJava","slug":"RxJava","permalink":"https://noteforme.github.io/tags/RxJava/"},{"name":"THINK","slug":"THINK","permalink":"https://noteforme.github.io/tags/THINK/"},{"name":"XML","slug":"XML","permalink":"https://noteforme.github.io/tags/XML/"},{"name":"Activity","slug":"Activity","permalink":"https://noteforme.github.io/tags/Activity/"},{"name":"Test","slug":"Test","permalink":"https://noteforme.github.io/tags/Test/"},{"name":"DB","slug":"DB","permalink":"https://noteforme.github.io/tags/DB/"},{"name":"VIEW","slug":"VIEW","permalink":"https://noteforme.github.io/tags/VIEW/"},{"name":"inter","slug":"inter","permalink":"https://noteforme.github.io/tags/inter/"},{"name":"Operators","slug":"Operators","permalink":"https://noteforme.github.io/tags/Operators/"},{"name":"Drawer","slug":"Drawer","permalink":"https://noteforme.github.io/tags/Drawer/"},{"name":"TabLayout","slug":"TabLayout","permalink":"https://noteforme.github.io/tags/TabLayout/"},{"name":"keyboard","slug":"keyboard","permalink":"https://noteforme.github.io/tags/keyboard/"},{"name":"proguard","slug":"proguard","permalink":"https://noteforme.github.io/tags/proguard/"},{"name":"AndroidNewFeatures","slug":"AndroidNewFeatures","permalink":"https://noteforme.github.io/tags/AndroidNewFeatures/"},{"name":"ENGLISH","slug":"ENGLISH","permalink":"https://noteforme.github.io/tags/ENGLISH/"},{"name":"ConstraintLayout","slug":"ConstraintLayout","permalink":"https://noteforme.github.io/tags/ConstraintLayout/"},{"name":"BLOG","slug":"BLOG","permalink":"https://noteforme.github.io/tags/BLOG/"}]}